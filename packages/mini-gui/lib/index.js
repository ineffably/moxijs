!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("pixi.js")):"function"==typeof define&&define.amd?define(["pixi.js"],e):"object"==typeof exports?exports.miniGui=e(require("pixi.js")):t.miniGui=e(t.PIXI)}(self,(t=>(()=>{var e={5:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringControl=void 0;const o=i(47),s=i(334),r=i(173),n=i(369);class h extends r.Control{_inputBg;_valueLabel;_htmlInput;_editing=!1;constructor(t,e,i,r={}){super(t,e,i,r),this._inputBg=new o.Graphics,this._widget.addChild(this._inputBg),this._valueLabel=new s.UILabel({text:this.getValue(),fontSize:(0,n.px)(6),fontFamily:this.config.fontFamily,color:n.GUI_COLORS.text}),this._widget.addChild(this._valueLabel.container),this._setupInteractions(),this.layout(),this.updateDisplay()}updateDisplay(){return this._valueLabel.setText(this.getValue()),this._renderWidget(),this}_setupInteractions(){this._widget.eventMode="static",this._widget.cursor="text",this._widget.on("pointertap",(()=>{this._disabled||this._editing||this._startEditing()}))}_startEditing(){this._editing=!0,this._htmlInput=document.createElement("input"),this._htmlInput.type="text",this._htmlInput.value=this.getValue(),this._htmlInput.style.position="fixed",this._htmlInput.style.left="-9999px",this._htmlInput.style.top="-9999px",document.body.appendChild(this._htmlInput),this._htmlInput.focus(),this._htmlInput.select(),this._htmlInput.addEventListener("input",(()=>{this._htmlInput&&this.setValue(this._htmlInput.value)})),this._htmlInput.addEventListener("blur",(()=>{this._stopEditing()})),this._htmlInput.addEventListener("keydown",(t=>{"Enter"!==t.key&&"Escape"!==t.key||this._stopEditing()})),this._renderWidget()}_stopEditing(){this._editing&&(this._editing=!1,this._htmlInput&&(this._htmlInput.remove(),this._htmlInput=void 0),this._callOnFinishChange(),this._renderWidget())}_renderWidget(){const t=(0,n.px)(8),e=this._textY+(0,n.px)(3),i=Math.round(e-t/2);this._inputBg.clear(),this._inputBg.roundRect(0,i,this._widgetWidth,t,(0,n.px)(1)),this._inputBg.fill(this._editing?n.GUI_COLORS.accent:n.GUI_COLORS.input),this._inputBg.stroke({color:this._editing?n.GUI_COLORS.accent:n.GUI_COLORS.inputBorder,width:(0,n.px)(.5)}),this._valueLabel.container.x=(0,n.px)(1.5),this._valueLabel.container.y=this._textY}layout(t,e){super.layout(t,e),this._renderWidget()}destroy(){this._stopEditing(),super.destroy()}}e.StringControl=h,e.default=h},6:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptionControl=e.StringControl=e.BooleanControl=e.NumberControl=e.Control=void 0;var o=i(173);Object.defineProperty(e,"Control",{enumerable:!0,get:function(){return o.Control}});var s=i(525);Object.defineProperty(e,"NumberControl",{enumerable:!0,get:function(){return s.NumberControl}});var r=i(542);Object.defineProperty(e,"BooleanControl",{enumerable:!0,get:function(){return r.BooleanControl}});var n=i(5);Object.defineProperty(e,"StringControl",{enumerable:!0,get:function(){return n.StringControl}});var h=i(465);Object.defineProperty(e,"OptionControl",{enumerable:!0,get:function(){return h.OptionControl}})},47:e=>{"use strict";e.exports=t},173:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Control=void 0;const o=i(240),s=i(369);class r extends o.ControlRow{_panel;_object;_property;_initialValue;_name;_disabled=!1;_hidden=!1;_onChange;_onFinishChange;_changed=!1;_listening=!1;_listenFrameId;_listenPrevValue;constructor(t,e,i,o={}){const r=t?.config??s.GUI_CONST,n=o.name??i;super({label:n,config:r}),this._panel=t,this._object=e,this._property=i,this._initialValue=this.getValue(),this._name=n}getValue(){return this._object[this._property]}setValue(t){return this._object[this._property]===t||(this._object[this._property]=t,this._callOnChange(),this.updateDisplay()),this}name(t){return this._name=t,this.setLabel(t),this}onChange(t){return this._onChange=t,this}onFinishChange(t){return this._onFinishChange=t,this}reset(){return this.setValue(this._initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return this._disabled===t||(this._disabled=t,this.container.alpha=t?.5:1,this.container.eventMode=t?"none":"static"),this}show(t=!0){return this._hidden=!t,this.container.visible=t,this}hide(){return this.show(!1)}listen(t=!0){return this._listening=t,void 0!==this._listenFrameId&&(cancelAnimationFrame(this._listenFrameId),this._listenFrameId=void 0),t&&this._listenCallback(),this}save(){return this.getValue()}load(t){return this.setValue(t),this._callOnFinishChange(),this}destroy(){this.listen(!1),this._panel&&this._panel._removeControl(this),this.container.destroy({children:!0})}_callOnChange(){this._panel&&this._panel._callOnChange(this),this._onChange&&this._onChange(this.getValue()),this._changed=!0}_callOnFinishChange(){this._changed&&(this._panel&&this._panel._callOnFinishChange(this),this._onFinishChange&&this._onFinishChange(this.getValue()),this._changed=!1)}_listenCallback=()=>{this._listenFrameId=requestAnimationFrame(this._listenCallback);const t=this.getValue();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}}e.Control=r,e.default=r},240:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GUIHeader=e.GUIBody=e.ControlRow=void 0;var o=i(856);Object.defineProperty(e,"ControlRow",{enumerable:!0,get:function(){return o.ControlRow}});var s=i(304);Object.defineProperty(e,"GUIBody",{enumerable:!0,get:function(){return s.GUIBody}});var r=i(357);Object.defineProperty(e,"GUIHeader",{enumerable:!0,get:function(){return r.GUIHeader}})},304:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GUIBody=void 0;const o=i(47),s=i(334),r=i(369);class n extends s.UIComponent{_collapsed;_content;_mask;_targetHeight=0;_currentHeight=0;_contentHeight=0;_animationSpeed;_animating=!1;_config;_onOpenClose;constructor(t={}){super(),this._config=t.config??r.GUI_CONST,this._collapsed=t.collapsed??!1,this._animationSpeed=t.animationSpeed??8,this._content=new o.Container,this.container.addChild(this._content),this._mask=new o.Graphics,this.container.addChild(this._mask),this._content.mask=this._mask,o.Ticker.shared.add(this._onTick,this)}get content(){return this._content}get collapsed(){return this._collapsed}setContentHeight(t){this._contentHeight=t,this._animating?this._targetHeight=this._collapsed?0:t:(this._collapsed?(this._currentHeight=0,this._targetHeight=0):(this._currentHeight=t,this._targetHeight=t),this._updateMask())}collapse(t=!0){this._collapsed||(this._collapsed=!0,this._targetHeight=0,t&&this._animationSpeed>0?this._animating=!0:(this._currentHeight=0,this._animating=!1,this._updateMask(),this._onOpenClose?.()))}expand(t=!0){this._collapsed&&(this._collapsed=!1,this._targetHeight=this._contentHeight,t&&this._animationSpeed>0?this._animating=!0:(this._currentHeight=this._contentHeight,this._animating=!1,this._updateMask(),this._onOpenClose?.()))}toggle(t=!0){this._collapsed?this.expand(t):this.collapse(t)}onOpenClose(t){return this._onOpenClose=t,this}getVisibleHeight(){return this._currentHeight}_onTick=()=>{if(!this._animating)return;const t=this._targetHeight-this._currentHeight;if(Math.abs(t)<1)return this._currentHeight=this._targetHeight,this._animating=!1,this._updateMask(),void this._onOpenClose?.();const e=this._animationSpeed;this._currentHeight=t>0?Math.min(this._currentHeight+e,this._targetHeight):Math.max(this._currentHeight-e,this._targetHeight),this._updateMask()};_updateMask(){const t=(0,r.px)(this._config.width);this._mask.clear(),this._currentHeight>0&&(this._mask.rect(0,0,t,this._currentHeight),this._mask.fill(16777215))}measure(){return{width:(0,r.px)(this._config.width),height:this._currentHeight}}destroy(){o.Ticker.shared.remove(this._onTick,this),super.destroy()}layout(t,e){this._updateMask()}render(){this._updateMask()}}e.GUIBody=n,e.default=n},308:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GUI=void 0;const o=i(47),s=i(334),r=i(369),n=i(6),h=i(240);class a extends s.UIComponent{_title;_width;config;_closed;_draggable;_closeFolders;_parent;_root;_controls=[];_folders=[];_children=[];_background;_header;_guiBody;_onChange;_onFinishChange;_onOpenClose;constructor(t={}){super(),this._title=t.title??"Controls",this._width=t.width??r.GUI_CONST.width,this._closed=t.closed??!1,this._draggable=t.draggable??!0,this._closeFolders=t.closeFolders??!1,this._parent=t.parent,this._root=this._parent?this._parent._root:this;const e=this._parent?.config;this.config={width:t.width??e?.width??r.GUI_CONST.width,rowHeight:t.rowHeight??e?.rowHeight??r.GUI_CONST.rowHeight,labelRatio:t.labelRatio??e?.labelRatio??r.GUI_CONST.labelRatio,padding:t.padding??e?.padding??r.GUI_CONST.padding,headerHeight:r.GUI_CONST.headerHeight,gap:r.GUI_CONST.gap,border:r.GUI_CONST.border,fontFamily:r.GUI_CONST.fontFamily,fontSize:r.GUI_CONST.fontSize},this._width=this.config.width,this._parent&&(this._parent._children.push(this),this._parent._folders.push(this)),this._background=new o.Graphics,this.container.addChild(this._background),this._header=new h.GUIHeader({title:this._title,config:this.config,draggable:this._draggable&&!this._parent,collapsed:this._closed,isFolder:!!this._parent}),this._header.onToggle((()=>this.toggle())),this._header.onDrag(((t,e)=>{this.container.x+=t,this.container.y+=e})),this.container.addChild(this._header.container),this._guiBody=new h.GUIBody({config:this.config,collapsed:this._closed}),this._guiBody.container.y=(0,r.px)(this.config.headerHeight),this._guiBody.onOpenClose((()=>{this._render(),this._parent&&this._parent._layoutChildren()})),this.container.addChild(this._guiBody.container),void 0!==t.x&&(this.container.x=t.x),void 0!==t.y&&(this.container.y=t.y),this._render()}title(t){return this._title=t,this._header.setTitle(t),this}add(t,e,i,o,s){const r=t[e];let h;if(Array.isArray(i)||"object"==typeof i&&null!==i&&"number"!=typeof i)h=new n.OptionControl(this,t,e,i);else if("boolean"==typeof r)h=new n.BooleanControl(this,t,e);else if("number"==typeof r)h=new n.NumberControl(this,t,e,i,o,s);else{if("string"!=typeof r)throw new Error(`Cannot create control for property "${String(e)}" with value type "${typeof r}"`);h=new n.StringControl(this,t,e)}return this._controls.push(h),this._children.push(h),this._guiBody.content.addChild(h.container),this._layoutChildren(),h}addColor(t,e,i=1){throw new Error("ColorControl not yet implemented. Coming in Phase 3.")}addFolder(t){const e=new a({parent:this,title:t,width:this._width,draggable:!1,closed:this._root._closeFolders});return this._guiBody.content.addChild(e.container),this._layoutChildren(),e}open(t=!0){return this._closed===!t||(this._closed=!t,this._header.setCollapsed(this._closed),this._closed?this._guiBody.collapse():this._guiBody.expand(),this._onOpenClose&&this._onOpenClose(this),this._parent&&this._parent._callOnOpenClose(this),this._render()),this}close(){return this.open(!1)}toggle(){return this.open(this._closed)}onChange(t){return this._onChange=t,this}onFinishChange(t){return this._onFinishChange=t,this}onOpenClose(t){return this._onOpenClose=t,this}reset(t=!0){return(t?this.controllersRecursive():this._controls).forEach((t=>t.reset())),this}save(t=!0){const e={controllers:{},folders:{}};return this._controls.forEach((t=>{e.controllers[t._name]=t.save()})),t&&this._folders.forEach((t=>{e.folders[t._title]=t.save()})),e}load(t,e=!0){const i=t.controllers,o=t.folders;return i&&this._controls.forEach((t=>{const e=t._name;e in i&&t.load(i[e])})),e&&o&&this._folders.forEach((t=>{t._title in o&&t.load(o[t._title])})),this}controllersRecursive(){let t=[...this._controls];for(const e of this._folders)t=t.concat(e.controllersRecursive());return t}foldersRecursive(){let t=[];for(const e of this._folders)t.push(e),t=t.concat(e.foldersRecursive());return t}destroy(){if(this._parent){const t=this._parent._children.indexOf(this);-1!==t&&this._parent._children.splice(t,1);const e=this._parent._folders.indexOf(this);-1!==e&&this._parent._folders.splice(e,1)}this._children.forEach((t=>t.destroy())),this.container.destroy({children:!0})}_callOnChange(t){this._parent&&this._parent._callOnChange(t),this._onChange&&this._onChange({object:t._object,property:t._property,value:t.getValue(),control:t})}_callOnFinishChange(t){this._parent&&this._parent._callOnFinishChange(t),this._onFinishChange&&this._onFinishChange({object:t._object,property:t._property,value:t.getValue(),control:t})}_callOnOpenClose(t){this._parent&&this._parent._callOnOpenClose(t),this._onOpenClose&&this._onOpenClose(t)}_removeControl(t){const e=this._children.indexOf(t);-1!==e&&this._children.splice(e,1);const i=this._controls.indexOf(t);-1!==i&&this._controls.splice(i,1),this._guiBody.content.removeChild(t.container),this._layoutChildren()}_layoutChildren(){let t=0;for(const e of this._children)e.container.y=t,t+=e.measure().height+(0,r.px)(this.config.gap);const e=t+(0,r.px)(this.config.padding);this._guiBody.setContentHeight(e),this._render(),this._parent&&this._parent._layoutChildren()}measure(){return{width:(0,r.px)(this._width),height:(0,r.px)(this.config.headerHeight)+this._guiBody.getVisibleHeight()}}_render(){const{width:t,height:e}=this.measure();this._background.clear(),this._background.roundRect(0,0,t,e,(0,r.px)(1)),this._background.fill(r.GUI_COLORS.background),this._background.stroke({color:r.GUI_COLORS.border,width:(0,r.px)(this.config.border)})}layout(t,e){this._layoutChildren()}render(){this._render()}}e.GUI=a,e.default=a},334:(t,e,i)=>{var o;self,o=t=>(()=>{"use strict";var e={5:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UISelect=void 0;const s=o(i(47)),r=i(531),n=i(243),h=i(851),a=i(479),l=i(669),d=i(160);class c extends r.UIComponent{props;onChange;stateManager;background;label;textInput;arrowIndicator;dropdownContainer;dropdownPanel;optionLabels=[];optionContainers=[];isOpen=!1;highlightedIndex=-1;filteredOptions=[];filterText="";hoverColor;selectedColor;keydownHandler;constructor(t,e){if(super(e),this.props={options:t.options??[],placeholder:t.placeholder??"Select...",width:t.width??200,height:t.height??36,disabled:t.disabled??!1,backgroundColor:t.backgroundColor??16777215,dropdownBackgroundColor:t.dropdownBackgroundColor??t.backgroundColor??16777215,textColor:t.textColor??0,borderRadius:t.borderRadius??4,filterable:t.filterable??!1,allowCustomValue:t.allowCustomValue??!1},this.themeResolver=t.themeResolver,this.stateManager=new d.FormStateManager({value:t.value,defaultValue:t.defaultValue,onChange:t.onChange}),this.enabled=!this.props.disabled,this.onChange=t.onChange,this.hoverColor=this.darkenColor(this.props.backgroundColor,.95),this.selectedColor=this.darkenColor(this.props.backgroundColor,.9),this.tabIndex=0,this.boxModel.width=this.props.width,this.boxModel.height=this.props.height,this.background=new n.UIPanel({backgroundColor:this.props.backgroundColor,width:this.props.width,height:this.props.height,borderRadius:this.props.borderRadius}),this.container.addChild(this.background.container),this.arrowIndicator=new s.default.Graphics,null===this.arrowIndicator.effects&&(this.arrowIndicator.effects=[]),this.updateArrowIndicator(),this.container.addChild(this.arrowIndicator),this.props.filterable){const t=this.getDisplayText();this.textInput=new a.UITextInput({value:t===this.props.placeholder?"":t,placeholder:this.props.placeholder,width:this.props.width-30,height:this.props.height,fontSize:14,backgroundColor:0,textColor:this.props.textColor,placeholderColor:10066329,borderRadius:0,onChange:t=>{this.filterText=t,this.filterOptions(t),this.isOpen&&this.updateDropdown()}},{padding:l.EdgeInsets.symmetric(8,12)}),this.container.addChild(this.textInput.container)}else{const t=this.getDisplayText();this.label=new h.UILabel({text:t,fontSize:14,color:this.stateManager.getValue()?this.props.textColor:10066329,align:"left",fontFamily:"PixelOperator8"},{padding:l.EdgeInsets.symmetric(8,12)}),this.container.addChild(this.label.container)}this.filteredOptions=[...this.props.options],this.setupInteractivity(),this.props.disabled&&(this.enabled=!1,this.updateDisabledVisuals())}getDisplayText(){if(!this.stateManager.getValue())return this.props.placeholder;const t=this.stateManager.getValue(),e=this.props.options.find((e=>e.value===t));return e?e.label:this.props.allowCustomValue?String(t):this.props.placeholder}updateArrowIndicator(){if(!this.arrowIndicator)return;null===this.arrowIndicator.effects&&(this.arrowIndicator.effects=[]),this.arrowIndicator.clear();const t=this.props.width-20,e=this.props.height/2,i=this.themeResolver?.getColor("disabled")??6710886,o=this.props.disabled?i:this.props.textColor;this.isOpen?(this.arrowIndicator.moveTo(t,e-3),this.arrowIndicator.lineTo(t-6,e+3),this.arrowIndicator.lineTo(t+6,e+3)):(this.arrowIndicator.moveTo(t,e+3),this.arrowIndicator.lineTo(t-6,e-3),this.arrowIndicator.lineTo(t+6,e-3)),this.arrowIndicator.closePath(),this.arrowIndicator.fill({color:o})}updateDisabledVisuals(){if(!this.props.disabled){if(this.container.alpha=1,this.background&&this.background.setBackgroundColor(this.props.backgroundColor),this.label&&this.label.setColor(this.props.textColor),this.textInput){const t=this.textInput.textDisplay;t&&(t.style.fill=this.props.textColor)}return void this.updateArrowIndicator()}this.container.alpha=.6,this.background&&this.background.setBackgroundColor(3815994);const t=6710886;if(this.label&&this.label.setColor(t),this.textInput){const e=this.textInput.textDisplay;e&&(e.style.fill=t)}this.updateArrowIndicator()}filterOptions(t){if(!t.trim())return void(this.filteredOptions=[...this.props.options]);const e=t.toLowerCase();this.filteredOptions=this.props.options.filter((t=>t.label.toLowerCase().includes(e)&&!t.disabled)),this.props.allowCustomValue&&t.trim()&&(this.props.options.some((i=>i.label.toLowerCase()===e||i.value===t))||this.filteredOptions.unshift({label:t,value:t}))}setupInteractivity(){this.makeInteractive("pointer"),this.container.on("pointerdown",this.handlePointerDown.bind(this)),"undefined"!=typeof window&&(this.keydownHandler=t=>{if(this.focused&&!this.props.disabled)if(this.isOpen)switch(t.key){case"ArrowDown":t.preventDefault(),t.stopPropagation(),this.highlightNext();break;case"ArrowUp":t.preventDefault(),t.stopPropagation(),this.highlightPrevious();break;case"Enter":case" ":if(t.preventDefault(),t.stopPropagation(),this.highlightedIndex>=0){const t=(this.props.filterable?this.filteredOptions:this.props.options)[this.highlightedIndex];t&&!t.disabled&&this.selectOption(t.value)}else this.props.filterable&&this.props.allowCustomValue&&this.filterText.trim()&&this.selectOption(this.filterText.trim());break;case"Escape":t.preventDefault(),t.stopPropagation(),this.closeDropdown()}else" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),this.openDropdown())},window.addEventListener("keydown",this.keydownHandler))}handlePointerDown(){this.props.disabled||(this.isOpen?this.closeDropdown():this.openDropdown())}highlightNext(){const t=(this.props.filterable?this.filteredOptions:this.props.options).map(((t,e)=>({opt:t,idx:e}))).filter((({opt:t})=>!t.disabled));if(0===t.length)return;const e=this.highlightedIndex>=0?t.findIndex((({idx:t})=>t===this.highlightedIndex)):-1,i=e<t.length-1?e+1:0;this.highlightedIndex=t[i].idx,this.updateHighlight()}highlightPrevious(){const t=(this.props.filterable?this.filteredOptions:this.props.options).map(((t,e)=>({opt:t,idx:e}))).filter((({opt:t})=>!t.disabled));if(0===t.length)return;const e=this.highlightedIndex>=0?t.findIndex((({idx:t})=>t===this.highlightedIndex)):t.length,i=e>0?e-1:t.length-1;this.highlightedIndex=t[i].idx,this.updateHighlight()}updateHighlight(){const t=this.props.filterable?this.filteredOptions:this.props.options;this.optionContainers.forEach(((e,i)=>{const o=e.children[0],s=t[i];s&&i===this.highlightedIndex&&!s.disabled?(o.clear(),o.rect(0,0,this.props.width,32),o.fill({color:this.hoverColor})):(o.clear(),o.rect(0,0,this.props.width,32),o.fill({color:this.props.dropdownBackgroundColor,alpha:1}))}))}openDropdown(){this.isOpen=!0,this.updateArrowIndicator(),this.props.filterable||(this.filterText="",this.filteredOptions=[...this.props.options]),this.dropdownContainer=new s.default.Container,null===this.dropdownContainer.effects&&(this.dropdownContainer.effects=[]),this.dropdownContainer.position.set(0,this.props.height+4);const t=this.props.filterable?this.filteredOptions:this.props.options,e=Math.min(32*t.length,200);this.dropdownPanel=new n.UIPanel({backgroundColor:this.props.dropdownBackgroundColor,width:this.props.width,height:e,borderRadius:this.props.borderRadius}),this.dropdownContainer.addChild(this.dropdownPanel.container),this.optionLabels=[],this.optionContainers=[],this.highlightedIndex=-1,t.forEach(((t,e)=>{const i=new s.default.Container;null===i.effects&&(i.effects=[]),i.position.set(0,32*e);const o=new s.default.Graphics;null===o.effects&&(o.effects=[]),o.rect(0,0,this.props.width,32),o.fill({color:this.props.dropdownBackgroundColor,alpha:0}),i.addChild(o);const r=new h.UILabel({text:t.label,fontSize:14,color:t.disabled?10066329:this.props.textColor,align:"left",fontFamily:"PixelOperator8"},{padding:l.EdgeInsets.symmetric(8,12)});r.layout(this.props.width,32),i.addChild(r.container),t.disabled||(i.eventMode="static",i.cursor="pointer",i.on("pointerover",(()=>{this.highlightedIndex=e,this.updateHighlight()})),i.on("pointerout",(()=>{})),i.on("pointerdown",(()=>{this.selectOption(t.value)}))),this.dropdownContainer.addChild(i),this.optionLabels.push(r),this.optionContainers.push(i)}));const i=t.findIndex((t=>!t.disabled));i>=0&&(this.highlightedIndex=i,this.updateHighlight());const o=this.container.getGlobalPosition();this.dropdownContainer.position.set(o.x,o.y+this.props.height+4);let r=this.container.parent;for(;r&&r.parent;)r=r.parent;r?(r.addChild(this.dropdownContainer),r.setChildIndex(this.dropdownContainer,r.children.length-1)):(this.container.addChild(this.dropdownContainer),this.dropdownContainer.position.set(0,this.props.height+4)),this.setupClickOutside()}updateDropdown(){if(!this.isOpen||!this.dropdownContainer)return;const t=this.isOpen;this.closeDropdown(),t&&this.openDropdown()}closeDropdown(){this.isOpen=!1,this.highlightedIndex=-1,this.updateArrowIndicator(),this.dropdownContainer&&(this.optionContainers.forEach((t=>{null===t.effects&&(t.effects=[])})),null===this.dropdownContainer.effects&&(this.dropdownContainer.effects=[]),this.dropdownPanel&&null===this.dropdownPanel.container.effects&&(this.dropdownPanel.container.effects=[]),this.dropdownContainer.parent&&this.dropdownContainer.parent.removeChild(this.dropdownContainer),this.optionLabels.forEach((t=>{null===t.container.effects&&(t.container.effects=[])})),this.dropdownContainer.destroy({children:!0}),this.dropdownContainer=void 0,this.dropdownPanel=void 0,this.optionLabels=[],this.optionContainers=[]),this.removeClickOutside()}selectOption(t){if(!this.props.disabled){if(this.stateManager.setValue(t),this.props.filterable&&this.textInput){const e=this.props.options.find((e=>e.value===t)),i=e?e.label:this.props.allowCustomValue?String(t):"";this.textInput.setValue(i),this.filterText=i}else this.label&&(this.label.setText(this.getDisplayText()),this.label.setColor(this.props.textColor));this.onChange?.(t),this.closeDropdown()}}setupClickOutside(){let t=this.container.parent;for(;t&&t.parent;)t=t.parent;t&&(t.eventMode="static",t.once("pointerdown",(t=>{const e=t.global,i=this.container.getBounds(),o=this.dropdownContainer?.getBounds(),s=e.x>=i.x&&e.x<=i.x+i.width&&e.y>=i.y&&e.y<=i.y+i.height,r=o&&e.x>=o.x&&e.x<=o.x+o.width&&e.y>=o.y&&e.y<=o.y+o.height;s||r||this.closeDropdown()})))}removeClickOutside(){}darkenColor(t,e){return((t>>16&255)*e<<16|(t>>8&255)*e<<8|(255&t)*e)>>>0}measure(){const t={width:this.props.width,height:this.props.height};return this.layoutEngine.measure(this.boxModel,t)}layout(t,e){const i=this.measure();if(super.layout(t,e),this.background.layout(i.width,i.height),this.props.filterable&&this.textInput){this.textInput.layout(i.width-30,i.height);const t=this.textInput.measure(),e=(i.height-t.height)/2;this.textInput.container.position.set(0,e)}else if(this.label){this.label.layout(i.width-30,i.height);const t=this.label.measure(),e=(i.height-t.height)/2;this.label.container.position.set(0,e)}this.updateArrowIndicator(),this.props.disabled&&this.updateDisabledVisuals(),this.layoutDirty=!1,this.render()}render(){}setValue(t){if(!this.props.disabled)if(this.stateManager.setValue(t),this.props.filterable&&this.textInput){const t=this.getDisplayText();this.textInput.setValue(t===this.props.placeholder?"":t),this.filterText=t===this.props.placeholder?"":t}else this.label&&(this.label.setText(this.getDisplayText()),this.label.setColor(this.props.textColor))}getValue(){return this.stateManager.getValue()}destroy(){this.keydownHandler&&"undefined"!=typeof window&&window.removeEventListener("keydown",this.keydownHandler),this.isOpen&&this.closeDropdown(),null===this.container.effects&&(this.container.effects=[]),this.background&&null===this.background.container.effects&&(this.background.container.effects=[]),this.label&&null===this.label.container.effects&&(this.label.container.effects=[]),this.textInput&&null===this.textInput.container.effects&&(this.textInput.container.effects=[]),this.arrowIndicator&&null===this.arrowIndicator.effects&&(this.arrowIndicator.effects=[]),super.destroy()}setOptions(t){this.props.options=t,this.isOpen&&this.closeDropdown()}}e.UISelect=c},17:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UIButton=e.ButtonState=void 0;const s=o(i(47)),r=i(531),n=i(851),h=i(669),a=i(818),l=i(725);var d;!function(t){t.Normal="normal",t.Hover="hover",t.Pressed="pressed",t.Disabled="disabled"}(d||(e.ButtonState=d={}));class c extends r.UIComponent{props;useBitmapText;bitmapFontFamily;onClick;onHover;state=d.Normal;backgroundStrategy;label;bitmapLabel;labelCenterX=0;labelCenterY=0;keydownHandler;constructor(t={},e){super(e),this.props={label:t.label??"",width:t.width??120,height:t.height??40,backgroundColor:t.backgroundColor??4886754,textColor:t.textColor??16777215,fontSize:t.fontSize??16,borderRadius:t.borderRadius??4,padding:t.padding??h.EdgeInsets.symmetric(8,16),enabled:t.enabled??!0},this.useBitmapText=t.useBitmapText??!1,this.bitmapFontFamily=t.bitmapFontFamily,this.onClick=t.onClick,this.onHover=t.onHover,this.themeResolver=t.themeResolver,this.enabled=this.props.enabled,this.boxModel.width=this.props.width,this.boxModel.height=this.props.height,this.tabIndex=0,t.spriteBackground?this.backgroundStrategy=new l.SpriteBackgroundStrategy(t.spriteBackground,this.props.width,this.props.height):this.backgroundStrategy=new l.SolidColorBackgroundStrategy(this.props.backgroundColor,this.props.width,this.props.height,this.props.borderRadius);const i=this.backgroundStrategy.create(this.props.width,this.props.height);this.container.addChild(i),this.props.label&&(this.useBitmapText&&this.bitmapFontFamily?this.createBitmapLabel():(this.label=new n.UILabel({text:this.props.label,fontSize:this.props.fontSize,color:this.props.textColor,align:"center"},{padding:h.EdgeInsets.zero()}),this.label.container.position.set(0,0),this.container.addChild(this.label.container))),this.setupInteractivity(),this.props.enabled||this.setState(d.Disabled)}createBitmapLabel(){this.bitmapFontFamily&&(this.bitmapLabel=new s.default.BitmapText({text:this.props.label,style:{fontFamily:this.bitmapFontFamily,fontSize:this.props.fontSize,fill:this.props.textColor}}),this.container.addChild(this.bitmapLabel))}setupInteractivity(){this.makeInteractive("pointer"),this.container.on("pointerover",this.handlePointerOver.bind(this)),this.container.on("pointerout",this.handlePointerOut.bind(this)),this.container.on("pointerdown",this.handlePointerDown.bind(this)),this.container.on("pointerup",this.handlePointerUp.bind(this)),this.container.on("pointerupoutside",this.handlePointerUpOutside.bind(this)),"undefined"!=typeof window&&(this.keydownHandler=t=>{this.isFocused()&&this.props.enabled&&("Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.setState(d.Pressed),this.onClick?.(),setTimeout((()=>{this.props.enabled&&this.setState(d.Normal)}),100)))},window.addEventListener("keydown",this.keydownHandler))}handlePointerOver(){this.props.enabled&&this.state===d.Normal&&(this.hovered=!0,this.setState(d.Hover),this.onHover?.())}handlePointerOut(){this.props.enabled&&this.state!==d.Pressed&&(this.hovered=!1,this.setState(d.Normal))}handlePointerDown(){if(this.props.enabled&&(this.pressed=!0,this.setState(d.Pressed),this.canFocus())){const t=a.UIFocusManager.getInstance();t?t.requestFocus(this):this.onFocus()}}handlePointerUp(){this.props.enabled&&(this.pressed=!1,this.hovered=!0,this.setState(d.Hover),this.onClick?.())}handlePointerUpOutside(){this.props.enabled&&(this.pressed=!1,this.hovered=!1,this.setState(d.Normal))}setState(t){this.state=t,this.updateVisuals()}updateVisuals(){this.backgroundStrategy.updateState(this.state);const t=this.state===d.Pressed?2:0;this.state===d.Disabled?this.container.cursor="default":this.container.cursor="pointer",this.label?this.label.container.position.set(this.labelCenterX,this.labelCenterY+t):this.bitmapLabel&&(this.bitmapLabel.x=this.labelCenterX,this.bitmapLabel.y=this.labelCenterY+t)}measure(){return{width:this.props.width,height:this.props.height}}layout(t,e){const i=this.measure();this.computedLayout.width=i.width,this.computedLayout.height=i.height;const o=this.backgroundStrategy.getActualHeight();if(this.label){this.label.layout(i.width,i.height);const t=this.label.getLayout();this.labelCenterX=(i.width-t.width)/2,this.labelCenterY=(o-t.height)/2,this.label.container.position.set(this.labelCenterX,this.labelCenterY)}else this.bitmapLabel&&(this.labelCenterX=(i.width-this.bitmapLabel.width)/2,this.labelCenterY=(o-this.bitmapLabel.height)/2,this.bitmapLabel.x=this.labelCenterX,this.bitmapLabel.y=this.labelCenterY);this.layoutDirty=!1,this.render()}render(){}setLabel(t){this.label?(this.label.setText(t),this.markLayoutDirty()):this.bitmapLabel&&(this.bitmapLabel.text=t,this.markLayoutDirty())}setEnabled(t){this.props.enabled=t,this.enabled=t,this.setState(t?d.Normal:d.Disabled)}getState(){return this.state}destroy(){"undefined"!=typeof window&&this.keydownHandler&&window.removeEventListener("keydown",this.keydownHandler),super.destroy()}}e.UIButton=c},47:e=>{e.exports=t},55:function(t,e,i){var o,s=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i);var s=Object.getOwnPropertyDescriptor(e,i);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,o,s)}:function(t,e,i,o){void 0===o&&(o=i),t[o]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||(o=function(t){return o=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},o(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=o(t),n=0;n<i.length;n++)"default"!==i[n]&&s(e,t,i[n]);return r(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.CardPanel=void 0;const h=n(i(47)),a=i(531),l=i(836);class d extends a.UIComponent{props;cardStyle;colors;backgroundGraphics;headerGraphics;footerGraphics;bodyContainer;footerContainer;bodyMask=null;titleText;titleIcon;isDragging=!1;dragStartPos=new h.Point;dragStartCardPos=new h.Point;isResizing=!1;resizeDirection=null;resizeStartSize={width:0,height:0};resizeStartPos=new h.Point;resizeStartCardPos=new h.Point;onPointerMoveBound;onPointerUpBound;constructor(t,e){super(e),this.props=t,this.cardStyle=t.style??new l.FlatCardStyle,this.colors={background:t.backgroundColor??t.colors?.background??2763306,border:t.colors?.border??4210752,titleBar:t.colors?.titleBar??3355443,titleText:t.colors?.titleText??16777215,footerBackground:t.colors?.footerBackground,accent:t.colors?.accent??4886754,bevel:t.colors?.bevel,innerBorder:t.colors?.innerBorder},this.backgroundGraphics=new h.Graphics,this.headerGraphics=new h.Graphics,this.footerGraphics=new h.Graphics,this.bodyContainer=new h.Container,this.footerContainer=new h.Container,this.container.addChild(this.backgroundGraphics),this.container.addChild(this.headerGraphics),this.container.addChild(this.bodyContainer),this.container.addChild(this.footerGraphics),this.container.addChild(this.footerContainer),this.onPointerMoveBound=this.onPointerMove.bind(this),this.onPointerUpBound=this.onPointerUp.bind(this),this.setupDragging(),this.setupResizing(),this.redraw()}getBodyContainer(){return this.bodyContainer}getFooterContainer(){return this.footerContainer}getBodySize(){return{width:this.props.bodyWidth,height:this.props.bodyHeight}}setBodySize(t,e){this.props.bodyWidth=t,this.props.bodyHeight=e,this.redraw(),this.props.onResize?.(t,e)}setTitle(t){this.props.title||(this.props.title={}),this.props.title.text=t,this.redraw()}setColors(t){Object.assign(this.colors,t),this.redraw()}refresh(){this.redraw()}redraw(){const t=this.cardStyle,e=!(!this.props.title?.text&&!this.props.title?.icon),i=!!this.props.footer,o=this.props.draggable??!1,s=t.getBorderInsets(),r=t.getContentPadding();let n=0;e?n=t.getTitleBarHeight(!0):o&&(n=t.getDragStripHeight());const h=i?this.props.footer?.height??t.getFooterHeight():0,a=s.left+r.left+this.props.bodyWidth+r.right+s.right,l=s.top+n+r.top+this.props.bodyHeight+r.bottom+h+s.bottom;this.backgroundGraphics.clear(),t.drawBackground(this.backgroundGraphics,a,l,this.colors),this.headerGraphics.clear(),e?(t.drawTitleBar(this.headerGraphics,{x:s.left,y:s.top,width:a-s.left-s.right,height:n},this.colors),this.setupHeaderInteractivity(!0),this.renderTitle(s,n)):o?(t.drawDragStrip(this.headerGraphics,{x:s.left,y:s.top,width:a-s.left-s.right,height:n},this.colors),this.setupHeaderInteractivity(!0),this.clearTitle()):this.clearTitle();const d=s.left+r.left,c=s.top+n+r.top;if(this.bodyContainer.position.set(d,c),this.setupBodyMask(d,c),this.footerGraphics.clear(),i){const e=l-s.bottom-h;t.drawFooter(this.footerGraphics,{x:s.left,y:e,width:a-s.left-s.right,height:h},this.colors),this.footerContainer.position.set(s.left+r.left,e+r.top),this.footerContainer.visible=!0}else this.footerContainer.visible=!1;this.computedLayout.width=a,this.computedLayout.height=l}renderTitle(t,e){this.clearTitle();const i=this.props.title;if(!i)return;let o=t.left+8;const s=t.top+e/2;if(i.icon){this.titleIcon=new h.Graphics;const t=i.iconWidth??16;i.icon(this.titleIcon,o,s-t/2,this.colors.titleText,1),this.container.addChild(this.titleIcon),o+=t+4}i.text&&(this.titleText=new h.Text({text:i.text,style:{fontFamily:"Arial",fontSize:14,fill:this.colors.titleText}}),this.titleText.position.set(o,s-this.titleText.height/2),this.container.addChild(this.titleText))}clearTitle(){this.titleText&&(this.container.removeChild(this.titleText),this.titleText.destroy(),this.titleText=void 0),this.titleIcon&&(this.container.removeChild(this.titleIcon),this.titleIcon.destroy(),this.titleIcon=void 0)}setupBodyMask(t,e){this.props.clipContent?(this.bodyMask||(this.bodyMask=new h.Graphics,this.container.addChild(this.bodyMask)),this.bodyMask.clear(),this.bodyMask.rect(t,e,this.props.bodyWidth,this.props.bodyHeight),this.bodyMask.fill({color:16777215}),this.bodyContainer.mask=this.bodyMask):this.bodyMask&&(this.bodyContainer.mask=null)}setupHeaderInteractivity(t){this.headerGraphics.eventMode=t?"static":"auto",this.headerGraphics.cursor=t?"move":"default",this.headerGraphics.removeAllListeners(),t&&this.headerGraphics.on("pointerdown",this.onDragStart.bind(this))}setupDragging(){}onDragStart(t){if(!this.props.draggable)return;this.isDragging=!0,this.dragStartPos.set(t.global.x,t.global.y),this.dragStartCardPos.set(this.container.x,this.container.y),this.props.onFocus?.();const e=this.container.parent;e&&(e.eventMode="static",e.on("pointermove",this.onPointerMoveBound),e.on("pointerup",this.onPointerUpBound),e.on("pointerupoutside",this.onPointerUpBound)),t.stopPropagation()}onPointerMove(t){if(this.isDragging){const e=t.global.x-this.dragStartPos.x,i=t.global.y-this.dragStartPos.y;this.container.position.set(this.dragStartCardPos.x+e,this.dragStartCardPos.y+i)}else this.isResizing&&this.handleResize(t)}onPointerUp(t){this.isDragging&&(this.isDragging=!1,this.props.onMove?.(this.container.x,this.container.y)),this.isResizing&&(this.isResizing=!1,this.resizeDirection=null,this.props.onResize?.(this.props.bodyWidth,this.props.bodyHeight));const e=this.container.parent;e&&(e.off("pointermove",this.onPointerMoveBound),e.off("pointerup",this.onPointerUpBound),e.off("pointerupoutside",this.onPointerUpBound))}setupResizing(){this.props.resizable}handleResize(t){if(!this.resizeDirection)return;const e=t.global.x-this.resizeStartPos.x,i=t.global.y-this.resizeStartPos.y,o=this.props.minWidth??50,s=this.props.minHeight??50;let r=this.resizeStartSize.width,n=this.resizeStartSize.height,h=this.resizeStartCardPos.x,a=this.resizeStartCardPos.y;if(this.resizeDirection.includes("e"))r=Math.max(o,this.resizeStartSize.width+e);else if(this.resizeDirection.includes("w")){const t=Math.min(e,this.resizeStartSize.width-o);r=this.resizeStartSize.width-t,h=this.resizeStartCardPos.x+t}if(this.resizeDirection.includes("s"))n=Math.max(s,this.resizeStartSize.height+i);else if(this.resizeDirection.includes("n")){const t=Math.min(i,this.resizeStartSize.height-s);n=this.resizeStartSize.height-t,a=this.resizeStartCardPos.y+t}this.props.bodyWidth=r,this.props.bodyHeight=n,this.container.position.set(h,a),this.redraw()}measure(){return{width:this.computedLayout.width,height:this.computedLayout.height}}render(){}destroy(){this.clearTitle(),this.bodyMask&&this.bodyMask.destroy(),super.destroy()}}e.CardPanel=d},95:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UIRadioButton=void 0;const s=o(i(47)),r=i(531);class n extends r.UIComponent{props;onChange;selected;isControlled;radioGraphics;dotGraphics;keydownHandler;constructor(t={},e){super(e),this.isControlled=void 0!==t.selected,this.selected=t.selected??t.defaultSelected??!1,this.themeResolver=t.themeResolver;const i=this.themeResolver;this.props={disabled:t.disabled??!1,size:t.size??20,backgroundColor:t.backgroundColor??i?.getColor("background")??16777215,borderColor:t.borderColor??i?.getColor("border")??13421772,selectedColor:t.selectedColor??i?.getColor("selected")??4886754,borderWidth:t.borderWidth??2},this.onChange=t.onChange,this.boxModel.width=this.props.size,this.boxModel.height=this.props.size,this.tabIndex=0,this.radioGraphics=new s.default.Graphics,null===this.radioGraphics.effects&&(this.radioGraphics.effects=[]),this.dotGraphics=new s.default.Graphics,null===this.dotGraphics.effects&&(this.dotGraphics.effects=[]),this.container.addChild(this.radioGraphics),this.container.addChild(this.dotGraphics),this.container.hitArea=new s.default.Rectangle(0,0,this.props.size,this.props.size),this.setupInteractivity(),this.updateVisuals(),this.props.disabled&&(this.enabled=!1,this.container.alpha=.6)}setupInteractivity(){this.makeInteractive("pointer"),this.container.on("pointerover",this.handlePointerOver.bind(this)),this.container.on("pointerout",this.handlePointerOut.bind(this)),this.container.on("pointerdown",this.handlePointerDown.bind(this)),this.container.on("pointerup",this.handlePointerUp.bind(this)),this.container.on("pointerupoutside",this.handlePointerUpOutside.bind(this)),"undefined"!=typeof window&&(this.keydownHandler=t=>{this.focused&&!this.props.disabled&&(" "!==t.key&&"Spacebar"!==t.key||(t.preventDefault(),t.stopPropagation(),this.setSelected(!0)))},window.addEventListener("keydown",this.keydownHandler))}handlePointerOver(){this.props.disabled||this.updateVisuals()}handlePointerOut(){this.props.disabled||this.updateVisuals()}handlePointerDown(){this.props.disabled}handlePointerUp(){this.props.disabled||this.setSelected(!0)}handlePointerUpOutside(){this.props.disabled||this.updateVisuals()}setSelected(t){if(this.props.disabled)return;if(this.isControlled){if(t===this.selected)return;return void this.onChange?.(t)}const e=this.selected;this.selected=t,e!==t&&(this.updateVisuals(),this.onChange?.(t))}getSelected(){return this.selected}updateSelected(t){this.isControlled&&t!==this.selected&&(this.selected=t,this.updateVisuals())}measure(){const t={width:this.props.size,height:this.props.size};return this.layoutEngine.measure(this.boxModel,t)}layout(t,e){super.layout(t,e),this.container.hitArea=new s.default.Rectangle(0,0,this.props.size,this.props.size),"none"!==this.container.eventMode&&"passive"!==this.container.eventMode||(this.container.eventMode="static")}render(){}setDisabled(t){this.props.disabled=t,this.enabled=!t,this.container.alpha=t?.5:1,this.container.cursor=t?"default":"pointer",this.updateVisuals()}updateVisuals(){const t=this.props.size,e=t/2,i="pointer"===this.container.cursor&&!this.props.disabled;(!this.container.hitArea||this.container.hitArea instanceof s.default.Rectangle&&(this.container.hitArea.width!==t||this.container.hitArea.height!==t))&&(this.container.hitArea=new s.default.Rectangle(0,0,t,t)),this.radioGraphics.clear(),this.dotGraphics.clear();const o=this.props.disabled?4473924:i&&!this.selected?10066329:this.props.borderColor;if(this.radioGraphics.circle(e,e,e-this.props.borderWidth/2),this.radioGraphics.stroke({color:o,width:this.props.borderWidth}),this.selected){const t=.4*e,i=this.props.disabled?5592405:this.props.selectedColor;this.dotGraphics.circle(e,e,t),this.dotGraphics.fill({color:i})}this.container.cursor=this.props.disabled?"default":"pointer",this.container.alpha=this.props.disabled?.6:1}destroy(){"undefined"!=typeof window&&this.keydownHandler&&window.removeEventListener("keydown",this.keydownHandler),super.destroy()}}e.UIRadioButton=n},103:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LayoutEngine=void 0;const o=i(669);e.LayoutEngine=class{measure(t,e){const i=t.padding,s=t.border??o.EdgeInsets.zero(),r=e.width+i.horizontal+s.horizontal,n=e.height+i.vertical+s.vertical;let h,a;return h="number"==typeof t.width?t.width:(t.width,r),a="number"==typeof t.height?t.height:(t.height,n),void 0!==t.minWidth&&(h=Math.max(h,t.minWidth)),void 0!==t.minHeight&&(a=Math.max(a,t.minHeight)),{width:h,height:a}}layout(t,e,i,s={x:0,y:0}){const r=t.padding,n=t.border??o.EdgeInsets.zero();let h=e.width,a=e.height;"fill"===t.width&&(h=i.width),"fill"===t.height&&(a=i.height),void 0!==t.maxWidth&&(h=Math.min(h,t.maxWidth)),void 0!==t.maxHeight&&(a=Math.min(a,t.maxHeight)),void 0!==t.minWidth&&(h=Math.max(h,t.minWidth)),void 0!==t.minHeight&&(a=Math.max(a,t.minHeight));const l=r.left+n.left,d=r.top+n.top,c=h-r.horizontal-n.horizontal,u=a-r.vertical-n.vertical;return{x:s.x,y:s.y,width:h,height:a,contentX:l,contentY:d,contentWidth:Math.max(0,c),contentHeight:Math.max(0,u)}}position(t,e){return{...t,x:e.contentX+t.x,y:e.contentY+t.y}}}},152:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UIRadioGroup=void 0;const o=i(531),s=i(301),r=i(669),n=i(946),h=i(160);class a extends o.UIComponent{props;stateManager;radioOptions=[];flexContainer;onChange;constructor(t,e){if(super(e),!t.options||0===t.options.length)throw new Error("UIRadioGroup requires at least one option");this.themeResolver=t.themeResolver,this.stateManager=new h.FormStateManager({value:t.value,defaultValue:t.defaultValue??t.options[0]?.value,onChange:t.onChange});const i=this.themeResolver;this.props={options:t.options,disabled:t.disabled??!1,direction:t.direction??"vertical",gap:t.gap??12,size:t.size??20,fontSize:t.fontSize??16,textColor:t.textColor??i?.getTextColor()??16777215,backgroundColor:t.backgroundColor??i?.getColor("background")??16777215,borderColor:t.borderColor??i?.getColor("border")??13421772,selectedColor:t.selectedColor??i?.getColor("selected")??4886754,labelGap:t.labelGap??8},this.onChange=t.onChange,this.flexContainer=new s.FlexContainer({direction:"horizontal"===this.props.direction?s.FlexDirection.Row:s.FlexDirection.Column,gap:this.props.gap,padding:r.EdgeInsets.zero()}),this.container.addChild(this.flexContainer.container),this.createRadioButtons(),this.boxModel.width="auto",this.boxModel.height="auto"}createRadioButtons(){this.radioOptions.forEach((t=>t.destroy())),this.radioOptions=[];const t=this.themeResolver;this.props.options.forEach((e=>{const i=new n.UIRadioOption({label:e.label,selected:this.stateManager.getValue()===e.value,disabled:this.props.disabled||e.disabled,size:this.props.size,fontSize:this.props.fontSize,textColor:this.props.textColor,backgroundColor:this.props.backgroundColor,borderColor:this.props.borderColor,selectedColor:this.props.selectedColor,labelGap:this.props.labelGap,themeResolver:t,onChange:t=>{t&&this.handleSelection(e.value)}},{padding:r.EdgeInsets.zero()});this.radioOptions.push(i),this.flexContainer.addChild(i)}))}handleSelection(t){this.props.disabled||this.stateManager.getValue()!==t&&(this.stateManager.setValue(t),this.radioOptions.forEach(((e,i)=>{const o=this.props.options[i];e.updateSelected(o.value===t)})))}getValue(){return this.stateManager.getValue()}setValue(t){this.props.disabled||this.handleSelection(t)}updateValue(t){this.stateManager.isControlledMode()&&t!==this.stateManager.getValue()&&(this.stateManager.updateValue(t),this.radioOptions.forEach(((e,i)=>{const o=this.props.options[i];e.updateSelected(o.value===t)})))}setDisabled(t){this.props.disabled=t,this.radioOptions.forEach((e=>e.setDisabled(t)))}measure(){const t=this.flexContainer.measure();return{width:t.width,height:t.height}}layout(t,e){this.flexContainer.layout(t,e),super.layout(t,e),this.render()}render(){}destroy(){this.radioOptions.forEach((t=>t.destroy())),this.flexContainer.destroy(),super.destroy()}}e.UIRadioGroup=a},160:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeApplier=e.TextInputHandler=e.FormStateManager=e.LayoutEngine=void 0;var o=i(103);Object.defineProperty(e,"LayoutEngine",{enumerable:!0,get:function(){return o.LayoutEngine}});var s=i(666);Object.defineProperty(e,"FormStateManager",{enumerable:!0,get:function(){return s.FormStateManager}});var r=i(601);Object.defineProperty(e,"TextInputHandler",{enumerable:!0,get:function(){return r.TextInputHandler}});var n=i(575);Object.defineProperty(e,"ThemeApplier",{enumerable:!0,get:function(){return n.ThemeApplier}})},224:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDefaultDarkTheme=function(){return{background:1973790,panelBackground:2763306,surfaceBackground:3355443,border:4210752,text:16777215,textSecondary:13421772,controlBackground:2763306,controlBorder:4210752,controlText:16777215,controlSelected:4886754,controlHover:3487029,controlFocus:3487029,controlDisabled:3815994,controlDisabledText:6710886,checkboxCheckmark:16777215,textInputPlaceholder:10066329,selectDropdown:2763306,accent:4886754,accentSecondary:6982298,error:14431557,success:2664261}},e.createDefaultLightTheme=function(){return{background:16777215,panelBackground:16119285,surfaceBackground:15658734,border:14540253,text:0,textSecondary:6710886,controlBackground:16777215,controlBorder:14540253,controlText:0,controlSelected:4886754,controlHover:15790320,controlFocus:15790320,controlDisabled:16119285,controlDisabledText:10066329,checkboxCheckmark:16777215,textInputPlaceholder:10066329,selectDropdown:16777215,accent:4886754,accentSecondary:6982298,error:14431557,success:2664261}}},238:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UIScrollContainer=void 0;const s=o(i(47)),r=i(531),n=i(669);class h extends r.UIComponent{props;background;contentContainer;contentMask;scrollbarTrack;scrollbarThumb;children=[];scrollY=0;maxScrollY=0;contentHeight=0;isDragging=!1;dragStartY=0;dragStartScrollY=0;isHoveringThumb=!1;boundGlobalPointerMove=null;boundGlobalPointerUp=null;constructor(t,e){super(e),this.props={width:t.width,height:t.height,backgroundColor:t.backgroundColor??16777215,borderRadius:t.borderRadius??0,scrollbarWidth:t.scrollbarWidth??12,scrollbarTrackColor:t.scrollbarTrackColor??14737632,scrollbarThumbColor:t.scrollbarThumbColor??8947848,scrollbarThumbHoverColor:t.scrollbarThumbHoverColor??5592405,scrollbarAutoHide:t.scrollbarAutoHide??!1,padding:t.padding??n.EdgeInsets.all(0)},this.boxModel.width=this.props.width,this.boxModel.height=this.props.height,this.background=new s.default.Graphics,this.updateBackground(),this.container.addChild(this.background),this.contentContainer=new s.default.Container,this.contentContainer.x=this.props.padding.left,this.contentContainer.y=this.props.padding.top,this.container.addChild(this.contentContainer),this.contentMask=new s.default.Graphics,this.updateMask(),this.container.addChild(this.contentMask),this.contentContainer.mask=this.contentMask,this.scrollbarTrack=new s.default.Graphics,this.scrollbarTrack.eventMode="static",this.scrollbarTrack.cursor="pointer",this.container.addChild(this.scrollbarTrack),this.scrollbarThumb=new s.default.Graphics,this.scrollbarThumb.eventMode="static",this.scrollbarThumb.cursor="pointer",this.container.addChild(this.scrollbarThumb),this.setupInteractivity(),this.updateScrollbar()}updateBackground(){this.background.clear(),this.background.roundRect(0,0,this.props.width,this.props.height,this.props.borderRadius),this.background.fill({color:this.props.backgroundColor})}updateMask(){const t=this.props.width-this.props.padding.left-this.props.padding.right-this.props.scrollbarWidth,e=this.props.height-this.props.padding.top-this.props.padding.bottom;this.contentMask.clear(),this.contentMask.rect(this.props.padding.left,this.props.padding.top,t,e),this.contentMask.fill({color:16777215})}setupInteractivity(){this.makeInteractive("default"),this.container.on("wheel",this.handleWheel.bind(this)),this.scrollbarThumb.on("pointerdown",this.handleThumbPointerDown.bind(this)),this.scrollbarThumb.on("pointerover",(()=>{this.isHoveringThumb=!0,this.updateScrollbar()})),this.scrollbarThumb.on("pointerout",(()=>{this.isDragging||(this.isHoveringThumb=!1,this.updateScrollbar())})),this.scrollbarTrack.on("pointerdown",this.handleTrackPointerDown.bind(this)),"undefined"!=typeof window&&(this.boundGlobalPointerMove=this.handleGlobalPointerMove.bind(this),this.boundGlobalPointerUp=this.handleGlobalPointerUp.bind(this),window.addEventListener("pointermove",this.boundGlobalPointerMove),window.addEventListener("pointerup",this.boundGlobalPointerUp))}handleWheel(t){t.preventDefault();const e=t.deltaY;this.scrollY+=e,this.scrollY=Math.max(0,Math.min(this.maxScrollY,this.scrollY)),this.updateContentPosition(),this.updateScrollbar()}handleThumbPointerDown(t){this.isDragging=!0,this.dragStartY=t.globalY,this.dragStartScrollY=this.scrollY,t.stopPropagation()}handleTrackPointerDown(t){const e=t.globalY-this.container.worldTransform.ty,i=(this.getThumbHeight(),(e-0)/(this.props.height-0));this.scrollY=i*this.maxScrollY,this.scrollY=Math.max(0,Math.min(this.maxScrollY,this.scrollY)),this.updateContentPosition(),this.updateScrollbar()}handleGlobalPointerMove(t){if(!this.isDragging)return;const e=t.clientY-this.dragStartY,i=this.props.height-this.getThumbHeight();if(i<=0)return;const o=e/i*this.maxScrollY;this.scrollY=this.dragStartScrollY+o,this.scrollY=Math.max(0,Math.min(this.maxScrollY,this.scrollY)),this.updateContentPosition(),this.updateScrollbar()}handleGlobalPointerUp(){this.isDragging&&(this.isDragging=!1,this.isHoveringThumb||this.updateScrollbar())}updateContentPosition(){this.contentContainer.y=this.props.padding.top-this.scrollY}getThumbHeight(){if(this.contentHeight<=0)return 0;const t=(this.props.height-this.props.padding.top-this.props.padding.bottom)/this.contentHeight,e=Math.max(30,this.props.height*t);return Math.min(e,this.props.height)}getThumbY(){if(this.maxScrollY<=0)return 0;const t=this.props.height-this.getThumbHeight();return this.scrollY/this.maxScrollY*t}updateScrollbar(){const t=this.props.width-this.props.scrollbarWidth,e=this.props.scrollbarWidth,i=this.props.height;this.scrollbarTrack.clear(),this.scrollbarTrack.rect(t,0,e,i),this.scrollbarTrack.fill({color:this.props.scrollbarTrackColor});const o=this.getThumbHeight(),s=this.getThumbY(),r=this.isHoveringThumb||this.isDragging?this.props.scrollbarThumbHoverColor:this.props.scrollbarThumbColor;this.scrollbarThumb.clear(),this.maxScrollY>0?(this.scrollbarThumb.roundRect(t+2,s+2,e-4,o-4,4),this.scrollbarThumb.fill({color:r}),this.scrollbarThumb.visible=!0):this.scrollbarThumb.visible=!1,!this.props.scrollbarAutoHide||this.isDragging||this.isHoveringThumb?(this.scrollbarTrack.alpha=1,this.scrollbarThumb.alpha=1):(this.scrollbarTrack.alpha=0,this.scrollbarThumb.alpha=0)}updateContentBounds(){let t=0;this.contentContainer.children.forEach((e=>{if(e&&"number"==typeof e.y&&"number"==typeof e.height){const i=e.y+e.height;i>t&&(t=i)}})),this.contentHeight=t;const e=this.props.height-this.props.padding.top-this.props.padding.bottom;this.maxScrollY=Math.max(0,this.contentHeight-e),this.scrollY=Math.max(0,Math.min(this.maxScrollY,this.scrollY)),this.updateContentPosition(),this.updateScrollbar()}addChild(t){t.parent=this,this.children.push(t),this.contentContainer.addChild(t.container);const e=this.props.width-this.props.padding.left-this.props.padding.right-this.props.scrollbarWidth;t.layout(e,999999),this.updateContentBounds()}removeChild(t){t.parent=void 0;const e=this.children.indexOf(t);-1!==e&&this.children.splice(e,1),this.contentContainer.removeChild(t.container),this.updateContentBounds()}scrollTo(t){this.scrollY=Math.max(0,Math.min(this.maxScrollY,t)),this.updateContentPosition(),this.updateScrollbar()}scrollToTop(){this.scrollTo(0)}scrollToBottom(){this.scrollTo(this.maxScrollY)}getScrollY(){return this.scrollY}getMaxScrollY(){return this.maxScrollY}scrollToComponent(t){const e=t.getGlobalBounds(),i=this.getGlobalBounds(),o=e.y-i.y-this.props.padding.top+this.scrollY,s=this.props.height-this.props.padding.top-this.props.padding.bottom;if(o<this.scrollY)this.scrollTo(o);else if(o+e.height>this.scrollY+s){const t=o+e.height-s;this.scrollTo(t)}}measure(){const t={width:this.props.width,height:this.props.height};return this.layoutEngine.measure(this.boxModel,t)}layout(t,e){super.layout(t,e),this.updateContentBounds()}render(){}destroy(){"undefined"!=typeof window&&(this.boundGlobalPointerMove&&(window.removeEventListener("pointermove",this.boundGlobalPointerMove),this.boundGlobalPointerMove=null),this.boundGlobalPointerUp&&(window.removeEventListener("pointerup",this.boundGlobalPointerUp),this.boundGlobalPointerUp=null)),super.destroy()}}e.UIScrollContainer=h},243:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UIPanel=void 0;const s=o(i(47)),r=i(531);class n extends r.UIComponent{props;background;constructor(t={},e){super(e),this.props={backgroundAlpha:t.backgroundAlpha??1,...t},void 0!==t.width&&(this.boxModel.width=t.width),void 0!==t.height&&(this.boxModel.height=t.height),this.createBackground()}createBackground(){if(this.props.texture&&this.props.nineSlice){const{leftWidth:t,topHeight:e,rightWidth:i,bottomHeight:o}=this.props.nineSlice;this.background=new s.default.NineSliceSprite({texture:this.props.texture,leftWidth:t,topHeight:e,rightWidth:i,bottomHeight:o}),this.background.alpha=this.props.backgroundAlpha??1,this.container.addChild(this.background)}else void 0!==this.props.backgroundColor&&(this.background=new s.default.Graphics,this.container.addChild(this.background))}measure(){this.boxModel.padding;let t=0,e=0;"number"==typeof this.boxModel.width?t=this.boxModel.width:void 0!==this.props.width&&(t=this.props.width),"number"==typeof this.boxModel.height?e=this.boxModel.height:void 0!==this.props.height&&(e=this.props.height);const i={width:t,height:e};return this.layoutEngine.measure(this.boxModel,i)}render(){if(!this.background)return;const{width:t,height:e}=this.computedLayout;this.background instanceof s.default.NineSliceSprite?(this.background.width=t,this.background.height=e):this.background instanceof s.default.Graphics&&(this.background.clear(),this.props.borderRadius&&this.props.borderRadius>0?this.background.roundRect(0,0,t,e,this.props.borderRadius):this.background.rect(0,0,t,e),void 0!==this.props.backgroundColor&&this.background.fill({color:this.props.backgroundColor,alpha:this.props.backgroundAlpha}))}setBackgroundColor(t,e=1){this.background instanceof s.default.Graphics&&(this.props.backgroundColor=t,this.props.backgroundAlpha=e,this.render())}setTexture(t){this.background instanceof s.default.NineSliceSprite&&(this.background.texture=t)}}e.UIPanel=n},272:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FlatCardStyle=e.BaseCardStyle=e.CardPanel=void 0;var o=i(55);Object.defineProperty(e,"CardPanel",{enumerable:!0,get:function(){return o.CardPanel}});var s=i(532);Object.defineProperty(e,"BaseCardStyle",{enumerable:!0,get:function(){return s.BaseCardStyle}});var r=i(836);Object.defineProperty(e,"FlatCardStyle",{enumerable:!0,get:function(){return r.FlatCardStyle}})},288:function(t,e,i){var o,s=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i);var s=Object.getOwnPropertyDescriptor(e,i);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,o,s)}:function(t,e,i,o){void 0===o&&(o=i),t[o]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||(o=function(t){return o=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},o(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=o(t),n=0;n<i.length;n++)"default"!==i[n]&&s(e,t,i[n]);return r(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.UILayer=void 0;const h=n(i(47)),a=i(828);class l extends h.Container{scaleMode;targetWidth;targetHeight;initialBoundsRecorded=!1;constructor(t={}){super(),this.scaleMode=t.scaleMode??a.UIScaleMode.None,this.targetWidth=t.targetWidth,this.targetHeight=t.targetHeight}updateScale(t,e){if(this.scaleMode===a.UIScaleMode.None)return void this.scale.set(1,1);if(!this.initialBoundsRecorded&&this.children.length>0){if(!this.targetWidth||!this.targetHeight){const t=this.getLocalBounds();this.targetWidth=this.targetWidth??t.width,this.targetHeight=this.targetHeight??t.height}this.initialBoundsRecorded=!0}if(!this.targetWidth||!this.targetHeight)return;const i=t/this.targetWidth,o=e/this.targetHeight;switch(this.scaleMode){case a.UIScaleMode.ScaleUI:this.scale.set(i,o);break;case a.UIScaleMode.LockRatio:const s=Math.min(i,o);this.scale.set(s,s),this.position.set((t-this.targetWidth*s)/2,(e-this.targetHeight*s)/2)}}addChild(...t){const e=super.addChild(...t);return this.initialBoundsRecorded=!1,e}}e.UILayer=l},301:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FlexContainer=e.FlexAlign=e.FlexJustify=e.FlexDirection=void 0;const o=i(531),s=i(669);var r,n,h;!function(t){t.Row="row",t.RowReverse="row-reverse",t.Column="column",t.ColumnReverse="column-reverse"}(r||(e.FlexDirection=r={})),function(t){t.Start="start",t.End="end",t.Center="center",t.SpaceBetween="space-between",t.SpaceAround="space-around",t.SpaceEvenly="space-evenly"}(n||(e.FlexJustify=n={})),function(t){t.Start="start",t.End="end",t.Center="center",t.Stretch="stretch"}(h||(e.FlexAlign=h={}));class a extends o.UIComponent{props;children=[];constructor(t={}){super({padding:t.padding??s.EdgeInsets.zero(),width:t.width??"auto",height:t.height??"auto"}),this.props={direction:t.direction??r.Row,justify:t.justify??n.Start,align:t.align??h.Start,gap:t.gap??0,wrap:t.wrap??!1}}addChild(t){t.parent=this,this.children.push(t),this.container.addChild(t.container),this.markLayoutDirty()}removeChild(t){const e=this.children.indexOf(t);-1!==e&&(this.children.splice(e,1),this.container.removeChild(t.container),t.parent=void 0,this.markLayoutDirty())}measure(){if(0===this.children.length){const t=this.boxModel.padding;return{width:t.horizontal,height:t.vertical}}const t=this.children.map((t=>t.measure())),{direction:e,gap:i}=this.props,o=this.boxModel.padding,s=e===r.Row||e===r.RowReverse,n=i*(this.children.length-1);let h=0,a=0;return s?(h=t.reduce(((t,e)=>t+e.width),0)+n,a=Math.max(...t.map((t=>t.height)))):(h=Math.max(...t.map((t=>t.width))),a=t.reduce(((t,e)=>t+e.height),0)+n),{width:h+o.horizontal,height:a+o.vertical}}layout(t,e){const i=this.boxModel.padding,{direction:o,justify:s,align:r,gap:n}=this.props;let h,a;h="fill"===this.boxModel.width?t:"number"==typeof this.boxModel.width?this.boxModel.width:this.measure().width,a="fill"===this.boxModel.height?e:"number"==typeof this.boxModel.height?this.boxModel.height:this.measure().height,this.computedLayout.width=h,this.computedLayout.height=a,this.computedLayout.contentX=i.left,this.computedLayout.contentY=i.top,this.computedLayout.contentWidth=h-i.horizontal,this.computedLayout.contentHeight=a-i.vertical,this.children.length>0&&this.layoutChildren(),this.layoutDirty=!1,this.render()}layoutChildren(){const{direction:t,justify:e,align:i,gap:o}=this.props,s=this.boxModel.padding,a=this.computedLayout.contentWidth,l=this.computedLayout.contentHeight,d=t===r.Row||t===r.RowReverse,c=this.children.map((t=>t.measure())),u=o*(this.children.length-1),p=d?c.reduce(((t,e)=>t+e.width),0):c.reduce(((t,e)=>t+e.height),0),g=d?l:a,b=(d?a:l)-p-u;let f=0,C=0;switch(e){case n.Start:f=0;break;case n.End:f=b;break;case n.Center:f=b/2;break;case n.SpaceBetween:C=this.children.length>1?b/(this.children.length-1):0;break;case n.SpaceAround:C=b/this.children.length,f=C/2;break;case n.SpaceEvenly:C=b/(this.children.length+1),f=C}let m=f;this.children.forEach(((t,e)=>{const r=c[e];t.layout(r.width,r.height);let n=0;switch(i){case h.Start:n=0;break;case h.End:n=g-(d?r.height:r.width);break;case h.Center:n=(g-(d?r.height:r.width))/2;break;case h.Stretch:n=0}d?(t.setPosition(s.left+m,s.top+n),m+=r.width+o+C):(t.setPosition(s.left+n,s.top+m),m+=r.height+o+C)}))}render(){}}e.FlexContainer=a},375:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UITextArea=void 0;const s=o(i(47)),r=i(531),n=i(243),h=i(818),a=i(410),l=i(160);class d extends r.UIComponent{props;stateManager;inputHandler;background;textDisplay;cursor;cursorBlinkInterval;cursorVisible=!0;colorOverrides={};constructor(t,e){super(e);const i=t.lineHeight??1.2,o=(t.rows??4)*(t.fontSize??14)*i+24;this.props={placeholder:t.placeholder??"",maxLength:t.maxLength??1e3,width:t.width??400,height:t.height??o,disabled:t.disabled??!1,backgroundColor:t.backgroundColor??16777215,textColor:t.textColor??0,placeholderColor:t.placeholderColor??10066329,borderRadius:t.borderRadius??4,fontSize:t.fontSize??14,lineHeight:i,rows:t.rows??4},this.colorOverrides={backgroundColor:t.backgroundColor,textColor:t.textColor,placeholderColor:t.placeholderColor},this.themeResolver=t.themeResolver,this.stateManager=new l.FormStateManager({value:t.value,defaultValue:t.defaultValue,onChange:t.onChange}),this.inputHandler=new l.TextInputHandler({stateManager:this.stateManager,maxLength:this.props.maxLength,type:"text",multiline:!0}),this.enabled=!this.props.disabled,this.boxModel.width=this.props.width,this.boxModel.height=this.props.height,this.createVisuals(),this.cursor=new s.default.Graphics,this.cursor.visible=!1,this.container.addChild(this.cursor),this.setupInteractivity()}createVisuals(){const t=this.resolveColor("background",this.colorOverrides.backgroundColor);this.background=new n.UIPanel({backgroundColor:t,width:this.props.width,height:this.props.height,borderRadius:this.props.borderRadius}),this.container.addChild(this.background.container);const e=this.getDisplayText(),i=e===this.props.placeholder?this.resolvePlaceholderColor(this.colorOverrides.placeholderColor):this.resolveTextColor(this.colorOverrides.textColor);this.textDisplay=(0,a.asTextDPR)({text:e,style:{fontFamily:"PixelOperator8",fontSize:this.props.fontSize,fill:i,align:"left",wordWrap:!0,wordWrapWidth:2*(this.props.width-24),lineHeight:this.props.fontSize*this.props.lineHeight*2},dprScale:2,pixelPerfect:!0}),this.textDisplay.position.set(12,12),this.textDisplay.roundPixels=!0,this.container.addChild(this.textDisplay)}getDisplayText(){return this.stateManager.getValue()||this.props.placeholder}setupInteractivity(){this.makeInteractive("text"),this.container.on("pointerdown",this.handlePointerDown.bind(this)),"undefined"!=typeof window&&window.addEventListener("keydown",this.handleKeyDown.bind(this))}handlePointerDown(t){if(this.props.disabled)return;const e=h.UIFocusManager.getInstance();e?e.requestFocus(this):this.onFocus(),t.stopPropagation()}onFocus(){this.focused||(super.onFocus(),this.inputHandler.setCursorPosition(this.stateManager.getValue().length),this.cursor.visible=!0,this.updateCursor(),this.startCursorBlink(),this.updateBackground())}onBlur(){this.focused&&(super.onBlur(),this.cursor.visible=!1,this.stopCursorBlink(),this.updateBackground())}handleKeyDown(t){this.focused&&!this.props.disabled&&"Tab"!==t.key&&("Escape"!==t.key?this.inputHandler.handleKeyDown(t)&&(t.preventDefault(),t.stopPropagation(),this.updateText(),this.updateCursor()):this.onBlur())}updateText(){const t=this.stateManager.getValue(),e=this.getDisplayText();this.textDisplay.text=e;const i=t?this.resolveTextColor(this.colorOverrides.textColor):this.resolvePlaceholderColor(this.colorOverrides.placeholderColor);this.textDisplay.style.fill=i,this.updateCursor()}updateBackground(){const t=this.focused?this.resolveColor("focus",this.colorOverrides.backgroundColor):this.resolveColor("background",this.colorOverrides.backgroundColor),e=this.background;this.background=new n.UIPanel({backgroundColor:t,width:this.props.width,height:this.props.height,borderRadius:this.props.borderRadius});const i=this.container.getChildIndex(e.container);this.container.removeChild(e.container),this.container.addChildAt(this.background.container,i),e.destroy()}updateCursor(){const t=this.stateManager.getValue(),e=this.inputHandler.getCursorPosition(),i=t.substring(0,e),o=new s.default.Text({text:i,style:{fontFamily:"PixelOperator8",fontSize:2*this.props.fontSize,fill:this.textDisplay.style.fill,align:"left",wordWrap:!0,wordWrapWidth:2*(this.props.width-24),lineHeight:this.props.fontSize*this.props.lineHeight*2}});null===o.effects&&(o.effects=[]),o.getLocalBounds();const r=i.split("\n"),n=r[r.length-1],h=new s.default.Text({text:n,style:{fontFamily:"PixelOperator8",fontSize:2*this.props.fontSize,fill:this.textDisplay.style.fill,align:"left",lineHeight:this.props.fontSize*this.props.lineHeight*2}});null===h.effects&&(h.effects=[]);const a=12+h.width/2,l=12+(r.length-1)*(this.props.fontSize*this.props.lineHeight);this.cursor.clear(),this.cursor.rect(a,l,1,this.props.fontSize);const d=this.resolveTextColor(this.colorOverrides.textColor);this.cursor.fill({color:d}),o.destroy(),h.destroy()}startCursorBlink(){this.stopCursorBlink(),this.cursorVisible=!0,this.cursorBlinkInterval=window.setInterval((()=>{this.cursorVisible=!this.cursorVisible,this.cursor.visible=this.cursorVisible}),530)}stopCursorBlink(){this.cursorBlinkInterval&&(window.clearInterval(this.cursorBlinkInterval),this.cursorBlinkInterval=void 0)}measure(){const t={width:this.props.width,height:this.props.height};return this.layoutEngine.measure(this.boxModel,t)}layout(t,e){const i=this.measure();super.layout(t,e),this.background.layout(i.width,i.height)}render(){}setValue(t){this.stateManager.setValue(t),this.inputHandler.setCursorPosition(t.length),this.updateText()}getValue(){return this.stateManager.getValue()}updateValue(t){this.stateManager.updateValue(t),this.inputHandler.setCursorPosition(t.length),this.updateText()}destroy(){this.stopCursorBlink(),"undefined"!=typeof window&&window.removeEventListener("keydown",this.handleKeyDown.bind(this)),super.destroy()}}e.UITextArea=d},410:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.asTextDPR=function(t,e){const{dprScale:i=2,pixelPerfect:o=!0,...n}=t,h=n.style?.fontSize||16,a={...n,style:{...n.style,fontSize:h*i}},l=new s.default.Text(a);o&&(l.roundPixels=!0);let d=1/i;if(void 0!==e?.scale){if("number"!=typeof e.scale){const t=(e.scale.x??1)/i,o=(e.scale.y??1)/i;return l.scale.set(t,o),r(l,{...e,scale:void 0})}d=e.scale/i}return l.scale.set(d),r(l,{...e,scale:void 0})};const s=o(i(47));function r(t,e){if(!e)return t;if(void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.anchor)if("number"==typeof e.anchor)"anchor"in t&&"object"==typeof t.anchor&&null!==t.anchor&&t.anchor.set(e.anchor);else if("anchor"in t&&"object"==typeof t.anchor&&null!==t.anchor){const i=t.anchor;void 0!==e.anchor.x&&(i.x=e.anchor.x),void 0!==e.anchor.y&&(i.y=e.anchor.y)}if(void 0!==e.scale)if("number"==typeof e.scale)"scale"in t&&"object"==typeof t.scale&&null!==t.scale&&t.scale.set(e.scale);else if("scale"in t&&"object"==typeof t.scale&&null!==t.scale){const i=t.scale;void 0!==e.scale.x&&(i.x=e.scale.x),void 0!==e.scale.y&&(i.y=e.scale.y)}if(void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.tint&&"tint"in t&&(t.tint=e.tint),void 0!==e.alpha&&(t.alpha=e.alpha),void 0!==e.visible&&(t.visible=e.visible),void 0!==e.eventMode&&"eventMode"in t&&(t.eventMode=e.eventMode),void 0!==e.pivot)if("number"==typeof e.pivot)"pivot"in t&&"object"==typeof t.pivot&&null!==t.pivot&&t.pivot.set(e.pivot);else if("pivot"in t&&"object"==typeof t.pivot&&null!==t.pivot){const i=t.pivot;void 0!==e.pivot.x&&(i.x=e.pivot.x),void 0!==e.pivot.y&&(i.y=e.pivot.y)}return t}},479:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UITextInput=void 0;const s=o(i(47)),r=i(531),n=i(243),h=i(818),a=i(410),l=i(160);class d extends r.UIComponent{props;stateManager;inputHandler;background;textDisplay;cursor;cursorBlinkInterval;cursorVisible=!0;colorOverrides={};constructor(t,e){super(e),this.props={placeholder:t.placeholder??"",maxLength:t.maxLength??100,width:t.width??200,height:t.height??36,disabled:t.disabled??!1,backgroundColor:t.backgroundColor??16777215,textColor:t.textColor??0,placeholderColor:t.placeholderColor??10066329,borderRadius:t.borderRadius??4,fontSize:t.fontSize??14,type:t.type??"text"},this.colorOverrides={backgroundColor:t.backgroundColor,textColor:t.textColor,placeholderColor:t.placeholderColor},this.themeResolver=t.themeResolver,this.stateManager=new l.FormStateManager({value:t.value,defaultValue:t.defaultValue,onChange:t.onChange}),this.inputHandler=new l.TextInputHandler({stateManager:this.stateManager,maxLength:this.props.maxLength,type:this.props.type,multiline:!1}),this.enabled=!this.props.disabled,this.tabIndex=0,this.boxModel.width=this.props.width,this.boxModel.height=this.props.height,this.createVisuals(),this.setupInteractivity()}createVisuals(){const t=this.resolveColor("background",this.colorOverrides.backgroundColor);this.background=new n.UIPanel({backgroundColor:t,width:this.props.width,height:this.props.height,borderRadius:this.props.borderRadius}),this.container.addChild(this.background.container);const e=this.getDisplayText(),i=e===this.props.placeholder?this.resolvePlaceholderColor(this.colorOverrides.placeholderColor):this.resolveTextColor(this.colorOverrides.textColor);this.textDisplay=(0,a.asTextDPR)({text:e,style:{fontFamily:"PixelOperator8",fontSize:this.props.fontSize,fill:i,align:"left"},dprScale:2,pixelPerfect:!0});const o=Math.round((this.props.height-this.props.fontSize)/2);this.textDisplay.position.set(12,o),this.textDisplay.roundPixels=!0,this.container.addChild(this.textDisplay),this.cursor=new s.default.Graphics,this.cursor.visible=!1,this.container.addChild(this.cursor)}getDisplayText(){return this.stateManager.getValue()||this.props.placeholder}setupInteractivity(){this.makeInteractive("text"),this.container.on("pointerdown",this.handlePointerDown.bind(this)),"undefined"!=typeof window&&window.addEventListener("keydown",this.handleKeyDown.bind(this))}handlePointerDown(t){if(this.props.disabled)return;const e=h.UIFocusManager.getInstance();e?e.requestFocus(this):this.onFocus(),t.stopPropagation()}onFocus(){this.focused||(super.onFocus(),this.inputHandler.setCursorPosition(this.stateManager.getValue().length),this.cursor.visible=!0,this.updateCursor(),this.startCursorBlink(),this.updateBackground())}onBlur(){this.focused&&(super.onBlur(),this.cursor.visible=!1,this.stopCursorBlink(),this.updateBackground())}handleKeyDown(t){this.focused&&!this.props.disabled&&("Enter"!==t.key&&"Escape"!==t.key?this.inputHandler.handleKeyDown(t)&&(t.preventDefault(),t.stopPropagation(),this.updateText(),this.updateCursor()):this.onBlur())}updateText(){const t=this.stateManager.getValue(),e=this.getDisplayText();this.textDisplay.text=e;const i=t?this.resolveTextColor(this.colorOverrides.textColor):this.resolvePlaceholderColor(this.colorOverrides.placeholderColor);this.textDisplay.style.fill=i,this.updateCursor()}updateBackground(){const t=this.focused?this.resolveColor("focus",this.colorOverrides.backgroundColor):this.resolveColor("background",this.colorOverrides.backgroundColor),e=this.background;this.background=new n.UIPanel({backgroundColor:t,width:this.props.width,height:this.props.height,borderRadius:this.props.borderRadius});const i=this.container.getChildIndex(e.container);this.container.removeChild(e.container),this.container.addChildAt(this.background.container,i),e.destroy()}updateCursor(){const t=this.stateManager.getValue(),e=this.inputHandler.getCursorPosition(),i=t.substring(0,e);e>t.length&&this.inputHandler.setCursorPosition(t.length);const o=new s.default.Text({text:i,style:{fontFamily:"PixelOperator8",fontSize:2*this.props.fontSize,fill:this.textDisplay.style.fill,align:"left"}});null===o.effects&&(o.effects=[]);const r=12+o.width/2,n=(this.props.height-this.props.fontSize)/2;this.cursor.clear(),this.cursor.rect(r,n,1,this.props.fontSize);const h=this.resolveTextColor(this.colorOverrides.textColor);this.cursor.fill({color:h}),o.destroy()}startCursorBlink(){this.stopCursorBlink(),this.cursorVisible=!0,this.cursorBlinkInterval=window.setInterval((()=>{this.cursorVisible=!this.cursorVisible,this.cursor.visible=this.cursorVisible}),530)}stopCursorBlink(){this.cursorBlinkInterval&&(window.clearInterval(this.cursorBlinkInterval),this.cursorBlinkInterval=void 0)}measure(){const t={width:this.props.width,height:this.props.height};return this.layoutEngine.measure(this.boxModel,t)}layout(t,e){const i=this.measure();super.layout(t,e),this.background.layout(i.width,i.height)}render(){}setValue(t){this.stateManager.setValue(t),this.inputHandler.setValue(t),this.inputHandler.setCursorPosition(t.length),this.updateText(),this.updateCursor()}getValue(){return this.stateManager.getValue()}updateValue(t){this.stateManager.updateValue(t),this.inputHandler.setCursorPosition(t.length),this.updateText(),this.updateCursor()}destroy(){this.stopCursorBlink(),"undefined"!=typeof window&&window.removeEventListener("keydown",this.handleKeyDown.bind(this)),super.destroy()}}e.UITextInput=d},531:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UIComponent=void 0;const s=o(i(47)),r=i(686),n=i(160),h=i(886),a=i(224);e.UIComponent=class{container;boxModel;focusRing;computedLayout;parent;visible=!0;enabled=!0;layoutDirty=!0;layoutEngine;tabIndex=-1;focused=!1;hovered=!1;pressed=!1;themeResolver;defaultThemeResolver;constructor(t){this.container=new s.default.Container,this.boxModel=(0,r.createDefaultBoxModel)(t),this.computedLayout={x:0,y:0,width:0,height:0,contentX:0,contentY:0,contentWidth:0,contentHeight:0},this.layoutEngine=new n.LayoutEngine,this.createFocusRing()}createFocusRing(){this.focusRing=new s.default.Graphics,this.focusRing.visible=!1,this.container.addChildAt(this.focusRing,0)}updateFocusRing(){if(!this.focusRing)return;this.focusRing.clear();const t=this.computedLayout.width,e=this.computedLayout.height;t<=0||e<=0||(this.focusRing.roundRect(-6,-6,t+12,e+12,8),this.focusRing.stroke({color:55807,width:5,alpha:.3}),this.focusRing.roundRect(-4,-4,t+8,e+8,8),this.focusRing.stroke({color:55807,width:3}),this.focusRing.roundRect(-1,-1,t+2,e+2,6),this.focusRing.stroke({color:16777215,width:1,alpha:.6}))}layout(t,e){const i=this.measure();this.computedLayout=this.layoutEngine.layout(this.boxModel,i,{width:t,height:e}),this.layoutDirty=!1,this.render()}markLayoutDirty(){this.layoutDirty=!0,this.parent&&this.parent.markLayoutDirty()}getLayout(){return this.computedLayout}getBoxModel(){return this.boxModel}getGlobalBounds(){const t=this.container.getGlobalPosition();return{x:t.x,y:t.y,width:this.computedLayout.width,height:this.computedLayout.height}}setPosition(t,e){this.computedLayout.x=t,this.computedLayout.y=e,this.container.position.set(t,e)}show(){this.visible=!0,this.container.visible=!0}hide(){this.visible=!1,this.container.visible=!1}canFocus(){return this.enabled&&this.visible&&this.tabIndex>=0}isFocused(){return this.focused}onFocus(){this.focused=!0,this.showFocusRing(),this.scrollIntoView()}showFocusRing(){this.focusRing&&(this.updateFocusRing(),this.focusRing.visible=!0)}scrollIntoView(){let t=this.parent;for(;t;){if("scrollToComponent"in t&&"function"==typeof t.scrollToComponent){t.scrollToComponent(this);break}t=t.parent}}onBlur(){this.focused=!1,this.hideFocusRing()}hideFocusRing(){this.focusRing&&(this.focusRing.visible=!1)}getThemeResolver(){return this.themeResolver?this.themeResolver:(this.defaultThemeResolver||(this.defaultThemeResolver=new h.ThemeResolver((0,a.createDefaultDarkTheme)())),this.defaultThemeResolver)}resolveColor(t,e){return this.getThemeResolver().getColor(t,e)}resolveControlColor(t,e,i){return this.getThemeResolver().getControlColor(t,e,i)}resolveTextColor(t){return this.getThemeResolver().getTextColor(t)}resolvePlaceholderColor(t){return this.getThemeResolver().getPlaceholderColor(t)}resolveCheckmarkColor(t){return this.getThemeResolver().getCheckmarkColor(t)}makeInteractive(t="pointer"){this.container.eventMode="static",this.container.cursor=t}destroy(){this.container.parent&&this.container.parent.removeChild(this.container),null===this.container.effects&&(this.container.effects=[]),this.container.destroy({children:!0})}}},532:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseCardStyle=void 0,e.BaseCardStyle=class{}},540:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UIBox=void 0;const s=o(i(47)),r=i(531);class n extends r.UIComponent{props;graphics;constructor(t={},e){super(e),this.props={backgroundColor:0,backgroundAlpha:1,borderWidth:0,borderRadius:0,...t},this.graphics=new s.default.Graphics,this.container.addChild(this.graphics),void 0!==t.width&&(this.boxModel.width=t.width),void 0!==t.height&&(this.boxModel.height=t.height)}measure(){this.boxModel.padding,this.boxModel.border;let t=0,e=0;"number"==typeof this.boxModel.width?t=this.boxModel.width:void 0!==this.props.width&&(t=this.props.width),"number"==typeof this.boxModel.height?e=this.boxModel.height:void 0!==this.props.height&&(e=this.props.height);const i={width:t,height:e};return this.layoutEngine.measure(this.boxModel,i)}render(){this.graphics.clear();const{width:t,height:e}=this.computedLayout,{backgroundColor:i,backgroundAlpha:o,borderColor:s,borderWidth:r,borderRadius:n}=this.props;r&&r>0&&void 0!==s&&(this.graphics.rect(0,0,t,e),this.graphics.stroke({color:s,width:r})),void 0!==i&&(n&&n>0?this.graphics.roundRect(0,0,t,e,n):this.graphics.rect(0,0,t,e),this.graphics.fill({color:i,alpha:o}))}setBackgroundColor(t,e=1){this.props.backgroundColor=t,this.props.backgroundAlpha=e,this.render()}setBorder(t,e){this.props.borderColor=t,this.props.borderWidth=e,this.render()}}e.UIBox=n},575:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeApplier=void 0;const o=i(886);e.ThemeApplier=class{resolver;constructor(t){this.resolver=new o.ThemeResolver(t)}applyBackground(t,e,i){return e.enabled?e.pressed?this.resolver.getColor("selected",i):e.hovered?this.resolver.getColor("hover",i):e.focused?this.resolver.getColor("focus",i):void 0!==e.checked&&e.checked?this.resolver.getColor("selected",i):this.resolver.getColor("background",i):this.resolver.getColor("disabled",i)}applyTextColor(t,e){return t.enabled?this.resolver.getTextColor(e):this.resolver.getColor("disabled")}applyPlaceholderColor(t){return this.resolver.getPlaceholderColor(t)}applyBorderColor(t,e){return t.enabled?t.hovered?this.resolver.getColor("hover",e):this.resolver.getColor("border",e):this.resolver.getColor("disabled")}applyCheckmarkColor(t){return this.resolver.getCheckmarkColor(t)}getResolver(){return this.resolver}}},601:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextInputHandler=void 0,e.TextInputHandler=class{stateManager;cursorPosition=0;maxLength;type;multiline;constructor(t){this.stateManager=t.stateManager,this.maxLength=t.maxLength??(t.multiline?1e3:100),this.type=t.type??"text",this.multiline=t.multiline??!1,this.cursorPosition=this.stateManager.getValue().length}getValue(){return this.stateManager.getValue()}setValue(t){this.stateManager.setValue(t),this.cursorPosition=Math.min(this.cursorPosition,t.length)}getCursorPosition(){return this.cursorPosition}setCursorPosition(t){const e=this.stateManager.getValue();this.cursorPosition=Math.max(0,Math.min(t,e.length))}handleKeyDown(t){const e=t.key;return"Enter"===e?!!this.multiline&&(this.insertCharacter("\n"),!0):!("Escape"===e||("Backspace"===e?(this.handleBackspace(),0):"Delete"===e?(this.handleDelete(),0):"ArrowLeft"===e?(this.moveCursor(-1),0):"ArrowRight"===e?(this.moveCursor(1),0):"ArrowUp"===e&&this.multiline?(this.moveCursorVertically(-1),0):"ArrowDown"===e&&this.multiline?(this.moveCursorVertically(1),0):"Home"===e?(this.moveToLineStart(),0):"End"===e?(this.moveToLineEnd(),0):1!==e.length||t.ctrlKey||t.metaKey||("number"!==this.type||/[0-9.-]/.test(e))&&(this.insertCharacter(e),0)))}insertCharacter(t){const e=this.stateManager.getValue();if(e.length>=this.maxLength)return;const i=e.substring(0,this.cursorPosition)+t+e.substring(this.cursorPosition);this.stateManager.setValue(i),this.cursorPosition++}handleBackspace(){if(this.cursorPosition>0){const t=this.stateManager.getValue(),e=t.substring(0,this.cursorPosition-1)+t.substring(this.cursorPosition);this.stateManager.setValue(e),this.cursorPosition--}}handleDelete(){const t=this.stateManager.getValue();if(this.cursorPosition<t.length){const e=t.substring(0,this.cursorPosition)+t.substring(this.cursorPosition+1);this.stateManager.setValue(e)}}moveCursor(t){const e=this.stateManager.getValue();this.cursorPosition=Math.max(0,Math.min(this.cursorPosition+t,e.length))}moveCursorVertically(t){if(!this.multiline)return;const e=this.stateManager.getValue().split("\n");let i=0,o=0,s=0;for(let t=0;t<e.length;t++){if(s+e[t].length>=this.cursorPosition){i=t,o=this.cursorPosition-s;break}s+=e[t].length+1}const r=Math.max(0,Math.min(e.length-1,i+t));if(r===i)return;let n=0;for(let t=0;t<r;t++)n+=e[t].length+1;n+=Math.min(o,e[r].length),this.cursorPosition=n}moveToLineStart(){if(this.multiline){const t=this.stateManager.getValue().lastIndexOf("\n",this.cursorPosition-1)+1;this.cursorPosition=t}else this.cursorPosition=0}moveToLineEnd(){const t=this.stateManager.getValue();if(this.multiline){let e=t.indexOf("\n",this.cursorPosition);-1===e&&(e=t.length),this.cursorPosition=e}else this.cursorPosition=t.length}}},666:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FormStateManager=void 0,e.FormStateManager=class{value;isControlled;onChange;constructor(t){this.isControlled=void 0!==t.value,this.value=t.value??t.defaultValue??"",this.onChange=t.onChange}getValue(){return this.value}setValue(t){if(this.isControlled)this.onChange?.(t);else{const e=this.value!==t;this.value=t,e&&this.onChange?.(t)}}updateValue(t){this.isControlled&&t!==this.value&&(this.value=t)}isControlledMode(){return this.isControlled}setOnChange(t){this.onChange=t}}},669:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EdgeInsets=void 0;class i{top;right;bottom;left;constructor(t,e,i,o){this.top=t,this.right=e,this.bottom=i,this.left=o}static all(t){return new i(t,t,t,t)}static symmetric(t,e){return new i(t,e,t,e)}static only(t){return new i(t.top??0,t.right??0,t.bottom??0,t.left??0)}static zero(){return new i(0,0,0,0)}get horizontal(){return this.left+this.right}get vertical(){return this.top+this.bottom}clone(){return new i(this.top,this.right,this.bottom,this.left)}}e.EdgeInsets=i},686:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDefaultBoxModel=function(t){return{width:"auto",height:"auto",padding:o.EdgeInsets.zero(),margin:o.EdgeInsets.zero(),...t}};const o=i(669)},725:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteBackgroundStrategy=e.SolidColorBackgroundStrategy=void 0;const s=o(i(47)),r=i(17),n=i(243);e.SolidColorBackgroundStrategy=class{panel;normalColor;hoverColor;pressedColor;disabledColor;width;height;borderRadius;constructor(t,e,i,o){this.normalColor=t,this.hoverColor=this.darkenColor(t,.9),this.pressedColor=this.darkenColor(t,.8),this.disabledColor=8947848,this.width=e,this.height=i,this.borderRadius=o}create(t,e){return this.panel=new n.UIPanel({backgroundColor:this.normalColor,width:t,height:e,borderRadius:this.borderRadius}),this.panel.layout(t,e),this.panel.container}updateState(t){if(!this.panel)return;let e;switch(t){case r.ButtonState.Normal:e=this.normalColor;break;case r.ButtonState.Hover:e=this.hoverColor;break;case r.ButtonState.Pressed:e=this.pressedColor;break;case r.ButtonState.Disabled:e=this.disabledColor}this.panel.setBackgroundColor(e)}getActualHeight(){return this.height}destroy(){}darkenColor(t,e){return((t>>16&255)*e<<16|(t>>8&255)*e<<8|(255&t)*e)>>>0}},e.SpriteBackgroundStrategy=class{container;spriteLeft;spriteMid;spriteRight;nineSliceSprite;nineSliceSpritePressed;iconSprite;config;width;height;constructor(t,e,i){this.config=t,this.width=e,this.height=i}create(t,e){this.container=new s.default.Container;const{spritesheet:i,texturePattern:o,color:r,pixelPerfect:n,useNineSlice:h,nineSliceBorders:a,pressedTexturePattern:l,icon:d}=this.config;if(n&&i.textureSource&&(i.textureSource.scaleMode="nearest"),h&&a){const n=o.includes("{color}")?o.replace("{color}",r):o,h=i.textures[n];if(this.nineSliceSprite=new s.default.NineSliceSprite({texture:h,leftWidth:a.left,topHeight:a.top,rightWidth:a.right,bottomHeight:a.bottom,width:t,height:e}),this.container.addChild(this.nineSliceSprite),l){const o=l.includes("{color}")?l.replace("{color}",r):l,n=i.textures[o];this.nineSliceSpritePressed=new s.default.NineSliceSprite({texture:n,leftWidth:a.left,topHeight:a.top,rightWidth:a.right,bottomHeight:a.bottom,width:t,height:e}),this.nineSliceSpritePressed.y=4,this.nineSliceSpritePressed.visible=!1,this.container.addChild(this.nineSliceSpritePressed)}}else{const n=this.getTextureName(o,r,"left"),h=this.getTextureName(o,r,"mid"),a=this.getTextureName(o,r,"right");this.spriteLeft=new s.default.Sprite(i.textures[n]),this.spriteMid=new s.default.Sprite(i.textures[h]),this.spriteRight=new s.default.Sprite(i.textures[a]);const l=e/this.spriteLeft.height;this.spriteLeft.scale.y=l,this.spriteMid.scale.y=l,this.spriteRight.scale.y=l,this.spriteLeft.x=0;const d=t-this.spriteLeft.width-this.spriteRight.width;this.spriteMid.width=d,this.spriteMid.x=this.spriteLeft.width,this.spriteRight.x=this.spriteLeft.width+d,this.container.addChild(this.spriteLeft),this.container.addChild(this.spriteMid),this.container.addChild(this.spriteRight)}if(d){const i=d.spritesheet.textures[d.textureName];this.iconSprite=new s.default.Sprite(i),d.pixelPerfect&&d.spritesheet.textureSource&&(d.spritesheet.textureSource.scaleMode="nearest"),d.scale&&this.iconSprite.scale.set(d.scale),this.iconSprite.anchor.set(.5),this.iconSprite.x=t/2,this.iconSprite.y=e/2,this.container.addChild(this.iconSprite)}return this.container}updateState(t){if(this.nineSliceSprite&&this.nineSliceSpritePressed){const e=t===r.ButtonState.Pressed;this.nineSliceSprite.visible=!e,this.nineSliceSpritePressed.visible=e,this.iconSprite&&(this.iconSprite.y=this.height/2+(e?4:0))}else{let e;switch(t){case r.ButtonState.Normal:e=16777215;break;case r.ButtonState.Hover:e=13421772;break;case r.ButtonState.Pressed:e=10066329;break;case r.ButtonState.Disabled:e=8947848}this.nineSliceSprite?this.nineSliceSprite.tint=e:this.spriteLeft&&this.spriteMid&&this.spriteRight&&(this.spriteLeft.tint=e,this.spriteMid.tint=e,this.spriteRight.tint=e)}}getActualHeight(){return this.nineSliceSprite?this.nineSliceSprite.height:this.spriteLeft?.height??this.height}destroy(){this.container?.destroy({children:!0})}getTextureName(t,e,i){let o=t.replace("{color}",e);return o=o.replace(/_(?:left|mid|right)\.png$/,`_${i}.png`),o}}},769:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeResolver=e.createDefaultLightTheme=e.createDefaultDarkTheme=e.ThemeManager=void 0,e.ThemeManager=class{themes=new Map;currentThemeName=null;listeners=new Set;storageKey;constructor(t,e){if(this.storageKey=t,e){const t=this.loadFromStorage();t&&this.themes.has(t)?this.currentThemeName=t:this.currentThemeName=e}else{const t=this.loadFromStorage();t&&this.themes.has(t)&&(this.currentThemeName=t)}}registerTheme(t){this.themes.set(t.name,t),this.currentThemeName||1!==this.themes.size||(this.currentThemeName=t.name,this.saveToStorage(t.name),this.notifyListeners())}registerThemes(t){t.forEach((t=>this.registerTheme(t)))}getTheme(){if(!this.currentThemeName)throw new Error("No theme set. Register themes first.");const t=this.themes.get(this.currentThemeName);if(!t)throw new Error(`Theme "${this.currentThemeName}" not found.`);return t.theme}getThemeInfo(){if(!this.currentThemeName)throw new Error("No theme set. Register themes first.");const t=this.themes.get(this.currentThemeName);if(!t)throw new Error(`Theme "${this.currentThemeName}" not found.`);return t}getAllThemes(){return Array.from(this.themes.values())}getThemesByVariant(t){return Array.from(this.themes.values()).filter((e=>e.variant===t))}setTheme(t){return!!this.themes.has(t)&&(this.currentThemeName=t,this.saveToStorage(t),this.notifyListeners(),!0)}setThemeInfo(t){this.registerTheme(t),this.setTheme(t.name)}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}notifyListeners(){const t=this.getTheme(),e=this.getThemeInfo();this.listeners.forEach((i=>i(t,e)))}saveToStorage(t){if("undefined"!=typeof window&&window.localStorage)try{window.localStorage.setItem(this.storageKey,t)}catch{}}loadFromStorage(){if("undefined"==typeof window||!window.localStorage)return null;try{return window.localStorage.getItem(this.storageKey)}catch{return null}}clearStorage(){if("undefined"!=typeof window&&window.localStorage)try{window.localStorage.removeItem(this.storageKey)}catch{}}};var o=i(224);Object.defineProperty(e,"createDefaultDarkTheme",{enumerable:!0,get:function(){return o.createDefaultDarkTheme}}),Object.defineProperty(e,"createDefaultLightTheme",{enumerable:!0,get:function(){return o.createDefaultLightTheme}});var s=i(886);Object.defineProperty(e,"ThemeResolver",{enumerable:!0,get:function(){return s.ThemeResolver}})},774:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeResolver=e.createDefaultLightTheme=e.createDefaultDarkTheme=e.ThemeManager=void 0;var o=i(769);Object.defineProperty(e,"ThemeManager",{enumerable:!0,get:function(){return o.ThemeManager}});var s=i(224);Object.defineProperty(e,"createDefaultDarkTheme",{enumerable:!0,get:function(){return s.createDefaultDarkTheme}}),Object.defineProperty(e,"createDefaultLightTheme",{enumerable:!0,get:function(){return s.createDefaultLightTheme}});var r=i(886);Object.defineProperty(e,"ThemeResolver",{enumerable:!0,get:function(){return r.ThemeResolver}})},818:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UIFocusManager=void 0;class i{static instance=null;focusableComponents=[];currentFocusIndex=-1;keydownHandler=null;constructor(){this.setupKeyboardListeners(),i.instance=this}static getInstance(){return i.instance}setupKeyboardListeners(){"undefined"!=typeof window&&(this.keydownHandler&&window.removeEventListener("keydown",this.keydownHandler),this.keydownHandler=t=>{"Tab"===t.key&&(t.preventDefault(),t.shiftKey?this.focusPrevious():this.focusNext())},window.addEventListener("keydown",this.keydownHandler))}register(t){this.focusableComponents.includes(t)||(this.focusableComponents.push(t),this.sortByTabIndex())}registerContainer(t){this.discoverFocusableComponents(t),this.sortByTabIndex()}discoverFocusableComponents(t){this.isFocusableComponent(t)&&this.register(t),"children"in t&&Array.isArray(t.children)&&t.children.forEach((t=>this.discoverFocusableComponents(t)))}isFocusableComponent(t){return"number"==typeof t.tabIndex&&t.tabIndex>=0&&"function"==typeof t.canFocus&&"function"==typeof t.onFocus&&"function"==typeof t.onBlur&&"function"==typeof t.isFocused}unregister(t){const e=this.focusableComponents.indexOf(t);-1!==e&&(e===this.currentFocusIndex&&this.blur(),this.focusableComponents.splice(e,1),this.currentFocusIndex>e&&this.currentFocusIndex--)}sortByTabIndex(){this.focusableComponents.sort(((t,e)=>t.tabIndex-e.tabIndex))}focus(t){if(!t.canFocus())return;const e=this.focusableComponents.indexOf(t);if(-1!==e){if(-1!==this.currentFocusIndex&&this.currentFocusIndex!==e){const t=this.focusableComponents[this.currentFocusIndex];t&&t.onBlur()}this.currentFocusIndex=e,t.onFocus()}}requestFocus(t){this.focus(t)}blur(){if(-1!==this.currentFocusIndex){const t=this.focusableComponents[this.currentFocusIndex];t&&t.onBlur(),this.currentFocusIndex=-1}}focusNext(){if(0===this.focusableComponents.length)return;let t=this.currentFocusIndex+1,e=0;for(;e<this.focusableComponents.length;){t>=this.focusableComponents.length&&(t=0);const i=this.focusableComponents[t];if(i&&i.canFocus())return void this.focus(i);t++,e++}}focusPrevious(){if(0===this.focusableComponents.length)return;let t=this.currentFocusIndex-1,e=0;for(;e<this.focusableComponents.length;){t<0&&(t=this.focusableComponents.length-1);const i=this.focusableComponents[t];if(i&&i.canFocus())return void this.focus(i);t--,e++}}focusFirst(){if(0!==this.focusableComponents.length)for(const t of this.focusableComponents)if(t.canFocus())return void this.focus(t)}focusLast(){if(0!==this.focusableComponents.length)for(let t=this.focusableComponents.length-1;t>=0;t--){const e=this.focusableComponents[t];if(e.canFocus())return void this.focus(e)}}getCurrentFocus(){return-1===this.currentFocusIndex?null:this.focusableComponents[this.currentFocusIndex]||null}getFocusableComponents(){return[...this.focusableComponents]}clear(){this.blur(),this.focusableComponents=[],this.currentFocusIndex=-1}destroy(){"undefined"!=typeof window&&this.keydownHandler&&window.removeEventListener("keydown",this.keydownHandler),this.clear()}}e.UIFocusManager=i},828:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.UIScaleMode=void 0,function(t){t.None="none",t.ScaleUI="scaleUI",t.LockRatio="lockRatio"}(i||(e.UIScaleMode=i={}))},830:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UICheckboxWithLabel=void 0;const s=o(i(47)),r=i(531),n=i(868),h=i(851),a=i(669);class l extends r.UIComponent{props;checkbox;label;labelPosition;constructor(t,e){super(e),this.labelPosition=t.labelPosition??"right";const{label:i,gap:o,fontSize:s,textColor:r,labelPosition:l,...d}=t,c=t.themeResolver;this.props={...d,label:i??"",gap:o??8,fontSize:s??16,textColor:r??c?.getTextColor()??16777215,labelPosition:this.labelPosition,disabled:d.disabled??!1,size:d.size??20,backgroundColor:d.backgroundColor??c?.getColor("background")??16777215,borderColor:d.borderColor??c?.getColor("border")??13421772,checkColor:d.checkColor??c?.getCheckmarkColor()??16777215,checkedBackgroundColor:d.checkedBackgroundColor??c?.getColor("selected")??4886754,borderRadius:d.borderRadius??4},this.checkbox=new n.UICheckbox({...d,themeResolver:c},{padding:a.EdgeInsets.zero()});const u=this.props.disabled?c?.getColor("disabled")??6710886:this.props.textColor;this.label=new h.UILabel({text:this.props.label,fontSize:this.props.fontSize,color:u,align:"left"},{padding:a.EdgeInsets.zero()}),this.container.addChild(this.checkbox.container),this.container.addChild(this.label.container),this.setupLabelClickability(),this.boxModel.width="auto",this.boxModel.height="auto"}setupLabelClickability(){this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointerdown",(()=>{this.props.disabled||this.checkbox.toggle()})),this.label.container.eventMode="static",this.label.container.cursor="pointer",this.label.container.on("pointerdown",(t=>{this.props.disabled||(t.stopPropagation(),this.checkbox.toggle())})),this.checkbox.container.eventMode="static",this.checkbox.container.cursor="pointer",this.checkbox.container.on("pointerdown",(t=>{t.stopPropagation()}))}getCheckbox(){return this.checkbox}getLabel(){return this.label}setChecked(t){this.checkbox.setChecked(t)}getChecked(){return this.checkbox.getChecked()}toggle(){this.checkbox.toggle()}setDisabled(t){this.props.disabled=t,this.checkbox.setDisabled(t),this.enabled=!t;const e=this.checkbox.themeResolver,i=t?e?.getColor("disabled")??6710886:this.props.textColor;this.label.setColor(i),this.label.container.cursor=t?"default":"pointer"}setLabelText(t){this.props.label=t,this.label.setText(t),this.markLayoutDirty()}measure(){const t=this.props.size,e=this.label.container.children[0]?.getLocalBounds(),i=e?.width??0,o=Math.max(t,e?.height??this.props.fontSize);return{width:t+this.props.gap+i,height:o}}layout(t,e){const i=this.measure(),o=this.props.size;this.label.layout(t,e);const r=this.label.measure(),n=r.height,h=r.width;super.layout(t,e);const a=(i.height-o)/2,l=(i.height-n)/2;"right"===this.labelPosition?(this.checkbox.container.position.set(0,a),this.label.container.position.set(o+this.props.gap,l)):(this.label.container.position.set(0,l),this.checkbox.container.position.set(h+this.props.gap,a)),this.container.hitArea=new s.default.Rectangle(0,0,i.width,i.height),"none"!==this.container.eventMode&&"passive"!==this.container.eventMode||(this.container.eventMode="static"),this.layoutDirty=!1,this.render()}render(){}updateChecked(t){this.checkbox.updateChecked(t)}destroy(){this.checkbox.destroy(),super.destroy()}}e.UICheckboxWithLabel=l},836:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FlatCardStyle=void 0;const o=i(669),s=i(532);class r extends s.BaseCardStyle{config;constructor(t={}){super(),this.config={borderRadius:t.borderRadius??4,borderWidth:t.borderWidth??1,titleBarHeight:t.titleBarHeight??32,dragStripHeight:t.dragStripHeight??8,footerHeight:t.footerHeight??32,contentPadding:t.contentPadding??8,showShadow:t.showShadow??!0,shadowOffset:t.shadowOffset??2,shadowAlpha:t.shadowAlpha??.15}}drawBackground(t,e,i,o){const{borderRadius:s,borderWidth:r,showShadow:n,shadowOffset:h,shadowAlpha:a}=this.config;t.clear(),n&&(t.roundRect(h,h,e,i,s),t.fill({color:0,alpha:a})),t.roundRect(0,0,e,i,s),t.fill({color:o.border}),t.roundRect(r,r,e-2*r,i-2*r,Math.max(0,s-r)),t.fill({color:o.background})}drawTitleBar(t,e,i){const{borderRadius:o,borderWidth:s}=this.config;t.moveTo(e.x+o,e.y),t.lineTo(e.x+e.width-o,e.y),t.arcTo(e.x+e.width,e.y,e.x+e.width,e.y+o,Math.max(0,o-s)),t.lineTo(e.x+e.width,e.y+e.height),t.lineTo(e.x,e.y+e.height),t.lineTo(e.x,e.y+o),t.arcTo(e.x,e.y,e.x+o,e.y,Math.max(0,o-s)),t.closePath(),t.fill({color:i.titleBar}),t.moveTo(e.x,e.y+e.height),t.lineTo(e.x+e.width,e.y+e.height),t.stroke({color:i.border,width:1})}drawDragStrip(t,e,i){const{borderRadius:o,borderWidth:s}=this.config;t.moveTo(e.x+o,e.y),t.lineTo(e.x+e.width-o,e.y),t.arcTo(e.x+e.width,e.y,e.x+e.width,e.y+o,Math.max(0,o-s)),t.lineTo(e.x+e.width,e.y+e.height),t.lineTo(e.x,e.y+e.height),t.lineTo(e.x,e.y+o),t.arcTo(e.x,e.y,e.x+o,e.y,Math.max(0,o-s)),t.closePath(),t.fill({color:i.titleBar});const r=e.x+(e.width-12)/2,n=e.y+e.height/2;for(let e=0;e<3;e++)t.circle(r+6*e,n,1.5);t.fill({color:i.border,alpha:.5})}drawFooter(t,e,i){const{borderRadius:o,borderWidth:s}=this.config,r=i.footerBackground??i.titleBar;t.moveTo(e.x,e.y),t.lineTo(e.x+e.width,e.y),t.stroke({color:i.border,width:1}),t.moveTo(e.x,e.y),t.lineTo(e.x+e.width,e.y),t.lineTo(e.x+e.width,e.y+e.height-o),t.arcTo(e.x+e.width,e.y+e.height,e.x+e.width-o,e.y+e.height,Math.max(0,o-s)),t.lineTo(e.x+o,e.y+e.height),t.arcTo(e.x,e.y+e.height,e.x,e.y+e.height-o,Math.max(0,o-s)),t.lineTo(e.x,e.y),t.closePath(),t.fill({color:r})}getTitleBarHeight(t){return t?this.config.titleBarHeight:0}getDragStripHeight(){return this.config.dragStripHeight}getFooterHeight(){return this.config.footerHeight}getBorderInsets(){const{borderWidth:t}=this.config;return o.EdgeInsets.all(t)}getContentPadding(){const{contentPadding:t}=this.config;return o.EdgeInsets.all(t)}}e.FlatCardStyle=r},841:function(t,e,i){var o,s=this&&this.__createBinding||(Object.create?function(t,e,i,o){void 0===o&&(o=i);var s=Object.getOwnPropertyDescriptor(e,i);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,o,s)}:function(t,e,i,o){void 0===o&&(o=i),t[o]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||(o=function(t){return o=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},o(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=o(t),n=0;n<i.length;n++)"default"!==i[n]&&s(e,t,i[n]);return r(e,t),e});Object.defineProperty(e,"__esModule",{value:!0}),e.UITabs=void 0;const h=n(i(47)),a=i(531),l=i(851);class d extends a.UIComponent{items;activeKey;onChange;type;tabPosition;width;height;tabBarBackgroundColor;tabBarHeight;activeTabColor;inactiveTabColor;textColor;activeTextColor;hashPrefix;tabBar;contentArea;tabButtons=new Map;activeIndicator;hashChangeHandler;constructor(t,e){super(e),this.items=t.items||[],this.onChange=t.onChange,this.type=t.type||"line",this.tabPosition=t.tabPosition||"top",this.tabBarBackgroundColor=t.tabBarBackgroundColor??2960708,this.tabBarHeight=t.tabBarHeight??48,this.activeTabColor=t.activeTabColor??1609983,this.inactiveTabColor=t.inactiveTabColor??4013396,this.textColor=t.textColor??11184810,this.activeTextColor=t.activeTextColor??16777215,this.hashPrefix=t.hashPrefix;let i=t.activeKey||t.defaultActiveKey||(this.items.length>0?this.items[0].key:"");if(this.hashPrefix&&!t.activeKey){const t=this.getKeyFromHash();t&&this.items.find((e=>e.key===t))&&(i=t)}this.activeKey=i,this.width=t.width??800,this.height=t.height??600,this.tabBar=new h.Container,this.contentArea=new h.Container,this.container.addChild(this.tabBar),this.container.addChild(this.contentArea),this.buildTabs(),this.showActiveTab(),this.hashPrefix&&(this.setupHashListener(),this.updateHash(this.activeKey))}getKeyFromHash(){if(!this.hashPrefix)return null;const t=window.location.hash.slice(1),e=`${this.hashPrefix}/`;return t.startsWith(e)?t.slice(e.length):null}updateHash(t){if(!this.hashPrefix)return;const e=`#${this.hashPrefix}/${t}`;window.location.hash!==e&&(window.location.hash=e)}setupHashListener(){this.hashChangeHandler=()=>{const t=this.getKeyFromHash();t&&t!==this.activeKey&&this.setActiveKey(t,!1)},window.addEventListener("hashchange",this.hashChangeHandler)}destroy(){this.hashChangeHandler&&window.removeEventListener("hashchange",this.hashChangeHandler)}buildTabs(){this.tabBar.removeChildren(),this.tabButtons.clear();const t=new h.Graphics;if(t.rect(0,0,this.width,this.tabBarHeight),t.fill({color:this.tabBarBackgroundColor}),this.tabBar.addChild(t),"line"===this.type){const t=new h.Graphics;t.rect(0,this.tabBarHeight-2,this.width,2),t.fill({color:4013396,alpha:.5}),this.tabBar.addChild(t)}"bottom"===this.tabPosition?(this.tabBar.y=this.height-this.tabBarHeight,this.contentArea.y=0):(this.tabBar.y=0,this.contentArea.y=this.tabBarHeight);let e=8;for(const t of this.items){if(t.disabled)continue;const i=new h.Container;i.x=e;const o=this.activeKey===t.key,s=new l.UILabel({text:t.label,fontSize:15,fontWeight:o?"bold":"normal",color:o?this.activeTextColor:this.textColor});s.measure(),s.layout(this.width,this.tabBarHeight);const r=s.container.getLocalBounds(),n=r.width+48;let a;"card"===this.type?(a=new h.Graphics,a.roundRect(0,0,n,this.tabBarHeight-2,6),a.fill({color:o?this.activeTabColor:this.inactiveTabColor}),a.roundRect(0,0,n,this.tabBarHeight-2,6),a.stroke({color:o?this.activeTabColor:5066084,width:2}),i.addChild(a)):(a=new h.Graphics,a.rect(0,0,n,this.tabBarHeight),a.fill({color:0,alpha:0}),i.addChild(a)),s.container.x=24,s.container.y=(this.tabBarHeight-r.height)/2,i.addChild(s.container),i.eventMode="static",i.cursor="pointer";const d=t.key;i.on("pointerdown",(()=>{this.setActiveKey(d)})),i.on("pointerover",(()=>{this.activeKey!==d&&("card"===this.type?(a.clear(),a.roundRect(0,0,n,this.tabBarHeight-2,6),a.fill({color:this.activeTabColor,alpha:.5}),a.roundRect(0,0,n,this.tabBarHeight-2,6),a.stroke({color:this.activeTabColor,width:2})):s.setColor(this.activeTextColor))})),i.on("pointerout",(()=>{this.activeKey!==d&&("card"===this.type?(a.clear(),a.roundRect(0,0,n,this.tabBarHeight-2,6),a.fill({color:this.inactiveTabColor}),a.roundRect(0,0,n,this.tabBarHeight-2,6),a.stroke({color:5066084,width:2})):s.setColor(this.textColor))})),this.tabBar.addChild(i),this.tabButtons.set(t.key,{container:i,label:s,bg:a}),e+=n+8}"line"===this.type&&(this.activeIndicator=new h.Graphics,this.tabBar.addChild(this.activeIndicator),this.updateActiveIndicator())}updateActiveIndicator(){if(!this.activeIndicator||"line"!==this.type)return;this.activeIndicator.clear();const t=this.tabButtons.get(this.activeKey);if(!t)return;const e=t.container.x,i=t.bg.getLocalBounds().width,o=this.tabBarHeight-3;this.activeIndicator.roundRect(e+8,o,i-16,3,1.5),this.activeIndicator.fill({color:this.activeTabColor})}showActiveTab(){this.contentArea.removeChildren();const t=this.items.find((t=>t.key===this.activeKey));if(!t)return;const e=this.height-this.tabBarHeight;t.content.layout(this.width,e),this.contentArea.addChild(t.content.container),this.tabButtons.forEach(((t,e)=>{const i=e===this.activeKey,o=t.bg.getLocalBounds();"card"===this.type?(t.bg.clear(),t.bg.roundRect(0,0,o.width,this.tabBarHeight-2,6),t.bg.fill({color:i?this.activeTabColor:this.inactiveTabColor}),t.bg.roundRect(0,0,o.width,this.tabBarHeight-2,6),t.bg.stroke({color:i?this.activeTabColor:5066084,width:2})):(t.bg.clear(),t.bg.rect(0,0,o.width,this.tabBarHeight),t.bg.fill({color:0,alpha:0})),t.label.setColor(i?this.activeTextColor:this.textColor),t.label.container.alpha=1})),"line"===this.type&&this.updateActiveIndicator()}setActiveKey(t,e=!0){if(this.activeKey===t)return;const i=this.items.find((e=>e.key===t));i&&!i.disabled&&(this.activeKey=t,this.showActiveTab(),e&&this.hashPrefix&&this.updateHash(t),this.onChange&&this.onChange(t))}getActiveKey(){return this.activeKey}setItems(t){this.items=t,this.items.find((t=>t.key===this.activeKey))||(this.activeKey=this.items.length>0?this.items[0].key:""),this.buildTabs(),this.showActiveTab()}measure(){const t={width:this.width,height:this.height};return this.layoutEngine.measure(this.boxModel,t)}layout(t,e){this.width=t,this.height=e;const i=this.measure();this.computedLayout=this.layoutEngine.layout(this.boxModel,i,{width:t,height:e}),this.buildTabs(),this.showActiveTab()}render(){}}e.UITabs=d},851:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UILabel=void 0;const o=i(531),s=i(410);class r extends o.UIComponent{props;textObject;dprScale=2;constructor(t,e){super(e),this.props={text:t.text,fontSize:t.fontSize??16,fontFamily:t.fontFamily??"PixelOperator8",color:t.color??16777215,align:t.align??"left",wordWrap:t.wordWrap??!1,wordWrapWidth:t.wordWrapWidth??0,fontWeight:t.fontWeight??"normal",lineHeight:t.lineHeight??1.2},this.textObject=(0,s.asTextDPR)({text:this.props.text,style:this.getTextStyle(),dprScale:this.dprScale,pixelPerfect:!0}),this.textObject.roundPixels=!0,this.container.addChild(this.textObject)}getTextStyle(){const t={fontFamily:this.props.fontFamily,fontSize:this.props.fontSize,fill:this.props.color,align:this.props.align,fontWeight:this.props.fontWeight,lineHeight:this.props.fontSize*this.props.lineHeight};return this.props.wordWrap&&(t.wordWrap=!0,t.wordWrapWidth=this.props.wordWrapWidth*this.dprScale),t}updateTextStyle(){const t=this.getTextStyle();this.textObject.style.fontSize=t.fontSize*this.dprScale,this.textObject.style.fontFamily=t.fontFamily,this.textObject.style.fill=t.fill,this.textObject.style.align=t.align,this.textObject.style.fontWeight=t.fontWeight,this.textObject.style.lineHeight=t.lineHeight*this.dprScale,this.props.wordWrap&&(this.textObject.style.wordWrap=t.wordWrap,this.textObject.style.wordWrapWidth=t.wordWrapWidth)}measure(){this.boxModel.padding;const t=this.textObject,e={width:t.width,height:t.height};return this.layoutEngine.measure(this.boxModel,e)}layout(t,e){const i=this.boxModel.padding;if(this.props.wordWrap&&0===this.props.wordWrapWidth){const e=t-i.horizontal;this.props.wordWrapWidth=e,this.updateTextStyle()}const o=this.measure();this.computedLayout=this.layoutEngine.layout(this.boxModel,o,{width:t,height:e});let s=o.width,r=o.height;"fill"===this.boxModel.width?s=t:"number"==typeof this.boxModel.width&&(s=this.boxModel.width+i.horizontal),"fill"===this.boxModel.height?r=e:"number"==typeof this.boxModel.height&&(r=this.boxModel.height+i.vertical),this.computedLayout.width=s,this.computedLayout.height=r,this.computedLayout.contentX=i.left,this.computedLayout.contentY=i.top,this.computedLayout.contentWidth=s-i.horizontal,this.computedLayout.contentHeight=r-i.vertical,this.layoutDirty=!1,this.render()}render(){const t=this.boxModel.padding,e=Math.round(t.left);let i;if(this.computedLayout.height>0&&this.computedLayout.contentHeight>0){const e=this.textObject.height,o=this.computedLayout.contentHeight;i=Math.round(t.top+(o-e)/2)}else i=Math.round(t.top);this.textObject.position.set(e,i),this.textObject.roundPixels=!0}setText(t){this.props.text=t,this.textObject.text=t,this.markLayoutDirty()}setColor(t){this.props.color=t,this.textObject.style.fill=t}setPosition(t,e){this.textObject.position.set(Math.round(t),Math.round(e))}setFontSize(t){this.props.fontSize=t,this.textObject.style.fontSize=t*this.dprScale,this.textObject.style.lineHeight=t*this.props.lineHeight*this.dprScale,this.markLayoutDirty()}getText(){return this.props.text}}e.UILabel=r},868:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UICheckbox=void 0;const s=o(i(47)),r=i(531),n=i(160);class h extends r.UIComponent{props;stateManager;checkboxGraphics;checkmarkGraphics;checked=!1;colorOverrides={};keydownHandler;constructor(t={},e){super(e),this.colorOverrides={backgroundColor:t.backgroundColor,borderColor:t.borderColor,checkColor:t.checkColor,checkedBackgroundColor:t.checkedBackgroundColor},this.themeResolver=t.themeResolver,this.stateManager=new n.FormStateManager({value:t.checked,defaultValue:t.defaultChecked,onChange:t.onChange}),this.enabled=!t.disabled,this.checked=this.stateManager.getValue();const i=this.themeResolver;this.props={disabled:t.disabled??!1,size:t.size??20,backgroundColor:t.backgroundColor??i?.getColor("background")??16777215,borderColor:t.borderColor??i?.getColor("border")??13421772,checkColor:t.checkColor??i?.getCheckmarkColor()??16777215,checkedBackgroundColor:t.checkedBackgroundColor??i?.getColor("selected")??4886754,borderRadius:t.borderRadius??4},this.boxModel.width=this.props.size,this.boxModel.height=this.props.size,this.tabIndex=0,this.checkboxGraphics=new s.default.Graphics,this.checkmarkGraphics=new s.default.Graphics,this.container.addChild(this.checkboxGraphics),this.container.addChild(this.checkmarkGraphics),this.container.hitArea=new s.default.Rectangle(0,0,this.props.size,this.props.size),this.setupInteractivity(),this.updateVisuals(),this.props.disabled&&(this.enabled=!1,this.container.alpha=.6)}setupInteractivity(){this.makeInteractive("pointer"),this.container.on("pointerover",this.handlePointerOver.bind(this)),this.container.on("pointerout",this.handlePointerOut.bind(this)),this.container.on("pointerdown",this.handlePointerDown.bind(this)),this.container.on("pointerup",this.handlePointerUp.bind(this)),this.container.on("pointerupoutside",this.handlePointerUpOutside.bind(this)),"undefined"!=typeof window&&(this.keydownHandler=t=>{this.focused&&!this.props.disabled&&(" "!==t.key&&"Spacebar"!==t.key||(t.preventDefault(),t.stopPropagation(),this.toggle()))},window.addEventListener("keydown",this.keydownHandler))}handlePointerOver(){this.props.disabled||(this.hovered=!0)}handlePointerOut(){this.props.disabled||(this.hovered=!1)}handlePointerDown(){this.props.disabled||(this.pressed=!0,this.updateVisuals())}handlePointerUp(){this.props.disabled||(this.pressed=!1,this.toggle())}handlePointerUpOutside(){this.props.disabled||(this.pressed=!1)}toggle(){if(this.props.disabled)return;const t=this.stateManager.getValue();this.setChecked(!t)}setChecked(t){this.props.disabled||(this.stateManager.setValue(t),this.checked=t,this.updateVisuals())}getChecked(){return this.stateManager.getValue()}updateVisuals(){const t=this.props.size,e=this.props.borderRadius,i=this.checked;(!this.container.hitArea||this.container.hitArea instanceof s.default.Rectangle&&(this.container.hitArea.width!==t||this.container.hitArea.height!==t))&&(this.container.hitArea=new s.default.Rectangle(0,0,t,t)),this.checkboxGraphics.clear(),this.checkmarkGraphics.clear();const o=i?this.resolveColor("selected",this.colorOverrides.checkedBackgroundColor):this.resolveColor("background",this.colorOverrides.backgroundColor),r=this.resolveColor("border",this.colorOverrides.borderColor);if(this.checkboxGraphics.roundRect(0,0,t,t,e),this.checkboxGraphics.fill({color:o}),this.checkboxGraphics.stroke({color:r,width:1}),i){const e=.6*t,i=(t-e)/2,o=(t-e)/2,s=this.resolveCheckmarkColor(this.colorOverrides.checkColor);this.checkmarkGraphics.moveTo(i+.2*e,o+.5*e),this.checkmarkGraphics.lineTo(i+.45*e,o+.75*e),this.checkmarkGraphics.lineTo(i+.8*e,o+.25*e),this.checkmarkGraphics.stroke({color:s,width:2})}}measure(){const t={width:this.props.size,height:this.props.size};return this.layoutEngine.measure(this.boxModel,t)}layout(t,e){super.layout(t,e),this.container.hitArea=new s.default.Rectangle(0,0,this.props.size,this.props.size),"none"!==this.container.eventMode&&"passive"!==this.container.eventMode||(this.container.eventMode="static")}render(){}updateChecked(t){this.stateManager.isControlledMode()&&t!==this.checked&&(this.stateManager.updateValue(t),this.checked=t,this.updateVisuals())}setDisabled(t){this.props.disabled=t,this.enabled=!t,this.enabled=!t,this.container.cursor=t?"default":"pointer",this.updateVisuals()}destroy(){"undefined"!=typeof window&&this.keydownHandler&&window.removeEventListener("keydown",this.keydownHandler),super.destroy()}}e.UICheckbox=h},886:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeResolver=void 0,e.ThemeResolver=class{theme;constructor(t){this.theme=t}getColor(t,e){if(void 0!==e)return e;const i=`control${this.capitalize(t)}`,o=this.theme[i];return"number"==typeof o?o:this.theme.controlBackground}getControlColor(t,e,i){if(void 0!==i)return i;const o=`${t}${this.capitalize(e)}`,s=this.theme[o];return"number"==typeof s?s:this.getColor(e)}getControlProperty(t,e){const i=this.theme[t];return"number"==typeof i?i:e}getTextColor(t){return void 0!==t?t:this.theme.text}getTextSecondary(t){return void 0!==t?t:this.theme.textSecondary}getPlaceholderColor(t){return void 0!==t?t:this.getControlProperty("textInputPlaceholder",this.theme.textSecondary)}getCheckmarkColor(t){return void 0!==t?t:this.getControlProperty("checkboxCheckmark",this.theme.controlText)}getSelectDropdownBackground(t){return void 0!==t?t:this.getControlProperty("selectDropdown",this.theme.controlBackground)}capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}}},946:function(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.UIRadioOption=void 0;const s=o(i(47)),r=i(531),n=i(95),h=i(851),a=i(669);class l extends r.UIComponent{props;onChange;radioButton;label;constructor(t,e){super(e);const i=t.themeResolver;this.props={label:t.label,selected:t.selected,disabled:t.disabled??!1,size:t.size??20,fontSize:t.fontSize??16,textColor:t.textColor??i?.getTextColor()??16777215,backgroundColor:t.backgroundColor??i?.getColor("background")??16777215,borderColor:t.borderColor??i?.getColor("border")??13421772,selectedColor:t.selectedColor??i?.getColor("selected")??4886754,labelGap:t.labelGap??8},this.onChange=t.onChange,this.radioButton=new n.UIRadioButton({selected:this.props.selected,disabled:this.props.disabled,size:this.props.size,backgroundColor:this.props.backgroundColor,borderColor:this.props.borderColor,selectedColor:this.props.selectedColor,themeResolver:i,onChange:t=>{this.onChange?.(t)}},{padding:a.EdgeInsets.zero()});const o=this.props.disabled?i?.getColor("disabled")??6710886:this.props.textColor;this.label=new h.UILabel({text:this.props.label,fontSize:this.props.fontSize,color:o,align:"left"},{padding:a.EdgeInsets.zero()}),this.label.container.eventMode="static",this.label.container.cursor="pointer",this.label.container.on("pointerdown",(()=>{this.props.disabled||this.onChange?.(!0)})),this.container.addChild(this.radioButton.container),this.container.addChild(this.label.container),this.boxModel.width="auto",this.boxModel.height="auto"}updateSelected(t){this.radioButton.updateSelected(t)}setDisabled(t){this.props.disabled=t,this.radioButton.setDisabled(t);const e=this.radioButton.themeResolver,i=t?e?.getColor("disabled")??6710886:this.props.textColor;this.label.setColor(i)}measure(){const t=this.props.size,e=this.label.measure(),i=e.height,o=Math.max(t,i);return{width:t+this.props.labelGap+e.width,height:o}}layout(t,e){const i=this.measure(),o=this.props.size;this.radioButton.layout(o,o);const r=this.label.measure();this.label.layout(r.width,r.height);const n=(i.height-r.height)/2;this.label.container.position.set(o+this.props.labelGap,n);const h=(i.height-o)/2;this.radioButton.container.position.set(0,h),this.container.hitArea=new s.default.Rectangle(0,0,i.width,i.height),"none"!==this.container.eventMode&&"passive"!==this.container.eventMode||(this.container.eventMode="static"),this.computedLayout=this.layoutEngine.layout(this.boxModel,i,{width:t,height:e}),this.layoutDirty=!1,this.render()}render(){}destroy(){this.radioButton.destroy(),this.label.destroy(),super.destroy()}}e.UIRadioOption=l},972:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BORDER=e.GRID=e.units=e.px=e.DEFAULT_PIXEL_GRID=e.PixelGrid=void 0,e.createBorderConfig=function(t={}){const e=t.outer??1,i=t.middle??1,o=t.inner??1;return{outer:e,middle:i,inner:o,total:e+i+o}};class i{unit;scale;border;padding;gap;margin;fontScale;constructor(t={}){this.unit=t.unit??1,this.scale=t.scale??4,this.border=t.border??1,this.padding=t.padding??1,this.gap=t.gap??1,this.margin=t.margin??5,this.fontScale=t.fontScale??this.scale/16}px(t){return t*this.unit*this.scale}units(t){return Math.round(t/(this.unit*this.scale))}}e.PixelGrid=i,e.DEFAULT_PIXEL_GRID=(()=>{const t="undefined"!=typeof localStorage?localStorage.getItem("temp-grid-scale"):null;if(t){const e=parseInt(t,10);if(!isNaN(e)&&e>=1&&e<=4)return new i({scale:e})}return new i})(),e.px=t=>e.DEFAULT_PIXEL_GRID.px(t),e.units=t=>e.DEFAULT_PIXEL_GRID.units(t),e.GRID={unit:e.DEFAULT_PIXEL_GRID.unit,scale:e.DEFAULT_PIXEL_GRID.scale,border:e.DEFAULT_PIXEL_GRID.border,padding:e.DEFAULT_PIXEL_GRID.padding,gap:e.DEFAULT_PIXEL_GRID.gap,margin:e.DEFAULT_PIXEL_GRID.margin,fontScale:e.DEFAULT_PIXEL_GRID.fontScale},e.BORDER={outer:1,middle:1,inner:1,total:3}}},i={};function o(t){var s=i[t];if(void 0!==s)return s.exports;var r=i[t]={exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}var s={};return(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0}),t.asTextDPR=t.createBorderConfig=t.BORDER=t.GRID=t.units=t.px=t.PixelGrid=t.UIScaleMode=t.UILayer=t.FlatCardStyle=t.BaseCardStyle=t.CardPanel=t.UITabs=t.UIScrollContainer=t.UITextArea=t.UITextInput=t.UISelect=t.UIRadioGroup=t.UIRadioButton=t.UICheckboxWithLabel=t.UICheckbox=t.ButtonState=t.UIButton=t.UIPanel=t.UILabel=t.UIBox=t.createDefaultLightTheme=t.createDefaultDarkTheme=t.ThemeResolver=t.ThemeManager=t.FlexAlign=t.FlexJustify=t.FlexDirection=t.FlexContainer=t.ThemeApplier=t.TextInputHandler=t.FormStateManager=t.LayoutEngine=t.UIFocusManager=t.UIComponent=t.createDefaultBoxModel=t.EdgeInsets=void 0;var e=o(669);Object.defineProperty(t,"EdgeInsets",{enumerable:!0,get:function(){return e.EdgeInsets}});var i=o(686);Object.defineProperty(t,"createDefaultBoxModel",{enumerable:!0,get:function(){return i.createDefaultBoxModel}});var r=o(531);Object.defineProperty(t,"UIComponent",{enumerable:!0,get:function(){return r.UIComponent}});var n=o(818);Object.defineProperty(t,"UIFocusManager",{enumerable:!0,get:function(){return n.UIFocusManager}});var h=o(160);Object.defineProperty(t,"LayoutEngine",{enumerable:!0,get:function(){return h.LayoutEngine}}),Object.defineProperty(t,"FormStateManager",{enumerable:!0,get:function(){return h.FormStateManager}}),Object.defineProperty(t,"TextInputHandler",{enumerable:!0,get:function(){return h.TextInputHandler}}),Object.defineProperty(t,"ThemeApplier",{enumerable:!0,get:function(){return h.ThemeApplier}});var a=o(301);Object.defineProperty(t,"FlexContainer",{enumerable:!0,get:function(){return a.FlexContainer}}),Object.defineProperty(t,"FlexDirection",{enumerable:!0,get:function(){return a.FlexDirection}}),Object.defineProperty(t,"FlexJustify",{enumerable:!0,get:function(){return a.FlexJustify}}),Object.defineProperty(t,"FlexAlign",{enumerable:!0,get:function(){return a.FlexAlign}});var l=o(774);Object.defineProperty(t,"ThemeManager",{enumerable:!0,get:function(){return l.ThemeManager}}),Object.defineProperty(t,"ThemeResolver",{enumerable:!0,get:function(){return l.ThemeResolver}}),Object.defineProperty(t,"createDefaultDarkTheme",{enumerable:!0,get:function(){return l.createDefaultDarkTheme}}),Object.defineProperty(t,"createDefaultLightTheme",{enumerable:!0,get:function(){return l.createDefaultLightTheme}});var d=o(540);Object.defineProperty(t,"UIBox",{enumerable:!0,get:function(){return d.UIBox}});var c=o(851);Object.defineProperty(t,"UILabel",{enumerable:!0,get:function(){return c.UILabel}});var u=o(243);Object.defineProperty(t,"UIPanel",{enumerable:!0,get:function(){return u.UIPanel}});var p=o(17);Object.defineProperty(t,"UIButton",{enumerable:!0,get:function(){return p.UIButton}}),Object.defineProperty(t,"ButtonState",{enumerable:!0,get:function(){return p.ButtonState}});var g=o(868);Object.defineProperty(t,"UICheckbox",{enumerable:!0,get:function(){return g.UICheckbox}});var b=o(830);Object.defineProperty(t,"UICheckboxWithLabel",{enumerable:!0,get:function(){return b.UICheckboxWithLabel}});var f=o(95);Object.defineProperty(t,"UIRadioButton",{enumerable:!0,get:function(){return f.UIRadioButton}});var C=o(152);Object.defineProperty(t,"UIRadioGroup",{enumerable:!0,get:function(){return C.UIRadioGroup}});var m=o(5);Object.defineProperty(t,"UISelect",{enumerable:!0,get:function(){return m.UISelect}});var y=o(479);Object.defineProperty(t,"UITextInput",{enumerable:!0,get:function(){return y.UITextInput}});var _=o(375);Object.defineProperty(t,"UITextArea",{enumerable:!0,get:function(){return _.UITextArea}});var x=o(238);Object.defineProperty(t,"UIScrollContainer",{enumerable:!0,get:function(){return x.UIScrollContainer}});var w=o(841);Object.defineProperty(t,"UITabs",{enumerable:!0,get:function(){return w.UITabs}});var v=o(272);Object.defineProperty(t,"CardPanel",{enumerable:!0,get:function(){return v.CardPanel}}),Object.defineProperty(t,"BaseCardStyle",{enumerable:!0,get:function(){return v.BaseCardStyle}}),Object.defineProperty(t,"FlatCardStyle",{enumerable:!0,get:function(){return v.FlatCardStyle}});var k=o(288);Object.defineProperty(t,"UILayer",{enumerable:!0,get:function(){return k.UILayer}});var I=o(828);Object.defineProperty(t,"UIScaleMode",{enumerable:!0,get:function(){return I.UIScaleMode}});var S=o(972);Object.defineProperty(t,"PixelGrid",{enumerable:!0,get:function(){return S.PixelGrid}}),Object.defineProperty(t,"px",{enumerable:!0,get:function(){return S.px}}),Object.defineProperty(t,"units",{enumerable:!0,get:function(){return S.units}}),Object.defineProperty(t,"GRID",{enumerable:!0,get:function(){return S.GRID}}),Object.defineProperty(t,"BORDER",{enumerable:!0,get:function(){return S.BORDER}}),Object.defineProperty(t,"createBorderConfig",{enumerable:!0,get:function(){return S.createBorderConfig}});var P=o(410);Object.defineProperty(t,"asTextDPR",{enumerable:!0,get:function(){return P.asTextDPR}})})(),s})(),t.exports=o(i(47))},357:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GUIHeader=void 0;const o=i(47),s=i(334),r=i(369);class n extends s.UIComponent{_title;_config;_draggable;_collapsed;_isFolder;_background;_collapseIndicator;_titleLabel;_dragOffset={x:0,y:0};_isDragging=!1;_onToggle;_onDrag;constructor(t){super(),this._title=t.title,this._config=t.config??r.GUI_CONST,this._draggable=t.draggable??!0,this._collapsed=t.collapsed??!1,this._isFolder=t.isFolder??!1,this._background=new o.Graphics,this.container.addChild(this._background),this._collapseIndicator=new s.UILabel({text:this._collapsed?"":"",fontSize:(0,r.px)(5),fontFamily:this._config.fontFamily,color:r.GUI_COLORS.textMuted}),this._collapseIndicator.container.x=(0,r.px)(this._config.padding),this.container.addChild(this._collapseIndicator.container),this._titleLabel=new s.UILabel({text:this._title,fontSize:(0,r.px)(6),fontFamily:this._config.fontFamily,color:r.GUI_COLORS.text}),this._titleLabel.container.x=(0,r.px)(this._config.padding+6),this.container.addChild(this._titleLabel.container),this._setupEvents(),this._render()}setTitle(t){this._title=t,this._titleLabel.setText(t)}setCollapsed(t){this._collapsed=t,this._collapseIndicator.setText(t?"":"")}onToggle(t){return this._onToggle=t,this}onDrag(t){return this._onDrag=t,this}_setupEvents(){this.container.eventMode="static",this.container.cursor=this._draggable?"grab":"pointer",this.container.on("pointertap",(()=>{this._isDragging||this._onToggle?.()})),this._draggable&&this.container.on("pointerdown",(t=>{this._isDragging=!1,this._dragOffset.x=t.global.x,this._dragOffset.y=t.global.y,this.container.cursor="grabbing",this._onDrag;const e=t=>{this._isDragging=!0;const e=t.global.x-this._dragOffset.x,i=t.global.y-this._dragOffset.y;this._onDrag?.(e,i),this._dragOffset.x=t.global.x,this._dragOffset.y=t.global.y},i=()=>{this.container.cursor="grab",this.container.off("globalpointermove",e),this.container.off("pointerup",i),this.container.off("pointerupoutside",i),setTimeout((()=>{this._isDragging=!1}),0)};this.container.on("globalpointermove",e),this.container.on("pointerup",i),this.container.on("pointerupoutside",i)}))}_render(){const t=(0,r.px)(this._config.width),e=(0,r.px)(this._config.headerHeight);this._background.clear(),this._background.rect(0,0,t,e),this._background.fill(this._isFolder?r.GUI_COLORS.folder:r.GUI_COLORS.header),this._collapseIndicator.container.y=(e-this._collapseIndicator.container.height)/2,this._titleLabel.container.y=(e-this._titleLabel.container.height)/2}measure(){return{width:(0,r.px)(this._config.width),height:(0,r.px)(this._config.headerHeight)}}layout(t,e){this._render()}render(){this._render()}}e.GUIHeader=n,e.default=n},369:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GUI_COLORS=e.GUI_CONST=e.units=e.px=e.GUI_GRID=void 0;const o=i(334);e.GUI_GRID=new o.PixelGrid({scale:2}),e.px=t=>e.GUI_GRID.px(t),e.units=t=>e.GUI_GRID.units(t),e.GUI_CONST={width:100,rowHeight:12,padding:3,border:1,headerHeight:12,gap:1,labelRatio:.4,fontFamily:"PixelOperator8, ui-monospace",fontSize:8},e.GUI_COLORS={background:1710638,header:1450302,border:996448,text:16777215,textMuted:8947848,accent:54527,sliderTrack:996448,sliderFill:54527,input:2434341,inputBorder:3815994,hover:2763342,folder:1184302}},465:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptionControl=void 0;const o=i(47),s=i(334),r=i(173),n=i(369);class h extends r.Control{_options=[];_selectedIndex=0;_selectBg;_valueLabel;_arrow;constructor(t,e,i,r,h={}){super(t,e,i,h),this._normalizeOptions(r),this._selectedIndex=this._findSelectedIndex(),this._selectBg=new o.Graphics,this._widget.addChild(this._selectBg),this._valueLabel=new s.UILabel({text:this._getSelectedLabel(),fontSize:(0,n.px)(6),fontFamily:this.config.fontFamily,color:n.GUI_COLORS.text}),this._widget.addChild(this._valueLabel.container),this._arrow=new s.UILabel({text:"",fontSize:(0,n.px)(4),fontFamily:this.config.fontFamily,color:n.GUI_COLORS.textMuted}),this._widget.addChild(this._arrow.container),this._setupInteractions(),this.layout(),this.updateDisplay()}options(t){return this._normalizeOptions(t),this._selectedIndex=this._findSelectedIndex(),this.updateDisplay(),this}updateDisplay(){return this._selectedIndex=this._findSelectedIndex(),this._valueLabel.setText(this._getSelectedLabel()),this._renderWidget(),this}_normalizeOptions(t){if(this._options=[],Array.isArray(t))for(const e of t)this._options.push([String(e),e]);else for(const[e,i]of Object.entries(t))this._options.push([e,i])}_findSelectedIndex(){const t=this.getValue();for(let e=0;e<this._options.length;e++)if(this._options[e][1]===t)return e;return 0}_getSelectedLabel(){return 0===this._options.length?"":this._options[this._selectedIndex]?.[0]??""}_setupInteractions(){this._widget.eventMode="static",this._widget.cursor="pointer",this._widget.on("pointertap",(t=>{if(this._disabled)return;const e=2===t.button||t.shiftKey;this._selectedIndex=e?(this._selectedIndex-1+this._options.length)%this._options.length:(this._selectedIndex+1)%this._options.length;const[,i]=this._options[this._selectedIndex];this.setValue(i),this._callOnFinishChange()})),this._widget.on("rightclick",(t=>{t.preventDefault?.()}))}_renderWidget(){const t=(0,n.px)(8),e=this._textY+(0,n.px)(3),i=Math.round(e-t/2);this._selectBg.clear(),this._selectBg.roundRect(0,i,this._widgetWidth,t,(0,n.px)(1)),this._selectBg.fill(n.GUI_COLORS.input),this._selectBg.stroke({color:n.GUI_COLORS.inputBorder,width:(0,n.px)(.5)}),this._valueLabel.container.x=(0,n.px)(1.5),this._valueLabel.container.y=this._textY,this._arrow.container.x=this._widgetWidth-this._arrow.container.width-(0,n.px)(1.5),this._arrow.container.y=this._textY}layout(t,e){super.layout(t,e),this._renderWidget()}}e.OptionControl=h,e.default=h},525:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberControl=void 0;const o=i(47),s=i(334),r=i(173),n=i(369);class h extends r.Control{_min;_max;_step;_hasSlider;_track;_fill;_valueLabel;_dragging=!1;_dragStartX=0;_dragStartValue=0;constructor(t,e,i,r,h,a,l={}){super(t,e,i,l),this._min=r??l.min,this._max=h??l.max,this._step=a??l.step??this._computeStep(),this._hasSlider=void 0!==this._min&&void 0!==this._max,this._track=new o.Graphics,this._widget.addChild(this._track),this._fill=new o.Graphics,this._widget.addChild(this._fill),this._valueLabel=new s.UILabel({text:this._formatValue(this.getValue()),fontSize:(0,n.px)(6),fontFamily:this.config.fontFamily,color:n.GUI_COLORS.text}),this._widget.addChild(this._valueLabel.container),this._setupInteractions(),this.layout(),this.updateDisplay()}min(t){return this._min=t,this._hasSlider=void 0!==this._min&&void 0!==this._max,this.updateDisplay(),this}max(t){return this._max=t,this._hasSlider=void 0!==this._min&&void 0!==this._max,this.updateDisplay(),this}step(t){return this._step=t,this}updateDisplay(){const t=this.getValue();return this._valueLabel.setText(this._formatValue(t)),this._renderWidget(),this}_computeStep(){const t=Math.abs(this.getValue());return 0===t?.1:t<1?.01:t<10?.1:t<100?1:10}_formatValue(t){const e=this._step.toString(),i=e.indexOf("."),o=-1===i?0:e.length-i-1;return t.toFixed(Math.min(o,4))}_clampValue(t){return this._step>0&&(t=Math.round(t/this._step)*this._step),void 0!==this._min&&(t=Math.max(this._min,t)),void 0!==this._max&&(t=Math.min(this._max,t)),t}_getNormalized(){if(void 0===this._min||void 0===this._max)return 0;const t=this._max-this._min;return 0===t?0:(this.getValue()-this._min)/t}_setFromNormalized(t){if(void 0===this._min||void 0===this._max)return;const e=this._max-this._min,i=this._min+t*e;this.setValue(this._clampValue(i))}_getSliderWidth(){return this._widgetWidth-(0,n.px)(20)}_setupInteractions(){this._widget.eventMode="static",this._widget.cursor="ew-resize",this._widget.on("pointerdown",(t=>{if(this._disabled)return;if(this._dragging=!0,this._dragStartX=t.global.x,this._dragStartValue=this.getValue(),this._hasSlider){const e=this._widget.toLocal(t.global),i=this._getSliderWidth(),o=Math.max(0,Math.min(1,e.x/i));this._setFromNormalized(o)}const e=t=>{if(this._dragging)if(this._hasSlider){const e=this._widget.toLocal(t.global),i=this._getSliderWidth(),o=Math.max(0,Math.min(1,e.x/i));this._setFromNormalized(o)}else{const e=t.global.x-this._dragStartX,i=.5*this._step,o=this._dragStartValue+e*i;this.setValue(this._clampValue(o))}},i=()=>{this._dragging=!1,this._callOnFinishChange(),this._widget.off("globalpointermove",e),this._widget.off("pointerup",i),this._widget.off("pointerupoutside",i)};this._widget.on("globalpointermove",e),this._widget.on("pointerup",i),this._widget.on("pointerupoutside",i)}))}_renderWidget(){const t=this._getSliderWidth(),e=(0,n.px)(2),i=this._textY+(0,n.px)(3),o=Math.round(i-e/2);if(this._track.clear(),this._fill.clear(),this._hasSlider){this._track.roundRect(0,o,t,e,(0,n.px)(1)),this._track.fill(n.GUI_COLORS.sliderTrack);const i=t*this._getNormalized();i>0&&(this._fill.roundRect(0,o,i,e,(0,n.px)(1)),this._fill.fill(n.GUI_COLORS.sliderFill))}this._valueLabel.container.x=t+(0,n.px)(2),this._valueLabel.container.y=this._textY}layout(t,e){super.layout(t,e),this._renderWidget()}}e.NumberControl=h,e.default=h},542:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanControl=void 0;const o=i(47),s=i(173),r=i(369);class n extends s.Control{_box;_check;constructor(t,e,i,s={}){super(t,e,i,s),this._box=new o.Graphics,this._widget.addChild(this._box),this._check=new o.Graphics,this._widget.addChild(this._check),this._setupInteractions(),this.layout(),this.updateDisplay()}updateDisplay(){return this._renderWidget(),this}_setupInteractions(){this._widget.eventMode="static",this._widget.cursor="pointer",this._widget.on("pointertap",(()=>{this._disabled||(this.setValue(!this.getValue()),this._callOnFinishChange())}))}_renderWidget(){const t=(0,r.px)(6),e=(0,r.px)(this.config.rowHeight),i=Math.round((e-t)/2),o=this.getValue(),s=this._widgetWidth-t;if(this._box.clear(),this._box.roundRect(s,i,t,t,(0,r.px)(1)),this._box.fill(o?r.GUI_COLORS.accent:r.GUI_COLORS.input),this._box.stroke({color:o?r.GUI_COLORS.accent:r.GUI_COLORS.inputBorder,width:(0,r.px)(.5)}),this._check.clear(),o){const e=(0,r.px)(1.5),o=s+e,n=i+t/2,h=s+t/2-(0,r.px)(.5),a=i+t-e,l=s+t-e,d=i+e;this._check.moveTo(o,n),this._check.lineTo(h,a),this._check.lineTo(l,d),this._check.stroke({color:r.GUI_COLORS.background,width:(0,r.px)(1)})}}layout(t,e){super.layout(t,e),this._renderWidget()}}e.BooleanControl=n,e.default=n},856:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControlRow=void 0;const o=i(47),s=i(334),r=i(369);class n extends s.UIComponent{_rowLabel;_labelMask;_widget;_rowBackground;_rowConfig;_labelText;_textY=0;_widgetWidth=0;constructor(t){super(),this._labelText=t.label,this._rowConfig=t.config??r.GUI_CONST,this._rowBackground=new o.Graphics,this.container.addChild(this._rowBackground),this._rowLabel=new s.UILabel({text:this._labelText,fontSize:(0,r.px)(6),fontFamily:this._rowConfig.fontFamily,color:r.GUI_COLORS.textMuted}),this.container.addChild(this._rowLabel.container),this._labelMask=new o.Graphics,this.container.addChild(this._labelMask),this._rowLabel.container.mask=this._labelMask,this._widget=new o.Container,this.container.addChild(this._widget),this.container.eventMode="static",this.container.on("pointerenter",(()=>this._drawRowBackground(!0))),this.container.on("pointerleave",(()=>this._drawRowBackground(!1)))}get config(){return this._rowConfig}get widget(){return this._widget}get textY(){return this._textY}get widgetWidth(){return this._widgetWidth}setLabel(t){this._labelText=t,this._rowLabel.setText(t)}measure(){const t=this._rowConfig;return{width:(0,r.px)(t.width-2*t.padding),height:(0,r.px)(t.rowHeight)}}layout(t,e){const i=this._rowConfig,o=(0,r.px)(i.width-2*i.padding),s=(0,r.px)(i.rowHeight),n=(0,r.px)(i.padding),h=o*i.labelRatio;this._widgetWidth=o-h,this._textY=Math.round((s-this._rowLabel.container.height)/2),this._rowLabel.container.x=n,this._rowLabel.container.y=this._textY,this._labelMask.clear(),this._labelMask.rect(0,0,h+n,s),this._labelMask.fill(16777215),this._widget.x=h,this._widget.y=0,this._drawRowBackground(!1)}_drawRowBackground(t=!1){const e=this._rowConfig,i=(0,r.px)(e.width-2*e.padding),o=(0,r.px)(e.rowHeight);this._rowBackground.clear(),t&&(this._rowBackground.rect(0,0,i,o),this._rowBackground.fill({color:r.GUI_COLORS.hover,alpha:.5}))}render(){}}e.ControlRow=n,e.default=n}},i={};function o(t){var s=i[t];if(void 0!==s)return s.exports;var r=i[t]={exports:{}};return e[t](r,r.exports,o),r.exports}var s={};return(()=>{"use strict";var t=s;Object.defineProperty(t,"__esModule",{value:!0}),t.GUI_GRID=t.GUI_COLORS=t.GUI_CONST=t.units=t.px=t.OptionControl=t.StringControl=t.BooleanControl=t.NumberControl=t.Control=t.GUI=void 0;var e=o(308);Object.defineProperty(t,"GUI",{enumerable:!0,get:function(){return e.GUI}});var i=o(6);Object.defineProperty(t,"Control",{enumerable:!0,get:function(){return i.Control}}),Object.defineProperty(t,"NumberControl",{enumerable:!0,get:function(){return i.NumberControl}}),Object.defineProperty(t,"BooleanControl",{enumerable:!0,get:function(){return i.BooleanControl}}),Object.defineProperty(t,"StringControl",{enumerable:!0,get:function(){return i.StringControl}}),Object.defineProperty(t,"OptionControl",{enumerable:!0,get:function(){return i.OptionControl}});var r=o(369);Object.defineProperty(t,"px",{enumerable:!0,get:function(){return r.px}}),Object.defineProperty(t,"units",{enumerable:!0,get:function(){return r.units}}),Object.defineProperty(t,"GUI_CONST",{enumerable:!0,get:function(){return r.GUI_CONST}}),Object.defineProperty(t,"GUI_COLORS",{enumerable:!0,get:function(){return r.GUI_COLORS}}),Object.defineProperty(t,"GUI_GRID",{enumerable:!0,get:function(){return r.GUI_GRID}})})(),s})()));