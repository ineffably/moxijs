!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("pixi.js")):"function"==typeof define&&define.amd?define(["pixi.js"],t):"object"==typeof exports?exports.moxi=t(require("pixi.js")):e.moxi=t(e.PIXI)}(self,(e=>{return t={47:t=>{"use strict";t.exports=e},95:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asTextureFrames=function(e,t,i=n){const{frameWidth:r,frameHeight:s,columns:o,rows:a}=i,c=[];if(!t)return console.error("Invalid texture source provided to asTextureFrames"),c;for(let n=0;n<a;n++)for(let i=0;i<o;i++){const o=new e.Rectangle(i*r,n*s,r,s),a=new e.Texture({source:t,frame:o});c.push(a)}return c};const n={frameWidth:48,frameHeight:48,columns:4,rows:4}},146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultRenderOptions=void 0,t.setupMoxi=async function({hostElement:e,renderOptions:n=t.defaultRenderOptions}={}){const{renderer:c}=await o.RenderManager.create(e,n),u=new a.Scene(c),d=new s.Engine(u),{PIXIAssets:l,loadAssets:h}=new i.AssetLoader;return{scene:u,engine:d,PIXIAssets:l,renderer:c,loadAssets:h,camera:new r.Camera(u,c)}};const i=n(411),r=n(644),s=n(245),o=n(365),a=n(567);t.defaultRenderOptions={width:1280,height:720,backgroundColor:1087931}},186:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResizeHandler=r,t.setupResponsiveCanvas=function(e){const t=r(e);return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}};const n={display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},i={imageRendering:"pixelated"};function r(e){const{rootElement:t,width:r,height:s,rootStyles:o=n,canvasStyles:a={},pixelArtMode:c=!1}=e;Object.entries(o).forEach((([e,n])=>{t.style.setProperty(e,n)}));const u=c?{...i,...a}:a;return()=>{const e=t.clientWidth,n=t.clientHeight,i=Math.min(e/r,n/s);if(t.firstElementChild instanceof HTMLCanvasElement){const e=t.firstElementChild;e.style.width=`${Math.round(r*i)}px`,e.style.height=`${Math.round(s*i)}px`,e.style.display="block",Object.entries(u).forEach((([t,n])=>{e.style.setProperty(t,n)}))}}}},245:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=void 0;const r=i(n(47));t.Engine=class{ticker;root;logger;loggerFrequencyMs;nextLogTime;constructor(e=null){this.root=e;const t=r.default.Ticker.shared;t.autoStart=!1,t.add(this.gameLoop),this.ticker=t,this.loggerFrequencyMs=500,this.nextLogTime=0,this.logger=e=>null}start(){return this.ticker.start(),this}stop(){return this.ticker.stop(),this}gameLoop=e=>{if(this.root){const{deltaTime:t}=e;this.root.update(t),this.root.draw(t)}};loadStage(e){return this.root=e,this}}},319:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextureFrameSequences=void 0,t.TextureFrameSequences=class{frames=[];sequences={};constructor(e,t={}){this.frames=e,this.sequences=t}addSequence(e,t,n=1){this.sequences[e]={frames:t,animationSpeed:n}}getSequence(e){return this.sequences[e]||null}getFrame(e){return this.frames[e]||null}getFrameFromSequence(e,t){const n=this.getSequence(e);if(!n)return null;const i=n.frames[t%n.frames.length];return this.frames[i]||null}getFrameSequence(e){const t=this.getSequence(e);return t?t.frames.map((e=>this.frames[e])).filter(Boolean):[]}}},328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientEvents=void 0;const i=n(47);class r{wheelDelta;mouseUpEvent;mouseDownEvent;lastMouseDown;lastMouseUp;keyDownEvent;keyUpEvent;keydown;wheelOffets;movePosition;lastMovePosition;moveDelta;static instance=null;constructor({initWheelOffset:e=new i.Point,onAnyEvent:t=e=>{}}={}){if(r.instance)return r.instance;this.wheelOffets=e,this.keydown={},this.movePosition=new i.Point;const n=e=>{t(e)};document.addEventListener("wheel",(e=>{const t=this.wheelOffets||new i.Point,r=t.x+e.deltaX,s=t.y+e.deltaY;this.wheelOffets=new i.Point(r,s),n({eventType:"wheel",event:e})})),document.addEventListener("mousemove",(e=>{this.lastMovePosition=this.movePosition,this.movePosition=new i.Point(e.clientX,e.clientY),this.moveDelta=new i.Point(this.movePosition.x-this.lastMovePosition.x,this.movePosition.y-this.lastMovePosition.y),n({eventType:"mousemove",event:e})})),document.addEventListener("mousedown",(e=>{this.mouseDownEvent=e,this.lastMouseDown=e,this.mouseUpEvent=null,n({eventType:"mousedown",event:e})})),document.addEventListener("mouseup",(e=>{this.mouseUpEvent=e,this.lastMouseUp=e,this.mouseDownEvent=null,n({eventType:"mouseup",event:e})})),document.addEventListener("keydown",(e=>{const{key:t}=e;this.keyDownEvent=e,this.keyUpEvent=null,this.keydown[t]=e,n({eventType:"keydown",event:e})})),document.addEventListener("keyup",(e=>{const{key:t}=e;this.keyUpEvent=e,this.keyDownEvent=null,delete this.keydown[t],n({eventType:"keyup",event:e})})),r.instance=this}isKeyDown(e){return Boolean(this.keydown[e])}isKeyUp(e){return!this.keydown[e]}}t.ClientEvents=r},365:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderManager=void 0;const r=i(n(47));class s{static getRenderer;static create;htmlRoot;renderer;fitToWindow=!1;constructor(e,t){this.htmlRoot=e,this.renderer=t,e.appendChild(this.renderer.canvas),window.addEventListener("resize",(()=>this.onResize())),this.onResize()}render(e){this.renderer.render(e)}onResize=()=>{const{renderer:e,htmlRoot:t}=this,n=e.canvas,i=t.clientWidth,r=t.clientHeight,s=e.width,o=e.height,a=Math.min(i/s,r/o);n.style.width=`${Math.floor(s*a)}px`,n.style.height=`${Math.floor(o*a)}px`}}t.RenderManager=s,s.getRenderer=async e=>await r.default.autoDetectRenderer(e),s.create=async(e,t)=>new s(e,await s.getRenderer(t))},411:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AssetLoader=void 0;const r=i(n(47));t.AssetLoader=class{PIXIAssets=r.default.Assets;textures=[];loadAssets=async e=>{const{PIXIAssets:t}=this;for(let n=0;n<e.length;n++){const{src:i,alias:r}=e[n];if(r){if(!t.cache.has(r)){const e=await t.load({alias:r,src:i});this.textures.push(e)}}else{const e=await t.load(i);this.textures.push(e)}}return this}}},437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstancedLogic=t.Logic=void 0;class n{name;active=!0;init(e,t,...n){}update(e,t){}}t.Logic=n,t.InstancedLogic=class extends n{}},529:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateLogic=void 0;const i=n(437);class r extends i.Logic{_entity;constructor(e){super(),this.name=e}get entity(){return this._entity}init(e,t){this._entity=e,super.init(e,t)}onEnter(e){}onExit(e){}update(e,t){}}t.StateLogic=r},567:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;const r=i(n(47));function s(e){return Boolean(e?.moxiEntity)}class o extends r.default.Container{renderer;constructor(e){super(),this.renderer=e}init(){this.children.forEach((e=>{s(e)&&e.moxiEntity.init(this.renderer)}))}update(e){this.children.forEach((t=>{s(t)&&t.moxiEntity.update(e)}))}draw(e){this.renderer.render(this)}}t.Scene=o},642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deg2rad=t.rad2deg=t.fetchXml=t.lerp=t.roundTo=t.getRandomInt=t.pr=t.padRight=t.lc=t.uc=void 0,t.metersToPixels=function(e){return 20*e},t.pixelsToMeters=function(e){return.05*e},t.uc=(e="")=>e.toUpperCase(),t.lc=(e="")=>e.toLowerCase(),t.padRight=(e="",t=0,n=" ")=>{let i=e+"";for(;i.length<t;)i+=n;return i},t.pr=t.padRight,t.getRandomInt=(e,t=0)=>Math.floor(Math.random()*(e+1-t))+t,t.roundTo=(e,t)=>Math.round(t*Math.pow(10,e))/Math.pow(10,e),t.lerp=(e,t,n)=>(1-n)*e+n*t,t.fetchXml=async e=>await(await fetch(e)).text(),t.rad2deg=e=>e*(180/Math.PI),t.deg2rad=e=>e*(Math.PI/180)},644:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=t.CameraLogic=void 0;const a=o(n(47)),c=n(437),u=n(858),d=n(642);class l extends c.Logic{name="CameraLogic";speed=.1;target=null;entity;renderer;init(e,t){this.entity=e,this.renderer=t}update(e,t){const{speed:n}=this,i=Math.min(t*n,1);if(e.desiredScale!==e.scale&&(e.scale.x=(0,d.lerp)(e.scale.x,e.desiredScale.x,i),e.scale.y=(0,d.lerp)(e.scale.y,e.desiredScale.y,i)),this.target){const t=this.renderer.width/2,n=this.renderer.height/2,i=-this.target.position.x*e.scale.x+t,r=-this.target.position.y*e.scale.y+n;e.desiredPosition.set(-i,-r)}e.desiredPosition!==e.position&&(e.position.x=(0,d.lerp)(e.position.x,e.desiredPosition.x,i),e.position.y=(0,d.lerp)(e.position.y,e.desiredPosition.y,i)),e.scene.scale.set(e.scale.x,e.scale.y),e.scene.position.set(-e.position.x,-e.position.y)}}t.CameraLogic=l;class h extends a.default.Container{scene;renderer;speed=.1;moxiEntity;desiredScale=new a.Point(1,1);desiredPosition=new a.Point(0,0);constructor(e,t,n={}){super(),this.scene=e,this.renderer=t;const i=new l;i.init(this,t),this.moxiEntity=new u.MoxiEntity(this,n),this.moxiEntity.addLogic(i),this.scene.addChild(this)}}t.Camera=h},693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;class n{listeners={};static instance=new n;on(e,t){(this.listeners[e]||(this.listeners[e]=[])).push(t)}off(e,t){const n=this.listeners[e];n&&(this.listeners[e]=n.filter((e=>e!==t)))}emit(e,...t){(this.listeners[e]||[]).forEach((e=>e(...t)))}once(e,t){this.on(e,((...n)=>{t(...n),this.off(e,t)}))}static getInstance(){return n.instance||(n.instance=new n),n.instance}}t.EventEmitter=n},767:e=>{!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function r(e){var t=e.g.offsetWidth,n=t+100;return e.j.style.width=n+"px",e.i.scrollLeft=n,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function s(e,n){function i(){var e=s;r(e)&&null!==e.g.parentNode&&n(e.l)}var s=e;t(e.h,i),t(e.i,i),r(e)}function o(e,t,n){t=t||{},n=n||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=n}var a=null,c=null,u=null,d=null;function l(e){return null===d&&(d=!!e.document.fonts),d}function h(e,t){var n=e.style,i=e.weight;if(null===u){var r=document.createElement("div");try{r.style.font="condensed 100px sans-serif"}catch(e){}u=""!==r.style.font}return[n,i,u?e.stretch:"","100px",t].join(" ")}o.prototype.load=function(e,t){var r=this,o=e||"BESbswy",u=0,d=t||3e3,f=(new Date).getTime();return new Promise((function(e,t){if(l(r.context)&&!function(e){return null===c&&(l(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!e&&603>parseInt(e[1],10)):c=!1),c}(r.context)){var p=new Promise((function(e,t){!function n(){(new Date).getTime()-f>=d?t(Error(d+"ms timeout exceeded")):r.context.document.fonts.load(h(r,'"'+r.family+'"'),o).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),m=new Promise((function(e,t){u=setTimeout((function(){t(Error(d+"ms timeout exceeded"))}),d)}));Promise.race([m,p]).then((function(){clearTimeout(u),e(r)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function c(){var t;(t=-1!=g&&-1!=v||-1!=g&&-1!=y||-1!=v&&-1!=y)&&((t=g!=v&&g!=y&&v!=y)||(null===a&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=a&&(g==x&&v==x&&y==x||g==w&&v==w&&y==w||g==E&&v==E&&y==E)),t=!t),t&&(null!==b.parentNode&&b.parentNode.removeChild(b),clearTimeout(u),e(r))}var l=new n(o),p=new n(o),m=new n(o),g=-1,v=-1,y=-1,x=-1,w=-1,E=-1,b=document.createElement("div");b.dir="ltr",i(l,h(r,"sans-serif")),i(p,h(r,"serif")),i(m,h(r,"monospace")),b.appendChild(l.g),b.appendChild(p.g),b.appendChild(m.g),r.context.document.body.appendChild(b),x=l.g.offsetWidth,w=p.g.offsetWidth,E=m.g.offsetWidth,function e(){if((new Date).getTime()-f>=d)null!==b.parentNode&&b.parentNode.removeChild(b),t(Error(d+"ms timeout exceeded"));else{var n=r.context.document.hidden;!0!==n&&void 0!==n||(g=l.g.offsetWidth,v=p.g.offsetWidth,y=m.g.offsetWidth,c()),u=setTimeout(e,50)}}(),s(l,(function(e){g=e,c()})),i(l,h(r,'"'+r.family+'",sans-serif')),s(p,(function(e){v=e,c()})),i(p,h(r,'"'+r.family+'",serif')),s(m,(function(e){y=e,c()})),i(m,h(r,'"'+r.family+'",monospace'))}))}))},e.exports=o}()},783:function(e,t,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return i=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},i(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=i(e),o=0;o<n.length;o++)"default"!==n[o]&&r(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.StateLogic=t.StateMachine=t.utils=t.TextureFrameSequences=t.setupResponsiveCanvas=t.Scene=t.RenderManager=t.setupMoxi=t.MoxiEntity=t.loadFonts=t.getTextureRange=t.EventEmitter=t.Engine=t.defaultRenderOptions=t.createTileGrid=t.createResizeHandler=t.ClientEvents=t.CameraLogic=t.Camera=t.Logic=t.asTextureFrames=t.asEntity=t.AssetLoader=void 0;const a=o(n(642));t.utils=a;const c=n(365);Object.defineProperty(t,"RenderManager",{enumerable:!0,get:function(){return c.RenderManager}});const u=n(567);Object.defineProperty(t,"Scene",{enumerable:!0,get:function(){return u.Scene}});const d=n(245);Object.defineProperty(t,"Engine",{enumerable:!0,get:function(){return d.Engine}});const l=n(693);Object.defineProperty(t,"EventEmitter",{enumerable:!0,get:function(){return l.EventEmitter}});const h=n(328);Object.defineProperty(t,"ClientEvents",{enumerable:!0,get:function(){return h.ClientEvents}});const f=n(411);Object.defineProperty(t,"AssetLoader",{enumerable:!0,get:function(){return f.AssetLoader}});const p=n(437);Object.defineProperty(t,"Logic",{enumerable:!0,get:function(){return p.Logic}});const m=n(146);Object.defineProperty(t,"defaultRenderOptions",{enumerable:!0,get:function(){return m.defaultRenderOptions}}),Object.defineProperty(t,"setupMoxi",{enumerable:!0,get:function(){return m.setupMoxi}});const g=n(832);Object.defineProperty(t,"loadFonts",{enumerable:!0,get:function(){return g.loadFonts}});const v=n(858);Object.defineProperty(t,"asEntity",{enumerable:!0,get:function(){return v.asEntity}}),Object.defineProperty(t,"MoxiEntity",{enumerable:!0,get:function(){return v.MoxiEntity}});const y=n(644);Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return y.Camera}}),Object.defineProperty(t,"CameraLogic",{enumerable:!0,get:function(){return y.CameraLogic}});const x=n(95);Object.defineProperty(t,"asTextureFrames",{enumerable:!0,get:function(){return x.asTextureFrames}});const w=n(319);Object.defineProperty(t,"TextureFrameSequences",{enumerable:!0,get:function(){return w.TextureFrameSequences}});const E=n(186);Object.defineProperty(t,"createResizeHandler",{enumerable:!0,get:function(){return E.createResizeHandler}}),Object.defineProperty(t,"setupResponsiveCanvas",{enumerable:!0,get:function(){return E.setupResponsiveCanvas}});const b=n(906);Object.defineProperty(t,"StateMachine",{enumerable:!0,get:function(){return b.StateMachine}});const _=n(529);Object.defineProperty(t,"StateLogic",{enumerable:!0,get:function(){return _.StateLogic}});const M=n(871);Object.defineProperty(t,"createTileGrid",{enumerable:!0,get:function(){return M.createTileGrid}}),Object.defineProperty(t,"getTextureRange",{enumerable:!0,get:function(){return M.getTextureRange}});const P={AssetLoader:f.AssetLoader,asEntity:v.asEntity,asTextureFrames:x.asTextureFrames,Logic:p.Logic,Camera:y.Camera,CameraLogic:y.CameraLogic,ClientEvents:h.ClientEvents,createResizeHandler:E.createResizeHandler,createTileGrid:M.createTileGrid,defaultRenderOptions:m.defaultRenderOptions,Engine:d.Engine,EventEmitter:l.EventEmitter,getTextureRange:M.getTextureRange,loadFonts:g.loadFonts,MoxiEntity:v.MoxiEntity,setupMoxi:m.setupMoxi,RenderManager:c.RenderManager,Scene:u.Scene,setupResponsiveCanvas:E.setupResponsiveCanvas,TextureFrameSequences:w.TextureFrameSequences,utils:a,StateMachine:b.StateMachine,StateLogic:_.StateLogic};t.default=P},832:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadFonts=void 0;const r=i(n(767)),s=n(47);t.loadFonts=async()=>{const e=new r.default("kenfuture-thin");return new Promise((t=>{e.load().then((()=>{s.BitmapFont.install({name:"kenfuture-thin",style:{fontFamily:"kenfuture-thin"}}),t({fontKenfutureThin:e})}))}))}},858:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MoxiEntity=void 0,t.asEntity=function(e,t={}){const i=e;return i.isInteractive=()=>!1,i.moxiEntity=new n(i,t),e};class n{logic={};entity;constructor(e,t={}){this.logic=t,this.entity=e}update(e){for(const t in this.logic){const n=this.logic[t];n.update&&this.entity&&n.active&&n.update(this.entity,e)}}init(e,...t){for(const n in this.logic){const i=this.logic[n];i.init&&this.entity&&i.init(this.entity,e,...t)}}addLogic(e){const t=e.name||e.constructor.name;this.logic[t]=e}getLogic(e){return this.logic[e]}}t.MoxiEntity=n},871:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createTileGrid=function(e,t,n){const{width:i,height:s,cellWidth:o,cellHeight:a,centered:c=!1}=e,u=n||(()=>Math.floor(Math.random()*t.length)),d=new r.default.Container,l=i*s;for(let e=0;e<s;e++)for(let n=0;n<i;n++){const s=n*o,c=e*a,h=u({x:n,y:e,pixelX:s,pixelY:c,index:e*i+n,total:l}),f=new r.default.Sprite(t[h]);f.position.set(s,c),d.addChild(f)}if(c){const e=i*o,t=s*a;d.position.set(-e/2,-t/2)}return d},t.getTextureRange=function(e,t,n){return e.slice(t,t+n)};const r=i(n(47))},906:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateMachine=void 0;class n extends EventTarget{_states={};_currentState=null;_currentStateName=null;constructor(e={}){super(),this._states=e}update(e){this._currentState&&this._currentState.update(this._currentState.entity,e)}setState(e){if(!this._states[e])return;const t=this._currentStateName;this._currentState&&this._currentState.onExit(e),this._currentState=this._states[e],this._currentStateName=e,this._currentState.onEnter(e);const n=new CustomEvent("stateChange",{detail:{prevState:t,newState:e}});this.dispatchEvent(n)}addState(e){this._states[e.name]=e}get currentState(){return this._currentStateName}}t.StateMachine=n}},n={},function e(i){var r=n[i];if(void 0!==r)return r.exports;var s=n[i]={exports:{}};return t[i].call(s.exports,s,s.exports,e),s.exports}(783);var t,n}));