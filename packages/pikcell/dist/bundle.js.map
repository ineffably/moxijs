{"version":3,"file":"bundle.js","mappings":"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ACAG,eACA,sBAAInD,GACF,OAAOz/B,EAASy/B,kBAClB,EACAI,aACAxH,kBACA49B,cACA3pC,YACAlB,iBACA6qB,iBACArqB,kBACAL,iBACA5c,cACAuoD,KAAMxnB,GACNA,aACArzB,WACAH,gBACAq9B,iBACA+H,aACAx4B,SACAF,aACAkX,YACAI,iBACA,gBAAIV,GACF,OAAOx/B,EAASw/B,YAClB,EACArB,SACAmc,SACAp4C,KAAMU,EACN6iD,cACAmB,cACA,cAAIlnB,GACF,OAAO1/B,EAAS0/B,UAClB,EACAy3B,QAASlkB,GACTA,gBACAiM,kBACAqI,eACA5L,iBACA0N,aACArxC,OACAq0C,cACA5hD,WACA2B,mBACA8O,SACAgX,aACAN,kBACAG,mBACA9F,gBACA2M,UACAzf,SACA2Z,YACAM,aACA,kBAAID,GACF,OAAOnzB,EAASmzB,cAClB,EACA26B,WACAv5B,gBACA4C,YACAhd,aACAnM,WACA1K,OACAgsC,QACAjM,2BACA4mB,aACAO,cACAhf,SACAjL,iBACAI,qBACAC,kBACAo1B,YACAlzB,eACAG,kBACAtZ,SACA9gB,eACAslD,YACCiJ,OAAOC,YAAa,CAAE3yD,MAAO,YAChC1E,EAASwH,KAAOA,EAChBxH,EAASmiB,KAAOA,GAChBniB,EAAS+2D,IAAM3I,GACfpuD,EAASouD,SAAWA,GACpBpuD,EAASuT,WAAaA,EACtBvT,EAASg3D,MAAQtlB,GACjB1xC,EAAS0xC,WAAaA,GACtB1xC,EAASi3D,OAASxhB,GAClBz1C,EAASy1C,YAAcA,GACvBz1C,EAAS2/B,WAAaA,GACtB3/B,EAASwuD,eAAiBA,GAC1BxuD,EAAS8uD,kBAAoBA,GAC7B9uD,EAASqzD,mBAAqBA,GAC9BrzD,EAAS0yD,qBAAuBA,GAChC1yD,EAASoxD,gBAAkBA,GAC3BpxD,EAASyiC,QAAUA,GACnBziC,EAAS4iC,YAAcA,GACvB5iC,EAAS6/B,UAAYA,GACrB7/B,EAASq4B,eAAiBA,GAC1Br4B,EAASi2D,WAAaA,GACtBj2D,EAASssB,SAAWA,GACpBtsB,EAASorB,cAAg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","sources":["webpack://@moxijs/pikcell/../core/lib/index.js","webpack://@moxijs/pikcell/external window \"PIXI\"","webpack://@moxijs/pikcell/webpack/bootstrap","webpack://@moxijs/pikcell/./src/theming/palettes.ts","webpack://@moxijs/pikcell/./src/theming/theme.ts","webpack://@moxijs/pikcell/./src/logic/card-drag-logic.ts","webpack://@moxijs/pikcell/./src/logic/card-resize-logic.ts","webpack://@moxijs/pikcell/./src/components/pixel-card.ts","webpack://@moxijs/pikcell/./src/components/pixel-button.ts","webpack://@moxijs/pikcell/./src/components/pixel-dialog.ts","webpack://@moxijs/pikcell/./src/components/pixel-checkbox.ts","webpack://@moxijs/pikcell/./src/config/controller-configs.ts","webpack://@moxijs/pikcell/./src/controllers/sprite-sheet-controller.ts","webpack://@moxijs/pikcell/./src/components/spritesheet-card.ts","webpack://@moxijs/pikcell/./src/state/ui-state-manager.ts","webpack://@moxijs/pikcell/./src/state/project-state-manager.ts","webpack://@moxijs/pikcell/./src/state/layout-state-manager.ts","webpack://@moxijs/pikcell/./src/state/undo-manager.ts","webpack://@moxijs/pikcell/./src/utilities/card-zoom-handler.ts","webpack://@moxijs/pikcell/./src/utilities/managed-card.ts","webpack://@moxijs/pikcell/./src/config/card-configs.ts","webpack://@moxijs/pikcell/./src/cards/info-bar-card.ts","webpack://@moxijs/pikcell/./src/cards/commander-bar-card.ts","webpack://@moxijs/pikcell/./src/utilities/button-layout.ts","webpack://@moxijs/pikcell/./src/theming/tool-icons.ts","webpack://@moxijs/pikcell/./src/cards/toolbar-card.ts","webpack://@moxijs/pikcell/./src/components/popup-toolbar.ts","webpack://@moxijs/pikcell/./src/config/constants.ts","webpack://@moxijs/pikcell/./src/managers/sprite-sheet-manager.ts","webpack://@moxijs/pikcell/./src/managers/ui-manager.ts","webpack://@moxijs/pikcell/./src/managers/layout-manager.ts","webpack://@moxijs/pikcell/./src/managers/file-operations-manager.ts","webpack://@moxijs/pikcell/./src/controllers/sprite-controller.ts","webpack://@moxijs/pikcell/./src/utilities/shape-drawer.ts","webpack://@moxijs/pikcell/./src/utilities/card-utils.ts","webpack://@moxijs/pikcell/./src/config/card-ids.ts","webpack://@moxijs/pikcell/./src/managers/sprite-card-factory.ts","webpack://@moxijs/pikcell/./src/components/sprite-editor-card.ts","webpack://@moxijs/pikcell/./src/sprite-editor.ts","webpack://@moxijs/pikcell/./src/utilities/texture-utils.ts","webpack://@moxijs/pikcell/./src/cards/palette-card.ts","webpack://@moxijs/pikcell/./src/index.ts","webpack://@moxijs/pikcell/./src/main.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"pixi.js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"pixi.js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"moxi\"] = factory(require(\"pixi.js\"));\n\telse\n\t\troot[\"moxi\"] = factory(root[\"PIXI\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE_pixi_js__) => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"../../node_modules/fontfaceobserver/fontfaceobserver.standalone.js\":\n/*!**************************************************************************!*\\\n  !*** ../../node_modules/fontfaceobserver/fontfaceobserver.standalone.js ***!\n  \\**************************************************************************/\n/***/ ((module) => {\n\n/* Font Face Observer v2.3.0 -  Bram Stein. License: BSD-3-Clause */(function(){function p(a,c){document.addEventListener?a.addEventListener(\"scroll\",c,!1):a.attachEvent(\"scroll\",c)}function u(a){document.body?a():document.addEventListener?document.addEventListener(\"DOMContentLoaded\",function b(){document.removeEventListener(\"DOMContentLoaded\",b);a()}):document.attachEvent(\"onreadystatechange\",function g(){if(\"interactive\"==document.readyState||\"complete\"==document.readyState)document.detachEvent(\"onreadystatechange\",g),a()})};function w(a){this.g=document.createElement(\"div\");this.g.setAttribute(\"aria-hidden\",\"true\");this.g.appendChild(document.createTextNode(a));this.h=document.createElement(\"span\");this.i=document.createElement(\"span\");this.m=document.createElement(\"span\");this.j=document.createElement(\"span\");this.l=-1;this.h.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";this.i.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";\nthis.j.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";this.m.style.cssText=\"display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;\";this.h.appendChild(this.m);this.i.appendChild(this.j);this.g.appendChild(this.h);this.g.appendChild(this.i)}\nfunction x(a,c){a.g.style.cssText=\"max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:\"+c+\";\"}function B(a){var c=a.g.offsetWidth,b=c+100;a.j.style.width=b+\"px\";a.i.scrollLeft=b;a.h.scrollLeft=a.h.scrollWidth+100;return a.l!==c?(a.l=c,!0):!1}function C(a,c){function b(){var e=g;B(e)&&null!==e.g.parentNode&&c(e.l)}var g=a;p(a.h,b);p(a.i,b);B(a)};function D(a,c,b){c=c||{};b=b||window;this.family=a;this.style=c.style||\"normal\";this.weight=c.weight||\"normal\";this.stretch=c.stretch||\"normal\";this.context=b}var E=null,F=null,G=null,H=null;function I(a){null===F&&(M(a)&&/Apple/.test(window.navigator.vendor)?(a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))(?:\\.([0-9]+))/.exec(window.navigator.userAgent),F=!!a&&603>parseInt(a[1],10)):F=!1);return F}function M(a){null===H&&(H=!!a.document.fonts);return H}\nfunction N(a,c){var b=a.style,g=a.weight;if(null===G){var e=document.createElement(\"div\");try{e.style.font=\"condensed 100px sans-serif\"}catch(q){}G=\"\"!==e.style.font}return[b,g,G?a.stretch:\"\",\"100px\",c].join(\" \")}\nD.prototype.load=function(a,c){var b=this,g=a||\"BESbswy\",e=0,q=c||3E3,J=(new Date).getTime();return new Promise(function(K,L){if(M(b.context)&&!I(b.context)){var O=new Promise(function(r,t){function h(){(new Date).getTime()-J>=q?t(Error(\"\"+q+\"ms timeout exceeded\")):b.context.document.fonts.load(N(b,'\"'+b.family+'\"'),g).then(function(n){1<=n.length?r():setTimeout(h,25)},t)}h()}),P=new Promise(function(r,t){e=setTimeout(function(){t(Error(\"\"+q+\"ms timeout exceeded\"))},q)});Promise.race([P,O]).then(function(){clearTimeout(e);\nK(b)},L)}else u(function(){function r(){var d;if(d=-1!=k&&-1!=l||-1!=k&&-1!=m||-1!=l&&-1!=m)(d=k!=l&&k!=m&&l!=m)||(null===E&&(d=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent),E=!!d&&(536>parseInt(d[1],10)||536===parseInt(d[1],10)&&11>=parseInt(d[2],10))),d=E&&(k==y&&l==y&&m==y||k==z&&l==z&&m==z||k==A&&l==A&&m==A)),d=!d;d&&(null!==f.parentNode&&f.parentNode.removeChild(f),clearTimeout(e),K(b))}function t(){if((new Date).getTime()-J>=q)null!==f.parentNode&&f.parentNode.removeChild(f),\nL(Error(\"\"+q+\"ms timeout exceeded\"));else{var d=b.context.document.hidden;if(!0===d||void 0===d)k=h.g.offsetWidth,l=n.g.offsetWidth,m=v.g.offsetWidth,r();e=setTimeout(t,50)}}var h=new w(g),n=new w(g),v=new w(g),k=-1,l=-1,m=-1,y=-1,z=-1,A=-1,f=document.createElement(\"div\");f.dir=\"ltr\";x(h,N(b,\"sans-serif\"));x(n,N(b,\"serif\"));x(v,N(b,\"monospace\"));f.appendChild(h.g);f.appendChild(n.g);f.appendChild(v.g);b.context.document.body.appendChild(f);y=h.g.offsetWidth;z=n.g.offsetWidth;A=v.g.offsetWidth;t();\nC(h,function(d){k=d;r()});x(h,N(b,'\"'+b.family+'\",sans-serif'));C(n,function(d){l=d;r()});x(n,N(b,'\"'+b.family+'\",serif'));C(v,function(d){m=d;r()});x(v,N(b,'\"'+b.family+'\",monospace'))})})}; true?module.exports=D:(0);}());\n\n\n/***/ }),\n\n/***/ \"../../node_modules/planck/dist/planck.js\":\n/*!************************************************!*\\\n  !*** ../../node_modules/planck/dist/planck.js ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, exports) {\n\n(function(global, factory) {\n   true ? factory(exports) : 0;\n})(this, function(exports2) {\n  \"use strict\";/**\n * Planck.js v1.4.2\n * @license The MIT license\n * @copyright Copyright (c) 2025 Erin Catto, Ali Shakiba\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n  /*! *****************************************************************************\n      Copyright (c) Microsoft Corporation.\n  \n      Permission to use, copy, modify, and/or distribute this software for any\n      purpose with or without fee is hereby granted.\n  \n      THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n      PERFORMANCE OF THIS SOFTWARE.\n      ***************************************************************************** */\n  var extendStatics = function(d2, b2) {\n    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d3, b3) {\n      d3.__proto__ = b3;\n    } || function(d3, b3) {\n      for (var p in b3) if (Object.prototype.hasOwnProperty.call(b3, p)) d3[p] = b3[p];\n    };\n    return extendStatics(d2, b2);\n  };\n  function __extends(d2, b2) {\n    if (typeof b2 !== \"function\" && b2 !== null)\n      throw new TypeError(\"Class extends value \" + String(b2) + \" is not a constructor or null\");\n    extendStatics(d2, b2);\n    function __() {\n      this.constructor = d2;\n    }\n    d2.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());\n  }\n  var __assign = function() {\n    __assign = Object.assign || function __assign2(t) {\n      for (var s2, i = 1, n2 = arguments.length; i < n2; i++) {\n        s2 = arguments[i];\n        for (var p in s2) if (Object.prototype.hasOwnProperty.call(s2, p)) t[p] = s2[p];\n      }\n      return t;\n    };\n    return __assign.apply(this, arguments);\n  };\n  var options = function(input2, defaults) {\n    if (input2 === null || typeof input2 === \"undefined\") {\n      input2 = {};\n    }\n    var output2 = __assign({}, input2);\n    for (var key in defaults) {\n      if (defaults.hasOwnProperty(key) && typeof input2[key] === \"undefined\") {\n        output2[key] = defaults[key];\n      }\n    }\n    if (typeof Object.getOwnPropertySymbols === \"function\") {\n      var symbols = Object.getOwnPropertySymbols(defaults);\n      for (var i = 0; i < symbols.length; i++) {\n        var symbol = symbols[i];\n        if (defaults.propertyIsEnumerable(symbol) && typeof input2[symbol] === \"undefined\") {\n          output2[symbol] = defaults[symbol];\n        }\n      }\n    }\n    return output2;\n  };\n  var math_random = Math.random;\n  var EPSILON = 1e-9;\n  var isFinite = Number.isFinite;\n  function nextPowerOfTwo(x2) {\n    x2 |= x2 >> 1;\n    x2 |= x2 >> 2;\n    x2 |= x2 >> 4;\n    x2 |= x2 >> 8;\n    x2 |= x2 >> 16;\n    return x2 + 1;\n  }\n  function isPowerOfTwo(x2) {\n    return x2 > 0 && (x2 & x2 - 1) === 0;\n  }\n  function mod(num, min, max) {\n    if (typeof min === \"undefined\") {\n      max = 1;\n      min = 0;\n    } else if (typeof max === \"undefined\") {\n      max = min;\n      min = 0;\n    }\n    if (max > min) {\n      num = (num - min) % (max - min);\n      return num + (num < 0 ? max : min);\n    } else {\n      num = (num - max) % (min - max);\n      return num + (num <= 0 ? min : max);\n    }\n  }\n  function clamp(num, min, max) {\n    if (num < min) {\n      return min;\n    } else if (num > max) {\n      return max;\n    } else {\n      return num;\n    }\n  }\n  function random(min, max) {\n    if (typeof min === \"undefined\") {\n      max = 1;\n      min = 0;\n    } else if (typeof max === \"undefined\") {\n      max = min;\n      min = 0;\n    }\n    return min === max ? min : math_random() * (max - min) + min;\n  }\n  var math = Object.create(Math);\n  math.EPSILON = EPSILON;\n  math.isFinite = isFinite;\n  math.nextPowerOfTwo = nextPowerOfTwo;\n  math.isPowerOfTwo = isPowerOfTwo;\n  math.mod = mod;\n  math.clamp = clamp;\n  math.random = random;\n  var math_abs$9 = Math.abs;\n  var math_sqrt$5 = Math.sqrt;\n  var math_max$8 = Math.max;\n  var math_min$8 = Math.min;\n  var Vec2 = (\n    /** @class */\n    function() {\n      function Vec22(x2, y) {\n        if (!(this instanceof Vec22)) {\n          return new Vec22(x2, y);\n        }\n        if (typeof x2 === \"undefined\") {\n          this.x = 0;\n          this.y = 0;\n        } else if (typeof x2 === \"object\") {\n          this.x = x2.x;\n          this.y = x2.y;\n        } else {\n          this.x = x2;\n          this.y = y;\n        }\n      }\n      Vec22.prototype._serialize = function() {\n        return {\n          x: this.x,\n          y: this.y\n        };\n      };\n      Vec22._deserialize = function(data) {\n        var obj = Object.create(Vec22.prototype);\n        obj.x = data.x;\n        obj.y = data.y;\n        return obj;\n      };\n      Vec22.zero = function() {\n        var obj = Object.create(Vec22.prototype);\n        obj.x = 0;\n        obj.y = 0;\n        return obj;\n      };\n      Vec22.neo = function(x2, y) {\n        var obj = Object.create(Vec22.prototype);\n        obj.x = x2;\n        obj.y = y;\n        return obj;\n      };\n      Vec22.clone = function(v3) {\n        return Vec22.neo(v3.x, v3.y);\n      };\n      Vec22.prototype.toString = function() {\n        return JSON.stringify(this);\n      };\n      Vec22.isValid = function(obj) {\n        if (obj === null || typeof obj === \"undefined\") {\n          return false;\n        }\n        return Number.isFinite(obj.x) && Number.isFinite(obj.y);\n      };\n      Vec22.assert = function(o) {\n      };\n      Vec22.prototype.clone = function() {\n        return Vec22.clone(this);\n      };\n      Vec22.prototype.setZero = function() {\n        this.x = 0;\n        this.y = 0;\n        return this;\n      };\n      Vec22.prototype.set = function(x2, y) {\n        if (typeof x2 === \"object\") {\n          this.x = x2.x;\n          this.y = x2.y;\n        } else {\n          this.x = x2;\n          this.y = y;\n        }\n        return this;\n      };\n      Vec22.prototype.setNum = function(x2, y) {\n        this.x = x2;\n        this.y = y;\n        return this;\n      };\n      Vec22.prototype.setVec2 = function(value) {\n        this.x = value.x;\n        this.y = value.y;\n        return this;\n      };\n      Vec22.prototype.wSet = function(a2, v3, b2, w) {\n        if (typeof b2 !== \"undefined\" || typeof w !== \"undefined\") {\n          return this.setCombine(a2, v3, b2, w);\n        } else {\n          return this.setMul(a2, v3);\n        }\n      };\n      Vec22.prototype.setCombine = function(a2, v3, b2, w) {\n        var x2 = a2 * v3.x + b2 * w.x;\n        var y = a2 * v3.y + b2 * w.y;\n        this.x = x2;\n        this.y = y;\n        return this;\n      };\n      Vec22.prototype.setMul = function(a2, v3) {\n        var x2 = a2 * v3.x;\n        var y = a2 * v3.y;\n        this.x = x2;\n        this.y = y;\n        return this;\n      };\n      Vec22.prototype.add = function(w) {\n        this.x += w.x;\n        this.y += w.y;\n        return this;\n      };\n      Vec22.prototype.wAdd = function(a2, v3, b2, w) {\n        if (typeof b2 !== \"undefined\" || typeof w !== \"undefined\") {\n          return this.addCombine(a2, v3, b2, w);\n        } else {\n          return this.addMul(a2, v3);\n        }\n      };\n      Vec22.prototype.addCombine = function(a2, v3, b2, w) {\n        var x2 = a2 * v3.x + b2 * w.x;\n        var y = a2 * v3.y + b2 * w.y;\n        this.x += x2;\n        this.y += y;\n        return this;\n      };\n      Vec22.prototype.addMul = function(a2, v3) {\n        var x2 = a2 * v3.x;\n        var y = a2 * v3.y;\n        this.x += x2;\n        this.y += y;\n        return this;\n      };\n      Vec22.prototype.wSub = function(a2, v3, b2, w) {\n        if (typeof b2 !== \"undefined\" || typeof w !== \"undefined\") {\n          return this.subCombine(a2, v3, b2, w);\n        } else {\n          return this.subMul(a2, v3);\n        }\n      };\n      Vec22.prototype.subCombine = function(a2, v3, b2, w) {\n        var x2 = a2 * v3.x + b2 * w.x;\n        var y = a2 * v3.y + b2 * w.y;\n        this.x -= x2;\n        this.y -= y;\n        return this;\n      };\n      Vec22.prototype.subMul = function(a2, v3) {\n        var x2 = a2 * v3.x;\n        var y = a2 * v3.y;\n        this.x -= x2;\n        this.y -= y;\n        return this;\n      };\n      Vec22.prototype.sub = function(w) {\n        this.x -= w.x;\n        this.y -= w.y;\n        return this;\n      };\n      Vec22.prototype.mul = function(m) {\n        this.x *= m;\n        this.y *= m;\n        return this;\n      };\n      Vec22.prototype.length = function() {\n        return Vec22.lengthOf(this);\n      };\n      Vec22.prototype.lengthSquared = function() {\n        return Vec22.lengthSquared(this);\n      };\n      Vec22.prototype.normalize = function() {\n        var length = this.length();\n        if (length < EPSILON) {\n          return 0;\n        }\n        var invLength = 1 / length;\n        this.x *= invLength;\n        this.y *= invLength;\n        return length;\n      };\n      Vec22.normalize = function(v3) {\n        var length = Vec22.lengthOf(v3);\n        if (length < EPSILON) {\n          return Vec22.zero();\n        }\n        var invLength = 1 / length;\n        return Vec22.neo(v3.x * invLength, v3.y * invLength);\n      };\n      Vec22.lengthOf = function(v3) {\n        return math_sqrt$5(v3.x * v3.x + v3.y * v3.y);\n      };\n      Vec22.lengthSquared = function(v3) {\n        return v3.x * v3.x + v3.y * v3.y;\n      };\n      Vec22.distance = function(v3, w) {\n        var dx = v3.x - w.x;\n        var dy = v3.y - w.y;\n        return math_sqrt$5(dx * dx + dy * dy);\n      };\n      Vec22.distanceSquared = function(v3, w) {\n        var dx = v3.x - w.x;\n        var dy = v3.y - w.y;\n        return dx * dx + dy * dy;\n      };\n      Vec22.areEqual = function(v3, w) {\n        return v3 === w || typeof w === \"object\" && w !== null && v3.x === w.x && v3.y === w.y;\n      };\n      Vec22.skew = function(v3) {\n        return Vec22.neo(-v3.y, v3.x);\n      };\n      Vec22.dot = function(v3, w) {\n        return v3.x * w.x + v3.y * w.y;\n      };\n      Vec22.cross = function(v3, w) {\n        if (typeof w === \"number\") {\n          return Vec22.neo(w * v3.y, -w * v3.x);\n        } else if (typeof v3 === \"number\") {\n          return Vec22.neo(-v3 * w.y, v3 * w.x);\n        } else {\n          return v3.x * w.y - v3.y * w.x;\n        }\n      };\n      Vec22.crossVec2Vec2 = function(v3, w) {\n        return v3.x * w.y - v3.y * w.x;\n      };\n      Vec22.crossVec2Num = function(v3, w) {\n        return Vec22.neo(w * v3.y, -w * v3.x);\n      };\n      Vec22.crossNumVec2 = function(v3, w) {\n        return Vec22.neo(-v3 * w.y, v3 * w.x);\n      };\n      Vec22.addCross = function(a2, v3, w) {\n        if (typeof w === \"number\") {\n          return Vec22.neo(w * v3.y + a2.x, -w * v3.x + a2.y);\n        } else if (typeof v3 === \"number\") {\n          return Vec22.neo(-v3 * w.y + a2.x, v3 * w.x + a2.y);\n        }\n      };\n      Vec22.addCrossVec2Num = function(a2, v3, w) {\n        return Vec22.neo(w * v3.y + a2.x, -w * v3.x + a2.y);\n      };\n      Vec22.addCrossNumVec2 = function(a2, v3, w) {\n        return Vec22.neo(-v3 * w.y + a2.x, v3 * w.x + a2.y);\n      };\n      Vec22.add = function(v3, w) {\n        return Vec22.neo(v3.x + w.x, v3.y + w.y);\n      };\n      Vec22.wAdd = function(a2, v3, b2, w) {\n        if (typeof b2 !== \"undefined\" || typeof w !== \"undefined\") {\n          return Vec22.combine(a2, v3, b2, w);\n        } else {\n          return Vec22.mulNumVec2(a2, v3);\n        }\n      };\n      Vec22.combine = function(a2, v3, b2, w) {\n        return Vec22.zero().setCombine(a2, v3, b2, w);\n      };\n      Vec22.sub = function(v3, w) {\n        return Vec22.neo(v3.x - w.x, v3.y - w.y);\n      };\n      Vec22.mul = function(a2, b2) {\n        if (typeof a2 === \"object\") {\n          return Vec22.neo(a2.x * b2, a2.y * b2);\n        } else if (typeof b2 === \"object\") {\n          return Vec22.neo(a2 * b2.x, a2 * b2.y);\n        }\n      };\n      Vec22.mulVec2Num = function(a2, b2) {\n        return Vec22.neo(a2.x * b2, a2.y * b2);\n      };\n      Vec22.mulNumVec2 = function(a2, b2) {\n        return Vec22.neo(a2 * b2.x, a2 * b2.y);\n      };\n      Vec22.prototype.neg = function() {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n      };\n      Vec22.neg = function(v3) {\n        return Vec22.neo(-v3.x, -v3.y);\n      };\n      Vec22.abs = function(v3) {\n        return Vec22.neo(math_abs$9(v3.x), math_abs$9(v3.y));\n      };\n      Vec22.mid = function(v3, w) {\n        return Vec22.neo((v3.x + w.x) * 0.5, (v3.y + w.y) * 0.5);\n      };\n      Vec22.upper = function(v3, w) {\n        return Vec22.neo(math_max$8(v3.x, w.x), math_max$8(v3.y, w.y));\n      };\n      Vec22.lower = function(v3, w) {\n        return Vec22.neo(math_min$8(v3.x, w.x), math_min$8(v3.y, w.y));\n      };\n      Vec22.prototype.clamp = function(max) {\n        var lengthSqr = this.x * this.x + this.y * this.y;\n        if (lengthSqr > max * max) {\n          var scale = max / math_sqrt$5(lengthSqr);\n          this.x *= scale;\n          this.y *= scale;\n        }\n        return this;\n      };\n      Vec22.clamp = function(v3, max) {\n        var r = Vec22.neo(v3.x, v3.y);\n        r.clamp(max);\n        return r;\n      };\n      Vec22.clampVec2 = function(v3, min, max) {\n        return {\n          x: clamp(v3.x, min === null || min === void 0 ? void 0 : min.x, max === null || max === void 0 ? void 0 : max.x),\n          y: clamp(v3.y, min === null || min === void 0 ? void 0 : min.y, max === null || max === void 0 ? void 0 : max.y)\n        };\n      };\n      Vec22.scaleFn = function(x2, y) {\n        return function(v3) {\n          return Vec22.neo(v3.x * x2, v3.y * y);\n        };\n      };\n      Vec22.translateFn = function(x2, y) {\n        return function(v3) {\n          return Vec22.neo(v3.x + x2, v3.y + y);\n        };\n      };\n      return Vec22;\n    }()\n  );\n  var math_max$7 = Math.max;\n  var math_min$7 = Math.min;\n  var AABB = (\n    /** @class */\n    function() {\n      function AABB2(lower, upper) {\n        if (!(this instanceof AABB2)) {\n          return new AABB2(lower, upper);\n        }\n        this.lowerBound = Vec2.zero();\n        this.upperBound = Vec2.zero();\n        if (typeof lower === \"object\") {\n          this.lowerBound.setVec2(lower);\n        }\n        if (typeof upper === \"object\") {\n          this.upperBound.setVec2(upper);\n        } else if (typeof lower === \"object\") {\n          this.upperBound.setVec2(lower);\n        }\n      }\n      AABB2.prototype.isValid = function() {\n        return AABB2.isValid(this);\n      };\n      AABB2.isValid = function(obj) {\n        if (obj === null || typeof obj === \"undefined\") {\n          return false;\n        }\n        return Vec2.isValid(obj.lowerBound) && Vec2.isValid(obj.upperBound) && Vec2.sub(obj.upperBound, obj.lowerBound).lengthSquared() >= 0;\n      };\n      AABB2.assert = function(o) {\n      };\n      AABB2.prototype.getCenter = function() {\n        return Vec2.neo((this.lowerBound.x + this.upperBound.x) * 0.5, (this.lowerBound.y + this.upperBound.y) * 0.5);\n      };\n      AABB2.prototype.getExtents = function() {\n        return Vec2.neo((this.upperBound.x - this.lowerBound.x) * 0.5, (this.upperBound.y - this.lowerBound.y) * 0.5);\n      };\n      AABB2.prototype.getPerimeter = function() {\n        return 2 * (this.upperBound.x - this.lowerBound.x + this.upperBound.y - this.lowerBound.y);\n      };\n      AABB2.prototype.combine = function(a2, b2) {\n        b2 = b2 || this;\n        var lowerA = a2.lowerBound;\n        var upperA = a2.upperBound;\n        var lowerB = b2.lowerBound;\n        var upperB = b2.upperBound;\n        var lowerX = math_min$7(lowerA.x, lowerB.x);\n        var lowerY = math_min$7(lowerA.y, lowerB.y);\n        var upperX = math_max$7(upperB.x, upperA.x);\n        var upperY = math_max$7(upperB.y, upperA.y);\n        this.lowerBound.setNum(lowerX, lowerY);\n        this.upperBound.setNum(upperX, upperY);\n      };\n      AABB2.prototype.combinePoints = function(a2, b2) {\n        this.lowerBound.setNum(math_min$7(a2.x, b2.x), math_min$7(a2.y, b2.y));\n        this.upperBound.setNum(math_max$7(a2.x, b2.x), math_max$7(a2.y, b2.y));\n      };\n      AABB2.prototype.set = function(aabb) {\n        this.lowerBound.setNum(aabb.lowerBound.x, aabb.lowerBound.y);\n        this.upperBound.setNum(aabb.upperBound.x, aabb.upperBound.y);\n      };\n      AABB2.prototype.contains = function(aabb) {\n        var result = true;\n        result = result && this.lowerBound.x <= aabb.lowerBound.x;\n        result = result && this.lowerBound.y <= aabb.lowerBound.y;\n        result = result && aabb.upperBound.x <= this.upperBound.x;\n        result = result && aabb.upperBound.y <= this.upperBound.y;\n        return result;\n      };\n      AABB2.prototype.extend = function(value) {\n        AABB2.extend(this, value);\n        return this;\n      };\n      AABB2.extend = function(out, value) {\n        out.lowerBound.x -= value;\n        out.lowerBound.y -= value;\n        out.upperBound.x += value;\n        out.upperBound.y += value;\n        return out;\n      };\n      AABB2.testOverlap = function(a2, b2) {\n        var d1x = b2.lowerBound.x - a2.upperBound.x;\n        var d2x = a2.lowerBound.x - b2.upperBound.x;\n        var d1y = b2.lowerBound.y - a2.upperBound.y;\n        var d2y = a2.lowerBound.y - b2.upperBound.y;\n        if (d1x > 0 || d1y > 0 || d2x > 0 || d2y > 0) {\n          return false;\n        }\n        return true;\n      };\n      AABB2.areEqual = function(a2, b2) {\n        return Vec2.areEqual(a2.lowerBound, b2.lowerBound) && Vec2.areEqual(a2.upperBound, b2.upperBound);\n      };\n      AABB2.diff = function(a2, b2) {\n        var wD = math_max$7(0, math_min$7(a2.upperBound.x, b2.upperBound.x) - math_max$7(b2.lowerBound.x, a2.lowerBound.x));\n        var hD = math_max$7(0, math_min$7(a2.upperBound.y, b2.upperBound.y) - math_max$7(b2.lowerBound.y, a2.lowerBound.y));\n        var wA = a2.upperBound.x - a2.lowerBound.x;\n        var hA = a2.upperBound.y - a2.lowerBound.y;\n        var wB = b2.upperBound.x - b2.lowerBound.x;\n        var hB = b2.upperBound.y - b2.lowerBound.y;\n        return wA * hA + wB * hB - wD * hD;\n      };\n      AABB2.prototype.rayCast = function(output2, input2) {\n        var tmin = -Infinity;\n        var tmax = Infinity;\n        var p = input2.p1;\n        var d2 = Vec2.sub(input2.p2, input2.p1);\n        var absD = Vec2.abs(d2);\n        var normal3 = Vec2.zero();\n        {\n          if (absD.x < EPSILON) {\n            if (p.x < this.lowerBound.x || this.upperBound.x < p.x) {\n              return false;\n            }\n          } else {\n            var inv_d = 1 / d2.x;\n            var t1 = (this.lowerBound.x - p.x) * inv_d;\n            var t2 = (this.upperBound.x - p.x) * inv_d;\n            var s2 = -1;\n            if (t1 > t2) {\n              var temp3 = t1;\n              t1 = t2;\n              t2 = temp3;\n              s2 = 1;\n            }\n            if (t1 > tmin) {\n              normal3.setZero();\n              normal3.x = s2;\n              tmin = t1;\n            }\n            tmax = math_min$7(tmax, t2);\n            if (tmin > tmax) {\n              return false;\n            }\n          }\n        }\n        {\n          if (absD.y < EPSILON) {\n            if (p.y < this.lowerBound.y || this.upperBound.y < p.y) {\n              return false;\n            }\n          } else {\n            var inv_d = 1 / d2.y;\n            var t1 = (this.lowerBound.y - p.y) * inv_d;\n            var t2 = (this.upperBound.y - p.y) * inv_d;\n            var s2 = -1;\n            if (t1 > t2) {\n              var temp3 = t1;\n              t1 = t2;\n              t2 = temp3;\n              s2 = 1;\n            }\n            if (t1 > tmin) {\n              normal3.setZero();\n              normal3.y = s2;\n              tmin = t1;\n            }\n            tmax = math_min$7(tmax, t2);\n            if (tmin > tmax) {\n              return false;\n            }\n          }\n        }\n        if (tmin < 0 || input2.maxFraction < tmin) {\n          return false;\n        }\n        output2.fraction = tmin;\n        output2.normal = normal3;\n        return true;\n      };\n      AABB2.prototype.toString = function() {\n        return JSON.stringify(this);\n      };\n      AABB2.combinePoints = function(out, a2, b2) {\n        out.lowerBound.x = math_min$7(a2.x, b2.x);\n        out.lowerBound.y = math_min$7(a2.y, b2.y);\n        out.upperBound.x = math_max$7(a2.x, b2.x);\n        out.upperBound.y = math_max$7(a2.y, b2.y);\n        return out;\n      };\n      AABB2.combinedPerimeter = function(a2, b2) {\n        var lx = math_min$7(a2.lowerBound.x, b2.lowerBound.x);\n        var ly = math_min$7(a2.lowerBound.y, b2.lowerBound.y);\n        var ux = math_max$7(a2.upperBound.x, b2.upperBound.x);\n        var uy = math_max$7(a2.upperBound.y, b2.upperBound.y);\n        return 2 * (ux - lx + uy - ly);\n      };\n      return AABB2;\n    }()\n  );\n  var math_PI$6 = Math.PI;\n  var Settings = (\n    /** @class */\n    function() {\n      function Settings2() {\n      }\n      Object.defineProperty(Settings2, \"polygonRadius\", {\n        /**\n         * The radius of the polygon/edge shape skin. This should not be modified.\n         * Making this smaller means polygons will have an insufficient buffer for\n         * continuous collision. Making it larger may create artifacts for vertex\n         * collision.\n         */\n        get: function() {\n          return 2 * Settings2.linearSlop;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Settings2.lengthUnitsPerMeter = 1;\n      Settings2.maxManifoldPoints = 2;\n      Settings2.maxPolygonVertices = 12;\n      Settings2.aabbExtension = 0.1;\n      Settings2.aabbMultiplier = 2;\n      Settings2.linearSlop = 5e-3;\n      Settings2.angularSlop = 2 / 180 * math_PI$6;\n      Settings2.maxSubSteps = 8;\n      Settings2.maxTOIContacts = 32;\n      Settings2.maxTOIIterations = 20;\n      Settings2.maxDistanceIterations = 20;\n      Settings2.velocityThreshold = 1;\n      Settings2.maxLinearCorrection = 0.2;\n      Settings2.maxAngularCorrection = 8 / 180 * math_PI$6;\n      Settings2.maxTranslation = 2;\n      Settings2.maxRotation = 0.5 * math_PI$6;\n      Settings2.baumgarte = 0.2;\n      Settings2.toiBaugarte = 0.75;\n      Settings2.timeToSleep = 0.5;\n      Settings2.linearSleepTolerance = 0.01;\n      Settings2.angularSleepTolerance = 2 / 180 * math_PI$6;\n      return Settings2;\n    }()\n  );\n  var SettingsInternal = (\n    /** @class */\n    function() {\n      function SettingsInternal2() {\n      }\n      Object.defineProperty(SettingsInternal2, \"maxManifoldPoints\", {\n        get: function() {\n          return Settings.maxManifoldPoints;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxPolygonVertices\", {\n        get: function() {\n          return Settings.maxPolygonVertices;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"aabbExtension\", {\n        get: function() {\n          return Settings.aabbExtension * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"aabbMultiplier\", {\n        get: function() {\n          return Settings.aabbMultiplier;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"linearSlop\", {\n        get: function() {\n          return Settings.linearSlop * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"linearSlopSquared\", {\n        get: function() {\n          return Settings.linearSlop * Settings.lengthUnitsPerMeter * Settings.linearSlop * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"angularSlop\", {\n        get: function() {\n          return Settings.angularSlop;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"polygonRadius\", {\n        get: function() {\n          return 2 * Settings.linearSlop;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxSubSteps\", {\n        get: function() {\n          return Settings.maxSubSteps;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxTOIContacts\", {\n        get: function() {\n          return Settings.maxTOIContacts;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxTOIIterations\", {\n        get: function() {\n          return Settings.maxTOIIterations;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxDistanceIterations\", {\n        get: function() {\n          return Settings.maxDistanceIterations;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"velocityThreshold\", {\n        get: function() {\n          return Settings.velocityThreshold * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxLinearCorrection\", {\n        get: function() {\n          return Settings.maxLinearCorrection * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxAngularCorrection\", {\n        get: function() {\n          return Settings.maxAngularCorrection;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxTranslation\", {\n        get: function() {\n          return Settings.maxTranslation * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxTranslationSquared\", {\n        get: function() {\n          return Settings.maxTranslation * Settings.lengthUnitsPerMeter * Settings.maxTranslation * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxRotation\", {\n        get: function() {\n          return Settings.maxRotation;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"maxRotationSquared\", {\n        get: function() {\n          return Settings.maxRotation * Settings.maxRotation;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"baumgarte\", {\n        get: function() {\n          return Settings.baumgarte;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"toiBaugarte\", {\n        get: function() {\n          return Settings.toiBaugarte;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"timeToSleep\", {\n        get: function() {\n          return Settings.timeToSleep;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"linearSleepTolerance\", {\n        get: function() {\n          return Settings.linearSleepTolerance * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"linearSleepToleranceSqr\", {\n        get: function() {\n          return Settings.linearSleepTolerance * Settings.lengthUnitsPerMeter * Settings.linearSleepTolerance * Settings.lengthUnitsPerMeter;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"angularSleepTolerance\", {\n        get: function() {\n          return Settings.angularSleepTolerance;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(SettingsInternal2, \"angularSleepToleranceSqr\", {\n        get: function() {\n          return Settings.angularSleepTolerance * Settings.angularSleepTolerance;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      return SettingsInternal2;\n    }()\n  );\n  var Pool = (\n    /** @class */\n    function() {\n      function Pool2(opts) {\n        this._list = [];\n        this._max = Infinity;\n        this._hasCreateFn = false;\n        this._createCount = 0;\n        this._hasAllocateFn = false;\n        this._allocateCount = 0;\n        this._hasReleaseFn = false;\n        this._releaseCount = 0;\n        this._hasDisposeFn = false;\n        this._disposeCount = 0;\n        this._list = [];\n        this._max = opts.max || this._max;\n        this._createFn = opts.create;\n        this._hasCreateFn = typeof this._createFn === \"function\";\n        this._allocateFn = opts.allocate;\n        this._hasAllocateFn = typeof this._allocateFn === \"function\";\n        this._releaseFn = opts.release;\n        this._hasReleaseFn = typeof this._releaseFn === \"function\";\n        this._disposeFn = opts.dispose;\n        this._hasDisposeFn = typeof this._disposeFn === \"function\";\n      }\n      Pool2.prototype.max = function(n2) {\n        if (typeof n2 === \"number\") {\n          this._max = n2;\n          return this;\n        }\n        return this._max;\n      };\n      Pool2.prototype.size = function() {\n        return this._list.length;\n      };\n      Pool2.prototype.allocate = function() {\n        var item;\n        if (this._list.length > 0) {\n          item = this._list.shift();\n        } else {\n          this._createCount++;\n          if (this._hasCreateFn) {\n            item = this._createFn();\n          } else {\n            item = {};\n          }\n        }\n        this._allocateCount++;\n        if (this._hasAllocateFn) {\n          this._allocateFn(item);\n        }\n        return item;\n      };\n      Pool2.prototype.release = function(item) {\n        if (this._list.length < this._max) {\n          this._releaseCount++;\n          if (this._hasReleaseFn) {\n            this._releaseFn(item);\n          }\n          this._list.push(item);\n        } else {\n          this._disposeCount++;\n          if (this._hasDisposeFn) {\n            item = this._disposeFn(item);\n          }\n        }\n      };\n      Pool2.prototype.toString = function() {\n        return \" +\" + this._createCount + \" >\" + this._allocateCount + \" <\" + this._releaseCount + \" -\" + this._disposeCount + \" =\" + this._list.length + \"/\" + this._max;\n      };\n      return Pool2;\n    }()\n  );\n  var math_abs$8 = Math.abs;\n  var math_max$6 = Math.max;\n  var TreeNode = (\n    /** @class */\n    function() {\n      function TreeNode2(id) {\n        this.aabb = new AABB();\n        this.userData = null;\n        this.parent = null;\n        this.child1 = null;\n        this.child2 = null;\n        this.height = -1;\n        this.id = id;\n      }\n      TreeNode2.prototype.toString = function() {\n        return this.id + \": \" + this.userData;\n      };\n      TreeNode2.prototype.isLeaf = function() {\n        return this.child1 == null;\n      };\n      return TreeNode2;\n    }()\n  );\n  var poolTreeNode = new Pool({\n    create: function() {\n      return new TreeNode();\n    },\n    release: function(node) {\n      node.userData = null;\n      node.parent = null;\n      node.child1 = null;\n      node.child2 = null;\n      node.height = -1;\n      node.id = void 0;\n    }\n  });\n  var DynamicTree = (\n    /** @class */\n    function() {\n      function DynamicTree2() {\n        this.inputPool = new Pool({\n          create: function() {\n            return {};\n          },\n          release: function(stack) {\n          }\n        });\n        this.stackPool = new Pool({\n          create: function() {\n            return [];\n          },\n          release: function(stack) {\n            stack.length = 0;\n          }\n        });\n        this.iteratorPool = new Pool({\n          create: function() {\n            return new Iterator();\n          },\n          release: function(iterator) {\n            iterator.close();\n          }\n        });\n        this.m_root = null;\n        this.m_nodes = {};\n        this.m_lastProxyId = 0;\n      }\n      DynamicTree2.prototype.getUserData = function(id) {\n        var node = this.m_nodes[id];\n        return node.userData;\n      };\n      DynamicTree2.prototype.getFatAABB = function(id) {\n        var node = this.m_nodes[id];\n        return node.aabb;\n      };\n      DynamicTree2.prototype.allocateNode = function() {\n        var node = poolTreeNode.allocate();\n        node.id = ++this.m_lastProxyId;\n        this.m_nodes[node.id] = node;\n        return node;\n      };\n      DynamicTree2.prototype.freeNode = function(node) {\n        delete this.m_nodes[node.id];\n        poolTreeNode.release(node);\n      };\n      DynamicTree2.prototype.createProxy = function(aabb, userData) {\n        var node = this.allocateNode();\n        node.aabb.set(aabb);\n        AABB.extend(node.aabb, SettingsInternal.aabbExtension);\n        node.userData = userData;\n        node.height = 0;\n        this.insertLeaf(node);\n        return node.id;\n      };\n      DynamicTree2.prototype.destroyProxy = function(id) {\n        var node = this.m_nodes[id];\n        this.removeLeaf(node);\n        this.freeNode(node);\n      };\n      DynamicTree2.prototype.moveProxy = function(id, aabb, d2) {\n        var node = this.m_nodes[id];\n        if (node.aabb.contains(aabb)) {\n          return false;\n        }\n        this.removeLeaf(node);\n        node.aabb.set(aabb);\n        aabb = node.aabb;\n        AABB.extend(aabb, SettingsInternal.aabbExtension);\n        if (d2.x < 0) {\n          aabb.lowerBound.x += d2.x * SettingsInternal.aabbMultiplier;\n        } else {\n          aabb.upperBound.x += d2.x * SettingsInternal.aabbMultiplier;\n        }\n        if (d2.y < 0) {\n          aabb.lowerBound.y += d2.y * SettingsInternal.aabbMultiplier;\n        } else {\n          aabb.upperBound.y += d2.y * SettingsInternal.aabbMultiplier;\n        }\n        this.insertLeaf(node);\n        return true;\n      };\n      DynamicTree2.prototype.insertLeaf = function(leaf) {\n        if (this.m_root == null) {\n          this.m_root = leaf;\n          this.m_root.parent = null;\n          return;\n        }\n        var leafAABB = leaf.aabb;\n        var index = this.m_root;\n        while (!index.isLeaf()) {\n          var child1 = index.child1;\n          var child2 = index.child2;\n          var area = index.aabb.getPerimeter();\n          var combinedArea = AABB.combinedPerimeter(index.aabb, leafAABB);\n          var cost = 2 * combinedArea;\n          var inheritanceCost = 2 * (combinedArea - area);\n          var newArea1 = AABB.combinedPerimeter(leafAABB, child1.aabb);\n          var cost1 = newArea1 + inheritanceCost;\n          if (!child1.isLeaf()) {\n            var oldArea = child1.aabb.getPerimeter();\n            cost1 -= oldArea;\n          }\n          var newArea2 = AABB.combinedPerimeter(leafAABB, child2.aabb);\n          var cost2 = newArea2 + inheritanceCost;\n          if (!child2.isLeaf()) {\n            var oldArea = child2.aabb.getPerimeter();\n            cost2 -= oldArea;\n          }\n          if (cost < cost1 && cost < cost2) {\n            break;\n          }\n          if (cost1 < cost2) {\n            index = child1;\n          } else {\n            index = child2;\n          }\n        }\n        var sibling = index;\n        var oldParent = sibling.parent;\n        var newParent = this.allocateNode();\n        newParent.parent = oldParent;\n        newParent.userData = null;\n        newParent.aabb.combine(leafAABB, sibling.aabb);\n        newParent.height = sibling.height + 1;\n        if (oldParent != null) {\n          if (oldParent.child1 === sibling) {\n            oldParent.child1 = newParent;\n          } else {\n            oldParent.child2 = newParent;\n          }\n          newParent.child1 = sibling;\n          newParent.child2 = leaf;\n          sibling.parent = newParent;\n          leaf.parent = newParent;\n        } else {\n          newParent.child1 = sibling;\n          newParent.child2 = leaf;\n          sibling.parent = newParent;\n          leaf.parent = newParent;\n          this.m_root = newParent;\n        }\n        index = leaf.parent;\n        while (index != null) {\n          index = this.balance(index);\n          var child1 = index.child1;\n          var child2 = index.child2;\n          index.height = 1 + math_max$6(child1.height, child2.height);\n          index.aabb.combine(child1.aabb, child2.aabb);\n          index = index.parent;\n        }\n      };\n      DynamicTree2.prototype.removeLeaf = function(leaf) {\n        if (leaf === this.m_root) {\n          this.m_root = null;\n          return;\n        }\n        var parent = leaf.parent;\n        var grandParent = parent.parent;\n        var sibling;\n        if (parent.child1 === leaf) {\n          sibling = parent.child2;\n        } else {\n          sibling = parent.child1;\n        }\n        if (grandParent != null) {\n          if (grandParent.child1 === parent) {\n            grandParent.child1 = sibling;\n          } else {\n            grandParent.child2 = sibling;\n          }\n          sibling.parent = grandParent;\n          this.freeNode(parent);\n          var index = grandParent;\n          while (index != null) {\n            index = this.balance(index);\n            var child1 = index.child1;\n            var child2 = index.child2;\n            index.aabb.combine(child1.aabb, child2.aabb);\n            index.height = 1 + math_max$6(child1.height, child2.height);\n            index = index.parent;\n          }\n        } else {\n          this.m_root = sibling;\n          sibling.parent = null;\n          this.freeNode(parent);\n        }\n      };\n      DynamicTree2.prototype.balance = function(iA) {\n        var A = iA;\n        if (A.isLeaf() || A.height < 2) {\n          return iA;\n        }\n        var B = A.child1;\n        var C = A.child2;\n        var balance = C.height - B.height;\n        if (balance > 1) {\n          var F = C.child1;\n          var G = C.child2;\n          C.child1 = A;\n          C.parent = A.parent;\n          A.parent = C;\n          if (C.parent != null) {\n            if (C.parent.child1 === iA) {\n              C.parent.child1 = C;\n            } else {\n              C.parent.child2 = C;\n            }\n          } else {\n            this.m_root = C;\n          }\n          if (F.height > G.height) {\n            C.child2 = F;\n            A.child2 = G;\n            G.parent = A;\n            A.aabb.combine(B.aabb, G.aabb);\n            C.aabb.combine(A.aabb, F.aabb);\n            A.height = 1 + math_max$6(B.height, G.height);\n            C.height = 1 + math_max$6(A.height, F.height);\n          } else {\n            C.child2 = G;\n            A.child2 = F;\n            F.parent = A;\n            A.aabb.combine(B.aabb, F.aabb);\n            C.aabb.combine(A.aabb, G.aabb);\n            A.height = 1 + math_max$6(B.height, F.height);\n            C.height = 1 + math_max$6(A.height, G.height);\n          }\n          return C;\n        }\n        if (balance < -1) {\n          var D = B.child1;\n          var E = B.child2;\n          B.child1 = A;\n          B.parent = A.parent;\n          A.parent = B;\n          if (B.parent != null) {\n            if (B.parent.child1 === A) {\n              B.parent.child1 = B;\n            } else {\n              B.parent.child2 = B;\n            }\n          } else {\n            this.m_root = B;\n          }\n          if (D.height > E.height) {\n            B.child2 = D;\n            A.child1 = E;\n            E.parent = A;\n            A.aabb.combine(C.aabb, E.aabb);\n            B.aabb.combine(A.aabb, D.aabb);\n            A.height = 1 + math_max$6(C.height, E.height);\n            B.height = 1 + math_max$6(A.height, D.height);\n          } else {\n            B.child2 = E;\n            A.child1 = D;\n            D.parent = A;\n            A.aabb.combine(C.aabb, D.aabb);\n            B.aabb.combine(A.aabb, E.aabb);\n            A.height = 1 + math_max$6(C.height, D.height);\n            B.height = 1 + math_max$6(A.height, E.height);\n          }\n          return B;\n        }\n        return A;\n      };\n      DynamicTree2.prototype.getHeight = function() {\n        if (this.m_root == null) {\n          return 0;\n        }\n        return this.m_root.height;\n      };\n      DynamicTree2.prototype.getAreaRatio = function() {\n        if (this.m_root == null) {\n          return 0;\n        }\n        var root = this.m_root;\n        var rootArea = root.aabb.getPerimeter();\n        var totalArea = 0;\n        var node;\n        var it = this.iteratorPool.allocate().preorder(this.m_root);\n        while (node = it.next()) {\n          if (node.height < 0) {\n            continue;\n          }\n          totalArea += node.aabb.getPerimeter();\n        }\n        this.iteratorPool.release(it);\n        return totalArea / rootArea;\n      };\n      DynamicTree2.prototype.computeHeight = function(id) {\n        var node;\n        if (typeof id !== \"undefined\") {\n          node = this.m_nodes[id];\n        } else {\n          node = this.m_root;\n        }\n        if (node.isLeaf()) {\n          return 0;\n        }\n        var height1 = this.computeHeight(node.child1.id);\n        var height2 = this.computeHeight(node.child2.id);\n        return 1 + math_max$6(height1, height2);\n      };\n      DynamicTree2.prototype.validateStructure = function(node) {\n        if (node == null) {\n          return;\n        }\n        if (node === this.m_root) ;\n        var child1 = node.child1;\n        var child2 = node.child2;\n        if (node.isLeaf()) {\n          return;\n        }\n        this.validateStructure(child1);\n        this.validateStructure(child2);\n      };\n      DynamicTree2.prototype.validateMetrics = function(node) {\n        if (node == null) {\n          return;\n        }\n        var child1 = node.child1;\n        var child2 = node.child2;\n        if (node.isLeaf()) {\n          return;\n        }\n        this.validateMetrics(child1);\n        this.validateMetrics(child2);\n      };\n      DynamicTree2.prototype.validate = function() {\n        return;\n      };\n      DynamicTree2.prototype.getMaxBalance = function() {\n        var maxBalance = 0;\n        var node;\n        var it = this.iteratorPool.allocate().preorder(this.m_root);\n        while (node = it.next()) {\n          if (node.height <= 1) {\n            continue;\n          }\n          var balance = math_abs$8(node.child2.height - node.child1.height);\n          maxBalance = math_max$6(maxBalance, balance);\n        }\n        this.iteratorPool.release(it);\n        return maxBalance;\n      };\n      DynamicTree2.prototype.rebuildBottomUp = function() {\n        var nodes = [];\n        var count = 0;\n        var node;\n        var it = this.iteratorPool.allocate().preorder(this.m_root);\n        while (node = it.next()) {\n          if (node.height < 0) {\n            continue;\n          }\n          if (node.isLeaf()) {\n            node.parent = null;\n            nodes[count] = node;\n            ++count;\n          } else {\n            this.freeNode(node);\n          }\n        }\n        this.iteratorPool.release(it);\n        while (count > 1) {\n          var minCost = Infinity;\n          var iMin = -1;\n          var jMin = -1;\n          for (var i = 0; i < count; ++i) {\n            var aabbi = nodes[i].aabb;\n            for (var j = i + 1; j < count; ++j) {\n              var aabbj = nodes[j].aabb;\n              var cost = AABB.combinedPerimeter(aabbi, aabbj);\n              if (cost < minCost) {\n                iMin = i;\n                jMin = j;\n                minCost = cost;\n              }\n            }\n          }\n          var child1 = nodes[iMin];\n          var child2 = nodes[jMin];\n          var parent_1 = this.allocateNode();\n          parent_1.child1 = child1;\n          parent_1.child2 = child2;\n          parent_1.height = 1 + math_max$6(child1.height, child2.height);\n          parent_1.aabb.combine(child1.aabb, child2.aabb);\n          parent_1.parent = null;\n          child1.parent = parent_1;\n          child2.parent = parent_1;\n          nodes[jMin] = nodes[count - 1];\n          nodes[iMin] = parent_1;\n          --count;\n        }\n        this.m_root = nodes[0];\n      };\n      DynamicTree2.prototype.shiftOrigin = function(newOrigin) {\n        var node;\n        var it = this.iteratorPool.allocate().preorder(this.m_root);\n        while (node = it.next()) {\n          var aabb = node.aabb;\n          aabb.lowerBound.x -= newOrigin.x;\n          aabb.lowerBound.y -= newOrigin.y;\n          aabb.upperBound.x -= newOrigin.x;\n          aabb.upperBound.y -= newOrigin.y;\n        }\n        this.iteratorPool.release(it);\n      };\n      DynamicTree2.prototype.query = function(aabb, queryCallback) {\n        var stack = this.stackPool.allocate();\n        stack.push(this.m_root);\n        while (stack.length > 0) {\n          var node = stack.pop();\n          if (node == null) {\n            continue;\n          }\n          if (AABB.testOverlap(node.aabb, aabb)) {\n            if (node.isLeaf()) {\n              var proceed = queryCallback(node.id);\n              if (proceed === false) {\n                return;\n              }\n            } else {\n              stack.push(node.child1);\n              stack.push(node.child2);\n            }\n          }\n        }\n        this.stackPool.release(stack);\n      };\n      DynamicTree2.prototype.rayCast = function(input2, rayCastCallback) {\n        var p1 = input2.p1;\n        var p2 = input2.p2;\n        var r = Vec2.sub(p2, p1);\n        r.normalize();\n        var v3 = Vec2.crossNumVec2(1, r);\n        var abs_v = Vec2.abs(v3);\n        var maxFraction = input2.maxFraction;\n        var segmentAABB = new AABB();\n        var t = Vec2.combine(1 - maxFraction, p1, maxFraction, p2);\n        segmentAABB.combinePoints(p1, t);\n        var stack = this.stackPool.allocate();\n        var subInput = this.inputPool.allocate();\n        stack.push(this.m_root);\n        while (stack.length > 0) {\n          var node = stack.pop();\n          if (node == null) {\n            continue;\n          }\n          if (AABB.testOverlap(node.aabb, segmentAABB) === false) {\n            continue;\n          }\n          var c2 = node.aabb.getCenter();\n          var h = node.aabb.getExtents();\n          var separation = math_abs$8(Vec2.dot(v3, Vec2.sub(p1, c2))) - Vec2.dot(abs_v, h);\n          if (separation > 0) {\n            continue;\n          }\n          if (node.isLeaf()) {\n            subInput.p1 = Vec2.clone(input2.p1);\n            subInput.p2 = Vec2.clone(input2.p2);\n            subInput.maxFraction = maxFraction;\n            var value = rayCastCallback(subInput, node.id);\n            if (value === 0) {\n              break;\n            } else if (value > 0) {\n              maxFraction = value;\n              t = Vec2.combine(1 - maxFraction, p1, maxFraction, p2);\n              segmentAABB.combinePoints(p1, t);\n            }\n          } else {\n            stack.push(node.child1);\n            stack.push(node.child2);\n          }\n        }\n        this.stackPool.release(stack);\n        this.inputPool.release(subInput);\n      };\n      return DynamicTree2;\n    }()\n  );\n  var Iterator = (\n    /** @class */\n    function() {\n      function Iterator2() {\n        this.parents = [];\n        this.states = [];\n      }\n      Iterator2.prototype.preorder = function(root) {\n        this.parents.length = 0;\n        this.parents.push(root);\n        this.states.length = 0;\n        this.states.push(0);\n        return this;\n      };\n      Iterator2.prototype.next = function() {\n        while (this.parents.length > 0) {\n          var i = this.parents.length - 1;\n          var node = this.parents[i];\n          if (this.states[i] === 0) {\n            this.states[i] = 1;\n            return node;\n          }\n          if (this.states[i] === 1) {\n            this.states[i] = 2;\n            if (node.child1) {\n              this.parents.push(node.child1);\n              this.states.push(1);\n              return node.child1;\n            }\n          }\n          if (this.states[i] === 2) {\n            this.states[i] = 3;\n            if (node.child2) {\n              this.parents.push(node.child2);\n              this.states.push(1);\n              return node.child2;\n            }\n          }\n          this.parents.pop();\n          this.states.pop();\n        }\n      };\n      Iterator2.prototype.close = function() {\n        this.parents.length = 0;\n      };\n      return Iterator2;\n    }()\n  );\n  var math_max$5 = Math.max;\n  var math_min$6 = Math.min;\n  var BroadPhase = (\n    /** @class */\n    function() {\n      function BroadPhase2() {\n        var _this = this;\n        this.m_tree = new DynamicTree();\n        this.m_moveBuffer = [];\n        this.query = function(aabb, queryCallback) {\n          _this.m_tree.query(aabb, queryCallback);\n        };\n        this.queryCallback = function(proxyId) {\n          if (proxyId === _this.m_queryProxyId) {\n            return true;\n          }\n          var proxyIdA = math_min$6(proxyId, _this.m_queryProxyId);\n          var proxyIdB = math_max$5(proxyId, _this.m_queryProxyId);\n          var userDataA = _this.m_tree.getUserData(proxyIdA);\n          var userDataB = _this.m_tree.getUserData(proxyIdB);\n          _this.m_callback(userDataA, userDataB);\n          return true;\n        };\n      }\n      BroadPhase2.prototype.getUserData = function(proxyId) {\n        return this.m_tree.getUserData(proxyId);\n      };\n      BroadPhase2.prototype.testOverlap = function(proxyIdA, proxyIdB) {\n        var aabbA = this.m_tree.getFatAABB(proxyIdA);\n        var aabbB = this.m_tree.getFatAABB(proxyIdB);\n        return AABB.testOverlap(aabbA, aabbB);\n      };\n      BroadPhase2.prototype.getFatAABB = function(proxyId) {\n        return this.m_tree.getFatAABB(proxyId);\n      };\n      BroadPhase2.prototype.getProxyCount = function() {\n        return this.m_moveBuffer.length;\n      };\n      BroadPhase2.prototype.getTreeHeight = function() {\n        return this.m_tree.getHeight();\n      };\n      BroadPhase2.prototype.getTreeBalance = function() {\n        return this.m_tree.getMaxBalance();\n      };\n      BroadPhase2.prototype.getTreeQuality = function() {\n        return this.m_tree.getAreaRatio();\n      };\n      BroadPhase2.prototype.rayCast = function(input2, rayCastCallback) {\n        this.m_tree.rayCast(input2, rayCastCallback);\n      };\n      BroadPhase2.prototype.shiftOrigin = function(newOrigin) {\n        this.m_tree.shiftOrigin(newOrigin);\n      };\n      BroadPhase2.prototype.createProxy = function(aabb, userData) {\n        var proxyId = this.m_tree.createProxy(aabb, userData);\n        this.bufferMove(proxyId);\n        return proxyId;\n      };\n      BroadPhase2.prototype.destroyProxy = function(proxyId) {\n        this.unbufferMove(proxyId);\n        this.m_tree.destroyProxy(proxyId);\n      };\n      BroadPhase2.prototype.moveProxy = function(proxyId, aabb, displacement2) {\n        var changed = this.m_tree.moveProxy(proxyId, aabb, displacement2);\n        if (changed) {\n          this.bufferMove(proxyId);\n        }\n      };\n      BroadPhase2.prototype.touchProxy = function(proxyId) {\n        this.bufferMove(proxyId);\n      };\n      BroadPhase2.prototype.bufferMove = function(proxyId) {\n        this.m_moveBuffer.push(proxyId);\n      };\n      BroadPhase2.prototype.unbufferMove = function(proxyId) {\n        for (var i = 0; i < this.m_moveBuffer.length; ++i) {\n          if (this.m_moveBuffer[i] === proxyId) {\n            this.m_moveBuffer[i] = null;\n          }\n        }\n      };\n      BroadPhase2.prototype.updatePairs = function(addPairCallback) {\n        this.m_callback = addPairCallback;\n        while (this.m_moveBuffer.length > 0) {\n          this.m_queryProxyId = this.m_moveBuffer.pop();\n          if (this.m_queryProxyId === null) {\n            continue;\n          }\n          var fatAABB = this.m_tree.getFatAABB(this.m_queryProxyId);\n          this.m_tree.query(fatAABB, this.queryCallback);\n        }\n      };\n      return BroadPhase2;\n    }()\n  );\n  var math_sin$2 = Math.sin;\n  var math_cos$2 = Math.cos;\n  var math_sqrt$4 = Math.sqrt;\n  function vec2(x2, y) {\n    return { x: x2, y };\n  }\n  function rotation(angle) {\n    return { s: math_sin$2(angle), c: math_cos$2(angle) };\n  }\n  function setVec2(out, x2, y) {\n    out.x = x2;\n    out.y = y;\n    return out;\n  }\n  function copyVec2(out, w) {\n    out.x = w.x;\n    out.y = w.y;\n    return out;\n  }\n  function zeroVec2(out) {\n    out.x = 0;\n    out.y = 0;\n    return out;\n  }\n  function negVec2(out) {\n    out.x = -out.x;\n    out.y = -out.y;\n    return out;\n  }\n  function plusVec2(out, w) {\n    out.x += w.x;\n    out.y += w.y;\n    return out;\n  }\n  function addVec2(out, v3, w) {\n    out.x = v3.x + w.x;\n    out.y = v3.x + w.y;\n    return out;\n  }\n  function minusVec2(out, w) {\n    out.x -= w.x;\n    out.y -= w.y;\n    return out;\n  }\n  function subVec2(out, v3, w) {\n    out.x = v3.x - w.x;\n    out.y = v3.y - w.y;\n    return out;\n  }\n  function mulVec2(out, m) {\n    out.x *= m;\n    out.y *= m;\n    return out;\n  }\n  function scaleVec2(out, m, w) {\n    out.x = m * w.x;\n    out.y = m * w.y;\n    return out;\n  }\n  function plusScaleVec2(out, m, w) {\n    out.x += m * w.x;\n    out.y += m * w.y;\n    return out;\n  }\n  function minusScaleVec2(out, m, w) {\n    out.x -= m * w.x;\n    out.y -= m * w.y;\n    return out;\n  }\n  function combine2Vec2(out, am, a2, bm, b2) {\n    out.x = am * a2.x + bm * b2.x;\n    out.y = am * a2.y + bm * b2.y;\n    return out;\n  }\n  function combine3Vec2(out, am, a2, bm, b2, cm, c2) {\n    out.x = am * a2.x + bm * b2.x + cm * c2.x;\n    out.y = am * a2.y + bm * b2.y + cm * c2.y;\n    return out;\n  }\n  function normalizeVec2Length(out) {\n    var length = math_sqrt$4(out.x * out.x + out.y * out.y);\n    if (length !== 0) {\n      var invLength = 1 / length;\n      out.x *= invLength;\n      out.y *= invLength;\n    }\n    return length;\n  }\n  function normalizeVec2(out) {\n    var length = math_sqrt$4(out.x * out.x + out.y * out.y);\n    if (length > 0) {\n      var invLength = 1 / length;\n      out.x *= invLength;\n      out.y *= invLength;\n    }\n    return out;\n  }\n  function crossVec2Num(out, v3, w) {\n    var x2 = w * v3.y;\n    var y = -w * v3.x;\n    out.x = x2;\n    out.y = y;\n    return out;\n  }\n  function crossNumVec2(out, w, v3) {\n    var x2 = -w * v3.y;\n    var y = w * v3.x;\n    out.x = x2;\n    out.y = y;\n    return out;\n  }\n  function crossVec2Vec2(a2, b2) {\n    return a2.x * b2.y - a2.y * b2.x;\n  }\n  function dotVec2(a2, b2) {\n    return a2.x * b2.x + a2.y * b2.y;\n  }\n  function lengthSqrVec2(a2) {\n    return a2.x * a2.x + a2.y * a2.y;\n  }\n  function distVec2(a2, b2) {\n    var dx = a2.x - b2.x;\n    var dy = a2.y - b2.y;\n    return math_sqrt$4(dx * dx + dy * dy);\n  }\n  function distSqrVec2(a2, b2) {\n    var dx = a2.x - b2.x;\n    var dy = a2.y - b2.y;\n    return dx * dx + dy * dy;\n  }\n  function setRotAngle(out, a2) {\n    out.c = math_cos$2(a2);\n    out.s = math_sin$2(a2);\n    return out;\n  }\n  function rotVec2(out, q, v3) {\n    out.x = q.c * v3.x - q.s * v3.y;\n    out.y = q.s * v3.x + q.c * v3.y;\n    return out;\n  }\n  function derotVec2(out, q, v3) {\n    var x2 = q.c * v3.x + q.s * v3.y;\n    var y = -q.s * v3.x + q.c * v3.y;\n    out.x = x2;\n    out.y = y;\n    return out;\n  }\n  function rerotVec2(out, before, after, v3) {\n    var x0 = before.c * v3.x + before.s * v3.y;\n    var y0 = -before.s * v3.x + before.c * v3.y;\n    var x2 = after.c * x0 - after.s * y0;\n    var y = after.s * x0 + after.c * y0;\n    out.x = x2;\n    out.y = y;\n    return out;\n  }\n  function transform(x2, y, a2) {\n    return { p: vec2(x2, y), q: rotation(a2) };\n  }\n  function copyTransform(out, transform2) {\n    out.p.x = transform2.p.x;\n    out.p.y = transform2.p.y;\n    out.q.s = transform2.q.s;\n    out.q.c = transform2.q.c;\n    return out;\n  }\n  function transformVec2(out, xf2, v3) {\n    var x2 = xf2.q.c * v3.x - xf2.q.s * v3.y + xf2.p.x;\n    var y = xf2.q.s * v3.x + xf2.q.c * v3.y + xf2.p.y;\n    out.x = x2;\n    out.y = y;\n    return out;\n  }\n  function detransformVec2(out, xf2, v3) {\n    var px = v3.x - xf2.p.x;\n    var py = v3.y - xf2.p.y;\n    var x2 = xf2.q.c * px + xf2.q.s * py;\n    var y = -xf2.q.s * px + xf2.q.c * py;\n    out.x = x2;\n    out.y = y;\n    return out;\n  }\n  function retransformVec2(out, from, to, v3) {\n    var x0 = from.q.c * v3.x - from.q.s * v3.y + from.p.x;\n    var y0 = from.q.s * v3.x + from.q.c * v3.y + from.p.y;\n    var px = x0 - to.p.x;\n    var py = y0 - to.p.y;\n    var x2 = to.q.c * px + to.q.s * py;\n    var y = -to.q.s * px + to.q.c * py;\n    out.x = x2;\n    out.y = y;\n    return out;\n  }\n  function detransformTransform(out, a2, b2) {\n    var c2 = a2.q.c * b2.q.c + a2.q.s * b2.q.s;\n    var s2 = a2.q.c * b2.q.s - a2.q.s * b2.q.c;\n    var x2 = a2.q.c * (b2.p.x - a2.p.x) + a2.q.s * (b2.p.y - a2.p.y);\n    var y = -a2.q.s * (b2.p.x - a2.p.x) + a2.q.c * (b2.p.y - a2.p.y);\n    out.q.c = c2;\n    out.q.s = s2;\n    out.p.x = x2;\n    out.p.y = y;\n    return out;\n  }\n  var math_sin$1 = Math.sin;\n  var math_cos$1 = Math.cos;\n  var math_atan2$1 = Math.atan2;\n  var Rot = (\n    /** @class */\n    function() {\n      function Rot2(angle) {\n        if (!(this instanceof Rot2)) {\n          return new Rot2(angle);\n        }\n        if (typeof angle === \"number\") {\n          this.setAngle(angle);\n        } else if (typeof angle === \"object\") {\n          this.setRot(angle);\n        } else {\n          this.setIdentity();\n        }\n      }\n      Rot2.neo = function(angle) {\n        var obj = Object.create(Rot2.prototype);\n        obj.setAngle(angle);\n        return obj;\n      };\n      Rot2.clone = function(rot) {\n        var obj = Object.create(Rot2.prototype);\n        obj.s = rot.s;\n        obj.c = rot.c;\n        return obj;\n      };\n      Rot2.identity = function() {\n        var obj = Object.create(Rot2.prototype);\n        obj.s = 0;\n        obj.c = 1;\n        return obj;\n      };\n      Rot2.isValid = function(obj) {\n        if (obj === null || typeof obj === \"undefined\") {\n          return false;\n        }\n        return Number.isFinite(obj.s) && Number.isFinite(obj.c);\n      };\n      Rot2.assert = function(o) {\n      };\n      Rot2.prototype.setIdentity = function() {\n        this.s = 0;\n        this.c = 1;\n      };\n      Rot2.prototype.set = function(angle) {\n        if (typeof angle === \"object\") {\n          this.s = angle.s;\n          this.c = angle.c;\n        } else {\n          this.s = math_sin$1(angle);\n          this.c = math_cos$1(angle);\n        }\n      };\n      Rot2.prototype.setRot = function(angle) {\n        this.s = angle.s;\n        this.c = angle.c;\n      };\n      Rot2.prototype.setAngle = function(angle) {\n        this.s = math_sin$1(angle);\n        this.c = math_cos$1(angle);\n      };\n      Rot2.prototype.getAngle = function() {\n        return math_atan2$1(this.s, this.c);\n      };\n      Rot2.prototype.getXAxis = function() {\n        return Vec2.neo(this.c, this.s);\n      };\n      Rot2.prototype.getYAxis = function() {\n        return Vec2.neo(-this.s, this.c);\n      };\n      Rot2.mul = function(rot, m) {\n        if (\"c\" in m && \"s\" in m) {\n          var qr = Rot2.identity();\n          qr.s = rot.s * m.c + rot.c * m.s;\n          qr.c = rot.c * m.c - rot.s * m.s;\n          return qr;\n        } else if (\"x\" in m && \"y\" in m) {\n          return Vec2.neo(rot.c * m.x - rot.s * m.y, rot.s * m.x + rot.c * m.y);\n        }\n      };\n      Rot2.mulRot = function(rot, m) {\n        var qr = Rot2.identity();\n        qr.s = rot.s * m.c + rot.c * m.s;\n        qr.c = rot.c * m.c - rot.s * m.s;\n        return qr;\n      };\n      Rot2.mulVec2 = function(rot, m) {\n        return Vec2.neo(rot.c * m.x - rot.s * m.y, rot.s * m.x + rot.c * m.y);\n      };\n      Rot2.mulSub = function(rot, v3, w) {\n        var x2 = rot.c * (v3.x - w.x) - rot.s * (v3.y - w.y);\n        var y = rot.s * (v3.x - w.x) + rot.c * (v3.y - w.y);\n        return Vec2.neo(x2, y);\n      };\n      Rot2.mulT = function(rot, m) {\n        if (\"c\" in m && \"s\" in m) {\n          var qr = Rot2.identity();\n          qr.s = rot.c * m.s - rot.s * m.c;\n          qr.c = rot.c * m.c + rot.s * m.s;\n          return qr;\n        } else if (\"x\" in m && \"y\" in m) {\n          return Vec2.neo(rot.c * m.x + rot.s * m.y, -rot.s * m.x + rot.c * m.y);\n        }\n      };\n      Rot2.mulTRot = function(rot, m) {\n        var qr = Rot2.identity();\n        qr.s = rot.c * m.s - rot.s * m.c;\n        qr.c = rot.c * m.c + rot.s * m.s;\n        return qr;\n      };\n      Rot2.mulTVec2 = function(rot, m) {\n        return Vec2.neo(rot.c * m.x + rot.s * m.y, -rot.s * m.x + rot.c * m.y);\n      };\n      return Rot2;\n    }()\n  );\n  var math_atan2 = Math.atan2;\n  var math_PI$5 = Math.PI;\n  var temp$7 = vec2(0, 0);\n  var Sweep = (\n    /** @class */\n    function() {\n      function Sweep2() {\n        this.localCenter = Vec2.zero();\n        this.c = Vec2.zero();\n        this.a = 0;\n        this.alpha0 = 0;\n        this.c0 = Vec2.zero();\n        this.a0 = 0;\n      }\n      Sweep2.prototype.recycle = function() {\n        zeroVec2(this.localCenter);\n        zeroVec2(this.c);\n        this.a = 0;\n        this.alpha0 = 0;\n        zeroVec2(this.c0);\n        this.a0 = 0;\n      };\n      Sweep2.prototype.setTransform = function(xf2) {\n        transformVec2(temp$7, xf2, this.localCenter);\n        copyVec2(this.c, temp$7);\n        copyVec2(this.c0, temp$7);\n        this.a = this.a0 = math_atan2(xf2.q.s, xf2.q.c);\n      };\n      Sweep2.prototype.setLocalCenter = function(localCenter2, xf2) {\n        copyVec2(this.localCenter, localCenter2);\n        transformVec2(temp$7, xf2, this.localCenter);\n        copyVec2(this.c, temp$7);\n        copyVec2(this.c0, temp$7);\n      };\n      Sweep2.prototype.getTransform = function(xf2, beta) {\n        if (beta === void 0) {\n          beta = 0;\n        }\n        setRotAngle(xf2.q, (1 - beta) * this.a0 + beta * this.a);\n        combine2Vec2(xf2.p, 1 - beta, this.c0, beta, this.c);\n        minusVec2(xf2.p, rotVec2(temp$7, xf2.q, this.localCenter));\n      };\n      Sweep2.prototype.advance = function(alpha) {\n        var beta = (alpha - this.alpha0) / (1 - this.alpha0);\n        combine2Vec2(this.c0, beta, this.c, 1 - beta, this.c0);\n        this.a0 = beta * this.a + (1 - beta) * this.a0;\n        this.alpha0 = alpha;\n      };\n      Sweep2.prototype.forward = function() {\n        this.a0 = this.a;\n        copyVec2(this.c0, this.c);\n      };\n      Sweep2.prototype.normalize = function() {\n        var a0 = mod(this.a0, -math_PI$5, +math_PI$5);\n        this.a -= this.a0 - a0;\n        this.a0 = a0;\n      };\n      Sweep2.prototype.set = function(that) {\n        copyVec2(this.localCenter, that.localCenter);\n        copyVec2(this.c, that.c);\n        this.a = that.a;\n        this.alpha0 = that.alpha0;\n        copyVec2(this.c0, that.c0);\n        this.a0 = that.a0;\n      };\n      return Sweep2;\n    }()\n  );\n  var Transform = (\n    /** @class */\n    function() {\n      function Transform2(position, rotation2) {\n        if (!(this instanceof Transform2)) {\n          return new Transform2(position, rotation2);\n        }\n        this.p = Vec2.zero();\n        this.q = Rot.identity();\n        if (typeof position !== \"undefined\") {\n          this.p.setVec2(position);\n        }\n        if (typeof rotation2 !== \"undefined\") {\n          this.q.setAngle(rotation2);\n        }\n      }\n      Transform2.clone = function(xf2) {\n        var obj = Object.create(Transform2.prototype);\n        obj.p = Vec2.clone(xf2.p);\n        obj.q = Rot.clone(xf2.q);\n        return obj;\n      };\n      Transform2.neo = function(position, rotation2) {\n        var obj = Object.create(Transform2.prototype);\n        obj.p = Vec2.clone(position);\n        obj.q = Rot.clone(rotation2);\n        return obj;\n      };\n      Transform2.identity = function() {\n        var obj = Object.create(Transform2.prototype);\n        obj.p = Vec2.zero();\n        obj.q = Rot.identity();\n        return obj;\n      };\n      Transform2.prototype.setIdentity = function() {\n        this.p.setZero();\n        this.q.setIdentity();\n      };\n      Transform2.prototype.set = function(a2, b2) {\n        if (typeof b2 === \"undefined\") {\n          this.p.set(a2.p);\n          this.q.set(a2.q);\n        } else {\n          this.p.set(a2);\n          this.q.set(b2);\n        }\n      };\n      Transform2.prototype.setNum = function(position, rotation2) {\n        this.p.setVec2(position);\n        this.q.setAngle(rotation2);\n      };\n      Transform2.prototype.setTransform = function(xf2) {\n        this.p.setVec2(xf2.p);\n        this.q.setRot(xf2.q);\n      };\n      Transform2.isValid = function(obj) {\n        if (obj === null || typeof obj === \"undefined\") {\n          return false;\n        }\n        return Vec2.isValid(obj.p) && Rot.isValid(obj.q);\n      };\n      Transform2.assert = function(o) {\n      };\n      Transform2.mul = function(a2, b2) {\n        if (Array.isArray(b2)) {\n          var arr = [];\n          for (var i = 0; i < b2.length; i++) {\n            arr[i] = Transform2.mul(a2, b2[i]);\n          }\n          return arr;\n        } else if (\"x\" in b2 && \"y\" in b2) {\n          return Transform2.mulVec2(a2, b2);\n        } else if (\"p\" in b2 && \"q\" in b2) {\n          return Transform2.mulXf(a2, b2);\n        }\n      };\n      Transform2.mulAll = function(a2, b2) {\n        var arr = [];\n        for (var i = 0; i < b2.length; i++) {\n          arr[i] = Transform2.mul(a2, b2[i]);\n        }\n        return arr;\n      };\n      Transform2.mulFn = function(a2) {\n        return function(b2) {\n          return Transform2.mul(a2, b2);\n        };\n      };\n      Transform2.mulVec2 = function(a2, b2) {\n        var x2 = a2.q.c * b2.x - a2.q.s * b2.y + a2.p.x;\n        var y = a2.q.s * b2.x + a2.q.c * b2.y + a2.p.y;\n        return Vec2.neo(x2, y);\n      };\n      Transform2.mulXf = function(a2, b2) {\n        var xf2 = Transform2.identity();\n        xf2.q = Rot.mulRot(a2.q, b2.q);\n        xf2.p = Vec2.add(Rot.mulVec2(a2.q, b2.p), a2.p);\n        return xf2;\n      };\n      Transform2.mulT = function(a2, b2) {\n        if (\"x\" in b2 && \"y\" in b2) {\n          return Transform2.mulTVec2(a2, b2);\n        } else if (\"p\" in b2 && \"q\" in b2) {\n          return Transform2.mulTXf(a2, b2);\n        }\n      };\n      Transform2.mulTVec2 = function(a2, b2) {\n        var px = b2.x - a2.p.x;\n        var py = b2.y - a2.p.y;\n        var x2 = a2.q.c * px + a2.q.s * py;\n        var y = -a2.q.s * px + a2.q.c * py;\n        return Vec2.neo(x2, y);\n      };\n      Transform2.mulTXf = function(a2, b2) {\n        var xf2 = Transform2.identity();\n        xf2.q.setRot(Rot.mulTRot(a2.q, b2.q));\n        xf2.p.setVec2(Rot.mulTVec2(a2.q, Vec2.sub(b2.p, a2.p)));\n        return xf2;\n      };\n      return Transform2;\n    }()\n  );\n  var Velocity = (\n    /** @class */\n    /* @__PURE__ */ function() {\n      function Velocity2() {\n        this.v = Vec2.zero();\n        this.w = 0;\n      }\n      return Velocity2;\n    }()\n  );\n  var math_sin = Math.sin;\n  var math_cos = Math.cos;\n  var Position = (\n    /** @class */\n    function() {\n      function Position2() {\n        this.c = Vec2.zero();\n        this.a = 0;\n      }\n      Position2.prototype.getTransform = function(xf2, p) {\n        xf2.q.c = math_cos(this.a);\n        xf2.q.s = math_sin(this.a);\n        xf2.p.x = this.c.x - (xf2.q.c * p.x - xf2.q.s * p.y);\n        xf2.p.y = this.c.y - (xf2.q.s * p.x + xf2.q.c * p.y);\n        return xf2;\n      };\n      return Position2;\n    }()\n  );\n  function getTransform(xf2, p, c2, a2) {\n    xf2.q.c = math_cos(a2);\n    xf2.q.s = math_sin(a2);\n    xf2.p.x = c2.x - (xf2.q.c * p.x - xf2.q.s * p.y);\n    xf2.p.y = c2.y - (xf2.q.s * p.x + xf2.q.c * p.y);\n    return xf2;\n  }\n  var Shape = (\n    /** @class */\n    function() {\n      function Shape2() {\n        this.style = {};\n        this.appData = {};\n      }\n      Shape2.isValid = function(obj) {\n        if (obj === null || typeof obj === \"undefined\") {\n          return false;\n        }\n        return typeof obj.m_type === \"string\" && typeof obj.m_radius === \"number\";\n      };\n      return Shape2;\n    }()\n  );\n  var synchronize_aabb1 = new AABB();\n  var synchronize_aabb2 = new AABB();\n  var displacement = vec2(0, 0);\n  var FixtureDefDefault = {\n    userData: null,\n    friction: 0.2,\n    restitution: 0,\n    density: 0,\n    isSensor: false,\n    filterGroupIndex: 0,\n    filterCategoryBits: 1,\n    filterMaskBits: 65535\n  };\n  var FixtureProxy = (\n    /** @class */\n    /* @__PURE__ */ function() {\n      function FixtureProxy2(fixture, childIndex) {\n        this.aabb = new AABB();\n        this.fixture = fixture;\n        this.childIndex = childIndex;\n      }\n      return FixtureProxy2;\n    }()\n  );\n  var Fixture = (\n    /** @class */\n    function() {\n      function Fixture2(body, shape, def) {\n        this.style = {};\n        this.appData = {};\n        if (shape.shape) {\n          def = shape;\n          shape = shape.shape;\n        } else if (typeof def === \"number\") {\n          def = { density: def };\n        }\n        def = options(def, FixtureDefDefault);\n        this.m_body = body;\n        this.m_friction = def.friction;\n        this.m_restitution = def.restitution;\n        this.m_density = def.density;\n        this.m_isSensor = def.isSensor;\n        this.m_filterGroupIndex = def.filterGroupIndex;\n        this.m_filterCategoryBits = def.filterCategoryBits;\n        this.m_filterMaskBits = def.filterMaskBits;\n        this.m_shape = shape;\n        this.m_next = null;\n        this.m_proxies = [];\n        this.m_proxyCount = 0;\n        var childCount = this.m_shape.getChildCount();\n        for (var i = 0; i < childCount; ++i) {\n          this.m_proxies[i] = new FixtureProxy(this, i);\n        }\n        this.m_userData = def.userData;\n        if (typeof def.style === \"object\" && def.style !== null) {\n          this.style = def.style;\n        }\n      }\n      Fixture2.prototype._reset = function() {\n        var body = this.getBody();\n        var broadPhase = body.m_world.m_broadPhase;\n        this.destroyProxies(broadPhase);\n        if (this.m_shape._reset) {\n          this.m_shape._reset();\n        }\n        var childCount = this.m_shape.getChildCount();\n        for (var i = 0; i < childCount; ++i) {\n          this.m_proxies[i] = new FixtureProxy(this, i);\n        }\n        this.createProxies(broadPhase, body.m_xf);\n        body.resetMassData();\n      };\n      Fixture2.prototype._serialize = function() {\n        return {\n          friction: this.m_friction,\n          restitution: this.m_restitution,\n          density: this.m_density,\n          isSensor: this.m_isSensor,\n          filterGroupIndex: this.m_filterGroupIndex,\n          filterCategoryBits: this.m_filterCategoryBits,\n          filterMaskBits: this.m_filterMaskBits,\n          shape: this.m_shape\n        };\n      };\n      Fixture2._deserialize = function(data, body, restore) {\n        var shape = restore(Shape, data.shape);\n        var fixture = shape && new Fixture2(body, shape, data);\n        return fixture;\n      };\n      Fixture2.prototype.getType = function() {\n        return this.m_shape.m_type;\n      };\n      Fixture2.prototype.getShape = function() {\n        return this.m_shape;\n      };\n      Fixture2.prototype.isSensor = function() {\n        return this.m_isSensor;\n      };\n      Fixture2.prototype.setSensor = function(sensor) {\n        if (sensor != this.m_isSensor) {\n          this.m_body.setAwake(true);\n          this.m_isSensor = sensor;\n        }\n      };\n      Fixture2.prototype.getUserData = function() {\n        return this.m_userData;\n      };\n      Fixture2.prototype.setUserData = function(data) {\n        this.m_userData = data;\n      };\n      Fixture2.prototype.getBody = function() {\n        return this.m_body;\n      };\n      Fixture2.prototype.getNext = function() {\n        return this.m_next;\n      };\n      Fixture2.prototype.getDensity = function() {\n        return this.m_density;\n      };\n      Fixture2.prototype.setDensity = function(density) {\n        this.m_density = density;\n      };\n      Fixture2.prototype.getFriction = function() {\n        return this.m_friction;\n      };\n      Fixture2.prototype.setFriction = function(friction) {\n        this.m_friction = friction;\n      };\n      Fixture2.prototype.getRestitution = function() {\n        return this.m_restitution;\n      };\n      Fixture2.prototype.setRestitution = function(restitution) {\n        this.m_restitution = restitution;\n      };\n      Fixture2.prototype.testPoint = function(p) {\n        return this.m_shape.testPoint(this.m_body.getTransform(), p);\n      };\n      Fixture2.prototype.rayCast = function(output2, input2, childIndex) {\n        return this.m_shape.rayCast(output2, input2, this.m_body.getTransform(), childIndex);\n      };\n      Fixture2.prototype.getMassData = function(massData) {\n        this.m_shape.computeMass(massData, this.m_density);\n      };\n      Fixture2.prototype.getAABB = function(childIndex) {\n        return this.m_proxies[childIndex].aabb;\n      };\n      Fixture2.prototype.createProxies = function(broadPhase, xf2) {\n        this.m_proxyCount = this.m_shape.getChildCount();\n        for (var i = 0; i < this.m_proxyCount; ++i) {\n          var proxy = this.m_proxies[i];\n          this.m_shape.computeAABB(proxy.aabb, xf2, i);\n          proxy.proxyId = broadPhase.createProxy(proxy.aabb, proxy);\n        }\n      };\n      Fixture2.prototype.destroyProxies = function(broadPhase) {\n        for (var i = 0; i < this.m_proxyCount; ++i) {\n          var proxy = this.m_proxies[i];\n          broadPhase.destroyProxy(proxy.proxyId);\n          proxy.proxyId = null;\n        }\n        this.m_proxyCount = 0;\n      };\n      Fixture2.prototype.synchronize = function(broadPhase, xf1, xf2) {\n        for (var i = 0; i < this.m_proxyCount; ++i) {\n          var proxy = this.m_proxies[i];\n          this.m_shape.computeAABB(synchronize_aabb1, xf1, proxy.childIndex);\n          this.m_shape.computeAABB(synchronize_aabb2, xf2, proxy.childIndex);\n          proxy.aabb.combine(synchronize_aabb1, synchronize_aabb2);\n          subVec2(displacement, xf2.p, xf1.p);\n          broadPhase.moveProxy(proxy.proxyId, proxy.aabb, displacement);\n        }\n      };\n      Fixture2.prototype.setFilterData = function(filter) {\n        this.m_filterGroupIndex = filter.groupIndex;\n        this.m_filterCategoryBits = filter.categoryBits;\n        this.m_filterMaskBits = filter.maskBits;\n        this.refilter();\n      };\n      Fixture2.prototype.getFilterGroupIndex = function() {\n        return this.m_filterGroupIndex;\n      };\n      Fixture2.prototype.setFilterGroupIndex = function(groupIndex) {\n        this.m_filterGroupIndex = groupIndex;\n        this.refilter();\n      };\n      Fixture2.prototype.getFilterCategoryBits = function() {\n        return this.m_filterCategoryBits;\n      };\n      Fixture2.prototype.setFilterCategoryBits = function(categoryBits) {\n        this.m_filterCategoryBits = categoryBits;\n        this.refilter();\n      };\n      Fixture2.prototype.getFilterMaskBits = function() {\n        return this.m_filterMaskBits;\n      };\n      Fixture2.prototype.setFilterMaskBits = function(maskBits) {\n        this.m_filterMaskBits = maskBits;\n        this.refilter();\n      };\n      Fixture2.prototype.refilter = function() {\n        if (this.m_body == null) {\n          return;\n        }\n        var edge = this.m_body.getContactList();\n        while (edge) {\n          var contact = edge.contact;\n          var fixtureA = contact.getFixtureA();\n          var fixtureB = contact.getFixtureB();\n          if (fixtureA == this || fixtureB == this) {\n            contact.flagForFiltering();\n          }\n          edge = edge.next;\n        }\n        var world = this.m_body.getWorld();\n        if (world == null) {\n          return;\n        }\n        var broadPhase = world.m_broadPhase;\n        for (var i = 0; i < this.m_proxyCount; ++i) {\n          broadPhase.touchProxy(this.m_proxies[i].proxyId);\n        }\n      };\n      Fixture2.prototype.shouldCollide = function(that) {\n        if (that.m_filterGroupIndex === this.m_filterGroupIndex && that.m_filterGroupIndex !== 0) {\n          return that.m_filterGroupIndex > 0;\n        }\n        var collideA = (that.m_filterMaskBits & this.m_filterCategoryBits) !== 0;\n        var collideB = (that.m_filterCategoryBits & this.m_filterMaskBits) !== 0;\n        var collide = collideA && collideB;\n        return collide;\n      };\n      return Fixture2;\n    }()\n  );\n  var STATIC = \"static\";\n  var KINEMATIC = \"kinematic\";\n  var DYNAMIC = \"dynamic\";\n  var oldCenter = vec2(0, 0);\n  var localCenter = vec2(0, 0);\n  var shift = vec2(0, 0);\n  var temp$6 = vec2(0, 0);\n  var xf$2 = transform(0, 0, 0);\n  var BodyDefDefault = {\n    type: STATIC,\n    position: Vec2.zero(),\n    angle: 0,\n    linearVelocity: Vec2.zero(),\n    angularVelocity: 0,\n    linearDamping: 0,\n    angularDamping: 0,\n    fixedRotation: false,\n    bullet: false,\n    gravityScale: 1,\n    allowSleep: true,\n    awake: true,\n    active: true,\n    userData: null\n  };\n  var Body = (\n    /** @class */\n    function() {\n      function Body2(world, def) {\n        this.style = {};\n        this.appData = {};\n        def = options(def, BodyDefDefault);\n        this.m_world = world;\n        this.m_awakeFlag = def.awake;\n        this.m_autoSleepFlag = def.allowSleep;\n        this.m_bulletFlag = def.bullet;\n        this.m_fixedRotationFlag = def.fixedRotation;\n        this.m_activeFlag = def.active;\n        this.m_islandFlag = false;\n        this.m_toiFlag = false;\n        this.m_userData = def.userData;\n        this.m_type = def.type;\n        if (this.m_type == DYNAMIC) {\n          this.m_mass = 1;\n          this.m_invMass = 1;\n        } else {\n          this.m_mass = 0;\n          this.m_invMass = 0;\n        }\n        this.m_I = 0;\n        this.m_invI = 0;\n        this.m_xf = Transform.identity();\n        this.m_xf.p.setVec2(def.position);\n        this.m_xf.q.setAngle(def.angle);\n        this.m_sweep = new Sweep();\n        this.m_sweep.setTransform(this.m_xf);\n        this.c_velocity = new Velocity();\n        this.c_position = new Position();\n        this.m_force = Vec2.zero();\n        this.m_torque = 0;\n        this.m_linearVelocity = Vec2.clone(def.linearVelocity);\n        this.m_angularVelocity = def.angularVelocity;\n        this.m_linearDamping = def.linearDamping;\n        this.m_angularDamping = def.angularDamping;\n        this.m_gravityScale = def.gravityScale;\n        this.m_sleepTime = 0;\n        this.m_jointList = null;\n        this.m_contactList = null;\n        this.m_fixtureList = null;\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_destroyed = false;\n        if (typeof def.style === \"object\" && def.style !== null) {\n          this.style = def.style;\n        }\n      }\n      Body2.prototype._serialize = function() {\n        var fixtures = [];\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n          fixtures.push(f);\n        }\n        return {\n          type: this.m_type,\n          bullet: this.m_bulletFlag,\n          position: this.m_xf.p,\n          angle: this.m_xf.q.getAngle(),\n          linearVelocity: this.m_linearVelocity,\n          angularVelocity: this.m_angularVelocity,\n          fixtures\n        };\n      };\n      Body2._deserialize = function(data, world, restore) {\n        var body = new Body2(world, data);\n        if (data.fixtures) {\n          for (var i = data.fixtures.length - 1; i >= 0; i--) {\n            var fixture = restore(Fixture, data.fixtures[i], body);\n            body._addFixture(fixture);\n          }\n        }\n        return body;\n      };\n      Body2.prototype.isWorldLocked = function() {\n        return this.m_world && this.m_world.isLocked() ? true : false;\n      };\n      Body2.prototype.getWorld = function() {\n        return this.m_world;\n      };\n      Body2.prototype.getNext = function() {\n        return this.m_next;\n      };\n      Body2.prototype.setUserData = function(data) {\n        this.m_userData = data;\n      };\n      Body2.prototype.getUserData = function() {\n        return this.m_userData;\n      };\n      Body2.prototype.getFixtureList = function() {\n        return this.m_fixtureList;\n      };\n      Body2.prototype.getJointList = function() {\n        return this.m_jointList;\n      };\n      Body2.prototype.getContactList = function() {\n        return this.m_contactList;\n      };\n      Body2.prototype.isStatic = function() {\n        return this.m_type == STATIC;\n      };\n      Body2.prototype.isDynamic = function() {\n        return this.m_type == DYNAMIC;\n      };\n      Body2.prototype.isKinematic = function() {\n        return this.m_type == KINEMATIC;\n      };\n      Body2.prototype.setStatic = function() {\n        this.setType(STATIC);\n        return this;\n      };\n      Body2.prototype.setDynamic = function() {\n        this.setType(DYNAMIC);\n        return this;\n      };\n      Body2.prototype.setKinematic = function() {\n        this.setType(KINEMATIC);\n        return this;\n      };\n      Body2.prototype.getType = function() {\n        return this.m_type;\n      };\n      Body2.prototype.setType = function(type) {\n        if (this.isWorldLocked() == true) {\n          return;\n        }\n        if (this.m_type == type) {\n          return;\n        }\n        this.m_type = type;\n        this.resetMassData();\n        if (this.m_type == STATIC) {\n          this.m_linearVelocity.setZero();\n          this.m_angularVelocity = 0;\n          this.m_sweep.forward();\n          this.synchronizeFixtures();\n        }\n        this.setAwake(true);\n        this.m_force.setZero();\n        this.m_torque = 0;\n        var ce = this.m_contactList;\n        while (ce) {\n          var ce0 = ce;\n          ce = ce.next;\n          this.m_world.destroyContact(ce0.contact);\n        }\n        this.m_contactList = null;\n        var broadPhase = this.m_world.m_broadPhase;\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n          for (var i = 0; i < f.m_proxyCount; ++i) {\n            broadPhase.touchProxy(f.m_proxies[i].proxyId);\n          }\n        }\n      };\n      Body2.prototype.isBullet = function() {\n        return this.m_bulletFlag;\n      };\n      Body2.prototype.setBullet = function(flag) {\n        this.m_bulletFlag = !!flag;\n      };\n      Body2.prototype.isSleepingAllowed = function() {\n        return this.m_autoSleepFlag;\n      };\n      Body2.prototype.setSleepingAllowed = function(flag) {\n        this.m_autoSleepFlag = !!flag;\n        if (this.m_autoSleepFlag == false) {\n          this.setAwake(true);\n        }\n      };\n      Body2.prototype.isAwake = function() {\n        return this.m_awakeFlag;\n      };\n      Body2.prototype.setAwake = function(flag) {\n        if (flag) {\n          this.m_awakeFlag = true;\n          this.m_sleepTime = 0;\n        } else {\n          this.m_awakeFlag = false;\n          this.m_sleepTime = 0;\n          this.m_linearVelocity.setZero();\n          this.m_angularVelocity = 0;\n          this.m_force.setZero();\n          this.m_torque = 0;\n        }\n      };\n      Body2.prototype.isActive = function() {\n        return this.m_activeFlag;\n      };\n      Body2.prototype.setActive = function(flag) {\n        if (flag == this.m_activeFlag) {\n          return;\n        }\n        this.m_activeFlag = !!flag;\n        if (this.m_activeFlag) {\n          var broadPhase = this.m_world.m_broadPhase;\n          for (var f = this.m_fixtureList; f; f = f.m_next) {\n            f.createProxies(broadPhase, this.m_xf);\n          }\n          this.m_world.m_newFixture = true;\n        } else {\n          var broadPhase = this.m_world.m_broadPhase;\n          for (var f = this.m_fixtureList; f; f = f.m_next) {\n            f.destroyProxies(broadPhase);\n          }\n          var ce = this.m_contactList;\n          while (ce) {\n            var ce0 = ce;\n            ce = ce.next;\n            this.m_world.destroyContact(ce0.contact);\n          }\n          this.m_contactList = null;\n        }\n      };\n      Body2.prototype.isFixedRotation = function() {\n        return this.m_fixedRotationFlag;\n      };\n      Body2.prototype.setFixedRotation = function(flag) {\n        if (this.m_fixedRotationFlag == flag) {\n          return;\n        }\n        this.m_fixedRotationFlag = !!flag;\n        this.m_angularVelocity = 0;\n        this.resetMassData();\n      };\n      Body2.prototype.getTransform = function() {\n        return this.m_xf;\n      };\n      Body2.prototype.setTransform = function(a2, b2) {\n        if (this.isWorldLocked() == true) {\n          return;\n        }\n        if (typeof b2 === \"number\") {\n          this.m_xf.setNum(a2, b2);\n        } else {\n          this.m_xf.setTransform(a2);\n        }\n        this.m_sweep.setTransform(this.m_xf);\n        var broadPhase = this.m_world.m_broadPhase;\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n          f.synchronize(broadPhase, this.m_xf, this.m_xf);\n        }\n        this.setAwake(true);\n      };\n      Body2.prototype.synchronizeTransform = function() {\n        this.m_sweep.getTransform(this.m_xf, 1);\n      };\n      Body2.prototype.synchronizeFixtures = function() {\n        this.m_sweep.getTransform(xf$2, 0);\n        var broadPhase = this.m_world.m_broadPhase;\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n          f.synchronize(broadPhase, xf$2, this.m_xf);\n        }\n      };\n      Body2.prototype.advance = function(alpha) {\n        this.m_sweep.advance(alpha);\n        copyVec2(this.m_sweep.c, this.m_sweep.c0);\n        this.m_sweep.a = this.m_sweep.a0;\n        this.m_sweep.getTransform(this.m_xf, 1);\n      };\n      Body2.prototype.getPosition = function() {\n        return this.m_xf.p;\n      };\n      Body2.prototype.setPosition = function(p) {\n        this.setTransform(p, this.m_sweep.a);\n      };\n      Body2.prototype.getAngle = function() {\n        return this.m_sweep.a;\n      };\n      Body2.prototype.setAngle = function(angle) {\n        this.setTransform(this.m_xf.p, angle);\n      };\n      Body2.prototype.getWorldCenter = function() {\n        return this.m_sweep.c;\n      };\n      Body2.prototype.getLocalCenter = function() {\n        return this.m_sweep.localCenter;\n      };\n      Body2.prototype.getLinearVelocity = function() {\n        return this.m_linearVelocity;\n      };\n      Body2.prototype.getLinearVelocityFromWorldPoint = function(worldPoint) {\n        var localCenter2 = Vec2.sub(worldPoint, this.m_sweep.c);\n        return Vec2.add(this.m_linearVelocity, Vec2.crossNumVec2(this.m_angularVelocity, localCenter2));\n      };\n      Body2.prototype.getLinearVelocityFromLocalPoint = function(localPoint) {\n        return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(localPoint));\n      };\n      Body2.prototype.setLinearVelocity = function(v3) {\n        if (this.m_type == STATIC) {\n          return;\n        }\n        if (Vec2.dot(v3, v3) > 0) {\n          this.setAwake(true);\n        }\n        this.m_linearVelocity.setVec2(v3);\n      };\n      Body2.prototype.getAngularVelocity = function() {\n        return this.m_angularVelocity;\n      };\n      Body2.prototype.setAngularVelocity = function(w) {\n        if (this.m_type == STATIC) {\n          return;\n        }\n        if (w * w > 0) {\n          this.setAwake(true);\n        }\n        this.m_angularVelocity = w;\n      };\n      Body2.prototype.getLinearDamping = function() {\n        return this.m_linearDamping;\n      };\n      Body2.prototype.setLinearDamping = function(linearDamping) {\n        this.m_linearDamping = linearDamping;\n      };\n      Body2.prototype.getAngularDamping = function() {\n        return this.m_angularDamping;\n      };\n      Body2.prototype.setAngularDamping = function(angularDamping) {\n        this.m_angularDamping = angularDamping;\n      };\n      Body2.prototype.getGravityScale = function() {\n        return this.m_gravityScale;\n      };\n      Body2.prototype.setGravityScale = function(scale) {\n        this.m_gravityScale = scale;\n      };\n      Body2.prototype.getMass = function() {\n        return this.m_mass;\n      };\n      Body2.prototype.getInertia = function() {\n        return this.m_I + this.m_mass * Vec2.dot(this.m_sweep.localCenter, this.m_sweep.localCenter);\n      };\n      Body2.prototype.getMassData = function(data) {\n        data.mass = this.m_mass;\n        data.I = this.getInertia();\n        copyVec2(data.center, this.m_sweep.localCenter);\n      };\n      Body2.prototype.resetMassData = function() {\n        this.m_mass = 0;\n        this.m_invMass = 0;\n        this.m_I = 0;\n        this.m_invI = 0;\n        zeroVec2(this.m_sweep.localCenter);\n        if (this.isStatic() || this.isKinematic()) {\n          copyVec2(this.m_sweep.c0, this.m_xf.p);\n          copyVec2(this.m_sweep.c, this.m_xf.p);\n          this.m_sweep.a0 = this.m_sweep.a;\n          return;\n        }\n        zeroVec2(localCenter);\n        for (var f = this.m_fixtureList; f; f = f.m_next) {\n          if (f.m_density == 0) {\n            continue;\n          }\n          var massData = {\n            mass: 0,\n            center: vec2(0, 0),\n            I: 0\n          };\n          f.getMassData(massData);\n          this.m_mass += massData.mass;\n          plusScaleVec2(localCenter, massData.mass, massData.center);\n          this.m_I += massData.I;\n        }\n        if (this.m_mass > 0) {\n          this.m_invMass = 1 / this.m_mass;\n          scaleVec2(localCenter, this.m_invMass, localCenter);\n        } else {\n          this.m_mass = 1;\n          this.m_invMass = 1;\n        }\n        if (this.m_I > 0 && this.m_fixedRotationFlag == false) {\n          this.m_I -= this.m_mass * dotVec2(localCenter, localCenter);\n          this.m_invI = 1 / this.m_I;\n        } else {\n          this.m_I = 0;\n          this.m_invI = 0;\n        }\n        copyVec2(oldCenter, this.m_sweep.c);\n        this.m_sweep.setLocalCenter(localCenter, this.m_xf);\n        subVec2(shift, this.m_sweep.c, oldCenter);\n        crossNumVec2(temp$6, this.m_angularVelocity, shift);\n        plusVec2(this.m_linearVelocity, temp$6);\n      };\n      Body2.prototype.setMassData = function(massData) {\n        if (this.isWorldLocked() == true) {\n          return;\n        }\n        if (this.m_type != DYNAMIC) {\n          return;\n        }\n        this.m_invMass = 0;\n        this.m_I = 0;\n        this.m_invI = 0;\n        this.m_mass = massData.mass;\n        if (this.m_mass <= 0) {\n          this.m_mass = 1;\n        }\n        this.m_invMass = 1 / this.m_mass;\n        if (massData.I > 0 && this.m_fixedRotationFlag == false) {\n          this.m_I = massData.I - this.m_mass * dotVec2(massData.center, massData.center);\n          this.m_invI = 1 / this.m_I;\n        }\n        copyVec2(oldCenter, this.m_sweep.c);\n        this.m_sweep.setLocalCenter(massData.center, this.m_xf);\n        subVec2(shift, this.m_sweep.c, oldCenter);\n        crossNumVec2(temp$6, this.m_angularVelocity, shift);\n        plusVec2(this.m_linearVelocity, temp$6);\n      };\n      Body2.prototype.applyForce = function(force, point2, wake) {\n        if (wake === void 0) {\n          wake = true;\n        }\n        if (this.m_type != DYNAMIC) {\n          return;\n        }\n        if (wake && this.m_awakeFlag == false) {\n          this.setAwake(true);\n        }\n        if (this.m_awakeFlag) {\n          this.m_force.add(force);\n          this.m_torque += Vec2.crossVec2Vec2(Vec2.sub(point2, this.m_sweep.c), force);\n        }\n      };\n      Body2.prototype.applyForceToCenter = function(force, wake) {\n        if (wake === void 0) {\n          wake = true;\n        }\n        if (this.m_type != DYNAMIC) {\n          return;\n        }\n        if (wake && this.m_awakeFlag == false) {\n          this.setAwake(true);\n        }\n        if (this.m_awakeFlag) {\n          this.m_force.add(force);\n        }\n      };\n      Body2.prototype.applyTorque = function(torque, wake) {\n        if (wake === void 0) {\n          wake = true;\n        }\n        if (this.m_type != DYNAMIC) {\n          return;\n        }\n        if (wake && this.m_awakeFlag == false) {\n          this.setAwake(true);\n        }\n        if (this.m_awakeFlag) {\n          this.m_torque += torque;\n        }\n      };\n      Body2.prototype.applyLinearImpulse = function(impulse, point2, wake) {\n        if (wake === void 0) {\n          wake = true;\n        }\n        if (this.m_type != DYNAMIC) {\n          return;\n        }\n        if (wake && this.m_awakeFlag == false) {\n          this.setAwake(true);\n        }\n        if (this.m_awakeFlag) {\n          this.m_linearVelocity.addMul(this.m_invMass, impulse);\n          this.m_angularVelocity += this.m_invI * Vec2.crossVec2Vec2(Vec2.sub(point2, this.m_sweep.c), impulse);\n        }\n      };\n      Body2.prototype.applyAngularImpulse = function(impulse, wake) {\n        if (wake === void 0) {\n          wake = true;\n        }\n        if (this.m_type != DYNAMIC) {\n          return;\n        }\n        if (wake && this.m_awakeFlag == false) {\n          this.setAwake(true);\n        }\n        if (this.m_awakeFlag) {\n          this.m_angularVelocity += this.m_invI * impulse;\n        }\n      };\n      Body2.prototype.shouldCollide = function(that) {\n        if (this.m_type != DYNAMIC && that.m_type != DYNAMIC) {\n          return false;\n        }\n        for (var jn = this.m_jointList; jn; jn = jn.next) {\n          if (jn.other == that) {\n            if (jn.joint.m_collideConnected == false) {\n              return false;\n            }\n          }\n        }\n        return true;\n      };\n      Body2.prototype._addFixture = function(fixture) {\n        if (this.isWorldLocked() == true) {\n          return null;\n        }\n        if (this.m_activeFlag) {\n          var broadPhase = this.m_world.m_broadPhase;\n          fixture.createProxies(broadPhase, this.m_xf);\n        }\n        fixture.m_next = this.m_fixtureList;\n        this.m_fixtureList = fixture;\n        if (fixture.m_density > 0) {\n          this.resetMassData();\n        }\n        this.m_world.m_newFixture = true;\n        return fixture;\n      };\n      Body2.prototype.createFixture = function(shape, fixdef) {\n        if (this.isWorldLocked() == true) {\n          return null;\n        }\n        var fixture = new Fixture(this, shape, fixdef);\n        this._addFixture(fixture);\n        return fixture;\n      };\n      Body2.prototype.destroyFixture = function(fixture) {\n        if (this.isWorldLocked() == true) {\n          return;\n        }\n        if (this.m_fixtureList === fixture) {\n          this.m_fixtureList = fixture.m_next;\n        } else {\n          var node = this.m_fixtureList;\n          while (node != null) {\n            if (node.m_next === fixture) {\n              node.m_next = fixture.m_next;\n              break;\n            }\n            node = node.m_next;\n          }\n        }\n        var edge = this.m_contactList;\n        while (edge) {\n          var c2 = edge.contact;\n          edge = edge.next;\n          var fixtureA = c2.getFixtureA();\n          var fixtureB = c2.getFixtureB();\n          if (fixture == fixtureA || fixture == fixtureB) {\n            this.m_world.destroyContact(c2);\n          }\n        }\n        if (this.m_activeFlag) {\n          var broadPhase = this.m_world.m_broadPhase;\n          fixture.destroyProxies(broadPhase);\n        }\n        fixture.m_body = null;\n        fixture.m_next = null;\n        this.m_world.publish(\"remove-fixture\", fixture);\n        this.resetMassData();\n      };\n      Body2.prototype.getWorldPoint = function(localPoint) {\n        return Transform.mulVec2(this.m_xf, localPoint);\n      };\n      Body2.prototype.getWorldVector = function(localVector) {\n        return Rot.mulVec2(this.m_xf.q, localVector);\n      };\n      Body2.prototype.getLocalPoint = function(worldPoint) {\n        return Transform.mulTVec2(this.m_xf, worldPoint);\n      };\n      Body2.prototype.getLocalVector = function(worldVector) {\n        return Rot.mulTVec2(this.m_xf.q, worldVector);\n      };\n      Body2.STATIC = \"static\";\n      Body2.KINEMATIC = \"kinematic\";\n      Body2.DYNAMIC = \"dynamic\";\n      return Body2;\n    }()\n  );\n  var JointEdge = (\n    /** @class */\n    /* @__PURE__ */ function() {\n      function JointEdge2() {\n        this.other = null;\n        this.joint = null;\n        this.prev = null;\n        this.next = null;\n      }\n      return JointEdge2;\n    }()\n  );\n  var Joint = (\n    /** @class */\n    function() {\n      function Joint2(def, bodyA, bodyB) {\n        this.m_type = \"unknown-joint\";\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_edgeA = new JointEdge();\n        this.m_edgeB = new JointEdge();\n        this.m_islandFlag = false;\n        this.style = {};\n        this.appData = {};\n        bodyA = \"bodyA\" in def ? def.bodyA : bodyA;\n        bodyB = \"bodyB\" in def ? def.bodyB : bodyB;\n        this.m_bodyA = bodyA;\n        this.m_bodyB = bodyB;\n        this.m_collideConnected = !!def.collideConnected;\n        this.m_userData = def.userData;\n        if (typeof def.style === \"object\" && def.style !== null) {\n          this.style = def.style;\n        }\n      }\n      Joint2.prototype.isActive = function() {\n        return this.m_bodyA.isActive() && this.m_bodyB.isActive();\n      };\n      Joint2.prototype.getType = function() {\n        return this.m_type;\n      };\n      Joint2.prototype.getBodyA = function() {\n        return this.m_bodyA;\n      };\n      Joint2.prototype.getBodyB = function() {\n        return this.m_bodyB;\n      };\n      Joint2.prototype.getNext = function() {\n        return this.m_next;\n      };\n      Joint2.prototype.getUserData = function() {\n        return this.m_userData;\n      };\n      Joint2.prototype.setUserData = function(data) {\n        this.m_userData = data;\n      };\n      Joint2.prototype.getCollideConnected = function() {\n        return this.m_collideConnected;\n      };\n      Joint2.prototype.shiftOrigin = function(newOrigin) {\n      };\n      Joint2.prototype._resetAnchors = function(def) {\n        return this._reset(def);\n      };\n      return Joint2;\n    }()\n  );\n  var stats = {\n    gjkCalls: 0,\n    gjkIters: 0,\n    gjkMaxIters: 0,\n    toiTime: 0,\n    toiMaxTime: 0,\n    toiCalls: 0,\n    toiIters: 0,\n    toiMaxIters: 0,\n    toiRootIters: 0,\n    toiMaxRootIters: 0,\n    toString: function(newline) {\n      newline = typeof newline === \"string\" ? newline : \"\\n\";\n      var string = \"\";\n      for (var name_1 in this) {\n        if (typeof this[name_1] !== \"function\" && typeof this[name_1] !== \"object\") {\n          string += name_1 + \": \" + this[name_1] + newline;\n        }\n      }\n      return string;\n    }\n  };\n  var now = function() {\n    return Date.now();\n  };\n  var diff = function(time) {\n    return Date.now() - time;\n  };\n  const Timer = {\n    now,\n    diff\n  };\n  var math_max$4 = Math.max;\n  var temp$5 = vec2(0, 0);\n  var normal$4 = vec2(0, 0);\n  var e12 = vec2(0, 0);\n  var e13 = vec2(0, 0);\n  var e23 = vec2(0, 0);\n  var temp1 = vec2(0, 0);\n  var temp2 = vec2(0, 0);\n  stats.gjkCalls = 0;\n  stats.gjkIters = 0;\n  stats.gjkMaxIters = 0;\n  var DistanceInput = (\n    /** @class */\n    function() {\n      function DistanceInput2() {\n        this.proxyA = new DistanceProxy();\n        this.proxyB = new DistanceProxy();\n        this.transformA = Transform.identity();\n        this.transformB = Transform.identity();\n        this.useRadii = false;\n      }\n      DistanceInput2.prototype.recycle = function() {\n        this.proxyA.recycle();\n        this.proxyB.recycle();\n        this.transformA.setIdentity();\n        this.transformB.setIdentity();\n        this.useRadii = false;\n      };\n      return DistanceInput2;\n    }()\n  );\n  var DistanceOutput = (\n    /** @class */\n    function() {\n      function DistanceOutput2() {\n        this.pointA = vec2(0, 0);\n        this.pointB = vec2(0, 0);\n        this.distance = 0;\n        this.iterations = 0;\n      }\n      DistanceOutput2.prototype.recycle = function() {\n        zeroVec2(this.pointA);\n        zeroVec2(this.pointB);\n        this.distance = 0;\n        this.iterations = 0;\n      };\n      return DistanceOutput2;\n    }()\n  );\n  var SimplexCache = (\n    /** @class */\n    function() {\n      function SimplexCache2() {\n        this.metric = 0;\n        this.indexA = [];\n        this.indexB = [];\n        this.count = 0;\n      }\n      SimplexCache2.prototype.recycle = function() {\n        this.metric = 0;\n        this.indexA.length = 0;\n        this.indexB.length = 0;\n        this.count = 0;\n      };\n      return SimplexCache2;\n    }()\n  );\n  var Distance = function(output2, cache2, input2) {\n    ++stats.gjkCalls;\n    var proxyA = input2.proxyA;\n    var proxyB = input2.proxyB;\n    var xfA2 = input2.transformA;\n    var xfB2 = input2.transformB;\n    simplex.recycle();\n    simplex.readCache(cache2, proxyA, xfA2, proxyB, xfB2);\n    var vertices = simplex.m_v;\n    var k_maxIters = SettingsInternal.maxDistanceIterations;\n    var saveA = [];\n    var saveB = [];\n    var saveCount = 0;\n    var iter = 0;\n    while (iter < k_maxIters) {\n      saveCount = simplex.m_count;\n      for (var i = 0; i < saveCount; ++i) {\n        saveA[i] = vertices[i].indexA;\n        saveB[i] = vertices[i].indexB;\n      }\n      simplex.solve();\n      if (simplex.m_count === 3) {\n        break;\n      }\n      var d2 = simplex.getSearchDirection();\n      if (lengthSqrVec2(d2) < EPSILON * EPSILON) {\n        break;\n      }\n      var vertex = vertices[simplex.m_count];\n      vertex.indexA = proxyA.getSupport(derotVec2(temp$5, xfA2.q, scaleVec2(temp$5, -1, d2)));\n      transformVec2(vertex.wA, xfA2, proxyA.getVertex(vertex.indexA));\n      vertex.indexB = proxyB.getSupport(derotVec2(temp$5, xfB2.q, d2));\n      transformVec2(vertex.wB, xfB2, proxyB.getVertex(vertex.indexB));\n      subVec2(vertex.w, vertex.wB, vertex.wA);\n      ++iter;\n      ++stats.gjkIters;\n      var duplicate = false;\n      for (var i = 0; i < saveCount; ++i) {\n        if (vertex.indexA === saveA[i] && vertex.indexB === saveB[i]) {\n          duplicate = true;\n          break;\n        }\n      }\n      if (duplicate) {\n        break;\n      }\n      ++simplex.m_count;\n    }\n    stats.gjkMaxIters = math_max$4(stats.gjkMaxIters, iter);\n    simplex.getWitnessPoints(output2.pointA, output2.pointB);\n    output2.distance = distVec2(output2.pointA, output2.pointB);\n    output2.iterations = iter;\n    simplex.writeCache(cache2);\n    if (input2.useRadii) {\n      var rA2 = proxyA.m_radius;\n      var rB2 = proxyB.m_radius;\n      if (output2.distance > rA2 + rB2 && output2.distance > EPSILON) {\n        output2.distance -= rA2 + rB2;\n        subVec2(normal$4, output2.pointB, output2.pointA);\n        normalizeVec2(normal$4);\n        plusScaleVec2(output2.pointA, rA2, normal$4);\n        minusScaleVec2(output2.pointB, rB2, normal$4);\n      } else {\n        var p = subVec2(temp$5, output2.pointA, output2.pointB);\n        copyVec2(output2.pointA, p);\n        copyVec2(output2.pointB, p);\n        output2.distance = 0;\n      }\n    }\n  };\n  var DistanceProxy = (\n    /** @class */\n    function() {\n      function DistanceProxy2() {\n        this.m_vertices = [];\n        this.m_count = 0;\n        this.m_radius = 0;\n      }\n      DistanceProxy2.prototype.recycle = function() {\n        this.m_vertices.length = 0;\n        this.m_count = 0;\n        this.m_radius = 0;\n      };\n      DistanceProxy2.prototype.getVertexCount = function() {\n        return this.m_count;\n      };\n      DistanceProxy2.prototype.getVertex = function(index) {\n        return this.m_vertices[index];\n      };\n      DistanceProxy2.prototype.getSupport = function(d2) {\n        var bestIndex = -1;\n        var bestValue = -Infinity;\n        for (var i = 0; i < this.m_count; ++i) {\n          var value = dotVec2(this.m_vertices[i], d2);\n          if (value > bestValue) {\n            bestIndex = i;\n            bestValue = value;\n          }\n        }\n        return bestIndex;\n      };\n      DistanceProxy2.prototype.getSupportVertex = function(d2) {\n        return this.m_vertices[this.getSupport(d2)];\n      };\n      DistanceProxy2.prototype.set = function(shape, index) {\n        shape.computeDistanceProxy(this, index);\n      };\n      DistanceProxy2.prototype.setVertices = function(vertices, count, radius) {\n        this.m_vertices = vertices;\n        this.m_count = count;\n        this.m_radius = radius;\n      };\n      return DistanceProxy2;\n    }()\n  );\n  var SimplexVertex = (\n    /** @class */\n    function() {\n      function SimplexVertex2() {\n        this.wA = vec2(0, 0);\n        this.indexA = 0;\n        this.wB = vec2(0, 0);\n        this.indexB = 0;\n        this.w = vec2(0, 0);\n        this.a = 0;\n      }\n      SimplexVertex2.prototype.recycle = function() {\n        this.indexA = 0;\n        this.indexB = 0;\n        zeroVec2(this.wA);\n        zeroVec2(this.wB);\n        zeroVec2(this.w);\n        this.a = 0;\n      };\n      SimplexVertex2.prototype.set = function(v3) {\n        this.indexA = v3.indexA;\n        this.indexB = v3.indexB;\n        copyVec2(this.wA, v3.wA);\n        copyVec2(this.wB, v3.wB);\n        copyVec2(this.w, v3.w);\n        this.a = v3.a;\n      };\n      return SimplexVertex2;\n    }()\n  );\n  var searchDirection_reuse = vec2(0, 0);\n  var closestPoint_reuse = vec2(0, 0);\n  var Simplex = (\n    /** @class */\n    function() {\n      function Simplex2() {\n        this.m_v1 = new SimplexVertex();\n        this.m_v2 = new SimplexVertex();\n        this.m_v3 = new SimplexVertex();\n        this.m_v = [this.m_v1, this.m_v2, this.m_v3];\n      }\n      Simplex2.prototype.recycle = function() {\n        this.m_v1.recycle();\n        this.m_v2.recycle();\n        this.m_v3.recycle();\n        this.m_count = 0;\n      };\n      Simplex2.prototype.toString = function() {\n        if (this.m_count === 3) {\n          return [\n            \"+\" + this.m_count,\n            this.m_v1.a,\n            this.m_v1.wA.x,\n            this.m_v1.wA.y,\n            this.m_v1.wB.x,\n            this.m_v1.wB.y,\n            this.m_v2.a,\n            this.m_v2.wA.x,\n            this.m_v2.wA.y,\n            this.m_v2.wB.x,\n            this.m_v2.wB.y,\n            this.m_v3.a,\n            this.m_v3.wA.x,\n            this.m_v3.wA.y,\n            this.m_v3.wB.x,\n            this.m_v3.wB.y\n          ].toString();\n        } else if (this.m_count === 2) {\n          return [\n            \"+\" + this.m_count,\n            this.m_v1.a,\n            this.m_v1.wA.x,\n            this.m_v1.wA.y,\n            this.m_v1.wB.x,\n            this.m_v1.wB.y,\n            this.m_v2.a,\n            this.m_v2.wA.x,\n            this.m_v2.wA.y,\n            this.m_v2.wB.x,\n            this.m_v2.wB.y\n          ].toString();\n        } else if (this.m_count === 1) {\n          return [\n            \"+\" + this.m_count,\n            this.m_v1.a,\n            this.m_v1.wA.x,\n            this.m_v1.wA.y,\n            this.m_v1.wB.x,\n            this.m_v1.wB.y\n          ].toString();\n        } else {\n          return \"+\" + this.m_count;\n        }\n      };\n      Simplex2.prototype.readCache = function(cache2, proxyA, transformA, proxyB, transformB) {\n        this.m_count = cache2.count;\n        for (var i = 0; i < this.m_count; ++i) {\n          var v3 = this.m_v[i];\n          v3.indexA = cache2.indexA[i];\n          v3.indexB = cache2.indexB[i];\n          var wALocal = proxyA.getVertex(v3.indexA);\n          var wBLocal = proxyB.getVertex(v3.indexB);\n          transformVec2(v3.wA, transformA, wALocal);\n          transformVec2(v3.wB, transformB, wBLocal);\n          subVec2(v3.w, v3.wB, v3.wA);\n          v3.a = 0;\n        }\n        if (this.m_count > 1) {\n          var metric1 = cache2.metric;\n          var metric2 = this.getMetric();\n          if (metric2 < 0.5 * metric1 || 2 * metric1 < metric2 || metric2 < EPSILON) {\n            this.m_count = 0;\n          }\n        }\n        if (this.m_count === 0) {\n          var v3 = this.m_v[0];\n          v3.indexA = 0;\n          v3.indexB = 0;\n          var wALocal = proxyA.getVertex(0);\n          var wBLocal = proxyB.getVertex(0);\n          transformVec2(v3.wA, transformA, wALocal);\n          transformVec2(v3.wB, transformB, wBLocal);\n          subVec2(v3.w, v3.wB, v3.wA);\n          v3.a = 1;\n          this.m_count = 1;\n        }\n      };\n      Simplex2.prototype.writeCache = function(cache2) {\n        cache2.metric = this.getMetric();\n        cache2.count = this.m_count;\n        for (var i = 0; i < this.m_count; ++i) {\n          cache2.indexA[i] = this.m_v[i].indexA;\n          cache2.indexB[i] = this.m_v[i].indexB;\n        }\n      };\n      Simplex2.prototype.getSearchDirection = function() {\n        var v13 = this.m_v1;\n        var v22 = this.m_v2;\n        switch (this.m_count) {\n          case 1:\n            return setVec2(searchDirection_reuse, -v13.w.x, -v13.w.y);\n          case 2: {\n            subVec2(e12, v22.w, v13.w);\n            var sgn = -crossVec2Vec2(e12, v13.w);\n            if (sgn > 0) {\n              return setVec2(searchDirection_reuse, -e12.y, e12.x);\n            } else {\n              return setVec2(searchDirection_reuse, e12.y, -e12.x);\n            }\n          }\n          default:\n            return zeroVec2(searchDirection_reuse);\n        }\n      };\n      Simplex2.prototype.getClosestPoint = function() {\n        var v13 = this.m_v1;\n        var v22 = this.m_v2;\n        switch (this.m_count) {\n          case 0:\n            return zeroVec2(closestPoint_reuse);\n          case 1:\n            return copyVec2(closestPoint_reuse, v13.w);\n          case 2:\n            return combine2Vec2(closestPoint_reuse, v13.a, v13.w, v22.a, v22.w);\n          case 3:\n            return zeroVec2(closestPoint_reuse);\n          default:\n            return zeroVec2(closestPoint_reuse);\n        }\n      };\n      Simplex2.prototype.getWitnessPoints = function(pA2, pB2) {\n        var v13 = this.m_v1;\n        var v22 = this.m_v2;\n        var v3 = this.m_v3;\n        switch (this.m_count) {\n          case 0:\n            break;\n          case 1:\n            copyVec2(pA2, v13.wA);\n            copyVec2(pB2, v13.wB);\n            break;\n          case 2:\n            combine2Vec2(pA2, v13.a, v13.wA, v22.a, v22.wA);\n            combine2Vec2(pB2, v13.a, v13.wB, v22.a, v22.wB);\n            break;\n          case 3:\n            combine3Vec2(pA2, v13.a, v13.wA, v22.a, v22.wA, v3.a, v3.wA);\n            copyVec2(pB2, pA2);\n            break;\n        }\n      };\n      Simplex2.prototype.getMetric = function() {\n        switch (this.m_count) {\n          case 0:\n            return 0;\n          case 1:\n            return 0;\n          case 2:\n            return distVec2(this.m_v1.w, this.m_v2.w);\n          case 3:\n            return crossVec2Vec2(subVec2(temp1, this.m_v2.w, this.m_v1.w), subVec2(temp2, this.m_v3.w, this.m_v1.w));\n          default:\n            return 0;\n        }\n      };\n      Simplex2.prototype.solve = function() {\n        switch (this.m_count) {\n          case 1:\n            break;\n          case 2:\n            this.solve2();\n            break;\n          case 3:\n            this.solve3();\n            break;\n        }\n      };\n      Simplex2.prototype.solve2 = function() {\n        var w1 = this.m_v1.w;\n        var w2 = this.m_v2.w;\n        subVec2(e12, w2, w1);\n        var d12_2 = -dotVec2(w1, e12);\n        if (d12_2 <= 0) {\n          this.m_v1.a = 1;\n          this.m_count = 1;\n          return;\n        }\n        var d12_1 = dotVec2(w2, e12);\n        if (d12_1 <= 0) {\n          this.m_v2.a = 1;\n          this.m_count = 1;\n          this.m_v1.set(this.m_v2);\n          return;\n        }\n        var inv_d12 = 1 / (d12_1 + d12_2);\n        this.m_v1.a = d12_1 * inv_d12;\n        this.m_v2.a = d12_2 * inv_d12;\n        this.m_count = 2;\n      };\n      Simplex2.prototype.solve3 = function() {\n        var w1 = this.m_v1.w;\n        var w2 = this.m_v2.w;\n        var w3 = this.m_v3.w;\n        subVec2(e12, w2, w1);\n        var w1e12 = dotVec2(w1, e12);\n        var w2e12 = dotVec2(w2, e12);\n        var d12_1 = w2e12;\n        var d12_2 = -w1e12;\n        subVec2(e13, w3, w1);\n        var w1e13 = dotVec2(w1, e13);\n        var w3e13 = dotVec2(w3, e13);\n        var d13_1 = w3e13;\n        var d13_2 = -w1e13;\n        subVec2(e23, w3, w2);\n        var w2e23 = dotVec2(w2, e23);\n        var w3e23 = dotVec2(w3, e23);\n        var d23_1 = w3e23;\n        var d23_2 = -w2e23;\n        var n123 = crossVec2Vec2(e12, e13);\n        var d123_1 = n123 * crossVec2Vec2(w2, w3);\n        var d123_2 = n123 * crossVec2Vec2(w3, w1);\n        var d123_3 = n123 * crossVec2Vec2(w1, w2);\n        if (d12_2 <= 0 && d13_2 <= 0) {\n          this.m_v1.a = 1;\n          this.m_count = 1;\n          return;\n        }\n        if (d12_1 > 0 && d12_2 > 0 && d123_3 <= 0) {\n          var inv_d12 = 1 / (d12_1 + d12_2);\n          this.m_v1.a = d12_1 * inv_d12;\n          this.m_v2.a = d12_2 * inv_d12;\n          this.m_count = 2;\n          return;\n        }\n        if (d13_1 > 0 && d13_2 > 0 && d123_2 <= 0) {\n          var inv_d13 = 1 / (d13_1 + d13_2);\n          this.m_v1.a = d13_1 * inv_d13;\n          this.m_v3.a = d13_2 * inv_d13;\n          this.m_count = 2;\n          this.m_v2.set(this.m_v3);\n          return;\n        }\n        if (d12_1 <= 0 && d23_2 <= 0) {\n          this.m_v2.a = 1;\n          this.m_count = 1;\n          this.m_v1.set(this.m_v2);\n          return;\n        }\n        if (d13_1 <= 0 && d23_1 <= 0) {\n          this.m_v3.a = 1;\n          this.m_count = 1;\n          this.m_v1.set(this.m_v3);\n          return;\n        }\n        if (d23_1 > 0 && d23_2 > 0 && d123_1 <= 0) {\n          var inv_d23 = 1 / (d23_1 + d23_2);\n          this.m_v2.a = d23_1 * inv_d23;\n          this.m_v3.a = d23_2 * inv_d23;\n          this.m_count = 2;\n          this.m_v1.set(this.m_v3);\n          return;\n        }\n        var inv_d123 = 1 / (d123_1 + d123_2 + d123_3);\n        this.m_v1.a = d123_1 * inv_d123;\n        this.m_v2.a = d123_2 * inv_d123;\n        this.m_v3.a = d123_3 * inv_d123;\n        this.m_count = 3;\n      };\n      return Simplex2;\n    }()\n  );\n  var simplex = new Simplex();\n  var input$1 = new DistanceInput();\n  var cache$1 = new SimplexCache();\n  var output$1 = new DistanceOutput();\n  var testOverlap = function(shapeA, indexA, shapeB, indexB, xfA2, xfB2) {\n    input$1.recycle();\n    input$1.proxyA.set(shapeA, indexA);\n    input$1.proxyB.set(shapeB, indexB);\n    copyTransform(input$1.transformA, xfA2);\n    copyTransform(input$1.transformB, xfB2);\n    input$1.useRadii = true;\n    output$1.recycle();\n    cache$1.recycle();\n    Distance(output$1, cache$1, input$1);\n    return output$1.distance < 10 * EPSILON;\n  };\n  Distance.testOverlap = testOverlap;\n  Distance.Input = DistanceInput;\n  Distance.Output = DistanceOutput;\n  Distance.Proxy = DistanceProxy;\n  Distance.Cache = SimplexCache;\n  var ShapeCastInput = (\n    /** @class */\n    function() {\n      function ShapeCastInput2() {\n        this.proxyA = new DistanceProxy();\n        this.proxyB = new DistanceProxy();\n        this.transformA = Transform.identity();\n        this.transformB = Transform.identity();\n        this.translationB = Vec2.zero();\n      }\n      ShapeCastInput2.prototype.recycle = function() {\n        this.proxyA.recycle();\n        this.proxyB.recycle();\n        this.transformA.setIdentity();\n        this.transformB.setIdentity();\n        zeroVec2(this.translationB);\n      };\n      return ShapeCastInput2;\n    }()\n  );\n  var ShapeCastOutput = (\n    /** @class */\n    /* @__PURE__ */ function() {\n      function ShapeCastOutput2() {\n        this.point = Vec2.zero();\n        this.normal = Vec2.zero();\n        this.lambda = 1;\n        this.iterations = 0;\n      }\n      return ShapeCastOutput2;\n    }()\n  );\n  var ShapeCast = function(output2, input2) {\n    output2.iterations = 0;\n    output2.lambda = 1;\n    output2.normal.setZero();\n    output2.point.setZero();\n    var proxyA = input2.proxyA;\n    var proxyB = input2.proxyB;\n    var radiusA = math_max$4(proxyA.m_radius, SettingsInternal.polygonRadius);\n    var radiusB = math_max$4(proxyB.m_radius, SettingsInternal.polygonRadius);\n    var radius = radiusA + radiusB;\n    var xfA2 = input2.transformA;\n    var xfB2 = input2.transformB;\n    var r = input2.translationB;\n    var n2 = Vec2.zero();\n    var lambda = 0;\n    var simplex2 = new Simplex();\n    simplex2.m_count = 0;\n    var vertices = simplex2.m_v;\n    var indexA = proxyA.getSupport(Rot.mulTVec2(xfA2.q, Vec2.neg(r)));\n    var wA = Transform.mulVec2(xfA2, proxyA.getVertex(indexA));\n    var indexB = proxyB.getSupport(Rot.mulTVec2(xfB2.q, r));\n    var wB = Transform.mulVec2(xfB2, proxyB.getVertex(indexB));\n    var v3 = Vec2.sub(wA, wB);\n    var sigma = math_max$4(SettingsInternal.polygonRadius, radius - SettingsInternal.polygonRadius);\n    var tolerance = 0.5 * SettingsInternal.linearSlop;\n    var k_maxIters = 20;\n    var iter = 0;\n    while (iter < k_maxIters && v3.length() - sigma > tolerance) {\n      output2.iterations += 1;\n      indexA = proxyA.getSupport(Rot.mulTVec2(xfA2.q, Vec2.neg(v3)));\n      wA = Transform.mulVec2(xfA2, proxyA.getVertex(indexA));\n      indexB = proxyB.getSupport(Rot.mulTVec2(xfB2.q, v3));\n      wB = Transform.mulVec2(xfB2, proxyB.getVertex(indexB));\n      var p = Vec2.sub(wA, wB);\n      v3.normalize();\n      var vp = Vec2.dot(v3, p);\n      var vr = Vec2.dot(v3, r);\n      if (vp - sigma > lambda * vr) {\n        if (vr <= 0) {\n          return false;\n        }\n        lambda = (vp - sigma) / vr;\n        if (lambda > 1) {\n          return false;\n        }\n        n2.setMul(-1, v3);\n        simplex2.m_count = 0;\n      }\n      var vertex = vertices[simplex2.m_count];\n      vertex.indexA = indexB;\n      vertex.wA = Vec2.combine(1, wB, lambda, r);\n      vertex.indexB = indexA;\n      vertex.wB = wA;\n      vertex.w = Vec2.sub(vertex.wB, vertex.wA);\n      vertex.a = 1;\n      simplex2.m_count += 1;\n      switch (simplex2.m_count) {\n        case 1:\n          break;\n        case 2:\n          simplex2.solve2();\n          break;\n        case 3:\n          simplex2.solve3();\n          break;\n      }\n      if (simplex2.m_count == 3) {\n        return false;\n      }\n      v3.setVec2(simplex2.getClosestPoint());\n      ++iter;\n    }\n    if (iter == 0) {\n      return false;\n    }\n    var pointA2 = Vec2.zero();\n    var pointB2 = Vec2.zero();\n    simplex2.getWitnessPoints(pointB2, pointA2);\n    if (v3.lengthSquared() > 0) {\n      n2.setMul(-1, v3);\n      n2.normalize();\n    }\n    output2.point = Vec2.combine(1, pointA2, radiusA, n2);\n    output2.normal = n2;\n    output2.lambda = lambda;\n    output2.iterations = iter;\n    return true;\n  };\n  var math_abs$7 = Math.abs;\n  var math_max$3 = Math.max;\n  var TOIInput = (\n    /** @class */\n    function() {\n      function TOIInput2() {\n        this.proxyA = new DistanceProxy();\n        this.proxyB = new DistanceProxy();\n        this.sweepA = new Sweep();\n        this.sweepB = new Sweep();\n      }\n      TOIInput2.prototype.recycle = function() {\n        this.proxyA.recycle();\n        this.proxyB.recycle();\n        this.sweepA.recycle();\n        this.sweepB.recycle();\n        this.tMax = -1;\n      };\n      return TOIInput2;\n    }()\n  );\n  exports2.TOIOutputState = void 0;\n  (function(TOIOutputState2) {\n    TOIOutputState2[TOIOutputState2[\"e_unset\"] = -1] = \"e_unset\";\n    TOIOutputState2[TOIOutputState2[\"e_unknown\"] = 0] = \"e_unknown\";\n    TOIOutputState2[TOIOutputState2[\"e_failed\"] = 1] = \"e_failed\";\n    TOIOutputState2[TOIOutputState2[\"e_overlapped\"] = 2] = \"e_overlapped\";\n    TOIOutputState2[TOIOutputState2[\"e_touching\"] = 3] = \"e_touching\";\n    TOIOutputState2[TOIOutputState2[\"e_separated\"] = 4] = \"e_separated\";\n  })(exports2.TOIOutputState || (exports2.TOIOutputState = {}));\n  var TOIOutput = (\n    /** @class */\n    function() {\n      function TOIOutput2() {\n        this.state = exports2.TOIOutputState.e_unset;\n        this.t = -1;\n      }\n      TOIOutput2.prototype.recycle = function() {\n        this.state = exports2.TOIOutputState.e_unset;\n        this.t = -1;\n      };\n      return TOIOutput2;\n    }()\n  );\n  stats.toiTime = 0;\n  stats.toiMaxTime = 0;\n  stats.toiCalls = 0;\n  stats.toiIters = 0;\n  stats.toiMaxIters = 0;\n  stats.toiRootIters = 0;\n  stats.toiMaxRootIters = 0;\n  var distanceInput = new DistanceInput();\n  var distanceOutput = new DistanceOutput();\n  var cache = new SimplexCache();\n  var xfA$1 = transform(0, 0, 0);\n  var xfB$1 = transform(0, 0, 0);\n  var temp$4 = vec2(0, 0);\n  var pointA$2 = vec2(0, 0);\n  var pointB$2 = vec2(0, 0);\n  var normal$3 = vec2(0, 0);\n  var axisA = vec2(0, 0);\n  var axisB = vec2(0, 0);\n  var localPointA = vec2(0, 0);\n  var localPointB = vec2(0, 0);\n  var TimeOfImpact = function(output2, input2) {\n    var timer = Timer.now();\n    ++stats.toiCalls;\n    output2.state = exports2.TOIOutputState.e_unknown;\n    output2.t = input2.tMax;\n    var proxyA = input2.proxyA;\n    var proxyB = input2.proxyB;\n    var sweepA = input2.sweepA;\n    var sweepB = input2.sweepB;\n    sweepA.normalize();\n    sweepB.normalize();\n    var tMax = input2.tMax;\n    var totalRadius = proxyA.m_radius + proxyB.m_radius;\n    var target = math_max$3(SettingsInternal.linearSlop, totalRadius - 3 * SettingsInternal.linearSlop);\n    var tolerance = 0.25 * SettingsInternal.linearSlop;\n    var t1 = 0;\n    var k_maxIterations = SettingsInternal.maxTOIIterations;\n    var iter = 0;\n    cache.recycle();\n    distanceInput.proxyA.setVertices(proxyA.m_vertices, proxyA.m_count, proxyA.m_radius);\n    distanceInput.proxyB.setVertices(proxyB.m_vertices, proxyB.m_count, proxyB.m_radius);\n    distanceInput.useRadii = false;\n    while (true) {\n      sweepA.getTransform(xfA$1, t1);\n      sweepB.getTransform(xfB$1, t1);\n      copyTransform(distanceInput.transformA, xfA$1);\n      copyTransform(distanceInput.transformB, xfB$1);\n      Distance(distanceOutput, cache, distanceInput);\n      if (distanceOutput.distance <= 0) {\n        output2.state = exports2.TOIOutputState.e_overlapped;\n        output2.t = 0;\n        break;\n      }\n      if (distanceOutput.distance < target + tolerance) {\n        output2.state = exports2.TOIOutputState.e_touching;\n        output2.t = t1;\n        break;\n      }\n      separationFunction.initialize(cache, proxyA, sweepA, proxyB, sweepB, t1);\n      var done = false;\n      var t2 = tMax;\n      var pushBackIter = 0;\n      while (true) {\n        var s2 = separationFunction.findMinSeparation(t2);\n        if (s2 > target + tolerance) {\n          output2.state = exports2.TOIOutputState.e_separated;\n          output2.t = tMax;\n          done = true;\n          break;\n        }\n        if (s2 > target - tolerance) {\n          t1 = t2;\n          break;\n        }\n        var s1 = separationFunction.evaluate(t1);\n        if (s1 < target - tolerance) {\n          output2.state = exports2.TOIOutputState.e_failed;\n          output2.t = t1;\n          done = true;\n          break;\n        }\n        if (s1 <= target + tolerance) {\n          output2.state = exports2.TOIOutputState.e_touching;\n          output2.t = t1;\n          done = true;\n          break;\n        }\n        var rootIterCount = 0;\n        var a1 = t1;\n        var a2 = t2;\n        while (true) {\n          var t = void 0;\n          if (rootIterCount & 1) {\n            t = a1 + (target - s1) * (a2 - a1) / (s2 - s1);\n          } else {\n            t = 0.5 * (a1 + a2);\n          }\n          ++rootIterCount;\n          ++stats.toiRootIters;\n          var s3 = separationFunction.evaluate(t);\n          if (math_abs$7(s3 - target) < tolerance) {\n            t2 = t;\n            break;\n          }\n          if (s3 > target) {\n            a1 = t;\n            s1 = s3;\n          } else {\n            a2 = t;\n            s2 = s3;\n          }\n          if (rootIterCount === 50) {\n            break;\n          }\n        }\n        stats.toiMaxRootIters = math_max$3(stats.toiMaxRootIters, rootIterCount);\n        ++pushBackIter;\n        if (pushBackIter === SettingsInternal.maxPolygonVertices) {\n          break;\n        }\n      }\n      ++iter;\n      ++stats.toiIters;\n      if (done) {\n        break;\n      }\n      if (iter === k_maxIterations) {\n        output2.state = exports2.TOIOutputState.e_failed;\n        output2.t = t1;\n        break;\n      }\n    }\n    stats.toiMaxIters = math_max$3(stats.toiMaxIters, iter);\n    var time = Timer.diff(timer);\n    stats.toiMaxTime = math_max$3(stats.toiMaxTime, time);\n    stats.toiTime += time;\n    separationFunction.recycle();\n  };\n  var SeparationFunctionType;\n  (function(SeparationFunctionType2) {\n    SeparationFunctionType2[SeparationFunctionType2[\"e_unset\"] = -1] = \"e_unset\";\n    SeparationFunctionType2[SeparationFunctionType2[\"e_points\"] = 1] = \"e_points\";\n    SeparationFunctionType2[SeparationFunctionType2[\"e_faceA\"] = 2] = \"e_faceA\";\n    SeparationFunctionType2[SeparationFunctionType2[\"e_faceB\"] = 3] = \"e_faceB\";\n  })(SeparationFunctionType || (SeparationFunctionType = {}));\n  var SeparationFunction = (\n    /** @class */\n    function() {\n      function SeparationFunction2() {\n        this.m_proxyA = null;\n        this.m_proxyB = null;\n        this.m_sweepA = null;\n        this.m_sweepB = null;\n        this.m_type = SeparationFunctionType.e_unset;\n        this.m_localPoint = vec2(0, 0);\n        this.m_axis = vec2(0, 0);\n        this.indexA = -1;\n        this.indexB = -1;\n      }\n      SeparationFunction2.prototype.recycle = function() {\n        this.m_proxyA = null;\n        this.m_proxyB = null;\n        this.m_sweepA = null;\n        this.m_sweepB = null;\n        this.m_type = SeparationFunctionType.e_unset;\n        zeroVec2(this.m_localPoint);\n        zeroVec2(this.m_axis);\n        this.indexA = -1;\n        this.indexB = -1;\n      };\n      SeparationFunction2.prototype.initialize = function(cache2, proxyA, sweepA, proxyB, sweepB, t1) {\n        var count = cache2.count;\n        this.m_proxyA = proxyA;\n        this.m_proxyB = proxyB;\n        this.m_sweepA = sweepA;\n        this.m_sweepB = sweepB;\n        this.m_sweepA.getTransform(xfA$1, t1);\n        this.m_sweepB.getTransform(xfB$1, t1);\n        if (count === 1) {\n          this.m_type = SeparationFunctionType.e_points;\n          var localPointA_1 = this.m_proxyA.getVertex(cache2.indexA[0]);\n          var localPointB_1 = this.m_proxyB.getVertex(cache2.indexB[0]);\n          transformVec2(pointA$2, xfA$1, localPointA_1);\n          transformVec2(pointB$2, xfB$1, localPointB_1);\n          subVec2(this.m_axis, pointB$2, pointA$2);\n          var s2 = normalizeVec2Length(this.m_axis);\n          return s2;\n        } else if (cache2.indexA[0] === cache2.indexA[1]) {\n          this.m_type = SeparationFunctionType.e_faceB;\n          var localPointB1 = proxyB.getVertex(cache2.indexB[0]);\n          var localPointB2 = proxyB.getVertex(cache2.indexB[1]);\n          crossVec2Num(this.m_axis, subVec2(temp$4, localPointB2, localPointB1), 1);\n          normalizeVec2(this.m_axis);\n          rotVec2(normal$3, xfB$1.q, this.m_axis);\n          combine2Vec2(this.m_localPoint, 0.5, localPointB1, 0.5, localPointB2);\n          transformVec2(pointB$2, xfB$1, this.m_localPoint);\n          var localPointA_2 = proxyA.getVertex(cache2.indexA[0]);\n          var pointA_1 = Transform.mulVec2(xfA$1, localPointA_2);\n          var s2 = dotVec2(pointA_1, normal$3) - dotVec2(pointB$2, normal$3);\n          if (s2 < 0) {\n            negVec2(this.m_axis);\n            s2 = -s2;\n          }\n          return s2;\n        } else {\n          this.m_type = SeparationFunctionType.e_faceA;\n          var localPointA1 = this.m_proxyA.getVertex(cache2.indexA[0]);\n          var localPointA2 = this.m_proxyA.getVertex(cache2.indexA[1]);\n          crossVec2Num(this.m_axis, subVec2(temp$4, localPointA2, localPointA1), 1);\n          normalizeVec2(this.m_axis);\n          rotVec2(normal$3, xfA$1.q, this.m_axis);\n          combine2Vec2(this.m_localPoint, 0.5, localPointA1, 0.5, localPointA2);\n          transformVec2(pointA$2, xfA$1, this.m_localPoint);\n          var localPointB_2 = this.m_proxyB.getVertex(cache2.indexB[0]);\n          transformVec2(pointB$2, xfB$1, localPointB_2);\n          var s2 = dotVec2(pointB$2, normal$3) - dotVec2(pointA$2, normal$3);\n          if (s2 < 0) {\n            negVec2(this.m_axis);\n            s2 = -s2;\n          }\n          return s2;\n        }\n      };\n      SeparationFunction2.prototype.compute = function(find, t) {\n        this.m_sweepA.getTransform(xfA$1, t);\n        this.m_sweepB.getTransform(xfB$1, t);\n        switch (this.m_type) {\n          case SeparationFunctionType.e_points: {\n            if (find) {\n              derotVec2(axisA, xfA$1.q, this.m_axis);\n              derotVec2(axisB, xfB$1.q, scaleVec2(temp$4, -1, this.m_axis));\n              this.indexA = this.m_proxyA.getSupport(axisA);\n              this.indexB = this.m_proxyB.getSupport(axisB);\n            }\n            copyVec2(localPointA, this.m_proxyA.getVertex(this.indexA));\n            copyVec2(localPointB, this.m_proxyB.getVertex(this.indexB));\n            transformVec2(pointA$2, xfA$1, localPointA);\n            transformVec2(pointB$2, xfB$1, localPointB);\n            var sep = dotVec2(pointB$2, this.m_axis) - dotVec2(pointA$2, this.m_axis);\n            return sep;\n          }\n          case SeparationFunctionType.e_faceA: {\n            rotVec2(normal$3, xfA$1.q, this.m_axis);\n            transformVec2(pointA$2, xfA$1, this.m_localPoint);\n            if (find) {\n              derotVec2(axisB, xfB$1.q, scaleVec2(temp$4, -1, normal$3));\n              this.indexA = -1;\n              this.indexB = this.m_proxyB.getSupport(axisB);\n            }\n            copyVec2(localPointB, this.m_proxyB.getVertex(this.indexB));\n            transformVec2(pointB$2, xfB$1, localPointB);\n            var sep = dotVec2(pointB$2, normal$3) - dotVec2(pointA$2, normal$3);\n            return sep;\n          }\n          case SeparationFunctionType.e_faceB: {\n            rotVec2(normal$3, xfB$1.q, this.m_axis);\n            transformVec2(pointB$2, xfB$1, this.m_localPoint);\n            if (find) {\n              derotVec2(axisA, xfA$1.q, scaleVec2(temp$4, -1, normal$3));\n              this.indexB = -1;\n              this.indexA = this.m_proxyA.getSupport(axisA);\n            }\n            copyVec2(localPointA, this.m_proxyA.getVertex(this.indexA));\n            transformVec2(pointA$2, xfA$1, localPointA);\n            var sep = dotVec2(pointA$2, normal$3) - dotVec2(pointB$2, normal$3);\n            return sep;\n          }\n          default:\n            if (find) {\n              this.indexA = -1;\n              this.indexB = -1;\n            }\n            return 0;\n        }\n      };\n      SeparationFunction2.prototype.findMinSeparation = function(t) {\n        return this.compute(true, t);\n      };\n      SeparationFunction2.prototype.evaluate = function(t) {\n        return this.compute(false, t);\n      };\n      return SeparationFunction2;\n    }()\n  );\n  var separationFunction = new SeparationFunction();\n  TimeOfImpact.Input = TOIInput;\n  TimeOfImpact.Output = TOIOutput;\n  var math_abs$6 = Math.abs;\n  var math_sqrt$3 = Math.sqrt;\n  var math_min$5 = Math.min;\n  var TimeStep = (\n    /** @class */\n    function() {\n      function TimeStep2() {\n        this.dt = 0;\n        this.inv_dt = 0;\n        this.velocityIterations = 0;\n        this.positionIterations = 0;\n        this.warmStarting = false;\n        this.blockSolve = true;\n        this.inv_dt0 = 0;\n        this.dtRatio = 1;\n      }\n      TimeStep2.prototype.reset = function(dt) {\n        if (this.dt > 0) {\n          this.inv_dt0 = this.inv_dt;\n        }\n        this.dt = dt;\n        this.inv_dt = dt == 0 ? 0 : 1 / dt;\n        this.dtRatio = dt * this.inv_dt0;\n      };\n      return TimeStep2;\n    }()\n  );\n  var s_subStep = new TimeStep();\n  var c = vec2(0, 0);\n  var v = vec2(0, 0);\n  var translation = vec2(0, 0);\n  var input = new TOIInput();\n  var output = new TOIOutput();\n  var backup = new Sweep();\n  var backup1 = new Sweep();\n  var backup2 = new Sweep();\n  var ContactImpulse = (\n    /** @class */\n    function() {\n      function ContactImpulse2(contact) {\n        this.contact = contact;\n        this.normals = [];\n        this.tangents = [];\n      }\n      ContactImpulse2.prototype.recycle = function() {\n        this.normals.length = 0;\n        this.tangents.length = 0;\n      };\n      Object.defineProperty(ContactImpulse2.prototype, \"normalImpulses\", {\n        get: function() {\n          var contact = this.contact;\n          var normals = this.normals;\n          normals.length = 0;\n          for (var p = 0; p < contact.v_points.length; ++p) {\n            normals.push(contact.v_points[p].normalImpulse);\n          }\n          return normals;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      Object.defineProperty(ContactImpulse2.prototype, \"tangentImpulses\", {\n        get: function() {\n          var contact = this.contact;\n          var tangents = this.tangents;\n          tangents.length = 0;\n          for (var p = 0; p < contact.v_points.length; ++p) {\n            tangents.push(contact.v_points[p].tangentImpulse);\n          }\n          return tangents;\n        },\n        enumerable: false,\n        configurable: true\n      });\n      return ContactImpulse2;\n    }()\n  );\n  var Solver = (\n    /** @class */\n    function() {\n      function Solver2(world) {\n        this.m_world = world;\n        this.m_stack = [];\n        this.m_bodies = [];\n        this.m_contacts = [];\n        this.m_joints = [];\n      }\n      Solver2.prototype.clear = function() {\n        this.m_stack.length = 0;\n        this.m_bodies.length = 0;\n        this.m_contacts.length = 0;\n        this.m_joints.length = 0;\n      };\n      Solver2.prototype.addBody = function(body) {\n        this.m_bodies.push(body);\n      };\n      Solver2.prototype.addContact = function(contact) {\n        this.m_contacts.push(contact);\n      };\n      Solver2.prototype.addJoint = function(joint) {\n        this.m_joints.push(joint);\n      };\n      Solver2.prototype.solveWorld = function(step) {\n        var world = this.m_world;\n        for (var b2 = world.m_bodyList; b2; b2 = b2.m_next) {\n          b2.m_islandFlag = false;\n        }\n        for (var c_1 = world.m_contactList; c_1; c_1 = c_1.m_next) {\n          c_1.m_islandFlag = false;\n        }\n        for (var j = world.m_jointList; j; j = j.m_next) {\n          j.m_islandFlag = false;\n        }\n        var stack = this.m_stack;\n        for (var seed = world.m_bodyList; seed; seed = seed.m_next) {\n          if (seed.m_islandFlag) {\n            continue;\n          }\n          if (seed.isAwake() == false || seed.isActive() == false) {\n            continue;\n          }\n          if (seed.isStatic()) {\n            continue;\n          }\n          this.clear();\n          stack.push(seed);\n          seed.m_islandFlag = true;\n          while (stack.length > 0) {\n            var b2 = stack.pop();\n            this.addBody(b2);\n            b2.m_awakeFlag = true;\n            if (b2.isStatic()) {\n              continue;\n            }\n            for (var ce = b2.m_contactList; ce; ce = ce.next) {\n              var contact = ce.contact;\n              if (contact.m_islandFlag) {\n                continue;\n              }\n              if (contact.isEnabled() == false || contact.isTouching() == false) {\n                continue;\n              }\n              var sensorA = contact.m_fixtureA.m_isSensor;\n              var sensorB = contact.m_fixtureB.m_isSensor;\n              if (sensorA || sensorB) {\n                continue;\n              }\n              this.addContact(contact);\n              contact.m_islandFlag = true;\n              var other = ce.other;\n              if (other.m_islandFlag) {\n                continue;\n              }\n              stack.push(other);\n              other.m_islandFlag = true;\n            }\n            for (var je = b2.m_jointList; je; je = je.next) {\n              if (je.joint.m_islandFlag == true) {\n                continue;\n              }\n              var other = je.other;\n              if (other.isActive() == false) {\n                continue;\n              }\n              this.addJoint(je.joint);\n              je.joint.m_islandFlag = true;\n              if (other.m_islandFlag) {\n                continue;\n              }\n              stack.push(other);\n              other.m_islandFlag = true;\n            }\n          }\n          this.solveIsland(step);\n          for (var i = 0; i < this.m_bodies.length; ++i) {\n            var b2 = this.m_bodies[i];\n            if (b2.isStatic()) {\n              b2.m_islandFlag = false;\n            }\n          }\n        }\n      };\n      Solver2.prototype.solveIsland = function(step) {\n        var world = this.m_world;\n        var gravity = world.m_gravity;\n        var allowSleep = world.m_allowSleep;\n        var h = step.dt;\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n          var body = this.m_bodies[i];\n          copyVec2(c, body.m_sweep.c);\n          var a2 = body.m_sweep.a;\n          copyVec2(v, body.m_linearVelocity);\n          var w = body.m_angularVelocity;\n          copyVec2(body.m_sweep.c0, body.m_sweep.c);\n          body.m_sweep.a0 = body.m_sweep.a;\n          if (body.isDynamic()) {\n            plusScaleVec2(v, h * body.m_gravityScale, gravity);\n            plusScaleVec2(v, h * body.m_invMass, body.m_force);\n            w += h * body.m_invI * body.m_torque;\n            scaleVec2(v, 1 / (1 + h * body.m_linearDamping), v);\n            w *= 1 / (1 + h * body.m_angularDamping);\n          }\n          copyVec2(body.c_position.c, c);\n          body.c_position.a = a2;\n          copyVec2(body.c_velocity.v, v);\n          body.c_velocity.w = w;\n        }\n        for (var i = 0; i < this.m_contacts.length; ++i) {\n          var contact = this.m_contacts[i];\n          contact.initConstraint(step);\n        }\n        for (var i = 0; i < this.m_contacts.length; ++i) {\n          var contact = this.m_contacts[i];\n          contact.initVelocityConstraint(step);\n        }\n        if (step.warmStarting) {\n          for (var i = 0; i < this.m_contacts.length; ++i) {\n            var contact = this.m_contacts[i];\n            contact.warmStartConstraint(step);\n          }\n        }\n        for (var i = 0; i < this.m_joints.length; ++i) {\n          var joint = this.m_joints[i];\n          joint.initVelocityConstraints(step);\n        }\n        for (var i = 0; i < step.velocityIterations; ++i) {\n          for (var j = 0; j < this.m_joints.length; ++j) {\n            var joint = this.m_joints[j];\n            joint.solveVelocityConstraints(step);\n          }\n          for (var j = 0; j < this.m_contacts.length; ++j) {\n            var contact = this.m_contacts[j];\n            contact.solveVelocityConstraint(step);\n          }\n        }\n        for (var i = 0; i < this.m_contacts.length; ++i) {\n          var contact = this.m_contacts[i];\n          contact.storeConstraintImpulses(step);\n        }\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n          var body = this.m_bodies[i];\n          copyVec2(c, body.c_position.c);\n          var a2 = body.c_position.a;\n          copyVec2(v, body.c_velocity.v);\n          var w = body.c_velocity.w;\n          scaleVec2(translation, h, v);\n          var translationLengthSqr = lengthSqrVec2(translation);\n          if (translationLengthSqr > SettingsInternal.maxTranslationSquared) {\n            var ratio = SettingsInternal.maxTranslation / math_sqrt$3(translationLengthSqr);\n            mulVec2(v, ratio);\n          }\n          var rotation2 = h * w;\n          if (rotation2 * rotation2 > SettingsInternal.maxRotationSquared) {\n            var ratio = SettingsInternal.maxRotation / math_abs$6(rotation2);\n            w *= ratio;\n          }\n          plusScaleVec2(c, h, v);\n          a2 += h * w;\n          copyVec2(body.c_position.c, c);\n          body.c_position.a = a2;\n          copyVec2(body.c_velocity.v, v);\n          body.c_velocity.w = w;\n        }\n        var positionSolved = false;\n        for (var i = 0; i < step.positionIterations; ++i) {\n          var minSeparation = 0;\n          for (var j = 0; j < this.m_contacts.length; ++j) {\n            var contact = this.m_contacts[j];\n            var separation = contact.solvePositionConstraint(step);\n            minSeparation = math_min$5(minSeparation, separation);\n          }\n          var contactsOkay = minSeparation >= -3 * SettingsInternal.linearSlop;\n          var jointsOkay = true;\n          for (var j = 0; j < this.m_joints.length; ++j) {\n            var joint = this.m_joints[j];\n            var jointOkay = joint.solvePositionConstraints(step);\n            jointsOkay = jointsOkay && jointOkay;\n          }\n          if (contactsOkay && jointsOkay) {\n            positionSolved = true;\n            break;\n          }\n        }\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n          var body = this.m_bodies[i];\n          copyVec2(body.m_sweep.c, body.c_position.c);\n          body.m_sweep.a = body.c_position.a;\n          copyVec2(body.m_linearVelocity, body.c_velocity.v);\n          body.m_angularVelocity = body.c_velocity.w;\n          body.synchronizeTransform();\n        }\n        this.postSolveIsland();\n        if (allowSleep) {\n          var minSleepTime = Infinity;\n          var linTolSqr = SettingsInternal.linearSleepToleranceSqr;\n          var angTolSqr = SettingsInternal.angularSleepToleranceSqr;\n          for (var i = 0; i < this.m_bodies.length; ++i) {\n            var body = this.m_bodies[i];\n            if (body.isStatic()) {\n              continue;\n            }\n            if (body.m_autoSleepFlag == false || body.m_angularVelocity * body.m_angularVelocity > angTolSqr || lengthSqrVec2(body.m_linearVelocity) > linTolSqr) {\n              body.m_sleepTime = 0;\n              minSleepTime = 0;\n            } else {\n              body.m_sleepTime += h;\n              minSleepTime = math_min$5(minSleepTime, body.m_sleepTime);\n            }\n          }\n          if (minSleepTime >= SettingsInternal.timeToSleep && positionSolved) {\n            for (var i = 0; i < this.m_bodies.length; ++i) {\n              var body = this.m_bodies[i];\n              body.setAwake(false);\n            }\n          }\n        }\n      };\n      Solver2.prototype.solveWorldTOI = function(step) {\n        var world = this.m_world;\n        if (world.m_stepComplete) {\n          for (var b2 = world.m_bodyList; b2; b2 = b2.m_next) {\n            b2.m_islandFlag = false;\n            b2.m_sweep.alpha0 = 0;\n          }\n          for (var c_2 = world.m_contactList; c_2; c_2 = c_2.m_next) {\n            c_2.m_toiFlag = false;\n            c_2.m_islandFlag = false;\n            c_2.m_toiCount = 0;\n            c_2.m_toi = 1;\n          }\n        }\n        while (true) {\n          var minContact = null;\n          var minAlpha = 1;\n          for (var c_3 = world.m_contactList; c_3; c_3 = c_3.m_next) {\n            if (c_3.isEnabled() == false) {\n              continue;\n            }\n            if (c_3.m_toiCount > SettingsInternal.maxSubSteps) {\n              continue;\n            }\n            var alpha = 1;\n            if (c_3.m_toiFlag) {\n              alpha = c_3.m_toi;\n            } else {\n              var fA_1 = c_3.getFixtureA();\n              var fB_1 = c_3.getFixtureB();\n              if (fA_1.isSensor() || fB_1.isSensor()) {\n                continue;\n              }\n              var bA_1 = fA_1.getBody();\n              var bB_1 = fB_1.getBody();\n              var activeA = bA_1.isAwake() && !bA_1.isStatic();\n              var activeB = bB_1.isAwake() && !bB_1.isStatic();\n              if (activeA == false && activeB == false) {\n                continue;\n              }\n              var collideA = bA_1.isBullet() || !bA_1.isDynamic();\n              var collideB = bB_1.isBullet() || !bB_1.isDynamic();\n              if (collideA == false && collideB == false) {\n                continue;\n              }\n              var alpha0 = bA_1.m_sweep.alpha0;\n              if (bA_1.m_sweep.alpha0 < bB_1.m_sweep.alpha0) {\n                alpha0 = bB_1.m_sweep.alpha0;\n                bA_1.m_sweep.advance(alpha0);\n              } else if (bB_1.m_sweep.alpha0 < bA_1.m_sweep.alpha0) {\n                alpha0 = bA_1.m_sweep.alpha0;\n                bB_1.m_sweep.advance(alpha0);\n              }\n              var indexA = c_3.getChildIndexA();\n              var indexB = c_3.getChildIndexB();\n              input.proxyA.set(fA_1.getShape(), indexA);\n              input.proxyB.set(fB_1.getShape(), indexB);\n              input.sweepA.set(bA_1.m_sweep);\n              input.sweepB.set(bB_1.m_sweep);\n              input.tMax = 1;\n              TimeOfImpact(output, input);\n              var beta = output.t;\n              if (output.state == exports2.TOIOutputState.e_touching) {\n                alpha = math_min$5(alpha0 + (1 - alpha0) * beta, 1);\n              } else {\n                alpha = 1;\n              }\n              c_3.m_toi = alpha;\n              c_3.m_toiFlag = true;\n            }\n            if (alpha < minAlpha) {\n              minContact = c_3;\n              minAlpha = alpha;\n            }\n          }\n          if (minContact == null || 1 - 10 * EPSILON < minAlpha) {\n            world.m_stepComplete = true;\n            break;\n          }\n          var fA = minContact.getFixtureA();\n          var fB = minContact.getFixtureB();\n          var bA = fA.getBody();\n          var bB = fB.getBody();\n          backup1.set(bA.m_sweep);\n          backup2.set(bB.m_sweep);\n          bA.advance(minAlpha);\n          bB.advance(minAlpha);\n          minContact.update(world);\n          minContact.m_toiFlag = false;\n          ++minContact.m_toiCount;\n          if (minContact.isEnabled() == false || minContact.isTouching() == false) {\n            minContact.setEnabled(false);\n            bA.m_sweep.set(backup1);\n            bB.m_sweep.set(backup2);\n            bA.synchronizeTransform();\n            bB.synchronizeTransform();\n            continue;\n          }\n          bA.setAwake(true);\n          bB.setAwake(true);\n          this.clear();\n          this.addBody(bA);\n          this.addBody(bB);\n          this.addContact(minContact);\n          bA.m_islandFlag = true;\n          bB.m_islandFlag = true;\n          minContact.m_islandFlag = true;\n          var bodies = [bA, bB];\n          for (var i = 0; i < bodies.length; ++i) {\n            var body = bodies[i];\n            if (body.isDynamic()) {\n              for (var ce = body.m_contactList; ce; ce = ce.next) {\n                var contact = ce.contact;\n                if (contact.m_islandFlag) {\n                  continue;\n                }\n                var other = ce.other;\n                if (other.isDynamic() && !body.isBullet() && !other.isBullet()) {\n                  continue;\n                }\n                var sensorA = contact.m_fixtureA.m_isSensor;\n                var sensorB = contact.m_fixtureB.m_isSensor;\n                if (sensorA || sensorB) {\n                  continue;\n                }\n                backup.set(other.m_sweep);\n                if (other.m_islandFlag == false) {\n                  other.advance(minAlpha);\n                }\n                contact.update(world);\n                if (contact.isEnabled() == false || contact.isTouching() == false) {\n                  other.m_sweep.set(backup);\n                  other.synchronizeTransform();\n                  continue;\n                }\n                contact.m_islandFlag = true;\n                this.addContact(contact);\n                if (other.m_islandFlag) {\n                  continue;\n                }\n                other.m_islandFlag = true;\n                if (!other.isStatic()) {\n                  other.setAwake(true);\n                }\n                this.addBody(other);\n              }\n            }\n          }\n          s_subStep.reset((1 - minAlpha) * step.dt);\n          s_subStep.dtRatio = 1;\n          s_subStep.positionIterations = 20;\n          s_subStep.velocityIterations = step.velocityIterations;\n          s_subStep.warmStarting = false;\n          this.solveIslandTOI(s_subStep, bA, bB);\n          for (var i = 0; i < this.m_bodies.length; ++i) {\n            var body = this.m_bodies[i];\n            body.m_islandFlag = false;\n            if (!body.isDynamic()) {\n              continue;\n            }\n            body.synchronizeFixtures();\n            for (var ce = body.m_contactList; ce; ce = ce.next) {\n              ce.contact.m_toiFlag = false;\n              ce.contact.m_islandFlag = false;\n            }\n          }\n          world.findNewContacts();\n          if (world.m_subStepping) {\n            world.m_stepComplete = false;\n            break;\n          }\n        }\n      };\n      Solver2.prototype.solveIslandTOI = function(subStep, toiA, toiB) {\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n          var body = this.m_bodies[i];\n          copyVec2(body.c_position.c, body.m_sweep.c);\n          body.c_position.a = body.m_sweep.a;\n          copyVec2(body.c_velocity.v, body.m_linearVelocity);\n          body.c_velocity.w = body.m_angularVelocity;\n        }\n        for (var i = 0; i < this.m_contacts.length; ++i) {\n          var contact = this.m_contacts[i];\n          contact.initConstraint(subStep);\n        }\n        for (var i = 0; i < subStep.positionIterations; ++i) {\n          var minSeparation = 0;\n          for (var j = 0; j < this.m_contacts.length; ++j) {\n            var contact = this.m_contacts[j];\n            var separation = contact.solvePositionConstraintTOI(subStep, toiA, toiB);\n            minSeparation = math_min$5(minSeparation, separation);\n          }\n          var contactsOkay = minSeparation >= -1.5 * SettingsInternal.linearSlop;\n          if (contactsOkay) {\n            break;\n          }\n        }\n        var i;\n        copyVec2(toiA.m_sweep.c0, toiA.c_position.c);\n        toiA.m_sweep.a0 = toiA.c_position.a;\n        copyVec2(toiB.m_sweep.c0, toiB.c_position.c);\n        toiB.m_sweep.a0 = toiB.c_position.a;\n        for (var i = 0; i < this.m_contacts.length; ++i) {\n          var contact = this.m_contacts[i];\n          contact.initVelocityConstraint(subStep);\n        }\n        for (var i = 0; i < subStep.velocityIterations; ++i) {\n          for (var j = 0; j < this.m_contacts.length; ++j) {\n            var contact = this.m_contacts[j];\n            contact.solveVelocityConstraint(subStep);\n          }\n        }\n        var h = subStep.dt;\n        for (var i = 0; i < this.m_bodies.length; ++i) {\n          var body = this.m_bodies[i];\n          copyVec2(c, body.c_position.c);\n          var a2 = body.c_position.a;\n          copyVec2(v, body.c_velocity.v);\n          var w = body.c_velocity.w;\n          scaleVec2(translation, h, v);\n          var translationLengthSqr = lengthSqrVec2(translation);\n          if (translationLengthSqr > SettingsInternal.maxTranslationSquared) {\n            var ratio = SettingsInternal.maxTranslation / math_sqrt$3(translationLengthSqr);\n            mulVec2(v, ratio);\n          }\n          var rotation2 = h * w;\n          if (rotation2 * rotation2 > SettingsInternal.maxRotationSquared) {\n            var ratio = SettingsInternal.maxRotation / math_abs$6(rotation2);\n            w *= ratio;\n          }\n          plusScaleVec2(c, h, v);\n          a2 += h * w;\n          copyVec2(body.c_position.c, c);\n          body.c_position.a = a2;\n          copyVec2(body.c_velocity.v, v);\n          body.c_velocity.w = w;\n          copyVec2(body.m_sweep.c, c);\n          body.m_sweep.a = a2;\n          copyVec2(body.m_linearVelocity, v);\n          body.m_angularVelocity = w;\n          body.synchronizeTransform();\n        }\n        this.postSolveIsland();\n      };\n      Solver2.prototype.postSolveIsland = function() {\n        for (var c_5 = 0; c_5 < this.m_contacts.length; ++c_5) {\n          var contact = this.m_contacts[c_5];\n          this.m_world.postSolve(contact, contact.m_impulse);\n        }\n      };\n      return Solver2;\n    }()\n  );\n  Solver.TimeStep = TimeStep;\n  var Mat22 = (\n    /** @class */\n    function() {\n      function Mat222(a2, b2, c2, d2) {\n        if (typeof a2 === \"object\" && a2 !== null) {\n          this.ex = Vec2.clone(a2);\n          this.ey = Vec2.clone(b2);\n        } else if (typeof a2 === \"number\") {\n          this.ex = Vec2.neo(a2, c2);\n          this.ey = Vec2.neo(b2, d2);\n        } else {\n          this.ex = Vec2.zero();\n          this.ey = Vec2.zero();\n        }\n      }\n      Mat222.prototype.toString = function() {\n        return JSON.stringify(this);\n      };\n      Mat222.isValid = function(obj) {\n        if (obj === null || typeof obj === \"undefined\") {\n          return false;\n        }\n        return Vec2.isValid(obj.ex) && Vec2.isValid(obj.ey);\n      };\n      Mat222.assert = function(o) {\n      };\n      Mat222.prototype.set = function(a2, b2, c2, d2) {\n        if (typeof a2 === \"number\" && typeof b2 === \"number\" && typeof c2 === \"number\" && typeof d2 === \"number\") {\n          this.ex.setNum(a2, c2);\n          this.ey.setNum(b2, d2);\n        } else if (typeof a2 === \"object\" && typeof b2 === \"object\") {\n          this.ex.setVec2(a2);\n          this.ey.setVec2(b2);\n        } else if (typeof a2 === \"object\") {\n          this.ex.setVec2(a2.ex);\n          this.ey.setVec2(a2.ey);\n        } else ;\n      };\n      Mat222.prototype.setIdentity = function() {\n        this.ex.x = 1;\n        this.ey.x = 0;\n        this.ex.y = 0;\n        this.ey.y = 1;\n      };\n      Mat222.prototype.setZero = function() {\n        this.ex.x = 0;\n        this.ey.x = 0;\n        this.ex.y = 0;\n        this.ey.y = 0;\n      };\n      Mat222.prototype.getInverse = function() {\n        var a2 = this.ex.x;\n        var b2 = this.ey.x;\n        var c2 = this.ex.y;\n        var d2 = this.ey.y;\n        var det = a2 * d2 - b2 * c2;\n        if (det !== 0) {\n          det = 1 / det;\n        }\n        var imx = new Mat222();\n        imx.ex.x = det * d2;\n        imx.ey.x = -det * b2;\n        imx.ex.y = -det * c2;\n        imx.ey.y = det * a2;\n        return imx;\n      };\n      Mat222.prototype.solve = function(v3) {\n        var a2 = this.ex.x;\n        var b2 = this.ey.x;\n        var c2 = this.ex.y;\n        var d2 = this.ey.y;\n        var det = a2 * d2 - b2 * c2;\n        if (det !== 0) {\n          det = 1 / det;\n        }\n        var w = Vec2.zero();\n        w.x = det * (d2 * v3.x - b2 * v3.y);\n        w.y = det * (a2 * v3.y - c2 * v3.x);\n        return w;\n      };\n      Mat222.mul = function(mx, v3) {\n        if (v3 && \"x\" in v3 && \"y\" in v3) {\n          var x2 = mx.ex.x * v3.x + mx.ey.x * v3.y;\n          var y = mx.ex.y * v3.x + mx.ey.y * v3.y;\n          return Vec2.neo(x2, y);\n        } else if (v3 && \"ex\" in v3 && \"ey\" in v3) {\n          var a2 = mx.ex.x * v3.ex.x + mx.ey.x * v3.ex.y;\n          var b2 = mx.ex.x * v3.ey.x + mx.ey.x * v3.ey.y;\n          var c2 = mx.ex.y * v3.ex.x + mx.ey.y * v3.ex.y;\n          var d2 = mx.ex.y * v3.ey.x + mx.ey.y * v3.ey.y;\n          return new Mat222(a2, b2, c2, d2);\n        }\n      };\n      Mat222.mulVec2 = function(mx, v3) {\n        var x2 = mx.ex.x * v3.x + mx.ey.x * v3.y;\n        var y = mx.ex.y * v3.x + mx.ey.y * v3.y;\n        return Vec2.neo(x2, y);\n      };\n      Mat222.mulMat22 = function(mx, v3) {\n        var a2 = mx.ex.x * v3.ex.x + mx.ey.x * v3.ex.y;\n        var b2 = mx.ex.x * v3.ey.x + mx.ey.x * v3.ey.y;\n        var c2 = mx.ex.y * v3.ex.x + mx.ey.y * v3.ex.y;\n        var d2 = mx.ex.y * v3.ey.x + mx.ey.y * v3.ey.y;\n        return new Mat222(a2, b2, c2, d2);\n      };\n      Mat222.mulT = function(mx, v3) {\n        if (v3 && \"x\" in v3 && \"y\" in v3) {\n          return Vec2.neo(Vec2.dot(v3, mx.ex), Vec2.dot(v3, mx.ey));\n        } else if (v3 && \"ex\" in v3 && \"ey\" in v3) {\n          var c1 = Vec2.neo(Vec2.dot(mx.ex, v3.ex), Vec2.dot(mx.ey, v3.ex));\n          var c2 = Vec2.neo(Vec2.dot(mx.ex, v3.ey), Vec2.dot(mx.ey, v3.ey));\n          return new Mat222(c1, c2);\n        }\n      };\n      Mat222.mulTVec2 = function(mx, v3) {\n        return Vec2.neo(Vec2.dot(v3, mx.ex), Vec2.dot(v3, mx.ey));\n      };\n      Mat222.mulTMat22 = function(mx, v3) {\n        var c1 = Vec2.neo(Vec2.dot(mx.ex, v3.ex), Vec2.dot(mx.ey, v3.ex));\n        var c2 = Vec2.neo(Vec2.dot(mx.ex, v3.ey), Vec2.dot(mx.ey, v3.ey));\n        return new Mat222(c1, c2);\n      };\n      Mat222.abs = function(mx) {\n        return new Mat222(Vec2.abs(mx.ex), Vec2.abs(mx.ey));\n      };\n      Mat222.add = function(mx1, mx2) {\n        return new Mat222(Vec2.add(mx1.ex, mx2.ex), Vec2.add(mx1.ey, mx2.ey));\n      };\n      return Mat222;\n    }()\n  );\n  var math_sqrt$2 = Math.sqrt;\n  var pointA$1 = vec2(0, 0);\n  var pointB$1 = vec2(0, 0);\n  var temp$3 = vec2(0, 0);\n  var cA$1 = vec2(0, 0);\n  var cB$1 = vec2(0, 0);\n  var dist = vec2(0, 0);\n  var planePoint$2 = vec2(0, 0);\n  var clipPoint$1 = vec2(0, 0);\n  exports2.ManifoldType = void 0;\n  (function(ManifoldType2) {\n    ManifoldType2[ManifoldType2[\"e_unset\"] = -1] = \"e_unset\";\n    ManifoldType2[ManifoldType2[\"e_circles\"] = 0] = \"e_circles\";\n    ManifoldType2[ManifoldType2[\"e_faceA\"] = 1] = \"e_faceA\";\n    ManifoldType2[ManifoldType2[\"e_faceB\"] = 2] = \"e_faceB\";\n  })(exports2.ManifoldType || (exports2.ManifoldType = {}));\n  exports2.ContactFeatureType = void 0;\n  (function(ContactFeatureType2) {\n    ContactFeatureType2[ContactFeatureType2[\"e_unset\"] = -1] = \"e_unset\";\n    ContactFeatureType2[ContactFeatureType2[\"e_vertex\"] = 0] = \"e_vertex\";\n    ContactFeatureType2[ContactFeatureType2[\"e_face\"] = 1] = \"e_face\";\n  })(exports2.ContactFeatureType || (exports2.ContactFeatureType = {}));\n  exports2.PointState = void 0;\n  (function(PointState2) {\n    PointState2[PointState2[\"nullState\"] = 0] = \"nullState\";\n    PointState2[PointState2[\"addState\"] = 1] = \"addState\";\n    PointState2[PointState2[\"persistState\"] = 2] = \"persistState\";\n    PointState2[PointState2[\"removeState\"] = 3] = \"removeState\";\n  })(exports2.PointState || (exports2.PointState = {}));\n  var ClipVertex = (\n    /** @class */\n    function() {\n      function ClipVertex2() {\n        this.v = vec2(0, 0);\n        this.id = new ContactID();\n      }\n      ClipVertex2.prototype.set = function(o) {\n        copyVec2(this.v, o.v);\n        this.id.set(o.id);\n      };\n      ClipVertex2.prototype.recycle = function() {\n        zeroVec2(this.v);\n        this.id.recycle();\n      };\n      return ClipVertex2;\n    }()\n  );\n  var Manifold = (\n    /** @class */\n    function() {\n      function Manifold2() {\n        this.localNormal = vec2(0, 0);\n        this.localPoint = vec2(0, 0);\n        this.points = [new ManifoldPoint(), new ManifoldPoint()];\n        this.pointCount = 0;\n      }\n      Manifold2.prototype.set = function(that) {\n        this.type = that.type;\n        copyVec2(this.localNormal, that.localNormal);\n        copyVec2(this.localPoint, that.localPoint);\n        this.pointCount = that.pointCount;\n        this.points[0].set(that.points[0]);\n        this.points[1].set(that.points[1]);\n      };\n      Manifold2.prototype.recycle = function() {\n        this.type = exports2.ManifoldType.e_unset;\n        zeroVec2(this.localNormal);\n        zeroVec2(this.localPoint);\n        this.pointCount = 0;\n        this.points[0].recycle();\n        this.points[1].recycle();\n      };\n      Manifold2.prototype.getWorldManifold = function(wm, xfA2, radiusA, xfB2, radiusB) {\n        if (this.pointCount == 0) {\n          return wm;\n        }\n        wm = wm || new WorldManifold();\n        wm.pointCount = this.pointCount;\n        var normal3 = wm.normal;\n        var points = wm.points;\n        var separations = wm.separations;\n        switch (this.type) {\n          case exports2.ManifoldType.e_circles: {\n            setVec2(normal3, 1, 0);\n            var manifoldPoint = this.points[0];\n            transformVec2(pointA$1, xfA2, this.localPoint);\n            transformVec2(pointB$1, xfB2, manifoldPoint.localPoint);\n            subVec2(dist, pointB$1, pointA$1);\n            var lengthSqr = lengthSqrVec2(dist);\n            if (lengthSqr > EPSILON * EPSILON) {\n              var length_1 = math_sqrt$2(lengthSqr);\n              scaleVec2(normal3, 1 / length_1, dist);\n            }\n            combine2Vec2(cA$1, 1, pointA$1, radiusA, normal3);\n            combine2Vec2(cB$1, 1, pointB$1, -radiusB, normal3);\n            combine2Vec2(points[0], 0.5, cA$1, 0.5, cB$1);\n            separations[0] = dotVec2(subVec2(temp$3, cB$1, cA$1), normal3);\n            break;\n          }\n          case exports2.ManifoldType.e_faceA: {\n            rotVec2(normal3, xfA2.q, this.localNormal);\n            transformVec2(planePoint$2, xfA2, this.localPoint);\n            for (var i = 0; i < this.pointCount; ++i) {\n              var manifoldPoint = this.points[i];\n              transformVec2(clipPoint$1, xfB2, manifoldPoint.localPoint);\n              combine2Vec2(cA$1, 1, clipPoint$1, radiusA - dotVec2(subVec2(temp$3, clipPoint$1, planePoint$2), normal3), normal3);\n              combine2Vec2(cB$1, 1, clipPoint$1, -radiusB, normal3);\n              combine2Vec2(points[i], 0.5, cA$1, 0.5, cB$1);\n              separations[i] = dotVec2(subVec2(temp$3, cB$1, cA$1), normal3);\n            }\n            break;\n          }\n          case exports2.ManifoldType.e_faceB: {\n            rotVec2(normal3, xfB2.q, this.localNormal);\n            transformVec2(planePoint$2, xfB2, this.localPoint);\n            for (var i = 0; i < this.pointCount; ++i) {\n              var manifoldPoint = this.points[i];\n              transformVec2(clipPoint$1, xfA2, manifoldPoint.localPoint);\n              combine2Vec2(cB$1, 1, clipPoint$1, radiusB - dotVec2(subVec2(temp$3, clipPoint$1, planePoint$2), normal3), normal3);\n              combine2Vec2(cA$1, 1, clipPoint$1, -radiusA, normal3);\n              combine2Vec2(points[i], 0.5, cA$1, 0.5, cB$1);\n              separations[i] = dotVec2(subVec2(temp$3, cA$1, cB$1), normal3);\n            }\n            negVec2(normal3);\n            break;\n          }\n        }\n        return wm;\n      };\n      Manifold2.clipSegmentToLine = clipSegmentToLine;\n      Manifold2.ClipVertex = ClipVertex;\n      Manifold2.getPointStates = getPointStates;\n      Manifold2.PointState = exports2.PointState;\n      return Manifold2;\n    }()\n  );\n  var ManifoldPoint = (\n    /** @class */\n    function() {\n      function ManifoldPoint2() {\n        this.localPoint = vec2(0, 0);\n        this.normalImpulse = 0;\n        this.tangentImpulse = 0;\n        this.id = new ContactID();\n      }\n      ManifoldPoint2.prototype.set = function(that) {\n        copyVec2(this.localPoint, that.localPoint);\n        this.normalImpulse = that.normalImpulse;\n        this.tangentImpulse = that.tangentImpulse;\n        this.id.set(that.id);\n      };\n      ManifoldPoint2.prototype.recycle = function() {\n        zeroVec2(this.localPoint);\n        this.normalImpulse = 0;\n        this.tangentImpulse = 0;\n        this.id.recycle();\n      };\n      return ManifoldPoint2;\n    }()\n  );\n  var ContactID = (\n    /** @class */\n    function() {\n      function ContactID2() {\n        this.key = -1;\n        this.indexA = -1;\n        this.indexB = -1;\n        this.typeA = exports2.ContactFeatureType.e_unset;\n        this.typeB = exports2.ContactFeatureType.e_unset;\n      }\n      ContactID2.prototype.setFeatures = function(indexA, typeA, indexB, typeB) {\n        this.indexA = indexA;\n        this.indexB = indexB;\n        this.typeA = typeA;\n        this.typeB = typeB;\n        this.key = this.indexA + this.indexB * 4 + this.typeA * 16 + this.typeB * 64;\n      };\n      ContactID2.prototype.set = function(that) {\n        this.indexA = that.indexA;\n        this.indexB = that.indexB;\n        this.typeA = that.typeA;\n        this.typeB = that.typeB;\n        this.key = this.indexA + this.indexB * 4 + this.typeA * 16 + this.typeB * 64;\n      };\n      ContactID2.prototype.swapFeatures = function() {\n        var indexA = this.indexA;\n        var indexB = this.indexB;\n        var typeA = this.typeA;\n        var typeB = this.typeB;\n        this.indexA = indexB;\n        this.indexB = indexA;\n        this.typeA = typeB;\n        this.typeB = typeA;\n        this.key = this.indexA + this.indexB * 4 + this.typeA * 16 + this.typeB * 64;\n      };\n      ContactID2.prototype.recycle = function() {\n        this.indexA = 0;\n        this.indexB = 0;\n        this.typeA = exports2.ContactFeatureType.e_unset;\n        this.typeB = exports2.ContactFeatureType.e_unset;\n        this.key = -1;\n      };\n      return ContactID2;\n    }()\n  );\n  var WorldManifold = (\n    /** @class */\n    function() {\n      function WorldManifold2() {\n        this.normal = vec2(0, 0);\n        this.points = [vec2(0, 0), vec2(0, 0)];\n        this.separations = [0, 0];\n        this.pointCount = 0;\n      }\n      WorldManifold2.prototype.recycle = function() {\n        zeroVec2(this.normal);\n        zeroVec2(this.points[0]);\n        zeroVec2(this.points[1]);\n        this.separations[0] = 0;\n        this.separations[1] = 0;\n        this.pointCount = 0;\n      };\n      return WorldManifold2;\n    }()\n  );\n  function getPointStates(state1, state2, manifold1, manifold2) {\n    for (var i = 0; i < manifold1.pointCount; ++i) {\n      var id = manifold1.points[i].id;\n      state1[i] = exports2.PointState.removeState;\n      for (var j = 0; j < manifold2.pointCount; ++j) {\n        if (manifold2.points[j].id.key === id.key) {\n          state1[i] = exports2.PointState.persistState;\n          break;\n        }\n      }\n    }\n    for (var i = 0; i < manifold2.pointCount; ++i) {\n      var id = manifold2.points[i].id;\n      state2[i] = exports2.PointState.addState;\n      for (var j = 0; j < manifold1.pointCount; ++j) {\n        if (manifold1.points[j].id.key === id.key) {\n          state2[i] = exports2.PointState.persistState;\n          break;\n        }\n      }\n    }\n  }\n  function clipSegmentToLine(vOut, vIn, normal3, offset, vertexIndexA) {\n    var numOut = 0;\n    var distance0 = dotVec2(normal3, vIn[0].v) - offset;\n    var distance1 = dotVec2(normal3, vIn[1].v) - offset;\n    if (distance0 <= 0)\n      vOut[numOut++].set(vIn[0]);\n    if (distance1 <= 0)\n      vOut[numOut++].set(vIn[1]);\n    if (distance0 * distance1 < 0) {\n      var interp = distance0 / (distance0 - distance1);\n      combine2Vec2(vOut[numOut].v, 1 - interp, vIn[0].v, interp, vIn[1].v);\n      vOut[numOut].id.setFeatures(vertexIndexA, exports2.ContactFeatureType.e_vertex, vIn[0].id.indexB, exports2.ContactFeatureType.e_face);\n      ++numOut;\n    }\n    return numOut;\n  }\n  var math_sqrt$1 = Math.sqrt;\n  var math_max$2 = Math.max;\n  var math_min$4 = Math.min;\n  var contactPool = new Pool({\n    create: function() {\n      return new Contact();\n    },\n    release: function(contact) {\n      contact.recycle();\n    }\n  });\n  var oldManifold = new Manifold();\n  var worldManifold = new WorldManifold();\n  var ContactEdge = (\n    /** @class */\n    function() {\n      function ContactEdge2(contact) {\n        this.prev = null;\n        this.next = null;\n        this.other = null;\n        this.contact = contact;\n      }\n      ContactEdge2.prototype.recycle = function() {\n        this.prev = null;\n        this.next = null;\n        this.other = null;\n      };\n      return ContactEdge2;\n    }()\n  );\n  function mixFriction(friction1, friction2) {\n    return math_sqrt$1(friction1 * friction2);\n  }\n  function mixRestitution(restitution1, restitution2) {\n    return restitution1 > restitution2 ? restitution1 : restitution2;\n  }\n  var s_registers = [];\n  var VelocityConstraintPoint = (\n    /** @class */\n    function() {\n      function VelocityConstraintPoint2() {\n        this.rA = vec2(0, 0);\n        this.rB = vec2(0, 0);\n        this.normalImpulse = 0;\n        this.tangentImpulse = 0;\n        this.normalMass = 0;\n        this.tangentMass = 0;\n        this.velocityBias = 0;\n      }\n      VelocityConstraintPoint2.prototype.recycle = function() {\n        zeroVec2(this.rA);\n        zeroVec2(this.rB);\n        this.normalImpulse = 0;\n        this.tangentImpulse = 0;\n        this.normalMass = 0;\n        this.tangentMass = 0;\n        this.velocityBias = 0;\n      };\n      return VelocityConstraintPoint2;\n    }()\n  );\n  var cA = vec2(0, 0);\n  var vA = vec2(0, 0);\n  var cB = vec2(0, 0);\n  var vB = vec2(0, 0);\n  var tangent$1 = vec2(0, 0);\n  var xfA = transform(0, 0, 0);\n  var xfB = transform(0, 0, 0);\n  var pointA = vec2(0, 0);\n  var pointB = vec2(0, 0);\n  var clipPoint = vec2(0, 0);\n  var planePoint$1 = vec2(0, 0);\n  var rA = vec2(0, 0);\n  var rB = vec2(0, 0);\n  var P$1 = vec2(0, 0);\n  var normal$2 = vec2(0, 0);\n  var point = vec2(0, 0);\n  var dv = vec2(0, 0);\n  var dv1 = vec2(0, 0);\n  var dv2 = vec2(0, 0);\n  var b = vec2(0, 0);\n  var a = vec2(0, 0);\n  var x = vec2(0, 0);\n  var d = vec2(0, 0);\n  var P1 = vec2(0, 0);\n  var P2 = vec2(0, 0);\n  var temp$2 = vec2(0, 0);\n  var Contact = (\n    /** @class */\n    function() {\n      function Contact2() {\n        this.m_nodeA = new ContactEdge(this);\n        this.m_nodeB = new ContactEdge(this);\n        this.m_fixtureA = null;\n        this.m_fixtureB = null;\n        this.m_indexA = -1;\n        this.m_indexB = -1;\n        this.m_evaluateFcn = null;\n        this.m_manifold = new Manifold();\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_toi = 1;\n        this.m_toiCount = 0;\n        this.m_toiFlag = false;\n        this.m_friction = 0;\n        this.m_restitution = 0;\n        this.m_tangentSpeed = 0;\n        this.m_enabledFlag = true;\n        this.m_islandFlag = false;\n        this.m_touchingFlag = false;\n        this.m_filterFlag = false;\n        this.m_bulletHitFlag = false;\n        this.m_impulse = new ContactImpulse(this);\n        this.v_points = [new VelocityConstraintPoint(), new VelocityConstraintPoint()];\n        this.v_normal = vec2(0, 0);\n        this.v_normalMass = new Mat22();\n        this.v_K = new Mat22();\n        this.v_pointCount = 0;\n        this.v_tangentSpeed = 0;\n        this.v_friction = 0;\n        this.v_restitution = 0;\n        this.v_invMassA = 0;\n        this.v_invMassB = 0;\n        this.v_invIA = 0;\n        this.v_invIB = 0;\n        this.p_localPoints = [vec2(0, 0), vec2(0, 0)];\n        this.p_localNormal = vec2(0, 0);\n        this.p_localPoint = vec2(0, 0);\n        this.p_localCenterA = vec2(0, 0);\n        this.p_localCenterB = vec2(0, 0);\n        this.p_type = exports2.ManifoldType.e_unset;\n        this.p_radiusA = 0;\n        this.p_radiusB = 0;\n        this.p_pointCount = 0;\n        this.p_invMassA = 0;\n        this.p_invMassB = 0;\n        this.p_invIA = 0;\n        this.p_invIB = 0;\n      }\n      Contact2.prototype.initialize = function(fA, indexA, fB, indexB, evaluateFcn) {\n        this.m_fixtureA = fA;\n        this.m_fixtureB = fB;\n        this.m_indexA = indexA;\n        this.m_indexB = indexB;\n        this.m_evaluateFcn = evaluateFcn;\n        this.m_friction = mixFriction(this.m_fixtureA.m_friction, this.m_fixtureB.m_friction);\n        this.m_restitution = mixRestitution(this.m_fixtureA.m_restitution, this.m_fixtureB.m_restitution);\n      };\n      Contact2.prototype.recycle = function() {\n        this.m_nodeA.recycle();\n        this.m_nodeB.recycle();\n        this.m_fixtureA = null;\n        this.m_fixtureB = null;\n        this.m_indexA = -1;\n        this.m_indexB = -1;\n        this.m_evaluateFcn = null;\n        this.m_manifold.recycle();\n        this.m_prev = null;\n        this.m_next = null;\n        this.m_toi = 1;\n        this.m_toiCount = 0;\n        this.m_toiFlag = false;\n        this.m_friction = 0;\n        this.m_restitution = 0;\n        this.m_tangentSpeed = 0;\n        this.m_enabledFlag = true;\n        this.m_islandFlag = false;\n        this.m_touchingFlag = false;\n        this.m_filterFlag = false;\n        this.m_bulletHitFlag = false;\n        this.m_impulse.recycle();\n        for (var _i = 0, _a2 = this.v_points; _i < _a2.length; _i++) {\n          var point_1 = _a2[_i];\n          point_1.recycle();\n        }\n        zeroVec2(this.v_normal);\n        this.v_normalMass.setZero();\n        this.v_K.setZero();\n        this.v_pointCount = 0;\n        this.v_tangentSpeed = 0;\n        this.v_friction = 0;\n        this.v_restitution = 0;\n        this.v_invMassA = 0;\n        this.v_invMassB = 0;\n        this.v_invIA = 0;\n        this.v_invIB = 0;\n        for (var _b = 0, _c = this.p_localPoints; _b < _c.length; _b++) {\n          var point_2 = _c[_b];\n          zeroVec2(point_2);\n        }\n        zeroVec2(this.p_localNormal);\n        zeroVec2(this.p_localPoint);\n        zeroVec2(this.p_localCenterA);\n        zeroVec2(this.p_localCenterB);\n        this.p_type = exports2.ManifoldType.e_unset;\n        this.p_radiusA = 0;\n        this.p_radiusB = 0;\n        this.p_pointCount = 0;\n        this.p_invMassA = 0;\n        this.p_invMassB = 0;\n        this.p_invIA = 0;\n        this.p_invIB = 0;\n      };\n      Contact2.prototype.initConstraint = function(step) {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        if (bodyA === null || bodyB === null)\n          return;\n        var shapeA = fixtureA.m_shape;\n        var shapeB = fixtureB.m_shape;\n        if (shapeA === null || shapeB === null)\n          return;\n        var manifold = this.m_manifold;\n        var pointCount = manifold.pointCount;\n        this.v_invMassA = bodyA.m_invMass;\n        this.v_invMassB = bodyB.m_invMass;\n        this.v_invIA = bodyA.m_invI;\n        this.v_invIB = bodyB.m_invI;\n        this.v_friction = this.m_friction;\n        this.v_restitution = this.m_restitution;\n        this.v_tangentSpeed = this.m_tangentSpeed;\n        this.v_pointCount = pointCount;\n        this.v_K.setZero();\n        this.v_normalMass.setZero();\n        this.p_invMassA = bodyA.m_invMass;\n        this.p_invMassB = bodyB.m_invMass;\n        this.p_invIA = bodyA.m_invI;\n        this.p_invIB = bodyB.m_invI;\n        copyVec2(this.p_localCenterA, bodyA.m_sweep.localCenter);\n        copyVec2(this.p_localCenterB, bodyB.m_sweep.localCenter);\n        this.p_radiusA = shapeA.m_radius;\n        this.p_radiusB = shapeB.m_radius;\n        this.p_type = manifold.type;\n        copyVec2(this.p_localNormal, manifold.localNormal);\n        copyVec2(this.p_localPoint, manifold.localPoint);\n        this.p_pointCount = pointCount;\n        for (var j = 0; j < SettingsInternal.maxManifoldPoints; ++j) {\n          this.v_points[j].recycle();\n          zeroVec2(this.p_localPoints[j]);\n        }\n        for (var j = 0; j < pointCount; ++j) {\n          var cp = manifold.points[j];\n          var vcp = this.v_points[j];\n          if (step.warmStarting) {\n            vcp.normalImpulse = step.dtRatio * cp.normalImpulse;\n            vcp.tangentImpulse = step.dtRatio * cp.tangentImpulse;\n          }\n          copyVec2(this.p_localPoints[j], cp.localPoint);\n        }\n      };\n      Contact2.prototype.getManifold = function() {\n        return this.m_manifold;\n      };\n      Contact2.prototype.getWorldManifold = function(worldManifold2) {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        if (bodyA === null || bodyB === null)\n          return;\n        var shapeA = fixtureA.m_shape;\n        var shapeB = fixtureB.m_shape;\n        if (shapeA === null || shapeB === null)\n          return;\n        return this.m_manifold.getWorldManifold(worldManifold2, bodyA.getTransform(), shapeA.m_radius, bodyB.getTransform(), shapeB.m_radius);\n      };\n      Contact2.prototype.setEnabled = function(flag) {\n        this.m_enabledFlag = !!flag;\n      };\n      Contact2.prototype.isEnabled = function() {\n        return this.m_enabledFlag;\n      };\n      Contact2.prototype.isTouching = function() {\n        return this.m_touchingFlag;\n      };\n      Contact2.prototype.getNext = function() {\n        return this.m_next;\n      };\n      Contact2.prototype.getFixtureA = function() {\n        return this.m_fixtureA;\n      };\n      Contact2.prototype.getFixtureB = function() {\n        return this.m_fixtureB;\n      };\n      Contact2.prototype.getChildIndexA = function() {\n        return this.m_indexA;\n      };\n      Contact2.prototype.getChildIndexB = function() {\n        return this.m_indexB;\n      };\n      Contact2.prototype.flagForFiltering = function() {\n        this.m_filterFlag = true;\n      };\n      Contact2.prototype.setFriction = function(friction) {\n        this.m_friction = friction;\n      };\n      Contact2.prototype.getFriction = function() {\n        return this.m_friction;\n      };\n      Contact2.prototype.resetFriction = function() {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        this.m_friction = mixFriction(fixtureA.m_friction, fixtureB.m_friction);\n      };\n      Contact2.prototype.setRestitution = function(restitution) {\n        this.m_restitution = restitution;\n      };\n      Contact2.prototype.getRestitution = function() {\n        return this.m_restitution;\n      };\n      Contact2.prototype.resetRestitution = function() {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        this.m_restitution = mixRestitution(fixtureA.m_restitution, fixtureB.m_restitution);\n      };\n      Contact2.prototype.setTangentSpeed = function(speed) {\n        this.m_tangentSpeed = speed;\n      };\n      Contact2.prototype.getTangentSpeed = function() {\n        return this.m_tangentSpeed;\n      };\n      Contact2.prototype.evaluate = function(manifold, xfA2, xfB2) {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        this.m_evaluateFcn(manifold, xfA2, fixtureA, this.m_indexA, xfB2, fixtureB, this.m_indexB);\n      };\n      Contact2.prototype.update = function(listener) {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        if (bodyA === null || bodyB === null)\n          return;\n        var shapeA = fixtureA.m_shape;\n        var shapeB = fixtureB.m_shape;\n        if (shapeA === null || shapeB === null)\n          return;\n        this.m_enabledFlag = true;\n        var touching = false;\n        var wasTouching = this.m_touchingFlag;\n        var sensorA = fixtureA.m_isSensor;\n        var sensorB = fixtureB.m_isSensor;\n        var sensor = sensorA || sensorB;\n        var xfA2 = bodyA.m_xf;\n        var xfB2 = bodyB.m_xf;\n        if (sensor) {\n          touching = testOverlap(shapeA, this.m_indexA, shapeB, this.m_indexB, xfA2, xfB2);\n          this.m_manifold.pointCount = 0;\n        } else {\n          oldManifold.recycle();\n          oldManifold.set(this.m_manifold);\n          this.m_manifold.recycle();\n          this.evaluate(this.m_manifold, xfA2, xfB2);\n          touching = this.m_manifold.pointCount > 0;\n          for (var i = 0; i < this.m_manifold.pointCount; ++i) {\n            var nmp = this.m_manifold.points[i];\n            nmp.normalImpulse = 0;\n            nmp.tangentImpulse = 0;\n            for (var j = 0; j < oldManifold.pointCount; ++j) {\n              var omp = oldManifold.points[j];\n              if (omp.id.key === nmp.id.key) {\n                nmp.normalImpulse = omp.normalImpulse;\n                nmp.tangentImpulse = omp.tangentImpulse;\n                break;\n              }\n            }\n          }\n          if (touching !== wasTouching) {\n            bodyA.setAwake(true);\n            bodyB.setAwake(true);\n          }\n        }\n        this.m_touchingFlag = touching;\n        var hasListener = typeof listener === \"object\" && listener !== null;\n        if (!wasTouching && touching && hasListener) {\n          listener.beginContact(this);\n        }\n        if (wasTouching && !touching && hasListener) {\n          listener.endContact(this);\n        }\n        if (!sensor && touching && hasListener && oldManifold) {\n          listener.preSolve(this, oldManifold);\n        }\n      };\n      Contact2.prototype.solvePositionConstraint = function(step) {\n        return this._solvePositionConstraint(step, null, null);\n      };\n      Contact2.prototype.solvePositionConstraintTOI = function(step, toiA, toiB) {\n        return this._solvePositionConstraint(step, toiA, toiB);\n      };\n      Contact2.prototype._solvePositionConstraint = function(step, toiA, toiB) {\n        var toi = toiA !== null && toiB !== null ? true : false;\n        var minSeparation = 0;\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return minSeparation;\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        if (bodyA === null || bodyB === null)\n          return minSeparation;\n        var positionA = bodyA.c_position;\n        var positionB = bodyB.c_position;\n        var localCenterA = this.p_localCenterA;\n        var localCenterB = this.p_localCenterB;\n        var mA = 0;\n        var iA = 0;\n        if (!toi || bodyA === toiA || bodyA === toiB) {\n          mA = this.p_invMassA;\n          iA = this.p_invIA;\n        }\n        var mB = 0;\n        var iB = 0;\n        if (!toi || bodyB === toiA || bodyB === toiB) {\n          mB = this.p_invMassB;\n          iB = this.p_invIB;\n        }\n        copyVec2(cA, positionA.c);\n        var aA = positionA.a;\n        copyVec2(cB, positionB.c);\n        var aB = positionB.a;\n        for (var j = 0; j < this.p_pointCount; ++j) {\n          getTransform(xfA, localCenterA, cA, aA);\n          getTransform(xfB, localCenterB, cB, aB);\n          var separation = void 0;\n          switch (this.p_type) {\n            case exports2.ManifoldType.e_circles: {\n              transformVec2(pointA, xfA, this.p_localPoint);\n              transformVec2(pointB, xfB, this.p_localPoints[0]);\n              subVec2(normal$2, pointB, pointA);\n              normalizeVec2(normal$2);\n              combine2Vec2(point, 0.5, pointA, 0.5, pointB);\n              separation = dotVec2(pointB, normal$2) - dotVec2(pointA, normal$2) - this.p_radiusA - this.p_radiusB;\n              break;\n            }\n            case exports2.ManifoldType.e_faceA: {\n              rotVec2(normal$2, xfA.q, this.p_localNormal);\n              transformVec2(planePoint$1, xfA, this.p_localPoint);\n              transformVec2(clipPoint, xfB, this.p_localPoints[j]);\n              separation = dotVec2(clipPoint, normal$2) - dotVec2(planePoint$1, normal$2) - this.p_radiusA - this.p_radiusB;\n              copyVec2(point, clipPoint);\n              break;\n            }\n            case exports2.ManifoldType.e_faceB: {\n              rotVec2(normal$2, xfB.q, this.p_localNormal);\n              transformVec2(planePoint$1, xfB, this.p_localPoint);\n              transformVec2(clipPoint, xfA, this.p_localPoints[j]);\n              separation = dotVec2(clipPoint, normal$2) - dotVec2(planePoint$1, normal$2) - this.p_radiusA - this.p_radiusB;\n              copyVec2(point, clipPoint);\n              negVec2(normal$2);\n              break;\n            }\n            default: {\n              return minSeparation;\n            }\n          }\n          subVec2(rA, point, cA);\n          subVec2(rB, point, cB);\n          minSeparation = math_min$4(minSeparation, separation);\n          var baumgarte = toi ? SettingsInternal.toiBaugarte : SettingsInternal.baumgarte;\n          var linearSlop = SettingsInternal.linearSlop;\n          var maxLinearCorrection = SettingsInternal.maxLinearCorrection;\n          var C = clamp(baumgarte * (separation + linearSlop), -maxLinearCorrection, 0);\n          var rnA = crossVec2Vec2(rA, normal$2);\n          var rnB = crossVec2Vec2(rB, normal$2);\n          var K = mA + mB + iA * rnA * rnA + iB * rnB * rnB;\n          var impulse = K > 0 ? -C / K : 0;\n          scaleVec2(P$1, impulse, normal$2);\n          minusScaleVec2(cA, mA, P$1);\n          aA -= iA * crossVec2Vec2(rA, P$1);\n          plusScaleVec2(cB, mB, P$1);\n          aB += iB * crossVec2Vec2(rB, P$1);\n        }\n        copyVec2(positionA.c, cA);\n        positionA.a = aA;\n        copyVec2(positionB.c, cB);\n        positionB.a = aB;\n        return minSeparation;\n      };\n      Contact2.prototype.initVelocityConstraint = function(step) {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        if (bodyA === null || bodyB === null)\n          return;\n        var velocityA = bodyA.c_velocity;\n        var velocityB = bodyB.c_velocity;\n        var positionA = bodyA.c_position;\n        var positionB = bodyB.c_position;\n        var radiusA = this.p_radiusA;\n        var radiusB = this.p_radiusB;\n        var manifold = this.m_manifold;\n        var mA = this.v_invMassA;\n        var mB = this.v_invMassB;\n        var iA = this.v_invIA;\n        var iB = this.v_invIB;\n        var localCenterA = this.p_localCenterA;\n        var localCenterB = this.p_localCenterB;\n        copyVec2(cA, positionA.c);\n        var aA = positionA.a;\n        copyVec2(vA, velocityA.v);\n        var wA = velocityA.w;\n        copyVec2(cB, positionB.c);\n        var aB = positionB.a;\n        copyVec2(vB, velocityB.v);\n        var wB = velocityB.w;\n        getTransform(xfA, localCenterA, cA, aA);\n        getTransform(xfB, localCenterB, cB, aB);\n        worldManifold.recycle();\n        manifold.getWorldManifold(worldManifold, xfA, radiusA, xfB, radiusB);\n        copyVec2(this.v_normal, worldManifold.normal);\n        for (var j = 0; j < this.v_pointCount; ++j) {\n          var vcp = this.v_points[j];\n          var wmp = worldManifold.points[j];\n          subVec2(vcp.rA, wmp, cA);\n          subVec2(vcp.rB, wmp, cB);\n          var rnA = crossVec2Vec2(vcp.rA, this.v_normal);\n          var rnB = crossVec2Vec2(vcp.rB, this.v_normal);\n          var kNormal = mA + mB + iA * rnA * rnA + iB * rnB * rnB;\n          vcp.normalMass = kNormal > 0 ? 1 / kNormal : 0;\n          crossVec2Num(tangent$1, this.v_normal, 1);\n          var rtA = crossVec2Vec2(vcp.rA, tangent$1);\n          var rtB = crossVec2Vec2(vcp.rB, tangent$1);\n          var kTangent = mA + mB + iA * rtA * rtA + iB * rtB * rtB;\n          vcp.tangentMass = kTangent > 0 ? 1 / kTangent : 0;\n          vcp.velocityBias = 0;\n          var vRel = 0;\n          vRel += dotVec2(this.v_normal, vB);\n          vRel += dotVec2(this.v_normal, crossNumVec2(temp$2, wB, vcp.rB));\n          vRel -= dotVec2(this.v_normal, vA);\n          vRel -= dotVec2(this.v_normal, crossNumVec2(temp$2, wA, vcp.rA));\n          if (vRel < -SettingsInternal.velocityThreshold) {\n            vcp.velocityBias = -this.v_restitution * vRel;\n          }\n        }\n        if (this.v_pointCount == 2 && step.blockSolve) {\n          var vcp1 = this.v_points[0];\n          var vcp2 = this.v_points[1];\n          var rn1A = crossVec2Vec2(vcp1.rA, this.v_normal);\n          var rn1B = crossVec2Vec2(vcp1.rB, this.v_normal);\n          var rn2A = crossVec2Vec2(vcp2.rA, this.v_normal);\n          var rn2B = crossVec2Vec2(vcp2.rB, this.v_normal);\n          var k11 = mA + mB + iA * rn1A * rn1A + iB * rn1B * rn1B;\n          var k22 = mA + mB + iA * rn2A * rn2A + iB * rn2B * rn2B;\n          var k12 = mA + mB + iA * rn1A * rn2A + iB * rn1B * rn2B;\n          var k_maxConditionNumber = 1e3;\n          if (k11 * k11 < k_maxConditionNumber * (k11 * k22 - k12 * k12)) {\n            this.v_K.ex.setNum(k11, k12);\n            this.v_K.ey.setNum(k12, k22);\n            var a_1 = this.v_K.ex.x;\n            var b_1 = this.v_K.ey.x;\n            var c2 = this.v_K.ex.y;\n            var d_1 = this.v_K.ey.y;\n            var det = a_1 * d_1 - b_1 * c2;\n            if (det !== 0) {\n              det = 1 / det;\n            }\n            this.v_normalMass.ex.x = det * d_1;\n            this.v_normalMass.ey.x = -det * b_1;\n            this.v_normalMass.ex.y = -det * c2;\n            this.v_normalMass.ey.y = det * a_1;\n          } else {\n            this.v_pointCount = 1;\n          }\n        }\n        copyVec2(positionA.c, cA);\n        positionA.a = aA;\n        copyVec2(velocityA.v, vA);\n        velocityA.w = wA;\n        copyVec2(positionB.c, cB);\n        positionB.a = aB;\n        copyVec2(velocityB.v, vB);\n        velocityB.w = wB;\n      };\n      Contact2.prototype.warmStartConstraint = function(step) {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        if (bodyA === null || bodyB === null)\n          return;\n        var velocityA = bodyA.c_velocity;\n        var velocityB = bodyB.c_velocity;\n        var mA = this.v_invMassA;\n        var iA = this.v_invIA;\n        var mB = this.v_invMassB;\n        var iB = this.v_invIB;\n        copyVec2(vA, velocityA.v);\n        var wA = velocityA.w;\n        copyVec2(vB, velocityB.v);\n        var wB = velocityB.w;\n        copyVec2(normal$2, this.v_normal);\n        crossVec2Num(tangent$1, normal$2, 1);\n        for (var j = 0; j < this.v_pointCount; ++j) {\n          var vcp = this.v_points[j];\n          combine2Vec2(P$1, vcp.normalImpulse, normal$2, vcp.tangentImpulse, tangent$1);\n          wA -= iA * crossVec2Vec2(vcp.rA, P$1);\n          minusScaleVec2(vA, mA, P$1);\n          wB += iB * crossVec2Vec2(vcp.rB, P$1);\n          plusScaleVec2(vB, mB, P$1);\n        }\n        copyVec2(velocityA.v, vA);\n        velocityA.w = wA;\n        copyVec2(velocityB.v, vB);\n        velocityB.w = wB;\n      };\n      Contact2.prototype.storeConstraintImpulses = function(step) {\n        var manifold = this.m_manifold;\n        for (var j = 0; j < this.v_pointCount; ++j) {\n          manifold.points[j].normalImpulse = this.v_points[j].normalImpulse;\n          manifold.points[j].tangentImpulse = this.v_points[j].tangentImpulse;\n        }\n      };\n      Contact2.prototype.solveVelocityConstraint = function(step) {\n        var fixtureA = this.m_fixtureA;\n        var fixtureB = this.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        if (bodyA === null || bodyB === null)\n          return;\n        var velocityA = bodyA.c_velocity;\n        var velocityB = bodyB.c_velocity;\n        var mA = this.v_invMassA;\n        var iA = this.v_invIA;\n        var mB = this.v_invMassB;\n        var iB = this.v_invIB;\n        copyVec2(vA, velocityA.v);\n        var wA = velocityA.w;\n        copyVec2(vB, velocityB.v);\n        var wB = velocityB.w;\n        copyVec2(normal$2, this.v_normal);\n        crossVec2Num(tangent$1, normal$2, 1);\n        var friction = this.v_friction;\n        for (var j = 0; j < this.v_pointCount; ++j) {\n          var vcp = this.v_points[j];\n          zeroVec2(dv);\n          plusVec2(dv, vB);\n          plusVec2(dv, crossNumVec2(temp$2, wB, vcp.rB));\n          minusVec2(dv, vA);\n          minusVec2(dv, crossNumVec2(temp$2, wA, vcp.rA));\n          var vt = dotVec2(dv, tangent$1) - this.v_tangentSpeed;\n          var lambda = vcp.tangentMass * -vt;\n          var maxFriction = friction * vcp.normalImpulse;\n          var newImpulse = clamp(vcp.tangentImpulse + lambda, -maxFriction, maxFriction);\n          lambda = newImpulse - vcp.tangentImpulse;\n          vcp.tangentImpulse = newImpulse;\n          scaleVec2(P$1, lambda, tangent$1);\n          minusScaleVec2(vA, mA, P$1);\n          wA -= iA * crossVec2Vec2(vcp.rA, P$1);\n          plusScaleVec2(vB, mB, P$1);\n          wB += iB * crossVec2Vec2(vcp.rB, P$1);\n        }\n        if (this.v_pointCount == 1 || step.blockSolve == false) {\n          for (var i = 0; i < this.v_pointCount; ++i) {\n            var vcp = this.v_points[i];\n            zeroVec2(dv);\n            plusVec2(dv, vB);\n            plusVec2(dv, crossNumVec2(temp$2, wB, vcp.rB));\n            minusVec2(dv, vA);\n            minusVec2(dv, crossNumVec2(temp$2, wA, vcp.rA));\n            var vn = dotVec2(dv, normal$2);\n            var lambda = -vcp.normalMass * (vn - vcp.velocityBias);\n            var newImpulse = math_max$2(vcp.normalImpulse + lambda, 0);\n            lambda = newImpulse - vcp.normalImpulse;\n            vcp.normalImpulse = newImpulse;\n            scaleVec2(P$1, lambda, normal$2);\n            minusScaleVec2(vA, mA, P$1);\n            wA -= iA * crossVec2Vec2(vcp.rA, P$1);\n            plusScaleVec2(vB, mB, P$1);\n            wB += iB * crossVec2Vec2(vcp.rB, P$1);\n          }\n        } else {\n          var vcp1 = this.v_points[0];\n          var vcp2 = this.v_points[1];\n          setVec2(a, vcp1.normalImpulse, vcp2.normalImpulse);\n          zeroVec2(dv1);\n          plusVec2(dv1, vB);\n          plusVec2(dv1, crossNumVec2(temp$2, wB, vcp1.rB));\n          minusVec2(dv1, vA);\n          minusVec2(dv1, crossNumVec2(temp$2, wA, vcp1.rA));\n          zeroVec2(dv2);\n          plusVec2(dv2, vB);\n          plusVec2(dv2, crossNumVec2(temp$2, wB, vcp2.rB));\n          minusVec2(dv2, vA);\n          minusVec2(dv2, crossNumVec2(temp$2, wA, vcp2.rA));\n          var vn1 = dotVec2(dv1, normal$2);\n          var vn2 = dotVec2(dv2, normal$2);\n          setVec2(b, vn1 - vcp1.velocityBias, vn2 - vcp2.velocityBias);\n          b.x -= this.v_K.ex.x * a.x + this.v_K.ey.x * a.y;\n          b.y -= this.v_K.ex.y * a.x + this.v_K.ey.y * a.y;\n          while (true) {\n            zeroVec2(x);\n            x.x = -(this.v_normalMass.ex.x * b.x + this.v_normalMass.ey.x * b.y);\n            x.y = -(this.v_normalMass.ex.y * b.x + this.v_normalMass.ey.y * b.y);\n            if (x.x >= 0 && x.y >= 0) {\n              subVec2(d, x, a);\n              scaleVec2(P1, d.x, normal$2);\n              scaleVec2(P2, d.y, normal$2);\n              combine3Vec2(vA, -mA, P1, -mA, P2, 1, vA);\n              wA -= iA * (crossVec2Vec2(vcp1.rA, P1) + crossVec2Vec2(vcp2.rA, P2));\n              combine3Vec2(vB, mB, P1, mB, P2, 1, vB);\n              wB += iB * (crossVec2Vec2(vcp1.rB, P1) + crossVec2Vec2(vcp2.rB, P2));\n              vcp1.normalImpulse = x.x;\n              vcp2.normalImpulse = x.y;\n              break;\n            }\n            x.x = -vcp1.normalMass * b.x;\n            x.y = 0;\n            vn1 = 0;\n            vn2 = this.v_K.ex.y * x.x + b.y;\n            if (x.x >= 0 && vn2 >= 0) {\n              subVec2(d, x, a);\n              scaleVec2(P1, d.x, normal$2);\n              scaleVec2(P2, d.y, normal$2);\n              combine3Vec2(vA, -mA, P1, -mA, P2, 1, vA);\n              wA -= iA * (crossVec2Vec2(vcp1.rA, P1) + crossVec2Vec2(vcp2.rA, P2));\n              combine3Vec2(vB, mB, P1, mB, P2, 1, vB);\n              wB += iB * (crossVec2Vec2(vcp1.rB, P1) + crossVec2Vec2(vcp2.rB, P2));\n              vcp1.normalImpulse = x.x;\n              vcp2.normalImpulse = x.y;\n              break;\n            }\n            x.x = 0;\n            x.y = -vcp2.normalMass * b.y;\n            vn1 = this.v_K.ey.x * x.y + b.x;\n            vn2 = 0;\n            if (x.y >= 0 && vn1 >= 0) {\n              subVec2(d, x, a);\n              scaleVec2(P1, d.x, normal$2);\n              scaleVec2(P2, d.y, normal$2);\n              combine3Vec2(vA, -mA, P1, -mA, P2, 1, vA);\n              wA -= iA * (crossVec2Vec2(vcp1.rA, P1) + crossVec2Vec2(vcp2.rA, P2));\n              combine3Vec2(vB, mB, P1, mB, P2, 1, vB);\n              wB += iB * (crossVec2Vec2(vcp1.rB, P1) + crossVec2Vec2(vcp2.rB, P2));\n              vcp1.normalImpulse = x.x;\n              vcp2.normalImpulse = x.y;\n              break;\n            }\n            x.x = 0;\n            x.y = 0;\n            vn1 = b.x;\n            vn2 = b.y;\n            if (vn1 >= 0 && vn2 >= 0) {\n              subVec2(d, x, a);\n              scaleVec2(P1, d.x, normal$2);\n              scaleVec2(P2, d.y, normal$2);\n              combine3Vec2(vA, -mA, P1, -mA, P2, 1, vA);\n              wA -= iA * (crossVec2Vec2(vcp1.rA, P1) + crossVec2Vec2(vcp2.rA, P2));\n              combine3Vec2(vB, mB, P1, mB, P2, 1, vB);\n              wB += iB * (crossVec2Vec2(vcp1.rB, P1) + crossVec2Vec2(vcp2.rB, P2));\n              vcp1.normalImpulse = x.x;\n              vcp2.normalImpulse = x.y;\n              break;\n            }\n            break;\n          }\n        }\n        copyVec2(velocityA.v, vA);\n        velocityA.w = wA;\n        copyVec2(velocityB.v, vB);\n        velocityB.w = wB;\n      };\n      Contact2.addType = function(type1, type2, callback) {\n        s_registers[type1] = s_registers[type1] || {};\n        s_registers[type1][type2] = callback;\n      };\n      Contact2.create = function(fixtureA, indexA, fixtureB, indexB) {\n        var typeA = fixtureA.m_shape.m_type;\n        var typeB = fixtureB.m_shape.m_type;\n        var contact = contactPool.allocate();\n        var evaluateFcn;\n        if (evaluateFcn = s_registers[typeA] && s_registers[typeA][typeB]) {\n          contact.initialize(fixtureA, indexA, fixtureB, indexB, evaluateFcn);\n        } else if (evaluateFcn = s_registers[typeB] && s_registers[typeB][typeA]) {\n          contact.initialize(fixtureB, indexB, fixtureA, indexA, evaluateFcn);\n        } else {\n          return null;\n        }\n        fixtureA = contact.m_fixtureA;\n        fixtureB = contact.m_fixtureB;\n        indexA = contact.getChildIndexA();\n        indexB = contact.getChildIndexB();\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        contact.m_nodeA.contact = contact;\n        contact.m_nodeA.other = bodyB;\n        contact.m_nodeA.prev = null;\n        contact.m_nodeA.next = bodyA.m_contactList;\n        if (bodyA.m_contactList != null) {\n          bodyA.m_contactList.prev = contact.m_nodeA;\n        }\n        bodyA.m_contactList = contact.m_nodeA;\n        contact.m_nodeB.contact = contact;\n        contact.m_nodeB.other = bodyA;\n        contact.m_nodeB.prev = null;\n        contact.m_nodeB.next = bodyB.m_contactList;\n        if (bodyB.m_contactList != null) {\n          bodyB.m_contactList.prev = contact.m_nodeB;\n        }\n        bodyB.m_contactList = contact.m_nodeB;\n        if (fixtureA.isSensor() == false && fixtureB.isSensor() == false) {\n          bodyA.setAwake(true);\n          bodyB.setAwake(true);\n        }\n        return contact;\n      };\n      Contact2.destroy = function(contact, listener) {\n        var fixtureA = contact.m_fixtureA;\n        var fixtureB = contact.m_fixtureB;\n        if (fixtureA === null || fixtureB === null)\n          return;\n        var bodyA = fixtureA.m_body;\n        var bodyB = fixtureB.m_body;\n        if (bodyA === null || bodyB === null)\n          return;\n        if (contact.isTouching()) {\n          listener.endContact(contact);\n        }\n        if (contact.m_nodeA.prev) {\n          contact.m_nodeA.prev.next = contact.m_nodeA.next;\n        }\n        if (contact.m_nodeA.next) {\n          contact.m_nodeA.next.prev = contact.m_nodeA.prev;\n        }\n        if (contact.m_nodeA == bodyA.m_contactList) {\n          bodyA.m_contactList = contact.m_nodeA.next;\n        }\n        if (contact.m_nodeB.prev) {\n          contact.m_nodeB.prev.next = contact.m_nodeB.next;\n        }\n        if (contact.m_nodeB.next) {\n          contact.m_nodeB.next.prev = contact.m_nodeB.prev;\n        }\n        if (contact.m_nodeB == bodyB.m_contactList) {\n          bodyB.m_contactList = contact.m_nodeB.next;\n        }\n        if (contact.m_manifold.pointCount > 0 && !fixtureA.m_isSensor && !fixtureB.m_isSensor) {\n          bodyA.setAwake(true);\n          bodyB.setAwake(true);\n        }\n        contactPool.release(contact);\n      };\n      return Contact2;\n    }()\n  );\n  var DEFAULTS$b = {\n    gravity: Vec2.zero(),\n    allowSleep: true,\n    warmStarting: true,\n    continuousPhysics: true,\n    subStepping: false,\n    blockSolve: true,\n    velocityIterations: 8,\n    positionIterations: 3\n  };\n  var World = (\n    /** @class */\n    function() {\n      function World2(def) {\n        if (!(this instanceof World2)) {\n          return new World2(def);\n        }\n        this.s_step = new TimeStep();\n        if (!def) {\n          def = {};\n        } else if (Vec2.isValid(def)) {\n          def = { gravity: def };\n        }\n        def = options(def, DEFAULTS$b);\n        this.m_solver = new Solver(this);\n        this.m_broadPhase = new BroadPhase();\n        this.m_contactList = null;\n        this.m_contactCount = 0;\n        this.m_bodyList = null;\n        this.m_bodyCount = 0;\n        this.m_jointList = null;\n        this.m_jointCount = 0;\n        this.m_stepComplete = true;\n        this.m_allowSleep = def.allowSleep;\n        this.m_gravity = Vec2.clone(def.gravity);\n        this.m_clearForces = true;\n        this.m_newFixture = false;\n        this.m_locked = false;\n        this.m_warmStarting = def.warmStarting;\n        this.m_continuousPhysics = def.continuousPhysics;\n        this.m_subStepping = def.subStepping;\n        this.m_blockSolve = def.blockSolve;\n        this.m_velocityIterations = def.velocityIterations;\n        this.m_positionIterations = def.positionIterations;\n        this.m_t = 0;\n        this.m_step_callback = [];\n      }\n      World2.prototype._serialize = function() {\n        var bodies = [];\n        var joints = [];\n        for (var b2 = this.getBodyList(); b2; b2 = b2.getNext()) {\n          bodies.push(b2);\n        }\n        for (var j = this.getJointList(); j; j = j.getNext()) {\n          if (typeof j._serialize === \"function\") {\n            joints.push(j);\n          }\n        }\n        return {\n          gravity: this.m_gravity,\n          bodies,\n          joints\n        };\n      };\n      World2._deserialize = function(data, context, restore) {\n        if (!data) {\n          return new World2();\n        }\n        var world = new World2(data.gravity);\n        if (data.bodies) {\n          for (var i = data.bodies.length - 1; i >= 0; i -= 1) {\n            world._addBody(restore(Body, data.bodies[i], world));\n          }\n        }\n        if (data.joints) {\n          for (var i = data.joints.length - 1; i >= 0; i--) {\n            world.createJoint(restore(Joint, data.joints[i], world));\n          }\n        }\n        return world;\n      };\n      World2.prototype.getBodyList = function() {\n        return this.m_bodyList;\n      };\n      World2.prototype.getJointList = function() {\n        return this.m_jointList;\n      };\n      World2.prototype.getContactList = function() {\n        return this.m_contactList;\n      };\n      World2.prototype.getBodyCount = function() {\n        return this.m_bodyCount;\n      };\n      World2.prototype.getJointCount = function() {\n        return this.m_jointCount;\n      };\n      World2.prototype.getContactCount = function() {\n        return this.m_contactCount;\n      };\n      World2.prototype.setGravity = function(gravity) {\n        this.m_gravity.set(gravity);\n      };\n      World2.prototype.getGravity = function() {\n        return this.m_gravity;\n      };\n      World2.prototype.isLocked = function() {\n        return this.m_locked;\n      };\n      World2.prototype.setAllowSleeping = function(flag) {\n        if (flag == this.m_allowSleep) {\n          return;\n        }\n        this.m_allowSleep = flag;\n        if (this.m_allowSleep == false) {\n          for (var b2 = this.m_bodyList; b2; b2 = b2.m_next) {\n            b2.setAwake(true);\n          }\n        }\n      };\n      World2.prototype.getAllowSleeping = function() {\n        return this.m_allowSleep;\n      };\n      World2.prototype.setWarmStarting = function(flag) {\n        this.m_warmStarting = flag;\n      };\n      World2.prototype.getWarmStarting = function() {\n        return this.m_warmStarting;\n      };\n      World2.prototype.setContinuousPhysics = function(flag) {\n        this.m_continuousPhysics = flag;\n      };\n      World2.prototype.getContinuousPhysics = function() {\n        return this.m_continuousPhysics;\n      };\n      World2.prototype.setSubStepping = function(flag) {\n        this.m_subStepping = flag;\n      };\n      World2.prototype.getSubStepping = function() {\n        return this.m_subStepping;\n      };\n      World2.prototype.setAutoClearForces = function(flag) {\n        this.m_clearForces = flag;\n      };\n      World2.prototype.getAutoClearForces = function() {\n        return this.m_clearForces;\n      };\n      World2.prototype.clearForces = function() {\n        for (var body = this.m_bodyList; body; body = body.getNext()) {\n          body.m_force.setZero();\n          body.m_torque = 0;\n        }\n      };\n      World2.prototype.queryAABB = function(aabb, callback) {\n        var broadPhase = this.m_broadPhase;\n        this.m_broadPhase.query(aabb, function(proxyId) {\n          var proxy = broadPhase.getUserData(proxyId);\n          return callback(proxy.fixture);\n        });\n      };\n      World2.prototype.rayCast = function(point1, point2, callback) {\n        var broadPhase = this.m_broadPhase;\n        this.m_broadPhase.rayCast({\n          maxFraction: 1,\n          p1: point1,\n          p2: point2\n        }, function(input2, proxyId) {\n          var proxy = broadPhase.getUserData(proxyId);\n          var fixture = proxy.fixture;\n          var index = proxy.childIndex;\n          var output2 = {};\n          var hit = fixture.rayCast(output2, input2, index);\n          if (hit) {\n            var fraction = output2.fraction;\n            var point3 = Vec2.add(Vec2.mulNumVec2(1 - fraction, input2.p1), Vec2.mulNumVec2(fraction, input2.p2));\n            return callback(fixture, point3, output2.normal, fraction);\n          }\n          return input2.maxFraction;\n        });\n      };\n      World2.prototype.getProxyCount = function() {\n        return this.m_broadPhase.getProxyCount();\n      };\n      World2.prototype.getTreeHeight = function() {\n        return this.m_broadPhase.getTreeHeight();\n      };\n      World2.prototype.getTreeBalance = function() {\n        return this.m_broadPhase.getTreeBalance();\n      };\n      World2.prototype.getTreeQuality = function() {\n        return this.m_broadPhase.getTreeQuality();\n      };\n      World2.prototype.shiftOrigin = function(newOrigin) {\n        if (this.isLocked()) {\n          return;\n        }\n        for (var b2 = this.m_bodyList; b2; b2 = b2.m_next) {\n          b2.m_xf.p.sub(newOrigin);\n          b2.m_sweep.c0.sub(newOrigin);\n          b2.m_sweep.c.sub(newOrigin);\n        }\n        for (var j = this.m_jointList; j; j = j.m_next) {\n          j.shiftOrigin(newOrigin);\n        }\n        this.m_broadPhase.shiftOrigin(newOrigin);\n      };\n      World2.prototype._addBody = function(body) {\n        if (this.isLocked()) {\n          return;\n        }\n        body.m_prev = null;\n        body.m_next = this.m_bodyList;\n        if (this.m_bodyList) {\n          this.m_bodyList.m_prev = body;\n        }\n        this.m_bodyList = body;\n        ++this.m_bodyCount;\n      };\n      World2.prototype.createBody = function(arg1, arg2) {\n        if (this.isLocked()) {\n          return null;\n        }\n        var def = {};\n        if (!arg1) ;\n        else if (Vec2.isValid(arg1)) {\n          def = { position: arg1, angle: arg2 };\n        } else if (typeof arg1 === \"object\") {\n          def = arg1;\n        }\n        var body = new Body(this, def);\n        this._addBody(body);\n        return body;\n      };\n      World2.prototype.createDynamicBody = function(arg1, arg2) {\n        var def = {};\n        if (!arg1) ;\n        else if (Vec2.isValid(arg1)) {\n          def = { position: arg1, angle: arg2 };\n        } else if (typeof arg1 === \"object\") {\n          def = arg1;\n        }\n        def.type = \"dynamic\";\n        return this.createBody(def);\n      };\n      World2.prototype.createKinematicBody = function(arg1, arg2) {\n        var def = {};\n        if (!arg1) ;\n        else if (Vec2.isValid(arg1)) {\n          def = { position: arg1, angle: arg2 };\n        } else if (typeof arg1 === \"object\") {\n          def = arg1;\n        }\n        def.type = \"kinematic\";\n        return this.createBody(def);\n      };\n      World2.prototype.destroyBody = function(b2) {\n        if (this.isLocked()) {\n          return;\n        }\n        if (b2.m_destroyed) {\n          return false;\n        }\n        var je = b2.m_jointList;\n        while (je) {\n          var je0 = je;\n          je = je.next;\n          this.publish(\"remove-joint\", je0.joint);\n          this.destroyJoint(je0.joint);\n          b2.m_jointList = je;\n        }\n        b2.m_jointList = null;\n        var ce = b2.m_contactList;\n        while (ce) {\n          var ce0 = ce;\n          ce = ce.next;\n          this.destroyContact(ce0.contact);\n          b2.m_contactList = ce;\n        }\n        b2.m_contactList = null;\n        var f = b2.m_fixtureList;\n        while (f) {\n          var f0 = f;\n          f = f.m_next;\n          this.publish(\"remove-fixture\", f0);\n          f0.destroyProxies(this.m_broadPhase);\n          b2.m_fixtureList = f;\n        }\n        b2.m_fixtureList = null;\n        if (b2.m_prev) {\n          b2.m_prev.m_next = b2.m_next;\n        }\n        if (b2.m_next) {\n          b2.m_next.m_prev = b2.m_prev;\n        }\n        if (b2 == this.m_bodyList) {\n          this.m_bodyList = b2.m_next;\n        }\n        b2.m_destroyed = true;\n        --this.m_bodyCount;\n        this.publish(\"remove-body\", b2);\n        return true;\n      };\n      World2.prototype.createJoint = function(joint) {\n        if (this.isLocked()) {\n          return null;\n        }\n        joint.m_prev = null;\n        joint.m_next = this.m_jointList;\n        if (this.m_jointList) {\n          this.m_jointList.m_prev = joint;\n        }\n        this.m_jointList = joint;\n        ++this.m_jointCount;\n        joint.m_edgeA.joint = joint;\n        joint.m_edgeA.other = joint.m_bodyB;\n        joint.m_edgeA.prev = null;\n        joint.m_edgeA.next = joint.m_bodyA.m_jointList;\n        if (joint.m_bodyA.m_jointList)\n          joint.m_bodyA.m_jointList.prev = joint.m_edgeA;\n        joint.m_bodyA.m_jointList = joint.m_edgeA;\n        joint.m_edgeB.joint = joint;\n        joint.m_edgeB.other = joint.m_bodyA;\n        joint.m_edgeB.prev = null;\n        joint.m_edgeB.next = joint.m_bodyB.m_jointList;\n        if (joint.m_bodyB.m_jointList)\n          joint.m_bodyB.m_jointList.prev = joint.m_edgeB;\n        joint.m_bodyB.m_jointList = joint.m_edgeB;\n        if (joint.m_collideConnected == false) {\n          for (var edge = joint.m_bodyB.getContactList(); edge; edge = edge.next) {\n            if (edge.other == joint.m_bodyA) {\n              edge.contact.flagForFiltering();\n            }\n          }\n        }\n        return joint;\n      };\n      World2.prototype.destroyJoint = function(joint) {\n        if (this.isLocked()) {\n          return;\n        }\n        if (joint.m_prev) {\n          joint.m_prev.m_next = joint.m_next;\n        }\n        if (joint.m_next) {\n          joint.m_next.m_prev = joint.m_prev;\n        }\n        if (joint == this.m_jointList) {\n          this.m_jointList = joint.m_next;\n        }\n        var bodyA = joint.m_bodyA;\n        var bodyB = joint.m_bodyB;\n        bodyA.setAwake(true);\n        bodyB.setAwake(true);\n        if (joint.m_edgeA.prev) {\n          joint.m_edgeA.prev.next = joint.m_edgeA.next;\n        }\n        if (joint.m_edgeA.next) {\n          joint.m_edgeA.next.prev = joint.m_edgeA.prev;\n        }\n        if (joint.m_edgeA == bodyA.m_jointList) {\n          bodyA.m_jointList = joint.m_edgeA.next;\n        }\n        joint.m_edgeA.prev = null;\n        joint.m_edgeA.next = null;\n        if (joint.m_edgeB.prev) {\n          joint.m_edgeB.prev.next = joint.m_edgeB.next;\n        }\n        if (joint.m_edgeB.next) {\n          joint.m_edgeB.next.prev = joint.m_edgeB.prev;\n        }\n        if (joint.m_edgeB == bodyB.m_jointList) {\n          bodyB.m_jointList = joint.m_edgeB.next;\n        }\n        joint.m_edgeB.prev = null;\n        joint.m_edgeB.next = null;\n        --this.m_jointCount;\n        if (joint.m_collideConnected == false) {\n          var edge = bodyB.getContactList();\n          while (edge) {\n            if (edge.other == bodyA) {\n              edge.contact.flagForFiltering();\n            }\n            edge = edge.next;\n          }\n        }\n        this.publish(\"remove-joint\", joint);\n      };\n      World2.prototype.step = function(timeStep, velocityIterations, positionIterations) {\n        this.publish(\"pre-step\", timeStep);\n        if ((velocityIterations | 0) !== velocityIterations) {\n          velocityIterations = 0;\n        }\n        velocityIterations = velocityIterations || this.m_velocityIterations;\n        positionIterations = positionIterations || this.m_positionIterations;\n        if (this.m_newFixture) {\n          this.findNewContacts();\n          this.m_newFixture = false;\n        }\n        this.m_locked = true;\n        this.s_step.reset(timeStep);\n        this.s_step.velocityIterations = velocityIterations;\n        this.s_step.positionIterations = positionIterations;\n        this.s_step.warmStarting = this.m_warmStarting;\n        this.s_step.blockSolve = this.m_blockSolve;\n        this.updateContacts();\n        if (this.m_stepComplete && timeStep > 0) {\n          this.m_solver.solveWorld(this.s_step);\n          for (var b2 = this.m_bodyList; b2; b2 = b2.getNext()) {\n            if (b2.m_islandFlag == false) {\n              continue;\n            }\n            if (b2.isStatic()) {\n              continue;\n            }\n            b2.synchronizeFixtures();\n          }\n          this.findNewContacts();\n        }\n        if (this.m_continuousPhysics && timeStep > 0) {\n          this.m_solver.solveWorldTOI(this.s_step);\n        }\n        if (this.m_clearForces) {\n          this.clearForces();\n        }\n        this.m_locked = false;\n        var callback;\n        while (callback = this.m_step_callback.shift()) {\n          callback(this);\n        }\n        this.publish(\"post-step\", timeStep);\n      };\n      World2.prototype.queueUpdate = function(callback) {\n        if (!this.isLocked()) {\n          callback(this);\n        } else {\n          this.m_step_callback.push(callback);\n        }\n      };\n      World2.prototype.findNewContacts = function() {\n        var _this = this;\n        this.m_broadPhase.updatePairs(function(proxyA, proxyB) {\n          return _this.createContact(proxyA, proxyB);\n        });\n      };\n      World2.prototype.createContact = function(proxyA, proxyB) {\n        var fixtureA = proxyA.fixture;\n        var fixtureB = proxyB.fixture;\n        var indexA = proxyA.childIndex;\n        var indexB = proxyB.childIndex;\n        var bodyA = fixtureA.getBody();\n        var bodyB = fixtureB.getBody();\n        if (bodyA == bodyB) {\n          return;\n        }\n        var edge = bodyB.getContactList();\n        while (edge) {\n          if (edge.other == bodyA) {\n            var fA = edge.contact.getFixtureA();\n            var fB = edge.contact.getFixtureB();\n            var iA = edge.contact.getChildIndexA();\n            var iB = edge.contact.getChildIndexB();\n            if (fA == fixtureA && fB == fixtureB && iA == indexA && iB == indexB) {\n              return;\n            }\n            if (fA == fixtureB && fB == fixtureA && iA == indexB && iB == indexA) {\n              return;\n            }\n          }\n          edge = edge.next;\n        }\n        if (bodyB.shouldCollide(bodyA) == false) {\n          return;\n        }\n        if (fixtureB.shouldCollide(fixtureA) == false) {\n          return;\n        }\n        var contact = Contact.create(fixtureA, indexA, fixtureB, indexB);\n        if (contact == null) {\n          return;\n        }\n        contact.m_prev = null;\n        if (this.m_contactList != null) {\n          contact.m_next = this.m_contactList;\n          this.m_contactList.m_prev = contact;\n        }\n        this.m_contactList = contact;\n        ++this.m_contactCount;\n      };\n      World2.prototype.updateContacts = function() {\n        var c2;\n        var next_c = this.m_contactList;\n        while (c2 = next_c) {\n          next_c = c2.getNext();\n          var fixtureA = c2.getFixtureA();\n          var fixtureB = c2.getFixtureB();\n          var indexA = c2.getChildIndexA();\n          var indexB = c2.getChildIndexB();\n          var bodyA = fixtureA.getBody();\n          var bodyB = fixtureB.getBody();\n          if (c2.m_filterFlag) {\n            if (bodyB.shouldCollide(bodyA) == false) {\n              this.destroyContact(c2);\n              continue;\n            }\n            if (fixtureB.shouldCollide(fixtureA) == false) {\n              this.destroyContact(c2);\n              continue;\n            }\n            c2.m_filterFlag = false;\n          }\n          var activeA = bodyA.isAwake() && !bodyA.isStatic();\n          var activeB = bodyB.isAwake() && !bodyB.isStatic();\n          if (activeA == false && activeB == false) {\n            continue;\n          }\n          var proxyIdA = fixtureA.m_proxies[indexA].proxyId;\n          var proxyIdB = fixtureB.m_proxies[indexB].proxyId;\n          var overlap = this.m_broadPhase.testOverlap(proxyIdA, proxyIdB);\n          if (overlap == false) {\n            this.destroyContact(c2);\n            continue;\n          }\n          c2.update(this);\n        }\n      };\n      World2.prototype.destroyContact = function(contact) {\n        if (contact.m_prev) {\n          contact.m_prev.m_next = contact.m_next;\n        }\n        if (contact.m_next) {\n          contact.m_next.m_prev = contact.m_prev;\n        }\n        if (contact == this.m_contactList) {\n          this.m_contactList = contact.m_next;\n        }\n        Contact.destroy(contact, this);\n        --this.m_contactCount;\n      };\n      World2.prototype.on = function(name, listener) {\n        if (typeof name !== \"string\" || typeof listener !== \"function\") {\n          return this;\n        }\n        if (!this._listeners) {\n          this._listeners = {};\n        }\n        if (!this._listeners[name]) {\n          this._listeners[name] = [];\n        }\n        this._listeners[name].push(listener);\n        return this;\n      };\n      World2.prototype.off = function(name, listener) {\n        if (typeof name !== \"string\" || typeof listener !== \"function\") {\n          return this;\n        }\n        var listeners = this._listeners && this._listeners[name];\n        if (!listeners || !listeners.length) {\n          return this;\n        }\n        var index = listeners.indexOf(listener);\n        if (index >= 0) {\n          listeners.splice(index, 1);\n        }\n        return this;\n      };\n      World2.prototype.publish = function(name, arg1, arg2, arg3) {\n        var listeners = this._listeners && this._listeners[name];\n        if (!listeners || !listeners.length) {\n          return 0;\n        }\n        for (var l = 0; l < listeners.length; l++) {\n          listeners[l].call(this, arg1, arg2, arg3);\n        }\n        return listeners.length;\n      };\n      World2.prototype.beginContact = function(contact) {\n        this.publish(\"begin-contact\", contact);\n      };\n      World2.prototype.endContact = function(contact) {\n        this.publish(\"end-contact\", contact);\n      };\n      World2.prototype.preSolve = function(contact, oldManifold2) {\n        this.publish(\"pre-solve\", contact, oldManifold2);\n      };\n      World2.prototype.postSolve = function(contact, impulse) {\n        this.publish(\"post-solve\", contact, impulse);\n      };\n      return World2;\n    }()\n  );\n  var Vec3 = (\n    /** @class */\n    function() {\n      function Vec32(x2, y, z) {\n        if (!(this instanceof Vec32)) {\n          return new Vec32(x2, y, z);\n        }\n        if (typeof x2 === \"undefined\") {\n          this.x = 0;\n          this.y = 0;\n          this.z = 0;\n        } else if (typeof x2 === \"object\") {\n          this.x = x2.x;\n          this.y = x2.y;\n          this.z = x2.z;\n        } else {\n          this.x = x2;\n          this.y = y;\n          this.z = z;\n        }\n      }\n      Vec32.prototype._serialize = function() {\n        return {\n          x: this.x,\n          y: this.y,\n          z: this.z\n        };\n      };\n      Vec32._deserialize = function(data) {\n        var obj = Object.create(Vec32.prototype);\n        obj.x = data.x;\n        obj.y = data.y;\n        obj.z = data.z;\n        return obj;\n      };\n      Vec32.neo = function(x2, y, z) {\n        var obj = Object.create(Vec32.prototype);\n        obj.x = x2;\n        obj.y = y;\n        obj.z = z;\n        return obj;\n      };\n      Vec32.zero = function() {\n        var obj = Object.create(Vec32.prototype);\n        obj.x = 0;\n        obj.y = 0;\n        obj.z = 0;\n        return obj;\n      };\n      Vec32.clone = function(v3) {\n        return Vec32.neo(v3.x, v3.y, v3.z);\n      };\n      Vec32.prototype.toString = function() {\n        return JSON.stringify(this);\n      };\n      Vec32.isValid = function(obj) {\n        if (obj === null || typeof obj === \"undefined\") {\n          return false;\n        }\n        return Number.isFinite(obj.x) && Number.isFinite(obj.y) && Number.isFinite(obj.z);\n      };\n      Vec32.assert = function(o) {\n      };\n      Vec32.prototype.setZero = function() {\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        return this;\n      };\n      Vec32.prototype.set = function(x2, y, z) {\n        this.x = x2;\n        this.y = y;\n        this.z = z;\n        return this;\n      };\n      Vec32.prototype.add = function(w) {\n        this.x += w.x;\n        this.y += w.y;\n        this.z += w.z;\n        return this;\n      };\n      Vec32.prototype.sub = function(w) {\n        this.x -= w.x;\n        this.y -= w.y;\n        this.z -= w.z;\n        return this;\n      };\n      Vec32.prototype.mul = function(m) {\n        this.x *= m;\n        this.y *= m;\n        this.z *= m;\n        return this;\n      };\n      Vec32.areEqual = function(v3, w) {\n        return v3 === w || typeof v3 === \"object\" && v3 !== null && typeof w === \"object\" && w !== null && v3.x === w.x && v3.y === w.y && v3.z === w.z;\n      };\n      Vec32.dot = function(v3, w) {\n        return v3.x * w.x + v3.y * w.y + v3.z * w.z;\n      };\n      Vec32.cross = function(v3, w) {\n        return new Vec32(v3.y * w.z - v3.z * w.y, v3.z * w.x - v3.x * w.z, v3.x * w.y - v3.y * w.x);\n      };\n      Vec32.add = function(v3, w) {\n        return new Vec32(v3.x + w.x, v3.y + w.y, v3.z + w.z);\n      };\n      Vec32.sub = function(v3, w) {\n        return new Vec32(v3.x - w.x, v3.y - w.y, v3.z - w.z);\n      };\n      Vec32.mul = function(v3, m) {\n        return new Vec32(m * v3.x, m * v3.y, m * v3.z);\n      };\n      Vec32.prototype.neg = function() {\n        this.x = -this.x;\n        this.y = -this.y;\n        this.z = -this.z;\n        return this;\n      };\n      Vec32.neg = function(v3) {\n        return new Vec32(-v3.x, -v3.y, -v3.z);\n      };\n      return Vec32;\n    }()\n  );\n  var v1$2 = vec2(0, 0);\n  var v2$1 = vec2(0, 0);\n  var EdgeShape = (\n    /** @class */\n    function(_super) {\n      __extends(EdgeShape2, _super);\n      function EdgeShape2(v122, v22) {\n        var _this = this;\n        if (!(_this instanceof EdgeShape2)) {\n          return new EdgeShape2(v122, v22);\n        }\n        _this = _super.call(this) || this;\n        _this.m_type = EdgeShape2.TYPE;\n        _this.m_radius = SettingsInternal.polygonRadius;\n        _this.m_vertex1 = v122 ? Vec2.clone(v122) : Vec2.zero();\n        _this.m_vertex2 = v22 ? Vec2.clone(v22) : Vec2.zero();\n        _this.m_vertex0 = Vec2.zero();\n        _this.m_vertex3 = Vec2.zero();\n        _this.m_hasVertex0 = false;\n        _this.m_hasVertex3 = false;\n        return _this;\n      }\n      EdgeShape2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          vertex1: this.m_vertex1,\n          vertex2: this.m_vertex2,\n          vertex0: this.m_vertex0,\n          vertex3: this.m_vertex3,\n          hasVertex0: this.m_hasVertex0,\n          hasVertex3: this.m_hasVertex3\n        };\n      };\n      EdgeShape2._deserialize = function(data) {\n        var shape = new EdgeShape2(data.vertex1, data.vertex2);\n        if (shape.m_hasVertex0) {\n          shape.setPrevVertex(data.vertex0);\n        }\n        if (shape.m_hasVertex3) {\n          shape.setNextVertex(data.vertex3);\n        }\n        return shape;\n      };\n      EdgeShape2.prototype._reset = function() {\n      };\n      EdgeShape2.prototype.getRadius = function() {\n        return this.m_radius;\n      };\n      EdgeShape2.prototype.getType = function() {\n        return this.m_type;\n      };\n      EdgeShape2.prototype.setNext = function(v3) {\n        return this.setNextVertex(v3);\n      };\n      EdgeShape2.prototype.setNextVertex = function(v3) {\n        if (v3) {\n          this.m_vertex3.setVec2(v3);\n          this.m_hasVertex3 = true;\n        } else {\n          this.m_vertex3.setZero();\n          this.m_hasVertex3 = false;\n        }\n        return this;\n      };\n      EdgeShape2.prototype.getNextVertex = function() {\n        return this.m_vertex3;\n      };\n      EdgeShape2.prototype.setPrev = function(v3) {\n        return this.setPrevVertex(v3);\n      };\n      EdgeShape2.prototype.setPrevVertex = function(v3) {\n        if (v3) {\n          this.m_vertex0.setVec2(v3);\n          this.m_hasVertex0 = true;\n        } else {\n          this.m_vertex0.setZero();\n          this.m_hasVertex0 = false;\n        }\n        return this;\n      };\n      EdgeShape2.prototype.getPrevVertex = function() {\n        return this.m_vertex0;\n      };\n      EdgeShape2.prototype._set = function(v122, v22) {\n        this.m_vertex1.setVec2(v122);\n        this.m_vertex2.setVec2(v22);\n        this.m_hasVertex0 = false;\n        this.m_hasVertex3 = false;\n        return this;\n      };\n      EdgeShape2.prototype._clone = function() {\n        var clone = new EdgeShape2();\n        clone.m_type = this.m_type;\n        clone.m_radius = this.m_radius;\n        clone.m_vertex1.setVec2(this.m_vertex1);\n        clone.m_vertex2.setVec2(this.m_vertex2);\n        clone.m_vertex0.setVec2(this.m_vertex0);\n        clone.m_vertex3.setVec2(this.m_vertex3);\n        clone.m_hasVertex0 = this.m_hasVertex0;\n        clone.m_hasVertex3 = this.m_hasVertex3;\n        return clone;\n      };\n      EdgeShape2.prototype.getChildCount = function() {\n        return 1;\n      };\n      EdgeShape2.prototype.testPoint = function(xf2, p) {\n        return false;\n      };\n      EdgeShape2.prototype.rayCast = function(output2, input2, xf2, childIndex) {\n        var p1 = Rot.mulTVec2(xf2.q, Vec2.sub(input2.p1, xf2.p));\n        var p2 = Rot.mulTVec2(xf2.q, Vec2.sub(input2.p2, xf2.p));\n        var d2 = Vec2.sub(p2, p1);\n        var v122 = this.m_vertex1;\n        var v22 = this.m_vertex2;\n        var e3 = Vec2.sub(v22, v122);\n        var normal3 = Vec2.neo(e3.y, -e3.x);\n        normal3.normalize();\n        var numerator = Vec2.dot(normal3, Vec2.sub(v122, p1));\n        var denominator = Vec2.dot(normal3, d2);\n        if (denominator == 0) {\n          return false;\n        }\n        var t = numerator / denominator;\n        if (t < 0 || input2.maxFraction < t) {\n          return false;\n        }\n        var q = Vec2.add(p1, Vec2.mulNumVec2(t, d2));\n        var r = Vec2.sub(v22, v122);\n        var rr = Vec2.dot(r, r);\n        if (rr == 0) {\n          return false;\n        }\n        var s2 = Vec2.dot(Vec2.sub(q, v122), r) / rr;\n        if (s2 < 0 || 1 < s2) {\n          return false;\n        }\n        output2.fraction = t;\n        if (numerator > 0) {\n          output2.normal = Rot.mulVec2(xf2.q, normal3).neg();\n        } else {\n          output2.normal = Rot.mulVec2(xf2.q, normal3);\n        }\n        return true;\n      };\n      EdgeShape2.prototype.computeAABB = function(aabb, xf2, childIndex) {\n        transformVec2(v1$2, xf2, this.m_vertex1);\n        transformVec2(v2$1, xf2, this.m_vertex2);\n        AABB.combinePoints(aabb, v1$2, v2$1);\n        AABB.extend(aabb, this.m_radius);\n      };\n      EdgeShape2.prototype.computeMass = function(massData, density) {\n        massData.mass = 0;\n        combine2Vec2(massData.center, 0.5, this.m_vertex1, 0.5, this.m_vertex2);\n        massData.I = 0;\n      };\n      EdgeShape2.prototype.computeDistanceProxy = function(proxy) {\n        proxy.m_vertices[0] = this.m_vertex1;\n        proxy.m_vertices[1] = this.m_vertex2;\n        proxy.m_vertices.length = 2;\n        proxy.m_count = 2;\n        proxy.m_radius = this.m_radius;\n      };\n      EdgeShape2.TYPE = \"edge\";\n      return EdgeShape2;\n    }(Shape)\n  );\n  var v1$1 = vec2(0, 0);\n  var v2 = vec2(0, 0);\n  var ChainShape = (\n    /** @class */\n    function(_super) {\n      __extends(ChainShape2, _super);\n      function ChainShape2(vertices, loop) {\n        var _this = this;\n        if (!(_this instanceof ChainShape2)) {\n          return new ChainShape2(vertices, loop);\n        }\n        _this = _super.call(this) || this;\n        _this.m_type = ChainShape2.TYPE;\n        _this.m_radius = SettingsInternal.polygonRadius;\n        _this.m_vertices = [];\n        _this.m_count = 0;\n        _this.m_prevVertex = null;\n        _this.m_nextVertex = null;\n        _this.m_hasPrevVertex = false;\n        _this.m_hasNextVertex = false;\n        _this.m_isLoop = !!loop;\n        if (vertices && vertices.length) {\n          if (loop) {\n            _this._createLoop(vertices);\n          } else {\n            _this._createChain(vertices);\n          }\n        }\n        return _this;\n      }\n      ChainShape2.prototype._serialize = function() {\n        var data = {\n          type: this.m_type,\n          vertices: this.m_isLoop ? this.m_vertices.slice(0, this.m_vertices.length - 1) : this.m_vertices,\n          isLoop: this.m_isLoop,\n          hasPrevVertex: this.m_hasPrevVertex,\n          hasNextVertex: this.m_hasNextVertex,\n          prevVertex: null,\n          nextVertex: null\n        };\n        if (this.m_prevVertex) {\n          data.prevVertex = this.m_prevVertex;\n        }\n        if (this.m_nextVertex) {\n          data.nextVertex = this.m_nextVertex;\n        }\n        return data;\n      };\n      ChainShape2._deserialize = function(data, fixture, restore) {\n        var vertices = [];\n        if (data.vertices) {\n          for (var i = 0; i < data.vertices.length; i++) {\n            vertices.push(restore(Vec2, data.vertices[i]));\n          }\n        }\n        var shape = new ChainShape2(vertices, data.isLoop);\n        if (data.prevVertex) {\n          shape.setPrevVertex(data.prevVertex);\n        }\n        if (data.nextVertex) {\n          shape.setNextVertex(data.nextVertex);\n        }\n        return shape;\n      };\n      ChainShape2.prototype.getType = function() {\n        return this.m_type;\n      };\n      ChainShape2.prototype.getRadius = function() {\n        return this.m_radius;\n      };\n      ChainShape2.prototype._createLoop = function(vertices) {\n        if (vertices.length < 3) {\n          return;\n        }\n        var i;\n        this.m_vertices = [];\n        this.m_count = vertices.length + 1;\n        for (var i = 0; i < vertices.length; ++i) {\n          this.m_vertices[i] = Vec2.clone(vertices[i]);\n        }\n        this.m_vertices[vertices.length] = Vec2.clone(vertices[0]);\n        this.m_prevVertex = this.m_vertices[this.m_count - 2];\n        this.m_nextVertex = this.m_vertices[1];\n        this.m_hasPrevVertex = true;\n        this.m_hasNextVertex = true;\n        return this;\n      };\n      ChainShape2.prototype._createChain = function(vertices) {\n        var i;\n        this.m_vertices = [];\n        this.m_count = vertices.length;\n        for (var i = 0; i < vertices.length; ++i) {\n          this.m_vertices[i] = Vec2.clone(vertices[i]);\n        }\n        this.m_prevVertex = null;\n        this.m_nextVertex = null;\n        this.m_hasPrevVertex = false;\n        this.m_hasNextVertex = false;\n        return this;\n      };\n      ChainShape2.prototype._reset = function() {\n        if (this.m_isLoop) {\n          this._createLoop(this.m_vertices.slice(0, this.m_vertices.length - 1));\n        } else {\n          this._createChain(this.m_vertices);\n        }\n      };\n      ChainShape2.prototype.setPrevVertex = function(prevVertex) {\n        this.m_prevVertex = prevVertex;\n        this.m_hasPrevVertex = true;\n      };\n      ChainShape2.prototype.getPrevVertex = function() {\n        return this.m_prevVertex;\n      };\n      ChainShape2.prototype.setNextVertex = function(nextVertex) {\n        this.m_nextVertex = nextVertex;\n        this.m_hasNextVertex = true;\n      };\n      ChainShape2.prototype.getNextVertex = function() {\n        return this.m_nextVertex;\n      };\n      ChainShape2.prototype._clone = function() {\n        var clone = new ChainShape2();\n        clone._createChain(this.m_vertices);\n        clone.m_type = this.m_type;\n        clone.m_radius = this.m_radius;\n        clone.m_prevVertex = this.m_prevVertex;\n        clone.m_nextVertex = this.m_nextVertex;\n        clone.m_hasPrevVertex = this.m_hasPrevVertex;\n        clone.m_hasNextVertex = this.m_hasNextVertex;\n        return clone;\n      };\n      ChainShape2.prototype.getChildCount = function() {\n        return this.m_count - 1;\n      };\n      ChainShape2.prototype.getChildEdge = function(edge, childIndex) {\n        edge.m_type = EdgeShape.TYPE;\n        edge.m_radius = this.m_radius;\n        edge.m_vertex1 = this.m_vertices[childIndex];\n        edge.m_vertex2 = this.m_vertices[childIndex + 1];\n        if (childIndex > 0) {\n          edge.m_vertex0 = this.m_vertices[childIndex - 1];\n          edge.m_hasVertex0 = true;\n        } else {\n          edge.m_vertex0 = this.m_prevVertex;\n          edge.m_hasVertex0 = this.m_hasPrevVertex;\n        }\n        if (childIndex < this.m_count - 2) {\n          edge.m_vertex3 = this.m_vertices[childIndex + 2];\n          edge.m_hasVertex3 = true;\n        } else {\n          edge.m_vertex3 = this.m_nextVertex;\n          edge.m_hasVertex3 = this.m_hasNextVertex;\n        }\n      };\n      ChainShape2.prototype.getVertex = function(index) {\n        if (index < this.m_count) {\n          return this.m_vertices[index];\n        } else {\n          return this.m_vertices[0];\n        }\n      };\n      ChainShape2.prototype.isLoop = function() {\n        return this.m_isLoop;\n      };\n      ChainShape2.prototype.testPoint = function(xf2, p) {\n        return false;\n      };\n      ChainShape2.prototype.rayCast = function(output2, input2, xf2, childIndex) {\n        var edgeShape = new EdgeShape(this.getVertex(childIndex), this.getVertex(childIndex + 1));\n        return edgeShape.rayCast(output2, input2, xf2, 0);\n      };\n      ChainShape2.prototype.computeAABB = function(aabb, xf2, childIndex) {\n        transformVec2(v1$1, xf2, this.getVertex(childIndex));\n        transformVec2(v2, xf2, this.getVertex(childIndex + 1));\n        AABB.combinePoints(aabb, v1$1, v2);\n      };\n      ChainShape2.prototype.computeMass = function(massData, density) {\n        massData.mass = 0;\n        zeroVec2(massData.center);\n        massData.I = 0;\n      };\n      ChainShape2.prototype.computeDistanceProxy = function(proxy, childIndex) {\n        proxy.m_vertices[0] = this.getVertex(childIndex);\n        proxy.m_vertices[1] = this.getVertex(childIndex + 1);\n        proxy.m_count = 2;\n        proxy.m_radius = this.m_radius;\n      };\n      ChainShape2.TYPE = \"chain\";\n      return ChainShape2;\n    }(Shape)\n  );\n  var math_max$1 = Math.max;\n  var math_min$3 = Math.min;\n  var temp$1 = vec2(0, 0);\n  var e$1 = vec2(0, 0);\n  var e1$1 = vec2(0, 0);\n  var e2$1 = vec2(0, 0);\n  var center = vec2(0, 0);\n  var s = vec2(0, 0);\n  var PolygonShape = (\n    /** @class */\n    function(_super) {\n      __extends(PolygonShape2, _super);\n      function PolygonShape2(vertices) {\n        var _this = this;\n        if (!(_this instanceof PolygonShape2)) {\n          return new PolygonShape2(vertices);\n        }\n        _this = _super.call(this) || this;\n        _this.m_type = PolygonShape2.TYPE;\n        _this.m_radius = SettingsInternal.polygonRadius;\n        _this.m_centroid = Vec2.zero();\n        _this.m_vertices = [];\n        _this.m_normals = [];\n        _this.m_count = 0;\n        if (vertices && vertices.length) {\n          _this._set(vertices);\n        }\n        return _this;\n      }\n      PolygonShape2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          vertices: this.m_vertices\n        };\n      };\n      PolygonShape2._deserialize = function(data, fixture, restore) {\n        var vertices = [];\n        if (data.vertices) {\n          for (var i = 0; i < data.vertices.length; i++) {\n            vertices.push(restore(Vec2, data.vertices[i]));\n          }\n        }\n        var shape = new PolygonShape2(vertices);\n        return shape;\n      };\n      PolygonShape2.prototype.getType = function() {\n        return this.m_type;\n      };\n      PolygonShape2.prototype.getRadius = function() {\n        return this.m_radius;\n      };\n      PolygonShape2.prototype._clone = function() {\n        var clone = new PolygonShape2();\n        clone.m_type = this.m_type;\n        clone.m_radius = this.m_radius;\n        clone.m_count = this.m_count;\n        clone.m_centroid.setVec2(this.m_centroid);\n        for (var i = 0; i < this.m_count; i++) {\n          clone.m_vertices.push(this.m_vertices[i].clone());\n        }\n        for (var i = 0; i < this.m_normals.length; i++) {\n          clone.m_normals.push(this.m_normals[i].clone());\n        }\n        return clone;\n      };\n      PolygonShape2.prototype.getChildCount = function() {\n        return 1;\n      };\n      PolygonShape2.prototype._reset = function() {\n        this._set(this.m_vertices);\n      };\n      PolygonShape2.prototype._set = function(vertices) {\n        if (vertices.length < 3) {\n          this._setAsBox(1, 1);\n          return;\n        }\n        var n2 = math_min$3(vertices.length, SettingsInternal.maxPolygonVertices);\n        var ps = [];\n        for (var i = 0; i < n2; ++i) {\n          var v3 = vertices[i];\n          var unique = true;\n          for (var j = 0; j < ps.length; ++j) {\n            if (Vec2.distanceSquared(v3, ps[j]) < 0.25 * SettingsInternal.linearSlopSquared) {\n              unique = false;\n              break;\n            }\n          }\n          if (unique) {\n            ps.push(Vec2.clone(v3));\n          }\n        }\n        n2 = ps.length;\n        if (n2 < 3) {\n          this._setAsBox(1, 1);\n          return;\n        }\n        var i0 = 0;\n        var x0 = ps[0].x;\n        for (var i = 1; i < n2; ++i) {\n          var x2 = ps[i].x;\n          if (x2 > x0 || x2 === x0 && ps[i].y < ps[i0].y) {\n            i0 = i;\n            x0 = x2;\n          }\n        }\n        var hull = [];\n        var m = 0;\n        var ih = i0;\n        while (true) {\n          hull[m] = ih;\n          var ie2 = 0;\n          for (var j = 1; j < n2; ++j) {\n            if (ie2 === ih) {\n              ie2 = j;\n              continue;\n            }\n            var r = Vec2.sub(ps[ie2], ps[hull[m]]);\n            var v3 = Vec2.sub(ps[j], ps[hull[m]]);\n            var c2 = Vec2.crossVec2Vec2(r, v3);\n            if (c2 < 0) {\n              ie2 = j;\n            }\n            if (c2 === 0 && v3.lengthSquared() > r.lengthSquared()) {\n              ie2 = j;\n            }\n          }\n          ++m;\n          ih = ie2;\n          if (ie2 === i0) {\n            break;\n          }\n        }\n        if (m < 3) {\n          this._setAsBox(1, 1);\n          return;\n        }\n        this.m_count = m;\n        this.m_vertices = [];\n        for (var i = 0; i < m; ++i) {\n          this.m_vertices[i] = ps[hull[i]];\n        }\n        for (var i = 0; i < m; ++i) {\n          var i1 = i;\n          var i2 = i + 1 < m ? i + 1 : 0;\n          var edge = Vec2.sub(this.m_vertices[i2], this.m_vertices[i1]);\n          this.m_normals[i] = Vec2.crossVec2Num(edge, 1);\n          this.m_normals[i].normalize();\n        }\n        this.m_centroid = computeCentroid(this.m_vertices, m);\n      };\n      PolygonShape2.prototype._setAsBox = function(hx, hy, center2, angle) {\n        this.m_vertices[0] = Vec2.neo(hx, -hy);\n        this.m_vertices[1] = Vec2.neo(hx, hy);\n        this.m_vertices[2] = Vec2.neo(-hx, hy);\n        this.m_vertices[3] = Vec2.neo(-hx, -hy);\n        this.m_normals[0] = Vec2.neo(1, 0);\n        this.m_normals[1] = Vec2.neo(0, 1);\n        this.m_normals[2] = Vec2.neo(-1, 0);\n        this.m_normals[3] = Vec2.neo(0, -1);\n        this.m_count = 4;\n        if (center2 && Vec2.isValid(center2)) {\n          angle = angle || 0;\n          copyVec2(this.m_centroid, center2);\n          var xf2 = Transform.identity();\n          xf2.p.setVec2(center2);\n          xf2.q.setAngle(angle);\n          for (var i = 0; i < this.m_count; ++i) {\n            this.m_vertices[i] = Transform.mulVec2(xf2, this.m_vertices[i]);\n            this.m_normals[i] = Rot.mulVec2(xf2.q, this.m_normals[i]);\n          }\n        }\n      };\n      PolygonShape2.prototype.testPoint = function(xf2, p) {\n        var pLocal = detransformVec2(temp$1, xf2, p);\n        for (var i = 0; i < this.m_count; ++i) {\n          var dot = dotVec2(this.m_normals[i], pLocal) - dotVec2(this.m_normals[i], this.m_vertices[i]);\n          if (dot > 0) {\n            return false;\n          }\n        }\n        return true;\n      };\n      PolygonShape2.prototype.rayCast = function(output2, input2, xf2, childIndex) {\n        var p1 = Rot.mulTVec2(xf2.q, Vec2.sub(input2.p1, xf2.p));\n        var p2 = Rot.mulTVec2(xf2.q, Vec2.sub(input2.p2, xf2.p));\n        var d2 = Vec2.sub(p2, p1);\n        var lower = 0;\n        var upper = input2.maxFraction;\n        var index = -1;\n        for (var i = 0; i < this.m_count; ++i) {\n          var numerator = Vec2.dot(this.m_normals[i], Vec2.sub(this.m_vertices[i], p1));\n          var denominator = Vec2.dot(this.m_normals[i], d2);\n          if (denominator == 0) {\n            if (numerator < 0) {\n              return false;\n            }\n          } else {\n            if (denominator < 0 && numerator < lower * denominator) {\n              lower = numerator / denominator;\n              index = i;\n            } else if (denominator > 0 && numerator < upper * denominator) {\n              upper = numerator / denominator;\n            }\n          }\n          if (upper < lower) {\n            return false;\n          }\n        }\n        if (index >= 0) {\n          output2.fraction = lower;\n          output2.normal = Rot.mulVec2(xf2.q, this.m_normals[index]);\n          return true;\n        }\n        return false;\n      };\n      PolygonShape2.prototype.computeAABB = function(aabb, xf2, childIndex) {\n        var minX = Infinity;\n        var minY = Infinity;\n        var maxX = -Infinity;\n        var maxY = -Infinity;\n        for (var i = 0; i < this.m_count; ++i) {\n          var v3 = transformVec2(temp$1, xf2, this.m_vertices[i]);\n          minX = math_min$3(minX, v3.x);\n          maxX = math_max$1(maxX, v3.x);\n          minY = math_min$3(minY, v3.y);\n          maxY = math_max$1(maxY, v3.y);\n        }\n        setVec2(aabb.lowerBound, minX - this.m_radius, minY - this.m_radius);\n        setVec2(aabb.upperBound, maxX + this.m_radius, maxY + this.m_radius);\n      };\n      PolygonShape2.prototype.computeMass = function(massData, density) {\n        zeroVec2(center);\n        var area = 0;\n        var I = 0;\n        zeroVec2(s);\n        for (var i = 0; i < this.m_count; ++i) {\n          plusVec2(s, this.m_vertices[i]);\n        }\n        scaleVec2(s, 1 / this.m_count, s);\n        var k_inv3 = 1 / 3;\n        for (var i = 0; i < this.m_count; ++i) {\n          subVec2(e1$1, this.m_vertices[i], s);\n          if (i + 1 < this.m_count) {\n            subVec2(e2$1, this.m_vertices[i + 1], s);\n          } else {\n            subVec2(e2$1, this.m_vertices[0], s);\n          }\n          var D = crossVec2Vec2(e1$1, e2$1);\n          var triangleArea = 0.5 * D;\n          area += triangleArea;\n          combine2Vec2(temp$1, triangleArea * k_inv3, e1$1, triangleArea * k_inv3, e2$1);\n          plusVec2(center, temp$1);\n          var ex1 = e1$1.x;\n          var ey1 = e1$1.y;\n          var ex2 = e2$1.x;\n          var ey2 = e2$1.y;\n          var intx2 = ex1 * ex1 + ex2 * ex1 + ex2 * ex2;\n          var inty2 = ey1 * ey1 + ey2 * ey1 + ey2 * ey2;\n          I += 0.25 * k_inv3 * D * (intx2 + inty2);\n        }\n        massData.mass = density * area;\n        scaleVec2(center, 1 / area, center);\n        addVec2(massData.center, center, s);\n        massData.I = density * I;\n        massData.I += massData.mass * (dotVec2(massData.center, massData.center) - dotVec2(center, center));\n      };\n      PolygonShape2.prototype.validate = function() {\n        for (var i = 0; i < this.m_count; ++i) {\n          var i1 = i;\n          var i2 = i < this.m_count - 1 ? i1 + 1 : 0;\n          var p = this.m_vertices[i1];\n          subVec2(e$1, this.m_vertices[i2], p);\n          for (var j = 0; j < this.m_count; ++j) {\n            if (j == i1 || j == i2) {\n              continue;\n            }\n            var c2 = crossVec2Vec2(e$1, subVec2(temp$1, this.m_vertices[j], p));\n            if (c2 < 0) {\n              return false;\n            }\n          }\n        }\n        return true;\n      };\n      PolygonShape2.prototype.computeDistanceProxy = function(proxy) {\n        for (var i = 0; i < this.m_count; ++i) {\n          proxy.m_vertices[i] = this.m_vertices[i];\n        }\n        proxy.m_vertices.length = this.m_count;\n        proxy.m_count = this.m_count;\n        proxy.m_radius = this.m_radius;\n      };\n      PolygonShape2.TYPE = \"polygon\";\n      return PolygonShape2;\n    }(Shape)\n  );\n  function computeCentroid(vs, count) {\n    var c2 = Vec2.zero();\n    var area = 0;\n    var pRef = Vec2.zero();\n    var i;\n    var inv3 = 1 / 3;\n    for (var i = 0; i < count; ++i) {\n      var p1 = pRef;\n      var p2 = vs[i];\n      var p3 = i + 1 < count ? vs[i + 1] : vs[0];\n      var e1_1 = Vec2.sub(p2, p1);\n      var e2_1 = Vec2.sub(p3, p1);\n      var D = Vec2.crossVec2Vec2(e1_1, e2_1);\n      var triangleArea = 0.5 * D;\n      area += triangleArea;\n      combine3Vec2(temp$1, 1, p1, 1, p2, 1, p3);\n      plusScaleVec2(c2, triangleArea * inv3, temp$1);\n    }\n    c2.mul(1 / area);\n    return c2;\n  }\n  var math_sqrt = Math.sqrt;\n  var math_PI$4 = Math.PI;\n  var temp = vec2(0, 0);\n  var CircleShape = (\n    /** @class */\n    function(_super) {\n      __extends(CircleShape2, _super);\n      function CircleShape2(a2, b2) {\n        var _this = this;\n        if (!(_this instanceof CircleShape2)) {\n          return new CircleShape2(a2, b2);\n        }\n        _this = _super.call(this) || this;\n        _this.m_type = CircleShape2.TYPE;\n        _this.m_p = Vec2.zero();\n        _this.m_radius = 1;\n        if (typeof a2 === \"object\" && Vec2.isValid(a2)) {\n          _this.m_p.setVec2(a2);\n          if (typeof b2 === \"number\") {\n            _this.m_radius = b2;\n          }\n        } else if (typeof a2 === \"number\") {\n          _this.m_radius = a2;\n        }\n        return _this;\n      }\n      CircleShape2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          p: this.m_p,\n          radius: this.m_radius\n        };\n      };\n      CircleShape2._deserialize = function(data) {\n        return new CircleShape2(data.p, data.radius);\n      };\n      CircleShape2.prototype._reset = function() {\n      };\n      CircleShape2.prototype.getType = function() {\n        return this.m_type;\n      };\n      CircleShape2.prototype.getRadius = function() {\n        return this.m_radius;\n      };\n      CircleShape2.prototype.getCenter = function() {\n        return this.m_p;\n      };\n      CircleShape2.prototype._clone = function() {\n        var clone = new CircleShape2();\n        clone.m_type = this.m_type;\n        clone.m_radius = this.m_radius;\n        clone.m_p = this.m_p.clone();\n        return clone;\n      };\n      CircleShape2.prototype.getChildCount = function() {\n        return 1;\n      };\n      CircleShape2.prototype.testPoint = function(xf2, p) {\n        var center2 = transformVec2(temp, xf2, this.m_p);\n        return distSqrVec2(p, center2) <= this.m_radius * this.m_radius;\n      };\n      CircleShape2.prototype.rayCast = function(output2, input2, xf2, childIndex) {\n        var position = Vec2.add(xf2.p, Rot.mulVec2(xf2.q, this.m_p));\n        var s2 = Vec2.sub(input2.p1, position);\n        var b2 = Vec2.dot(s2, s2) - this.m_radius * this.m_radius;\n        var r = Vec2.sub(input2.p2, input2.p1);\n        var c2 = Vec2.dot(s2, r);\n        var rr = Vec2.dot(r, r);\n        var sigma = c2 * c2 - rr * b2;\n        if (sigma < 0 || rr < EPSILON) {\n          return false;\n        }\n        var a2 = -(c2 + math_sqrt(sigma));\n        if (0 <= a2 && a2 <= input2.maxFraction * rr) {\n          a2 /= rr;\n          output2.fraction = a2;\n          output2.normal = Vec2.add(s2, Vec2.mulNumVec2(a2, r));\n          output2.normal.normalize();\n          return true;\n        }\n        return false;\n      };\n      CircleShape2.prototype.computeAABB = function(aabb, xf2, childIndex) {\n        var p = transformVec2(temp, xf2, this.m_p);\n        setVec2(aabb.lowerBound, p.x - this.m_radius, p.y - this.m_radius);\n        setVec2(aabb.upperBound, p.x + this.m_radius, p.y + this.m_radius);\n      };\n      CircleShape2.prototype.computeMass = function(massData, density) {\n        massData.mass = density * math_PI$4 * this.m_radius * this.m_radius;\n        copyVec2(massData.center, this.m_p);\n        massData.I = massData.mass * (0.5 * this.m_radius * this.m_radius + lengthSqrVec2(this.m_p));\n      };\n      CircleShape2.prototype.computeDistanceProxy = function(proxy) {\n        proxy.m_vertices[0] = this.m_p;\n        proxy.m_vertices.length = 1;\n        proxy.m_count = 1;\n        proxy.m_radius = this.m_radius;\n      };\n      CircleShape2.TYPE = \"circle\";\n      return CircleShape2;\n    }(Shape)\n  );\n  var math_abs$5 = Math.abs;\n  var math_PI$3 = Math.PI;\n  var DEFAULTS$a = {\n    frequencyHz: 0,\n    dampingRatio: 0\n  };\n  var DistanceJoint = (\n    /** @class */\n    function(_super) {\n      __extends(DistanceJoint2, _super);\n      function DistanceJoint2(def, bodyA, bodyB, anchorA, anchorB) {\n        var _this = this;\n        if (!(_this instanceof DistanceJoint2)) {\n          return new DistanceJoint2(def, bodyA, bodyB, anchorA, anchorB);\n        }\n        if (bodyB && anchorA && \"m_type\" in anchorA && \"x\" in bodyB && \"y\" in bodyB) {\n          var temp3 = bodyB;\n          bodyB = anchorA;\n          anchorA = temp3;\n        }\n        def = options(def, DEFAULTS$a);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = DistanceJoint2.TYPE;\n        _this.m_localAnchorA = Vec2.clone(anchorA ? bodyA.getLocalPoint(anchorA) : def.localAnchorA || Vec2.zero());\n        _this.m_localAnchorB = Vec2.clone(anchorB ? bodyB.getLocalPoint(anchorB) : def.localAnchorB || Vec2.zero());\n        _this.m_length = Number.isFinite(def.length) ? def.length : Vec2.distance(bodyA.getWorldPoint(_this.m_localAnchorA), bodyB.getWorldPoint(_this.m_localAnchorB));\n        _this.m_frequencyHz = def.frequencyHz;\n        _this.m_dampingRatio = def.dampingRatio;\n        _this.m_impulse = 0;\n        _this.m_gamma = 0;\n        _this.m_bias = 0;\n        return _this;\n      }\n      DistanceJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          frequencyHz: this.m_frequencyHz,\n          dampingRatio: this.m_dampingRatio,\n          localAnchorA: this.m_localAnchorA,\n          localAnchorB: this.m_localAnchorB,\n          length: this.m_length,\n          impulse: this.m_impulse,\n          gamma: this.m_gamma,\n          bias: this.m_bias\n        };\n      };\n      DistanceJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        var joint = new DistanceJoint2(data);\n        return joint;\n      };\n      DistanceJoint2.prototype._reset = function(def) {\n        if (def.anchorA) {\n          this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(def.anchorA));\n        } else if (def.localAnchorA) {\n          this.m_localAnchorA.setVec2(def.localAnchorA);\n        }\n        if (def.anchorB) {\n          this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(def.anchorB));\n        } else if (def.localAnchorB) {\n          this.m_localAnchorB.setVec2(def.localAnchorB);\n        }\n        if (def.length > 0) {\n          this.m_length = +def.length;\n        } else if (def.length < 0) ;\n        else if (def.anchorA || def.anchorA || def.anchorA || def.anchorA) {\n          this.m_length = Vec2.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA), this.m_bodyB.getWorldPoint(this.m_localAnchorB));\n        }\n        if (Number.isFinite(def.frequencyHz)) {\n          this.m_frequencyHz = def.frequencyHz;\n        }\n        if (Number.isFinite(def.dampingRatio)) {\n          this.m_dampingRatio = def.dampingRatio;\n        }\n      };\n      DistanceJoint2.prototype.getLocalAnchorA = function() {\n        return this.m_localAnchorA;\n      };\n      DistanceJoint2.prototype.getLocalAnchorB = function() {\n        return this.m_localAnchorB;\n      };\n      DistanceJoint2.prototype.setLength = function(length) {\n        this.m_length = length;\n      };\n      DistanceJoint2.prototype.getLength = function() {\n        return this.m_length;\n      };\n      DistanceJoint2.prototype.setFrequency = function(hz) {\n        this.m_frequencyHz = hz;\n      };\n      DistanceJoint2.prototype.getFrequency = function() {\n        return this.m_frequencyHz;\n      };\n      DistanceJoint2.prototype.setDampingRatio = function(ratio) {\n        this.m_dampingRatio = ratio;\n      };\n      DistanceJoint2.prototype.getDampingRatio = function() {\n        return this.m_dampingRatio;\n      };\n      DistanceJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      DistanceJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      DistanceJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.mulNumVec2(this.m_impulse, this.m_u).mul(inv_dt);\n      };\n      DistanceJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return 0;\n      };\n      DistanceJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        this.m_rA = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        this.m_rB = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        this.m_u = Vec2.sub(Vec2.add(cB2, this.m_rB), Vec2.add(cA2, this.m_rA));\n        var length = this.m_u.length();\n        if (length > SettingsInternal.linearSlop) {\n          this.m_u.mul(1 / length);\n        } else {\n          this.m_u.setNum(0, 0);\n        }\n        var crAu = Vec2.crossVec2Vec2(this.m_rA, this.m_u);\n        var crBu = Vec2.crossVec2Vec2(this.m_rB, this.m_u);\n        var invMass = this.m_invMassA + this.m_invIA * crAu * crAu + this.m_invMassB + this.m_invIB * crBu * crBu;\n        this.m_mass = invMass != 0 ? 1 / invMass : 0;\n        if (this.m_frequencyHz > 0) {\n          var C = length - this.m_length;\n          var omega = 2 * math_PI$3 * this.m_frequencyHz;\n          var d2 = 2 * this.m_mass * this.m_dampingRatio * omega;\n          var k = this.m_mass * omega * omega;\n          var h = step.dt;\n          this.m_gamma = h * (d2 + h * k);\n          this.m_gamma = this.m_gamma != 0 ? 1 / this.m_gamma : 0;\n          this.m_bias = C * h * k * this.m_gamma;\n          invMass += this.m_gamma;\n          this.m_mass = invMass != 0 ? 1 / invMass : 0;\n        } else {\n          this.m_gamma = 0;\n          this.m_bias = 0;\n        }\n        if (step.warmStarting) {\n          this.m_impulse *= step.dtRatio;\n          var P3 = Vec2.mulNumVec2(this.m_impulse, this.m_u);\n          vA2.subMul(this.m_invMassA, P3);\n          wA -= this.m_invIA * Vec2.crossVec2Vec2(this.m_rA, P3);\n          vB2.addMul(this.m_invMassB, P3);\n          wB += this.m_invIB * Vec2.crossVec2Vec2(this.m_rB, P3);\n        } else {\n          this.m_impulse = 0;\n        }\n        this.m_bodyA.c_velocity.v.setVec2(vA2);\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v.setVec2(vB2);\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      DistanceJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var vpA = Vec2.add(vA2, Vec2.crossNumVec2(wA, this.m_rA));\n        var vpB = Vec2.add(vB2, Vec2.crossNumVec2(wB, this.m_rB));\n        var Cdot = Vec2.dot(this.m_u, vpB) - Vec2.dot(this.m_u, vpA);\n        var impulse = -this.m_mass * (Cdot + this.m_bias + this.m_gamma * this.m_impulse);\n        this.m_impulse += impulse;\n        var P3 = Vec2.mulNumVec2(impulse, this.m_u);\n        vA2.subMul(this.m_invMassA, P3);\n        wA -= this.m_invIA * Vec2.crossVec2Vec2(this.m_rA, P3);\n        vB2.addMul(this.m_invMassB, P3);\n        wB += this.m_invIB * Vec2.crossVec2Vec2(this.m_rB, P3);\n        this.m_bodyA.c_velocity.v.setVec2(vA2);\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v.setVec2(vB2);\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      DistanceJoint2.prototype.solvePositionConstraints = function(step) {\n        if (this.m_frequencyHz > 0) {\n          return true;\n        }\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var rA2 = Rot.mulSub(qA, this.m_localAnchorA, this.m_localCenterA);\n        var rB2 = Rot.mulSub(qB, this.m_localAnchorB, this.m_localCenterB);\n        var u = Vec2.sub(Vec2.add(cB2, rB2), Vec2.add(cA2, rA2));\n        var length = u.normalize();\n        var C = clamp(length - this.m_length, -SettingsInternal.maxLinearCorrection, SettingsInternal.maxLinearCorrection);\n        var impulse = -this.m_mass * C;\n        var P3 = Vec2.mulNumVec2(impulse, u);\n        cA2.subMul(this.m_invMassA, P3);\n        aA -= this.m_invIA * Vec2.crossVec2Vec2(rA2, P3);\n        cB2.addMul(this.m_invMassB, P3);\n        aB += this.m_invIB * Vec2.crossVec2Vec2(rB2, P3);\n        this.m_bodyA.c_position.c.setVec2(cA2);\n        this.m_bodyA.c_position.a = aA;\n        this.m_bodyB.c_position.c.setVec2(cB2);\n        this.m_bodyB.c_position.a = aB;\n        return math_abs$5(C) < SettingsInternal.linearSlop;\n      };\n      DistanceJoint2.TYPE = \"distance-joint\";\n      return DistanceJoint2;\n    }(Joint)\n  );\n  var DEFAULTS$9 = {\n    maxForce: 0,\n    maxTorque: 0\n  };\n  var FrictionJoint = (\n    /** @class */\n    function(_super) {\n      __extends(FrictionJoint2, _super);\n      function FrictionJoint2(def, bodyA, bodyB, anchor) {\n        var _this = this;\n        if (!(_this instanceof FrictionJoint2)) {\n          return new FrictionJoint2(def, bodyA, bodyB, anchor);\n        }\n        def = options(def, DEFAULTS$9);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = FrictionJoint2.TYPE;\n        _this.m_localAnchorA = Vec2.clone(anchor ? bodyA.getLocalPoint(anchor) : def.localAnchorA || Vec2.zero());\n        _this.m_localAnchorB = Vec2.clone(anchor ? bodyB.getLocalPoint(anchor) : def.localAnchorB || Vec2.zero());\n        _this.m_linearImpulse = Vec2.zero();\n        _this.m_angularImpulse = 0;\n        _this.m_maxForce = def.maxForce;\n        _this.m_maxTorque = def.maxTorque;\n        return _this;\n      }\n      FrictionJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          maxForce: this.m_maxForce,\n          maxTorque: this.m_maxTorque,\n          localAnchorA: this.m_localAnchorA,\n          localAnchorB: this.m_localAnchorB\n        };\n      };\n      FrictionJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        var joint = new FrictionJoint2(data);\n        return joint;\n      };\n      FrictionJoint2.prototype._reset = function(def) {\n        if (def.anchorA) {\n          this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(def.anchorA));\n        } else if (def.localAnchorA) {\n          this.m_localAnchorA.setVec2(def.localAnchorA);\n        }\n        if (def.anchorB) {\n          this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(def.anchorB));\n        } else if (def.localAnchorB) {\n          this.m_localAnchorB.setVec2(def.localAnchorB);\n        }\n        if (Number.isFinite(def.maxForce)) {\n          this.m_maxForce = def.maxForce;\n        }\n        if (Number.isFinite(def.maxTorque)) {\n          this.m_maxTorque = def.maxTorque;\n        }\n      };\n      FrictionJoint2.prototype.getLocalAnchorA = function() {\n        return this.m_localAnchorA;\n      };\n      FrictionJoint2.prototype.getLocalAnchorB = function() {\n        return this.m_localAnchorB;\n      };\n      FrictionJoint2.prototype.setMaxForce = function(force) {\n        this.m_maxForce = force;\n      };\n      FrictionJoint2.prototype.getMaxForce = function() {\n        return this.m_maxForce;\n      };\n      FrictionJoint2.prototype.setMaxTorque = function(torque) {\n        this.m_maxTorque = torque;\n      };\n      FrictionJoint2.prototype.getMaxTorque = function() {\n        return this.m_maxTorque;\n      };\n      FrictionJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      FrictionJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      FrictionJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.mulNumVec2(inv_dt, this.m_linearImpulse);\n      };\n      FrictionJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return inv_dt * this.m_angularImpulse;\n      };\n      FrictionJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        this.m_rA = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        this.m_rB = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var K = new Mat22();\n        K.ex.x = mA + mB + iA * this.m_rA.y * this.m_rA.y + iB * this.m_rB.y * this.m_rB.y;\n        K.ex.y = -iA * this.m_rA.x * this.m_rA.y - iB * this.m_rB.x * this.m_rB.y;\n        K.ey.x = K.ex.y;\n        K.ey.y = mA + mB + iA * this.m_rA.x * this.m_rA.x + iB * this.m_rB.x * this.m_rB.x;\n        this.m_linearMass = K.getInverse();\n        this.m_angularMass = iA + iB;\n        if (this.m_angularMass > 0) {\n          this.m_angularMass = 1 / this.m_angularMass;\n        }\n        if (step.warmStarting) {\n          this.m_linearImpulse.mul(step.dtRatio);\n          this.m_angularImpulse *= step.dtRatio;\n          var P3 = Vec2.neo(this.m_linearImpulse.x, this.m_linearImpulse.y);\n          vA2.subMul(mA, P3);\n          wA -= iA * (Vec2.crossVec2Vec2(this.m_rA, P3) + this.m_angularImpulse);\n          vB2.addMul(mB, P3);\n          wB += iB * (Vec2.crossVec2Vec2(this.m_rB, P3) + this.m_angularImpulse);\n        } else {\n          this.m_linearImpulse.setZero();\n          this.m_angularImpulse = 0;\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      FrictionJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var h = step.dt;\n        {\n          var Cdot = wB - wA;\n          var impulse = -this.m_angularMass * Cdot;\n          var oldImpulse = this.m_angularImpulse;\n          var maxImpulse = h * this.m_maxTorque;\n          this.m_angularImpulse = clamp(this.m_angularImpulse + impulse, -maxImpulse, maxImpulse);\n          impulse = this.m_angularImpulse - oldImpulse;\n          wA -= iA * impulse;\n          wB += iB * impulse;\n        }\n        {\n          var Cdot = Vec2.sub(Vec2.add(vB2, Vec2.crossNumVec2(wB, this.m_rB)), Vec2.add(vA2, Vec2.crossNumVec2(wA, this.m_rA)));\n          var impulse = Vec2.neg(Mat22.mulVec2(this.m_linearMass, Cdot));\n          var oldImpulse = this.m_linearImpulse;\n          this.m_linearImpulse.add(impulse);\n          var maxImpulse = h * this.m_maxForce;\n          if (this.m_linearImpulse.lengthSquared() > maxImpulse * maxImpulse) {\n            this.m_linearImpulse.normalize();\n            this.m_linearImpulse.mul(maxImpulse);\n          }\n          impulse = Vec2.sub(this.m_linearImpulse, oldImpulse);\n          vA2.subMul(mA, impulse);\n          wA -= iA * Vec2.crossVec2Vec2(this.m_rA, impulse);\n          vB2.addMul(mB, impulse);\n          wB += iB * Vec2.crossVec2Vec2(this.m_rB, impulse);\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      FrictionJoint2.prototype.solvePositionConstraints = function(step) {\n        return true;\n      };\n      FrictionJoint2.TYPE = \"friction-joint\";\n      return FrictionJoint2;\n    }(Joint)\n  );\n  var Mat33 = (\n    /** @class */\n    function() {\n      function Mat332(a2, b2, c2) {\n        if (typeof a2 === \"object\" && a2 !== null) {\n          this.ex = Vec3.clone(a2);\n          this.ey = Vec3.clone(b2);\n          this.ez = Vec3.clone(c2);\n        } else {\n          this.ex = Vec3.zero();\n          this.ey = Vec3.zero();\n          this.ez = Vec3.zero();\n        }\n      }\n      Mat332.prototype.toString = function() {\n        return JSON.stringify(this);\n      };\n      Mat332.isValid = function(obj) {\n        if (obj === null || typeof obj === \"undefined\") {\n          return false;\n        }\n        return Vec3.isValid(obj.ex) && Vec3.isValid(obj.ey) && Vec3.isValid(obj.ez);\n      };\n      Mat332.assert = function(o) {\n      };\n      Mat332.prototype.setZero = function() {\n        this.ex.setZero();\n        this.ey.setZero();\n        this.ez.setZero();\n        return this;\n      };\n      Mat332.prototype.solve33 = function(v3) {\n        var cross_x = this.ey.y * this.ez.z - this.ey.z * this.ez.y;\n        var cross_y = this.ey.z * this.ez.x - this.ey.x * this.ez.z;\n        var cross_z = this.ey.x * this.ez.y - this.ey.y * this.ez.x;\n        var det = this.ex.x * cross_x + this.ex.y * cross_y + this.ex.z * cross_z;\n        if (det !== 0) {\n          det = 1 / det;\n        }\n        var r = new Vec3();\n        cross_x = this.ey.y * this.ez.z - this.ey.z * this.ez.y;\n        cross_y = this.ey.z * this.ez.x - this.ey.x * this.ez.z;\n        cross_z = this.ey.x * this.ez.y - this.ey.y * this.ez.x;\n        r.x = det * (v3.x * cross_x + v3.y * cross_y + v3.z * cross_z);\n        cross_x = v3.y * this.ez.z - v3.z * this.ez.y;\n        cross_y = v3.z * this.ez.x - v3.x * this.ez.z;\n        cross_z = v3.x * this.ez.y - v3.y * this.ez.x;\n        r.y = det * (this.ex.x * cross_x + this.ex.y * cross_y + this.ex.z * cross_z);\n        cross_x = this.ey.y * v3.z - this.ey.z * v3.y;\n        cross_y = this.ey.z * v3.x - this.ey.x * v3.z;\n        cross_z = this.ey.x * v3.y - this.ey.y * v3.x;\n        r.z = det * (this.ex.x * cross_x + this.ex.y * cross_y + this.ex.z * cross_z);\n        return r;\n      };\n      Mat332.prototype.solve22 = function(v3) {\n        var a11 = this.ex.x;\n        var a12 = this.ey.x;\n        var a21 = this.ex.y;\n        var a22 = this.ey.y;\n        var det = a11 * a22 - a12 * a21;\n        if (det !== 0) {\n          det = 1 / det;\n        }\n        var r = Vec2.zero();\n        r.x = det * (a22 * v3.x - a12 * v3.y);\n        r.y = det * (a11 * v3.y - a21 * v3.x);\n        return r;\n      };\n      Mat332.prototype.getInverse22 = function(M) {\n        var a2 = this.ex.x;\n        var b2 = this.ey.x;\n        var c2 = this.ex.y;\n        var d2 = this.ey.y;\n        var det = a2 * d2 - b2 * c2;\n        if (det !== 0) {\n          det = 1 / det;\n        }\n        M.ex.x = det * d2;\n        M.ey.x = -det * b2;\n        M.ex.z = 0;\n        M.ex.y = -det * c2;\n        M.ey.y = det * a2;\n        M.ey.z = 0;\n        M.ez.x = 0;\n        M.ez.y = 0;\n        M.ez.z = 0;\n      };\n      Mat332.prototype.getSymInverse33 = function(M) {\n        var det = Vec3.dot(this.ex, Vec3.cross(this.ey, this.ez));\n        if (det !== 0) {\n          det = 1 / det;\n        }\n        var a11 = this.ex.x;\n        var a12 = this.ey.x;\n        var a13 = this.ez.x;\n        var a22 = this.ey.y;\n        var a23 = this.ez.y;\n        var a33 = this.ez.z;\n        M.ex.x = det * (a22 * a33 - a23 * a23);\n        M.ex.y = det * (a13 * a23 - a12 * a33);\n        M.ex.z = det * (a12 * a23 - a13 * a22);\n        M.ey.x = M.ex.y;\n        M.ey.y = det * (a11 * a33 - a13 * a13);\n        M.ey.z = det * (a13 * a12 - a11 * a23);\n        M.ez.x = M.ex.z;\n        M.ez.y = M.ey.z;\n        M.ez.z = det * (a11 * a22 - a12 * a12);\n      };\n      Mat332.mul = function(a2, b2) {\n        if (b2 && \"z\" in b2 && \"y\" in b2 && \"x\" in b2) {\n          var x2 = a2.ex.x * b2.x + a2.ey.x * b2.y + a2.ez.x * b2.z;\n          var y = a2.ex.y * b2.x + a2.ey.y * b2.y + a2.ez.y * b2.z;\n          var z = a2.ex.z * b2.x + a2.ey.z * b2.y + a2.ez.z * b2.z;\n          return new Vec3(x2, y, z);\n        } else if (b2 && \"y\" in b2 && \"x\" in b2) {\n          var x2 = a2.ex.x * b2.x + a2.ey.x * b2.y;\n          var y = a2.ex.y * b2.x + a2.ey.y * b2.y;\n          return Vec2.neo(x2, y);\n        }\n      };\n      Mat332.mulVec3 = function(a2, b2) {\n        var x2 = a2.ex.x * b2.x + a2.ey.x * b2.y + a2.ez.x * b2.z;\n        var y = a2.ex.y * b2.x + a2.ey.y * b2.y + a2.ez.y * b2.z;\n        var z = a2.ex.z * b2.x + a2.ey.z * b2.y + a2.ez.z * b2.z;\n        return new Vec3(x2, y, z);\n      };\n      Mat332.mulVec2 = function(a2, b2) {\n        var x2 = a2.ex.x * b2.x + a2.ey.x * b2.y;\n        var y = a2.ex.y * b2.x + a2.ey.y * b2.y;\n        return Vec2.neo(x2, y);\n      };\n      Mat332.add = function(a2, b2) {\n        return new Mat332(Vec3.add(a2.ex, b2.ex), Vec3.add(a2.ey, b2.ey), Vec3.add(a2.ez, b2.ez));\n      };\n      return Mat332;\n    }()\n  );\n  var math_abs$4 = Math.abs;\n  var LimitState$2;\n  (function(LimitState2) {\n    LimitState2[LimitState2[\"inactiveLimit\"] = 0] = \"inactiveLimit\";\n    LimitState2[LimitState2[\"atLowerLimit\"] = 1] = \"atLowerLimit\";\n    LimitState2[LimitState2[\"atUpperLimit\"] = 2] = \"atUpperLimit\";\n    LimitState2[LimitState2[\"equalLimits\"] = 3] = \"equalLimits\";\n  })(LimitState$2 || (LimitState$2 = {}));\n  var DEFAULTS$8 = {\n    lowerAngle: 0,\n    upperAngle: 0,\n    maxMotorTorque: 0,\n    motorSpeed: 0,\n    enableLimit: false,\n    enableMotor: false\n  };\n  var RevoluteJoint = (\n    /** @class */\n    function(_super) {\n      __extends(RevoluteJoint2, _super);\n      function RevoluteJoint2(def, bodyA, bodyB, anchor) {\n        var _this = this;\n        var _a2, _b, _c, _d, _e, _f;\n        if (!(_this instanceof RevoluteJoint2)) {\n          return new RevoluteJoint2(def, bodyA, bodyB, anchor);\n        }\n        def = def !== null && def !== void 0 ? def : {};\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_mass = new Mat33();\n        _this.m_limitState = LimitState$2.inactiveLimit;\n        _this.m_type = RevoluteJoint2.TYPE;\n        if (Vec2.isValid(anchor)) {\n          _this.m_localAnchorA = bodyA.getLocalPoint(anchor);\n        } else if (Vec2.isValid(def.localAnchorA)) {\n          _this.m_localAnchorA = Vec2.clone(def.localAnchorA);\n        } else {\n          _this.m_localAnchorA = Vec2.zero();\n        }\n        if (Vec2.isValid(anchor)) {\n          _this.m_localAnchorB = bodyB.getLocalPoint(anchor);\n        } else if (Vec2.isValid(def.localAnchorB)) {\n          _this.m_localAnchorB = Vec2.clone(def.localAnchorB);\n        } else {\n          _this.m_localAnchorB = Vec2.zero();\n        }\n        if (Number.isFinite(def.referenceAngle)) {\n          _this.m_referenceAngle = def.referenceAngle;\n        } else {\n          _this.m_referenceAngle = bodyB.getAngle() - bodyA.getAngle();\n        }\n        _this.m_impulse = new Vec3();\n        _this.m_motorImpulse = 0;\n        _this.m_lowerAngle = (_a2 = def.lowerAngle) !== null && _a2 !== void 0 ? _a2 : DEFAULTS$8.lowerAngle;\n        _this.m_upperAngle = (_b = def.upperAngle) !== null && _b !== void 0 ? _b : DEFAULTS$8.upperAngle;\n        _this.m_maxMotorTorque = (_c = def.maxMotorTorque) !== null && _c !== void 0 ? _c : DEFAULTS$8.maxMotorTorque;\n        _this.m_motorSpeed = (_d = def.motorSpeed) !== null && _d !== void 0 ? _d : DEFAULTS$8.motorSpeed;\n        _this.m_enableLimit = (_e = def.enableLimit) !== null && _e !== void 0 ? _e : DEFAULTS$8.enableLimit;\n        _this.m_enableMotor = (_f = def.enableMotor) !== null && _f !== void 0 ? _f : DEFAULTS$8.enableMotor;\n        return _this;\n      }\n      RevoluteJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          lowerAngle: this.m_lowerAngle,\n          upperAngle: this.m_upperAngle,\n          maxMotorTorque: this.m_maxMotorTorque,\n          motorSpeed: this.m_motorSpeed,\n          enableLimit: this.m_enableLimit,\n          enableMotor: this.m_enableMotor,\n          localAnchorA: this.m_localAnchorA,\n          localAnchorB: this.m_localAnchorB,\n          referenceAngle: this.m_referenceAngle\n        };\n      };\n      RevoluteJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        var joint = new RevoluteJoint2(data);\n        return joint;\n      };\n      RevoluteJoint2.prototype._reset = function(def) {\n        if (def.anchorA) {\n          this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(def.anchorA));\n        } else if (def.localAnchorA) {\n          this.m_localAnchorA.setVec2(def.localAnchorA);\n        }\n        if (def.anchorB) {\n          this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(def.anchorB));\n        } else if (def.localAnchorB) {\n          this.m_localAnchorB.setVec2(def.localAnchorB);\n        }\n        if (Number.isFinite(def.referenceAngle)) {\n          this.m_referenceAngle = def.referenceAngle;\n        }\n        if (def.enableLimit !== void 0) {\n          this.m_enableLimit = def.enableLimit;\n        }\n        if (Number.isFinite(def.lowerAngle)) {\n          this.m_lowerAngle = def.lowerAngle;\n        }\n        if (Number.isFinite(def.upperAngle)) {\n          this.m_upperAngle = def.upperAngle;\n        }\n        if (Number.isFinite(def.maxMotorTorque)) {\n          this.m_maxMotorTorque = def.maxMotorTorque;\n        }\n        if (Number.isFinite(def.motorSpeed)) {\n          this.m_motorSpeed = def.motorSpeed;\n        }\n        if (def.enableMotor !== void 0) {\n          this.m_enableMotor = def.enableMotor;\n        }\n      };\n      RevoluteJoint2.prototype.getLocalAnchorA = function() {\n        return this.m_localAnchorA;\n      };\n      RevoluteJoint2.prototype.getLocalAnchorB = function() {\n        return this.m_localAnchorB;\n      };\n      RevoluteJoint2.prototype.getReferenceAngle = function() {\n        return this.m_referenceAngle;\n      };\n      RevoluteJoint2.prototype.getJointAngle = function() {\n        var bA = this.m_bodyA;\n        var bB = this.m_bodyB;\n        return bB.m_sweep.a - bA.m_sweep.a - this.m_referenceAngle;\n      };\n      RevoluteJoint2.prototype.getJointSpeed = function() {\n        var bA = this.m_bodyA;\n        var bB = this.m_bodyB;\n        return bB.m_angularVelocity - bA.m_angularVelocity;\n      };\n      RevoluteJoint2.prototype.isMotorEnabled = function() {\n        return this.m_enableMotor;\n      };\n      RevoluteJoint2.prototype.enableMotor = function(flag) {\n        if (flag == this.m_enableMotor)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_enableMotor = flag;\n      };\n      RevoluteJoint2.prototype.getMotorTorque = function(inv_dt) {\n        return inv_dt * this.m_motorImpulse;\n      };\n      RevoluteJoint2.prototype.setMotorSpeed = function(speed) {\n        if (speed == this.m_motorSpeed)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_motorSpeed = speed;\n      };\n      RevoluteJoint2.prototype.getMotorSpeed = function() {\n        return this.m_motorSpeed;\n      };\n      RevoluteJoint2.prototype.setMaxMotorTorque = function(torque) {\n        if (torque == this.m_maxMotorTorque)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_maxMotorTorque = torque;\n      };\n      RevoluteJoint2.prototype.getMaxMotorTorque = function() {\n        return this.m_maxMotorTorque;\n      };\n      RevoluteJoint2.prototype.isLimitEnabled = function() {\n        return this.m_enableLimit;\n      };\n      RevoluteJoint2.prototype.enableLimit = function(flag) {\n        if (flag != this.m_enableLimit) {\n          this.m_bodyA.setAwake(true);\n          this.m_bodyB.setAwake(true);\n          this.m_enableLimit = flag;\n          this.m_impulse.z = 0;\n        }\n      };\n      RevoluteJoint2.prototype.getLowerLimit = function() {\n        return this.m_lowerAngle;\n      };\n      RevoluteJoint2.prototype.getUpperLimit = function() {\n        return this.m_upperAngle;\n      };\n      RevoluteJoint2.prototype.setLimits = function(lower, upper) {\n        if (lower != this.m_lowerAngle || upper != this.m_upperAngle) {\n          this.m_bodyA.setAwake(true);\n          this.m_bodyB.setAwake(true);\n          this.m_impulse.z = 0;\n          this.m_lowerAngle = lower;\n          this.m_upperAngle = upper;\n        }\n      };\n      RevoluteJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      RevoluteJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      RevoluteJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.neo(this.m_impulse.x, this.m_impulse.y).mul(inv_dt);\n      };\n      RevoluteJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return inv_dt * this.m_impulse.z;\n      };\n      RevoluteJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        this.m_rA = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        this.m_rB = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var fixedRotation = iA + iB === 0;\n        this.m_mass.ex.x = mA + mB + this.m_rA.y * this.m_rA.y * iA + this.m_rB.y * this.m_rB.y * iB;\n        this.m_mass.ey.x = -this.m_rA.y * this.m_rA.x * iA - this.m_rB.y * this.m_rB.x * iB;\n        this.m_mass.ez.x = -this.m_rA.y * iA - this.m_rB.y * iB;\n        this.m_mass.ex.y = this.m_mass.ey.x;\n        this.m_mass.ey.y = mA + mB + this.m_rA.x * this.m_rA.x * iA + this.m_rB.x * this.m_rB.x * iB;\n        this.m_mass.ez.y = this.m_rA.x * iA + this.m_rB.x * iB;\n        this.m_mass.ex.z = this.m_mass.ez.x;\n        this.m_mass.ey.z = this.m_mass.ez.y;\n        this.m_mass.ez.z = iA + iB;\n        this.m_motorMass = iA + iB;\n        if (this.m_motorMass > 0) {\n          this.m_motorMass = 1 / this.m_motorMass;\n        }\n        if (this.m_enableMotor == false || fixedRotation) {\n          this.m_motorImpulse = 0;\n        }\n        if (this.m_enableLimit && fixedRotation == false) {\n          var jointAngle = aB - aA - this.m_referenceAngle;\n          if (math_abs$4(this.m_upperAngle - this.m_lowerAngle) < 2 * SettingsInternal.angularSlop) {\n            this.m_limitState = LimitState$2.equalLimits;\n          } else if (jointAngle <= this.m_lowerAngle) {\n            if (this.m_limitState != LimitState$2.atLowerLimit) {\n              this.m_impulse.z = 0;\n            }\n            this.m_limitState = LimitState$2.atLowerLimit;\n          } else if (jointAngle >= this.m_upperAngle) {\n            if (this.m_limitState != LimitState$2.atUpperLimit) {\n              this.m_impulse.z = 0;\n            }\n            this.m_limitState = LimitState$2.atUpperLimit;\n          } else {\n            this.m_limitState = LimitState$2.inactiveLimit;\n            this.m_impulse.z = 0;\n          }\n        } else {\n          this.m_limitState = LimitState$2.inactiveLimit;\n        }\n        if (step.warmStarting) {\n          this.m_impulse.mul(step.dtRatio);\n          this.m_motorImpulse *= step.dtRatio;\n          var P3 = Vec2.neo(this.m_impulse.x, this.m_impulse.y);\n          vA2.subMul(mA, P3);\n          wA -= iA * (Vec2.crossVec2Vec2(this.m_rA, P3) + this.m_motorImpulse + this.m_impulse.z);\n          vB2.addMul(mB, P3);\n          wB += iB * (Vec2.crossVec2Vec2(this.m_rB, P3) + this.m_motorImpulse + this.m_impulse.z);\n        } else {\n          this.m_impulse.setZero();\n          this.m_motorImpulse = 0;\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      RevoluteJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var fixedRotation = iA + iB === 0;\n        if (this.m_enableMotor && this.m_limitState != LimitState$2.equalLimits && fixedRotation == false) {\n          var Cdot = wB - wA - this.m_motorSpeed;\n          var impulse = -this.m_motorMass * Cdot;\n          var oldImpulse = this.m_motorImpulse;\n          var maxImpulse = step.dt * this.m_maxMotorTorque;\n          this.m_motorImpulse = clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);\n          impulse = this.m_motorImpulse - oldImpulse;\n          wA -= iA * impulse;\n          wB += iB * impulse;\n        }\n        if (this.m_enableLimit && this.m_limitState != LimitState$2.inactiveLimit && fixedRotation == false) {\n          var Cdot1 = Vec2.zero();\n          Cdot1.addCombine(1, vB2, 1, Vec2.crossNumVec2(wB, this.m_rB));\n          Cdot1.subCombine(1, vA2, 1, Vec2.crossNumVec2(wA, this.m_rA));\n          var Cdot2 = wB - wA;\n          var Cdot = new Vec3(Cdot1.x, Cdot1.y, Cdot2);\n          var impulse = Vec3.neg(this.m_mass.solve33(Cdot));\n          if (this.m_limitState == LimitState$2.equalLimits) {\n            this.m_impulse.add(impulse);\n          } else if (this.m_limitState == LimitState$2.atLowerLimit) {\n            var newImpulse = this.m_impulse.z + impulse.z;\n            if (newImpulse < 0) {\n              var rhs = Vec2.combine(-1, Cdot1, this.m_impulse.z, Vec2.neo(this.m_mass.ez.x, this.m_mass.ez.y));\n              var reduced = this.m_mass.solve22(rhs);\n              impulse.x = reduced.x;\n              impulse.y = reduced.y;\n              impulse.z = -this.m_impulse.z;\n              this.m_impulse.x += reduced.x;\n              this.m_impulse.y += reduced.y;\n              this.m_impulse.z = 0;\n            } else {\n              this.m_impulse.add(impulse);\n            }\n          } else if (this.m_limitState == LimitState$2.atUpperLimit) {\n            var newImpulse = this.m_impulse.z + impulse.z;\n            if (newImpulse > 0) {\n              var rhs = Vec2.combine(-1, Cdot1, this.m_impulse.z, Vec2.neo(this.m_mass.ez.x, this.m_mass.ez.y));\n              var reduced = this.m_mass.solve22(rhs);\n              impulse.x = reduced.x;\n              impulse.y = reduced.y;\n              impulse.z = -this.m_impulse.z;\n              this.m_impulse.x += reduced.x;\n              this.m_impulse.y += reduced.y;\n              this.m_impulse.z = 0;\n            } else {\n              this.m_impulse.add(impulse);\n            }\n          }\n          var P3 = Vec2.neo(impulse.x, impulse.y);\n          vA2.subMul(mA, P3);\n          wA -= iA * (Vec2.crossVec2Vec2(this.m_rA, P3) + impulse.z);\n          vB2.addMul(mB, P3);\n          wB += iB * (Vec2.crossVec2Vec2(this.m_rB, P3) + impulse.z);\n        } else {\n          var Cdot = Vec2.zero();\n          Cdot.addCombine(1, vB2, 1, Vec2.crossNumVec2(wB, this.m_rB));\n          Cdot.subCombine(1, vA2, 1, Vec2.crossNumVec2(wA, this.m_rA));\n          var impulse = this.m_mass.solve22(Vec2.neg(Cdot));\n          this.m_impulse.x += impulse.x;\n          this.m_impulse.y += impulse.y;\n          vA2.subMul(mA, impulse);\n          wA -= iA * Vec2.crossVec2Vec2(this.m_rA, impulse);\n          vB2.addMul(mB, impulse);\n          wB += iB * Vec2.crossVec2Vec2(this.m_rB, impulse);\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      RevoluteJoint2.prototype.solvePositionConstraints = function(step) {\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var angularError = 0;\n        var positionError = 0;\n        var fixedRotation = this.m_invIA + this.m_invIB == 0;\n        if (this.m_enableLimit && this.m_limitState != LimitState$2.inactiveLimit && fixedRotation == false) {\n          var angle = aB - aA - this.m_referenceAngle;\n          var limitImpulse = 0;\n          if (this.m_limitState == LimitState$2.equalLimits) {\n            var C = clamp(angle - this.m_lowerAngle, -SettingsInternal.maxAngularCorrection, SettingsInternal.maxAngularCorrection);\n            limitImpulse = -this.m_motorMass * C;\n            angularError = math_abs$4(C);\n          } else if (this.m_limitState == LimitState$2.atLowerLimit) {\n            var C = angle - this.m_lowerAngle;\n            angularError = -C;\n            C = clamp(C + SettingsInternal.angularSlop, -SettingsInternal.maxAngularCorrection, 0);\n            limitImpulse = -this.m_motorMass * C;\n          } else if (this.m_limitState == LimitState$2.atUpperLimit) {\n            var C = angle - this.m_upperAngle;\n            angularError = C;\n            C = clamp(C - SettingsInternal.angularSlop, 0, SettingsInternal.maxAngularCorrection);\n            limitImpulse = -this.m_motorMass * C;\n          }\n          aA -= this.m_invIA * limitImpulse;\n          aB += this.m_invIB * limitImpulse;\n        }\n        {\n          qA.setAngle(aA);\n          qB.setAngle(aB);\n          var rA2 = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n          var rB2 = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n          var C = Vec2.zero();\n          C.addCombine(1, cB2, 1, rB2);\n          C.subCombine(1, cA2, 1, rA2);\n          positionError = C.length();\n          var mA = this.m_invMassA;\n          var mB = this.m_invMassB;\n          var iA = this.m_invIA;\n          var iB = this.m_invIB;\n          var K = new Mat22();\n          K.ex.x = mA + mB + iA * rA2.y * rA2.y + iB * rB2.y * rB2.y;\n          K.ex.y = -iA * rA2.x * rA2.y - iB * rB2.x * rB2.y;\n          K.ey.x = K.ex.y;\n          K.ey.y = mA + mB + iA * rA2.x * rA2.x + iB * rB2.x * rB2.x;\n          var impulse = Vec2.neg(K.solve(C));\n          cA2.subMul(mA, impulse);\n          aA -= iA * Vec2.crossVec2Vec2(rA2, impulse);\n          cB2.addMul(mB, impulse);\n          aB += iB * Vec2.crossVec2Vec2(rB2, impulse);\n        }\n        this.m_bodyA.c_position.c.setVec2(cA2);\n        this.m_bodyA.c_position.a = aA;\n        this.m_bodyB.c_position.c.setVec2(cB2);\n        this.m_bodyB.c_position.a = aB;\n        return positionError <= SettingsInternal.linearSlop && angularError <= SettingsInternal.angularSlop;\n      };\n      RevoluteJoint2.TYPE = \"revolute-joint\";\n      return RevoluteJoint2;\n    }(Joint)\n  );\n  var math_abs$3 = Math.abs;\n  var math_max = Math.max;\n  var math_min$2 = Math.min;\n  var LimitState$1;\n  (function(LimitState2) {\n    LimitState2[LimitState2[\"inactiveLimit\"] = 0] = \"inactiveLimit\";\n    LimitState2[LimitState2[\"atLowerLimit\"] = 1] = \"atLowerLimit\";\n    LimitState2[LimitState2[\"atUpperLimit\"] = 2] = \"atUpperLimit\";\n    LimitState2[LimitState2[\"equalLimits\"] = 3] = \"equalLimits\";\n  })(LimitState$1 || (LimitState$1 = {}));\n  var DEFAULTS$7 = {\n    enableLimit: false,\n    lowerTranslation: 0,\n    upperTranslation: 0,\n    enableMotor: false,\n    maxMotorForce: 0,\n    motorSpeed: 0\n  };\n  var PrismaticJoint = (\n    /** @class */\n    function(_super) {\n      __extends(PrismaticJoint2, _super);\n      function PrismaticJoint2(def, bodyA, bodyB, anchor, axis) {\n        var _this = this;\n        if (!(_this instanceof PrismaticJoint2)) {\n          return new PrismaticJoint2(def, bodyA, bodyB, anchor, axis);\n        }\n        def = options(def, DEFAULTS$7);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = PrismaticJoint2.TYPE;\n        _this.m_localAnchorA = Vec2.clone(anchor ? bodyA.getLocalPoint(anchor) : def.localAnchorA || Vec2.zero());\n        _this.m_localAnchorB = Vec2.clone(anchor ? bodyB.getLocalPoint(anchor) : def.localAnchorB || Vec2.zero());\n        _this.m_localXAxisA = Vec2.clone(axis ? bodyA.getLocalVector(axis) : def.localAxisA || Vec2.neo(1, 0));\n        _this.m_localXAxisA.normalize();\n        _this.m_localYAxisA = Vec2.crossNumVec2(1, _this.m_localXAxisA);\n        _this.m_referenceAngle = Number.isFinite(def.referenceAngle) ? def.referenceAngle : bodyB.getAngle() - bodyA.getAngle();\n        _this.m_impulse = new Vec3();\n        _this.m_motorMass = 0;\n        _this.m_motorImpulse = 0;\n        _this.m_lowerTranslation = def.lowerTranslation;\n        _this.m_upperTranslation = def.upperTranslation;\n        _this.m_maxMotorForce = def.maxMotorForce;\n        _this.m_motorSpeed = def.motorSpeed;\n        _this.m_enableLimit = def.enableLimit;\n        _this.m_enableMotor = def.enableMotor;\n        _this.m_limitState = LimitState$1.inactiveLimit;\n        _this.m_axis = Vec2.zero();\n        _this.m_perp = Vec2.zero();\n        _this.m_K = new Mat33();\n        return _this;\n      }\n      PrismaticJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          lowerTranslation: this.m_lowerTranslation,\n          upperTranslation: this.m_upperTranslation,\n          maxMotorForce: this.m_maxMotorForce,\n          motorSpeed: this.m_motorSpeed,\n          enableLimit: this.m_enableLimit,\n          enableMotor: this.m_enableMotor,\n          localAnchorA: this.m_localAnchorA,\n          localAnchorB: this.m_localAnchorB,\n          localAxisA: this.m_localXAxisA,\n          referenceAngle: this.m_referenceAngle\n        };\n      };\n      PrismaticJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        data.localAxisA = Vec2.clone(data.localAxisA);\n        var joint = new PrismaticJoint2(data);\n        return joint;\n      };\n      PrismaticJoint2.prototype._reset = function(def) {\n        if (def.anchorA) {\n          this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(def.anchorA));\n        } else if (def.localAnchorA) {\n          this.m_localAnchorA.setVec2(def.localAnchorA);\n        }\n        if (def.anchorB) {\n          this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(def.anchorB));\n        } else if (def.localAnchorB) {\n          this.m_localAnchorB.setVec2(def.localAnchorB);\n        }\n        if (def.localAxisA) {\n          this.m_localXAxisA.setVec2(def.localAxisA);\n          this.m_localYAxisA.setVec2(Vec2.crossNumVec2(1, def.localAxisA));\n        }\n        if (Number.isFinite(def.referenceAngle)) {\n          this.m_referenceAngle = def.referenceAngle;\n        }\n        if (typeof def.enableLimit !== \"undefined\") {\n          this.m_enableLimit = !!def.enableLimit;\n        }\n        if (Number.isFinite(def.lowerTranslation)) {\n          this.m_lowerTranslation = def.lowerTranslation;\n        }\n        if (Number.isFinite(def.upperTranslation)) {\n          this.m_upperTranslation = def.upperTranslation;\n        }\n        if (typeof def.enableMotor !== \"undefined\") {\n          this.m_enableMotor = !!def.enableMotor;\n        }\n        if (Number.isFinite(def.maxMotorForce)) {\n          this.m_maxMotorForce = def.maxMotorForce;\n        }\n        if (Number.isFinite(def.motorSpeed)) {\n          this.m_motorSpeed = def.motorSpeed;\n        }\n      };\n      PrismaticJoint2.prototype.getLocalAnchorA = function() {\n        return this.m_localAnchorA;\n      };\n      PrismaticJoint2.prototype.getLocalAnchorB = function() {\n        return this.m_localAnchorB;\n      };\n      PrismaticJoint2.prototype.getLocalAxisA = function() {\n        return this.m_localXAxisA;\n      };\n      PrismaticJoint2.prototype.getReferenceAngle = function() {\n        return this.m_referenceAngle;\n      };\n      PrismaticJoint2.prototype.getJointTranslation = function() {\n        var pA2 = this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n        var pB2 = this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n        var d2 = Vec2.sub(pB2, pA2);\n        var axis = this.m_bodyA.getWorldVector(this.m_localXAxisA);\n        var translation2 = Vec2.dot(d2, axis);\n        return translation2;\n      };\n      PrismaticJoint2.prototype.getJointSpeed = function() {\n        var bA = this.m_bodyA;\n        var bB = this.m_bodyB;\n        var rA2 = Rot.mulVec2(bA.m_xf.q, Vec2.sub(this.m_localAnchorA, bA.m_sweep.localCenter));\n        var rB2 = Rot.mulVec2(bB.m_xf.q, Vec2.sub(this.m_localAnchorB, bB.m_sweep.localCenter));\n        var p1 = Vec2.add(bA.m_sweep.c, rA2);\n        var p2 = Vec2.add(bB.m_sweep.c, rB2);\n        var d2 = Vec2.sub(p2, p1);\n        var axis = Rot.mulVec2(bA.m_xf.q, this.m_localXAxisA);\n        var vA2 = bA.m_linearVelocity;\n        var vB2 = bB.m_linearVelocity;\n        var wA = bA.m_angularVelocity;\n        var wB = bB.m_angularVelocity;\n        var speed = Vec2.dot(d2, Vec2.crossNumVec2(wA, axis)) + Vec2.dot(axis, Vec2.sub(Vec2.addCrossNumVec2(vB2, wB, rB2), Vec2.addCrossNumVec2(vA2, wA, rA2)));\n        return speed;\n      };\n      PrismaticJoint2.prototype.isLimitEnabled = function() {\n        return this.m_enableLimit;\n      };\n      PrismaticJoint2.prototype.enableLimit = function(flag) {\n        if (flag != this.m_enableLimit) {\n          this.m_bodyA.setAwake(true);\n          this.m_bodyB.setAwake(true);\n          this.m_enableLimit = flag;\n          this.m_impulse.z = 0;\n        }\n      };\n      PrismaticJoint2.prototype.getLowerLimit = function() {\n        return this.m_lowerTranslation;\n      };\n      PrismaticJoint2.prototype.getUpperLimit = function() {\n        return this.m_upperTranslation;\n      };\n      PrismaticJoint2.prototype.setLimits = function(lower, upper) {\n        if (lower != this.m_lowerTranslation || upper != this.m_upperTranslation) {\n          this.m_bodyA.setAwake(true);\n          this.m_bodyB.setAwake(true);\n          this.m_lowerTranslation = lower;\n          this.m_upperTranslation = upper;\n          this.m_impulse.z = 0;\n        }\n      };\n      PrismaticJoint2.prototype.isMotorEnabled = function() {\n        return this.m_enableMotor;\n      };\n      PrismaticJoint2.prototype.enableMotor = function(flag) {\n        if (flag == this.m_enableMotor)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_enableMotor = flag;\n      };\n      PrismaticJoint2.prototype.setMotorSpeed = function(speed) {\n        if (speed == this.m_motorSpeed)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_motorSpeed = speed;\n      };\n      PrismaticJoint2.prototype.setMaxMotorForce = function(force) {\n        if (force == this.m_maxMotorForce)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_maxMotorForce = force;\n      };\n      PrismaticJoint2.prototype.getMaxMotorForce = function() {\n        return this.m_maxMotorForce;\n      };\n      PrismaticJoint2.prototype.getMotorSpeed = function() {\n        return this.m_motorSpeed;\n      };\n      PrismaticJoint2.prototype.getMotorForce = function(inv_dt) {\n        return inv_dt * this.m_motorImpulse;\n      };\n      PrismaticJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      PrismaticJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      PrismaticJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.combine(this.m_impulse.x, this.m_perp, this.m_motorImpulse + this.m_impulse.z, this.m_axis).mul(inv_dt);\n      };\n      PrismaticJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return inv_dt * this.m_impulse.y;\n      };\n      PrismaticJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var rA2 = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        var rB2 = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var d2 = Vec2.zero();\n        d2.addCombine(1, cB2, 1, rB2);\n        d2.subCombine(1, cA2, 1, rA2);\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        {\n          this.m_axis = Rot.mulVec2(qA, this.m_localXAxisA);\n          this.m_a1 = Vec2.crossVec2Vec2(Vec2.add(d2, rA2), this.m_axis);\n          this.m_a2 = Vec2.crossVec2Vec2(rB2, this.m_axis);\n          this.m_motorMass = mA + mB + iA * this.m_a1 * this.m_a1 + iB * this.m_a2 * this.m_a2;\n          if (this.m_motorMass > 0) {\n            this.m_motorMass = 1 / this.m_motorMass;\n          }\n        }\n        {\n          this.m_perp = Rot.mulVec2(qA, this.m_localYAxisA);\n          this.m_s1 = Vec2.crossVec2Vec2(Vec2.add(d2, rA2), this.m_perp);\n          this.m_s2 = Vec2.crossVec2Vec2(rB2, this.m_perp);\n          Vec2.crossVec2Vec2(rA2, this.m_perp);\n          var k11 = mA + mB + iA * this.m_s1 * this.m_s1 + iB * this.m_s2 * this.m_s2;\n          var k12 = iA * this.m_s1 + iB * this.m_s2;\n          var k13 = iA * this.m_s1 * this.m_a1 + iB * this.m_s2 * this.m_a2;\n          var k22 = iA + iB;\n          if (k22 == 0) {\n            k22 = 1;\n          }\n          var k23 = iA * this.m_a1 + iB * this.m_a2;\n          var k33 = mA + mB + iA * this.m_a1 * this.m_a1 + iB * this.m_a2 * this.m_a2;\n          this.m_K.ex.set(k11, k12, k13);\n          this.m_K.ey.set(k12, k22, k23);\n          this.m_K.ez.set(k13, k23, k33);\n        }\n        if (this.m_enableLimit) {\n          var jointTranslation = Vec2.dot(this.m_axis, d2);\n          if (math_abs$3(this.m_upperTranslation - this.m_lowerTranslation) < 2 * SettingsInternal.linearSlop) {\n            this.m_limitState = LimitState$1.equalLimits;\n          } else if (jointTranslation <= this.m_lowerTranslation) {\n            if (this.m_limitState != LimitState$1.atLowerLimit) {\n              this.m_limitState = LimitState$1.atLowerLimit;\n              this.m_impulse.z = 0;\n            }\n          } else if (jointTranslation >= this.m_upperTranslation) {\n            if (this.m_limitState != LimitState$1.atUpperLimit) {\n              this.m_limitState = LimitState$1.atUpperLimit;\n              this.m_impulse.z = 0;\n            }\n          } else {\n            this.m_limitState = LimitState$1.inactiveLimit;\n            this.m_impulse.z = 0;\n          }\n        } else {\n          this.m_limitState = LimitState$1.inactiveLimit;\n          this.m_impulse.z = 0;\n        }\n        if (this.m_enableMotor == false) {\n          this.m_motorImpulse = 0;\n        }\n        if (step.warmStarting) {\n          this.m_impulse.mul(step.dtRatio);\n          this.m_motorImpulse *= step.dtRatio;\n          var P3 = Vec2.combine(this.m_impulse.x, this.m_perp, this.m_motorImpulse + this.m_impulse.z, this.m_axis);\n          var LA = this.m_impulse.x * this.m_s1 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a1;\n          var LB = this.m_impulse.x * this.m_s2 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a2;\n          vA2.subMul(mA, P3);\n          wA -= iA * LA;\n          vB2.addMul(mB, P3);\n          wB += iB * LB;\n        } else {\n          this.m_impulse.setZero();\n          this.m_motorImpulse = 0;\n        }\n        this.m_bodyA.c_velocity.v.setVec2(vA2);\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v.setVec2(vB2);\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      PrismaticJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        if (this.m_enableMotor && this.m_limitState != LimitState$1.equalLimits) {\n          var Cdot = Vec2.dot(this.m_axis, Vec2.sub(vB2, vA2)) + this.m_a2 * wB - this.m_a1 * wA;\n          var impulse = this.m_motorMass * (this.m_motorSpeed - Cdot);\n          var oldImpulse = this.m_motorImpulse;\n          var maxImpulse = step.dt * this.m_maxMotorForce;\n          this.m_motorImpulse = clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);\n          impulse = this.m_motorImpulse - oldImpulse;\n          var P3 = Vec2.mulNumVec2(impulse, this.m_axis);\n          var LA = impulse * this.m_a1;\n          var LB = impulse * this.m_a2;\n          vA2.subMul(mA, P3);\n          wA -= iA * LA;\n          vB2.addMul(mB, P3);\n          wB += iB * LB;\n        }\n        var Cdot1 = Vec2.zero();\n        Cdot1.x += Vec2.dot(this.m_perp, vB2) + this.m_s2 * wB;\n        Cdot1.x -= Vec2.dot(this.m_perp, vA2) + this.m_s1 * wA;\n        Cdot1.y = wB - wA;\n        if (this.m_enableLimit && this.m_limitState != LimitState$1.inactiveLimit) {\n          var Cdot2 = 0;\n          Cdot2 += Vec2.dot(this.m_axis, vB2) + this.m_a2 * wB;\n          Cdot2 -= Vec2.dot(this.m_axis, vA2) + this.m_a1 * wA;\n          var Cdot = new Vec3(Cdot1.x, Cdot1.y, Cdot2);\n          var f1 = Vec3.clone(this.m_impulse);\n          var df = this.m_K.solve33(Vec3.neg(Cdot));\n          this.m_impulse.add(df);\n          if (this.m_limitState == LimitState$1.atLowerLimit) {\n            this.m_impulse.z = math_max(this.m_impulse.z, 0);\n          } else if (this.m_limitState == LimitState$1.atUpperLimit) {\n            this.m_impulse.z = math_min$2(this.m_impulse.z, 0);\n          }\n          var b2 = Vec2.combine(-1, Cdot1, -(this.m_impulse.z - f1.z), Vec2.neo(this.m_K.ez.x, this.m_K.ez.y));\n          var f2r = Vec2.add(this.m_K.solve22(b2), Vec2.neo(f1.x, f1.y));\n          this.m_impulse.x = f2r.x;\n          this.m_impulse.y = f2r.y;\n          df = Vec3.sub(this.m_impulse, f1);\n          var P3 = Vec2.combine(df.x, this.m_perp, df.z, this.m_axis);\n          var LA = df.x * this.m_s1 + df.y + df.z * this.m_a1;\n          var LB = df.x * this.m_s2 + df.y + df.z * this.m_a2;\n          vA2.subMul(mA, P3);\n          wA -= iA * LA;\n          vB2.addMul(mB, P3);\n          wB += iB * LB;\n        } else {\n          var df = this.m_K.solve22(Vec2.neg(Cdot1));\n          this.m_impulse.x += df.x;\n          this.m_impulse.y += df.y;\n          var P3 = Vec2.mulNumVec2(df.x, this.m_perp);\n          var LA = df.x * this.m_s1 + df.y;\n          var LB = df.x * this.m_s2 + df.y;\n          vA2.subMul(mA, P3);\n          wA -= iA * LA;\n          vB2.addMul(mB, P3);\n          wB += iB * LB;\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      PrismaticJoint2.prototype.solvePositionConstraints = function(step) {\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var rA2 = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        var rB2 = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var d2 = Vec2.sub(Vec2.add(cB2, rB2), Vec2.add(cA2, rA2));\n        var axis = Rot.mulVec2(qA, this.m_localXAxisA);\n        var a1 = Vec2.crossVec2Vec2(Vec2.add(d2, rA2), axis);\n        var a2 = Vec2.crossVec2Vec2(rB2, axis);\n        var perp2 = Rot.mulVec2(qA, this.m_localYAxisA);\n        var s1 = Vec2.crossVec2Vec2(Vec2.add(d2, rA2), perp2);\n        var s2 = Vec2.crossVec2Vec2(rB2, perp2);\n        var impulse = new Vec3();\n        var C1 = Vec2.zero();\n        C1.x = Vec2.dot(perp2, d2);\n        C1.y = aB - aA - this.m_referenceAngle;\n        var linearError = math_abs$3(C1.x);\n        var angularError = math_abs$3(C1.y);\n        var linearSlop = SettingsInternal.linearSlop;\n        var maxLinearCorrection = SettingsInternal.maxLinearCorrection;\n        var active = false;\n        var C2 = 0;\n        if (this.m_enableLimit) {\n          var translation2 = Vec2.dot(axis, d2);\n          if (math_abs$3(this.m_upperTranslation - this.m_lowerTranslation) < 2 * linearSlop) {\n            C2 = clamp(translation2, -maxLinearCorrection, maxLinearCorrection);\n            linearError = math_max(linearError, math_abs$3(translation2));\n            active = true;\n          } else if (translation2 <= this.m_lowerTranslation) {\n            C2 = clamp(translation2 - this.m_lowerTranslation + linearSlop, -maxLinearCorrection, 0);\n            linearError = Math.max(linearError, this.m_lowerTranslation - translation2);\n            active = true;\n          } else if (translation2 >= this.m_upperTranslation) {\n            C2 = clamp(translation2 - this.m_upperTranslation - linearSlop, 0, maxLinearCorrection);\n            linearError = Math.max(linearError, translation2 - this.m_upperTranslation);\n            active = true;\n          }\n        }\n        if (active) {\n          var k11 = mA + mB + iA * s1 * s1 + iB * s2 * s2;\n          var k12 = iA * s1 + iB * s2;\n          var k13 = iA * s1 * a1 + iB * s2 * a2;\n          var k22 = iA + iB;\n          if (k22 == 0) {\n            k22 = 1;\n          }\n          var k23 = iA * a1 + iB * a2;\n          var k33 = mA + mB + iA * a1 * a1 + iB * a2 * a2;\n          var K = new Mat33();\n          K.ex.set(k11, k12, k13);\n          K.ey.set(k12, k22, k23);\n          K.ez.set(k13, k23, k33);\n          var C = new Vec3();\n          C.x = C1.x;\n          C.y = C1.y;\n          C.z = C2;\n          impulse = K.solve33(Vec3.neg(C));\n        } else {\n          var k11 = mA + mB + iA * s1 * s1 + iB * s2 * s2;\n          var k12 = iA * s1 + iB * s2;\n          var k22 = iA + iB;\n          if (k22 == 0) {\n            k22 = 1;\n          }\n          var K = new Mat22();\n          K.ex.setNum(k11, k12);\n          K.ey.setNum(k12, k22);\n          var impulse1 = K.solve(Vec2.neg(C1));\n          impulse.x = impulse1.x;\n          impulse.y = impulse1.y;\n          impulse.z = 0;\n        }\n        var P3 = Vec2.combine(impulse.x, perp2, impulse.z, axis);\n        var LA = impulse.x * s1 + impulse.y + impulse.z * a1;\n        var LB = impulse.x * s2 + impulse.y + impulse.z * a2;\n        cA2.subMul(mA, P3);\n        aA -= iA * LA;\n        cB2.addMul(mB, P3);\n        aB += iB * LB;\n        this.m_bodyA.c_position.c = cA2;\n        this.m_bodyA.c_position.a = aA;\n        this.m_bodyB.c_position.c = cB2;\n        this.m_bodyB.c_position.a = aB;\n        return linearError <= SettingsInternal.linearSlop && angularError <= SettingsInternal.angularSlop;\n      };\n      PrismaticJoint2.TYPE = \"prismatic-joint\";\n      return PrismaticJoint2;\n    }(Joint)\n  );\n  var DEFAULTS$6 = {\n    ratio: 1\n  };\n  var GearJoint = (\n    /** @class */\n    function(_super) {\n      __extends(GearJoint2, _super);\n      function GearJoint2(def, bodyA, bodyB, joint1, joint2, ratio) {\n        var _this = this;\n        if (!(_this instanceof GearJoint2)) {\n          return new GearJoint2(def, bodyA, bodyB, joint1, joint2, ratio);\n        }\n        def = options(def, DEFAULTS$6);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = GearJoint2.TYPE;\n        _this.m_joint1 = joint1 ? joint1 : def.joint1;\n        _this.m_joint2 = joint2 ? joint2 : def.joint2;\n        _this.m_ratio = Number.isFinite(ratio) ? ratio : def.ratio;\n        _this.m_type1 = _this.m_joint1.getType();\n        _this.m_type2 = _this.m_joint2.getType();\n        var coordinateA;\n        var coordinateB;\n        _this.m_bodyC = _this.m_joint1.getBodyA();\n        _this.m_bodyA = _this.m_joint1.getBodyB();\n        var xfA2 = _this.m_bodyA.m_xf;\n        var aA = _this.m_bodyA.m_sweep.a;\n        var xfC = _this.m_bodyC.m_xf;\n        var aC = _this.m_bodyC.m_sweep.a;\n        if (_this.m_type1 === RevoluteJoint.TYPE) {\n          var revolute = _this.m_joint1;\n          _this.m_localAnchorC = revolute.m_localAnchorA;\n          _this.m_localAnchorA = revolute.m_localAnchorB;\n          _this.m_referenceAngleA = revolute.m_referenceAngle;\n          _this.m_localAxisC = Vec2.zero();\n          coordinateA = aA - aC - _this.m_referenceAngleA;\n        } else {\n          var prismatic = _this.m_joint1;\n          _this.m_localAnchorC = prismatic.m_localAnchorA;\n          _this.m_localAnchorA = prismatic.m_localAnchorB;\n          _this.m_referenceAngleA = prismatic.m_referenceAngle;\n          _this.m_localAxisC = prismatic.m_localXAxisA;\n          var pC = _this.m_localAnchorC;\n          var pA2 = Rot.mulTVec2(xfC.q, Vec2.add(Rot.mulVec2(xfA2.q, _this.m_localAnchorA), Vec2.sub(xfA2.p, xfC.p)));\n          coordinateA = Vec2.dot(pA2, _this.m_localAxisC) - Vec2.dot(pC, _this.m_localAxisC);\n        }\n        _this.m_bodyD = _this.m_joint2.getBodyA();\n        _this.m_bodyB = _this.m_joint2.getBodyB();\n        var xfB2 = _this.m_bodyB.m_xf;\n        var aB = _this.m_bodyB.m_sweep.a;\n        var xfD = _this.m_bodyD.m_xf;\n        var aD = _this.m_bodyD.m_sweep.a;\n        if (_this.m_type2 === RevoluteJoint.TYPE) {\n          var revolute = _this.m_joint2;\n          _this.m_localAnchorD = revolute.m_localAnchorA;\n          _this.m_localAnchorB = revolute.m_localAnchorB;\n          _this.m_referenceAngleB = revolute.m_referenceAngle;\n          _this.m_localAxisD = Vec2.zero();\n          coordinateB = aB - aD - _this.m_referenceAngleB;\n        } else {\n          var prismatic = _this.m_joint2;\n          _this.m_localAnchorD = prismatic.m_localAnchorA;\n          _this.m_localAnchorB = prismatic.m_localAnchorB;\n          _this.m_referenceAngleB = prismatic.m_referenceAngle;\n          _this.m_localAxisD = prismatic.m_localXAxisA;\n          var pD = _this.m_localAnchorD;\n          var pB2 = Rot.mulTVec2(xfD.q, Vec2.add(Rot.mulVec2(xfB2.q, _this.m_localAnchorB), Vec2.sub(xfB2.p, xfD.p)));\n          coordinateB = Vec2.dot(pB2, _this.m_localAxisD) - Vec2.dot(pD, _this.m_localAxisD);\n        }\n        _this.m_constant = coordinateA + _this.m_ratio * coordinateB;\n        _this.m_impulse = 0;\n        return _this;\n      }\n      GearJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          joint1: this.m_joint1,\n          joint2: this.m_joint2,\n          ratio: this.m_ratio\n          // _constant: this.m_constant,\n        };\n      };\n      GearJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        data.joint1 = restore(Joint, data.joint1, world);\n        data.joint2 = restore(Joint, data.joint2, world);\n        var joint = new GearJoint2(data);\n        return joint;\n      };\n      GearJoint2.prototype._reset = function(def) {\n        if (Number.isFinite(def.ratio)) {\n          this.m_ratio = def.ratio;\n        }\n      };\n      GearJoint2.prototype.getJoint1 = function() {\n        return this.m_joint1;\n      };\n      GearJoint2.prototype.getJoint2 = function() {\n        return this.m_joint2;\n      };\n      GearJoint2.prototype.setRatio = function(ratio) {\n        this.m_ratio = ratio;\n      };\n      GearJoint2.prototype.getRatio = function() {\n        return this.m_ratio;\n      };\n      GearJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      GearJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      GearJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.mulNumVec2(this.m_impulse, this.m_JvAC).mul(inv_dt);\n      };\n      GearJoint2.prototype.getReactionTorque = function(inv_dt) {\n        var L = this.m_impulse * this.m_JwA;\n        return inv_dt * L;\n      };\n      GearJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_lcA = this.m_bodyA.m_sweep.localCenter;\n        this.m_lcB = this.m_bodyB.m_sweep.localCenter;\n        this.m_lcC = this.m_bodyC.m_sweep.localCenter;\n        this.m_lcD = this.m_bodyD.m_sweep.localCenter;\n        this.m_mA = this.m_bodyA.m_invMass;\n        this.m_mB = this.m_bodyB.m_invMass;\n        this.m_mC = this.m_bodyC.m_invMass;\n        this.m_mD = this.m_bodyD.m_invMass;\n        this.m_iA = this.m_bodyA.m_invI;\n        this.m_iB = this.m_bodyB.m_invI;\n        this.m_iC = this.m_bodyC.m_invI;\n        this.m_iD = this.m_bodyD.m_invI;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var aC = this.m_bodyC.c_position.a;\n        var vC = this.m_bodyC.c_velocity.v;\n        var wC = this.m_bodyC.c_velocity.w;\n        var aD = this.m_bodyD.c_position.a;\n        var vD = this.m_bodyD.c_velocity.v;\n        var wD = this.m_bodyD.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var qC = Rot.neo(aC);\n        var qD = Rot.neo(aD);\n        this.m_mass = 0;\n        if (this.m_type1 == RevoluteJoint.TYPE) {\n          this.m_JvAC = Vec2.zero();\n          this.m_JwA = 1;\n          this.m_JwC = 1;\n          this.m_mass += this.m_iA + this.m_iC;\n        } else {\n          var u = Rot.mulVec2(qC, this.m_localAxisC);\n          var rC = Rot.mulSub(qC, this.m_localAnchorC, this.m_lcC);\n          var rA2 = Rot.mulSub(qA, this.m_localAnchorA, this.m_lcA);\n          this.m_JvAC = u;\n          this.m_JwC = Vec2.crossVec2Vec2(rC, u);\n          this.m_JwA = Vec2.crossVec2Vec2(rA2, u);\n          this.m_mass += this.m_mC + this.m_mA + this.m_iC * this.m_JwC * this.m_JwC + this.m_iA * this.m_JwA * this.m_JwA;\n        }\n        if (this.m_type2 == RevoluteJoint.TYPE) {\n          this.m_JvBD = Vec2.zero();\n          this.m_JwB = this.m_ratio;\n          this.m_JwD = this.m_ratio;\n          this.m_mass += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD);\n        } else {\n          var u = Rot.mulVec2(qD, this.m_localAxisD);\n          var rD = Rot.mulSub(qD, this.m_localAnchorD, this.m_lcD);\n          var rB2 = Rot.mulSub(qB, this.m_localAnchorB, this.m_lcB);\n          this.m_JvBD = Vec2.mulNumVec2(this.m_ratio, u);\n          this.m_JwD = this.m_ratio * Vec2.crossVec2Vec2(rD, u);\n          this.m_JwB = this.m_ratio * Vec2.crossVec2Vec2(rB2, u);\n          this.m_mass += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * this.m_JwD * this.m_JwD + this.m_iB * this.m_JwB * this.m_JwB;\n        }\n        this.m_mass = this.m_mass > 0 ? 1 / this.m_mass : 0;\n        if (step.warmStarting) {\n          vA2.addMul(this.m_mA * this.m_impulse, this.m_JvAC);\n          wA += this.m_iA * this.m_impulse * this.m_JwA;\n          vB2.addMul(this.m_mB * this.m_impulse, this.m_JvBD);\n          wB += this.m_iB * this.m_impulse * this.m_JwB;\n          vC.subMul(this.m_mC * this.m_impulse, this.m_JvAC);\n          wC -= this.m_iC * this.m_impulse * this.m_JwC;\n          vD.subMul(this.m_mD * this.m_impulse, this.m_JvBD);\n          wD -= this.m_iD * this.m_impulse * this.m_JwD;\n        } else {\n          this.m_impulse = 0;\n        }\n        this.m_bodyA.c_velocity.v.setVec2(vA2);\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v.setVec2(vB2);\n        this.m_bodyB.c_velocity.w = wB;\n        this.m_bodyC.c_velocity.v.setVec2(vC);\n        this.m_bodyC.c_velocity.w = wC;\n        this.m_bodyD.c_velocity.v.setVec2(vD);\n        this.m_bodyD.c_velocity.w = wD;\n      };\n      GearJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var vC = this.m_bodyC.c_velocity.v;\n        var wC = this.m_bodyC.c_velocity.w;\n        var vD = this.m_bodyD.c_velocity.v;\n        var wD = this.m_bodyD.c_velocity.w;\n        var Cdot = Vec2.dot(this.m_JvAC, vA2) - Vec2.dot(this.m_JvAC, vC) + Vec2.dot(this.m_JvBD, vB2) - Vec2.dot(this.m_JvBD, vD);\n        Cdot += this.m_JwA * wA - this.m_JwC * wC + (this.m_JwB * wB - this.m_JwD * wD);\n        var impulse = -this.m_mass * Cdot;\n        this.m_impulse += impulse;\n        vA2.addMul(this.m_mA * impulse, this.m_JvAC);\n        wA += this.m_iA * impulse * this.m_JwA;\n        vB2.addMul(this.m_mB * impulse, this.m_JvBD);\n        wB += this.m_iB * impulse * this.m_JwB;\n        vC.subMul(this.m_mC * impulse, this.m_JvAC);\n        wC -= this.m_iC * impulse * this.m_JwC;\n        vD.subMul(this.m_mD * impulse, this.m_JvBD);\n        wD -= this.m_iD * impulse * this.m_JwD;\n        this.m_bodyA.c_velocity.v.setVec2(vA2);\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v.setVec2(vB2);\n        this.m_bodyB.c_velocity.w = wB;\n        this.m_bodyC.c_velocity.v.setVec2(vC);\n        this.m_bodyC.c_velocity.w = wC;\n        this.m_bodyD.c_velocity.v.setVec2(vD);\n        this.m_bodyD.c_velocity.w = wD;\n      };\n      GearJoint2.prototype.solvePositionConstraints = function(step) {\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var cC = this.m_bodyC.c_position.c;\n        var aC = this.m_bodyC.c_position.a;\n        var cD = this.m_bodyD.c_position.c;\n        var aD = this.m_bodyD.c_position.a;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var qC = Rot.neo(aC);\n        var qD = Rot.neo(aD);\n        var linearError = 0;\n        var coordinateA;\n        var coordinateB;\n        var JvAC;\n        var JvBD;\n        var JwA;\n        var JwB;\n        var JwC;\n        var JwD;\n        var mass = 0;\n        if (this.m_type1 == RevoluteJoint.TYPE) {\n          JvAC = Vec2.zero();\n          JwA = 1;\n          JwC = 1;\n          mass += this.m_iA + this.m_iC;\n          coordinateA = aA - aC - this.m_referenceAngleA;\n        } else {\n          var u = Rot.mulVec2(qC, this.m_localAxisC);\n          var rC = Rot.mulSub(qC, this.m_localAnchorC, this.m_lcC);\n          var rA2 = Rot.mulSub(qA, this.m_localAnchorA, this.m_lcA);\n          JvAC = u;\n          JwC = Vec2.crossVec2Vec2(rC, u);\n          JwA = Vec2.crossVec2Vec2(rA2, u);\n          mass += this.m_mC + this.m_mA + this.m_iC * JwC * JwC + this.m_iA * JwA * JwA;\n          var pC = Vec2.sub(this.m_localAnchorC, this.m_lcC);\n          var pA2 = Rot.mulTVec2(qC, Vec2.add(rA2, Vec2.sub(cA2, cC)));\n          coordinateA = Vec2.dot(Vec2.sub(pA2, pC), this.m_localAxisC);\n        }\n        if (this.m_type2 == RevoluteJoint.TYPE) {\n          JvBD = Vec2.zero();\n          JwB = this.m_ratio;\n          JwD = this.m_ratio;\n          mass += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD);\n          coordinateB = aB - aD - this.m_referenceAngleB;\n        } else {\n          var u = Rot.mulVec2(qD, this.m_localAxisD);\n          var rD = Rot.mulSub(qD, this.m_localAnchorD, this.m_lcD);\n          var rB2 = Rot.mulSub(qB, this.m_localAnchorB, this.m_lcB);\n          JvBD = Vec2.mulNumVec2(this.m_ratio, u);\n          JwD = this.m_ratio * Vec2.crossVec2Vec2(rD, u);\n          JwB = this.m_ratio * Vec2.crossVec2Vec2(rB2, u);\n          mass += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * JwD * JwD + this.m_iB * JwB * JwB;\n          var pD = Vec2.sub(this.m_localAnchorD, this.m_lcD);\n          var pB2 = Rot.mulTVec2(qD, Vec2.add(rB2, Vec2.sub(cB2, cD)));\n          coordinateB = Vec2.dot(pB2, this.m_localAxisD) - Vec2.dot(pD, this.m_localAxisD);\n        }\n        var C = coordinateA + this.m_ratio * coordinateB - this.m_constant;\n        var impulse = 0;\n        if (mass > 0) {\n          impulse = -C / mass;\n        }\n        cA2.addMul(this.m_mA * impulse, JvAC);\n        aA += this.m_iA * impulse * JwA;\n        cB2.addMul(this.m_mB * impulse, JvBD);\n        aB += this.m_iB * impulse * JwB;\n        cC.subMul(this.m_mC * impulse, JvAC);\n        aC -= this.m_iC * impulse * JwC;\n        cD.subMul(this.m_mD * impulse, JvBD);\n        aD -= this.m_iD * impulse * JwD;\n        this.m_bodyA.c_position.c.setVec2(cA2);\n        this.m_bodyA.c_position.a = aA;\n        this.m_bodyB.c_position.c.setVec2(cB2);\n        this.m_bodyB.c_position.a = aB;\n        this.m_bodyC.c_position.c.setVec2(cC);\n        this.m_bodyC.c_position.a = aC;\n        this.m_bodyD.c_position.c.setVec2(cD);\n        this.m_bodyD.c_position.a = aD;\n        return linearError < SettingsInternal.linearSlop;\n      };\n      GearJoint2.TYPE = \"gear-joint\";\n      return GearJoint2;\n    }(Joint)\n  );\n  var DEFAULTS$5 = {\n    maxForce: 1,\n    maxTorque: 1,\n    correctionFactor: 0.3\n  };\n  var MotorJoint = (\n    /** @class */\n    function(_super) {\n      __extends(MotorJoint2, _super);\n      function MotorJoint2(def, bodyA, bodyB) {\n        var _this = this;\n        if (!(_this instanceof MotorJoint2)) {\n          return new MotorJoint2(def, bodyA, bodyB);\n        }\n        def = options(def, DEFAULTS$5);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = MotorJoint2.TYPE;\n        _this.m_linearOffset = Vec2.isValid(def.linearOffset) ? Vec2.clone(def.linearOffset) : bodyA.getLocalPoint(bodyB.getPosition());\n        _this.m_angularOffset = Number.isFinite(def.angularOffset) ? def.angularOffset : bodyB.getAngle() - bodyA.getAngle();\n        _this.m_linearImpulse = Vec2.zero();\n        _this.m_angularImpulse = 0;\n        _this.m_maxForce = def.maxForce;\n        _this.m_maxTorque = def.maxTorque;\n        _this.m_correctionFactor = def.correctionFactor;\n        return _this;\n      }\n      MotorJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          maxForce: this.m_maxForce,\n          maxTorque: this.m_maxTorque,\n          correctionFactor: this.m_correctionFactor,\n          linearOffset: this.m_linearOffset,\n          angularOffset: this.m_angularOffset\n        };\n      };\n      MotorJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        var joint = new MotorJoint2(data);\n        return joint;\n      };\n      MotorJoint2.prototype._reset = function(def) {\n        if (Number.isFinite(def.angularOffset)) {\n          this.m_angularOffset = def.angularOffset;\n        }\n        if (Number.isFinite(def.maxForce)) {\n          this.m_maxForce = def.maxForce;\n        }\n        if (Number.isFinite(def.maxTorque)) {\n          this.m_maxTorque = def.maxTorque;\n        }\n        if (Number.isFinite(def.correctionFactor)) {\n          this.m_correctionFactor = def.correctionFactor;\n        }\n        if (Vec2.isValid(def.linearOffset)) {\n          this.m_linearOffset.set(def.linearOffset);\n        }\n      };\n      MotorJoint2.prototype.setMaxForce = function(force) {\n        this.m_maxForce = force;\n      };\n      MotorJoint2.prototype.getMaxForce = function() {\n        return this.m_maxForce;\n      };\n      MotorJoint2.prototype.setMaxTorque = function(torque) {\n        this.m_maxTorque = torque;\n      };\n      MotorJoint2.prototype.getMaxTorque = function() {\n        return this.m_maxTorque;\n      };\n      MotorJoint2.prototype.setCorrectionFactor = function(factor) {\n        this.m_correctionFactor = factor;\n      };\n      MotorJoint2.prototype.getCorrectionFactor = function() {\n        return this.m_correctionFactor;\n      };\n      MotorJoint2.prototype.setLinearOffset = function(linearOffset) {\n        if (linearOffset.x != this.m_linearOffset.x || linearOffset.y != this.m_linearOffset.y) {\n          this.m_bodyA.setAwake(true);\n          this.m_bodyB.setAwake(true);\n          this.m_linearOffset.set(linearOffset);\n        }\n      };\n      MotorJoint2.prototype.getLinearOffset = function() {\n        return this.m_linearOffset;\n      };\n      MotorJoint2.prototype.setAngularOffset = function(angularOffset) {\n        if (angularOffset != this.m_angularOffset) {\n          this.m_bodyA.setAwake(true);\n          this.m_bodyB.setAwake(true);\n          this.m_angularOffset = angularOffset;\n        }\n      };\n      MotorJoint2.prototype.getAngularOffset = function() {\n        return this.m_angularOffset;\n      };\n      MotorJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getPosition();\n      };\n      MotorJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getPosition();\n      };\n      MotorJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.mulNumVec2(inv_dt, this.m_linearImpulse);\n      };\n      MotorJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return inv_dt * this.m_angularImpulse;\n      };\n      MotorJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        this.m_rA = Rot.mulVec2(qA, Vec2.sub(this.m_linearOffset, this.m_localCenterA));\n        this.m_rB = Rot.mulVec2(qB, Vec2.neg(this.m_localCenterB));\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var K = new Mat22();\n        K.ex.x = mA + mB + iA * this.m_rA.y * this.m_rA.y + iB * this.m_rB.y * this.m_rB.y;\n        K.ex.y = -iA * this.m_rA.x * this.m_rA.y - iB * this.m_rB.x * this.m_rB.y;\n        K.ey.x = K.ex.y;\n        K.ey.y = mA + mB + iA * this.m_rA.x * this.m_rA.x + iB * this.m_rB.x * this.m_rB.x;\n        this.m_linearMass = K.getInverse();\n        this.m_angularMass = iA + iB;\n        if (this.m_angularMass > 0) {\n          this.m_angularMass = 1 / this.m_angularMass;\n        }\n        this.m_linearError = Vec2.zero();\n        this.m_linearError.addCombine(1, cB2, 1, this.m_rB);\n        this.m_linearError.subCombine(1, cA2, 1, this.m_rA);\n        this.m_angularError = aB - aA - this.m_angularOffset;\n        if (step.warmStarting) {\n          this.m_linearImpulse.mul(step.dtRatio);\n          this.m_angularImpulse *= step.dtRatio;\n          var P3 = Vec2.neo(this.m_linearImpulse.x, this.m_linearImpulse.y);\n          vA2.subMul(mA, P3);\n          wA -= iA * (Vec2.crossVec2Vec2(this.m_rA, P3) + this.m_angularImpulse);\n          vB2.addMul(mB, P3);\n          wB += iB * (Vec2.crossVec2Vec2(this.m_rB, P3) + this.m_angularImpulse);\n        } else {\n          this.m_linearImpulse.setZero();\n          this.m_angularImpulse = 0;\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      MotorJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var h = step.dt;\n        var inv_h = step.inv_dt;\n        {\n          var Cdot = wB - wA + inv_h * this.m_correctionFactor * this.m_angularError;\n          var impulse = -this.m_angularMass * Cdot;\n          var oldImpulse = this.m_angularImpulse;\n          var maxImpulse = h * this.m_maxTorque;\n          this.m_angularImpulse = clamp(this.m_angularImpulse + impulse, -maxImpulse, maxImpulse);\n          impulse = this.m_angularImpulse - oldImpulse;\n          wA -= iA * impulse;\n          wB += iB * impulse;\n        }\n        {\n          var Cdot = Vec2.zero();\n          Cdot.addCombine(1, vB2, 1, Vec2.crossNumVec2(wB, this.m_rB));\n          Cdot.subCombine(1, vA2, 1, Vec2.crossNumVec2(wA, this.m_rA));\n          Cdot.addMul(inv_h * this.m_correctionFactor, this.m_linearError);\n          var impulse = Vec2.neg(Mat22.mulVec2(this.m_linearMass, Cdot));\n          var oldImpulse = Vec2.clone(this.m_linearImpulse);\n          this.m_linearImpulse.add(impulse);\n          var maxImpulse = h * this.m_maxForce;\n          this.m_linearImpulse.clamp(maxImpulse);\n          impulse = Vec2.sub(this.m_linearImpulse, oldImpulse);\n          vA2.subMul(mA, impulse);\n          wA -= iA * Vec2.crossVec2Vec2(this.m_rA, impulse);\n          vB2.addMul(mB, impulse);\n          wB += iB * Vec2.crossVec2Vec2(this.m_rB, impulse);\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      MotorJoint2.prototype.solvePositionConstraints = function(step) {\n        return true;\n      };\n      MotorJoint2.TYPE = \"motor-joint\";\n      return MotorJoint2;\n    }(Joint)\n  );\n  var math_PI$2 = Math.PI;\n  var DEFAULTS$4 = {\n    maxForce: 0,\n    frequencyHz: 5,\n    dampingRatio: 0.7\n  };\n  var MouseJoint = (\n    /** @class */\n    function(_super) {\n      __extends(MouseJoint2, _super);\n      function MouseJoint2(def, bodyA, bodyB, target) {\n        var _this = this;\n        if (!(_this instanceof MouseJoint2)) {\n          return new MouseJoint2(def, bodyA, bodyB, target);\n        }\n        def = options(def, DEFAULTS$4);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = MouseJoint2.TYPE;\n        if (Vec2.isValid(target)) {\n          _this.m_targetA = Vec2.clone(target);\n        } else if (Vec2.isValid(def.target)) {\n          _this.m_targetA = Vec2.clone(def.target);\n        } else {\n          _this.m_targetA = Vec2.zero();\n        }\n        _this.m_localAnchorB = Transform.mulTVec2(bodyB.getTransform(), _this.m_targetA);\n        _this.m_maxForce = def.maxForce;\n        _this.m_impulse = Vec2.zero();\n        _this.m_frequencyHz = def.frequencyHz;\n        _this.m_dampingRatio = def.dampingRatio;\n        _this.m_beta = 0;\n        _this.m_gamma = 0;\n        _this.m_rB = Vec2.zero();\n        _this.m_localCenterB = Vec2.zero();\n        _this.m_invMassB = 0;\n        _this.m_invIB = 0;\n        _this.m_mass = new Mat22();\n        _this.m_C = Vec2.zero();\n        return _this;\n      }\n      MouseJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          target: this.m_targetA,\n          maxForce: this.m_maxForce,\n          frequencyHz: this.m_frequencyHz,\n          dampingRatio: this.m_dampingRatio,\n          _localAnchorB: this.m_localAnchorB\n        };\n      };\n      MouseJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        data.target = Vec2.clone(data.target);\n        var joint = new MouseJoint2(data);\n        if (data._localAnchorB) {\n          joint.m_localAnchorB = data._localAnchorB;\n        }\n        return joint;\n      };\n      MouseJoint2.prototype._reset = function(def) {\n        if (Number.isFinite(def.maxForce)) {\n          this.m_maxForce = def.maxForce;\n        }\n        if (Number.isFinite(def.frequencyHz)) {\n          this.m_frequencyHz = def.frequencyHz;\n        }\n        if (Number.isFinite(def.dampingRatio)) {\n          this.m_dampingRatio = def.dampingRatio;\n        }\n      };\n      MouseJoint2.prototype.setTarget = function(target) {\n        if (Vec2.areEqual(target, this.m_targetA))\n          return;\n        this.m_bodyB.setAwake(true);\n        this.m_targetA.set(target);\n      };\n      MouseJoint2.prototype.getTarget = function() {\n        return this.m_targetA;\n      };\n      MouseJoint2.prototype.setMaxForce = function(force) {\n        this.m_maxForce = force;\n      };\n      MouseJoint2.prototype.getMaxForce = function() {\n        return this.m_maxForce;\n      };\n      MouseJoint2.prototype.setFrequency = function(hz) {\n        this.m_frequencyHz = hz;\n      };\n      MouseJoint2.prototype.getFrequency = function() {\n        return this.m_frequencyHz;\n      };\n      MouseJoint2.prototype.setDampingRatio = function(ratio) {\n        this.m_dampingRatio = ratio;\n      };\n      MouseJoint2.prototype.getDampingRatio = function() {\n        return this.m_dampingRatio;\n      };\n      MouseJoint2.prototype.getAnchorA = function() {\n        return Vec2.clone(this.m_targetA);\n      };\n      MouseJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      MouseJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.mulNumVec2(inv_dt, this.m_impulse);\n      };\n      MouseJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return inv_dt * 0;\n      };\n      MouseJoint2.prototype.shiftOrigin = function(newOrigin) {\n        this.m_targetA.sub(newOrigin);\n      };\n      MouseJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var position = this.m_bodyB.c_position;\n        var velocity = this.m_bodyB.c_velocity;\n        var cB2 = position.c;\n        var aB = position.a;\n        var vB2 = velocity.v;\n        var wB = velocity.w;\n        var qB = Rot.neo(aB);\n        var mass = this.m_bodyB.getMass();\n        var omega = 2 * math_PI$2 * this.m_frequencyHz;\n        var d2 = 2 * mass * this.m_dampingRatio * omega;\n        var k = mass * (omega * omega);\n        var h = step.dt;\n        this.m_gamma = h * (d2 + h * k);\n        if (this.m_gamma != 0) {\n          this.m_gamma = 1 / this.m_gamma;\n        }\n        this.m_beta = h * k * this.m_gamma;\n        this.m_rB = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var K = new Mat22();\n        K.ex.x = this.m_invMassB + this.m_invIB * this.m_rB.y * this.m_rB.y + this.m_gamma;\n        K.ex.y = -this.m_invIB * this.m_rB.x * this.m_rB.y;\n        K.ey.x = K.ex.y;\n        K.ey.y = this.m_invMassB + this.m_invIB * this.m_rB.x * this.m_rB.x + this.m_gamma;\n        this.m_mass = K.getInverse();\n        this.m_C.setVec2(cB2);\n        this.m_C.addCombine(1, this.m_rB, -1, this.m_targetA);\n        this.m_C.mul(this.m_beta);\n        wB *= 0.98;\n        if (step.warmStarting) {\n          this.m_impulse.mul(step.dtRatio);\n          vB2.addMul(this.m_invMassB, this.m_impulse);\n          wB += this.m_invIB * Vec2.crossVec2Vec2(this.m_rB, this.m_impulse);\n        } else {\n          this.m_impulse.setZero();\n        }\n        velocity.v.setVec2(vB2);\n        velocity.w = wB;\n      };\n      MouseJoint2.prototype.solveVelocityConstraints = function(step) {\n        var velocity = this.m_bodyB.c_velocity;\n        var vB2 = Vec2.clone(velocity.v);\n        var wB = velocity.w;\n        var Cdot = Vec2.crossNumVec2(wB, this.m_rB);\n        Cdot.add(vB2);\n        Cdot.addCombine(1, this.m_C, this.m_gamma, this.m_impulse);\n        Cdot.neg();\n        var impulse = Mat22.mulVec2(this.m_mass, Cdot);\n        var oldImpulse = Vec2.clone(this.m_impulse);\n        this.m_impulse.add(impulse);\n        var maxImpulse = step.dt * this.m_maxForce;\n        this.m_impulse.clamp(maxImpulse);\n        impulse = Vec2.sub(this.m_impulse, oldImpulse);\n        vB2.addMul(this.m_invMassB, impulse);\n        wB += this.m_invIB * Vec2.crossVec2Vec2(this.m_rB, impulse);\n        velocity.v.setVec2(vB2);\n        velocity.w = wB;\n      };\n      MouseJoint2.prototype.solvePositionConstraints = function(step) {\n        return true;\n      };\n      MouseJoint2.TYPE = \"mouse-joint\";\n      return MouseJoint2;\n    }(Joint)\n  );\n  var math_abs$2 = Math.abs;\n  var DEFAULTS$3 = {\n    collideConnected: true\n  };\n  var PulleyJoint = (\n    /** @class */\n    function(_super) {\n      __extends(PulleyJoint2, _super);\n      function PulleyJoint2(def, bodyA, bodyB, groundA, groundB, anchorA, anchorB, ratio) {\n        var _this = this;\n        if (!(_this instanceof PulleyJoint2)) {\n          return new PulleyJoint2(def, bodyA, bodyB, groundA, groundB, anchorA, anchorB, ratio);\n        }\n        def = options(def, DEFAULTS$3);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = PulleyJoint2.TYPE;\n        _this.m_groundAnchorA = Vec2.clone(groundA ? groundA : def.groundAnchorA || Vec2.neo(-1, 1));\n        _this.m_groundAnchorB = Vec2.clone(groundB ? groundB : def.groundAnchorB || Vec2.neo(1, 1));\n        _this.m_localAnchorA = Vec2.clone(anchorA ? bodyA.getLocalPoint(anchorA) : def.localAnchorA || Vec2.neo(-1, 0));\n        _this.m_localAnchorB = Vec2.clone(anchorB ? bodyB.getLocalPoint(anchorB) : def.localAnchorB || Vec2.neo(1, 0));\n        _this.m_lengthA = Number.isFinite(def.lengthA) ? def.lengthA : Vec2.distance(anchorA, groundA);\n        _this.m_lengthB = Number.isFinite(def.lengthB) ? def.lengthB : Vec2.distance(anchorB, groundB);\n        _this.m_ratio = Number.isFinite(ratio) ? ratio : def.ratio;\n        _this.m_constant = _this.m_lengthA + _this.m_ratio * _this.m_lengthB;\n        _this.m_impulse = 0;\n        return _this;\n      }\n      PulleyJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          groundAnchorA: this.m_groundAnchorA,\n          groundAnchorB: this.m_groundAnchorB,\n          localAnchorA: this.m_localAnchorA,\n          localAnchorB: this.m_localAnchorB,\n          lengthA: this.m_lengthA,\n          lengthB: this.m_lengthB,\n          ratio: this.m_ratio\n        };\n      };\n      PulleyJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        var joint = new PulleyJoint2(data);\n        return joint;\n      };\n      PulleyJoint2.prototype._reset = function(def) {\n        if (Vec2.isValid(def.groundAnchorA)) {\n          this.m_groundAnchorA.set(def.groundAnchorA);\n        }\n        if (Vec2.isValid(def.groundAnchorB)) {\n          this.m_groundAnchorB.set(def.groundAnchorB);\n        }\n        if (Vec2.isValid(def.localAnchorA)) {\n          this.m_localAnchorA.set(def.localAnchorA);\n        } else if (Vec2.isValid(def.anchorA)) {\n          this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(def.anchorA));\n        }\n        if (Vec2.isValid(def.localAnchorB)) {\n          this.m_localAnchorB.set(def.localAnchorB);\n        } else if (Vec2.isValid(def.anchorB)) {\n          this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(def.anchorB));\n        }\n        if (Number.isFinite(def.lengthA)) {\n          this.m_lengthA = def.lengthA;\n        }\n        if (Number.isFinite(def.lengthB)) {\n          this.m_lengthB = def.lengthB;\n        }\n        if (Number.isFinite(def.ratio)) {\n          this.m_ratio = def.ratio;\n        }\n      };\n      PulleyJoint2.prototype.getGroundAnchorA = function() {\n        return this.m_groundAnchorA;\n      };\n      PulleyJoint2.prototype.getGroundAnchorB = function() {\n        return this.m_groundAnchorB;\n      };\n      PulleyJoint2.prototype.getLengthA = function() {\n        return this.m_lengthA;\n      };\n      PulleyJoint2.prototype.getLengthB = function() {\n        return this.m_lengthB;\n      };\n      PulleyJoint2.prototype.getRatio = function() {\n        return this.m_ratio;\n      };\n      PulleyJoint2.prototype.getCurrentLengthA = function() {\n        var p = this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n        var s2 = this.m_groundAnchorA;\n        return Vec2.distance(p, s2);\n      };\n      PulleyJoint2.prototype.getCurrentLengthB = function() {\n        var p = this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n        var s2 = this.m_groundAnchorB;\n        return Vec2.distance(p, s2);\n      };\n      PulleyJoint2.prototype.shiftOrigin = function(newOrigin) {\n        this.m_groundAnchorA.sub(newOrigin);\n        this.m_groundAnchorB.sub(newOrigin);\n      };\n      PulleyJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      PulleyJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      PulleyJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.mulNumVec2(this.m_impulse, this.m_uB).mul(inv_dt);\n      };\n      PulleyJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return 0;\n      };\n      PulleyJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        this.m_rA = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        this.m_rB = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        this.m_uA = Vec2.sub(Vec2.add(cA2, this.m_rA), this.m_groundAnchorA);\n        this.m_uB = Vec2.sub(Vec2.add(cB2, this.m_rB), this.m_groundAnchorB);\n        var lengthA = this.m_uA.length();\n        var lengthB = this.m_uB.length();\n        if (lengthA > 10 * SettingsInternal.linearSlop) {\n          this.m_uA.mul(1 / lengthA);\n        } else {\n          this.m_uA.setZero();\n        }\n        if (lengthB > 10 * SettingsInternal.linearSlop) {\n          this.m_uB.mul(1 / lengthB);\n        } else {\n          this.m_uB.setZero();\n        }\n        var ruA = Vec2.crossVec2Vec2(this.m_rA, this.m_uA);\n        var ruB = Vec2.crossVec2Vec2(this.m_rB, this.m_uB);\n        var mA = this.m_invMassA + this.m_invIA * ruA * ruA;\n        var mB = this.m_invMassB + this.m_invIB * ruB * ruB;\n        this.m_mass = mA + this.m_ratio * this.m_ratio * mB;\n        if (this.m_mass > 0) {\n          this.m_mass = 1 / this.m_mass;\n        }\n        if (step.warmStarting) {\n          this.m_impulse *= step.dtRatio;\n          var PA = Vec2.mulNumVec2(-this.m_impulse, this.m_uA);\n          var PB = Vec2.mulNumVec2(-this.m_ratio * this.m_impulse, this.m_uB);\n          vA2.addMul(this.m_invMassA, PA);\n          wA += this.m_invIA * Vec2.crossVec2Vec2(this.m_rA, PA);\n          vB2.addMul(this.m_invMassB, PB);\n          wB += this.m_invIB * Vec2.crossVec2Vec2(this.m_rB, PB);\n        } else {\n          this.m_impulse = 0;\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      PulleyJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var vpA = Vec2.add(vA2, Vec2.crossNumVec2(wA, this.m_rA));\n        var vpB = Vec2.add(vB2, Vec2.crossNumVec2(wB, this.m_rB));\n        var Cdot = -Vec2.dot(this.m_uA, vpA) - this.m_ratio * Vec2.dot(this.m_uB, vpB);\n        var impulse = -this.m_mass * Cdot;\n        this.m_impulse += impulse;\n        var PA = Vec2.mulNumVec2(-impulse, this.m_uA);\n        var PB = Vec2.mulNumVec2(-this.m_ratio * impulse, this.m_uB);\n        vA2.addMul(this.m_invMassA, PA);\n        wA += this.m_invIA * Vec2.crossVec2Vec2(this.m_rA, PA);\n        vB2.addMul(this.m_invMassB, PB);\n        wB += this.m_invIB * Vec2.crossVec2Vec2(this.m_rB, PB);\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      PulleyJoint2.prototype.solvePositionConstraints = function(step) {\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var rA2 = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        var rB2 = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var uA = Vec2.sub(Vec2.add(cA2, this.m_rA), this.m_groundAnchorA);\n        var uB = Vec2.sub(Vec2.add(cB2, this.m_rB), this.m_groundAnchorB);\n        var lengthA = uA.length();\n        var lengthB = uB.length();\n        if (lengthA > 10 * SettingsInternal.linearSlop) {\n          uA.mul(1 / lengthA);\n        } else {\n          uA.setZero();\n        }\n        if (lengthB > 10 * SettingsInternal.linearSlop) {\n          uB.mul(1 / lengthB);\n        } else {\n          uB.setZero();\n        }\n        var ruA = Vec2.crossVec2Vec2(rA2, uA);\n        var ruB = Vec2.crossVec2Vec2(rB2, uB);\n        var mA = this.m_invMassA + this.m_invIA * ruA * ruA;\n        var mB = this.m_invMassB + this.m_invIB * ruB * ruB;\n        var mass = mA + this.m_ratio * this.m_ratio * mB;\n        if (mass > 0) {\n          mass = 1 / mass;\n        }\n        var C = this.m_constant - lengthA - this.m_ratio * lengthB;\n        var linearError = math_abs$2(C);\n        var impulse = -mass * C;\n        var PA = Vec2.mulNumVec2(-impulse, uA);\n        var PB = Vec2.mulNumVec2(-this.m_ratio * impulse, uB);\n        cA2.addMul(this.m_invMassA, PA);\n        aA += this.m_invIA * Vec2.crossVec2Vec2(rA2, PA);\n        cB2.addMul(this.m_invMassB, PB);\n        aB += this.m_invIB * Vec2.crossVec2Vec2(rB2, PB);\n        this.m_bodyA.c_position.c = cA2;\n        this.m_bodyA.c_position.a = aA;\n        this.m_bodyB.c_position.c = cB2;\n        this.m_bodyB.c_position.a = aB;\n        return linearError < SettingsInternal.linearSlop;\n      };\n      PulleyJoint2.TYPE = \"pulley-joint\";\n      return PulleyJoint2;\n    }(Joint)\n  );\n  var math_min$1 = Math.min;\n  var LimitState;\n  (function(LimitState2) {\n    LimitState2[LimitState2[\"inactiveLimit\"] = 0] = \"inactiveLimit\";\n    LimitState2[LimitState2[\"atLowerLimit\"] = 1] = \"atLowerLimit\";\n    LimitState2[LimitState2[\"atUpperLimit\"] = 2] = \"atUpperLimit\";\n    LimitState2[LimitState2[\"equalLimits\"] = 3] = \"equalLimits\";\n  })(LimitState || (LimitState = {}));\n  var DEFAULTS$2 = {\n    maxLength: 0\n  };\n  var RopeJoint = (\n    /** @class */\n    function(_super) {\n      __extends(RopeJoint2, _super);\n      function RopeJoint2(def, bodyA, bodyB, anchor) {\n        var _this = this;\n        if (!(_this instanceof RopeJoint2)) {\n          return new RopeJoint2(def, bodyA, bodyB, anchor);\n        }\n        def = options(def, DEFAULTS$2);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = RopeJoint2.TYPE;\n        _this.m_localAnchorA = Vec2.clone(anchor ? bodyA.getLocalPoint(anchor) : def.localAnchorA || Vec2.neo(-1, 0));\n        _this.m_localAnchorB = Vec2.clone(anchor ? bodyB.getLocalPoint(anchor) : def.localAnchorB || Vec2.neo(1, 0));\n        _this.m_maxLength = def.maxLength;\n        _this.m_mass = 0;\n        _this.m_impulse = 0;\n        _this.m_length = 0;\n        _this.m_state = LimitState.inactiveLimit;\n        return _this;\n      }\n      RopeJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          localAnchorA: this.m_localAnchorA,\n          localAnchorB: this.m_localAnchorB,\n          maxLength: this.m_maxLength\n        };\n      };\n      RopeJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        var joint = new RopeJoint2(data);\n        return joint;\n      };\n      RopeJoint2.prototype._reset = function(def) {\n        if (Number.isFinite(def.maxLength)) {\n          this.m_maxLength = def.maxLength;\n        }\n      };\n      RopeJoint2.prototype.getLocalAnchorA = function() {\n        return this.m_localAnchorA;\n      };\n      RopeJoint2.prototype.getLocalAnchorB = function() {\n        return this.m_localAnchorB;\n      };\n      RopeJoint2.prototype.setMaxLength = function(length) {\n        this.m_maxLength = length;\n      };\n      RopeJoint2.prototype.getMaxLength = function() {\n        return this.m_maxLength;\n      };\n      RopeJoint2.prototype.getLimitState = function() {\n        return this.m_state;\n      };\n      RopeJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      RopeJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      RopeJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.mulNumVec2(this.m_impulse, this.m_u).mul(inv_dt);\n      };\n      RopeJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return 0;\n      };\n      RopeJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        this.m_rA = Rot.mulSub(qA, this.m_localAnchorA, this.m_localCenterA);\n        this.m_rB = Rot.mulSub(qB, this.m_localAnchorB, this.m_localCenterB);\n        this.m_u = Vec2.zero();\n        this.m_u.addCombine(1, cB2, 1, this.m_rB);\n        this.m_u.subCombine(1, cA2, 1, this.m_rA);\n        this.m_length = this.m_u.length();\n        var C = this.m_length - this.m_maxLength;\n        if (C > 0) {\n          this.m_state = LimitState.atUpperLimit;\n        } else {\n          this.m_state = LimitState.inactiveLimit;\n        }\n        if (this.m_length > SettingsInternal.linearSlop) {\n          this.m_u.mul(1 / this.m_length);\n        } else {\n          this.m_u.setZero();\n          this.m_mass = 0;\n          this.m_impulse = 0;\n          return;\n        }\n        var crA = Vec2.crossVec2Vec2(this.m_rA, this.m_u);\n        var crB = Vec2.crossVec2Vec2(this.m_rB, this.m_u);\n        var invMass = this.m_invMassA + this.m_invIA * crA * crA + this.m_invMassB + this.m_invIB * crB * crB;\n        this.m_mass = invMass != 0 ? 1 / invMass : 0;\n        if (step.warmStarting) {\n          this.m_impulse *= step.dtRatio;\n          var P3 = Vec2.mulNumVec2(this.m_impulse, this.m_u);\n          vA2.subMul(this.m_invMassA, P3);\n          wA -= this.m_invIA * Vec2.crossVec2Vec2(this.m_rA, P3);\n          vB2.addMul(this.m_invMassB, P3);\n          wB += this.m_invIB * Vec2.crossVec2Vec2(this.m_rB, P3);\n        } else {\n          this.m_impulse = 0;\n        }\n        this.m_bodyA.c_velocity.v.setVec2(vA2);\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v.setVec2(vB2);\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      RopeJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var vpA = Vec2.addCrossNumVec2(vA2, wA, this.m_rA);\n        var vpB = Vec2.addCrossNumVec2(vB2, wB, this.m_rB);\n        var C = this.m_length - this.m_maxLength;\n        var Cdot = Vec2.dot(this.m_u, Vec2.sub(vpB, vpA));\n        if (C < 0) {\n          Cdot += step.inv_dt * C;\n        }\n        var impulse = -this.m_mass * Cdot;\n        var oldImpulse = this.m_impulse;\n        this.m_impulse = math_min$1(0, this.m_impulse + impulse);\n        impulse = this.m_impulse - oldImpulse;\n        var P3 = Vec2.mulNumVec2(impulse, this.m_u);\n        vA2.subMul(this.m_invMassA, P3);\n        wA -= this.m_invIA * Vec2.crossVec2Vec2(this.m_rA, P3);\n        vB2.addMul(this.m_invMassB, P3);\n        wB += this.m_invIB * Vec2.crossVec2Vec2(this.m_rB, P3);\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      RopeJoint2.prototype.solvePositionConstraints = function(step) {\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var rA2 = Rot.mulSub(qA, this.m_localAnchorA, this.m_localCenterA);\n        var rB2 = Rot.mulSub(qB, this.m_localAnchorB, this.m_localCenterB);\n        var u = Vec2.zero();\n        u.addCombine(1, cB2, 1, rB2);\n        u.subCombine(1, cA2, 1, rA2);\n        var length = u.normalize();\n        var C = length - this.m_maxLength;\n        C = clamp(C, 0, SettingsInternal.maxLinearCorrection);\n        var impulse = -this.m_mass * C;\n        var P3 = Vec2.mulNumVec2(impulse, u);\n        cA2.subMul(this.m_invMassA, P3);\n        aA -= this.m_invIA * Vec2.crossVec2Vec2(rA2, P3);\n        cB2.addMul(this.m_invMassB, P3);\n        aB += this.m_invIB * Vec2.crossVec2Vec2(rB2, P3);\n        this.m_bodyA.c_position.c.setVec2(cA2);\n        this.m_bodyA.c_position.a = aA;\n        this.m_bodyB.c_position.c.setVec2(cB2);\n        this.m_bodyB.c_position.a = aB;\n        return length - this.m_maxLength < SettingsInternal.linearSlop;\n      };\n      RopeJoint2.TYPE = \"rope-joint\";\n      return RopeJoint2;\n    }(Joint)\n  );\n  var math_abs$1 = Math.abs;\n  var math_PI$1 = Math.PI;\n  var DEFAULTS$1 = {\n    frequencyHz: 0,\n    dampingRatio: 0\n  };\n  var WeldJoint = (\n    /** @class */\n    function(_super) {\n      __extends(WeldJoint2, _super);\n      function WeldJoint2(def, bodyA, bodyB, anchor) {\n        var _this = this;\n        if (!(_this instanceof WeldJoint2)) {\n          return new WeldJoint2(def, bodyA, bodyB, anchor);\n        }\n        def = options(def, DEFAULTS$1);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_type = WeldJoint2.TYPE;\n        _this.m_localAnchorA = Vec2.clone(anchor ? bodyA.getLocalPoint(anchor) : def.localAnchorA || Vec2.zero());\n        _this.m_localAnchorB = Vec2.clone(anchor ? bodyB.getLocalPoint(anchor) : def.localAnchorB || Vec2.zero());\n        _this.m_referenceAngle = Number.isFinite(def.referenceAngle) ? def.referenceAngle : bodyB.getAngle() - bodyA.getAngle();\n        _this.m_frequencyHz = def.frequencyHz;\n        _this.m_dampingRatio = def.dampingRatio;\n        _this.m_impulse = new Vec3();\n        _this.m_bias = 0;\n        _this.m_gamma = 0;\n        _this.m_mass = new Mat33();\n        return _this;\n      }\n      WeldJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          frequencyHz: this.m_frequencyHz,\n          dampingRatio: this.m_dampingRatio,\n          localAnchorA: this.m_localAnchorA,\n          localAnchorB: this.m_localAnchorB,\n          referenceAngle: this.m_referenceAngle\n        };\n      };\n      WeldJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        var joint = new WeldJoint2(data);\n        return joint;\n      };\n      WeldJoint2.prototype._reset = function(def) {\n        if (def.anchorA) {\n          this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(def.anchorA));\n        } else if (def.localAnchorA) {\n          this.m_localAnchorA.setVec2(def.localAnchorA);\n        }\n        if (def.anchorB) {\n          this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(def.anchorB));\n        } else if (def.localAnchorB) {\n          this.m_localAnchorB.setVec2(def.localAnchorB);\n        }\n        if (Number.isFinite(def.frequencyHz)) {\n          this.m_frequencyHz = def.frequencyHz;\n        }\n        if (Number.isFinite(def.dampingRatio)) {\n          this.m_dampingRatio = def.dampingRatio;\n        }\n      };\n      WeldJoint2.prototype.getLocalAnchorA = function() {\n        return this.m_localAnchorA;\n      };\n      WeldJoint2.prototype.getLocalAnchorB = function() {\n        return this.m_localAnchorB;\n      };\n      WeldJoint2.prototype.getReferenceAngle = function() {\n        return this.m_referenceAngle;\n      };\n      WeldJoint2.prototype.setFrequency = function(hz) {\n        this.m_frequencyHz = hz;\n      };\n      WeldJoint2.prototype.getFrequency = function() {\n        return this.m_frequencyHz;\n      };\n      WeldJoint2.prototype.setDampingRatio = function(ratio) {\n        this.m_dampingRatio = ratio;\n      };\n      WeldJoint2.prototype.getDampingRatio = function() {\n        return this.m_dampingRatio;\n      };\n      WeldJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      WeldJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      WeldJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.neo(this.m_impulse.x, this.m_impulse.y).mul(inv_dt);\n      };\n      WeldJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return inv_dt * this.m_impulse.z;\n      };\n      WeldJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        this.m_rA = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        this.m_rB = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var K = new Mat33();\n        K.ex.x = mA + mB + this.m_rA.y * this.m_rA.y * iA + this.m_rB.y * this.m_rB.y * iB;\n        K.ey.x = -this.m_rA.y * this.m_rA.x * iA - this.m_rB.y * this.m_rB.x * iB;\n        K.ez.x = -this.m_rA.y * iA - this.m_rB.y * iB;\n        K.ex.y = K.ey.x;\n        K.ey.y = mA + mB + this.m_rA.x * this.m_rA.x * iA + this.m_rB.x * this.m_rB.x * iB;\n        K.ez.y = this.m_rA.x * iA + this.m_rB.x * iB;\n        K.ex.z = K.ez.x;\n        K.ey.z = K.ez.y;\n        K.ez.z = iA + iB;\n        if (this.m_frequencyHz > 0) {\n          K.getInverse22(this.m_mass);\n          var invM = iA + iB;\n          var m = invM > 0 ? 1 / invM : 0;\n          var C = aB - aA - this.m_referenceAngle;\n          var omega = 2 * math_PI$1 * this.m_frequencyHz;\n          var d2 = 2 * m * this.m_dampingRatio * omega;\n          var k = m * omega * omega;\n          var h = step.dt;\n          this.m_gamma = h * (d2 + h * k);\n          this.m_gamma = this.m_gamma != 0 ? 1 / this.m_gamma : 0;\n          this.m_bias = C * h * k * this.m_gamma;\n          invM += this.m_gamma;\n          this.m_mass.ez.z = invM != 0 ? 1 / invM : 0;\n        } else if (K.ez.z == 0) {\n          K.getInverse22(this.m_mass);\n          this.m_gamma = 0;\n          this.m_bias = 0;\n        } else {\n          K.getSymInverse33(this.m_mass);\n          this.m_gamma = 0;\n          this.m_bias = 0;\n        }\n        if (step.warmStarting) {\n          this.m_impulse.mul(step.dtRatio);\n          var P3 = Vec2.neo(this.m_impulse.x, this.m_impulse.y);\n          vA2.subMul(mA, P3);\n          wA -= iA * (Vec2.crossVec2Vec2(this.m_rA, P3) + this.m_impulse.z);\n          vB2.addMul(mB, P3);\n          wB += iB * (Vec2.crossVec2Vec2(this.m_rB, P3) + this.m_impulse.z);\n        } else {\n          this.m_impulse.setZero();\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      WeldJoint2.prototype.solveVelocityConstraints = function(step) {\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        if (this.m_frequencyHz > 0) {\n          var Cdot2 = wB - wA;\n          var impulse2 = -this.m_mass.ez.z * (Cdot2 + this.m_bias + this.m_gamma * this.m_impulse.z);\n          this.m_impulse.z += impulse2;\n          wA -= iA * impulse2;\n          wB += iB * impulse2;\n          var Cdot1 = Vec2.zero();\n          Cdot1.addCombine(1, vB2, 1, Vec2.crossNumVec2(wB, this.m_rB));\n          Cdot1.subCombine(1, vA2, 1, Vec2.crossNumVec2(wA, this.m_rA));\n          var impulse1 = Vec2.neg(Mat33.mulVec2(this.m_mass, Cdot1));\n          this.m_impulse.x += impulse1.x;\n          this.m_impulse.y += impulse1.y;\n          var P3 = Vec2.clone(impulse1);\n          vA2.subMul(mA, P3);\n          wA -= iA * Vec2.crossVec2Vec2(this.m_rA, P3);\n          vB2.addMul(mB, P3);\n          wB += iB * Vec2.crossVec2Vec2(this.m_rB, P3);\n        } else {\n          var Cdot1 = Vec2.zero();\n          Cdot1.addCombine(1, vB2, 1, Vec2.crossNumVec2(wB, this.m_rB));\n          Cdot1.subCombine(1, vA2, 1, Vec2.crossNumVec2(wA, this.m_rA));\n          var Cdot2 = wB - wA;\n          var Cdot = new Vec3(Cdot1.x, Cdot1.y, Cdot2);\n          var impulse = Vec3.neg(Mat33.mulVec3(this.m_mass, Cdot));\n          this.m_impulse.add(impulse);\n          var P3 = Vec2.neo(impulse.x, impulse.y);\n          vA2.subMul(mA, P3);\n          wA -= iA * (Vec2.crossVec2Vec2(this.m_rA, P3) + impulse.z);\n          vB2.addMul(mB, P3);\n          wB += iB * (Vec2.crossVec2Vec2(this.m_rB, P3) + impulse.z);\n        }\n        this.m_bodyA.c_velocity.v = vA2;\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v = vB2;\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      WeldJoint2.prototype.solvePositionConstraints = function(step) {\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var rA2 = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        var rB2 = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var positionError;\n        var angularError;\n        var K = new Mat33();\n        K.ex.x = mA + mB + rA2.y * rA2.y * iA + rB2.y * rB2.y * iB;\n        K.ey.x = -rA2.y * rA2.x * iA - rB2.y * rB2.x * iB;\n        K.ez.x = -rA2.y * iA - rB2.y * iB;\n        K.ex.y = K.ey.x;\n        K.ey.y = mA + mB + rA2.x * rA2.x * iA + rB2.x * rB2.x * iB;\n        K.ez.y = rA2.x * iA + rB2.x * iB;\n        K.ex.z = K.ez.x;\n        K.ey.z = K.ez.y;\n        K.ez.z = iA + iB;\n        if (this.m_frequencyHz > 0) {\n          var C1 = Vec2.zero();\n          C1.addCombine(1, cB2, 1, rB2);\n          C1.subCombine(1, cA2, 1, rA2);\n          positionError = C1.length();\n          angularError = 0;\n          var P3 = Vec2.neg(K.solve22(C1));\n          cA2.subMul(mA, P3);\n          aA -= iA * Vec2.crossVec2Vec2(rA2, P3);\n          cB2.addMul(mB, P3);\n          aB += iB * Vec2.crossVec2Vec2(rB2, P3);\n        } else {\n          var C1 = Vec2.zero();\n          C1.addCombine(1, cB2, 1, rB2);\n          C1.subCombine(1, cA2, 1, rA2);\n          var C2 = aB - aA - this.m_referenceAngle;\n          positionError = C1.length();\n          angularError = math_abs$1(C2);\n          var C = new Vec3(C1.x, C1.y, C2);\n          var impulse = new Vec3();\n          if (K.ez.z > 0) {\n            impulse = Vec3.neg(K.solve33(C));\n          } else {\n            var impulse2 = Vec2.neg(K.solve22(C1));\n            impulse.set(impulse2.x, impulse2.y, 0);\n          }\n          var P3 = Vec2.neo(impulse.x, impulse.y);\n          cA2.subMul(mA, P3);\n          aA -= iA * (Vec2.crossVec2Vec2(rA2, P3) + impulse.z);\n          cB2.addMul(mB, P3);\n          aB += iB * (Vec2.crossVec2Vec2(rB2, P3) + impulse.z);\n        }\n        this.m_bodyA.c_position.c = cA2;\n        this.m_bodyA.c_position.a = aA;\n        this.m_bodyB.c_position.c = cB2;\n        this.m_bodyB.c_position.a = aB;\n        return positionError <= SettingsInternal.linearSlop && angularError <= SettingsInternal.angularSlop;\n      };\n      WeldJoint2.TYPE = \"weld-joint\";\n      return WeldJoint2;\n    }(Joint)\n  );\n  var math_abs = Math.abs;\n  var math_PI = Math.PI;\n  var DEFAULTS = {\n    enableMotor: false,\n    maxMotorTorque: 0,\n    motorSpeed: 0,\n    frequencyHz: 2,\n    dampingRatio: 0.7\n  };\n  var WheelJoint = (\n    /** @class */\n    function(_super) {\n      __extends(WheelJoint2, _super);\n      function WheelJoint2(def, bodyA, bodyB, anchor, axis) {\n        var _this = this;\n        if (!(_this instanceof WheelJoint2)) {\n          return new WheelJoint2(def, bodyA, bodyB, anchor, axis);\n        }\n        def = options(def, DEFAULTS);\n        _this = _super.call(this, def, bodyA, bodyB) || this;\n        bodyA = _this.m_bodyA;\n        bodyB = _this.m_bodyB;\n        _this.m_ax = Vec2.zero();\n        _this.m_ay = Vec2.zero();\n        _this.m_type = WheelJoint2.TYPE;\n        _this.m_localAnchorA = Vec2.clone(anchor ? bodyA.getLocalPoint(anchor) : def.localAnchorA || Vec2.zero());\n        _this.m_localAnchorB = Vec2.clone(anchor ? bodyB.getLocalPoint(anchor) : def.localAnchorB || Vec2.zero());\n        if (Vec2.isValid(axis)) {\n          _this.m_localXAxisA = bodyA.getLocalVector(axis);\n        } else if (Vec2.isValid(def.localAxisA)) {\n          _this.m_localXAxisA = Vec2.clone(def.localAxisA);\n        } else if (Vec2.isValid(def.localAxis)) {\n          _this.m_localXAxisA = Vec2.clone(def.localAxis);\n        } else {\n          _this.m_localXAxisA = Vec2.neo(1, 0);\n        }\n        _this.m_localYAxisA = Vec2.crossNumVec2(1, _this.m_localXAxisA);\n        _this.m_mass = 0;\n        _this.m_impulse = 0;\n        _this.m_motorMass = 0;\n        _this.m_motorImpulse = 0;\n        _this.m_springMass = 0;\n        _this.m_springImpulse = 0;\n        _this.m_maxMotorTorque = def.maxMotorTorque;\n        _this.m_motorSpeed = def.motorSpeed;\n        _this.m_enableMotor = def.enableMotor;\n        _this.m_frequencyHz = def.frequencyHz;\n        _this.m_dampingRatio = def.dampingRatio;\n        _this.m_bias = 0;\n        _this.m_gamma = 0;\n        return _this;\n      }\n      WheelJoint2.prototype._serialize = function() {\n        return {\n          type: this.m_type,\n          bodyA: this.m_bodyA,\n          bodyB: this.m_bodyB,\n          collideConnected: this.m_collideConnected,\n          enableMotor: this.m_enableMotor,\n          maxMotorTorque: this.m_maxMotorTorque,\n          motorSpeed: this.m_motorSpeed,\n          frequencyHz: this.m_frequencyHz,\n          dampingRatio: this.m_dampingRatio,\n          localAnchorA: this.m_localAnchorA,\n          localAnchorB: this.m_localAnchorB,\n          localAxisA: this.m_localXAxisA\n        };\n      };\n      WheelJoint2._deserialize = function(data, world, restore) {\n        data = __assign({}, data);\n        data.bodyA = restore(Body, data.bodyA, world);\n        data.bodyB = restore(Body, data.bodyB, world);\n        var joint = new WheelJoint2(data);\n        return joint;\n      };\n      WheelJoint2.prototype._reset = function(def) {\n        if (def.anchorA) {\n          this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(def.anchorA));\n        } else if (def.localAnchorA) {\n          this.m_localAnchorA.setVec2(def.localAnchorA);\n        }\n        if (def.anchorB) {\n          this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(def.anchorB));\n        } else if (def.localAnchorB) {\n          this.m_localAnchorB.setVec2(def.localAnchorB);\n        }\n        if (def.localAxisA) {\n          this.m_localXAxisA.setVec2(def.localAxisA);\n          this.m_localYAxisA.setVec2(Vec2.crossNumVec2(1, def.localAxisA));\n        }\n        if (def.enableMotor !== void 0) {\n          this.m_enableMotor = def.enableMotor;\n        }\n        if (Number.isFinite(def.maxMotorTorque)) {\n          this.m_maxMotorTorque = def.maxMotorTorque;\n        }\n        if (Number.isFinite(def.motorSpeed)) {\n          this.m_motorSpeed = def.motorSpeed;\n        }\n        if (Number.isFinite(def.frequencyHz)) {\n          this.m_frequencyHz = def.frequencyHz;\n        }\n        if (Number.isFinite(def.dampingRatio)) {\n          this.m_dampingRatio = def.dampingRatio;\n        }\n      };\n      WheelJoint2.prototype.getLocalAnchorA = function() {\n        return this.m_localAnchorA;\n      };\n      WheelJoint2.prototype.getLocalAnchorB = function() {\n        return this.m_localAnchorB;\n      };\n      WheelJoint2.prototype.getLocalAxisA = function() {\n        return this.m_localXAxisA;\n      };\n      WheelJoint2.prototype.getJointTranslation = function() {\n        var bA = this.m_bodyA;\n        var bB = this.m_bodyB;\n        var pA2 = bA.getWorldPoint(this.m_localAnchorA);\n        var pB2 = bB.getWorldPoint(this.m_localAnchorB);\n        var d2 = Vec2.sub(pB2, pA2);\n        var axis = bA.getWorldVector(this.m_localXAxisA);\n        var translation2 = Vec2.dot(d2, axis);\n        return translation2;\n      };\n      WheelJoint2.prototype.getJointSpeed = function() {\n        var wA = this.m_bodyA.m_angularVelocity;\n        var wB = this.m_bodyB.m_angularVelocity;\n        return wB - wA;\n      };\n      WheelJoint2.prototype.isMotorEnabled = function() {\n        return this.m_enableMotor;\n      };\n      WheelJoint2.prototype.enableMotor = function(flag) {\n        if (flag == this.m_enableMotor)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_enableMotor = flag;\n      };\n      WheelJoint2.prototype.setMotorSpeed = function(speed) {\n        if (speed == this.m_motorSpeed)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_motorSpeed = speed;\n      };\n      WheelJoint2.prototype.getMotorSpeed = function() {\n        return this.m_motorSpeed;\n      };\n      WheelJoint2.prototype.setMaxMotorTorque = function(torque) {\n        if (torque == this.m_maxMotorTorque)\n          return;\n        this.m_bodyA.setAwake(true);\n        this.m_bodyB.setAwake(true);\n        this.m_maxMotorTorque = torque;\n      };\n      WheelJoint2.prototype.getMaxMotorTorque = function() {\n        return this.m_maxMotorTorque;\n      };\n      WheelJoint2.prototype.getMotorTorque = function(inv_dt) {\n        return inv_dt * this.m_motorImpulse;\n      };\n      WheelJoint2.prototype.setSpringFrequencyHz = function(hz) {\n        this.m_frequencyHz = hz;\n      };\n      WheelJoint2.prototype.getSpringFrequencyHz = function() {\n        return this.m_frequencyHz;\n      };\n      WheelJoint2.prototype.setSpringDampingRatio = function(ratio) {\n        this.m_dampingRatio = ratio;\n      };\n      WheelJoint2.prototype.getSpringDampingRatio = function() {\n        return this.m_dampingRatio;\n      };\n      WheelJoint2.prototype.getAnchorA = function() {\n        return this.m_bodyA.getWorldPoint(this.m_localAnchorA);\n      };\n      WheelJoint2.prototype.getAnchorB = function() {\n        return this.m_bodyB.getWorldPoint(this.m_localAnchorB);\n      };\n      WheelJoint2.prototype.getReactionForce = function(inv_dt) {\n        return Vec2.combine(this.m_impulse, this.m_ay, this.m_springImpulse, this.m_ax).mul(inv_dt);\n      };\n      WheelJoint2.prototype.getReactionTorque = function(inv_dt) {\n        return inv_dt * this.m_motorImpulse;\n      };\n      WheelJoint2.prototype.initVelocityConstraints = function(step) {\n        this.m_localCenterA = this.m_bodyA.m_sweep.localCenter;\n        this.m_localCenterB = this.m_bodyB.m_sweep.localCenter;\n        this.m_invMassA = this.m_bodyA.m_invMass;\n        this.m_invMassB = this.m_bodyB.m_invMass;\n        this.m_invIA = this.m_bodyA.m_invI;\n        this.m_invIB = this.m_bodyB.m_invI;\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var rA2 = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        var rB2 = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var d2 = Vec2.zero();\n        d2.addCombine(1, cB2, 1, rB2);\n        d2.subCombine(1, cA2, 1, rA2);\n        {\n          this.m_ay = Rot.mulVec2(qA, this.m_localYAxisA);\n          this.m_sAy = Vec2.crossVec2Vec2(Vec2.add(d2, rA2), this.m_ay);\n          this.m_sBy = Vec2.crossVec2Vec2(rB2, this.m_ay);\n          this.m_mass = mA + mB + iA * this.m_sAy * this.m_sAy + iB * this.m_sBy * this.m_sBy;\n          if (this.m_mass > 0) {\n            this.m_mass = 1 / this.m_mass;\n          }\n        }\n        this.m_springMass = 0;\n        this.m_bias = 0;\n        this.m_gamma = 0;\n        if (this.m_frequencyHz > 0) {\n          this.m_ax = Rot.mulVec2(qA, this.m_localXAxisA);\n          this.m_sAx = Vec2.crossVec2Vec2(Vec2.add(d2, rA2), this.m_ax);\n          this.m_sBx = Vec2.crossVec2Vec2(rB2, this.m_ax);\n          var invMass = mA + mB + iA * this.m_sAx * this.m_sAx + iB * this.m_sBx * this.m_sBx;\n          if (invMass > 0) {\n            this.m_springMass = 1 / invMass;\n            var C = Vec2.dot(d2, this.m_ax);\n            var omega = 2 * math_PI * this.m_frequencyHz;\n            var damp = 2 * this.m_springMass * this.m_dampingRatio * omega;\n            var k = this.m_springMass * omega * omega;\n            var h = step.dt;\n            this.m_gamma = h * (damp + h * k);\n            if (this.m_gamma > 0) {\n              this.m_gamma = 1 / this.m_gamma;\n            }\n            this.m_bias = C * h * k * this.m_gamma;\n            this.m_springMass = invMass + this.m_gamma;\n            if (this.m_springMass > 0) {\n              this.m_springMass = 1 / this.m_springMass;\n            }\n          }\n        } else {\n          this.m_springImpulse = 0;\n        }\n        if (this.m_enableMotor) {\n          this.m_motorMass = iA + iB;\n          if (this.m_motorMass > 0) {\n            this.m_motorMass = 1 / this.m_motorMass;\n          }\n        } else {\n          this.m_motorMass = 0;\n          this.m_motorImpulse = 0;\n        }\n        if (step.warmStarting) {\n          this.m_impulse *= step.dtRatio;\n          this.m_springImpulse *= step.dtRatio;\n          this.m_motorImpulse *= step.dtRatio;\n          var P3 = Vec2.combine(this.m_impulse, this.m_ay, this.m_springImpulse, this.m_ax);\n          var LA = this.m_impulse * this.m_sAy + this.m_springImpulse * this.m_sAx + this.m_motorImpulse;\n          var LB = this.m_impulse * this.m_sBy + this.m_springImpulse * this.m_sBx + this.m_motorImpulse;\n          vA2.subMul(this.m_invMassA, P3);\n          wA -= this.m_invIA * LA;\n          vB2.addMul(this.m_invMassB, P3);\n          wB += this.m_invIB * LB;\n        } else {\n          this.m_impulse = 0;\n          this.m_springImpulse = 0;\n          this.m_motorImpulse = 0;\n        }\n        this.m_bodyA.c_velocity.v.setVec2(vA2);\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v.setVec2(vB2);\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      WheelJoint2.prototype.solveVelocityConstraints = function(step) {\n        var mA = this.m_invMassA;\n        var mB = this.m_invMassB;\n        var iA = this.m_invIA;\n        var iB = this.m_invIB;\n        var vA2 = this.m_bodyA.c_velocity.v;\n        var wA = this.m_bodyA.c_velocity.w;\n        var vB2 = this.m_bodyB.c_velocity.v;\n        var wB = this.m_bodyB.c_velocity.w;\n        {\n          var Cdot = Vec2.dot(this.m_ax, vB2) - Vec2.dot(this.m_ax, vA2) + this.m_sBx * wB - this.m_sAx * wA;\n          var impulse = -this.m_springMass * (Cdot + this.m_bias + this.m_gamma * this.m_springImpulse);\n          this.m_springImpulse += impulse;\n          var P3 = Vec2.mulNumVec2(impulse, this.m_ax);\n          var LA = impulse * this.m_sAx;\n          var LB = impulse * this.m_sBx;\n          vA2.subMul(mA, P3);\n          wA -= iA * LA;\n          vB2.addMul(mB, P3);\n          wB += iB * LB;\n        }\n        {\n          var Cdot = wB - wA - this.m_motorSpeed;\n          var impulse = -this.m_motorMass * Cdot;\n          var oldImpulse = this.m_motorImpulse;\n          var maxImpulse = step.dt * this.m_maxMotorTorque;\n          this.m_motorImpulse = clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);\n          impulse = this.m_motorImpulse - oldImpulse;\n          wA -= iA * impulse;\n          wB += iB * impulse;\n        }\n        {\n          var Cdot = Vec2.dot(this.m_ay, vB2) - Vec2.dot(this.m_ay, vA2) + this.m_sBy * wB - this.m_sAy * wA;\n          var impulse = -this.m_mass * Cdot;\n          this.m_impulse += impulse;\n          var P3 = Vec2.mulNumVec2(impulse, this.m_ay);\n          var LA = impulse * this.m_sAy;\n          var LB = impulse * this.m_sBy;\n          vA2.subMul(mA, P3);\n          wA -= iA * LA;\n          vB2.addMul(mB, P3);\n          wB += iB * LB;\n        }\n        this.m_bodyA.c_velocity.v.setVec2(vA2);\n        this.m_bodyA.c_velocity.w = wA;\n        this.m_bodyB.c_velocity.v.setVec2(vB2);\n        this.m_bodyB.c_velocity.w = wB;\n      };\n      WheelJoint2.prototype.solvePositionConstraints = function(step) {\n        var cA2 = this.m_bodyA.c_position.c;\n        var aA = this.m_bodyA.c_position.a;\n        var cB2 = this.m_bodyB.c_position.c;\n        var aB = this.m_bodyB.c_position.a;\n        var qA = Rot.neo(aA);\n        var qB = Rot.neo(aB);\n        var rA2 = Rot.mulVec2(qA, Vec2.sub(this.m_localAnchorA, this.m_localCenterA));\n        var rB2 = Rot.mulVec2(qB, Vec2.sub(this.m_localAnchorB, this.m_localCenterB));\n        var d2 = Vec2.zero();\n        d2.addCombine(1, cB2, 1, rB2);\n        d2.subCombine(1, cA2, 1, rA2);\n        var ay = Rot.mulVec2(qA, this.m_localYAxisA);\n        var sAy = Vec2.crossVec2Vec2(Vec2.add(d2, rA2), ay);\n        var sBy = Vec2.crossVec2Vec2(rB2, ay);\n        var C = Vec2.dot(d2, ay);\n        var k = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_sAy * this.m_sAy + this.m_invIB * this.m_sBy * this.m_sBy;\n        var impulse = k != 0 ? -C / k : 0;\n        var P3 = Vec2.mulNumVec2(impulse, ay);\n        var LA = impulse * sAy;\n        var LB = impulse * sBy;\n        cA2.subMul(this.m_invMassA, P3);\n        aA -= this.m_invIA * LA;\n        cB2.addMul(this.m_invMassB, P3);\n        aB += this.m_invIB * LB;\n        this.m_bodyA.c_position.c.setVec2(cA2);\n        this.m_bodyA.c_position.a = aA;\n        this.m_bodyB.c_position.c.setVec2(cB2);\n        this.m_bodyB.c_position.a = aB;\n        return math_abs(C) <= SettingsInternal.linearSlop;\n      };\n      WheelJoint2.TYPE = \"wheel-joint\";\n      return WheelJoint2;\n    }(Joint)\n  );\n  var _a;\n  var SID = 0;\n  var SERIALIZE_REF_TYPES = {\n    \"World\": World,\n    \"Body\": Body,\n    \"Joint\": Joint,\n    \"Fixture\": Fixture,\n    \"Shape\": Shape\n  };\n  var DESERIALIZE_BY_REF_TYPE = {\n    \"Vec2\": Vec2,\n    \"Vec3\": Vec3,\n    \"World\": World,\n    \"Body\": Body,\n    \"Joint\": Joint,\n    \"Fixture\": Fixture,\n    \"Shape\": Shape\n  };\n  var DESERIALIZE_BY_TYPE_FIELD = (_a = {}, _a[Body.STATIC] = Body, _a[Body.DYNAMIC] = Body, _a[Body.KINEMATIC] = Body, _a[ChainShape.TYPE] = ChainShape, // [BoxShape.TYPE]: BoxShape,\n  _a[PolygonShape.TYPE] = PolygonShape, _a[EdgeShape.TYPE] = EdgeShape, _a[CircleShape.TYPE] = CircleShape, _a[DistanceJoint.TYPE] = DistanceJoint, _a[FrictionJoint.TYPE] = FrictionJoint, _a[GearJoint.TYPE] = GearJoint, _a[MotorJoint.TYPE] = MotorJoint, _a[MouseJoint.TYPE] = MouseJoint, _a[PrismaticJoint.TYPE] = PrismaticJoint, _a[PulleyJoint.TYPE] = PulleyJoint, _a[RevoluteJoint.TYPE] = RevoluteJoint, _a[RopeJoint.TYPE] = RopeJoint, _a[WeldJoint.TYPE] = WeldJoint, _a[WheelJoint.TYPE] = WheelJoint, _a);\n  var DEFAULT_OPTIONS = {\n    rootClass: World,\n    preSerialize: function(obj) {\n      return obj;\n    },\n    postSerialize: function(data, obj) {\n      return data;\n    },\n    preDeserialize: function(data) {\n      return data;\n    },\n    postDeserialize: function(obj, data) {\n      return obj;\n    }\n  };\n  var Serializer = (\n    /** @class */\n    /* @__PURE__ */ function() {\n      function Serializer2(options2) {\n        var _this = this;\n        this.toJson = function(root) {\n          var preSerialize = _this.options.preSerialize;\n          var postSerialize = _this.options.postSerialize;\n          var json = [];\n          var refQueue = [root];\n          var refMemoById = {};\n          function addToRefQueue(value, typeName) {\n            value.__sid = value.__sid || ++SID;\n            if (!refMemoById[value.__sid]) {\n              refQueue.push(value);\n              var index = json.length + refQueue.length;\n              var ref = {\n                refIndex: index,\n                refType: typeName\n              };\n              refMemoById[value.__sid] = ref;\n            }\n            return refMemoById[value.__sid];\n          }\n          function serializeWithHooks(obj2) {\n            obj2 = preSerialize(obj2);\n            var data = obj2._serialize();\n            data = postSerialize(data, obj2);\n            return data;\n          }\n          function traverse(value, noRefType) {\n            if (noRefType === void 0) {\n              noRefType = false;\n            }\n            if (typeof value !== \"object\" || value === null) {\n              return value;\n            }\n            if (typeof value._serialize === \"function\") {\n              if (!noRefType) {\n                for (var typeName in SERIALIZE_REF_TYPES) {\n                  if (value instanceof SERIALIZE_REF_TYPES[typeName]) {\n                    return addToRefQueue(value, typeName);\n                  }\n                }\n              }\n              value = serializeWithHooks(value);\n            }\n            if (Array.isArray(value)) {\n              var newValue = [];\n              for (var key = 0; key < value.length; key++) {\n                newValue[key] = traverse(value[key]);\n              }\n              value = newValue;\n            } else {\n              var newValue = {};\n              for (var key in value) {\n                if (value.hasOwnProperty(key)) {\n                  newValue[key] = traverse(value[key]);\n                }\n              }\n              value = newValue;\n            }\n            return value;\n          }\n          while (refQueue.length) {\n            var obj = refQueue.shift();\n            var str = traverse(obj, true);\n            json.push(str);\n          }\n          return json;\n        };\n        this.fromJson = function(json) {\n          var preDeserialize = _this.options.preDeserialize;\n          var postDeserialize = _this.options.postDeserialize;\n          var rootClass = _this.options.rootClass;\n          var deserializedRefMemoByIndex = {};\n          function deserializeWithHooks(classHint, data, context) {\n            if (!classHint || !classHint._deserialize) {\n              classHint = DESERIALIZE_BY_TYPE_FIELD[data.type];\n            }\n            var deserializer = classHint && classHint._deserialize;\n            if (!deserializer) {\n              return;\n            }\n            data = preDeserialize(data);\n            var classDeserializeFn = classHint._deserialize;\n            var obj = classDeserializeFn(data, context, deserializeChild);\n            obj = postDeserialize(obj, data);\n            return obj;\n          }\n          function deserializeChild(classHint, dataOrRef, context) {\n            var isRefObject = dataOrRef.refIndex && dataOrRef.refType;\n            if (!isRefObject) {\n              return deserializeWithHooks(classHint, dataOrRef, context);\n            }\n            var ref = dataOrRef;\n            if (DESERIALIZE_BY_REF_TYPE[ref.refType]) {\n              classHint = DESERIALIZE_BY_REF_TYPE[ref.refType];\n            }\n            var refIndex = ref.refIndex;\n            if (!deserializedRefMemoByIndex[refIndex]) {\n              var data = json[refIndex];\n              var obj = deserializeWithHooks(classHint, data, context);\n              deserializedRefMemoByIndex[refIndex] = obj;\n            }\n            return deserializedRefMemoByIndex[refIndex];\n          }\n          var root = deserializeWithHooks(rootClass, json[0], null);\n          return root;\n        };\n        this.options = __assign(__assign({}, DEFAULT_OPTIONS), options2);\n      }\n      return Serializer2;\n    }()\n  );\n  var worldSerializer = new Serializer({\n    rootClass: World\n  });\n  Serializer.fromJson = worldSerializer.fromJson;\n  Serializer.toJson = worldSerializer.toJson;\n  var Testbed = (\n    /** @class */\n    function() {\n      function Testbed2() {\n      }\n      Testbed2.mount = function(options2) {\n        throw new Error(\"Not implemented\");\n      };\n      Testbed2.start = function(world) {\n        var testbed2 = Testbed2.mount();\n        testbed2.start(world);\n        return testbed2;\n      };\n      return Testbed2;\n    }()\n  );\n  function testbed(a2, b2) {\n    var callback;\n    var options2;\n    if (typeof a2 === \"function\") {\n      callback = a2;\n      options2 = b2;\n    } else if (typeof b2 === \"function\") {\n      callback = b2;\n      options2 = a2;\n    } else {\n      options2 = a2 !== null && a2 !== void 0 ? a2 : b2;\n    }\n    var testbed2 = Testbed.mount(options2);\n    if (callback) {\n      var world = callback(testbed2) || testbed2.world;\n      testbed2.start(world);\n    } else {\n      return testbed2;\n    }\n  }\n  var BoxShape = (\n    /** @class */\n    function(_super) {\n      __extends(BoxShape2, _super);\n      function BoxShape2(halfWidth, halfHeight, center2, angle) {\n        var _this = this;\n        if (!(_this instanceof BoxShape2)) {\n          return new BoxShape2(halfWidth, halfHeight, center2, angle);\n        }\n        _this = _super.call(this) || this;\n        _this._setAsBox(halfWidth, halfHeight, center2, angle);\n        return _this;\n      }\n      BoxShape2.TYPE = \"polygon\";\n      return BoxShape2;\n    }(PolygonShape)\n  );\n  Contact.addType(CircleShape.TYPE, CircleShape.TYPE, CircleCircleContact);\n  function CircleCircleContact(manifold, xfA2, fixtureA, indexA, xfB2, fixtureB, indexB) {\n    CollideCircles(manifold, fixtureA.getShape(), xfA2, fixtureB.getShape(), xfB2);\n  }\n  var pA = vec2(0, 0);\n  var pB = vec2(0, 0);\n  var CollideCircles = function(manifold, circleA, xfA2, circleB, xfB2) {\n    manifold.pointCount = 0;\n    transformVec2(pA, xfA2, circleA.m_p);\n    transformVec2(pB, xfB2, circleB.m_p);\n    var distSqr = distSqrVec2(pB, pA);\n    var rA2 = circleA.m_radius;\n    var rB2 = circleB.m_radius;\n    var radius = rA2 + rB2;\n    if (distSqr > radius * radius) {\n      return;\n    }\n    manifold.type = exports2.ManifoldType.e_circles;\n    copyVec2(manifold.localPoint, circleA.m_p);\n    zeroVec2(manifold.localNormal);\n    manifold.pointCount = 1;\n    copyVec2(manifold.points[0].localPoint, circleB.m_p);\n    manifold.points[0].id.setFeatures(0, exports2.ContactFeatureType.e_vertex, 0, exports2.ContactFeatureType.e_vertex);\n  };\n  Contact.addType(EdgeShape.TYPE, CircleShape.TYPE, EdgeCircleContact);\n  Contact.addType(ChainShape.TYPE, CircleShape.TYPE, ChainCircleContact);\n  function EdgeCircleContact(manifold, xfA2, fixtureA, indexA, xfB2, fixtureB, indexB) {\n    var shapeA = fixtureA.getShape();\n    var shapeB = fixtureB.getShape();\n    CollideEdgeCircle(manifold, shapeA, xfA2, shapeB, xfB2);\n  }\n  function ChainCircleContact(manifold, xfA2, fixtureA, indexA, xfB2, fixtureB, indexB) {\n    var chain = fixtureA.getShape();\n    var edge = new EdgeShape();\n    chain.getChildEdge(edge, indexA);\n    var shapeA = edge;\n    var shapeB = fixtureB.getShape();\n    CollideEdgeCircle(manifold, shapeA, xfA2, shapeB, xfB2);\n  }\n  var e = vec2(0, 0);\n  var e1 = vec2(0, 0);\n  var e2 = vec2(0, 0);\n  var Q = vec2(0, 0);\n  var P = vec2(0, 0);\n  var n$2 = vec2(0, 0);\n  var CollideEdgeCircle = function(manifold, edgeA, xfA2, circleB, xfB2) {\n    manifold.pointCount = 0;\n    retransformVec2(Q, xfB2, xfA2, circleB.m_p);\n    var A = edgeA.m_vertex1;\n    var B = edgeA.m_vertex2;\n    subVec2(e, B, A);\n    var u = dotVec2(e, B) - dotVec2(e, Q);\n    var v3 = dotVec2(e, Q) - dotVec2(e, A);\n    var radius = edgeA.m_radius + circleB.m_radius;\n    if (v3 <= 0) {\n      copyVec2(P, A);\n      var dd_1 = distSqrVec2(Q, A);\n      if (dd_1 > radius * radius) {\n        return;\n      }\n      if (edgeA.m_hasVertex0) {\n        var A1 = edgeA.m_vertex0;\n        var B1 = A;\n        subVec2(e1, B1, A1);\n        var u1 = dotVec2(e1, B1) - dotVec2(e1, Q);\n        if (u1 > 0) {\n          return;\n        }\n      }\n      manifold.type = exports2.ManifoldType.e_circles;\n      zeroVec2(manifold.localNormal);\n      copyVec2(manifold.localPoint, P);\n      manifold.pointCount = 1;\n      copyVec2(manifold.points[0].localPoint, circleB.m_p);\n      manifold.points[0].id.setFeatures(0, exports2.ContactFeatureType.e_vertex, 0, exports2.ContactFeatureType.e_vertex);\n      return;\n    }\n    if (u <= 0) {\n      copyVec2(P, B);\n      var dd_2 = distSqrVec2(Q, P);\n      if (dd_2 > radius * radius) {\n        return;\n      }\n      if (edgeA.m_hasVertex3) {\n        var B2 = edgeA.m_vertex3;\n        var A2 = B;\n        subVec2(e2, B2, A2);\n        var v22 = dotVec2(e2, Q) - dotVec2(e2, A2);\n        if (v22 > 0) {\n          return;\n        }\n      }\n      manifold.type = exports2.ManifoldType.e_circles;\n      zeroVec2(manifold.localNormal);\n      copyVec2(manifold.localPoint, P);\n      manifold.pointCount = 1;\n      copyVec2(manifold.points[0].localPoint, circleB.m_p);\n      manifold.points[0].id.setFeatures(1, exports2.ContactFeatureType.e_vertex, 0, exports2.ContactFeatureType.e_vertex);\n      return;\n    }\n    var den = lengthSqrVec2(e);\n    combine2Vec2(P, u / den, A, v3 / den, B);\n    var dd = distSqrVec2(Q, P);\n    if (dd > radius * radius) {\n      return;\n    }\n    crossNumVec2(n$2, 1, e);\n    if (dotVec2(n$2, Q) - dotVec2(n$2, A) < 0) {\n      negVec2(n$2);\n    }\n    normalizeVec2(n$2);\n    manifold.type = exports2.ManifoldType.e_faceA;\n    copyVec2(manifold.localNormal, n$2);\n    copyVec2(manifold.localPoint, A);\n    manifold.pointCount = 1;\n    copyVec2(manifold.points[0].localPoint, circleB.m_p);\n    manifold.points[0].id.setFeatures(0, exports2.ContactFeatureType.e_face, 0, exports2.ContactFeatureType.e_vertex);\n  };\n  var incidentEdge = [new ClipVertex(), new ClipVertex()];\n  var clipPoints1$1 = [new ClipVertex(), new ClipVertex()];\n  var clipPoints2$1 = [new ClipVertex(), new ClipVertex()];\n  var clipSegmentToLineNormal = vec2(0, 0);\n  var v1 = vec2(0, 0);\n  var n$1 = vec2(0, 0);\n  var xf$1 = transform(0, 0, 0);\n  var v11 = vec2(0, 0);\n  var v12 = vec2(0, 0);\n  var localTangent = vec2(0, 0);\n  var localNormal = vec2(0, 0);\n  var planePoint = vec2(0, 0);\n  var tangent = vec2(0, 0);\n  var normal$1 = vec2(0, 0);\n  var normal1$1 = vec2(0, 0);\n  Contact.addType(PolygonShape.TYPE, PolygonShape.TYPE, PolygonContact);\n  function PolygonContact(manifold, xfA2, fixtureA, indexA, xfB2, fixtureB, indexB) {\n    CollidePolygons(manifold, fixtureA.getShape(), xfA2, fixtureB.getShape(), xfB2);\n  }\n  function findMaxSeparation(poly1, xf1, poly2, xf2, output2) {\n    var count1 = poly1.m_count;\n    var count2 = poly2.m_count;\n    var n1s = poly1.m_normals;\n    var v1s = poly1.m_vertices;\n    var v2s = poly2.m_vertices;\n    detransformTransform(xf$1, xf2, xf1);\n    var bestIndex = 0;\n    var maxSeparation2 = -Infinity;\n    for (var i = 0; i < count1; ++i) {\n      rotVec2(n$1, xf$1.q, n1s[i]);\n      transformVec2(v1, xf$1, v1s[i]);\n      var si = Infinity;\n      for (var j = 0; j < count2; ++j) {\n        var sij = dotVec2(n$1, v2s[j]) - dotVec2(n$1, v1);\n        if (sij < si) {\n          si = sij;\n        }\n      }\n      if (si > maxSeparation2) {\n        maxSeparation2 = si;\n        bestIndex = i;\n      }\n    }\n    output2.maxSeparation = maxSeparation2;\n    output2.bestIndex = bestIndex;\n  }\n  function findIncidentEdge(clipVertex, poly1, xf1, edge12, poly2, xf2) {\n    var normals1 = poly1.m_normals;\n    var count2 = poly2.m_count;\n    var vertices2 = poly2.m_vertices;\n    var normals2 = poly2.m_normals;\n    rerotVec2(normal1$1, xf2.q, xf1.q, normals1[edge12]);\n    var index = 0;\n    var minDot = Infinity;\n    for (var i = 0; i < count2; ++i) {\n      var dot = dotVec2(normal1$1, normals2[i]);\n      if (dot < minDot) {\n        minDot = dot;\n        index = i;\n      }\n    }\n    var i1 = index;\n    var i2 = i1 + 1 < count2 ? i1 + 1 : 0;\n    transformVec2(clipVertex[0].v, xf2, vertices2[i1]);\n    clipVertex[0].id.setFeatures(edge12, exports2.ContactFeatureType.e_face, i1, exports2.ContactFeatureType.e_vertex);\n    transformVec2(clipVertex[1].v, xf2, vertices2[i2]);\n    clipVertex[1].id.setFeatures(edge12, exports2.ContactFeatureType.e_face, i2, exports2.ContactFeatureType.e_vertex);\n  }\n  var maxSeparation = {\n    maxSeparation: 0,\n    bestIndex: 0\n  };\n  var CollidePolygons = function(manifold, polyA, xfA2, polyB, xfB2) {\n    manifold.pointCount = 0;\n    var totalRadius = polyA.m_radius + polyB.m_radius;\n    findMaxSeparation(polyA, xfA2, polyB, xfB2, maxSeparation);\n    var edgeA = maxSeparation.bestIndex;\n    var separationA = maxSeparation.maxSeparation;\n    if (separationA > totalRadius)\n      return;\n    findMaxSeparation(polyB, xfB2, polyA, xfA2, maxSeparation);\n    var edgeB = maxSeparation.bestIndex;\n    var separationB = maxSeparation.maxSeparation;\n    if (separationB > totalRadius)\n      return;\n    var poly1;\n    var poly2;\n    var xf1;\n    var xf2;\n    var edge12;\n    var flip;\n    var k_tol = 0.1 * SettingsInternal.linearSlop;\n    if (separationB > separationA + k_tol) {\n      poly1 = polyB;\n      poly2 = polyA;\n      xf1 = xfB2;\n      xf2 = xfA2;\n      edge12 = edgeB;\n      manifold.type = exports2.ManifoldType.e_faceB;\n      flip = true;\n    } else {\n      poly1 = polyA;\n      poly2 = polyB;\n      xf1 = xfA2;\n      xf2 = xfB2;\n      edge12 = edgeA;\n      manifold.type = exports2.ManifoldType.e_faceA;\n      flip = false;\n    }\n    incidentEdge[0].recycle();\n    incidentEdge[1].recycle();\n    findIncidentEdge(incidentEdge, poly1, xf1, edge12, poly2, xf2);\n    var count1 = poly1.m_count;\n    var vertices1 = poly1.m_vertices;\n    var iv1 = edge12;\n    var iv2 = edge12 + 1 < count1 ? edge12 + 1 : 0;\n    copyVec2(v11, vertices1[iv1]);\n    copyVec2(v12, vertices1[iv2]);\n    subVec2(localTangent, v12, v11);\n    normalizeVec2(localTangent);\n    crossVec2Num(localNormal, localTangent, 1);\n    combine2Vec2(planePoint, 0.5, v11, 0.5, v12);\n    rotVec2(tangent, xf1.q, localTangent);\n    crossVec2Num(normal$1, tangent, 1);\n    transformVec2(v11, xf1, v11);\n    transformVec2(v12, xf1, v12);\n    var frontOffset = dotVec2(normal$1, v11);\n    var sideOffset1 = -dotVec2(tangent, v11) + totalRadius;\n    var sideOffset2 = dotVec2(tangent, v12) + totalRadius;\n    clipPoints1$1[0].recycle();\n    clipPoints1$1[1].recycle();\n    clipPoints2$1[0].recycle();\n    clipPoints2$1[1].recycle();\n    setVec2(clipSegmentToLineNormal, -tangent.x, -tangent.y);\n    var np1 = clipSegmentToLine(clipPoints1$1, incidentEdge, clipSegmentToLineNormal, sideOffset1, iv1);\n    if (np1 < 2) {\n      return;\n    }\n    setVec2(clipSegmentToLineNormal, tangent.x, tangent.y);\n    var np2 = clipSegmentToLine(clipPoints2$1, clipPoints1$1, clipSegmentToLineNormal, sideOffset2, iv2);\n    if (np2 < 2) {\n      return;\n    }\n    copyVec2(manifold.localNormal, localNormal);\n    copyVec2(manifold.localPoint, planePoint);\n    var pointCount = 0;\n    for (var i = 0; i < clipPoints2$1.length; ++i) {\n      var separation = dotVec2(normal$1, clipPoints2$1[i].v) - frontOffset;\n      if (separation <= totalRadius) {\n        var cp = manifold.points[pointCount];\n        detransformVec2(cp.localPoint, xf2, clipPoints2$1[i].v);\n        cp.id.set(clipPoints2$1[i].id);\n        if (flip) {\n          cp.id.swapFeatures();\n        }\n        ++pointCount;\n      }\n    }\n    manifold.pointCount = pointCount;\n  };\n  Contact.addType(PolygonShape.TYPE, CircleShape.TYPE, PolygonCircleContact);\n  function PolygonCircleContact(manifold, xfA2, fixtureA, indexA, xfB2, fixtureB, indexB) {\n    CollidePolygonCircle(manifold, fixtureA.getShape(), xfA2, fixtureB.getShape(), xfB2);\n  }\n  var cLocal = vec2(0, 0);\n  var faceCenter = vec2(0, 0);\n  var CollidePolygonCircle = function(manifold, polygonA, xfA2, circleB, xfB2) {\n    manifold.pointCount = 0;\n    retransformVec2(cLocal, xfB2, xfA2, circleB.m_p);\n    var normalIndex = 0;\n    var separation = -Infinity;\n    var radius = polygonA.m_radius + circleB.m_radius;\n    var vertexCount = polygonA.m_count;\n    var vertices = polygonA.m_vertices;\n    var normals = polygonA.m_normals;\n    for (var i = 0; i < vertexCount; ++i) {\n      var s2 = dotVec2(normals[i], cLocal) - dotVec2(normals[i], vertices[i]);\n      if (s2 > radius) {\n        return;\n      }\n      if (s2 > separation) {\n        separation = s2;\n        normalIndex = i;\n      }\n    }\n    var vertIndex1 = normalIndex;\n    var vertIndex2 = vertIndex1 + 1 < vertexCount ? vertIndex1 + 1 : 0;\n    var v13 = vertices[vertIndex1];\n    var v22 = vertices[vertIndex2];\n    if (separation < EPSILON) {\n      manifold.pointCount = 1;\n      manifold.type = exports2.ManifoldType.e_faceA;\n      copyVec2(manifold.localNormal, normals[normalIndex]);\n      combine2Vec2(manifold.localPoint, 0.5, v13, 0.5, v22);\n      copyVec2(manifold.points[0].localPoint, circleB.m_p);\n      manifold.points[0].id.setFeatures(0, exports2.ContactFeatureType.e_vertex, 0, exports2.ContactFeatureType.e_vertex);\n      return;\n    }\n    var u1 = dotVec2(cLocal, v22) - dotVec2(cLocal, v13) - dotVec2(v13, v22) + dotVec2(v13, v13);\n    var u2 = dotVec2(cLocal, v13) - dotVec2(cLocal, v22) - dotVec2(v22, v13) + dotVec2(v22, v22);\n    if (u1 <= 0) {\n      if (distSqrVec2(cLocal, v13) > radius * radius) {\n        return;\n      }\n      manifold.pointCount = 1;\n      manifold.type = exports2.ManifoldType.e_faceA;\n      subVec2(manifold.localNormal, cLocal, v13);\n      normalizeVec2(manifold.localNormal);\n      copyVec2(manifold.localPoint, v13);\n      copyVec2(manifold.points[0].localPoint, circleB.m_p);\n      manifold.points[0].id.setFeatures(0, exports2.ContactFeatureType.e_vertex, 0, exports2.ContactFeatureType.e_vertex);\n    } else if (u2 <= 0) {\n      if (distSqrVec2(cLocal, v22) > radius * radius) {\n        return;\n      }\n      manifold.pointCount = 1;\n      manifold.type = exports2.ManifoldType.e_faceA;\n      subVec2(manifold.localNormal, cLocal, v22);\n      normalizeVec2(manifold.localNormal);\n      copyVec2(manifold.localPoint, v22);\n      copyVec2(manifold.points[0].localPoint, circleB.m_p);\n      manifold.points[0].id.setFeatures(0, exports2.ContactFeatureType.e_vertex, 0, exports2.ContactFeatureType.e_vertex);\n    } else {\n      combine2Vec2(faceCenter, 0.5, v13, 0.5, v22);\n      var separation_1 = dotVec2(cLocal, normals[vertIndex1]) - dotVec2(faceCenter, normals[vertIndex1]);\n      if (separation_1 > radius) {\n        return;\n      }\n      manifold.pointCount = 1;\n      manifold.type = exports2.ManifoldType.e_faceA;\n      copyVec2(manifold.localNormal, normals[vertIndex1]);\n      copyVec2(manifold.localPoint, faceCenter);\n      copyVec2(manifold.points[0].localPoint, circleB.m_p);\n      manifold.points[0].id.setFeatures(0, exports2.ContactFeatureType.e_vertex, 0, exports2.ContactFeatureType.e_vertex);\n    }\n  };\n  var math_min = Math.min;\n  Contact.addType(EdgeShape.TYPE, PolygonShape.TYPE, EdgePolygonContact);\n  Contact.addType(ChainShape.TYPE, PolygonShape.TYPE, ChainPolygonContact);\n  function EdgePolygonContact(manifold, xfA2, fA, indexA, xfB2, fB, indexB) {\n    CollideEdgePolygon(manifold, fA.getShape(), xfA2, fB.getShape(), xfB2);\n  }\n  var edge_reuse = new EdgeShape();\n  function ChainPolygonContact(manifold, xfA2, fA, indexA, xfB2, fB, indexB) {\n    var chain = fA.getShape();\n    chain.getChildEdge(edge_reuse, indexA);\n    CollideEdgePolygon(manifold, edge_reuse, xfA2, fB.getShape(), xfB2);\n  }\n  var EPAxisType;\n  (function(EPAxisType2) {\n    EPAxisType2[EPAxisType2[\"e_unknown\"] = -1] = \"e_unknown\";\n    EPAxisType2[EPAxisType2[\"e_edgeA\"] = 1] = \"e_edgeA\";\n    EPAxisType2[EPAxisType2[\"e_edgeB\"] = 2] = \"e_edgeB\";\n  })(EPAxisType || (EPAxisType = {}));\n  var VertexType;\n  (function(VertexType2) {\n    VertexType2[VertexType2[\"e_isolated\"] = 0] = \"e_isolated\";\n    VertexType2[VertexType2[\"e_concave\"] = 1] = \"e_concave\";\n    VertexType2[VertexType2[\"e_convex\"] = 2] = \"e_convex\";\n  })(VertexType || (VertexType = {}));\n  var EPAxis = (\n    /** @class */\n    /* @__PURE__ */ function() {\n      function EPAxis2() {\n      }\n      return EPAxis2;\n    }()\n  );\n  var TempPolygon = (\n    /** @class */\n    /* @__PURE__ */ function() {\n      function TempPolygon2() {\n        this.vertices = [];\n        this.normals = [];\n        this.count = 0;\n        for (var i = 0; i < SettingsInternal.maxPolygonVertices; i++) {\n          this.vertices.push(vec2(0, 0));\n          this.normals.push(vec2(0, 0));\n        }\n      }\n      return TempPolygon2;\n    }()\n  );\n  var ReferenceFace = (\n    /** @class */\n    function() {\n      function ReferenceFace2() {\n        this.v1 = vec2(0, 0);\n        this.v2 = vec2(0, 0);\n        this.normal = vec2(0, 0);\n        this.sideNormal1 = vec2(0, 0);\n        this.sideNormal2 = vec2(0, 0);\n      }\n      ReferenceFace2.prototype.recycle = function() {\n        zeroVec2(this.v1);\n        zeroVec2(this.v2);\n        zeroVec2(this.normal);\n        zeroVec2(this.sideNormal1);\n        zeroVec2(this.sideNormal2);\n      };\n      return ReferenceFace2;\n    }()\n  );\n  var clipPoints1 = [new ClipVertex(), new ClipVertex()];\n  var clipPoints2 = [new ClipVertex(), new ClipVertex()];\n  var ie = [new ClipVertex(), new ClipVertex()];\n  var edgeAxis = new EPAxis();\n  var polygonAxis = new EPAxis();\n  var polygonBA = new TempPolygon();\n  var rf = new ReferenceFace();\n  var centroidB = vec2(0, 0);\n  var edge0 = vec2(0, 0);\n  var edge1 = vec2(0, 0);\n  var edge2 = vec2(0, 0);\n  var xf = transform(0, 0, 0);\n  var normal = vec2(0, 0);\n  var normal0 = vec2(0, 0);\n  var normal1 = vec2(0, 0);\n  var normal2 = vec2(0, 0);\n  var lowerLimit = vec2(0, 0);\n  var upperLimit = vec2(0, 0);\n  var perp = vec2(0, 0);\n  var n = vec2(0, 0);\n  var CollideEdgePolygon = function(manifold, edgeA, xfA2, polygonB, xfB2) {\n    detransformTransform(xf, xfA2, xfB2);\n    transformVec2(centroidB, xf, polygonB.m_centroid);\n    var v0 = edgeA.m_vertex0;\n    var v13 = edgeA.m_vertex1;\n    var v22 = edgeA.m_vertex2;\n    var v3 = edgeA.m_vertex3;\n    var hasVertex0 = edgeA.m_hasVertex0;\n    var hasVertex3 = edgeA.m_hasVertex3;\n    subVec2(edge1, v22, v13);\n    normalizeVec2(edge1);\n    setVec2(normal1, edge1.y, -edge1.x);\n    var offset1 = dotVec2(normal1, centroidB) - dotVec2(normal1, v13);\n    var offset0 = 0;\n    var offset2 = 0;\n    var convex1 = false;\n    var convex2 = false;\n    zeroVec2(normal0);\n    zeroVec2(normal2);\n    if (hasVertex0) {\n      subVec2(edge0, v13, v0);\n      normalizeVec2(edge0);\n      setVec2(normal0, edge0.y, -edge0.x);\n      convex1 = crossVec2Vec2(edge0, edge1) >= 0;\n      offset0 = Vec2.dot(normal0, centroidB) - Vec2.dot(normal0, v0);\n    }\n    if (hasVertex3) {\n      subVec2(edge2, v3, v22);\n      normalizeVec2(edge2);\n      setVec2(normal2, edge2.y, -edge2.x);\n      convex2 = Vec2.crossVec2Vec2(edge1, edge2) > 0;\n      offset2 = Vec2.dot(normal2, centroidB) - Vec2.dot(normal2, v22);\n    }\n    var front;\n    zeroVec2(normal);\n    zeroVec2(lowerLimit);\n    zeroVec2(upperLimit);\n    if (hasVertex0 && hasVertex3) {\n      if (convex1 && convex2) {\n        front = offset0 >= 0 || offset1 >= 0 || offset2 >= 0;\n        if (front) {\n          copyVec2(normal, normal1);\n          copyVec2(lowerLimit, normal0);\n          copyVec2(upperLimit, normal2);\n        } else {\n          scaleVec2(normal, -1, normal1);\n          scaleVec2(lowerLimit, -1, normal1);\n          scaleVec2(upperLimit, -1, normal1);\n        }\n      } else if (convex1) {\n        front = offset0 >= 0 || offset1 >= 0 && offset2 >= 0;\n        if (front) {\n          copyVec2(normal, normal1);\n          copyVec2(lowerLimit, normal0);\n          copyVec2(upperLimit, normal1);\n        } else {\n          scaleVec2(normal, -1, normal1);\n          scaleVec2(lowerLimit, -1, normal2);\n          scaleVec2(upperLimit, -1, normal1);\n        }\n      } else if (convex2) {\n        front = offset2 >= 0 || offset0 >= 0 && offset1 >= 0;\n        if (front) {\n          copyVec2(normal, normal1);\n          copyVec2(lowerLimit, normal1);\n          copyVec2(upperLimit, normal2);\n        } else {\n          scaleVec2(normal, -1, normal1);\n          scaleVec2(lowerLimit, -1, normal1);\n          scaleVec2(upperLimit, -1, normal0);\n        }\n      } else {\n        front = offset0 >= 0 && offset1 >= 0 && offset2 >= 0;\n        if (front) {\n          copyVec2(normal, normal1);\n          copyVec2(lowerLimit, normal1);\n          copyVec2(upperLimit, normal1);\n        } else {\n          scaleVec2(normal, -1, normal1);\n          scaleVec2(lowerLimit, -1, normal2);\n          scaleVec2(upperLimit, -1, normal0);\n        }\n      }\n    } else if (hasVertex0) {\n      if (convex1) {\n        front = offset0 >= 0 || offset1 >= 0;\n        if (front) {\n          copyVec2(normal, normal1);\n          copyVec2(lowerLimit, normal0);\n          scaleVec2(upperLimit, -1, normal1);\n        } else {\n          scaleVec2(normal, -1, normal1);\n          copyVec2(lowerLimit, normal1);\n          scaleVec2(upperLimit, -1, normal1);\n        }\n      } else {\n        front = offset0 >= 0 && offset1 >= 0;\n        if (front) {\n          copyVec2(normal, normal1);\n          copyVec2(lowerLimit, normal1);\n          scaleVec2(upperLimit, -1, normal1);\n        } else {\n          scaleVec2(normal, -1, normal1);\n          copyVec2(lowerLimit, normal1);\n          scaleVec2(upperLimit, -1, normal0);\n        }\n      }\n    } else if (hasVertex3) {\n      if (convex2) {\n        front = offset1 >= 0 || offset2 >= 0;\n        if (front) {\n          copyVec2(normal, normal1);\n          scaleVec2(lowerLimit, -1, normal1);\n          copyVec2(upperLimit, normal2);\n        } else {\n          scaleVec2(normal, -1, normal1);\n          scaleVec2(lowerLimit, -1, normal1);\n          copyVec2(upperLimit, normal1);\n        }\n      } else {\n        front = offset1 >= 0 && offset2 >= 0;\n        if (front) {\n          copyVec2(normal, normal1);\n          scaleVec2(lowerLimit, -1, normal1);\n          copyVec2(upperLimit, normal1);\n        } else {\n          scaleVec2(normal, -1, normal1);\n          scaleVec2(lowerLimit, -1, normal2);\n          copyVec2(upperLimit, normal1);\n        }\n      }\n    } else {\n      front = offset1 >= 0;\n      if (front) {\n        copyVec2(normal, normal1);\n        scaleVec2(lowerLimit, -1, normal1);\n        scaleVec2(upperLimit, -1, normal1);\n      } else {\n        scaleVec2(normal, -1, normal1);\n        copyVec2(lowerLimit, normal1);\n        copyVec2(upperLimit, normal1);\n      }\n    }\n    polygonBA.count = polygonB.m_count;\n    for (var i = 0; i < polygonB.m_count; ++i) {\n      transformVec2(polygonBA.vertices[i], xf, polygonB.m_vertices[i]);\n      rotVec2(polygonBA.normals[i], xf.q, polygonB.m_normals[i]);\n    }\n    var radius = polygonB.m_radius + edgeA.m_radius;\n    manifold.pointCount = 0;\n    {\n      edgeAxis.type = EPAxisType.e_edgeA;\n      edgeAxis.index = front ? 0 : 1;\n      edgeAxis.separation = Infinity;\n      for (var i = 0; i < polygonBA.count; ++i) {\n        var v4 = polygonBA.vertices[i];\n        var s2 = dotVec2(normal, v4) - dotVec2(normal, v13);\n        if (s2 < edgeAxis.separation) {\n          edgeAxis.separation = s2;\n        }\n      }\n    }\n    if (edgeAxis.type == EPAxisType.e_unknown) {\n      return;\n    }\n    if (edgeAxis.separation > radius) {\n      return;\n    }\n    {\n      polygonAxis.type = EPAxisType.e_unknown;\n      polygonAxis.index = -1;\n      polygonAxis.separation = -Infinity;\n      setVec2(perp, -normal.y, normal.x);\n      for (var i = 0; i < polygonBA.count; ++i) {\n        scaleVec2(n, -1, polygonBA.normals[i]);\n        var s1 = dotVec2(n, polygonBA.vertices[i]) - dotVec2(n, v13);\n        var s22 = dotVec2(n, polygonBA.vertices[i]) - dotVec2(n, v22);\n        var s2 = math_min(s1, s22);\n        if (s2 > radius) {\n          polygonAxis.type = EPAxisType.e_edgeB;\n          polygonAxis.index = i;\n          polygonAxis.separation = s2;\n          break;\n        }\n        if (dotVec2(n, perp) >= 0) {\n          if (dotVec2(n, normal) - dotVec2(upperLimit, normal) < -SettingsInternal.angularSlop) {\n            continue;\n          }\n        } else {\n          if (dotVec2(n, normal) - dotVec2(lowerLimit, normal) < -SettingsInternal.angularSlop) {\n            continue;\n          }\n        }\n        if (s2 > polygonAxis.separation) {\n          polygonAxis.type = EPAxisType.e_edgeB;\n          polygonAxis.index = i;\n          polygonAxis.separation = s2;\n        }\n      }\n    }\n    if (polygonAxis.type != EPAxisType.e_unknown && polygonAxis.separation > radius) {\n      return;\n    }\n    var k_relativeTol = 0.98;\n    var k_absoluteTol = 1e-3;\n    var primaryAxis;\n    if (polygonAxis.type == EPAxisType.e_unknown) {\n      primaryAxis = edgeAxis;\n    } else if (polygonAxis.separation > k_relativeTol * edgeAxis.separation + k_absoluteTol) {\n      primaryAxis = polygonAxis;\n    } else {\n      primaryAxis = edgeAxis;\n    }\n    ie[0].recycle();\n    ie[1].recycle();\n    if (primaryAxis.type == EPAxisType.e_edgeA) {\n      manifold.type = exports2.ManifoldType.e_faceA;\n      var bestIndex = 0;\n      var bestValue = dotVec2(normal, polygonBA.normals[0]);\n      for (var i = 1; i < polygonBA.count; ++i) {\n        var value = dotVec2(normal, polygonBA.normals[i]);\n        if (value < bestValue) {\n          bestValue = value;\n          bestIndex = i;\n        }\n      }\n      var i1 = bestIndex;\n      var i2 = i1 + 1 < polygonBA.count ? i1 + 1 : 0;\n      copyVec2(ie[0].v, polygonBA.vertices[i1]);\n      ie[0].id.setFeatures(0, exports2.ContactFeatureType.e_face, i1, exports2.ContactFeatureType.e_vertex);\n      copyVec2(ie[1].v, polygonBA.vertices[i2]);\n      ie[1].id.setFeatures(0, exports2.ContactFeatureType.e_face, i2, exports2.ContactFeatureType.e_vertex);\n      if (front) {\n        rf.i1 = 0;\n        rf.i2 = 1;\n        copyVec2(rf.v1, v13);\n        copyVec2(rf.v2, v22);\n        copyVec2(rf.normal, normal1);\n      } else {\n        rf.i1 = 1;\n        rf.i2 = 0;\n        copyVec2(rf.v1, v22);\n        copyVec2(rf.v2, v13);\n        scaleVec2(rf.normal, -1, normal1);\n      }\n    } else {\n      manifold.type = exports2.ManifoldType.e_faceB;\n      copyVec2(ie[0].v, v13);\n      ie[0].id.setFeatures(0, exports2.ContactFeatureType.e_vertex, primaryAxis.index, exports2.ContactFeatureType.e_face);\n      copyVec2(ie[1].v, v22);\n      ie[1].id.setFeatures(0, exports2.ContactFeatureType.e_vertex, primaryAxis.index, exports2.ContactFeatureType.e_face);\n      rf.i1 = primaryAxis.index;\n      rf.i2 = rf.i1 + 1 < polygonBA.count ? rf.i1 + 1 : 0;\n      copyVec2(rf.v1, polygonBA.vertices[rf.i1]);\n      copyVec2(rf.v2, polygonBA.vertices[rf.i2]);\n      copyVec2(rf.normal, polygonBA.normals[rf.i1]);\n    }\n    setVec2(rf.sideNormal1, rf.normal.y, -rf.normal.x);\n    setVec2(rf.sideNormal2, -rf.sideNormal1.x, -rf.sideNormal1.y);\n    rf.sideOffset1 = dotVec2(rf.sideNormal1, rf.v1);\n    rf.sideOffset2 = dotVec2(rf.sideNormal2, rf.v2);\n    clipPoints1[0].recycle();\n    clipPoints1[1].recycle();\n    clipPoints2[0].recycle();\n    clipPoints2[1].recycle();\n    var np1 = clipSegmentToLine(clipPoints1, ie, rf.sideNormal1, rf.sideOffset1, rf.i1);\n    if (np1 < SettingsInternal.maxManifoldPoints) {\n      return;\n    }\n    var np2 = clipSegmentToLine(clipPoints2, clipPoints1, rf.sideNormal2, rf.sideOffset2, rf.i2);\n    if (np2 < SettingsInternal.maxManifoldPoints) {\n      return;\n    }\n    if (primaryAxis.type == EPAxisType.e_edgeA) {\n      copyVec2(manifold.localNormal, rf.normal);\n      copyVec2(manifold.localPoint, rf.v1);\n    } else {\n      copyVec2(manifold.localNormal, polygonB.m_normals[rf.i1]);\n      copyVec2(manifold.localPoint, polygonB.m_vertices[rf.i1]);\n    }\n    var pointCount = 0;\n    for (var i = 0; i < SettingsInternal.maxManifoldPoints; ++i) {\n      var separation = dotVec2(rf.normal, clipPoints2[i].v) - dotVec2(rf.normal, rf.v1);\n      if (separation <= radius) {\n        var cp = manifold.points[pointCount];\n        if (primaryAxis.type == EPAxisType.e_edgeA) {\n          detransformVec2(cp.localPoint, xf, clipPoints2[i].v);\n          cp.id.set(clipPoints2[i].id);\n        } else {\n          copyVec2(cp.localPoint, clipPoints2[i].v);\n          cp.id.set(clipPoints2[i].id);\n          cp.id.swapFeatures();\n        }\n        ++pointCount;\n      }\n    }\n    manifold.pointCount = pointCount;\n  };\n  var internal = {\n    CollidePolygons,\n    Settings,\n    Sweep,\n    Manifold,\n    Distance,\n    TimeOfImpact,\n    DynamicTree,\n    stats\n  };\n  var DataDriver = (\n    /** @class */\n    function() {\n      function DataDriver2(key, listener) {\n        this._refMap = {};\n        this._map = {};\n        this._xmap = {};\n        this._data = [];\n        this._entered = [];\n        this._exited = [];\n        this._key = key;\n        this._listener = listener;\n      }\n      DataDriver2.prototype.update = function(data) {\n        if (!Array.isArray(data))\n          throw \"Invalid data: \" + data;\n        this._entered.length = 0;\n        this._exited.length = 0;\n        this._data.length = data.length;\n        for (var i = 0; i < data.length; i++) {\n          if (typeof data[i] !== \"object\" || data[i] === null)\n            continue;\n          var d2 = data[i];\n          var id = this._key(d2);\n          if (!this._map[id]) {\n            this._entered.push(d2);\n          } else {\n            delete this._map[id];\n          }\n          this._data[i] = d2;\n          this._xmap[id] = d2;\n        }\n        for (var id in this._map) {\n          this._exited.push(this._map[id]);\n          delete this._map[id];\n        }\n        var temp3 = this._map;\n        this._map = this._xmap;\n        this._xmap = temp3;\n        for (var i = 0; i < this._exited.length; i++) {\n          var d2 = this._exited[i];\n          var key = this._key(d2);\n          var ref = this._refMap[key];\n          this._listener.exit(d2, ref);\n          delete this._refMap[key];\n        }\n        for (var i = 0; i < this._entered.length; i++) {\n          var d2 = this._entered[i];\n          var key = this._key(d2);\n          var ref = this._listener.enter(d2);\n          if (ref) {\n            this._refMap[key] = ref;\n          }\n        }\n        for (var i = 0; i < this._data.length; i++) {\n          if (typeof data[i] !== \"object\" || data[i] === null)\n            continue;\n          var d2 = this._data[i];\n          var key = this._key(d2);\n          var ref = this._refMap[key];\n          this._listener.update(d2, ref);\n        }\n        this._entered.length = 0;\n        this._exited.length = 0;\n        this._data.length = 0;\n      };\n      DataDriver2.prototype.ref = function(d2) {\n        return this._refMap[this._key(d2)];\n      };\n      return DataDriver2;\n    }()\n  );\n  const planck = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n    __proto__: null,\n    AABB,\n    Body,\n    Box: BoxShape,\n    BoxShape,\n    BroadPhase,\n    Chain: ChainShape,\n    ChainShape,\n    Circle: CircleShape,\n    CircleShape,\n    ClipVertex,\n    CollideCircles,\n    CollideEdgeCircle,\n    CollideEdgePolygon,\n    CollidePolygonCircle,\n    CollidePolygons,\n    Contact,\n    ContactEdge,\n    get ContactFeatureType() {\n      return exports2.ContactFeatureType;\n    },\n    ContactID,\n    ContactImpulse,\n    DataDriver,\n    Distance,\n    DistanceInput,\n    DistanceJoint,\n    DistanceOutput,\n    DistanceProxy,\n    DynamicTree,\n    Edge: EdgeShape,\n    EdgeShape,\n    Fixture,\n    FixtureProxy,\n    FrictionJoint,\n    GearJoint,\n    Joint,\n    JointEdge,\n    Manifold,\n    ManifoldPoint,\n    get ManifoldType() {\n      return exports2.ManifoldType;\n    },\n    Mat22,\n    Mat33,\n    Math: math,\n    MotorJoint,\n    MouseJoint,\n    get PointState() {\n      return exports2.PointState;\n    },\n    Polygon: PolygonShape,\n    PolygonShape,\n    PrismaticJoint,\n    PulleyJoint,\n    RevoluteJoint,\n    RopeJoint,\n    Rot,\n    Serializer,\n    Settings,\n    SettingsInternal,\n    Shape,\n    ShapeCast,\n    ShapeCastInput,\n    ShapeCastOutput,\n    SimplexCache,\n    Solver,\n    Sweep,\n    TOIInput,\n    TOIOutput,\n    get TOIOutputState() {\n      return exports2.TOIOutputState;\n    },\n    Testbed,\n    TimeOfImpact,\n    TimeStep,\n    Transform,\n    TreeNode,\n    Vec2,\n    Vec3,\n    VelocityConstraintPoint,\n    WeldJoint,\n    WheelJoint,\n    World,\n    WorldManifold,\n    clipSegmentToLine,\n    getPointStates,\n    internal,\n    mixFriction,\n    mixRestitution,\n    stats,\n    testOverlap,\n    testbed\n  }, Symbol.toStringTag, { value: \"Module\" }));\n  exports2.AABB = AABB;\n  exports2.Body = Body;\n  exports2.Box = BoxShape;\n  exports2.BoxShape = BoxShape;\n  exports2.BroadPhase = BroadPhase;\n  exports2.Chain = ChainShape;\n  exports2.ChainShape = ChainShape;\n  exports2.Circle = CircleShape;\n  exports2.CircleShape = CircleShape;\n  exports2.ClipVertex = ClipVertex;\n  exports2.CollideCircles = CollideCircles;\n  exports2.CollideEdgeCircle = CollideEdgeCircle;\n  exports2.CollideEdgePolygon = CollideEdgePolygon;\n  exports2.CollidePolygonCircle = CollidePolygonCircle;\n  exports2.CollidePolygons = CollidePolygons;\n  exports2.Contact = Contact;\n  exports2.ContactEdge = ContactEdge;\n  exports2.ContactID = ContactID;\n  exports2.ContactImpulse = ContactImpulse;\n  exports2.DataDriver = DataDriver;\n  exports2.Distance = Distance;\n  exports2.DistanceInput = DistanceInput;\n  exports2.DistanceJoint = DistanceJoint;\n  exports2.DistanceOutput = DistanceOutput;\n  exports2.DistanceProxy = DistanceProxy;\n  exports2.DynamicTree = DynamicTree;\n  exports2.Edge = EdgeShape;\n  exports2.EdgeShape = EdgeShape;\n  exports2.Fixture = Fixture;\n  exports2.FixtureProxy = FixtureProxy;\n  exports2.FrictionJoint = FrictionJoint;\n  exports2.GearJoint = GearJoint;\n  exports2.Joint = Joint;\n  exports2.JointEdge = JointEdge;\n  exports2.Manifold = Manifold;\n  exports2.ManifoldPoint = ManifoldPoint;\n  exports2.Mat22 = Mat22;\n  exports2.Mat33 = Mat33;\n  exports2.Math = math;\n  exports2.MotorJoint = MotorJoint;\n  exports2.MouseJoint = MouseJoint;\n  exports2.Polygon = PolygonShape;\n  exports2.PolygonShape = PolygonShape;\n  exports2.PrismaticJoint = PrismaticJoint;\n  exports2.PulleyJoint = PulleyJoint;\n  exports2.RevoluteJoint = RevoluteJoint;\n  exports2.RopeJoint = RopeJoint;\n  exports2.Rot = Rot;\n  exports2.Serializer = Serializer;\n  exports2.Settings = Settings;\n  exports2.SettingsInternal = SettingsInternal;\n  exports2.Shape = Shape;\n  exports2.ShapeCast = ShapeCast;\n  exports2.ShapeCastInput = ShapeCastInput;\n  exports2.ShapeCastOutput = ShapeCastOutput;\n  exports2.SimplexCache = SimplexCache;\n  exports2.Solver = Solver;\n  exports2.Sweep = Sweep;\n  exports2.TOIInput = TOIInput;\n  exports2.TOIOutput = TOIOutput;\n  exports2.Testbed = Testbed;\n  exports2.TimeOfImpact = TimeOfImpact;\n  exports2.TimeStep = TimeStep;\n  exports2.Transform = Transform;\n  exports2.TreeNode = TreeNode;\n  exports2.Vec2 = Vec2;\n  exports2.Vec3 = Vec3;\n  exports2.VelocityConstraintPoint = VelocityConstraintPoint;\n  exports2.WeldJoint = WeldJoint;\n  exports2.WheelJoint = WheelJoint;\n  exports2.World = World;\n  exports2.WorldManifold = WorldManifold;\n  exports2.clipSegmentToLine = clipSegmentToLine;\n  exports2.default = planck;\n  exports2.getPointStates = getPointStates;\n  exports2.internal = internal;\n  exports2.mixFriction = mixFriction;\n  exports2.mixRestitution = mixRestitution;\n  exports2.stats = stats;\n  exports2.testOverlap = testOverlap;\n  exports2.testbed = testbed;\n  Object.defineProperties(exports2, { __esModule: { value: true }, [Symbol.toStringTag]: { value: \"Module\" } });\n});\n//# sourceMappingURL=planck.js.map\n\n\n/***/ }),\n\n/***/ \"./src/index.ts\":\n/*!**********************!*\\\n  !*** ./src/index.ts ***!\n  \\**********************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FlexDirection = exports.FlexContainer = exports.UIFocusManager = exports.UIComponent = exports.EdgeInsets = exports.applyMaterial = exports.PhysicsMaterials = exports.createShapeFromSprite = exports.getPhysicsBody = exports.hasPhysics = exports.asPhysicsEntity = exports.CollisionManager = exports.CollisionRegistry = exports.PhysicsDebugRenderer = exports.PhysicsBodyLogic = exports.PhysicsWorld = exports.StateLogic = exports.StateMachine = exports.utils = exports.TilingParallaxLayer = exports.TextureFrameSequences = exports.setupResponsiveCanvas = exports.Scene = exports.RenderManager = exports.setupMoxi = exports.FallingSquaresAnimation = exports.LoadingScene = exports.ParallaxLayer = exports.ParallaxBackgroundLogic = exports.ParallaxBackground = exports.MoxiEntity = exports.loadFonts = exports.getTextureRange = exports.EventEmitter = exports.Engine = exports.defaultRenderOptions = exports.createTileGrid = exports.createResizeHandler = exports.ClientEvents = exports.CameraLogic = exports.Camera = exports.Logic = exports.asContainer = exports.asGraphics = exports.asText = exports.asSprite = exports.asBitmapText = exports.asTextureFrames = exports.asEntity = exports.AssetLoader = void 0;\nexports.ActionManager = exports.createBorderConfig = exports.BORDER = exports.GRID = exports.units = exports.px = exports.PixelGrid = exports.svgToTexture = exports.UIScaleMode = exports.UILayer = exports.UITabs = exports.UIScrollContainer = exports.UITextArea = exports.UITextInput = exports.UISelect = exports.ButtonState = exports.UIButton = exports.UIPanel = exports.UILabel = exports.UIBox = exports.FlexAlign = exports.FlexJustify = void 0;\nconst utils = __importStar(__webpack_require__(/*! ./library/utils */ \"./src/library/utils.ts\"));\nexports.utils = utils;\nconst render_manager_1 = __webpack_require__(/*! ./main/render-manager */ \"./src/main/render-manager.ts\");\nObject.defineProperty(exports, \"RenderManager\", ({ enumerable: true, get: function () { return render_manager_1.RenderManager; } }));\nconst scene_1 = __webpack_require__(/*! ./main/scene */ \"./src/main/scene.ts\");\nObject.defineProperty(exports, \"Scene\", ({ enumerable: true, get: function () { return scene_1.Scene; } }));\nconst engine_1 = __webpack_require__(/*! ./main/engine */ \"./src/main/engine.ts\");\nObject.defineProperty(exports, \"Engine\", ({ enumerable: true, get: function () { return engine_1.Engine; } }));\nconst event_system_1 = __webpack_require__(/*! ./main/event-system */ \"./src/main/event-system.ts\");\nObject.defineProperty(exports, \"EventEmitter\", ({ enumerable: true, get: function () { return event_system_1.EventEmitter; } }));\nconst client_events_1 = __webpack_require__(/*! ./library/client-events */ \"./src/library/client-events.ts\");\nObject.defineProperty(exports, \"ClientEvents\", ({ enumerable: true, get: function () { return client_events_1.ClientEvents; } }));\nconst asset_loader_1 = __webpack_require__(/*! ./main/asset-loader */ \"./src/main/asset-loader.ts\");\nObject.defineProperty(exports, \"AssetLoader\", ({ enumerable: true, get: function () { return asset_loader_1.AssetLoader; } }));\nconst logic_1 = __webpack_require__(/*! ./main/logic */ \"./src/main/logic.ts\");\nObject.defineProperty(exports, \"Logic\", ({ enumerable: true, get: function () { return logic_1.Logic; } }));\nconst setup_1 = __webpack_require__(/*! ./library/setup */ \"./src/library/setup.ts\");\nObject.defineProperty(exports, \"defaultRenderOptions\", ({ enumerable: true, get: function () { return setup_1.defaultRenderOptions; } }));\nObject.defineProperty(exports, \"setupMoxi\", ({ enumerable: true, get: function () { return setup_1.setupMoxi; } }));\nconst font_loader_1 = __webpack_require__(/*! ./library/font-loader */ \"./src/library/font-loader.ts\");\nObject.defineProperty(exports, \"loadFonts\", ({ enumerable: true, get: function () { return font_loader_1.loadFonts; } }));\nconst moxi_entity_1 = __webpack_require__(/*! ./main/moxi-entity */ \"./src/main/moxi-entity.ts\");\nObject.defineProperty(exports, \"asEntity\", ({ enumerable: true, get: function () { return moxi_entity_1.asEntity; } }));\nObject.defineProperty(exports, \"MoxiEntity\", ({ enumerable: true, get: function () { return moxi_entity_1.MoxiEntity; } }));\nconst camera_1 = __webpack_require__(/*! ./main/camera */ \"./src/main/camera.ts\");\nObject.defineProperty(exports, \"Camera\", ({ enumerable: true, get: function () { return camera_1.Camera; } }));\nObject.defineProperty(exports, \"CameraLogic\", ({ enumerable: true, get: function () { return camera_1.CameraLogic; } }));\nconst texture_frames_1 = __webpack_require__(/*! ./library/texture-frames */ \"./src/library/texture-frames.ts\");\nObject.defineProperty(exports, \"asTextureFrames\", ({ enumerable: true, get: function () { return texture_frames_1.asTextureFrames; } }));\nconst as_pixi_1 = __webpack_require__(/*! ./library/as-pixi */ \"./src/library/as-pixi.ts\");\nObject.defineProperty(exports, \"asBitmapText\", ({ enumerable: true, get: function () { return as_pixi_1.asBitmapText; } }));\nObject.defineProperty(exports, \"asSprite\", ({ enumerable: true, get: function () { return as_pixi_1.asSprite; } }));\nObject.defineProperty(exports, \"asText\", ({ enumerable: true, get: function () { return as_pixi_1.asText; } }));\nObject.defineProperty(exports, \"asGraphics\", ({ enumerable: true, get: function () { return as_pixi_1.asGraphics; } }));\nObject.defineProperty(exports, \"asContainer\", ({ enumerable: true, get: function () { return as_pixi_1.asContainer; } }));\nconst texture_frame_sequences_1 = __webpack_require__(/*! ./library/texture-frame-sequences */ \"./src/library/texture-frame-sequences.ts\");\nObject.defineProperty(exports, \"TextureFrameSequences\", ({ enumerable: true, get: function () { return texture_frame_sequences_1.TextureFrameSequences; } }));\nconst resize_handler_1 = __webpack_require__(/*! ./library/resize-handler */ \"./src/library/resize-handler.ts\");\nObject.defineProperty(exports, \"createResizeHandler\", ({ enumerable: true, get: function () { return resize_handler_1.createResizeHandler; } }));\nObject.defineProperty(exports, \"setupResponsiveCanvas\", ({ enumerable: true, get: function () { return resize_handler_1.setupResponsiveCanvas; } }));\nconst edge_insets_1 = __webpack_require__(/*! ./ui/core/edge-insets */ \"./src/ui/core/edge-insets.ts\");\nObject.defineProperty(exports, \"EdgeInsets\", ({ enumerable: true, get: function () { return edge_insets_1.EdgeInsets; } }));\nconst ui_component_1 = __webpack_require__(/*! ./ui/core/ui-component */ \"./src/ui/core/ui-component.ts\");\nObject.defineProperty(exports, \"UIComponent\", ({ enumerable: true, get: function () { return ui_component_1.UIComponent; } }));\nconst ui_focus_manager_1 = __webpack_require__(/*! ./ui/core/ui-focus-manager */ \"./src/ui/core/ui-focus-manager.ts\");\nObject.defineProperty(exports, \"UIFocusManager\", ({ enumerable: true, get: function () { return ui_focus_manager_1.UIFocusManager; } }));\nconst flex_container_1 = __webpack_require__(/*! ./ui/layout/flex-container */ \"./src/ui/layout/flex-container.ts\");\nObject.defineProperty(exports, \"FlexContainer\", ({ enumerable: true, get: function () { return flex_container_1.FlexContainer; } }));\nObject.defineProperty(exports, \"FlexDirection\", ({ enumerable: true, get: function () { return flex_container_1.FlexDirection; } }));\nObject.defineProperty(exports, \"FlexJustify\", ({ enumerable: true, get: function () { return flex_container_1.FlexJustify; } }));\nObject.defineProperty(exports, \"FlexAlign\", ({ enumerable: true, get: function () { return flex_container_1.FlexAlign; } }));\nconst ui_box_1 = __webpack_require__(/*! ./ui/components/ui-box */ \"./src/ui/components/ui-box.ts\");\nObject.defineProperty(exports, \"UIBox\", ({ enumerable: true, get: function () { return ui_box_1.UIBox; } }));\nconst ui_label_1 = __webpack_require__(/*! ./ui/components/ui-label */ \"./src/ui/components/ui-label.ts\");\nObject.defineProperty(exports, \"UILabel\", ({ enumerable: true, get: function () { return ui_label_1.UILabel; } }));\nconst ui_panel_1 = __webpack_require__(/*! ./ui/components/ui-panel */ \"./src/ui/components/ui-panel.ts\");\nObject.defineProperty(exports, \"UIPanel\", ({ enumerable: true, get: function () { return ui_panel_1.UIPanel; } }));\nconst ui_button_1 = __webpack_require__(/*! ./ui/components/ui-button */ \"./src/ui/components/ui-button.ts\");\nObject.defineProperty(exports, \"UIButton\", ({ enumerable: true, get: function () { return ui_button_1.UIButton; } }));\nObject.defineProperty(exports, \"ButtonState\", ({ enumerable: true, get: function () { return ui_button_1.ButtonState; } }));\nconst ui_select_1 = __webpack_require__(/*! ./ui/components/ui-select */ \"./src/ui/components/ui-select.ts\");\nObject.defineProperty(exports, \"UISelect\", ({ enumerable: true, get: function () { return ui_select_1.UISelect; } }));\nconst ui_text_input_1 = __webpack_require__(/*! ./ui/components/ui-text-input */ \"./src/ui/components/ui-text-input.ts\");\nObject.defineProperty(exports, \"UITextInput\", ({ enumerable: true, get: function () { return ui_text_input_1.UITextInput; } }));\nconst ui_textarea_1 = __webpack_require__(/*! ./ui/components/ui-textarea */ \"./src/ui/components/ui-textarea.ts\");\nObject.defineProperty(exports, \"UITextArea\", ({ enumerable: true, get: function () { return ui_textarea_1.UITextArea; } }));\nconst ui_scroll_container_1 = __webpack_require__(/*! ./ui/components/ui-scroll-container */ \"./src/ui/components/ui-scroll-container.ts\");\nObject.defineProperty(exports, \"UIScrollContainer\", ({ enumerable: true, get: function () { return ui_scroll_container_1.UIScrollContainer; } }));\nconst ui_tabs_1 = __webpack_require__(/*! ./ui/components/ui-tabs */ \"./src/ui/components/ui-tabs.ts\");\nObject.defineProperty(exports, \"UITabs\", ({ enumerable: true, get: function () { return ui_tabs_1.UITabs; } }));\nconst UILayer_1 = __webpack_require__(/*! ./ui/UILayer */ \"./src/ui/UILayer.ts\");\nObject.defineProperty(exports, \"UILayer\", ({ enumerable: true, get: function () { return UILayer_1.UILayer; } }));\nconst UIScaleMode_1 = __webpack_require__(/*! ./ui/UIScaleMode */ \"./src/ui/UIScaleMode.ts\");\nObject.defineProperty(exports, \"UIScaleMode\", ({ enumerable: true, get: function () { return UIScaleMode_1.UIScaleMode; } }));\nconst state_machine_1 = __webpack_require__(/*! ./library/state-machine */ \"./src/library/state-machine.ts\");\nObject.defineProperty(exports, \"StateMachine\", ({ enumerable: true, get: function () { return state_machine_1.StateMachine; } }));\nconst state_logic_1 = __webpack_require__(/*! ./library/state-logic */ \"./src/library/state-logic.ts\");\nObject.defineProperty(exports, \"StateLogic\", ({ enumerable: true, get: function () { return state_logic_1.StateLogic; } }));\nconst grid_generator_1 = __webpack_require__(/*! ./library/grid-generator */ \"./src/library/grid-generator.ts\");\nObject.defineProperty(exports, \"createTileGrid\", ({ enumerable: true, get: function () { return grid_generator_1.createTileGrid; } }));\nObject.defineProperty(exports, \"getTextureRange\", ({ enumerable: true, get: function () { return grid_generator_1.getTextureRange; } }));\nconst svg_to_texture_1 = __webpack_require__(/*! ./library/svg-utils/svg-to-texture */ \"./src/library/svg-utils/svg-to-texture.ts\");\nObject.defineProperty(exports, \"svgToTexture\", ({ enumerable: true, get: function () { return svg_to_texture_1.svgToTexture; } }));\nconst pixel_grid_1 = __webpack_require__(/*! ./ui/pixel-grid */ \"./src/ui/pixel-grid.ts\");\nObject.defineProperty(exports, \"PixelGrid\", ({ enumerable: true, get: function () { return pixel_grid_1.PixelGrid; } }));\nObject.defineProperty(exports, \"px\", ({ enumerable: true, get: function () { return pixel_grid_1.px; } }));\nObject.defineProperty(exports, \"units\", ({ enumerable: true, get: function () { return pixel_grid_1.units; } }));\nObject.defineProperty(exports, \"GRID\", ({ enumerable: true, get: function () { return pixel_grid_1.GRID; } }));\nObject.defineProperty(exports, \"BORDER\", ({ enumerable: true, get: function () { return pixel_grid_1.BORDER; } }));\nObject.defineProperty(exports, \"createBorderConfig\", ({ enumerable: true, get: function () { return pixel_grid_1.createBorderConfig; } }));\nconst parallax_background_1 = __webpack_require__(/*! ./library/parallax-background */ \"./src/library/parallax-background.ts\");\nObject.defineProperty(exports, \"ParallaxBackground\", ({ enumerable: true, get: function () { return parallax_background_1.ParallaxBackground; } }));\nObject.defineProperty(exports, \"ParallaxBackgroundLogic\", ({ enumerable: true, get: function () { return parallax_background_1.ParallaxBackgroundLogic; } }));\nconst parallax_layer_1 = __webpack_require__(/*! ./library/parallax-layer */ \"./src/library/parallax-layer.ts\");\nObject.defineProperty(exports, \"ParallaxLayer\", ({ enumerable: true, get: function () { return parallax_layer_1.ParallaxLayer; } }));\nObject.defineProperty(exports, \"TilingParallaxLayer\", ({ enumerable: true, get: function () { return parallax_layer_1.TilingParallaxLayer; } }));\nconst loading_scene_1 = __webpack_require__(/*! ./library/loading-scene */ \"./src/library/loading-scene.ts\");\nObject.defineProperty(exports, \"LoadingScene\", ({ enumerable: true, get: function () { return loading_scene_1.LoadingScene; } }));\nObject.defineProperty(exports, \"FallingSquaresAnimation\", ({ enumerable: true, get: function () { return loading_scene_1.FallingSquaresAnimation; } }));\nconst action_manager_1 = __webpack_require__(/*! ./library/action-manager */ \"./src/library/action-manager.ts\");\nObject.defineProperty(exports, \"ActionManager\", ({ enumerable: true, get: function () { return action_manager_1.ActionManager; } }));\nconst physics_1 = __webpack_require__(/*! ./library/physics */ \"./src/library/physics/index.ts\");\nObject.defineProperty(exports, \"PhysicsWorld\", ({ enumerable: true, get: function () { return physics_1.PhysicsWorld; } }));\nObject.defineProperty(exports, \"PhysicsBodyLogic\", ({ enumerable: true, get: function () { return physics_1.PhysicsBodyLogic; } }));\nObject.defineProperty(exports, \"PhysicsDebugRenderer\", ({ enumerable: true, get: function () { return physics_1.PhysicsDebugRenderer; } }));\nObject.defineProperty(exports, \"CollisionRegistry\", ({ enumerable: true, get: function () { return physics_1.CollisionRegistry; } }));\nObject.defineProperty(exports, \"CollisionManager\", ({ enumerable: true, get: function () { return physics_1.CollisionManager; } }));\nObject.defineProperty(exports, \"asPhysicsEntity\", ({ enumerable: true, get: function () { return physics_1.asPhysicsEntity; } }));\nObject.defineProperty(exports, \"hasPhysics\", ({ enumerable: true, get: function () { return physics_1.hasPhysics; } }));\nObject.defineProperty(exports, \"getPhysicsBody\", ({ enumerable: true, get: function () { return physics_1.getPhysicsBody; } }));\nObject.defineProperty(exports, \"createShapeFromSprite\", ({ enumerable: true, get: function () { return physics_1.createShapeFromSprite; } }));\nObject.defineProperty(exports, \"PhysicsMaterials\", ({ enumerable: true, get: function () { return physics_1.PhysicsMaterials; } }));\nObject.defineProperty(exports, \"applyMaterial\", ({ enumerable: true, get: function () { return physics_1.applyMaterial; } }));\nconst exportedObjects = {\n    AssetLoader: asset_loader_1.AssetLoader,\n    asEntity: moxi_entity_1.asEntity,\n    asTextureFrames: texture_frames_1.asTextureFrames,\n    asBitmapText: as_pixi_1.asBitmapText,\n    asSprite: as_pixi_1.asSprite,\n    asText: as_pixi_1.asText,\n    asGraphics: as_pixi_1.asGraphics,\n    asContainer: as_pixi_1.asContainer,\n    Logic: logic_1.Logic,\n    Camera: camera_1.Camera,\n    CameraLogic: camera_1.CameraLogic,\n    ClientEvents: client_events_1.ClientEvents,\n    createResizeHandler: resize_handler_1.createResizeHandler,\n    createTileGrid: grid_generator_1.createTileGrid,\n    defaultRenderOptions: setup_1.defaultRenderOptions,\n    Engine: engine_1.Engine,\n    EventEmitter: event_system_1.EventEmitter,\n    getTextureRange: grid_generator_1.getTextureRange,\n    loadFonts: font_loader_1.loadFonts,\n    MoxiEntity: moxi_entity_1.MoxiEntity,\n    ParallaxBackground: parallax_background_1.ParallaxBackground,\n    ParallaxBackgroundLogic: parallax_background_1.ParallaxBackgroundLogic,\n    ParallaxLayer: parallax_layer_1.ParallaxLayer,\n    LoadingScene: loading_scene_1.LoadingScene,\n    FallingSquaresAnimation: loading_scene_1.FallingSquaresAnimation,\n    setupMoxi: setup_1.setupMoxi,\n    RenderManager: render_manager_1.RenderManager,\n    Scene: scene_1.Scene,\n    setupResponsiveCanvas: resize_handler_1.setupResponsiveCanvas,\n    TextureFrameSequences: texture_frame_sequences_1.TextureFrameSequences,\n    TilingParallaxLayer: parallax_layer_1.TilingParallaxLayer,\n    utils,\n    StateMachine: state_machine_1.StateMachine,\n    StateLogic: state_logic_1.StateLogic,\n    PhysicsWorld: physics_1.PhysicsWorld,\n    PhysicsBodyLogic: physics_1.PhysicsBodyLogic,\n    PhysicsDebugRenderer: physics_1.PhysicsDebugRenderer,\n    CollisionRegistry: physics_1.CollisionRegistry,\n    CollisionManager: physics_1.CollisionManager,\n    asPhysicsEntity: physics_1.asPhysicsEntity,\n    hasPhysics: physics_1.hasPhysics,\n    getPhysicsBody: physics_1.getPhysicsBody,\n    createShapeFromSprite: physics_1.createShapeFromSprite,\n    PhysicsMaterials: physics_1.PhysicsMaterials,\n    applyMaterial: physics_1.applyMaterial,\n    EdgeInsets: edge_insets_1.EdgeInsets,\n    UIComponent: ui_component_1.UIComponent,\n    UIFocusManager: ui_focus_manager_1.UIFocusManager,\n    FlexContainer: flex_container_1.FlexContainer,\n    FlexDirection: flex_container_1.FlexDirection,\n    FlexJustify: flex_container_1.FlexJustify,\n    FlexAlign: flex_container_1.FlexAlign,\n    UIBox: ui_box_1.UIBox,\n    UILabel: ui_label_1.UILabel,\n    UIPanel: ui_panel_1.UIPanel,\n    UIButton: ui_button_1.UIButton,\n    ButtonState: ui_button_1.ButtonState,\n    UISelect: ui_select_1.UISelect,\n    UITextInput: ui_text_input_1.UITextInput,\n    UITextArea: ui_textarea_1.UITextArea,\n    UIScrollContainer: ui_scroll_container_1.UIScrollContainer,\n    UITabs: ui_tabs_1.UITabs,\n    UILayer: UILayer_1.UILayer,\n    UIScaleMode: UIScaleMode_1.UIScaleMode,\n    svgToTexture: svg_to_texture_1.svgToTexture,\n    PixelGrid: pixel_grid_1.PixelGrid,\n    px: pixel_grid_1.px,\n    units: pixel_grid_1.units,\n    GRID: pixel_grid_1.GRID,\n    BORDER: pixel_grid_1.BORDER,\n    createBorderConfig: pixel_grid_1.createBorderConfig,\n    ActionManager: action_manager_1.ActionManager\n};\nexports[\"default\"] = exportedObjects;\n\n\n/***/ }),\n\n/***/ \"./src/library/action-manager.ts\":\n/*!***************************************!*\\\n  !*** ./src/library/action-manager.ts ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ActionManager = void 0;\nclass ActionManager {\n    actions = new Set();\n    add(target, type, handler, options) {\n        const action = { target, type, handler, options };\n        target.addEventListener(type, handler, options);\n        this.actions.add(action);\n        return action;\n    }\n    remove(action) {\n        if (this.actions.has(action)) {\n            action.target.removeEventListener(action.type, action.handler, action.options);\n            this.actions.delete(action);\n        }\n    }\n    removeAll() {\n        this.actions.forEach(action => {\n            action.target.removeEventListener(action.type, action.handler, action.options);\n        });\n        this.actions.clear();\n    }\n    getCount() {\n        return this.actions.size;\n    }\n    hasAction(action) {\n        return this.actions.has(action);\n    }\n}\nexports.ActionManager = ActionManager;\n\n\n/***/ }),\n\n/***/ \"./src/library/as-pixi.ts\":\n/*!********************************!*\\\n  !*** ./src/library/as-pixi.ts ***!\n  \\********************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.asBitmapText = asBitmapText;\nexports.asSprite = asSprite;\nexports.asText = asText;\nexports.asGraphics = asGraphics;\nexports.asContainer = asContainer;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nfunction applyProps(obj, props) {\n    if (!props)\n        return obj;\n    if (props.x !== undefined)\n        obj.x = props.x;\n    if (props.y !== undefined)\n        obj.y = props.y;\n    if (props.anchor !== undefined) {\n        if (typeof props.anchor === 'number') {\n            if ('anchor' in obj && typeof obj.anchor === 'object' && obj.anchor !== null) {\n                obj.anchor.set(props.anchor);\n            }\n        }\n        else {\n            if ('anchor' in obj && typeof obj.anchor === 'object' && obj.anchor !== null) {\n                const anchor = obj.anchor;\n                if (props.anchor.x !== undefined)\n                    anchor.x = props.anchor.x;\n                if (props.anchor.y !== undefined)\n                    anchor.y = props.anchor.y;\n            }\n        }\n    }\n    if (props.scale !== undefined) {\n        if (typeof props.scale === 'number') {\n            if ('scale' in obj && typeof obj.scale === 'object' && obj.scale !== null) {\n                obj.scale.set(props.scale);\n            }\n        }\n        else {\n            if ('scale' in obj && typeof obj.scale === 'object' && obj.scale !== null) {\n                const scale = obj.scale;\n                if (props.scale.x !== undefined)\n                    scale.x = props.scale.x;\n                if (props.scale.y !== undefined)\n                    scale.y = props.scale.y;\n            }\n        }\n    }\n    if (props.rotation !== undefined)\n        obj.rotation = props.rotation;\n    if (props.tint !== undefined && 'tint' in obj)\n        obj.tint = props.tint;\n    if (props.alpha !== undefined)\n        obj.alpha = props.alpha;\n    if (props.visible !== undefined)\n        obj.visible = props.visible;\n    if (props.eventMode !== undefined && 'eventMode' in obj)\n        obj.eventMode = props.eventMode;\n    if (props.pivot !== undefined) {\n        if (typeof props.pivot === 'number') {\n            if ('pivot' in obj && typeof obj.pivot === 'object' && obj.pivot !== null) {\n                obj.pivot.set(props.pivot);\n            }\n        }\n        else {\n            if ('pivot' in obj && typeof obj.pivot === 'object' && obj.pivot !== null) {\n                const pivot = obj.pivot;\n                if (props.pivot.x !== undefined)\n                    pivot.x = props.pivot.x;\n                if (props.pivot.y !== undefined)\n                    pivot.y = props.pivot.y;\n            }\n        }\n    }\n    return obj;\n}\nfunction asBitmapText(constructorArgs, props) {\n    const { pixelPerfect, ...textArgs } = constructorArgs;\n    const text = new pixi_js_1.default.BitmapText(textArgs);\n    if (pixelPerfect) {\n        text.roundPixels = true;\n    }\n    return applyProps(text, props);\n}\nfunction asSprite(constructorArgs, props) {\n    const sprite = new pixi_js_1.default.Sprite(constructorArgs);\n    return applyProps(sprite, props);\n}\nfunction asText(constructorArgs, props) {\n    const text = new pixi_js_1.default.Text(constructorArgs);\n    return applyProps(text, props);\n}\nfunction asGraphics(props) {\n    const graphics = new pixi_js_1.default.Graphics();\n    return applyProps(graphics, props);\n}\nfunction asContainer(props) {\n    const container = new pixi_js_1.default.Container();\n    return applyProps(container, props);\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/client-events.ts\":\n/*!**************************************!*\\\n  !*** ./src/library/client-events.ts ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ClientEvents = void 0;\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"pixi.js\");\nclass ClientEvents {\n    wheelDelta;\n    mouseUpEvent;\n    mouseDownEvent;\n    lastMouseDown;\n    lastMouseUp;\n    keyDownEvent;\n    keyUpEvent;\n    keydown;\n    wheelOffsets;\n    movePosition;\n    lastMovePosition;\n    moveDelta;\n    static instance = null;\n    static getInstance(options = {}) {\n        if (!ClientEvents.instance) {\n            ClientEvents.instance = new ClientEvents(options);\n        }\n        return ClientEvents.instance;\n    }\n    constructor({ initWheelOffset = new pixi_js_1.Point(), onAnyEvent = (ev) => { } } = {}) {\n        if (ClientEvents.instance) {\n            return ClientEvents.instance;\n        }\n        this.wheelOffsets = initWheelOffset;\n        this.keydown = {};\n        this.movePosition = new pixi_js_1.Point();\n        const anyEvent = (ev) => {\n            onAnyEvent(ev);\n        };\n        document.addEventListener('wheel', (event) => {\n            const wheelDelta = this.wheelOffsets || new pixi_js_1.Point();\n            const xValue = wheelDelta.x + event.deltaX;\n            const yValue = wheelDelta.y + event.deltaY;\n            this.wheelOffsets = new pixi_js_1.Point(xValue, yValue);\n            anyEvent({ eventType: 'wheel', event });\n        });\n        document.addEventListener('mousemove', (event) => {\n            this.lastMovePosition = this.movePosition;\n            this.movePosition = new pixi_js_1.Point(event.clientX, event.clientY);\n            this.moveDelta = new pixi_js_1.Point(this.movePosition.x - this.lastMovePosition.x, this.movePosition.y - this.lastMovePosition.y);\n            anyEvent({ eventType: 'mousemove', event });\n        });\n        document.addEventListener('mousedown', (event) => {\n            this.mouseDownEvent = event;\n            this.lastMouseDown = event;\n            this.mouseUpEvent = null;\n            anyEvent({ eventType: 'mousedown', event });\n        });\n        document.addEventListener('mouseup', (event) => {\n            this.mouseUpEvent = event;\n            this.lastMouseUp = event;\n            this.mouseDownEvent = null;\n            anyEvent({ eventType: 'mouseup', event });\n        });\n        document.addEventListener('keydown', (event) => {\n            const { key } = event;\n            this.keyDownEvent = event;\n            this.keyUpEvent = null;\n            this.keydown[key] = event;\n            anyEvent({ eventType: 'keydown', event });\n        });\n        document.addEventListener('keyup', (event) => {\n            const { key } = event;\n            this.keyUpEvent = event;\n            this.keyDownEvent = null;\n            delete this.keydown[key];\n            anyEvent({ eventType: 'keyup', event });\n        });\n        ClientEvents.instance = this;\n    }\n    isKeyDown(key) {\n        return Boolean(this.keydown[key]);\n    }\n    isKeyUp(key) {\n        return !this.keydown[key];\n    }\n}\nexports.ClientEvents = ClientEvents;\n\n\n/***/ }),\n\n/***/ \"./src/library/falling-squares-animation.ts\":\n/*!**************************************************!*\\\n  !*** ./src/library/falling-squares-animation.ts ***!\n  \\**************************************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FallingSquaresAnimation = void 0;\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"pixi.js\");\nconst DEFAULT_PALETTE = [0xf0dab1, 0xe39aac, 0xc45d9f, 0x634b7d, 0x6461c2, 0x2ba9b4, 0x93d4b5, 0xf0f6e8];\nclass FallingSquaresAnimation {\n    particles = [];\n    container = null;\n    nextSpawn = 0;\n    time = 0;\n    squareSize;\n    maxParticles;\n    palette;\n    spawnInterval;\n    constructor(options = {}) {\n        this.squareSize = options.squareSize ?? 20;\n        this.maxParticles = options.maxParticles ?? 30;\n        this.palette = options.palette ?? DEFAULT_PALETTE;\n        this.spawnInterval = options.spawnInterval ?? 0.5;\n    }\n    init(container) {\n        this.container = container;\n    }\n    update(context) {\n        if (!this.container)\n            return;\n        this.time = context.time;\n        const { width, height, textElement } = context;\n        this.spawnParticle(width, height, textElement);\n        this.particles = this.particles.filter(p => {\n            const elapsed = this.time - p.spawnTime;\n            const progress = elapsed / p.duration;\n            if (progress < 0 || progress > 1) {\n                p.sprite.destroy();\n                return false;\n            }\n            p.sprite.x = p.startX;\n            p.sprite.y = p.startY + (p.endY - p.startY) * progress;\n            p.sprite.rotation = this.time * p.spinRate * Math.PI * 2;\n            p.sprite.alpha = progress < 0.1 ? progress / 0.1 : progress > 0.85 ? (1 - progress) / 0.15 : 1;\n            return true;\n        });\n    }\n    spawnParticle(width, height, textElement) {\n        if (!this.container)\n            return;\n        if (this.particles.length >= this.maxParticles || this.time < this.nextSpawn)\n            return;\n        const size = this.squareSize * (0.7 + Math.random() * 0.6);\n        const sprite = new pixi_js_1.Graphics();\n        sprite.rect(0, 0, size, size);\n        sprite.fill({ color: this.palette[Math.floor(Math.random() * this.palette.length)] });\n        sprite.pivot.set(size / 2, size / 2);\n        this.container.addChild(sprite);\n        const textY = textElement.y;\n        const textWidth = textElement.width || 200;\n        const textCenterX = width / 2;\n        this.particles.push({\n            sprite,\n            spawnTime: this.time,\n            duration: 1 + Math.random() * 2.5,\n            spinRate: (0.05 + Math.random() * 1.075) * (Math.random() < 0.5 ? 1 : -1),\n            startX: textCenterX - textWidth / 2 + Math.random() * textWidth - 4,\n            startY: textY - 100,\n            endY: textY - 40,\n        });\n        this.nextSpawn = this.time + Math.random() * this.spawnInterval;\n    }\n    reset() {\n        this.time = 0;\n        this.nextSpawn = 0;\n        this.particles.forEach(p => p.sprite.destroy());\n        this.particles = [];\n    }\n    destroy() {\n        this.particles.forEach(p => p.sprite.destroy());\n        this.particles = [];\n        this.container = null;\n    }\n}\nexports.FallingSquaresAnimation = FallingSquaresAnimation;\n\n\n/***/ }),\n\n/***/ \"./src/library/font-loader.ts\":\n/*!************************************!*\\\n  !*** ./src/library/font-loader.ts ***!\n  \\************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.loadFonts = void 0;\nconst fontfaceobserver_1 = __importDefault(__webpack_require__(/*! fontfaceobserver */ \"../../node_modules/fontfaceobserver/fontfaceobserver.standalone.js\"));\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"pixi.js\");\nconst loadFonts = async () => {\n    const fontKenfutureThin = new fontfaceobserver_1.default('kenfuture-thin');\n    return new Promise((resolve) => {\n        fontKenfutureThin.load().then(() => {\n            pixi_js_1.BitmapFont.install({\n                name: 'kenfuture-thin',\n                style: {\n                    fontFamily: 'kenfuture-thin'\n                }\n            });\n            resolve({ fontKenfutureThin });\n        });\n    });\n};\nexports.loadFonts = loadFonts;\n\n\n/***/ }),\n\n/***/ \"./src/library/grid-generator.ts\":\n/*!***************************************!*\\\n  !*** ./src/library/grid-generator.ts ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createTileGrid = createTileGrid;\nexports.getTextureRange = getTextureRange;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nfunction createTileGrid(options, textures, selector) {\n    const { width, height, cellWidth, cellHeight, centered = false } = options;\n    const defaultSelector = () => Math.floor(Math.random() * textures.length);\n    const getTextureIndex = selector || defaultSelector;\n    const container = new pixi_js_1.default.Container();\n    const totalCells = width * height;\n    for (let y = 0; y < height; y++) {\n        for (let x = 0; x < width; x++) {\n            const pixelX = x * cellWidth;\n            const pixelY = y * cellHeight;\n            const index = y * width + x;\n            const position = {\n                x, y, pixelX, pixelY, index, total: totalCells\n            };\n            const textureIndex = getTextureIndex(position);\n            const cell = new pixi_js_1.default.Sprite(textures[textureIndex]);\n            cell.position.set(pixelX, pixelY);\n            container.addChild(cell);\n        }\n    }\n    if (centered) {\n        const gridWidth = width * cellWidth;\n        const gridHeight = height * cellHeight;\n        container.position.set(-gridWidth / 2, -gridHeight / 2);\n    }\n    return container;\n}\nfunction getTextureRange(textures, startIndex, count) {\n    return textures.slice(startIndex, startIndex + count);\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/loading-scene.ts\":\n/*!**************************************!*\\\n  !*** ./src/library/loading-scene.ts ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.LoadingScene = exports.FallingSquaresAnimation = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst pixi_js_2 = __webpack_require__(/*! pixi.js */ \"pixi.js\");\nconst falling_squares_animation_1 = __webpack_require__(/*! ./falling-squares-animation */ \"./src/library/falling-squares-animation.ts\");\nObject.defineProperty(exports, \"FallingSquaresAnimation\", ({ enumerable: true, get: function () { return falling_squares_animation_1.FallingSquaresAnimation; } }));\nclass LoadingScene extends pixi_js_2.Container {\n    text;\n    background;\n    animationContainer;\n    animation;\n    ticker;\n    renderer = null;\n    time = 0;\n    backgroundColor;\n    constructor(options = {}) {\n        super();\n        const { backgroundColor = 0x1a1a1a, text = 'LOADING...', textStyle = {}, animation, fallingSquaresOptions } = options;\n        this.backgroundColor = backgroundColor;\n        this.animation = animation ?? new falling_squares_animation_1.FallingSquaresAnimation(fallingSquaresOptions);\n        this.background = new pixi_js_2.Graphics();\n        this.addChild(this.background);\n        this.animationContainer = new pixi_js_2.Container();\n        this.addChild(this.animationContainer);\n        this.text = new pixi_js_2.Text({\n            text,\n            style: {\n                fontFamily: 'Courier New, monospace',\n                fontSize: 16,\n                fill: 0xffffff,\n                fontWeight: 'bold',\n                ...textStyle\n            }\n        });\n        this.text.anchor.set(0.5);\n        this.addChild(this.text);\n        this.animation.init(this.animationContainer);\n        this.ticker = new pixi_js_1.default.Ticker();\n        this.ticker.autoStart = false;\n        this.ticker.add(() => {\n            if (this.visible && this.renderer) {\n                const deltaTime = this.ticker.deltaTime / 60;\n                this.time += deltaTime;\n                this.update(this.renderer.width, this.renderer.height, deltaTime);\n                this.renderer.render(this);\n            }\n        });\n    }\n    update(width, height, deltaTime) {\n        this.background.clear();\n        this.background.rect(0, 0, width, height);\n        this.background.fill({ color: this.backgroundColor });\n        this.text.x = width / 2 - 4;\n        this.text.y = height / 2 + 60;\n        this.animation.update({\n            time: this.time,\n            deltaTime,\n            width,\n            height,\n            textElement: this.text\n        });\n    }\n    init(renderer) {\n        this.renderer = renderer;\n    }\n    show() {\n        this.visible = true;\n        this.time = 0;\n        this.animation.reset();\n        if (!this.ticker.started) {\n            this.ticker.start();\n        }\n    }\n    hide() {\n        this.visible = false;\n        if (this.ticker.started) {\n            this.ticker.stop();\n        }\n    }\n    destroy() {\n        if (this.ticker.started) {\n            this.ticker.stop();\n        }\n        this.ticker.destroy();\n        this.animation.destroy();\n        super.destroy();\n    }\n}\nexports.LoadingScene = LoadingScene;\n\n\n/***/ }),\n\n/***/ \"./src/library/parallax-background.ts\":\n/*!********************************************!*\\\n  !*** ./src/library/parallax-background.ts ***!\n  \\********************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ParallaxBackgroundLogic = exports.ParallaxBackground = void 0;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst moxi_entity_1 = __webpack_require__(/*! ../main/moxi-entity */ \"./src/main/moxi-entity.ts\");\nconst logic_1 = __webpack_require__(/*! ../main/logic */ \"./src/main/logic.ts\");\nconst camera_1 = __webpack_require__(/*! ../main/camera */ \"./src/main/camera.ts\");\nconst parallax_layer_1 = __webpack_require__(/*! ./parallax-layer */ \"./src/library/parallax-layer.ts\");\nclass ParallaxBackground extends PIXI.Container {\n    moxiEntity;\n    camera = null;\n    scrollOffset = new PIXI.Point(0, 0);\n    scrollBaseScale = new PIXI.Point(1, 1);\n    scrollIgnoreCameraZoom = false;\n    autoscroll = new PIXI.Point(0, 0);\n    constructor(options = {}) {\n        super();\n        this.camera = options.camera ?? null;\n        this.scrollOffset = options.scrollOffset ?? new PIXI.Point(0, 0);\n        this.scrollBaseScale = options.scrollBaseScale ?? new PIXI.Point(1, 1);\n        this.scrollIgnoreCameraZoom = options.scrollIgnoreCameraZoom ?? false;\n        this.autoscroll = options.autoscroll ?? new PIXI.Point(0, 0);\n        const entity = (0, moxi_entity_1.asEntity)(this);\n        entity.moxiEntity.addLogic(new ParallaxBackgroundLogic());\n        this.moxiEntity = entity.moxiEntity;\n    }\n    addLayer(layer) {\n        this.addChild(layer);\n    }\n    detectCamera() {\n        let current = this.parent;\n        while (current) {\n            if (current instanceof camera_1.Camera) {\n                return current;\n            }\n            current = current.parent;\n        }\n        return null;\n    }\n    getCameraPosition() {\n        const camera = this.camera ?? this.detectCamera();\n        if (!camera) {\n            return new PIXI.Point(0, 0);\n        }\n        return new PIXI.Point(camera.position.x, camera.position.y);\n    }\n    getCameraScale() {\n        if (this.scrollIgnoreCameraZoom) {\n            return new PIXI.Point(1, 1);\n        }\n        const camera = this.camera ?? this.detectCamera();\n        if (!camera) {\n            return new PIXI.Point(1, 1);\n        }\n        return new PIXI.Point(camera.scale.x, camera.scale.y);\n    }\n}\nexports.ParallaxBackground = ParallaxBackground;\nclass ParallaxBackgroundLogic extends logic_1.Logic {\n    name = 'ParallaxBackgroundLogic';\n    update(entity, deltaTime) {\n        if (entity.autoscroll.x !== 0 || entity.autoscroll.y !== 0) {\n            entity.scrollOffset.x += entity.autoscroll.x * deltaTime;\n            entity.scrollOffset.y += entity.autoscroll.y * deltaTime;\n        }\n        const cameraPos = entity.getCameraPosition();\n        const cameraScale = entity.getCameraScale();\n        const scene = entity.parent;\n        if (scene) {\n            entity.position.x = cameraPos.x / scene.scale.x;\n            entity.position.y = cameraPos.y / scene.scale.y;\n            entity.scale.x = 1 / scene.scale.x;\n            entity.scale.y = 1 / scene.scale.y;\n        }\n        else {\n            entity.position.x = cameraPos.x;\n            entity.position.y = cameraPos.y;\n            entity.scale.set(1, 1);\n        }\n        entity.children.forEach((child) => {\n            if (child instanceof parallax_layer_1.ParallaxLayer) {\n                child.updateParallax(cameraPos, cameraScale, entity.scrollOffset);\n            }\n        });\n    }\n}\nexports.ParallaxBackgroundLogic = ParallaxBackgroundLogic;\n\n\n/***/ }),\n\n/***/ \"./src/library/parallax-layer.ts\":\n/*!***************************************!*\\\n  !*** ./src/library/parallax-layer.ts ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TilingParallaxLayer = exports.ParallaxLayer = void 0;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst moxi_entity_1 = __webpack_require__(/*! ../main/moxi-entity */ \"./src/main/moxi-entity.ts\");\nclass ParallaxLayer extends PIXI.Container {\n    moxiEntity;\n    scrollScale = new PIXI.Point(1, 1);\n    scrollOffset = new PIXI.Point(0, 0);\n    repeatSize = new PIXI.Point(0, 0);\n    mirroring = false;\n    _lastCameraPos = new PIXI.Point(0, 0);\n    constructor(options = {}) {\n        super();\n        this.scrollScale = options.scrollScale ?? new PIXI.Point(1, 1);\n        this.scrollOffset = options.scrollOffset ?? new PIXI.Point(0, 0);\n        this.repeatSize = options.repeatSize ?? new PIXI.Point(0, 0);\n        this.mirroring = options.mirroring ?? false;\n        const entity = (0, moxi_entity_1.asEntity)(this);\n        this.moxiEntity = entity.moxiEntity;\n    }\n    updateParallax(cameraPos, cameraScale, backgroundOffset) {\n        const scrollX = (cameraPos.x + backgroundOffset.x) * this.scrollScale.x;\n        const scrollY = (cameraPos.y + backgroundOffset.y) * this.scrollScale.y;\n        this.position.x = -scrollX + this.scrollOffset.x;\n        this.position.y = -scrollY + this.scrollOffset.y;\n        if (this.mirroring) {\n            if (this.repeatSize.x > 0) {\n                this.position.x = this.position.x % this.repeatSize.x;\n                if (this.position.x > 0)\n                    this.position.x -= this.repeatSize.x;\n            }\n            if (this.repeatSize.y > 0) {\n                this.position.y = this.position.y % this.repeatSize.y;\n                if (this.position.y > 0)\n                    this.position.y -= this.repeatSize.y;\n            }\n        }\n        this._lastCameraPos.copyFrom(cameraPos);\n    }\n}\nexports.ParallaxLayer = ParallaxLayer;\nclass TilingParallaxLayer extends ParallaxLayer {\n    tilingSprite;\n    _autoSized = false;\n    constructor(options) {\n        super(options);\n        options.texture.source.style.addressMode = 'repeat';\n        const width = options.width ?? 1;\n        const height = options.height ?? 1;\n        this.tilingSprite = new PIXI.TilingSprite({\n            texture: options.texture,\n            width: width,\n            height: height,\n        });\n        this.tilingSprite.position.set(0, 0);\n        this.addChild(this.tilingSprite);\n        this._autoSized = !options.width && !options.height;\n    }\n    autoDetectDimensions() {\n        if (!this._autoSized)\n            return;\n        let current = this.parent;\n        while (current) {\n            if (current.renderer) {\n                this.resize(current.renderer.width, current.renderer.height);\n                this._autoSized = false;\n                return;\n            }\n            current = current.parent;\n        }\n    }\n    updateParallax(cameraPos, cameraScale, backgroundOffset) {\n        this.autoDetectDimensions();\n        const renderer = this.parent?.parent;\n        if (renderer?.renderer) {\n            const baseWidth = renderer.renderer.width;\n            const baseHeight = renderer.renderer.height;\n            this.tilingSprite.width = baseWidth;\n            this.tilingSprite.height = baseHeight;\n            this.tilingSprite.pivot.set(0, 0);\n            this.tilingSprite.position.set(0, 0);\n        }\n        const scrollX = (cameraPos.x + backgroundOffset.x) * this.scrollScale.x;\n        const scrollY = (cameraPos.y + backgroundOffset.y) * this.scrollScale.y;\n        this.tilingSprite.tilePosition.x = -scrollX + this.scrollOffset.x;\n        this.tilingSprite.tilePosition.y = -scrollY + this.scrollOffset.y;\n        this.position.set(0, 0);\n    }\n    resize(width, height) {\n        this.tilingSprite.width = width;\n        this.tilingSprite.height = height;\n    }\n}\nexports.TilingParallaxLayer = TilingParallaxLayer;\n\n\n/***/ }),\n\n/***/ \"./src/library/physics/index.ts\":\n/*!**************************************!*\\\n  !*** ./src/library/physics/index.ts ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.applyMaterial = exports.PhysicsMaterials = exports.createShapeFromSprite = exports.getPhysicsBody = exports.hasPhysics = exports.asPhysicsEntity = exports.PhysicsDebugRenderer = exports.CollisionManager = exports.CollisionRegistry = exports.PhysicsBodyLogic = exports.PhysicsWorld = void 0;\nvar physics_world_1 = __webpack_require__(/*! ./physics-world */ \"./src/library/physics/physics-world.ts\");\nObject.defineProperty(exports, \"PhysicsWorld\", ({ enumerable: true, get: function () { return physics_world_1.PhysicsWorld; } }));\nvar physics_body_logic_1 = __webpack_require__(/*! ./physics-body-logic */ \"./src/library/physics/physics-body-logic.ts\");\nObject.defineProperty(exports, \"PhysicsBodyLogic\", ({ enumerable: true, get: function () { return physics_body_logic_1.PhysicsBodyLogic; } }));\nvar physics_collision_1 = __webpack_require__(/*! ./physics-collision */ \"./src/library/physics/physics-collision.ts\");\nObject.defineProperty(exports, \"CollisionRegistry\", ({ enumerable: true, get: function () { return physics_collision_1.CollisionRegistry; } }));\nObject.defineProperty(exports, \"CollisionManager\", ({ enumerable: true, get: function () { return physics_collision_1.CollisionManager; } }));\nvar physics_debug_renderer_1 = __webpack_require__(/*! ./physics-debug-renderer */ \"./src/library/physics/physics-debug-renderer.ts\");\nObject.defineProperty(exports, \"PhysicsDebugRenderer\", ({ enumerable: true, get: function () { return physics_debug_renderer_1.PhysicsDebugRenderer; } }));\nvar physics_utils_1 = __webpack_require__(/*! ./physics-utils */ \"./src/library/physics/physics-utils.ts\");\nObject.defineProperty(exports, \"asPhysicsEntity\", ({ enumerable: true, get: function () { return physics_utils_1.asPhysicsEntity; } }));\nObject.defineProperty(exports, \"hasPhysics\", ({ enumerable: true, get: function () { return physics_utils_1.hasPhysics; } }));\nObject.defineProperty(exports, \"getPhysicsBody\", ({ enumerable: true, get: function () { return physics_utils_1.getPhysicsBody; } }));\nObject.defineProperty(exports, \"createShapeFromSprite\", ({ enumerable: true, get: function () { return physics_utils_1.createShapeFromSprite; } }));\nvar physics_materials_1 = __webpack_require__(/*! ./physics-materials */ \"./src/library/physics/physics-materials.ts\");\nObject.defineProperty(exports, \"PhysicsMaterials\", ({ enumerable: true, get: function () { return physics_materials_1.PhysicsMaterials; } }));\nObject.defineProperty(exports, \"applyMaterial\", ({ enumerable: true, get: function () { return physics_materials_1.applyMaterial; } }));\n\n\n/***/ }),\n\n/***/ \"./src/library/physics/physics-body-logic.ts\":\n/*!***************************************************!*\\\n  !*** ./src/library/physics/physics-body-logic.ts ***!\n  \\***************************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PhysicsBodyLogic = void 0;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst planck = __importStar(__webpack_require__(/*! planck */ \"../../node_modules/planck/dist/planck.js\"));\nconst logic_1 = __webpack_require__(/*! ../../main/logic */ \"./src/main/logic.ts\");\nconst physics_graphics_parser_1 = __webpack_require__(/*! ./physics-graphics-parser */ \"./src/library/physics/physics-graphics-parser.ts\");\nclass PhysicsBodyLogic extends logic_1.Logic {\n    name = 'PhysicsBodyLogic';\n    body;\n    world;\n    options;\n    onCollisionBegin;\n    onCollisionEnd;\n    constructor(world, options = {}) {\n        super();\n        this.world = world;\n        this.options = {\n            type: 'dynamic',\n            syncMode: 'physics-driven',\n            syncPosition: true,\n            syncRotation: true,\n            density: 1.0,\n            friction: 0.3,\n            restitution: 0.0,\n            fixedRotation: false,\n            isSensor: false,\n            bullet: false,\n            ...options\n        };\n    }\n    init(entity, renderer) {\n        this.createPhysicsBody(entity);\n        this.body.setUserData(this);\n        this.world.registerBody(this.body, this);\n    }\n    update(entity, deltaTime) {\n        if (!this.body)\n            return;\n        switch (this.options.syncMode) {\n            case 'physics-driven':\n                this.syncFromPhysics(entity);\n                break;\n            case 'sprite-driven':\n                this.syncToPhysics(entity);\n                break;\n            case 'manual':\n                break;\n        }\n    }\n    destroy() {\n        if (this.body) {\n            this.world.destroyBody(this.body);\n        }\n    }\n    syncFromPhysics(entity) {\n        if (!this.body)\n            return;\n        const pos = this.body.getPosition();\n        if (this.options.syncPosition) {\n            entity.x = this.world.toPixels(pos.x);\n            entity.y = this.world.toPixels(pos.y);\n        }\n        if (this.options.syncRotation) {\n            entity.rotation = this.body.getAngle();\n        }\n    }\n    syncToPhysics(entity) {\n        if (!this.body)\n            return;\n        if (this.options.syncPosition) {\n            const x = this.world.toPhysics(entity.x);\n            const y = this.world.toPhysics(entity.y);\n            this.body.setPosition(planck.Vec2(x, y));\n        }\n        if (this.options.syncRotation) {\n            this.body.setAngle(entity.rotation);\n        }\n    }\n    createPhysicsBody(entity) {\n        let bodyType;\n        switch (this.options.type) {\n            case 'static':\n                bodyType = 'static';\n                break;\n            case 'kinematic':\n                bodyType = 'kinematic';\n                break;\n            case 'dynamic':\n            default:\n                bodyType = 'dynamic';\n                break;\n        }\n        const bodyDef = {\n            type: bodyType,\n            position: this.options.position\n                ? this.world.toPhysicsPoint(this.options.position)\n                : planck.Vec2(this.world.toPhysics(entity.x), this.world.toPhysics(entity.y)),\n            angle: this.options.rotation ?? entity.rotation,\n            linearVelocity: this.options.linearVelocity\n                ? this.world.toPhysicsPoint(this.options.linearVelocity)\n                : planck.Vec2(0, 0),\n            angularVelocity: this.options.angularVelocity ?? 0,\n            fixedRotation: this.options.fixedRotation ?? false,\n            bullet: this.options.bullet ?? false\n        };\n        this.body = this.world.createBody(bodyDef);\n        this.createFixture(entity);\n        if (this.options.linearVelocity) {\n            this.setVelocity(this.options.linearVelocity);\n        }\n        if (this.options.angularVelocity) {\n            this.setAngularVelocity(this.options.angularVelocity);\n        }\n    }\n    createFixture(entity) {\n        const shape = this.createShape(entity);\n        const categoryBits = this.options.collisionTags\n            ? this.world.collisionRegistry.tagsToBits(this.options.collisionTags)\n            : this.world.collisionRegistry.getBit('default');\n        const maskBits = this.options.collidesWith\n            ? this.world.collisionRegistry.tagsToBits(this.options.collidesWith)\n            : 0xFFFF;\n        const groupIndex = this.options.collisionGroup ?? 0;\n        this.body.createFixture({\n            shape: shape,\n            density: this.options.density ?? 1.0,\n            friction: this.options.friction ?? 0.3,\n            restitution: this.options.restitution ?? 0.0,\n            isSensor: this.options.isSensor ?? false,\n            filterCategoryBits: categoryBits,\n            filterMaskBits: maskBits,\n            filterGroupIndex: groupIndex\n        });\n    }\n    createShape(entity) {\n        if (this.options.collisionShape) {\n            const parsed = (0, physics_graphics_parser_1.parseGraphicsShape)(this.options.collisionShape, this.world);\n            return parsed.shape;\n        }\n        if (entity instanceof PIXI.Graphics) {\n            const parsed = (0, physics_graphics_parser_1.parseGraphicsShape)(entity, this.world);\n            return parsed.shape;\n        }\n        if (this.options.shape) {\n            return this.createShapeFromType(this.options.shape);\n        }\n        throw new Error('Collision shape required for non-Graphics entities. ' +\n            'Either provide a Graphics entity, or specify options.collisionShape, ' +\n            'or use legacy options.shape with dimensions.');\n    }\n    createShapeFromType(shapeType) {\n        switch (shapeType) {\n            case 'circle':\n                const radius = this.options.radius ?? 25;\n                return planck.Circle(this.world.toPhysics(radius));\n            case 'rectangle':\n                const width = this.options.width ?? 50;\n                const height = this.options.height ?? 50;\n                return planck.Box(this.world.toPhysics(width / 2), this.world.toPhysics(height / 2));\n            case 'polygon':\n                if (!this.options.vertices || this.options.vertices.length < 3) {\n                    throw new Error('Polygon shape requires at least 3 vertices');\n                }\n                const vertices = this.options.vertices.map(v => planck.Vec2(this.world.toPhysics(v.x), this.world.toPhysics(v.y)));\n                return planck.Polygon(vertices);\n            default:\n                throw new Error(`Unknown shape type: ${shapeType}`);\n        }\n    }\n    autoDetectShape(entity) {\n        const bounds = entity.getLocalBounds();\n        return planck.Box(this.world.toPhysics(bounds.width / 2), this.world.toPhysics(bounds.height / 2));\n    }\n    applyForce(force, point) {\n        const forceVec = this.world.toPhysicsPoint(force);\n        const pointVec = point\n            ? this.world.toPhysicsPoint(point)\n            : this.body.getWorldCenter();\n        this.body.applyForce(forceVec, pointVec);\n    }\n    applyImpulse(impulse, point) {\n        const impulseVec = this.world.toPhysicsPoint(impulse);\n        const pointVec = point\n            ? this.world.toPhysicsPoint(point)\n            : this.body.getWorldCenter();\n        this.body.applyLinearImpulse(impulseVec, pointVec);\n    }\n    applyTorque(torque) {\n        this.body.applyTorque(torque);\n    }\n    setVelocity(velocity) {\n        const velocityVec = this.world.toPhysicsPoint(velocity);\n        this.body.setLinearVelocity(velocityVec);\n    }\n    setAngularVelocity(omega) {\n        this.body.setAngularVelocity(omega);\n    }\n    getVelocity() {\n        const vel = this.body.getLinearVelocity();\n        return this.world.toPixelsPoint(vel);\n    }\n    getAngularVelocity() {\n        return this.body.getAngularVelocity();\n    }\n    getMass() {\n        return this.body.getMass();\n    }\n    isAwake() {\n        return this.body.isAwake();\n    }\n    isSleeping() {\n        return !this.body.isAwake();\n    }\n    setAwake(awake) {\n        this.body.setAwake(awake);\n    }\n}\nexports.PhysicsBodyLogic = PhysicsBodyLogic;\n\n\n/***/ }),\n\n/***/ \"./src/library/physics/physics-collision.ts\":\n/*!**************************************************!*\\\n  !*** ./src/library/physics/physics-collision.ts ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CollisionManager = exports.CollisionRegistry = void 0;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nclass CollisionRegistry {\n    tagToBit = new Map();\n    bitToTag = new Map();\n    nextBit = 1;\n    constructor() {\n        this.register('default');\n    }\n    register(tag) {\n        if (this.tagToBit.has(tag))\n            return;\n        if (this.nextBit > 0x8000) {\n            throw new Error('Maximum collision tags reached (16 tags)');\n        }\n        this.tagToBit.set(tag, this.nextBit);\n        this.bitToTag.set(this.nextBit, tag);\n        this.nextBit <<= 1;\n    }\n    getBit(tag) {\n        if (!this.tagToBit.has(tag)) {\n            this.register(tag);\n        }\n        return this.tagToBit.get(tag);\n    }\n    getTag(bit) {\n        return this.bitToTag.get(bit);\n    }\n    tagsToBits(tags) {\n        if (!tags || tags.length === 0) {\n            return this.getBit('default');\n        }\n        return tags.reduce((bits, tag) => bits | this.getBit(tag), 0);\n    }\n    bitsToTags(bits) {\n        const tags = [];\n        for (const [bit, tag] of this.bitToTag) {\n            if (bits & bit) {\n                tags.push(tag);\n            }\n        }\n        return tags;\n    }\n}\nexports.CollisionRegistry = CollisionRegistry;\nfunction isPhysicsBodyUserData(obj) {\n    return (obj !== null &&\n        typeof obj === 'object' &&\n        'options' in obj &&\n        typeof obj.options === 'object');\n}\nclass CollisionManager {\n    world;\n    registry;\n    callbacks = new Map();\n    constructor(world, registry) {\n        this.world = world;\n        this.registry = registry;\n        this.setupListeners();\n    }\n    setupListeners() {\n        this.world.world.on('begin-contact', (contact) => {\n            this.handleBeginContact(contact);\n        });\n        this.world.world.on('end-contact', (contact) => {\n            this.handleEndContact(contact);\n        });\n    }\n    onCollision(tagA, tagB, callback) {\n        const key = this.makeKey(tagA, tagB);\n        if (!this.callbacks.has(key)) {\n            this.callbacks.set(key, new Set());\n        }\n        this.callbacks.get(key).add(callback);\n    }\n    offCollision(tagA, tagB, callback) {\n        const key = this.makeKey(tagA, tagB);\n        this.callbacks.get(key)?.delete(callback);\n    }\n    makeKey(tagA, tagB) {\n        return tagA < tagB ? `${tagA}:${tagB}` : `${tagB}:${tagA}`;\n    }\n    handleBeginContact(contact) {\n        const bodyA = contact.getFixtureA().getBody().getUserData();\n        const bodyB = contact.getFixtureB().getBody().getUserData();\n        if (!isPhysicsBodyUserData(bodyA) || !isPhysicsBodyUserData(bodyB))\n            return;\n        bodyA.onCollisionBegin?.(bodyB, contact);\n        bodyB.onCollisionBegin?.(bodyA, contact);\n        this.triggerTagCallbacks(bodyA, bodyB, contact);\n    }\n    handleEndContact(contact) {\n        const bodyA = contact.getFixtureA().getBody().getUserData();\n        const bodyB = contact.getFixtureB().getBody().getUserData();\n        if (!isPhysicsBodyUserData(bodyA) || !isPhysicsBodyUserData(bodyB))\n            return;\n        bodyA.onCollisionEnd?.(bodyB, contact);\n        bodyB.onCollisionEnd?.(bodyA, contact);\n    }\n    triggerTagCallbacks(bodyA, bodyB, contact) {\n        const tagsA = bodyA.options.collisionTags || [];\n        const tagsB = bodyB.options.collisionTags || [];\n        for (const tagA of tagsA) {\n            for (const tagB of tagsB) {\n                const key = this.makeKey(tagA, tagB);\n                const callbacks = this.callbacks.get(key);\n                if (callbacks) {\n                    const event = {\n                        bodyA,\n                        bodyB,\n                        contact,\n                        normal: new PIXI.Point(0, 0),\n                        impulse: 0\n                    };\n                    callbacks.forEach(cb => cb(event));\n                }\n            }\n        }\n    }\n}\nexports.CollisionManager = CollisionManager;\n\n\n/***/ }),\n\n/***/ \"./src/library/physics/physics-debug-renderer.ts\":\n/*!*******************************************************!*\\\n  !*** ./src/library/physics/physics-debug-renderer.ts ***!\n  \\*******************************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PhysicsDebugRenderer = void 0;\nconst planck = __importStar(__webpack_require__(/*! planck */ \"../../node_modules/planck/dist/planck.js\"));\nconst logic_1 = __webpack_require__(/*! ../../main/logic */ \"./src/main/logic.ts\");\nclass PhysicsDebugRenderer extends logic_1.Logic {\n    name = 'PhysicsDebugRenderer';\n    world;\n    graphics;\n    options;\n    isVisible = true;\n    constructor(world, options = {}) {\n        super();\n        this.world = world;\n        this.options = {\n            showShapes: options.showShapes ?? true,\n            showVelocities: options.showVelocities ?? false,\n            showAABBs: options.showAABBs ?? false,\n            showCenterOfMass: options.showCenterOfMass ?? false,\n            showContactPoints: options.showContactPoints ?? false,\n            showJoints: options.showJoints ?? false,\n            colorStatic: options.colorStatic ?? 0x00FF00,\n            colorDynamic: options.colorDynamic ?? 0xFF0000,\n            colorKinematic: options.colorKinematic ?? 0x0000FF,\n            colorSleeping: options.colorSleeping ?? 0xAAAAAA,\n            colorSensor: options.colorSensor ?? 0xFFFF00,\n            alpha: options.alpha ?? 0.5,\n            lineWidth: options.lineWidth ?? 2\n        };\n    }\n    init(entity, renderer) {\n        this.graphics = entity;\n    }\n    update(entity, deltaTime) {\n        if (!this.isVisible) {\n            this.graphics.clear();\n            return;\n        }\n        this.graphics.clear();\n        if (this.options.showShapes) {\n            for (let body = this.world.world.getBodyList(); body; body = body.getNext()) {\n                this.drawBody(body);\n            }\n        }\n        if (this.options.showContactPoints) {\n            this.drawContacts();\n        }\n    }\n    drawBody(body) {\n        const transform = body.getTransform();\n        let color;\n        if (!body.isAwake() && body.isDynamic()) {\n            color = this.options.colorSleeping;\n        }\n        else if (body.isStatic()) {\n            color = this.options.colorStatic;\n        }\n        else if (body.isKinematic()) {\n            color = this.options.colorKinematic;\n        }\n        else {\n            color = this.options.colorDynamic;\n        }\n        for (let fixture = body.getFixtureList(); fixture; fixture = fixture.getNext()) {\n            const shape = fixture.getShape();\n            const fixtureColor = fixture.isSensor() ? this.options.colorSensor : color;\n            const alpha = fixture.isSensor() ? this.options.alpha * 0.5 : this.options.alpha;\n            this.drawShape(shape, transform, fixtureColor, alpha);\n        }\n        if (this.options.showVelocities && body.isDynamic()) {\n            this.drawVelocity(body);\n        }\n        if (this.options.showAABBs) {\n            this.drawAABB(body);\n        }\n        if (this.options.showCenterOfMass) {\n            this.drawCenterOfMass(body);\n        }\n    }\n    drawShape(shape, transform, color, alpha) {\n        this.graphics.stroke({\n            width: this.options.lineWidth,\n            color: color,\n            alpha: alpha\n        });\n        const shapeType = shape.getType();\n        if (shapeType === 'circle') {\n            const circle = shape;\n            const center = planck.Vec2.add(transform.p, planck.Rot.mulVec2(transform.q, circle.getCenter()));\n            const radius = circle.getRadius();\n            const pixelCenter = this.world.toPixelsPoint(center);\n            const pixelRadius = this.world.toPixels(radius);\n            this.graphics.circle(pixelCenter.x, pixelCenter.y, pixelRadius);\n            this.graphics.stroke();\n            const angle = transform.q.getAngle();\n            const endX = pixelCenter.x + Math.cos(angle) * pixelRadius;\n            const endY = pixelCenter.y + Math.sin(angle) * pixelRadius;\n            this.graphics.moveTo(pixelCenter.x, pixelCenter.y);\n            this.graphics.lineTo(endX, endY);\n            this.graphics.stroke();\n        }\n        else if (shapeType === 'polygon') {\n            const poly = shape;\n            const vertices = poly.m_vertices;\n            if (vertices && vertices.length > 0) {\n                const firstVertex = planck.Vec2.add(transform.p, planck.Rot.mulVec2(transform.q, vertices[0]));\n                const pixelFirst = this.world.toPixelsPoint(firstVertex);\n                this.graphics.moveTo(pixelFirst.x, pixelFirst.y);\n                for (let i = 1; i < vertices.length; i++) {\n                    const vertex = planck.Vec2.add(transform.p, planck.Rot.mulVec2(transform.q, vertices[i]));\n                    const pixelVertex = this.world.toPixelsPoint(vertex);\n                    this.graphics.lineTo(pixelVertex.x, pixelVertex.y);\n                }\n                this.graphics.lineTo(pixelFirst.x, pixelFirst.y);\n                this.graphics.stroke();\n            }\n        }\n        else if (shapeType === 'edge') {\n            const edge = shape;\n            const v1 = planck.Vec2.add(transform.p, planck.Rot.mulVec2(transform.q, edge.m_vertex1));\n            const v2 = planck.Vec2.add(transform.p, planck.Rot.mulVec2(transform.q, edge.m_vertex2));\n            const p1 = this.world.toPixelsPoint(v1);\n            const p2 = this.world.toPixelsPoint(v2);\n            this.graphics.moveTo(p1.x, p1.y);\n            this.graphics.lineTo(p2.x, p2.y);\n            this.graphics.stroke();\n        }\n        else if (shapeType === 'chain') {\n            const chain = shape;\n            const vertices = chain.m_vertices;\n            if (vertices && vertices.length > 0) {\n                const firstVertex = planck.Vec2.add(transform.p, planck.Rot.mulVec2(transform.q, vertices[0]));\n                const pixelFirst = this.world.toPixelsPoint(firstVertex);\n                this.graphics.moveTo(pixelFirst.x, pixelFirst.y);\n                for (let i = 1; i < vertices.length; i++) {\n                    const vertex = planck.Vec2.add(transform.p, planck.Rot.mulVec2(transform.q, vertices[i]));\n                    const pixelVertex = this.world.toPixelsPoint(vertex);\n                    this.graphics.lineTo(pixelVertex.x, pixelVertex.y);\n                }\n                this.graphics.stroke();\n            }\n        }\n    }\n    drawVelocity(body) {\n        const position = body.getPosition();\n        const velocity = body.getLinearVelocity();\n        const scale = 0.5;\n        const endPoint = planck.Vec2.add(position, planck.Vec2.mul(velocity, scale));\n        const pixelStart = this.world.toPixelsPoint(position);\n        const pixelEnd = this.world.toPixelsPoint(endPoint);\n        this.graphics.stroke({\n            width: 2,\n            color: 0x00FFFF,\n            alpha: 0.8\n        });\n        this.graphics.moveTo(pixelStart.x, pixelStart.y);\n        this.graphics.lineTo(pixelEnd.x, pixelEnd.y);\n        this.graphics.stroke();\n        const angle = Math.atan2(pixelEnd.y - pixelStart.y, pixelEnd.x - pixelStart.x);\n        const arrowSize = 5;\n        const angle1 = angle + Math.PI * 0.8;\n        const angle2 = angle - Math.PI * 0.8;\n        this.graphics.moveTo(pixelEnd.x, pixelEnd.y);\n        this.graphics.lineTo(pixelEnd.x + Math.cos(angle1) * arrowSize, pixelEnd.y + Math.sin(angle1) * arrowSize);\n        this.graphics.moveTo(pixelEnd.x, pixelEnd.y);\n        this.graphics.lineTo(pixelEnd.x + Math.cos(angle2) * arrowSize, pixelEnd.y + Math.sin(angle2) * arrowSize);\n        this.graphics.stroke();\n    }\n    drawAABB(body) {\n        for (let fixture = body.getFixtureList(); fixture; fixture = fixture.getNext()) {\n            const aabb = fixture.getAABB(0);\n            const lowerBound = this.world.toPixelsPoint(aabb.lowerBound);\n            const upperBound = this.world.toPixelsPoint(aabb.upperBound);\n            this.graphics.stroke({\n                width: 1,\n                color: 0xFF00FF,\n                alpha: 0.3\n            });\n            this.graphics.rect(lowerBound.x, lowerBound.y, upperBound.x - lowerBound.x, upperBound.y - lowerBound.y);\n            this.graphics.stroke();\n        }\n    }\n    drawCenterOfMass(body) {\n        const position = body.getWorldCenter();\n        const pixelPos = this.world.toPixelsPoint(position);\n        this.graphics.stroke({\n            width: 1,\n            color: 0xFFFFFF,\n            alpha: 1\n        });\n        const size = 5;\n        this.graphics.moveTo(pixelPos.x - size, pixelPos.y);\n        this.graphics.lineTo(pixelPos.x + size, pixelPos.y);\n        this.graphics.moveTo(pixelPos.x, pixelPos.y - size);\n        this.graphics.lineTo(pixelPos.x, pixelPos.y + size);\n        this.graphics.stroke();\n    }\n    drawContacts() {\n        for (let contact = this.world.world.getContactList(); contact; contact = contact.getNext()) {\n            if (!contact.isTouching())\n                continue;\n            const manifold = contact.getManifold();\n            if (!manifold)\n                continue;\n            const worldManifold = contact.getWorldManifold(null);\n            if (!worldManifold)\n                continue;\n            for (let i = 0; i < manifold.pointCount; i++) {\n                const point = worldManifold.points[i];\n                if (!point)\n                    continue;\n                const pixelPoint = this.world.toPixelsPoint(planck.Vec2(point.x, point.y));\n                this.graphics.circle(pixelPoint.x, pixelPoint.y, 3);\n                this.graphics.fill({ color: 0xFF0000, alpha: 0.8 });\n            }\n        }\n    }\n    setVisible(visible) {\n        this.isVisible = visible;\n        if (!visible) {\n            this.graphics.clear();\n        }\n    }\n    toggle() {\n        this.setVisible(!this.isVisible);\n    }\n    getVisible() {\n        return this.isVisible;\n    }\n}\nexports.PhysicsDebugRenderer = PhysicsDebugRenderer;\n\n\n/***/ }),\n\n/***/ \"./src/library/physics/physics-graphics-parser.ts\":\n/*!********************************************************!*\\\n  !*** ./src/library/physics/physics-graphics-parser.ts ***!\n  \\********************************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.setGraphicsPhysicsShape = setGraphicsPhysicsShape;\nexports.initGraphicsPhysicsTracking = initGraphicsPhysicsTracking;\nexports.parseGraphicsShape = parseGraphicsShape;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst planck = __importStar(__webpack_require__(/*! planck */ \"../../node_modules/planck/dist/planck.js\"));\nconst PHYSICS_SHAPE_KEY = '__physicsShape__';\nfunction setGraphicsPhysicsShape(graphics, metadata) {\n    graphics[PHYSICS_SHAPE_KEY] = metadata;\n}\nfunction initGraphicsPhysicsTracking() {\n    const originalRect = PIXI.Graphics.prototype.rect;\n    const originalCircle = PIXI.Graphics.prototype.circle;\n    const originalPoly = PIXI.Graphics.prototype.poly;\n    PIXI.Graphics.prototype.rect = function (x, y, w, h) {\n        setGraphicsPhysicsShape(this, {\n            type: 'rectangle',\n            width: w,\n            height: h\n        });\n        return originalRect.call(this, x, y, w, h);\n    };\n    PIXI.Graphics.prototype.circle = function (x, y, radius) {\n        setGraphicsPhysicsShape(this, {\n            type: 'circle',\n            radius: radius\n        });\n        return originalCircle.call(this, x, y, radius);\n    };\n    PIXI.Graphics.prototype.poly = function (points) {\n        const flatPoints = Array.isArray(points[0]) ? points.flat() : points;\n        setGraphicsPhysicsShape(this, {\n            type: 'polygon',\n            vertices: flatPoints\n        });\n        return originalPoly.call(this, points);\n    };\n}\nfunction parseGraphicsShape(graphics, world) {\n    const metadata = graphics[PHYSICS_SHAPE_KEY];\n    if (metadata) {\n        switch (metadata.type) {\n            case 'circle':\n                if (!metadata.radius) {\n                    throw new Error('Circle metadata missing radius');\n                }\n                return {\n                    type: 'circle',\n                    shape: planck.Circle(world.toPhysics(metadata.radius))\n                };\n            case 'rectangle':\n                if (!metadata.width || !metadata.height) {\n                    throw new Error('Rectangle metadata missing width/height');\n                }\n                return {\n                    type: 'rectangle',\n                    shape: planck.Box(world.toPhysics(metadata.width / 2), world.toPhysics(metadata.height / 2))\n                };\n            case 'polygon':\n                if (!metadata.vertices || metadata.vertices.length < 6) {\n                    throw new Error('Polygon metadata missing vertices (need at least 3 points = 6 values)');\n                }\n                const vertices = [];\n                for (let i = 0; i < metadata.vertices.length; i += 2) {\n                    vertices.push(planck.Vec2(world.toPhysics(metadata.vertices[i]), world.toPhysics(metadata.vertices[i + 1])));\n                }\n                return {\n                    type: 'polygon',\n                    shape: planck.Polygon(vertices)\n                };\n        }\n    }\n    const bounds = graphics.getLocalBounds();\n    if (bounds.width === 0 || bounds.height === 0) {\n        throw new Error('Graphics has no dimensions. Either draw shapes using rect(), circle(), or poly(), ' +\n            'or provide an explicit collisionShape option.');\n    }\n    return {\n        type: 'rectangle',\n        shape: planck.Box(world.toPhysics(bounds.width / 2), world.toPhysics(bounds.height / 2))\n    };\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/physics/physics-materials.ts\":\n/*!**************************************************!*\\\n  !*** ./src/library/physics/physics-materials.ts ***!\n  \\**************************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PhysicsMaterials = void 0;\nexports.applyMaterial = applyMaterial;\nexports.PhysicsMaterials = {\n    bouncy: {\n        density: 0.5,\n        friction: 0.1,\n        restitution: 0.9\n    },\n    wood: {\n        density: 0.7,\n        friction: 0.4,\n        restitution: 0.2\n    },\n    metal: {\n        density: 1.5,\n        friction: 0.3,\n        restitution: 0.1\n    },\n    ice: {\n        density: 0.9,\n        friction: 0.02,\n        restitution: 0.05\n    },\n    rubber: {\n        density: 1.0,\n        friction: 0.9,\n        restitution: 0.7\n    },\n    character: {\n        density: 1.0,\n        friction: 0.5,\n        restitution: 0.0,\n        fixedRotation: true\n    },\n    terrain: {\n        density: 0,\n        friction: 0.6,\n        restitution: 0.0\n    }\n};\nfunction applyMaterial(options, material) {\n    return {\n        ...options,\n        ...exports.PhysicsMaterials[material]\n    };\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/physics/physics-utils.ts\":\n/*!**********************************************!*\\\n  !*** ./src/library/physics/physics-utils.ts ***!\n  \\**********************************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.asPhysicsEntity = asPhysicsEntity;\nexports.hasPhysics = hasPhysics;\nexports.getPhysicsBody = getPhysicsBody;\nexports.createShapeFromSprite = createShapeFromSprite;\nconst moxi_entity_1 = __webpack_require__(/*! ../../main/moxi-entity */ \"./src/main/moxi-entity.ts\");\nconst physics_body_logic_1 = __webpack_require__(/*! ./physics-body-logic */ \"./src/library/physics/physics-body-logic.ts\");\nfunction asPhysicsEntity(pixiObject, world, options = {}) {\n    const entity = (0, moxi_entity_1.asEntity)(pixiObject);\n    const physicsLogic = new physics_body_logic_1.PhysicsBodyLogic(world, options);\n    entity.moxiEntity.addLogic(physicsLogic);\n    return entity;\n}\nfunction hasPhysics(entity) {\n    if (!entity.moxiEntity)\n        return false;\n    return entity.moxiEntity.getLogic('PhysicsBodyLogic') !== undefined;\n}\nfunction getPhysicsBody(entity) {\n    if (!entity.moxiEntity)\n        return undefined;\n    return entity.moxiEntity.getLogic('PhysicsBodyLogic');\n}\nfunction createShapeFromSprite(sprite, type = 'auto') {\n    const bounds = sprite.getLocalBounds();\n    if (type === 'auto') {\n        const ratio = bounds.width / bounds.height;\n        type = (ratio > 0.8 && ratio < 1.2) ? 'circle' : 'rectangle';\n    }\n    if (type === 'circle') {\n        return {\n            shape: 'circle',\n            radius: Math.max(bounds.width, bounds.height) / 2\n        };\n    }\n    else {\n        return {\n            shape: 'rectangle',\n            width: bounds.width,\n            height: bounds.height\n        };\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/physics/physics-world.ts\":\n/*!**********************************************!*\\\n  !*** ./src/library/physics/physics-world.ts ***!\n  \\**********************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PhysicsWorld = void 0;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst planck = __importStar(__webpack_require__(/*! planck */ \"../../node_modules/planck/dist/planck.js\"));\nconst physics_collision_1 = __webpack_require__(/*! ./physics-collision */ \"./src/library/physics/physics-collision.ts\");\nconst physics_debug_renderer_1 = __webpack_require__(/*! ./physics-debug-renderer */ \"./src/library/physics/physics-debug-renderer.ts\");\nconst moxi_entity_1 = __webpack_require__(/*! ../../main/moxi-entity */ \"./src/main/moxi-entity.ts\");\nconst physics_graphics_parser_1 = __webpack_require__(/*! ./physics-graphics-parser */ \"./src/library/physics/physics-graphics-parser.ts\");\nclass PhysicsWorld {\n    world;\n    pixelsPerMeter = 30;\n    timestep = 1 / 60;\n    collisionRegistry;\n    collisionManager;\n    velocityIterations = 8;\n    positionIterations = 3;\n    accumulator = 0;\n    bodies = new Map();\n    debugRenderer;\n    debugGraphics;\n    constructor(options = {}) {\n        (0, physics_graphics_parser_1.initGraphicsPhysicsTracking)();\n        const { gravity = { x: 0, y: 9.8 }, pixelsPerMeter = 30, velocityIterations = 8, positionIterations = 3, enableSleeping = true, timestep = 1 / 60 } = options;\n        this.pixelsPerMeter = pixelsPerMeter;\n        this.velocityIterations = velocityIterations;\n        this.positionIterations = positionIterations;\n        this.timestep = timestep;\n        this.world = planck.World({\n            gravity: planck.Vec2(gravity.x, gravity.y)\n        });\n        this.world.setAllowSleeping(enableSleeping);\n        this.collisionRegistry = new physics_collision_1.CollisionRegistry();\n        this.collisionManager = new physics_collision_1.CollisionManager(this, this.collisionRegistry);\n    }\n    step(deltaTime) {\n        this.accumulator += deltaTime;\n        while (this.accumulator >= this.timestep) {\n            this.world.step(this.timestep, this.velocityIterations, this.positionIterations);\n            this.accumulator -= this.timestep;\n        }\n    }\n    createBody(def) {\n        return this.world.createBody(def);\n    }\n    destroyBody(body) {\n        this.bodies.delete(body);\n        this.world.destroyBody(body);\n    }\n    registerBody(body, logic) {\n        this.bodies.set(body, logic);\n    }\n    getBodyLogic(body) {\n        return this.bodies.get(body);\n    }\n    raycast(from, to, callback) {\n        const p1 = this.toPhysicsPoint(from);\n        const p2 = this.toPhysicsPoint(to);\n        this.world.rayCast(p1, p2, (fixture, point, normal, fraction) => {\n            const pixelPoint = this.toPixelsPoint(point);\n            const pixelNormal = new PIXI.Point(normal.x, normal.y);\n            return callback(fixture, pixelPoint, pixelNormal, fraction);\n        });\n    }\n    queryAABB(bounds, callback) {\n        const lowerBound = this.toPhysicsPoint(new PIXI.Point(bounds.x, bounds.y));\n        const upperBound = this.toPhysicsPoint(new PIXI.Point(bounds.x + bounds.width, bounds.y + bounds.height));\n        this.world.queryAABB(planck.AABB(lowerBound, upperBound), (fixture) => {\n            return callback(fixture.getBody());\n        });\n    }\n    queryPoint(point, callback) {\n        const physicsPoint = this.toPhysicsPoint(point);\n        this.world.queryAABB(planck.AABB(planck.Vec2(physicsPoint.x - 0.001, physicsPoint.y - 0.001), planck.Vec2(physicsPoint.x + 0.001, physicsPoint.y + 0.001)), (fixture) => {\n            if (fixture.testPoint(physicsPoint)) {\n                return callback(fixture);\n            }\n            return true;\n        });\n    }\n    toPhysics(pixels) {\n        return pixels / this.pixelsPerMeter;\n    }\n    toPixels(meters) {\n        return meters * this.pixelsPerMeter;\n    }\n    toPhysicsPoint(point) {\n        return planck.Vec2(this.toPhysics(point.x), this.toPhysics(point.y));\n    }\n    toPixelsPoint(vec) {\n        return new PIXI.Point(this.toPixels(vec.x), this.toPixels(vec.y));\n    }\n    enableDebugRenderer(scene, options = {}) {\n        if (this.debugRenderer) {\n            this.disableDebugRenderer();\n        }\n        this.debugGraphics = new PIXI.Graphics();\n        this.debugRenderer = new physics_debug_renderer_1.PhysicsDebugRenderer(this, options);\n        const debugEntity = (0, moxi_entity_1.asEntity)(this.debugGraphics);\n        debugEntity.moxiEntity.addLogic(this.debugRenderer);\n        debugEntity.zIndex = 10000;\n        scene.sortableChildren = true;\n        scene.addChild(debugEntity);\n        console.log('Physics debug renderer enabled. Press \"P\" to toggle visibility.');\n        return this.debugRenderer;\n    }\n    disableDebugRenderer() {\n        if (this.debugRenderer && this.debugGraphics) {\n            if (this.debugGraphics.parent) {\n                this.debugGraphics.parent.removeChild(this.debugGraphics);\n            }\n            this.debugGraphics.destroy();\n            this.debugGraphics = undefined;\n            this.debugRenderer = undefined;\n        }\n    }\n    getDebugRenderer() {\n        return this.debugRenderer;\n    }\n    getBodies() {\n        const bodies = [];\n        for (let body = this.world.getBodyList(); body; body = body.getNext()) {\n            bodies.push(body);\n        }\n        return bodies;\n    }\n    destroy() {\n        const bodies = this.getBodies();\n        bodies.forEach(body => this.world.destroyBody(body));\n        this.bodies.clear();\n        this.debugRenderer = undefined;\n    }\n}\nexports.PhysicsWorld = PhysicsWorld;\n\n\n/***/ }),\n\n/***/ \"./src/library/resize-handler.ts\":\n/*!***************************************!*\\\n  !*** ./src/library/resize-handler.ts ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createResizeHandler = createResizeHandler;\nexports.setupResponsiveCanvas = setupResponsiveCanvas;\nconst DEFAULT_ROOT_STYLES = {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    overflow: 'hidden'\n};\nconst PIXEL_ART_CANVAS_STYLES = {\n    imageRendering: 'pixelated'\n};\nfunction createResizeHandler(options) {\n    const { rootElement, width, height, rootStyles = DEFAULT_ROOT_STYLES, canvasStyles = {}, pixelArtMode = false } = options;\n    Object.entries(rootStyles).forEach(([key, value]) => {\n        rootElement.style.setProperty(key, value);\n    });\n    const finalCanvasStyles = pixelArtMode\n        ? { ...PIXEL_ART_CANVAS_STYLES, ...canvasStyles }\n        : canvasStyles;\n    return () => {\n        const parentWidth = rootElement.clientWidth;\n        const parentHeight = rootElement.clientHeight;\n        const ratio = Math.min(parentWidth / width, parentHeight / height);\n        if (rootElement.firstElementChild instanceof HTMLCanvasElement) {\n            const canvas = rootElement.firstElementChild;\n            canvas.style.width = `${Math.round(width * ratio)}px`;\n            canvas.style.height = `${Math.round(height * ratio)}px`;\n            canvas.style.display = 'block';\n            Object.entries(finalCanvasStyles).forEach(([key, value]) => {\n                canvas.style.setProperty(key, value);\n            });\n        }\n    };\n}\nfunction setupResponsiveCanvas(options) {\n    const resizeHandler = createResizeHandler(options);\n    resizeHandler();\n    window.addEventListener('resize', resizeHandler);\n    return () => {\n        window.removeEventListener('resize', resizeHandler);\n    };\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/setup.ts\":\n/*!******************************!*\\\n  !*** ./src/library/setup.ts ***!\n  \\******************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.defaultRenderOptions = void 0;\nexports.setupMoxi = setupMoxi;\nconst asset_loader_1 = __webpack_require__(/*! ../main/asset-loader */ \"./src/main/asset-loader.ts\");\nconst camera_1 = __webpack_require__(/*! ../main/camera */ \"./src/main/camera.ts\");\nconst engine_1 = __webpack_require__(/*! ../main/engine */ \"./src/main/engine.ts\");\nconst render_manager_1 = __webpack_require__(/*! ../main/render-manager */ \"./src/main/render-manager.ts\");\nconst scene_1 = __webpack_require__(/*! ../main/scene */ \"./src/main/scene.ts\");\nconst physics_1 = __webpack_require__(/*! ./physics */ \"./src/library/physics/index.ts\");\nconst loading_scene_1 = __webpack_require__(/*! ./loading-scene */ \"./src/library/loading-scene.ts\");\nexports.defaultRenderOptions = {\n    width: 1280,\n    height: 720,\n    backgroundColor: 0x1099bb,\n    resolution: window.devicePixelRatio || 1,\n    autoDensity: true,\n    antialias: true\n};\nasync function setupMoxi({ hostElement, renderOptions = exports.defaultRenderOptions, backgroundColor, physics, showLoadingScene = false, loadingSceneOptions = {}, pixelPerfect } = {}) {\n    let finalRenderOptions = { ...renderOptions };\n    let applyImageRendering = false;\n    if (pixelPerfect) {\n        const ppOptions = typeof pixelPerfect === 'boolean'\n            ? { enabled: true, imageRendering: true }\n            : pixelPerfect;\n        if (ppOptions.enabled !== false) {\n            finalRenderOptions = {\n                ...finalRenderOptions,\n                resolution: 1,\n                antialias: false,\n                roundPixels: true\n            };\n        }\n        applyImageRendering = ppOptions.imageRendering !== false;\n    }\n    const { renderer } = await render_manager_1.RenderManager.create(hostElement, finalRenderOptions);\n    if (backgroundColor !== undefined) {\n        renderer.background.color = backgroundColor;\n    }\n    if (applyImageRendering) {\n        const canvas = renderer.canvas;\n        canvas.style.imageRendering = 'pixelated';\n        canvas.style.imageRendering = '-moz-crisp-edges';\n        canvas.style.imageRendering = 'crisp-edges';\n    }\n    const scene = new scene_1.Scene(renderer);\n    const engine = new engine_1.Engine(scene);\n    const assetLoader = new asset_loader_1.AssetLoader();\n    const { PIXIAssets, loadAssets } = assetLoader;\n    const camera = new camera_1.Camera(scene, renderer);\n    let physicsWorld;\n    if (physics) {\n        const physicsOptions = typeof physics === 'boolean'\n            ? {}\n            : physics;\n        physicsWorld = new physics_1.PhysicsWorld(physicsOptions);\n        engine.addPhysicsWorld(physicsWorld);\n    }\n    let loadingScene;\n    if (showLoadingScene) {\n        loadingScene = new loading_scene_1.LoadingScene(loadingSceneOptions);\n        loadingScene.zIndex = 10000;\n        loadingScene.init(renderer);\n        scene.addChild(loadingScene);\n        loadingScene.hide();\n        assetLoader.on('loading:start', () => {\n            if (loadingScene) {\n                loadingScene.show();\n            }\n        });\n        assetLoader.on('loading:end', () => {\n            if (loadingScene) {\n                loadingScene.hide();\n            }\n        });\n    }\n    return {\n        scene,\n        engine,\n        PIXIAssets,\n        renderer,\n        loadAssets,\n        camera,\n        physicsWorld,\n        loadingScene\n    };\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/state-logic.ts\":\n/*!************************************!*\\\n  !*** ./src/library/state-logic.ts ***!\n  \\************************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StateLogic = void 0;\nconst logic_1 = __webpack_require__(/*! ../main/logic */ \"./src/main/logic.ts\");\nclass StateLogic extends logic_1.Logic {\n    _entity;\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    get entity() {\n        return this._entity;\n    }\n    init(entity, renderer) {\n        this._entity = entity;\n        super.init(entity, renderer);\n    }\n    onEnter(state) {\n    }\n    onExit(state) {\n    }\n    update(entity, deltaTime) {\n    }\n}\nexports.StateLogic = StateLogic;\n\n\n/***/ }),\n\n/***/ \"./src/library/state-machine.ts\":\n/*!**************************************!*\\\n  !*** ./src/library/state-machine.ts ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StateMachine = void 0;\nclass StateMachine extends EventTarget {\n    _states = {};\n    _currentState = null;\n    _currentStateName = null;\n    constructor(states = {}) {\n        super();\n        this._states = states;\n    }\n    update(deltaTime) {\n        if (this._currentState) {\n            this._currentState.update(this._currentState.entity, deltaTime);\n        }\n    }\n    setState(stateName) {\n        const nextState = this._states[stateName];\n        if (!nextState)\n            return;\n        const prevStateName = this._currentStateName;\n        if (this._currentState) {\n            this._currentState.onExit(stateName);\n        }\n        this._currentState = this._states[stateName];\n        this._currentStateName = stateName;\n        this._currentState.onEnter(stateName);\n        const event = new CustomEvent('stateChange', {\n            detail: {\n                prevState: prevStateName,\n                newState: stateName\n            }\n        });\n        this.dispatchEvent(event);\n    }\n    addState(state) {\n        this._states[state.name] = state;\n    }\n    get currentState() {\n        return this._currentStateName;\n    }\n}\nexports.StateMachine = StateMachine;\n\n\n/***/ }),\n\n/***/ \"./src/library/svg-utils/svg-to-texture.ts\":\n/*!*************************************************!*\\\n  !*** ./src/library/svg-utils/svg-to-texture.ts ***!\n  \\*************************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.svgToTexture = svgToTexture;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nasync function svgToTexture(options) {\n    const { svgString, width, height, color = 0x000000 } = options;\n    const colorHex = '#' + color.toString(16).padStart(6, '0');\n    const processedSVG = svgString.replace(/currentColor/g, colorHex);\n    const blob = new Blob([processedSVG], { type: 'image/svg+xml' });\n    const url = URL.createObjectURL(blob);\n    const img = new Image();\n    img.width = width;\n    img.height = height;\n    await new Promise((resolve, reject) => {\n        img.onload = () => resolve();\n        img.onerror = reject;\n        img.src = url;\n    });\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n        URL.revokeObjectURL(url);\n        throw new Error('Failed to get canvas context');\n    }\n    ctx.drawImage(img, 0, 0, width, height);\n    URL.revokeObjectURL(url);\n    const texture = PIXI.Texture.from(canvas);\n    texture.source.scaleMode = 'linear';\n    return texture;\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/texture-frame-sequences.ts\":\n/*!************************************************!*\\\n  !*** ./src/library/texture-frame-sequences.ts ***!\n  \\************************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TextureFrameSequences = void 0;\nclass TextureFrameSequences {\n    frames = [];\n    sequences = {};\n    constructor(frames, sequences = {}) {\n        this.frames = frames;\n        this.sequences = sequences;\n    }\n    addSequence(name, frameIndices, animationSpeed = 1) {\n        this.sequences[name] = {\n            frames: frameIndices,\n            animationSpeed\n        };\n    }\n    getSequence(name) {\n        return this.sequences[name] || null;\n    }\n    getFrame(index) {\n        return this.frames[index] || null;\n    }\n    getFrameFromSequence(sequenceName, frameIndex) {\n        const sequence = this.getSequence(sequenceName);\n        if (!sequence)\n            return null;\n        const sequenceFrameIndex = sequence.frames[frameIndex % sequence.frames.length];\n        return this.frames[sequenceFrameIndex] || null;\n    }\n    getFrameSequence(name) {\n        const sequence = this.getSequence(name);\n        if (!sequence)\n            return [];\n        return sequence.frames.map(index => this.frames[index]).filter(Boolean);\n    }\n}\nexports.TextureFrameSequences = TextureFrameSequences;\n\n\n/***/ }),\n\n/***/ \"./src/library/texture-frames.ts\":\n/*!***************************************!*\\\n  !*** ./src/library/texture-frames.ts ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.asTextureFrames = asTextureFrames;\nconst defaultOptions = {\n    frameWidth: 48,\n    frameHeight: 48,\n    columns: 4,\n    rows: 4\n};\nfunction asTextureFrames(PIXI, textureSource, options = defaultOptions) {\n    const { frameWidth, frameHeight, columns, rows } = options;\n    const frames = [];\n    if (!textureSource) {\n        console.error('Invalid texture source provided to asTextureFrames');\n        return frames;\n    }\n    for (let y = 0; y < rows; y++) {\n        for (let x = 0; x < columns; x++) {\n            const frame = new PIXI.Rectangle(x * frameWidth, y * frameHeight, frameWidth, frameHeight);\n            const frametexture = new PIXI.Texture({\n                source: textureSource,\n                frame: frame,\n            });\n            frames.push(frametexture);\n        }\n    }\n    return frames;\n}\n\n\n/***/ }),\n\n/***/ \"./src/library/utils.ts\":\n/*!******************************!*\\\n  !*** ./src/library/utils.ts ***!\n  \\******************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.deg2rad = exports.rad2deg = exports.fetchXml = exports.lerp = exports.roundTo = exports.getRandomInt = exports.pr = exports.padRight = exports.lc = exports.uc = exports.ONE_POINT = exports.ZERO_POINT = exports.createPoint = void 0;\nexports.metersToPixels = metersToPixels;\nexports.pixelsToMeters = pixelsToMeters;\nconst pixi_js_1 = __webpack_require__(/*! pixi.js */ \"pixi.js\");\nconst createPoint = (x = 0, y = 0) => new pixi_js_1.Point(x, y);\nexports.createPoint = createPoint;\nconst ZERO_POINT = () => new pixi_js_1.Point(0, 0);\nexports.ZERO_POINT = ZERO_POINT;\nconst ONE_POINT = () => new pixi_js_1.Point(1, 1);\nexports.ONE_POINT = ONE_POINT;\nconst uc = (s = '') => s.toUpperCase();\nexports.uc = uc;\nconst lc = (s = '') => s.toLowerCase();\nexports.lc = lc;\nconst padRight = (val = '', length = 0, padWith = ' ') => {\n    let result = val + '';\n    while (result.length < length) {\n        result += padWith;\n    }\n    return result;\n};\nexports.padRight = padRight;\nexports.pr = exports.padRight;\nconst getRandomInt = (min, max) => (Math.floor(Math.random() * (max + 1 - min)) + min);\nexports.getRandomInt = getRandomInt;\nconst roundTo = (places, value) => (Math.round(value * Math.pow(10, places)) / Math.pow(10, places));\nexports.roundTo = roundTo;\nconst lerp = (begin, end, mag) => ((1 - mag) * begin + mag * end);\nexports.lerp = lerp;\nfunction metersToPixels(m) { return m * 20; }\nfunction pixelsToMeters(p) { return p * 0.05; }\nconst fetchXml = async (url) => (await (await fetch(url)).text());\nexports.fetchXml = fetchXml;\nconst rad2deg = (rad) => rad * (180 / Math.PI);\nexports.rad2deg = rad2deg;\nconst deg2rad = (deg) => deg * (Math.PI / 180);\nexports.deg2rad = deg2rad;\n\n\n/***/ }),\n\n/***/ \"./src/main/asset-loader.ts\":\n/*!**********************************!*\\\n  !*** ./src/main/asset-loader.ts ***!\n  \\**********************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AssetLoader = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst event_system_1 = __webpack_require__(/*! ./event-system */ \"./src/main/event-system.ts\");\nclass AssetLoader {\n    PIXIAssets = pixi_js_1.default.Assets;\n    textures = [];\n    isLoading = false;\n    events = new event_system_1.EventEmitter();\n    on(event, listener) {\n        this.events.on(event, listener);\n    }\n    off(event, listener) {\n        this.events.off(event, listener);\n    }\n    loadAssets = async (assets) => {\n        const { PIXIAssets } = this;\n        const failedAssets = [];\n        this.isLoading = true;\n        this.events.emit('loading:start');\n        try {\n            for (let i = 0; i < assets.length; i++) {\n                const { src, alias } = assets[i];\n                try {\n                    if (alias) {\n                        if (!PIXIAssets.cache.has(alias)) {\n                            const texture = await PIXIAssets.load({ alias, src });\n                            this.textures.push(texture);\n                        }\n                    }\n                    else {\n                        const texture = await PIXIAssets.load(src);\n                        this.textures.push(texture);\n                    }\n                }\n                catch (error) {\n                    console.error(`Failed to load asset: ${src}`, error);\n                    failedAssets.push(src);\n                }\n            }\n            if (failedAssets.length > 0) {\n                console.warn(`${failedAssets.length} asset(s) failed to load:`, failedAssets);\n            }\n            return this;\n        }\n        finally {\n            this.isLoading = false;\n            this.events.emit('loading:end');\n        }\n    };\n}\nexports.AssetLoader = AssetLoader;\n\n\n/***/ }),\n\n/***/ \"./src/main/camera.ts\":\n/*!****************************!*\\\n  !*** ./src/main/camera.ts ***!\n  \\****************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Camera = exports.CameraLogic = void 0;\nconst pixi_js_1 = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst logic_1 = __webpack_require__(/*! ./logic */ \"./src/main/logic.ts\");\nconst moxi_entity_1 = __webpack_require__(/*! ./moxi-entity */ \"./src/main/moxi-entity.ts\");\nconst utils_1 = __webpack_require__(/*! ../library/utils */ \"./src/library/utils.ts\");\nclass CameraLogic extends logic_1.Logic {\n    name = 'CameraLogic';\n    speed = 0.1;\n    target = null;\n    entity;\n    renderer;\n    init(entity, renderer) {\n        this.entity = entity;\n        this.renderer = renderer;\n    }\n    update(entity, deltaTime) {\n        const { speed } = this;\n        const deltaSpeed = Math.min(deltaTime * speed, 1);\n        const isZooming = Math.abs(entity.scale.x - entity.desiredScale.x) > 0.01 ||\n            Math.abs(entity.scale.y - entity.desiredScale.y) > 0.01;\n        if (entity.desiredScale !== entity.scale) {\n            entity.scale.x = (0, utils_1.lerp)(entity.scale.x, entity.desiredScale.x, deltaSpeed);\n            entity.scale.y = (0, utils_1.lerp)(entity.scale.y, entity.desiredScale.y, deltaSpeed);\n        }\n        if (this.target) {\n            const screenCenterX = this.renderer.width / 2;\n            const screenCenterY = this.renderer.height / 2;\n            const desiredX = -(this.target.position.x * entity.scale.x) + screenCenterX;\n            const desiredY = -(this.target.position.y * entity.scale.y) + screenCenterY;\n            entity.desiredPosition.set(-desiredX, -desiredY);\n        }\n        if (entity.desiredPosition !== entity.position) {\n            if (isZooming) {\n                entity.position.copyFrom(entity.desiredPosition);\n            }\n            else {\n                entity.position.x = (0, utils_1.lerp)(entity.position.x, entity.desiredPosition.x, deltaSpeed);\n                entity.position.y = (0, utils_1.lerp)(entity.position.y, entity.desiredPosition.y, deltaSpeed);\n            }\n        }\n        entity.scene.scale.set(entity.scale.x, entity.scale.y);\n        entity.scene.position.set(-entity.position.x, -entity.position.y);\n    }\n}\nexports.CameraLogic = CameraLogic;\nclass Camera extends pixi_js_1.default.Container {\n    scene;\n    renderer;\n    speed = 0.1;\n    moxiEntity;\n    desiredScale = new pixi_js_1.Point(1, 1);\n    desiredPosition = new pixi_js_1.Point(0, 0);\n    constructor(scene, renderer, logic = {}) {\n        super();\n        this.scene = scene;\n        this.renderer = renderer;\n        const cameraLogic = new CameraLogic();\n        cameraLogic.init(this, renderer);\n        this.moxiEntity = new moxi_entity_1.MoxiEntity(this, logic);\n        this.moxiEntity.addLogic(cameraLogic);\n        this.scene.addChild(this);\n    }\n}\nexports.Camera = Camera;\n\n\n/***/ }),\n\n/***/ \"./src/main/engine.ts\":\n/*!****************************!*\\\n  !*** ./src/main/engine.ts ***!\n  \\****************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Engine = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nclass Engine {\n    ticker;\n    root;\n    physicsWorld;\n    logger;\n    loggerFrequencyMs;\n    nextLogTime;\n    constructor(stage = null) {\n        this.root = stage;\n        const ticker = pixi_js_1.default.Ticker.shared;\n        ticker.autoStart = false;\n        ticker.add(this.gameLoop);\n        this.ticker = ticker;\n        this.loggerFrequencyMs = 500;\n        this.nextLogTime = 0;\n        this.logger = (msg) => null;\n    }\n    start() {\n        this.ticker.start();\n        return this;\n    }\n    stop() {\n        this.ticker.stop();\n        return this;\n    }\n    addPhysicsWorld(physicsWorld) {\n        this.physicsWorld = physicsWorld;\n        return this;\n    }\n    gameLoop = (tikerTime) => {\n        if (this.root) {\n            const { deltaTime, deltaMS } = tikerTime;\n            if (this.physicsWorld) {\n                const deltaSeconds = deltaMS / 1000;\n                this.physicsWorld.step(deltaSeconds);\n            }\n            this.root.update(deltaTime);\n            this.root.draw(deltaTime);\n        }\n    };\n    loadStage(stage) {\n        this.root = stage;\n        return this;\n    }\n}\nexports.Engine = Engine;\n\n\n/***/ }),\n\n/***/ \"./src/main/event-system.ts\":\n/*!**********************************!*\\\n  !*** ./src/main/event-system.ts ***!\n  \\**********************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EventEmitter = void 0;\nclass EventEmitter {\n    listeners = {};\n    static instance = null;\n    on(event, listener) {\n        (this.listeners[event] || (this.listeners[event] = [])).push(listener);\n    }\n    off(event, listener) {\n        const eventListeners = this.listeners[event];\n        if (eventListeners) {\n            this.listeners[event] = eventListeners.filter(l => l !== listener);\n        }\n    }\n    emit(event, ...args) {\n        (this.listeners[event] || []).forEach(listener => listener(...args));\n    }\n    once(event, listener) {\n        const onceListener = (...args) => {\n            listener(...args);\n            this.off(event, listener);\n        };\n        this.on(event, onceListener);\n    }\n    static getInstance() {\n        if (!EventEmitter.instance) {\n            EventEmitter.instance = new EventEmitter();\n        }\n        return EventEmitter.instance;\n    }\n}\nexports.EventEmitter = EventEmitter;\n\n\n/***/ }),\n\n/***/ \"./src/main/logic.ts\":\n/*!***************************!*\\\n  !*** ./src/main/logic.ts ***!\n  \\***************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.InstancedLogic = exports.Logic = void 0;\nclass Logic {\n    name;\n    active = true;\n    init(entity, renderer, ...args) { }\n    update(entity, deltaTime) { }\n}\nexports.Logic = Logic;\nclass InstancedLogic extends Logic {\n}\nexports.InstancedLogic = InstancedLogic;\n\n\n/***/ }),\n\n/***/ \"./src/main/moxi-entity.ts\":\n/*!*********************************!*\\\n  !*** ./src/main/moxi-entity.ts ***!\n  \\*********************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.MoxiEntity = void 0;\nexports.asEntity = asEntity;\nclass MoxiEntity {\n    logic = {};\n    entity;\n    constructor(entity, logic = {}) {\n        this.logic = logic;\n        this.entity = entity;\n    }\n    update(deltaTime) {\n        if (!this.entity)\n            return;\n        for (const className in this.logic) {\n            const logicComponent = this.logic[className];\n            if (logicComponent && logicComponent.active && logicComponent.update) {\n                logicComponent.update(this.entity, deltaTime);\n            }\n        }\n    }\n    init(renderer, ...args) {\n        if (!this.entity)\n            return;\n        for (const className in this.logic) {\n            const logicComponent = this.logic[className];\n            if (logicComponent && logicComponent.init) {\n                logicComponent.init(this.entity, renderer, ...args);\n            }\n        }\n    }\n    addLogic(logic) {\n        const logicName = logic.name || logic.constructor.name;\n        this.logic[logicName] = logic;\n    }\n    getLogic(name) {\n        return this.logic[name];\n    }\n}\nexports.MoxiEntity = MoxiEntity;\nfunction asEntity(entity, logic = {}) {\n    const target = entity;\n    target.isInteractive = () => false;\n    target.moxiEntity = new MoxiEntity(target, logic);\n    return entity;\n}\n\n\n/***/ }),\n\n/***/ \"./src/main/render-manager.ts\":\n/*!************************************!*\\\n  !*** ./src/main/render-manager.ts ***!\n  \\************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.RenderManager = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nclass RenderManager {\n    static getRenderer;\n    static create;\n    htmlRoot;\n    renderer;\n    fitToWindow = false;\n    constructor(htmlRoot, renderer) {\n        this.htmlRoot = htmlRoot;\n        this.renderer = renderer;\n        htmlRoot.appendChild(this.renderer.canvas);\n        window.addEventListener('resize', () => this.onResize());\n        this.onResize();\n    }\n    render(stage) {\n        this.renderer.render(stage);\n    }\n    onResize = () => {\n        const { renderer, htmlRoot: root } = this;\n        const canvas = renderer.canvas;\n        const parentWidth = root.clientWidth;\n        const parentHeight = root.clientHeight;\n        const canvasWidth = renderer.width;\n        const canvasHeight = renderer.height;\n        const scale = Math.min(parentWidth / canvasWidth, parentHeight / canvasHeight);\n        canvas.style.width = `${Math.floor(canvasWidth * scale)}px`;\n        canvas.style.height = `${Math.floor(canvasHeight * scale)}px`;\n    };\n}\nexports.RenderManager = RenderManager;\nRenderManager.getRenderer = async (options) => (await pixi_js_1.default.autoDetectRenderer(options));\nRenderManager.create = async (htmlRoot, options) => (new RenderManager(htmlRoot, await RenderManager.getRenderer(options)));\n\n\n/***/ }),\n\n/***/ \"./src/main/scene.ts\":\n/*!***************************!*\\\n  !*** ./src/main/scene.ts ***!\n  \\***************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Scene = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nfunction isMoxiEntity(entity) {\n    return entity != null && typeof entity === 'object' && 'moxiEntity' in entity;\n}\nclass Scene extends pixi_js_1.default.Container {\n    renderer;\n    constructor(renderer) {\n        super();\n        this.renderer = renderer;\n    }\n    init() {\n        this.children.forEach((child) => {\n            if (isMoxiEntity(child)) {\n                child.moxiEntity.init(this.renderer);\n            }\n        });\n    }\n    update(deltaTime) {\n        this.children.forEach((child) => {\n            if (isMoxiEntity(child)) {\n                child.moxiEntity.update(deltaTime);\n            }\n        });\n    }\n    draw(deltaTime) {\n        this.renderer.render(this);\n    }\n}\nexports.Scene = Scene;\n\n\n/***/ }),\n\n/***/ \"./src/ui/UILayer.ts\":\n/*!***************************!*\\\n  !*** ./src/ui/UILayer.ts ***!\n  \\***************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UILayer = void 0;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst UIScaleMode_1 = __webpack_require__(/*! ./UIScaleMode */ \"./src/ui/UIScaleMode.ts\");\nclass UILayer extends PIXI.Container {\n    scaleMode;\n    targetWidth;\n    targetHeight;\n    initialBoundsRecorded = false;\n    constructor(options = {}) {\n        super();\n        this.scaleMode = options.scaleMode ?? UIScaleMode_1.UIScaleMode.None;\n        this.targetWidth = options.targetWidth;\n        this.targetHeight = options.targetHeight;\n    }\n    updateScale(canvasWidth, canvasHeight) {\n        if (this.scaleMode === UIScaleMode_1.UIScaleMode.None) {\n            this.scale.set(1, 1);\n            return;\n        }\n        if (!this.initialBoundsRecorded && this.children.length > 0) {\n            if (!this.targetWidth || !this.targetHeight) {\n                const bounds = this.getLocalBounds();\n                this.targetWidth = this.targetWidth ?? bounds.width;\n                this.targetHeight = this.targetHeight ?? bounds.height;\n            }\n            this.initialBoundsRecorded = true;\n        }\n        if (!this.targetWidth || !this.targetHeight) {\n            return;\n        }\n        const scaleX = canvasWidth / this.targetWidth;\n        const scaleY = canvasHeight / this.targetHeight;\n        switch (this.scaleMode) {\n            case UIScaleMode_1.UIScaleMode.ScaleUI:\n                this.scale.set(scaleX, scaleY);\n                break;\n            case UIScaleMode_1.UIScaleMode.LockRatio:\n                const scale = Math.min(scaleX, scaleY);\n                this.scale.set(scale, scale);\n                this.position.set((canvasWidth - this.targetWidth * scale) / 2, (canvasHeight - this.targetHeight * scale) / 2);\n                break;\n        }\n    }\n    addChild(...children) {\n        const result = super.addChild(...children);\n        this.initialBoundsRecorded = false;\n        return result;\n    }\n}\nexports.UILayer = UILayer;\n\n\n/***/ }),\n\n/***/ \"./src/ui/UIScaleMode.ts\":\n/*!*******************************!*\\\n  !*** ./src/ui/UIScaleMode.ts ***!\n  \\*******************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UIScaleMode = void 0;\nvar UIScaleMode;\n(function (UIScaleMode) {\n    UIScaleMode[\"None\"] = \"none\";\n    UIScaleMode[\"ScaleUI\"] = \"scaleUI\";\n    UIScaleMode[\"LockRatio\"] = \"lockRatio\";\n})(UIScaleMode || (exports.UIScaleMode = UIScaleMode = {}));\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/button-background-strategy.ts\":\n/*!*********************************************************!*\\\n  !*** ./src/ui/components/button-background-strategy.ts ***!\n  \\*********************************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.SpriteBackgroundStrategy = exports.SolidColorBackgroundStrategy = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_button_1 = __webpack_require__(/*! ./ui-button */ \"./src/ui/components/ui-button.ts\");\nconst ui_panel_1 = __webpack_require__(/*! ./ui-panel */ \"./src/ui/components/ui-panel.ts\");\nclass SolidColorBackgroundStrategy {\n    panel;\n    normalColor;\n    hoverColor;\n    pressedColor;\n    disabledColor;\n    width;\n    height;\n    borderRadius;\n    constructor(backgroundColor, width, height, borderRadius) {\n        this.normalColor = backgroundColor;\n        this.hoverColor = this.darkenColor(backgroundColor, 0.9);\n        this.pressedColor = this.darkenColor(backgroundColor, 0.8);\n        this.disabledColor = 0x888888;\n        this.width = width;\n        this.height = height;\n        this.borderRadius = borderRadius;\n    }\n    create(width, height) {\n        this.panel = new ui_panel_1.UIPanel({\n            backgroundColor: this.normalColor,\n            width,\n            height,\n            borderRadius: this.borderRadius\n        });\n        this.panel.layout(width, height);\n        return this.panel.container;\n    }\n    updateState(state) {\n        if (!this.panel)\n            return;\n        let color;\n        switch (state) {\n            case ui_button_1.ButtonState.Normal:\n                color = this.normalColor;\n                break;\n            case ui_button_1.ButtonState.Hover:\n                color = this.hoverColor;\n                break;\n            case ui_button_1.ButtonState.Pressed:\n                color = this.pressedColor;\n                break;\n            case ui_button_1.ButtonState.Disabled:\n                color = this.disabledColor;\n                break;\n        }\n        this.panel.setBackgroundColor(color);\n    }\n    getActualHeight() {\n        return this.height;\n    }\n    destroy() {\n    }\n    darkenColor(color, factor) {\n        const r = ((color >> 16) & 0xff) * factor;\n        const g = ((color >> 8) & 0xff) * factor;\n        const b = (color & 0xff) * factor;\n        return ((r << 16) | (g << 8) | b) >>> 0;\n    }\n}\nexports.SolidColorBackgroundStrategy = SolidColorBackgroundStrategy;\nclass SpriteBackgroundStrategy {\n    container;\n    spriteLeft;\n    spriteMid;\n    spriteRight;\n    nineSliceSprite;\n    nineSliceSpritePressed;\n    iconSprite;\n    config;\n    width;\n    height;\n    constructor(config, width, height) {\n        this.config = config;\n        this.width = width;\n        this.height = height;\n    }\n    create(width, height) {\n        this.container = new pixi_js_1.default.Container();\n        const { spritesheet, texturePattern, color, pixelPerfect, useNineSlice, nineSliceBorders, pressedTexturePattern, icon } = this.config;\n        if (pixelPerfect && spritesheet.textureSource) {\n            spritesheet.textureSource.scaleMode = 'nearest';\n        }\n        if (useNineSlice && nineSliceBorders) {\n            const textureName = texturePattern.includes('{color}')\n                ? texturePattern.replace('{color}', color)\n                : texturePattern;\n            const texture = spritesheet.textures[textureName];\n            this.nineSliceSprite = new pixi_js_1.default.NineSliceSprite({\n                texture,\n                leftWidth: nineSliceBorders.left,\n                topHeight: nineSliceBorders.top,\n                rightWidth: nineSliceBorders.right,\n                bottomHeight: nineSliceBorders.bottom,\n                width,\n                height\n            });\n            this.container.addChild(this.nineSliceSprite);\n            if (pressedTexturePattern) {\n                const pressedTextureName = pressedTexturePattern.includes('{color}')\n                    ? pressedTexturePattern.replace('{color}', color)\n                    : pressedTexturePattern;\n                const pressedTexture = spritesheet.textures[pressedTextureName];\n                this.nineSliceSpritePressed = new pixi_js_1.default.NineSliceSprite({\n                    texture: pressedTexture,\n                    leftWidth: nineSliceBorders.left,\n                    topHeight: nineSliceBorders.top,\n                    rightWidth: nineSliceBorders.right,\n                    bottomHeight: nineSliceBorders.bottom,\n                    width,\n                    height\n                });\n                this.nineSliceSpritePressed.y = 4;\n                this.nineSliceSpritePressed.visible = false;\n                this.container.addChild(this.nineSliceSpritePressed);\n            }\n        }\n        else {\n            const leftTextureName = this.getTextureName(texturePattern, color, 'left');\n            const midTextureName = this.getTextureName(texturePattern, color, 'mid');\n            const rightTextureName = this.getTextureName(texturePattern, color, 'right');\n            this.spriteLeft = new pixi_js_1.default.Sprite(spritesheet.textures[leftTextureName]);\n            this.spriteMid = new pixi_js_1.default.Sprite(spritesheet.textures[midTextureName]);\n            this.spriteRight = new pixi_js_1.default.Sprite(spritesheet.textures[rightTextureName]);\n            const scaleY = height / this.spriteLeft.height;\n            this.spriteLeft.scale.y = scaleY;\n            this.spriteMid.scale.y = scaleY;\n            this.spriteRight.scale.y = scaleY;\n            this.spriteLeft.x = 0;\n            const middleWidth = width - this.spriteLeft.width - this.spriteRight.width;\n            this.spriteMid.width = middleWidth;\n            this.spriteMid.x = this.spriteLeft.width;\n            this.spriteRight.x = this.spriteLeft.width + middleWidth;\n            this.container.addChild(this.spriteLeft);\n            this.container.addChild(this.spriteMid);\n            this.container.addChild(this.spriteRight);\n        }\n        if (icon) {\n            const iconTexture = icon.spritesheet.textures[icon.textureName];\n            this.iconSprite = new pixi_js_1.default.Sprite(iconTexture);\n            if (icon.pixelPerfect && icon.spritesheet.textureSource) {\n                icon.spritesheet.textureSource.scaleMode = 'nearest';\n            }\n            if (icon.scale) {\n                this.iconSprite.scale.set(icon.scale);\n            }\n            this.iconSprite.anchor.set(0.5);\n            this.iconSprite.x = width / 2;\n            this.iconSprite.y = height / 2;\n            this.container.addChild(this.iconSprite);\n        }\n        return this.container;\n    }\n    updateState(state) {\n        if (this.nineSliceSprite && this.nineSliceSpritePressed) {\n            const isPressed = state === ui_button_1.ButtonState.Pressed;\n            this.nineSliceSprite.visible = !isPressed;\n            this.nineSliceSpritePressed.visible = isPressed;\n            if (this.iconSprite) {\n                this.iconSprite.y = (this.height / 2) + (isPressed ? 4 : 0);\n            }\n        }\n        else {\n            let tint;\n            switch (state) {\n                case ui_button_1.ButtonState.Normal:\n                    tint = 0xffffff;\n                    break;\n                case ui_button_1.ButtonState.Hover:\n                    tint = 0xcccccc;\n                    break;\n                case ui_button_1.ButtonState.Pressed:\n                    tint = 0x999999;\n                    break;\n                case ui_button_1.ButtonState.Disabled:\n                    tint = 0x888888;\n                    break;\n            }\n            if (this.nineSliceSprite) {\n                this.nineSliceSprite.tint = tint;\n            }\n            else if (this.spriteLeft && this.spriteMid && this.spriteRight) {\n                this.spriteLeft.tint = tint;\n                this.spriteMid.tint = tint;\n                this.spriteRight.tint = tint;\n            }\n        }\n    }\n    getActualHeight() {\n        if (this.nineSliceSprite) {\n            return this.nineSliceSprite.height;\n        }\n        return this.spriteLeft?.height ?? this.height;\n    }\n    destroy() {\n        this.container?.destroy({ children: true });\n    }\n    getTextureName(pattern, color, part) {\n        let name = pattern.replace('{color}', color);\n        name = name.replace(/_(?:left|mid|right)\\.png$/, `_${part}.png`);\n        return name;\n    }\n}\nexports.SpriteBackgroundStrategy = SpriteBackgroundStrategy;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-box.ts\":\n/*!*************************************!*\\\n  !*** ./src/ui/components/ui-box.ts ***!\n  \\*************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UIBox = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nclass UIBox extends ui_component_1.UIComponent {\n    props;\n    graphics;\n    constructor(props = {}, boxModel) {\n        super(boxModel);\n        this.props = {\n            backgroundColor: 0x000000,\n            backgroundAlpha: 1,\n            borderWidth: 0,\n            borderRadius: 0,\n            ...props\n        };\n        this.graphics = new pixi_js_1.default.Graphics();\n        this.container.addChild(this.graphics);\n        if (props.width !== undefined) {\n            this.boxModel.width = props.width;\n        }\n        if (props.height !== undefined) {\n            this.boxModel.height = props.height;\n        }\n    }\n    measure() {\n        const padding = this.boxModel.padding;\n        const border = this.boxModel.border;\n        let contentWidth = 0;\n        let contentHeight = 0;\n        if (typeof this.boxModel.width === 'number') {\n            contentWidth = this.boxModel.width;\n        }\n        else if (this.props.width !== undefined) {\n            contentWidth = this.props.width;\n        }\n        if (typeof this.boxModel.height === 'number') {\n            contentHeight = this.boxModel.height;\n        }\n        else if (this.props.height !== undefined) {\n            contentHeight = this.props.height;\n        }\n        const totalWidth = contentWidth + padding.horizontal + (border?.horizontal ?? 0);\n        const totalHeight = contentHeight + padding.vertical + (border?.vertical ?? 0);\n        return {\n            width: Math.max(totalWidth, this.boxModel.minWidth ?? 0),\n            height: Math.max(totalHeight, this.boxModel.minHeight ?? 0)\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const measured = this.measure();\n        const padding = this.boxModel.padding;\n        const border = this.boxModel.border ?? { horizontal: 0, vertical: 0, top: 0, right: 0, bottom: 0, left: 0 };\n        let finalWidth = measured.width;\n        let finalHeight = measured.height;\n        if (this.boxModel.width === 'fill') {\n            finalWidth = availableWidth;\n        }\n        if (this.boxModel.height === 'fill') {\n            finalHeight = availableHeight;\n        }\n        if (this.boxModel.maxWidth !== undefined) {\n            finalWidth = Math.min(finalWidth, this.boxModel.maxWidth);\n        }\n        if (this.boxModel.maxHeight !== undefined) {\n            finalHeight = Math.min(finalHeight, this.boxModel.maxHeight);\n        }\n        this.computedLayout.width = finalWidth;\n        this.computedLayout.height = finalHeight;\n        this.computedLayout.contentX = padding.left + border.left;\n        this.computedLayout.contentY = padding.top + border.top;\n        this.computedLayout.contentWidth = finalWidth - padding.horizontal - border.horizontal;\n        this.computedLayout.contentHeight = finalHeight - padding.vertical - border.vertical;\n        this.layoutDirty = false;\n        this.render();\n    }\n    render() {\n        this.graphics.clear();\n        const { width, height } = this.computedLayout;\n        const { backgroundColor, backgroundAlpha, borderColor, borderWidth, borderRadius } = this.props;\n        if (borderWidth && borderWidth > 0 && borderColor !== undefined) {\n            this.graphics.rect(0, 0, width, height);\n            this.graphics.stroke({ color: borderColor, width: borderWidth });\n        }\n        if (backgroundColor !== undefined) {\n            if (borderRadius && borderRadius > 0) {\n                this.graphics.roundRect(0, 0, width, height, borderRadius);\n            }\n            else {\n                this.graphics.rect(0, 0, width, height);\n            }\n            this.graphics.fill({ color: backgroundColor, alpha: backgroundAlpha });\n        }\n    }\n    setBackgroundColor(color, alpha = 1) {\n        this.props.backgroundColor = color;\n        this.props.backgroundAlpha = alpha;\n        this.render();\n    }\n    setBorder(color, width) {\n        this.props.borderColor = color;\n        this.props.borderWidth = width;\n        this.render();\n    }\n}\nexports.UIBox = UIBox;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-button.ts\":\n/*!****************************************!*\\\n  !*** ./src/ui/components/ui-button.ts ***!\n  \\****************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UIButton = exports.ButtonState = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nconst ui_label_1 = __webpack_require__(/*! ./ui-label */ \"./src/ui/components/ui-label.ts\");\nconst edge_insets_1 = __webpack_require__(/*! ../core/edge-insets */ \"./src/ui/core/edge-insets.ts\");\nconst ui_focus_manager_1 = __webpack_require__(/*! ../core/ui-focus-manager */ \"./src/ui/core/ui-focus-manager.ts\");\nconst button_background_strategy_1 = __webpack_require__(/*! ./button-background-strategy */ \"./src/ui/components/button-background-strategy.ts\");\nvar ButtonState;\n(function (ButtonState) {\n    ButtonState[\"Normal\"] = \"normal\";\n    ButtonState[\"Hover\"] = \"hover\";\n    ButtonState[\"Pressed\"] = \"pressed\";\n    ButtonState[\"Disabled\"] = \"disabled\";\n})(ButtonState || (exports.ButtonState = ButtonState = {}));\nclass UIButton extends ui_component_1.UIComponent {\n    props;\n    useBitmapText;\n    bitmapFontFamily;\n    onClick;\n    onHover;\n    state = ButtonState.Normal;\n    backgroundStrategy;\n    label;\n    bitmapLabel;\n    labelCenterX = 0;\n    labelCenterY = 0;\n    keydownHandler;\n    constructor(props = {}, boxModel) {\n        super(boxModel);\n        this.props = {\n            label: props.label ?? '',\n            width: props.width ?? 120,\n            height: props.height ?? 40,\n            backgroundColor: props.backgroundColor ?? 0x4a90e2,\n            textColor: props.textColor ?? 0xffffff,\n            fontSize: props.fontSize ?? 16,\n            borderRadius: props.borderRadius ?? 4,\n            padding: props.padding ?? edge_insets_1.EdgeInsets.symmetric(8, 16),\n            enabled: props.enabled ?? true\n        };\n        this.useBitmapText = props.useBitmapText ?? false;\n        this.bitmapFontFamily = props.bitmapFontFamily;\n        this.onClick = props.onClick;\n        this.onHover = props.onHover;\n        this.boxModel.width = this.props.width;\n        this.boxModel.height = this.props.height;\n        this.tabIndex = 0;\n        if (props.spriteBackground) {\n            this.backgroundStrategy = new button_background_strategy_1.SpriteBackgroundStrategy(props.spriteBackground, this.props.width, this.props.height);\n        }\n        else {\n            this.backgroundStrategy = new button_background_strategy_1.SolidColorBackgroundStrategy(this.props.backgroundColor, this.props.width, this.props.height, this.props.borderRadius);\n        }\n        const backgroundContainer = this.backgroundStrategy.create(this.props.width, this.props.height);\n        this.container.addChild(backgroundContainer);\n        if (this.props.label) {\n            if (this.useBitmapText && this.bitmapFontFamily) {\n                this.createBitmapLabel();\n            }\n            else {\n                this.label = new ui_label_1.UILabel({\n                    text: this.props.label,\n                    fontSize: this.props.fontSize,\n                    color: this.props.textColor,\n                    align: 'center'\n                }, {\n                    padding: edge_insets_1.EdgeInsets.zero()\n                });\n                this.container.addChild(this.label.container);\n            }\n        }\n        this.setupInteractivity();\n        if (!this.props.enabled) {\n            this.setState(ButtonState.Disabled);\n        }\n    }\n    createBitmapLabel() {\n        if (!this.bitmapFontFamily)\n            return;\n        this.bitmapLabel = new pixi_js_1.default.BitmapText({\n            text: this.props.label,\n            style: {\n                fontFamily: this.bitmapFontFamily,\n                fontSize: this.props.fontSize,\n                fill: this.props.textColor\n            }\n        });\n        this.container.addChild(this.bitmapLabel);\n    }\n    setupInteractivity() {\n        this.container.eventMode = 'static';\n        this.container.cursor = 'pointer';\n        this.container.on('pointerover', this.handlePointerOver.bind(this));\n        this.container.on('pointerout', this.handlePointerOut.bind(this));\n        this.container.on('pointerdown', this.handlePointerDown.bind(this));\n        this.container.on('pointerup', this.handlePointerUp.bind(this));\n        this.container.on('pointerupoutside', this.handlePointerUpOutside.bind(this));\n        if (typeof window !== 'undefined') {\n            this.keydownHandler = (e) => {\n                if (this.isFocused() && this.props.enabled) {\n                    if (e.key === 'Enter' || e.key === ' ') {\n                        e.preventDefault();\n                        this.setState(ButtonState.Pressed);\n                        this.onClick?.();\n                        setTimeout(() => {\n                            if (this.props.enabled) {\n                                this.setState(ButtonState.Normal);\n                            }\n                        }, 100);\n                    }\n                }\n            };\n            window.addEventListener('keydown', this.keydownHandler);\n        }\n    }\n    handlePointerOver() {\n        if (this.props.enabled && this.state === ButtonState.Normal) {\n            this.setState(ButtonState.Hover);\n            this.onHover?.();\n        }\n    }\n    handlePointerOut() {\n        if (this.props.enabled && this.state !== ButtonState.Pressed) {\n            this.setState(ButtonState.Normal);\n        }\n    }\n    handlePointerDown() {\n        if (this.props.enabled) {\n            this.setState(ButtonState.Pressed);\n            if (this.canFocus()) {\n                const focusManager = ui_focus_manager_1.UIFocusManager.getInstance();\n                if (focusManager) {\n                    focusManager.requestFocus(this);\n                }\n                else {\n                    this.onFocus();\n                }\n            }\n        }\n    }\n    handlePointerUp() {\n        if (this.props.enabled) {\n            this.setState(ButtonState.Hover);\n            this.onClick?.();\n        }\n    }\n    handlePointerUpOutside() {\n        if (this.props.enabled) {\n            this.setState(ButtonState.Normal);\n        }\n    }\n    setState(newState) {\n        this.state = newState;\n        this.updateVisuals();\n    }\n    updateVisuals() {\n        this.backgroundStrategy.updateState(this.state);\n        const yOffset = this.state === ButtonState.Pressed ? 2 : 0;\n        if (this.state === ButtonState.Disabled) {\n            this.container.cursor = 'default';\n        }\n        else {\n            this.container.cursor = 'pointer';\n        }\n        if (this.label) {\n            this.label.setPosition(this.labelCenterX, this.labelCenterY + yOffset);\n        }\n        else if (this.bitmapLabel) {\n            this.bitmapLabel.x = this.labelCenterX;\n            this.bitmapLabel.y = this.labelCenterY + yOffset;\n        }\n    }\n    measure() {\n        return {\n            width: this.props.width,\n            height: this.props.height\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const measured = this.measure();\n        this.computedLayout.width = measured.width;\n        this.computedLayout.height = measured.height;\n        const actualHeight = this.backgroundStrategy.getActualHeight();\n        if (this.label) {\n            this.label.layout(measured.width, measured.height);\n            const labelLayout = this.label.getLayout();\n            this.labelCenterX = (measured.width - labelLayout.width) / 2;\n            this.labelCenterY = (actualHeight - labelLayout.height) / 2;\n            this.label.setPosition(this.labelCenterX, this.labelCenterY);\n        }\n        else if (this.bitmapLabel) {\n            this.labelCenterX = (measured.width - this.bitmapLabel.width) / 2;\n            this.labelCenterY = (actualHeight - this.bitmapLabel.height) / 2;\n            this.bitmapLabel.x = this.labelCenterX;\n            this.bitmapLabel.y = this.labelCenterY;\n        }\n        this.layoutDirty = false;\n        this.render();\n    }\n    render() {\n    }\n    setLabel(text) {\n        if (this.label) {\n            this.label.setText(text);\n            this.markLayoutDirty();\n        }\n        else if (this.bitmapLabel) {\n            this.bitmapLabel.text = text;\n            this.markLayoutDirty();\n        }\n    }\n    setEnabled(enabled) {\n        this.props.enabled = enabled;\n        this.setState(enabled ? ButtonState.Normal : ButtonState.Disabled);\n    }\n    getState() {\n        return this.state;\n    }\n    destroy() {\n        if (typeof window !== 'undefined' && this.keydownHandler) {\n            window.removeEventListener('keydown', this.keydownHandler);\n        }\n        super.destroy();\n    }\n}\nexports.UIButton = UIButton;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-label.ts\":\n/*!***************************************!*\\\n  !*** ./src/ui/components/ui-label.ts ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UILabel = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nclass UILabel extends ui_component_1.UIComponent {\n    props;\n    textObject;\n    constructor(props, boxModel) {\n        super(boxModel);\n        this.props = {\n            text: props.text,\n            fontSize: props.fontSize ?? 16,\n            fontFamily: props.fontFamily ?? 'Arial',\n            color: props.color ?? 0xffffff,\n            align: props.align ?? 'left',\n            wordWrap: props.wordWrap ?? false,\n            wordWrapWidth: props.wordWrapWidth ?? 0,\n            fontWeight: props.fontWeight ?? 'normal',\n            lineHeight: props.lineHeight ?? 1.2\n        };\n        this.textObject = new pixi_js_1.default.Text({\n            text: this.props.text,\n            style: this.getTextStyle(),\n            resolution: window.devicePixelRatio || 2\n        });\n        this.container.addChild(this.textObject);\n    }\n    getTextStyle() {\n        const style = {\n            fontFamily: this.props.fontFamily,\n            fontSize: this.props.fontSize,\n            fill: this.props.color,\n            align: this.props.align,\n            fontWeight: this.props.fontWeight,\n            lineHeight: this.props.fontSize * this.props.lineHeight\n        };\n        if (this.props.wordWrap) {\n            style.wordWrap = true;\n            style.wordWrapWidth = this.props.wordWrapWidth;\n        }\n        return style;\n    }\n    measure() {\n        const padding = this.boxModel.padding;\n        const metrics = this.textObject;\n        const textWidth = metrics.width;\n        const textHeight = metrics.height;\n        return {\n            width: textWidth + padding.horizontal,\n            height: textHeight + padding.vertical\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const padding = this.boxModel.padding;\n        if (this.props.wordWrap && this.props.wordWrapWidth === 0) {\n            const wrapWidth = availableWidth - padding.horizontal;\n            this.props.wordWrapWidth = wrapWidth;\n            this.textObject.style = this.getTextStyle();\n        }\n        const measured = this.measure();\n        let finalWidth = measured.width;\n        let finalHeight = measured.height;\n        if (this.boxModel.width === 'fill') {\n            finalWidth = availableWidth;\n        }\n        else if (typeof this.boxModel.width === 'number') {\n            finalWidth = this.boxModel.width + padding.horizontal;\n        }\n        if (this.boxModel.height === 'fill') {\n            finalHeight = availableHeight;\n        }\n        else if (typeof this.boxModel.height === 'number') {\n            finalHeight = this.boxModel.height + padding.vertical;\n        }\n        this.computedLayout.width = finalWidth;\n        this.computedLayout.height = finalHeight;\n        this.computedLayout.contentX = padding.left;\n        this.computedLayout.contentY = padding.top;\n        this.computedLayout.contentWidth = finalWidth - padding.horizontal;\n        this.computedLayout.contentHeight = finalHeight - padding.vertical;\n        this.layoutDirty = false;\n        this.render();\n    }\n    render() {\n        const padding = this.boxModel.padding;\n        this.textObject.position.set(padding.left, padding.top);\n    }\n    setText(text) {\n        this.props.text = text;\n        this.textObject.text = text;\n        this.markLayoutDirty();\n    }\n    setColor(color) {\n        this.props.color = color;\n        this.textObject.style.fill = color;\n    }\n    setFontSize(size) {\n        this.props.fontSize = size;\n        this.textObject.style.fontSize = size;\n        this.markLayoutDirty();\n    }\n    getText() {\n        return this.props.text;\n    }\n}\nexports.UILabel = UILabel;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-panel.ts\":\n/*!***************************************!*\\\n  !*** ./src/ui/components/ui-panel.ts ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UIPanel = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nclass UIPanel extends ui_component_1.UIComponent {\n    props;\n    background;\n    constructor(props = {}, boxModel) {\n        super(boxModel);\n        this.props = {\n            backgroundAlpha: props.backgroundAlpha ?? 1,\n            ...props\n        };\n        if (props.width !== undefined) {\n            this.boxModel.width = props.width;\n        }\n        if (props.height !== undefined) {\n            this.boxModel.height = props.height;\n        }\n        this.createBackground();\n    }\n    createBackground() {\n        if (this.props.texture && this.props.nineSlice) {\n            const { leftWidth, topHeight, rightWidth, bottomHeight } = this.props.nineSlice;\n            this.background = new pixi_js_1.default.NineSliceSprite({\n                texture: this.props.texture,\n                leftWidth,\n                topHeight,\n                rightWidth,\n                bottomHeight\n            });\n            this.background.alpha = this.props.backgroundAlpha ?? 1;\n            this.container.addChild(this.background);\n        }\n        else if (this.props.backgroundColor !== undefined) {\n            this.background = new pixi_js_1.default.Graphics();\n            this.container.addChild(this.background);\n        }\n    }\n    measure() {\n        const padding = this.boxModel.padding;\n        let contentWidth = 0;\n        let contentHeight = 0;\n        if (typeof this.boxModel.width === 'number') {\n            contentWidth = this.boxModel.width;\n        }\n        else if (this.props.width !== undefined) {\n            contentWidth = this.props.width;\n        }\n        if (typeof this.boxModel.height === 'number') {\n            contentHeight = this.boxModel.height;\n        }\n        else if (this.props.height !== undefined) {\n            contentHeight = this.props.height;\n        }\n        return {\n            width: contentWidth + padding.horizontal,\n            height: contentHeight + padding.vertical\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const measured = this.measure();\n        const padding = this.boxModel.padding;\n        let finalWidth = measured.width;\n        let finalHeight = measured.height;\n        if (this.boxModel.width === 'fill') {\n            finalWidth = availableWidth;\n        }\n        if (this.boxModel.height === 'fill') {\n            finalHeight = availableHeight;\n        }\n        if (this.boxModel.maxWidth !== undefined) {\n            finalWidth = Math.min(finalWidth, this.boxModel.maxWidth);\n        }\n        if (this.boxModel.maxHeight !== undefined) {\n            finalHeight = Math.min(finalHeight, this.boxModel.maxHeight);\n        }\n        this.computedLayout.width = finalWidth;\n        this.computedLayout.height = finalHeight;\n        this.computedLayout.contentX = padding.left;\n        this.computedLayout.contentY = padding.top;\n        this.computedLayout.contentWidth = finalWidth - padding.horizontal;\n        this.computedLayout.contentHeight = finalHeight - padding.vertical;\n        this.layoutDirty = false;\n        this.render();\n    }\n    render() {\n        if (!this.background)\n            return;\n        const { width, height } = this.computedLayout;\n        if (this.background instanceof pixi_js_1.default.NineSliceSprite) {\n            this.background.width = width;\n            this.background.height = height;\n        }\n        else if (this.background instanceof pixi_js_1.default.Graphics) {\n            this.background.clear();\n            if (this.props.borderRadius && this.props.borderRadius > 0) {\n                this.background.roundRect(0, 0, width, height, this.props.borderRadius);\n            }\n            else {\n                this.background.rect(0, 0, width, height);\n            }\n            if (this.props.backgroundColor !== undefined) {\n                this.background.fill({\n                    color: this.props.backgroundColor,\n                    alpha: this.props.backgroundAlpha\n                });\n            }\n        }\n    }\n    setBackgroundColor(color, alpha = 1) {\n        if (this.background instanceof pixi_js_1.default.Graphics) {\n            this.props.backgroundColor = color;\n            this.props.backgroundAlpha = alpha;\n            this.render();\n        }\n    }\n    setTexture(texture) {\n        if (this.background instanceof pixi_js_1.default.NineSliceSprite) {\n            this.background.texture = texture;\n        }\n    }\n}\nexports.UIPanel = UIPanel;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-scroll-container.ts\":\n/*!**************************************************!*\\\n  !*** ./src/ui/components/ui-scroll-container.ts ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UIScrollContainer = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nconst edge_insets_1 = __webpack_require__(/*! ../core/edge-insets */ \"./src/ui/core/edge-insets.ts\");\nclass UIScrollContainer extends ui_component_1.UIComponent {\n    props;\n    background;\n    contentContainer;\n    contentMask;\n    scrollbarTrack;\n    scrollbarThumb;\n    children = [];\n    scrollY = 0;\n    maxScrollY = 0;\n    contentHeight = 0;\n    isDragging = false;\n    dragStartY = 0;\n    dragStartScrollY = 0;\n    isHoveringThumb = false;\n    boundGlobalPointerMove = null;\n    boundGlobalPointerUp = null;\n    constructor(props, boxModel) {\n        super(boxModel);\n        this.props = {\n            width: props.width,\n            height: props.height,\n            backgroundColor: props.backgroundColor ?? 0xffffff,\n            borderRadius: props.borderRadius ?? 0,\n            scrollbarWidth: props.scrollbarWidth ?? 12,\n            scrollbarTrackColor: props.scrollbarTrackColor ?? 0xe0e0e0,\n            scrollbarThumbColor: props.scrollbarThumbColor ?? 0x888888,\n            scrollbarThumbHoverColor: props.scrollbarThumbHoverColor ?? 0x555555,\n            scrollbarAutoHide: props.scrollbarAutoHide ?? false,\n            padding: props.padding ?? edge_insets_1.EdgeInsets.all(0)\n        };\n        this.boxModel.width = this.props.width;\n        this.boxModel.height = this.props.height;\n        this.background = new pixi_js_1.default.Graphics();\n        this.updateBackground();\n        this.container.addChild(this.background);\n        this.contentContainer = new pixi_js_1.default.Container();\n        this.contentContainer.x = this.props.padding.left;\n        this.contentContainer.y = this.props.padding.top;\n        this.container.addChild(this.contentContainer);\n        this.contentMask = new pixi_js_1.default.Graphics();\n        this.updateMask();\n        this.container.addChild(this.contentMask);\n        this.contentContainer.mask = this.contentMask;\n        this.scrollbarTrack = new pixi_js_1.default.Graphics();\n        this.scrollbarTrack.eventMode = 'static';\n        this.scrollbarTrack.cursor = 'pointer';\n        this.container.addChild(this.scrollbarTrack);\n        this.scrollbarThumb = new pixi_js_1.default.Graphics();\n        this.scrollbarThumb.eventMode = 'static';\n        this.scrollbarThumb.cursor = 'pointer';\n        this.container.addChild(this.scrollbarThumb);\n        this.setupInteractivity();\n        this.updateScrollbar();\n    }\n    updateBackground() {\n        this.background.clear();\n        this.background.roundRect(0, 0, this.props.width, this.props.height, this.props.borderRadius);\n        this.background.fill({ color: this.props.backgroundColor });\n    }\n    updateMask() {\n        const contentWidth = this.props.width - this.props.padding.left - this.props.padding.right - this.props.scrollbarWidth;\n        const contentHeight = this.props.height - this.props.padding.top - this.props.padding.bottom;\n        this.contentMask.clear();\n        this.contentMask.rect(this.props.padding.left, this.props.padding.top, contentWidth, contentHeight);\n        this.contentMask.fill({ color: 0xffffff });\n    }\n    setupInteractivity() {\n        this.container.eventMode = 'static';\n        this.container.on('wheel', this.handleWheel.bind(this));\n        this.scrollbarThumb.on('pointerdown', this.handleThumbPointerDown.bind(this));\n        this.scrollbarThumb.on('pointerover', () => {\n            this.isHoveringThumb = true;\n            this.updateScrollbar();\n        });\n        this.scrollbarThumb.on('pointerout', () => {\n            if (!this.isDragging) {\n                this.isHoveringThumb = false;\n                this.updateScrollbar();\n            }\n        });\n        this.scrollbarTrack.on('pointerdown', this.handleTrackPointerDown.bind(this));\n        if (typeof window !== 'undefined') {\n            this.boundGlobalPointerMove = this.handleGlobalPointerMove.bind(this);\n            this.boundGlobalPointerUp = this.handleGlobalPointerUp.bind(this);\n            window.addEventListener('pointermove', this.boundGlobalPointerMove);\n            window.addEventListener('pointerup', this.boundGlobalPointerUp);\n        }\n    }\n    handleWheel(e) {\n        e.preventDefault();\n        const delta = e.deltaY;\n        this.scrollY += delta;\n        this.scrollY = Math.max(0, Math.min(this.maxScrollY, this.scrollY));\n        this.updateContentPosition();\n        this.updateScrollbar();\n    }\n    handleThumbPointerDown(e) {\n        this.isDragging = true;\n        this.dragStartY = e.globalY;\n        this.dragStartScrollY = this.scrollY;\n        e.stopPropagation();\n    }\n    handleTrackPointerDown(e) {\n        const localY = e.globalY - this.container.worldTransform.ty;\n        const thumbHeight = this.getThumbHeight();\n        const trackTop = 0;\n        const trackBottom = this.props.height;\n        const clickRatio = (localY - trackTop) / (trackBottom - trackTop);\n        this.scrollY = clickRatio * this.maxScrollY;\n        this.scrollY = Math.max(0, Math.min(this.maxScrollY, this.scrollY));\n        this.updateContentPosition();\n        this.updateScrollbar();\n    }\n    handleGlobalPointerMove(e) {\n        if (!this.isDragging)\n            return;\n        const deltaY = e.clientY - this.dragStartY;\n        const trackHeight = this.props.height;\n        const thumbHeight = this.getThumbHeight();\n        const scrollableTrackHeight = trackHeight - thumbHeight;\n        if (scrollableTrackHeight <= 0)\n            return;\n        const scrollDelta = (deltaY / scrollableTrackHeight) * this.maxScrollY;\n        this.scrollY = this.dragStartScrollY + scrollDelta;\n        this.scrollY = Math.max(0, Math.min(this.maxScrollY, this.scrollY));\n        this.updateContentPosition();\n        this.updateScrollbar();\n    }\n    handleGlobalPointerUp() {\n        if (this.isDragging) {\n            this.isDragging = false;\n            if (!this.isHoveringThumb) {\n                this.updateScrollbar();\n            }\n        }\n    }\n    updateContentPosition() {\n        this.contentContainer.y = this.props.padding.top - this.scrollY;\n    }\n    getThumbHeight() {\n        if (this.contentHeight <= 0)\n            return 0;\n        const viewportHeight = this.props.height - this.props.padding.top - this.props.padding.bottom;\n        const ratio = viewportHeight / this.contentHeight;\n        const thumbHeight = Math.max(30, this.props.height * ratio);\n        return Math.min(thumbHeight, this.props.height);\n    }\n    getThumbY() {\n        if (this.maxScrollY <= 0)\n            return 0;\n        const trackHeight = this.props.height;\n        const thumbHeight = this.getThumbHeight();\n        const scrollableTrackHeight = trackHeight - thumbHeight;\n        const scrollRatio = this.scrollY / this.maxScrollY;\n        return scrollRatio * scrollableTrackHeight;\n    }\n    updateScrollbar() {\n        const trackX = this.props.width - this.props.scrollbarWidth;\n        const trackWidth = this.props.scrollbarWidth;\n        const trackHeight = this.props.height;\n        this.scrollbarTrack.clear();\n        this.scrollbarTrack.rect(trackX, 0, trackWidth, trackHeight);\n        this.scrollbarTrack.fill({ color: this.props.scrollbarTrackColor });\n        const thumbHeight = this.getThumbHeight();\n        const thumbY = this.getThumbY();\n        const thumbColor = (this.isHoveringThumb || this.isDragging)\n            ? this.props.scrollbarThumbHoverColor\n            : this.props.scrollbarThumbColor;\n        this.scrollbarThumb.clear();\n        if (this.maxScrollY > 0) {\n            this.scrollbarThumb.roundRect(trackX + 2, thumbY + 2, trackWidth - 4, thumbHeight - 4, 4);\n            this.scrollbarThumb.fill({ color: thumbColor });\n            this.scrollbarThumb.visible = true;\n        }\n        else {\n            this.scrollbarThumb.visible = false;\n        }\n        if (this.props.scrollbarAutoHide && !this.isDragging && !this.isHoveringThumb) {\n            this.scrollbarTrack.alpha = 0;\n            this.scrollbarThumb.alpha = 0;\n        }\n        else {\n            this.scrollbarTrack.alpha = 1;\n            this.scrollbarThumb.alpha = 1;\n        }\n    }\n    updateContentBounds() {\n        let maxHeight = 0;\n        this.contentContainer.children.forEach((child) => {\n            if (child && typeof child.y === 'number' && typeof child.height === 'number') {\n                const childBottom = child.y + child.height;\n                if (childBottom > maxHeight) {\n                    maxHeight = childBottom;\n                }\n            }\n        });\n        this.contentHeight = maxHeight;\n        const viewportHeight = this.props.height - this.props.padding.top - this.props.padding.bottom;\n        this.maxScrollY = Math.max(0, this.contentHeight - viewportHeight);\n        this.scrollY = Math.max(0, Math.min(this.maxScrollY, this.scrollY));\n        this.updateContentPosition();\n        this.updateScrollbar();\n    }\n    addChild(child) {\n        child.parent = this;\n        this.children.push(child);\n        this.contentContainer.addChild(child.container);\n        const contentWidth = this.props.width - this.props.padding.left - this.props.padding.right - this.props.scrollbarWidth;\n        const contentHeight = 999999;\n        child.layout(contentWidth, contentHeight);\n        this.updateContentBounds();\n    }\n    removeChild(child) {\n        child.parent = undefined;\n        const index = this.children.indexOf(child);\n        if (index !== -1) {\n            this.children.splice(index, 1);\n        }\n        this.contentContainer.removeChild(child.container);\n        this.updateContentBounds();\n    }\n    scrollTo(y) {\n        this.scrollY = Math.max(0, Math.min(this.maxScrollY, y));\n        this.updateContentPosition();\n        this.updateScrollbar();\n    }\n    scrollToTop() {\n        this.scrollTo(0);\n    }\n    scrollToBottom() {\n        this.scrollTo(this.maxScrollY);\n    }\n    getScrollY() {\n        return this.scrollY;\n    }\n    getMaxScrollY() {\n        return this.maxScrollY;\n    }\n    scrollToComponent(component) {\n        const componentBounds = component.getGlobalBounds();\n        const containerBounds = this.getGlobalBounds();\n        const relativeY = componentBounds.y - containerBounds.y - this.props.padding.top + this.scrollY;\n        const viewportHeight = this.props.height - this.props.padding.top - this.props.padding.bottom;\n        if (relativeY < this.scrollY) {\n            this.scrollTo(relativeY);\n        }\n        else if (relativeY + componentBounds.height > this.scrollY + viewportHeight) {\n            const targetScroll = relativeY + componentBounds.height - viewportHeight;\n            this.scrollTo(targetScroll);\n        }\n    }\n    measure() {\n        return {\n            width: this.props.width,\n            height: this.props.height\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const measured = this.measure();\n        this.computedLayout.width = measured.width;\n        this.computedLayout.height = measured.height;\n        this.updateContentBounds();\n        this.layoutDirty = false;\n        this.render();\n    }\n    render() {\n    }\n    destroy() {\n        if (typeof window !== 'undefined') {\n            if (this.boundGlobalPointerMove) {\n                window.removeEventListener('pointermove', this.boundGlobalPointerMove);\n                this.boundGlobalPointerMove = null;\n            }\n            if (this.boundGlobalPointerUp) {\n                window.removeEventListener('pointerup', this.boundGlobalPointerUp);\n                this.boundGlobalPointerUp = null;\n            }\n        }\n        super.destroy();\n    }\n}\nexports.UIScrollContainer = UIScrollContainer;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-select.ts\":\n/*!****************************************!*\\\n  !*** ./src/ui/components/ui-select.ts ***!\n  \\****************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UISelect = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nconst ui_panel_1 = __webpack_require__(/*! ./ui-panel */ \"./src/ui/components/ui-panel.ts\");\nconst ui_label_1 = __webpack_require__(/*! ./ui-label */ \"./src/ui/components/ui-label.ts\");\nconst edge_insets_1 = __webpack_require__(/*! ../core/edge-insets */ \"./src/ui/core/edge-insets.ts\");\nclass UISelect extends ui_component_1.UIComponent {\n    props;\n    onChange;\n    selectedValue;\n    background;\n    label;\n    dropdownContainer;\n    dropdownPanel;\n    optionLabels = [];\n    isOpen = false;\n    hoverColor;\n    selectedColor;\n    constructor(props, boxModel) {\n        super(boxModel);\n        this.props = {\n            options: props.options ?? [],\n            placeholder: props.placeholder ?? 'Select...',\n            width: props.width ?? 200,\n            height: props.height ?? 36,\n            disabled: props.disabled ?? false,\n            backgroundColor: props.backgroundColor ?? 0xffffff,\n            textColor: props.textColor ?? 0x000000,\n            borderRadius: props.borderRadius ?? 4\n        };\n        this.onChange = props.onChange;\n        this.selectedValue = props.value ?? props.defaultValue;\n        this.hoverColor = this.darkenColor(this.props.backgroundColor, 0.95);\n        this.selectedColor = this.darkenColor(this.props.backgroundColor, 0.9);\n        this.boxModel.width = this.props.width;\n        this.boxModel.height = this.props.height;\n        this.background = new ui_panel_1.UIPanel({\n            backgroundColor: this.props.backgroundColor,\n            width: this.props.width,\n            height: this.props.height,\n            borderRadius: this.props.borderRadius\n        });\n        this.container.addChild(this.background.container);\n        const displayText = this.getDisplayText();\n        this.label = new ui_label_1.UILabel({\n            text: displayText,\n            fontSize: 14,\n            color: this.selectedValue ? this.props.textColor : 0x999999,\n            align: 'left'\n        }, {\n            padding: edge_insets_1.EdgeInsets.symmetric(8, 12)\n        });\n        this.container.addChild(this.label.container);\n        this.setupInteractivity();\n    }\n    getDisplayText() {\n        if (!this.selectedValue) {\n            return this.props.placeholder;\n        }\n        const option = this.props.options.find(opt => opt.value === this.selectedValue);\n        return option ? option.label : this.props.placeholder;\n    }\n    setupInteractivity() {\n        this.container.eventMode = 'static';\n        this.container.cursor = 'pointer';\n        this.container.on('pointerdown', this.handlePointerDown.bind(this));\n    }\n    handlePointerDown() {\n        if (this.props.disabled)\n            return;\n        if (this.isOpen) {\n            this.closeDropdown();\n        }\n        else {\n            this.openDropdown();\n        }\n    }\n    openDropdown() {\n        this.isOpen = true;\n        this.dropdownContainer = new pixi_js_1.default.Container();\n        this.dropdownContainer.position.set(0, this.props.height + 4);\n        const dropdownHeight = Math.min(this.props.options.length * 32, 200);\n        this.dropdownPanel = new ui_panel_1.UIPanel({\n            backgroundColor: this.props.backgroundColor,\n            width: this.props.width,\n            height: dropdownHeight,\n            borderRadius: this.props.borderRadius\n        });\n        this.dropdownContainer.addChild(this.dropdownPanel.container);\n        this.optionLabels = [];\n        this.props.options.forEach((option, index) => {\n            const optionContainer = new pixi_js_1.default.Container();\n            optionContainer.position.set(0, index * 32);\n            const optionBg = new pixi_js_1.default.Graphics();\n            optionBg.rect(0, 0, this.props.width, 32);\n            optionBg.fill({ color: this.props.backgroundColor, alpha: 0 });\n            optionContainer.addChild(optionBg);\n            const optionLabel = new ui_label_1.UILabel({\n                text: option.label,\n                fontSize: 14,\n                color: option.disabled ? 0x999999 : this.props.textColor,\n                align: 'left'\n            }, {\n                padding: edge_insets_1.EdgeInsets.symmetric(8, 12)\n            });\n            optionLabel.layout(this.props.width, 32);\n            optionContainer.addChild(optionLabel.container);\n            if (!option.disabled) {\n                optionContainer.eventMode = 'static';\n                optionContainer.cursor = 'pointer';\n                optionContainer.on('pointerover', () => {\n                    optionBg.clear();\n                    optionBg.rect(0, 0, this.props.width, 32);\n                    optionBg.fill({ color: this.hoverColor });\n                });\n                optionContainer.on('pointerout', () => {\n                    optionBg.clear();\n                    optionBg.rect(0, 0, this.props.width, 32);\n                    optionBg.fill({ color: this.props.backgroundColor, alpha: 0 });\n                });\n                optionContainer.on('pointerdown', () => {\n                    this.selectOption(option.value);\n                });\n            }\n            this.dropdownContainer.addChild(optionContainer);\n            this.optionLabels.push(optionLabel);\n        });\n        this.container.addChild(this.dropdownContainer);\n        this.setupClickOutside();\n    }\n    closeDropdown() {\n        this.isOpen = false;\n        if (this.dropdownContainer) {\n            this.container.removeChild(this.dropdownContainer);\n            this.dropdownContainer = undefined;\n            this.dropdownPanel = undefined;\n            this.optionLabels = [];\n        }\n        this.removeClickOutside();\n    }\n    selectOption(value) {\n        this.selectedValue = value;\n        this.label.setText(this.getDisplayText());\n        this.label.setColor(this.props.textColor);\n        this.onChange?.(value);\n        this.closeDropdown();\n    }\n    setupClickOutside() {\n        const stage = this.container.parent;\n        if (stage) {\n            stage.eventMode = 'static';\n            stage.once('pointerdown', (e) => {\n                const point = e.global;\n                const bounds = this.container.getBounds();\n                if (point.x < bounds.x || point.x > bounds.x + bounds.width ||\n                    point.y < bounds.y || point.y > bounds.y + bounds.height) {\n                    this.closeDropdown();\n                }\n            });\n        }\n    }\n    removeClickOutside() {\n    }\n    darkenColor(color, factor) {\n        const r = ((color >> 16) & 0xff) * factor;\n        const g = ((color >> 8) & 0xff) * factor;\n        const b = (color & 0xff) * factor;\n        return ((r << 16) | (g << 8) | b) >>> 0;\n    }\n    measure() {\n        return {\n            width: this.props.width,\n            height: this.props.height\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const measured = this.measure();\n        this.computedLayout.width = measured.width;\n        this.computedLayout.height = measured.height;\n        this.background.layout(measured.width, measured.height);\n        this.label.layout(measured.width, measured.height);\n        this.layoutDirty = false;\n        this.render();\n    }\n    render() {\n    }\n    setValue(value) {\n        this.selectedValue = value;\n        this.label.setText(this.getDisplayText());\n        this.label.setColor(this.props.textColor);\n    }\n    getValue() {\n        return this.selectedValue;\n    }\n    setOptions(options) {\n        this.props.options = options;\n        if (this.isOpen) {\n            this.closeDropdown();\n        }\n    }\n}\nexports.UISelect = UISelect;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-tabs.ts\":\n/*!**************************************!*\\\n  !*** ./src/ui/components/ui-tabs.ts ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UITabs = void 0;\nconst PIXI = __importStar(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nconst ui_label_1 = __webpack_require__(/*! ./ui-label */ \"./src/ui/components/ui-label.ts\");\nclass UITabs extends ui_component_1.UIComponent {\n    items;\n    activeKey;\n    onChange;\n    type;\n    tabPosition;\n    width;\n    height;\n    tabBarBackgroundColor;\n    tabBarHeight;\n    activeTabColor;\n    inactiveTabColor;\n    textColor;\n    activeTextColor;\n    hashPrefix;\n    tabBar;\n    contentArea;\n    tabButtons = new Map();\n    activeIndicator;\n    hashChangeHandler;\n    constructor(props, boxModel) {\n        super(boxModel);\n        this.items = props.items || [];\n        this.onChange = props.onChange;\n        this.type = props.type || 'line';\n        this.tabPosition = props.tabPosition || 'top';\n        this.tabBarBackgroundColor = props.tabBarBackgroundColor ?? 0x2d2d44;\n        this.tabBarHeight = props.tabBarHeight ?? 48;\n        this.activeTabColor = props.activeTabColor ?? 0x1890ff;\n        this.inactiveTabColor = props.inactiveTabColor ?? 0x3d3d54;\n        this.textColor = props.textColor ?? 0xaaaaaa;\n        this.activeTextColor = props.activeTextColor ?? 0xffffff;\n        this.hashPrefix = props.hashPrefix;\n        let initialKey = props.activeKey || props.defaultActiveKey || (this.items.length > 0 ? this.items[0].key : '');\n        if (this.hashPrefix && !props.activeKey) {\n            const hashKey = this.getKeyFromHash();\n            if (hashKey && this.items.find(item => item.key === hashKey)) {\n                initialKey = hashKey;\n            }\n        }\n        this.activeKey = initialKey;\n        this.width = props.width ?? 800;\n        this.height = props.height ?? 600;\n        this.tabBar = new PIXI.Container();\n        this.contentArea = new PIXI.Container();\n        this.container.addChild(this.tabBar);\n        this.container.addChild(this.contentArea);\n        this.buildTabs();\n        this.showActiveTab();\n        if (this.hashPrefix) {\n            this.setupHashListener();\n            this.updateHash(this.activeKey);\n        }\n    }\n    getKeyFromHash() {\n        if (!this.hashPrefix)\n            return null;\n        const hash = window.location.hash.slice(1);\n        const prefix = `${this.hashPrefix}/`;\n        if (hash.startsWith(prefix)) {\n            return hash.slice(prefix.length);\n        }\n        return null;\n    }\n    updateHash(key) {\n        if (!this.hashPrefix)\n            return;\n        const newHash = `#${this.hashPrefix}/${key}`;\n        if (window.location.hash !== newHash) {\n            window.location.hash = newHash;\n        }\n    }\n    setupHashListener() {\n        this.hashChangeHandler = () => {\n            const hashKey = this.getKeyFromHash();\n            if (hashKey && hashKey !== this.activeKey) {\n                this.setActiveKey(hashKey, false);\n            }\n        };\n        window.addEventListener('hashchange', this.hashChangeHandler);\n    }\n    destroy() {\n        if (this.hashChangeHandler) {\n            window.removeEventListener('hashchange', this.hashChangeHandler);\n        }\n    }\n    buildTabs() {\n        this.tabBar.removeChildren();\n        this.tabButtons.clear();\n        const tabBarBg = new PIXI.Graphics();\n        tabBarBg.rect(0, 0, this.width, this.tabBarHeight);\n        tabBarBg.fill({ color: this.tabBarBackgroundColor });\n        this.tabBar.addChild(tabBarBg);\n        if (this.type === 'line') {\n            const borderLine = new PIXI.Graphics();\n            borderLine.rect(0, this.tabBarHeight - 2, this.width, 2);\n            borderLine.fill({ color: 0x3d3d54, alpha: 0.5 });\n            this.tabBar.addChild(borderLine);\n        }\n        if (this.tabPosition === 'bottom') {\n            this.tabBar.y = this.height - this.tabBarHeight;\n            this.contentArea.y = 0;\n        }\n        else {\n            this.tabBar.y = 0;\n            this.contentArea.y = this.tabBarHeight;\n        }\n        let xOffset = 8;\n        const tabPadding = 24;\n        const tabGap = 8;\n        for (const item of this.items) {\n            if (item.disabled)\n                continue;\n            const tabContainer = new PIXI.Container();\n            tabContainer.x = xOffset;\n            const isActive = this.activeKey === item.key;\n            const label = new ui_label_1.UILabel({\n                text: item.label,\n                fontSize: 15,\n                fontWeight: isActive ? 'bold' : 'normal',\n                color: isActive ? this.activeTextColor : this.textColor\n            });\n            label.measure();\n            label.layout(this.width, this.tabBarHeight);\n            const labelBounds = label.container.getLocalBounds();\n            const tabWidth = labelBounds.width + (tabPadding * 2);\n            let bg;\n            if (this.type === 'card') {\n                bg = new PIXI.Graphics();\n                bg.roundRect(0, 0, tabWidth, this.tabBarHeight - 2, 6);\n                bg.fill({ color: isActive ? this.activeTabColor : this.inactiveTabColor });\n                bg.roundRect(0, 0, tabWidth, this.tabBarHeight - 2, 6);\n                bg.stroke({ color: isActive ? this.activeTabColor : 0x4d4d64, width: 2 });\n                tabContainer.addChild(bg);\n            }\n            else {\n                bg = new PIXI.Graphics();\n                bg.rect(0, 0, tabWidth, this.tabBarHeight);\n                bg.fill({ color: 0x000000, alpha: 0 });\n                tabContainer.addChild(bg);\n            }\n            label.container.x = tabPadding;\n            label.container.y = (this.tabBarHeight - labelBounds.height) / 2;\n            tabContainer.addChild(label.container);\n            tabContainer.eventMode = 'static';\n            tabContainer.cursor = 'pointer';\n            const tabKey = item.key;\n            tabContainer.on('pointerdown', () => {\n                this.setActiveKey(tabKey);\n            });\n            tabContainer.on('pointerover', () => {\n                if (this.activeKey !== tabKey) {\n                    if (this.type === 'card') {\n                        bg.clear();\n                        bg.roundRect(0, 0, tabWidth, this.tabBarHeight - 2, 6);\n                        bg.fill({ color: this.activeTabColor, alpha: 0.5 });\n                        bg.roundRect(0, 0, tabWidth, this.tabBarHeight - 2, 6);\n                        bg.stroke({ color: this.activeTabColor, width: 2 });\n                    }\n                    else {\n                        label.setColor(this.activeTextColor);\n                    }\n                }\n            });\n            tabContainer.on('pointerout', () => {\n                if (this.activeKey !== tabKey) {\n                    if (this.type === 'card') {\n                        bg.clear();\n                        bg.roundRect(0, 0, tabWidth, this.tabBarHeight - 2, 6);\n                        bg.fill({ color: this.inactiveTabColor });\n                        bg.roundRect(0, 0, tabWidth, this.tabBarHeight - 2, 6);\n                        bg.stroke({ color: 0x4d4d64, width: 2 });\n                    }\n                    else {\n                        label.setColor(this.textColor);\n                    }\n                }\n            });\n            this.tabBar.addChild(tabContainer);\n            this.tabButtons.set(item.key, { container: tabContainer, label, bg });\n            xOffset += tabWidth + tabGap;\n        }\n        if (this.type === 'line') {\n            this.activeIndicator = new PIXI.Graphics();\n            this.tabBar.addChild(this.activeIndicator);\n            this.updateActiveIndicator();\n        }\n    }\n    updateActiveIndicator() {\n        if (!this.activeIndicator || this.type !== 'line')\n            return;\n        this.activeIndicator.clear();\n        const activeTab = this.tabButtons.get(this.activeKey);\n        if (!activeTab)\n            return;\n        const tabX = activeTab.container.x;\n        const tabBounds = activeTab.bg.getLocalBounds();\n        const tabWidth = tabBounds.width;\n        const indicatorHeight = 3;\n        const indicatorY = this.tabBarHeight - indicatorHeight;\n        this.activeIndicator.roundRect(tabX + 8, indicatorY, tabWidth - 16, indicatorHeight, 1.5);\n        this.activeIndicator.fill({ color: this.activeTabColor });\n    }\n    showActiveTab() {\n        this.contentArea.removeChildren();\n        const activeItem = this.items.find(item => item.key === this.activeKey);\n        if (!activeItem)\n            return;\n        const contentHeight = this.height - this.tabBarHeight;\n        activeItem.content.layout(this.width, contentHeight);\n        this.contentArea.addChild(activeItem.content.container);\n        this.tabButtons.forEach((tab, key) => {\n            const isActive = key === this.activeKey;\n            const tabBounds = tab.bg.getLocalBounds();\n            if (this.type === 'card') {\n                tab.bg.clear();\n                tab.bg.roundRect(0, 0, tabBounds.width, this.tabBarHeight - 2, 6);\n                tab.bg.fill({ color: isActive ? this.activeTabColor : this.inactiveTabColor });\n                tab.bg.roundRect(0, 0, tabBounds.width, this.tabBarHeight - 2, 6);\n                tab.bg.stroke({ color: isActive ? this.activeTabColor : 0x4d4d64, width: 2 });\n            }\n            else {\n                tab.bg.clear();\n                tab.bg.rect(0, 0, tabBounds.width, this.tabBarHeight);\n                tab.bg.fill({ color: 0x000000, alpha: 0 });\n            }\n            tab.label.setColor(isActive ? this.activeTextColor : this.textColor);\n            tab.label.container.alpha = 1;\n        });\n        if (this.type === 'line') {\n            this.updateActiveIndicator();\n        }\n    }\n    setActiveKey(key, updateHash = true) {\n        if (this.activeKey === key)\n            return;\n        const item = this.items.find(item => item.key === key);\n        if (!item || item.disabled)\n            return;\n        this.activeKey = key;\n        this.showActiveTab();\n        if (updateHash && this.hashPrefix) {\n            this.updateHash(key);\n        }\n        if (this.onChange) {\n            this.onChange(key);\n        }\n    }\n    getActiveKey() {\n        return this.activeKey;\n    }\n    setItems(items) {\n        this.items = items;\n        if (!this.items.find(item => item.key === this.activeKey)) {\n            this.activeKey = this.items.length > 0 ? this.items[0].key : '';\n        }\n        this.buildTabs();\n        this.showActiveTab();\n    }\n    measure() {\n        return {\n            width: this.width,\n            height: this.height\n        };\n    }\n    layout(width, height) {\n        this.width = width;\n        this.height = height;\n        this.buildTabs();\n        this.showActiveTab();\n    }\n    render() {\n    }\n}\nexports.UITabs = UITabs;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-text-input.ts\":\n/*!********************************************!*\\\n  !*** ./src/ui/components/ui-text-input.ts ***!\n  \\********************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UITextInput = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nconst ui_panel_1 = __webpack_require__(/*! ./ui-panel */ \"./src/ui/components/ui-panel.ts\");\nconst ui_focus_manager_1 = __webpack_require__(/*! ../core/ui-focus-manager */ \"./src/ui/core/ui-focus-manager.ts\");\nclass UITextInput extends ui_component_1.UIComponent {\n    props;\n    onChange;\n    currentValue;\n    background;\n    textDisplay;\n    cursor;\n    cursorPosition = 0;\n    cursorBlinkInterval;\n    cursorVisible = true;\n    constructor(props, boxModel) {\n        super(boxModel);\n        this.props = {\n            placeholder: props.placeholder ?? '',\n            maxLength: props.maxLength ?? 100,\n            width: props.width ?? 200,\n            height: props.height ?? 36,\n            disabled: props.disabled ?? false,\n            backgroundColor: props.backgroundColor ?? 0xffffff,\n            textColor: props.textColor ?? 0x000000,\n            placeholderColor: props.placeholderColor ?? 0x999999,\n            borderRadius: props.borderRadius ?? 4,\n            fontSize: props.fontSize ?? 14,\n            type: props.type ?? 'text'\n        };\n        this.onChange = props.onChange;\n        this.currentValue = props.value ?? props.defaultValue ?? '';\n        this.boxModel.width = this.props.width;\n        this.boxModel.height = this.props.height;\n        this.background = new ui_panel_1.UIPanel({\n            backgroundColor: this.props.backgroundColor,\n            width: this.props.width,\n            height: this.props.height,\n            borderRadius: this.props.borderRadius\n        });\n        this.container.addChild(this.background.container);\n        this.textDisplay = new pixi_js_1.default.Text({\n            text: this.getDisplayText(),\n            style: {\n                fontFamily: 'Arial',\n                fontSize: this.props.fontSize,\n                fill: this.currentValue ? this.props.textColor : this.props.placeholderColor,\n                align: 'left'\n            },\n            resolution: window.devicePixelRatio || 2\n        });\n        this.textDisplay.position.set(12, (this.props.height - this.props.fontSize) / 2);\n        this.container.addChild(this.textDisplay);\n        this.cursor = new pixi_js_1.default.Graphics();\n        this.cursor.visible = false;\n        this.container.addChild(this.cursor);\n        this.setupInteractivity();\n    }\n    getDisplayText() {\n        if (this.currentValue) {\n            return this.currentValue;\n        }\n        return this.props.placeholder;\n    }\n    setupInteractivity() {\n        this.container.eventMode = 'static';\n        this.container.cursor = 'text';\n        this.container.on('pointerdown', this.handlePointerDown.bind(this));\n        if (typeof window !== 'undefined') {\n            window.addEventListener('keydown', this.handleKeyDown.bind(this));\n        }\n    }\n    handlePointerDown(e) {\n        if (this.props.disabled)\n            return;\n        const focusManager = ui_focus_manager_1.UIFocusManager.getInstance();\n        if (focusManager) {\n            focusManager.requestFocus(this);\n        }\n        else {\n            this.onFocus();\n        }\n        e.stopPropagation();\n    }\n    onFocus() {\n        if (this.focused)\n            return;\n        super.onFocus();\n        this.cursorPosition = this.currentValue.length;\n        this.cursor.visible = true;\n        this.updateCursor();\n        this.startCursorBlink();\n        this.background = new ui_panel_1.UIPanel({\n            backgroundColor: this.lightenColor(this.props.backgroundColor, 0.95),\n            width: this.props.width,\n            height: this.props.height,\n            borderRadius: this.props.borderRadius\n        });\n    }\n    onBlur() {\n        if (!this.focused)\n            return;\n        super.onBlur();\n        this.cursor.visible = false;\n        this.stopCursorBlink();\n        this.background = new ui_panel_1.UIPanel({\n            backgroundColor: this.props.backgroundColor,\n            width: this.props.width,\n            height: this.props.height,\n            borderRadius: this.props.borderRadius\n        });\n    }\n    handleKeyDown(e) {\n        if (!this.focused || this.props.disabled)\n            return;\n        e.preventDefault();\n        e.stopPropagation();\n        const key = e.key;\n        if (key === 'Enter') {\n            this.onBlur();\n            return;\n        }\n        if (key === 'Escape') {\n            this.onBlur();\n            return;\n        }\n        if (key === 'Backspace') {\n            if (this.cursorPosition > 0) {\n                this.currentValue =\n                    this.currentValue.substring(0, this.cursorPosition - 1) +\n                        this.currentValue.substring(this.cursorPosition);\n                this.cursorPosition--;\n                this.updateText();\n            }\n            return;\n        }\n        if (key === 'Delete') {\n            if (this.cursorPosition < this.currentValue.length) {\n                this.currentValue =\n                    this.currentValue.substring(0, this.cursorPosition) +\n                        this.currentValue.substring(this.cursorPosition + 1);\n                this.updateText();\n            }\n            return;\n        }\n        if (key === 'ArrowLeft') {\n            if (this.cursorPosition > 0) {\n                this.cursorPosition--;\n                this.updateCursor();\n            }\n            return;\n        }\n        if (key === 'ArrowRight') {\n            if (this.cursorPosition < this.currentValue.length) {\n                this.cursorPosition++;\n                this.updateCursor();\n            }\n            return;\n        }\n        if (key === 'Home') {\n            this.cursorPosition = 0;\n            this.updateCursor();\n            return;\n        }\n        if (key === 'End') {\n            this.cursorPosition = this.currentValue.length;\n            this.updateCursor();\n            return;\n        }\n        if (key.length === 1 && !e.ctrlKey && !e.metaKey) {\n            if (this.props.type === 'number' && !/[0-9.-]/.test(key)) {\n                return;\n            }\n            if (this.currentValue.length >= this.props.maxLength) {\n                return;\n            }\n            this.currentValue =\n                this.currentValue.substring(0, this.cursorPosition) +\n                    key +\n                    this.currentValue.substring(this.cursorPosition);\n            this.cursorPosition++;\n            this.updateText();\n        }\n    }\n    updateText() {\n        this.textDisplay.text = this.getDisplayText();\n        this.textDisplay.style.fill = this.currentValue ? this.props.textColor : this.props.placeholderColor;\n        this.updateCursor();\n        this.onChange?.(this.currentValue);\n    }\n    updateCursor() {\n        const textUpToCursor = this.currentValue.substring(0, this.cursorPosition);\n        const tempText = new pixi_js_1.default.Text({\n            text: textUpToCursor,\n            style: this.textDisplay.style\n        });\n        const cursorX = 12 + tempText.width;\n        const cursorY = (this.props.height - this.props.fontSize) / 2;\n        this.cursor.clear();\n        this.cursor.rect(cursorX, cursorY, 1, this.props.fontSize);\n        this.cursor.fill({ color: this.props.textColor });\n        tempText.destroy();\n    }\n    startCursorBlink() {\n        this.stopCursorBlink();\n        this.cursorVisible = true;\n        this.cursorBlinkInterval = window.setInterval(() => {\n            this.cursorVisible = !this.cursorVisible;\n            this.cursor.visible = this.cursorVisible;\n        }, 530);\n    }\n    stopCursorBlink() {\n        if (this.cursorBlinkInterval) {\n            window.clearInterval(this.cursorBlinkInterval);\n            this.cursorBlinkInterval = undefined;\n        }\n    }\n    lightenColor(color, factor) {\n        const r = Math.min(255, ((color >> 16) & 0xff) / factor);\n        const g = Math.min(255, ((color >> 8) & 0xff) / factor);\n        const b = Math.min(255, (color & 0xff) / factor);\n        return ((r << 16) | (g << 8) | b) >>> 0;\n    }\n    measure() {\n        return {\n            width: this.props.width,\n            height: this.props.height\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const measured = this.measure();\n        this.computedLayout.width = measured.width;\n        this.computedLayout.height = measured.height;\n        this.background.layout(measured.width, measured.height);\n        this.layoutDirty = false;\n        this.render();\n    }\n    render() {\n    }\n    setValue(value) {\n        this.currentValue = value;\n        this.cursorPosition = value.length;\n        this.updateText();\n    }\n    getValue() {\n        return this.currentValue;\n    }\n    destroy() {\n        this.stopCursorBlink();\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('keydown', this.handleKeyDown.bind(this));\n        }\n        super.destroy();\n    }\n}\nexports.UITextInput = UITextInput;\n\n\n/***/ }),\n\n/***/ \"./src/ui/components/ui-textarea.ts\":\n/*!******************************************!*\\\n  !*** ./src/ui/components/ui-textarea.ts ***!\n  \\******************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UITextArea = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nconst ui_panel_1 = __webpack_require__(/*! ./ui-panel */ \"./src/ui/components/ui-panel.ts\");\nconst ui_focus_manager_1 = __webpack_require__(/*! ../core/ui-focus-manager */ \"./src/ui/core/ui-focus-manager.ts\");\nclass UITextArea extends ui_component_1.UIComponent {\n    props;\n    onChange;\n    currentValue;\n    background;\n    textDisplay;\n    cursor;\n    cursorPosition = 0;\n    cursorBlinkInterval;\n    cursorVisible = true;\n    constructor(props, boxModel) {\n        super(boxModel);\n        const defaultHeight = (props.rows ?? 4) * (props.fontSize ?? 14) * (props.lineHeight ?? 1.5) + 24;\n        this.props = {\n            placeholder: props.placeholder ?? '',\n            maxLength: props.maxLength ?? 1000,\n            width: props.width ?? 400,\n            height: props.height ?? defaultHeight,\n            disabled: props.disabled ?? false,\n            backgroundColor: props.backgroundColor ?? 0xffffff,\n            textColor: props.textColor ?? 0x000000,\n            placeholderColor: props.placeholderColor ?? 0x999999,\n            borderRadius: props.borderRadius ?? 4,\n            fontSize: props.fontSize ?? 14,\n            lineHeight: props.lineHeight ?? 1.5,\n            rows: props.rows ?? 4\n        };\n        this.onChange = props.onChange;\n        this.currentValue = props.value ?? props.defaultValue ?? '';\n        this.boxModel.width = this.props.width;\n        this.boxModel.height = this.props.height;\n        this.background = new ui_panel_1.UIPanel({\n            backgroundColor: this.props.backgroundColor,\n            width: this.props.width,\n            height: this.props.height,\n            borderRadius: this.props.borderRadius\n        });\n        this.container.addChild(this.background.container);\n        this.textDisplay = new pixi_js_1.default.Text({\n            text: this.getDisplayText(),\n            style: {\n                fontFamily: 'Arial',\n                fontSize: this.props.fontSize,\n                fill: this.currentValue ? this.props.textColor : this.props.placeholderColor,\n                align: 'left',\n                wordWrap: true,\n                wordWrapWidth: this.props.width - 24,\n                lineHeight: this.props.fontSize * this.props.lineHeight\n            },\n            resolution: window.devicePixelRatio || 2\n        });\n        this.textDisplay.position.set(12, 12);\n        this.container.addChild(this.textDisplay);\n        this.cursor = new pixi_js_1.default.Graphics();\n        this.cursor.visible = false;\n        this.container.addChild(this.cursor);\n        this.setupInteractivity();\n    }\n    getDisplayText() {\n        if (this.currentValue) {\n            return this.currentValue;\n        }\n        return this.props.placeholder;\n    }\n    setupInteractivity() {\n        this.container.eventMode = 'static';\n        this.container.cursor = 'text';\n        this.container.on('pointerdown', this.handlePointerDown.bind(this));\n        if (typeof window !== 'undefined') {\n            window.addEventListener('keydown', this.handleKeyDown.bind(this));\n        }\n    }\n    handlePointerDown(e) {\n        if (this.props.disabled)\n            return;\n        const focusManager = ui_focus_manager_1.UIFocusManager.getInstance();\n        if (focusManager) {\n            focusManager.requestFocus(this);\n        }\n        else {\n            this.onFocus();\n        }\n        e.stopPropagation();\n    }\n    onFocus() {\n        if (this.focused)\n            return;\n        super.onFocus();\n        this.cursorPosition = this.currentValue.length;\n        this.cursor.visible = true;\n        this.updateCursor();\n        this.startCursorBlink();\n        this.background = new ui_panel_1.UIPanel({\n            backgroundColor: this.lightenColor(this.props.backgroundColor, 0.95),\n            width: this.props.width,\n            height: this.props.height,\n            borderRadius: this.props.borderRadius\n        });\n    }\n    onBlur() {\n        if (!this.focused)\n            return;\n        super.onBlur();\n        this.cursor.visible = false;\n        this.stopCursorBlink();\n        this.background = new ui_panel_1.UIPanel({\n            backgroundColor: this.props.backgroundColor,\n            width: this.props.width,\n            height: this.props.height,\n            borderRadius: this.props.borderRadius\n        });\n    }\n    handleKeyDown(e) {\n        if (!this.focused || this.props.disabled)\n            return;\n        if (e.key !== 'Tab') {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        const key = e.key;\n        if (key === 'Enter') {\n            if (this.currentValue.length < this.props.maxLength) {\n                this.currentValue =\n                    this.currentValue.substring(0, this.cursorPosition) +\n                        '\\n' +\n                        this.currentValue.substring(this.cursorPosition);\n                this.cursorPosition++;\n                this.updateText();\n            }\n            return;\n        }\n        if (key === 'Escape') {\n            this.onBlur();\n            return;\n        }\n        if (key === 'Backspace') {\n            if (this.cursorPosition > 0) {\n                this.currentValue =\n                    this.currentValue.substring(0, this.cursorPosition - 1) +\n                        this.currentValue.substring(this.cursorPosition);\n                this.cursorPosition--;\n                this.updateText();\n            }\n            return;\n        }\n        if (key === 'Delete') {\n            if (this.cursorPosition < this.currentValue.length) {\n                this.currentValue =\n                    this.currentValue.substring(0, this.cursorPosition) +\n                        this.currentValue.substring(this.cursorPosition + 1);\n                this.updateText();\n            }\n            return;\n        }\n        if (key === 'ArrowLeft') {\n            if (this.cursorPosition > 0) {\n                this.cursorPosition--;\n                this.updateCursor();\n            }\n            return;\n        }\n        if (key === 'ArrowRight') {\n            if (this.cursorPosition < this.currentValue.length) {\n                this.cursorPosition++;\n                this.updateCursor();\n            }\n            return;\n        }\n        if (key === 'ArrowUp') {\n            this.moveCursorVertically(-1);\n            return;\n        }\n        if (key === 'ArrowDown') {\n            this.moveCursorVertically(1);\n            return;\n        }\n        if (key === 'Home') {\n            const lineStart = this.currentValue.lastIndexOf('\\n', this.cursorPosition - 1) + 1;\n            this.cursorPosition = lineStart;\n            this.updateCursor();\n            return;\n        }\n        if (key === 'End') {\n            let lineEnd = this.currentValue.indexOf('\\n', this.cursorPosition);\n            if (lineEnd === -1)\n                lineEnd = this.currentValue.length;\n            this.cursorPosition = lineEnd;\n            this.updateCursor();\n            return;\n        }\n        if (key.length === 1 && !e.ctrlKey && !e.metaKey) {\n            if (this.currentValue.length >= this.props.maxLength) {\n                return;\n            }\n            this.currentValue =\n                this.currentValue.substring(0, this.cursorPosition) +\n                    key +\n                    this.currentValue.substring(this.cursorPosition);\n            this.cursorPosition++;\n            this.updateText();\n        }\n    }\n    moveCursorVertically(direction) {\n        const lines = this.currentValue.split('\\n');\n        let currentLine = 0;\n        let positionInLine = 0;\n        let charCount = 0;\n        for (let i = 0; i < lines.length; i++) {\n            if (charCount + lines[i].length >= this.cursorPosition) {\n                currentLine = i;\n                positionInLine = this.cursorPosition - charCount;\n                break;\n            }\n            charCount += lines[i].length + 1;\n        }\n        const targetLine = Math.max(0, Math.min(lines.length - 1, currentLine + direction));\n        if (targetLine === currentLine)\n            return;\n        let newPosition = 0;\n        for (let i = 0; i < targetLine; i++) {\n            newPosition += lines[i].length + 1;\n        }\n        newPosition += Math.min(positionInLine, lines[targetLine].length);\n        this.cursorPosition = newPosition;\n        this.updateCursor();\n    }\n    updateText() {\n        this.textDisplay.text = this.getDisplayText();\n        this.textDisplay.style.fill = this.currentValue ? this.props.textColor : this.props.placeholderColor;\n        this.updateCursor();\n        this.onChange?.(this.currentValue);\n    }\n    updateCursor() {\n        const textUpToCursor = this.currentValue.substring(0, this.cursorPosition);\n        const tempText = new pixi_js_1.default.Text({\n            text: textUpToCursor,\n            style: {\n                ...this.textDisplay.style,\n                wordWrap: true,\n                wordWrapWidth: this.props.width - 24\n            }\n        });\n        const metrics = tempText.getLocalBounds();\n        const lines = textUpToCursor.split('\\n');\n        const lastLine = lines[lines.length - 1];\n        const lastLineText = new pixi_js_1.default.Text({\n            text: lastLine,\n            style: this.textDisplay.style\n        });\n        const cursorX = 12 + lastLineText.width;\n        const cursorY = 12 + (lines.length - 1) * (this.props.fontSize * this.props.lineHeight);\n        this.cursor.clear();\n        this.cursor.rect(cursorX, cursorY, 1, this.props.fontSize);\n        this.cursor.fill({ color: this.props.textColor });\n        tempText.destroy();\n        lastLineText.destroy();\n    }\n    startCursorBlink() {\n        this.stopCursorBlink();\n        this.cursorVisible = true;\n        this.cursorBlinkInterval = window.setInterval(() => {\n            this.cursorVisible = !this.cursorVisible;\n            this.cursor.visible = this.cursorVisible;\n        }, 530);\n    }\n    stopCursorBlink() {\n        if (this.cursorBlinkInterval) {\n            window.clearInterval(this.cursorBlinkInterval);\n            this.cursorBlinkInterval = undefined;\n        }\n    }\n    lightenColor(color, factor) {\n        const r = Math.min(255, ((color >> 16) & 0xff) / factor);\n        const g = Math.min(255, ((color >> 8) & 0xff) / factor);\n        const b = Math.min(255, (color & 0xff) / factor);\n        return ((r << 16) | (g << 8) | b) >>> 0;\n    }\n    measure() {\n        return {\n            width: this.props.width,\n            height: this.props.height\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const measured = this.measure();\n        this.computedLayout.width = measured.width;\n        this.computedLayout.height = measured.height;\n        this.background.layout(measured.width, measured.height);\n        this.layoutDirty = false;\n        this.render();\n    }\n    render() {\n    }\n    setValue(value) {\n        this.currentValue = value;\n        this.cursorPosition = value.length;\n        this.updateText();\n    }\n    getValue() {\n        return this.currentValue;\n    }\n    destroy() {\n        this.stopCursorBlink();\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('keydown', this.handleKeyDown.bind(this));\n        }\n        super.destroy();\n    }\n}\nexports.UITextArea = UITextArea;\n\n\n/***/ }),\n\n/***/ \"./src/ui/core/box-model.ts\":\n/*!**********************************!*\\\n  !*** ./src/ui/core/box-model.ts ***!\n  \\**********************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createDefaultBoxModel = createDefaultBoxModel;\nconst edge_insets_1 = __webpack_require__(/*! ./edge-insets */ \"./src/ui/core/edge-insets.ts\");\nfunction createDefaultBoxModel(overrides) {\n    return {\n        width: 'auto',\n        height: 'auto',\n        padding: edge_insets_1.EdgeInsets.zero(),\n        margin: edge_insets_1.EdgeInsets.zero(),\n        ...overrides\n    };\n}\n\n\n/***/ }),\n\n/***/ \"./src/ui/core/edge-insets.ts\":\n/*!************************************!*\\\n  !*** ./src/ui/core/edge-insets.ts ***!\n  \\************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.EdgeInsets = void 0;\nclass EdgeInsets {\n    top;\n    right;\n    bottom;\n    left;\n    constructor(top, right, bottom, left) {\n        this.top = top;\n        this.right = right;\n        this.bottom = bottom;\n        this.left = left;\n    }\n    static all(value) {\n        return new EdgeInsets(value, value, value, value);\n    }\n    static symmetric(vertical, horizontal) {\n        return new EdgeInsets(vertical, horizontal, vertical, horizontal);\n    }\n    static only(edges) {\n        return new EdgeInsets(edges.top ?? 0, edges.right ?? 0, edges.bottom ?? 0, edges.left ?? 0);\n    }\n    static zero() {\n        return new EdgeInsets(0, 0, 0, 0);\n    }\n    get horizontal() {\n        return this.left + this.right;\n    }\n    get vertical() {\n        return this.top + this.bottom;\n    }\n    clone() {\n        return new EdgeInsets(this.top, this.right, this.bottom, this.left);\n    }\n}\nexports.EdgeInsets = EdgeInsets;\n\n\n/***/ }),\n\n/***/ \"./src/ui/core/ui-component.ts\":\n/*!*************************************!*\\\n  !*** ./src/ui/core/ui-component.ts ***!\n  \\*************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UIComponent = void 0;\nconst pixi_js_1 = __importDefault(__webpack_require__(/*! pixi.js */ \"pixi.js\"));\nconst box_model_1 = __webpack_require__(/*! ./box-model */ \"./src/ui/core/box-model.ts\");\nclass UIComponent {\n    container;\n    boxModel;\n    focusRing;\n    computedLayout;\n    parent;\n    visible = true;\n    enabled = true;\n    layoutDirty = true;\n    tabIndex = -1;\n    focused = false;\n    constructor(boxModel) {\n        this.container = new pixi_js_1.default.Container();\n        this.boxModel = (0, box_model_1.createDefaultBoxModel)(boxModel);\n        this.computedLayout = {\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n            contentX: 0,\n            contentY: 0,\n            contentWidth: 0,\n            contentHeight: 0\n        };\n        this.createFocusRing();\n    }\n    createFocusRing() {\n        this.focusRing = new pixi_js_1.default.Graphics();\n        this.focusRing.visible = false;\n        this.container.addChildAt(this.focusRing, 0);\n    }\n    updateFocusRing() {\n        if (!this.focusRing)\n            return;\n        this.focusRing.clear();\n        const width = this.computedLayout.width;\n        const height = this.computedLayout.height;\n        if (width <= 0 || height <= 0)\n            return;\n        const offset = 4;\n        const strokeWidth = 3;\n        this.focusRing.roundRect(-offset - 2, -offset - 2, width + (offset + 2) * 2, height + (offset + 2) * 2, 8);\n        this.focusRing.stroke({\n            color: 0x00d9ff,\n            width: strokeWidth + 2,\n            alpha: 0.3\n        });\n        this.focusRing.roundRect(-offset, -offset, width + offset * 2, height + offset * 2, 8);\n        this.focusRing.stroke({\n            color: 0x00d9ff,\n            width: strokeWidth\n        });\n        this.focusRing.roundRect(-offset + strokeWidth, -offset + strokeWidth, width + (offset - strokeWidth) * 2, height + (offset - strokeWidth) * 2, 6);\n        this.focusRing.stroke({\n            color: 0xffffff,\n            width: 1,\n            alpha: 0.6\n        });\n    }\n    markLayoutDirty() {\n        this.layoutDirty = true;\n        if (this.parent) {\n            this.parent.markLayoutDirty();\n        }\n    }\n    getLayout() {\n        return this.computedLayout;\n    }\n    getBoxModel() {\n        return this.boxModel;\n    }\n    getGlobalBounds() {\n        const globalPos = this.container.getGlobalPosition();\n        return {\n            x: globalPos.x,\n            y: globalPos.y,\n            width: this.computedLayout.width,\n            height: this.computedLayout.height\n        };\n    }\n    setPosition(x, y) {\n        this.computedLayout.x = x;\n        this.computedLayout.y = y;\n        this.container.position.set(x, y);\n    }\n    show() {\n        this.visible = true;\n        this.container.visible = true;\n    }\n    hide() {\n        this.visible = false;\n        this.container.visible = false;\n    }\n    canFocus() {\n        return this.enabled && this.visible && this.tabIndex >= 0;\n    }\n    isFocused() {\n        return this.focused;\n    }\n    onFocus() {\n        this.focused = true;\n        this.showFocusRing();\n        this.scrollIntoView();\n    }\n    showFocusRing() {\n        if (this.focusRing) {\n            this.updateFocusRing();\n            this.focusRing.visible = true;\n        }\n    }\n    scrollIntoView() {\n        let currentParent = this.parent;\n        while (currentParent) {\n            if ('scrollToComponent' in currentParent && typeof currentParent.scrollToComponent === 'function') {\n                currentParent.scrollToComponent(this);\n                break;\n            }\n            currentParent = currentParent.parent;\n        }\n    }\n    onBlur() {\n        this.focused = false;\n        this.hideFocusRing();\n    }\n    hideFocusRing() {\n        if (this.focusRing) {\n            this.focusRing.visible = false;\n        }\n    }\n    destroy() {\n        this.container.destroy({ children: true });\n    }\n}\nexports.UIComponent = UIComponent;\n\n\n/***/ }),\n\n/***/ \"./src/ui/core/ui-focus-manager.ts\":\n/*!*****************************************!*\\\n  !*** ./src/ui/core/ui-focus-manager.ts ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.UIFocusManager = void 0;\nclass UIFocusManager {\n    static instance = null;\n    focusableComponents = [];\n    currentFocusIndex = -1;\n    keydownHandler = null;\n    constructor() {\n        this.setupKeyboardListeners();\n        UIFocusManager.instance = this;\n    }\n    static getInstance() {\n        return UIFocusManager.instance;\n    }\n    setupKeyboardListeners() {\n        if (typeof window === 'undefined')\n            return;\n        if (this.keydownHandler) {\n            window.removeEventListener('keydown', this.keydownHandler);\n        }\n        this.keydownHandler = (e) => {\n            if (e.key === 'Tab') {\n                e.preventDefault();\n                if (e.shiftKey) {\n                    this.focusPrevious();\n                }\n                else {\n                    this.focusNext();\n                }\n            }\n        };\n        window.addEventListener('keydown', this.keydownHandler);\n    }\n    register(component) {\n        if (!this.focusableComponents.includes(component)) {\n            this.focusableComponents.push(component);\n            this.sortByTabIndex();\n        }\n    }\n    registerContainer(container) {\n        this.discoverFocusableComponents(container);\n        this.sortByTabIndex();\n    }\n    discoverFocusableComponents(component) {\n        if (this.isFocusableComponent(component)) {\n            this.register(component);\n        }\n        if ('children' in component && Array.isArray(component.children)) {\n            const children = component.children;\n            children.forEach(child => this.discoverFocusableComponents(child));\n        }\n    }\n    isFocusableComponent(component) {\n        return (typeof component.tabIndex === 'number' &&\n            component.tabIndex >= 0 &&\n            typeof component.canFocus === 'function' &&\n            typeof component.onFocus === 'function' &&\n            typeof component.onBlur === 'function' &&\n            typeof component.isFocused === 'function');\n    }\n    unregister(component) {\n        const index = this.focusableComponents.indexOf(component);\n        if (index !== -1) {\n            if (index === this.currentFocusIndex) {\n                this.blur();\n            }\n            this.focusableComponents.splice(index, 1);\n            if (this.currentFocusIndex > index) {\n                this.currentFocusIndex--;\n            }\n        }\n    }\n    sortByTabIndex() {\n        this.focusableComponents.sort((a, b) => a.tabIndex - b.tabIndex);\n    }\n    focus(component) {\n        if (!component.canFocus()) {\n            return;\n        }\n        const index = this.focusableComponents.indexOf(component);\n        if (index === -1) {\n            return;\n        }\n        if (this.currentFocusIndex !== -1 && this.currentFocusIndex !== index) {\n            const current = this.focusableComponents[this.currentFocusIndex];\n            if (current) {\n                current.onBlur();\n            }\n        }\n        this.currentFocusIndex = index;\n        component.onFocus();\n    }\n    requestFocus(component) {\n        this.focus(component);\n    }\n    blur() {\n        if (this.currentFocusIndex !== -1) {\n            const current = this.focusableComponents[this.currentFocusIndex];\n            if (current) {\n                current.onBlur();\n            }\n            this.currentFocusIndex = -1;\n        }\n    }\n    focusNext() {\n        if (this.focusableComponents.length === 0)\n            return;\n        let nextIndex = this.currentFocusIndex + 1;\n        let attempts = 0;\n        while (attempts < this.focusableComponents.length) {\n            if (nextIndex >= this.focusableComponents.length) {\n                nextIndex = 0;\n            }\n            const component = this.focusableComponents[nextIndex];\n            if (component && component.canFocus()) {\n                this.focus(component);\n                return;\n            }\n            nextIndex++;\n            attempts++;\n        }\n    }\n    focusPrevious() {\n        if (this.focusableComponents.length === 0)\n            return;\n        let prevIndex = this.currentFocusIndex - 1;\n        let attempts = 0;\n        while (attempts < this.focusableComponents.length) {\n            if (prevIndex < 0) {\n                prevIndex = this.focusableComponents.length - 1;\n            }\n            const component = this.focusableComponents[prevIndex];\n            if (component && component.canFocus()) {\n                this.focus(component);\n                return;\n            }\n            prevIndex--;\n            attempts++;\n        }\n    }\n    focusFirst() {\n        if (this.focusableComponents.length === 0)\n            return;\n        for (const component of this.focusableComponents) {\n            if (component.canFocus()) {\n                this.focus(component);\n                return;\n            }\n        }\n    }\n    focusLast() {\n        if (this.focusableComponents.length === 0)\n            return;\n        for (let i = this.focusableComponents.length - 1; i >= 0; i--) {\n            const component = this.focusableComponents[i];\n            if (component.canFocus()) {\n                this.focus(component);\n                return;\n            }\n        }\n    }\n    getCurrentFocus() {\n        if (this.currentFocusIndex === -1)\n            return null;\n        return this.focusableComponents[this.currentFocusIndex] || null;\n    }\n    getFocusableComponents() {\n        return [...this.focusableComponents];\n    }\n    clear() {\n        this.blur();\n        this.focusableComponents = [];\n        this.currentFocusIndex = -1;\n    }\n    destroy() {\n        if (typeof window !== 'undefined' && this.keydownHandler) {\n            window.removeEventListener('keydown', this.keydownHandler);\n        }\n        this.clear();\n    }\n}\nexports.UIFocusManager = UIFocusManager;\n\n\n/***/ }),\n\n/***/ \"./src/ui/layout/flex-container.ts\":\n/*!*****************************************!*\\\n  !*** ./src/ui/layout/flex-container.ts ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FlexContainer = exports.FlexAlign = exports.FlexJustify = exports.FlexDirection = void 0;\nconst ui_component_1 = __webpack_require__(/*! ../core/ui-component */ \"./src/ui/core/ui-component.ts\");\nconst edge_insets_1 = __webpack_require__(/*! ../core/edge-insets */ \"./src/ui/core/edge-insets.ts\");\nvar FlexDirection;\n(function (FlexDirection) {\n    FlexDirection[\"Row\"] = \"row\";\n    FlexDirection[\"RowReverse\"] = \"row-reverse\";\n    FlexDirection[\"Column\"] = \"column\";\n    FlexDirection[\"ColumnReverse\"] = \"column-reverse\";\n})(FlexDirection || (exports.FlexDirection = FlexDirection = {}));\nvar FlexJustify;\n(function (FlexJustify) {\n    FlexJustify[\"Start\"] = \"start\";\n    FlexJustify[\"End\"] = \"end\";\n    FlexJustify[\"Center\"] = \"center\";\n    FlexJustify[\"SpaceBetween\"] = \"space-between\";\n    FlexJustify[\"SpaceAround\"] = \"space-around\";\n    FlexJustify[\"SpaceEvenly\"] = \"space-evenly\";\n})(FlexJustify || (exports.FlexJustify = FlexJustify = {}));\nvar FlexAlign;\n(function (FlexAlign) {\n    FlexAlign[\"Start\"] = \"start\";\n    FlexAlign[\"End\"] = \"end\";\n    FlexAlign[\"Center\"] = \"center\";\n    FlexAlign[\"Stretch\"] = \"stretch\";\n})(FlexAlign || (exports.FlexAlign = FlexAlign = {}));\nclass FlexContainer extends ui_component_1.UIComponent {\n    props;\n    children = [];\n    constructor(props = {}) {\n        const boxModel = {\n            padding: props.padding ?? edge_insets_1.EdgeInsets.zero(),\n            width: props.width ?? 'auto',\n            height: props.height ?? 'auto'\n        };\n        super(boxModel);\n        this.props = {\n            direction: props.direction ?? FlexDirection.Row,\n            justify: props.justify ?? FlexJustify.Start,\n            align: props.align ?? FlexAlign.Start,\n            gap: props.gap ?? 0,\n            wrap: props.wrap ?? false\n        };\n    }\n    addChild(child) {\n        child.parent = this;\n        this.children.push(child);\n        this.container.addChild(child.container);\n        this.markLayoutDirty();\n    }\n    removeChild(child) {\n        const index = this.children.indexOf(child);\n        if (index !== -1) {\n            this.children.splice(index, 1);\n            this.container.removeChild(child.container);\n            child.parent = undefined;\n            this.markLayoutDirty();\n        }\n    }\n    measure() {\n        if (this.children.length === 0) {\n            const padding = this.boxModel.padding;\n            return {\n                width: padding.horizontal,\n                height: padding.vertical\n            };\n        }\n        const childSizes = this.children.map(child => child.measure());\n        const { direction, gap } = this.props;\n        const padding = this.boxModel.padding;\n        const isRow = direction === FlexDirection.Row || direction === FlexDirection.RowReverse;\n        const totalGap = gap * (this.children.length - 1);\n        let measuredWidth = 0;\n        let measuredHeight = 0;\n        if (isRow) {\n            measuredWidth = childSizes.reduce((sum, size) => sum + size.width, 0) + totalGap;\n            measuredHeight = Math.max(...childSizes.map(size => size.height));\n        }\n        else {\n            measuredWidth = Math.max(...childSizes.map(size => size.width));\n            measuredHeight = childSizes.reduce((sum, size) => sum + size.height, 0) + totalGap;\n        }\n        return {\n            width: measuredWidth + padding.horizontal,\n            height: measuredHeight + padding.vertical\n        };\n    }\n    layout(availableWidth, availableHeight) {\n        const padding = this.boxModel.padding;\n        const { direction, justify, align, gap } = this.props;\n        let containerWidth;\n        let containerHeight;\n        if (this.boxModel.width === 'fill') {\n            containerWidth = availableWidth;\n        }\n        else if (typeof this.boxModel.width === 'number') {\n            containerWidth = this.boxModel.width;\n        }\n        else {\n            const measured = this.measure();\n            containerWidth = measured.width;\n        }\n        if (this.boxModel.height === 'fill') {\n            containerHeight = availableHeight;\n        }\n        else if (typeof this.boxModel.height === 'number') {\n            containerHeight = this.boxModel.height;\n        }\n        else {\n            const measured = this.measure();\n            containerHeight = measured.height;\n        }\n        this.computedLayout.width = containerWidth;\n        this.computedLayout.height = containerHeight;\n        this.computedLayout.contentX = padding.left;\n        this.computedLayout.contentY = padding.top;\n        this.computedLayout.contentWidth = containerWidth - padding.horizontal;\n        this.computedLayout.contentHeight = containerHeight - padding.vertical;\n        if (this.children.length > 0) {\n            this.layoutChildren();\n        }\n        this.layoutDirty = false;\n        this.render();\n    }\n    layoutChildren() {\n        const { direction, justify, align, gap } = this.props;\n        const padding = this.boxModel.padding;\n        const contentWidth = this.computedLayout.contentWidth;\n        const contentHeight = this.computedLayout.contentHeight;\n        const isRow = direction === FlexDirection.Row || direction === FlexDirection.RowReverse;\n        const childSizes = this.children.map(child => child.measure());\n        const totalGap = gap * (this.children.length - 1);\n        const totalChildSize = isRow\n            ? childSizes.reduce((sum, size) => sum + size.width, 0)\n            : childSizes.reduce((sum, size) => sum + size.height, 0);\n        const mainAxisSize = isRow ? contentWidth : contentHeight;\n        const crossAxisSize = isRow ? contentHeight : contentWidth;\n        const freeSpace = mainAxisSize - totalChildSize - totalGap;\n        let mainAxisOffset = 0;\n        let spaceBetween = 0;\n        switch (justify) {\n            case FlexJustify.Start:\n                mainAxisOffset = 0;\n                break;\n            case FlexJustify.End:\n                mainAxisOffset = freeSpace;\n                break;\n            case FlexJustify.Center:\n                mainAxisOffset = freeSpace / 2;\n                break;\n            case FlexJustify.SpaceBetween:\n                spaceBetween = this.children.length > 1 ? freeSpace / (this.children.length - 1) : 0;\n                break;\n            case FlexJustify.SpaceAround:\n                spaceBetween = freeSpace / this.children.length;\n                mainAxisOffset = spaceBetween / 2;\n                break;\n            case FlexJustify.SpaceEvenly:\n                spaceBetween = freeSpace / (this.children.length + 1);\n                mainAxisOffset = spaceBetween;\n                break;\n        }\n        let currentPosition = mainAxisOffset;\n        this.children.forEach((child, index) => {\n            const childSize = childSizes[index];\n            child.layout(childSize.width, childSize.height);\n            let crossAxisPosition = 0;\n            switch (align) {\n                case FlexAlign.Start:\n                    crossAxisPosition = 0;\n                    break;\n                case FlexAlign.End:\n                    crossAxisPosition = crossAxisSize - (isRow ? childSize.height : childSize.width);\n                    break;\n                case FlexAlign.Center:\n                    crossAxisPosition = (crossAxisSize - (isRow ? childSize.height : childSize.width)) / 2;\n                    break;\n                case FlexAlign.Stretch:\n                    crossAxisPosition = 0;\n                    break;\n            }\n            if (isRow) {\n                child.setPosition(padding.left + currentPosition, padding.top + crossAxisPosition);\n                currentPosition += childSize.width + gap + spaceBetween;\n            }\n            else {\n                child.setPosition(padding.left + crossAxisPosition, padding.top + currentPosition);\n                currentPosition += childSize.height + gap + spaceBetween;\n            }\n        });\n    }\n    render() {\n    }\n}\nexports.FlexContainer = FlexContainer;\n\n\n/***/ }),\n\n/***/ \"./src/ui/pixel-grid.ts\":\n/*!******************************!*\\\n  !*** ./src/ui/pixel-grid.ts ***!\n  \\******************************/\n/***/ ((__unused_webpack_module, exports) => {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.BORDER = exports.GRID = exports.units = exports.px = exports.DEFAULT_PIXEL_GRID = exports.PixelGrid = void 0;\nexports.createBorderConfig = createBorderConfig;\nclass PixelGrid {\n    unit;\n    scale;\n    border;\n    padding;\n    gap;\n    margin;\n    fontScale;\n    constructor(config = {}) {\n        this.unit = config.unit ?? 1;\n        this.scale = config.scale ?? 4;\n        this.border = config.border ?? 1;\n        this.padding = config.padding ?? 1;\n        this.gap = config.gap ?? 1;\n        this.margin = config.margin ?? 5;\n        this.fontScale = config.fontScale ?? (this.scale / 16);\n    }\n    px(units) {\n        return units * this.unit * this.scale;\n    }\n    units(pixels) {\n        return Math.round(pixels / (this.unit * this.scale));\n    }\n}\nexports.PixelGrid = PixelGrid;\nexports.DEFAULT_PIXEL_GRID = (() => {\n    const tempScale = typeof localStorage !== 'undefined'\n        ? localStorage.getItem('temp-grid-scale')\n        : null;\n    if (tempScale) {\n        const scale = parseInt(tempScale, 10);\n        if (!isNaN(scale) && scale >= 1 && scale <= 4) {\n            return new PixelGrid({ scale });\n        }\n    }\n    return new PixelGrid();\n})();\nconst px = (units) => exports.DEFAULT_PIXEL_GRID.px(units);\nexports.px = px;\nconst units = (pixels) => exports.DEFAULT_PIXEL_GRID.units(pixels);\nexports.units = units;\nexports.GRID = {\n    unit: exports.DEFAULT_PIXEL_GRID.unit,\n    scale: exports.DEFAULT_PIXEL_GRID.scale,\n    border: exports.DEFAULT_PIXEL_GRID.border,\n    padding: exports.DEFAULT_PIXEL_GRID.padding,\n    gap: exports.DEFAULT_PIXEL_GRID.gap,\n    margin: exports.DEFAULT_PIXEL_GRID.margin,\n    fontScale: exports.DEFAULT_PIXEL_GRID.fontScale\n};\nexports.BORDER = {\n    outer: 1,\n    middle: 1,\n    inner: 1,\n    total: 3\n};\nfunction createBorderConfig(config = {}) {\n    const outer = config.outer ?? 1;\n    const middle = config.middle ?? 1;\n    const inner = config.inner ?? 1;\n    const total = outer + middle + inner;\n    return {\n        outer,\n        middle,\n        inner,\n        total\n    };\n}\n\n\n/***/ }),\n\n/***/ \"pixi.js\":\n/*!*******************************************************************************************!*\\\n  !*** external {\"commonjs\":\"pixi.js\",\"commonjs2\":\"pixi.js\",\"amd\":\"pixi.js\",\"root\":\"PIXI\"} ***!\n  \\*******************************************************************************************/\n/***/ ((module) => {\n\n\"use strict\";\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_pixi_js__;\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can't be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixXQUFXO0FBQ3JDO0FBQ0EsZ0NBQWdDLFdBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOEJBQThCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsR0FBRztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsUUFBUTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLEdBQUc7QUFDNUMsMEJBQTBCLG9CQUFvQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxHQUFHO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLDJDQUEyQyxHQUFHO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLEdBQUc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsR0FBRztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxHQUFHO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLElBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGVBQWU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixlQUFlO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLDBEQUEwRDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyx3REFBd0Q7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkJBQTZCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkJBQTZCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLElBQUk7QUFDNUM7QUFDQTtBQUNBLDRDQUE0QyxLQUFLO0FBQ2pEO0FBQ0E7QUFDQSx3Q0FBd0MsR0FBRztBQUMzQztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsTUFBTTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxJQUFJO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxJQUFJO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEJBQTBCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQkFBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNEJBQTRCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0QkFBNEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNEJBQTRCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBCQUEwQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkJBQTZCO0FBQ3JELDBCQUEwQiwwQkFBMEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDRCQUE0QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw0QkFBNEI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBCQUEwQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkJBQTZCO0FBQ3JEO0FBQ0EsMEJBQTBCLDRCQUE0QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEJBQTBCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQkFBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBCQUEwQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDBCQUEwQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsSUFBSTtBQUM5QztBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsS0FBSztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsS0FBSztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbUJBQW1CO0FBQzdDO0FBQ0E7QUFDQSxnREFBZ0QsSUFBSTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEJBQTBCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxJQUFJO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQkFBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRCQUE0QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0NBQWdDO0FBQ3hEO0FBQ0EsMEJBQTBCLDRCQUE0QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRCQUE0QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0NBQWdDO0FBQ3hELDBCQUEwQiw0QkFBNEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQkFBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOEJBQThCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxzREFBc0Q7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsa0VBQWtFO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsa0RBQWtEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscUJBQXFCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixxQkFBcUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esb0JBQW9CLDBCQUEwQjtBQUM5QztBQUNBO0FBQ0Esc0JBQXNCLDBCQUEwQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMEJBQTBCO0FBQzlDO0FBQ0E7QUFDQSxzQkFBc0IsMEJBQTBCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxpQkFBaUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxnQkFBZ0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3Q0FBd0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnQ0FBZ0M7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUJBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHVCQUF1QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxJQUFJO0FBQzlDO0FBQ0E7QUFDQSwwQ0FBMEMsR0FBRztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxRQUFRO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxJQUFJO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsTUFBTTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLElBQUk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsR0FBRztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsTUFBTTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsSUFBSTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBCQUEwQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxQkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEJBQTBCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBLHdCQUF3QiwyQkFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQSwwQkFBMEIsZUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtCQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0JBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsb0NBQW9DO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLG9DQUFvQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLGdDQUFnQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0JBQW9CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsWUFBWTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBCQUEwQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQkFBaUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLGdDQUFnQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxnQ0FBZ0M7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUNBQXlDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHFCQUFxQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IscUJBQXFCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxQkFBcUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0NBQXdDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlCQUF5QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQTBCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyx3QkFBd0IsaUJBQWlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNmLEtBQUssRUFBRSxHQUFHO1NBQ1gsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUd2QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRSxNQUFNLFNBQVMsR0FBRyxDQUFDLENBQUM7UUFDcEIsTUFBTSxNQUFNLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO1FBQ3JDLE1BQU0sTUFBTSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQztRQUVyQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FDbEIsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLFNBQVMsRUFDekMsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLFNBQVMsQ0FDMUMsQ0FBQztRQUNGLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUNsQixRQUFRLENBQUMsQ0FB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QUVBO1VBQ0E7VUFDQTs7OztVRXRCQTtVQUNBO1VBQ0E7VUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21veGkvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL21veGkvLi4vLi4vbm9kZV9tb2R1bGVzL2ZvbnRmYWNlb2JzZXJ2ZXIvZm9udGZhY2VvYnNlcnZlci5zdGFuZGFsb25lLmpzIiwid2VicGFjazovL21veGkvLi4vLi4vbm9kZV9tb2R1bGVzL3BsYW5jay9kaXN0L3BsYW5jay5qcyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbGlicmFyeS9hY3Rpb24tbWFuYWdlci50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvYXMtcGl4aS50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvY2xpZW50LWV2ZW50cy50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvZmFsbGluZy1zcXVhcmVzLWFuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvZm9udC1sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9saWJyYXJ5L2dyaWQtZ2VuZXJhdG9yLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbGlicmFyeS9sb2FkaW5nLXNjZW5lLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbGlicmFyeS9wYXJhbGxheC1iYWNrZ3JvdW5kLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbGlicmFyeS9wYXJhbGxheC1sYXllci50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvcGh5c2ljcy9pbmRleC50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvcGh5c2ljcy9waHlzaWNzLWJvZHktbG9naWMudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9saWJyYXJ5L3BoeXNpY3MvcGh5c2ljcy1jb2xsaXNpb24udHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9saWJyYXJ5L3BoeXNpY3MvcGh5c2ljcy1kZWJ1Zy1yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvcGh5c2ljcy9waHlzaWNzLWdyYXBoaWNzLXBhcnNlci50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvcGh5c2ljcy9waHlzaWNzLW1hdGVyaWFscy50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvcGh5c2ljcy9waHlzaWNzLXV0aWxzLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbGlicmFyeS9waHlzaWNzL3BoeXNpY3Mtd29ybGQudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9saWJyYXJ5L3Jlc2l6ZS1oYW5kbGVyLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbGlicmFyeS9zZXR1cC50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvc3RhdGUtbG9naWMudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9saWJyYXJ5L3N0YXRlLW1hY2hpbmUudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9saWJyYXJ5L3N2Zy11dGlscy9zdmctdG8tdGV4dHVyZS50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL2xpYnJhcnkvdGV4dHVyZS1mcmFtZS1zZXF1ZW5jZXMudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9saWJyYXJ5L3RleHR1cmUtZnJhbWVzLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbGlicmFyeS91dGlscy50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL21haW4vYXNzZXQtbG9hZGVyLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbWFpbi9jYW1lcmEudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9tYWluL2VuZ2luZS50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL21haW4vZXZlbnQtc3lzdGVtLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbWFpbi9sb2dpYy50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL21haW4vbW94aS1lbnRpdHkudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy9tYWluL3JlbmRlci1tYW5hZ2VyLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvbWFpbi9zY2VuZS50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL1VJTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy91aS9VSVNjYWxlTW9kZS50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2NvbXBvbmVudHMvYnV0dG9uLWJhY2tncm91bmQtc3RyYXRlZ3kudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy91aS9jb21wb25lbnRzL3VpLWJveC50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2NvbXBvbmVudHMvdWktYnV0dG9uLnRzIiwid2VicGFjazovL21veGkvLi9zcmMvdWkvY29tcG9uZW50cy91aS1sYWJlbC50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2NvbXBvbmVudHMvdWktcGFuZWwudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy91aS9jb21wb25lbnRzL3VpLXNjcm9sbC1jb250YWluZXIudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy91aS9jb21wb25lbnRzL3VpLXNlbGVjdC50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2NvbXBvbmVudHMvdWktdGFicy50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2NvbXBvbmVudHMvdWktdGV4dC1pbnB1dC50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2NvbXBvbmVudHMvdWktdGV4dGFyZWEudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy91aS9jb3JlL2JveC1tb2RlbC50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2NvcmUvZWRnZS1pbnNldHMudHMiLCJ3ZWJwYWNrOi8vbW94aS8uL3NyYy91aS9jb3JlL3VpLWNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2NvcmUvdWktZm9jdXMtbWFuYWdlci50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL2xheW91dC9mbGV4LWNvbnRhaW5lci50cyIsIndlYnBhY2s6Ly9tb3hpLy4vc3JjL3VpL3BpeGVsLWdyaWQudHMiLCJ3ZWJwYWNrOi8vbW94aS9leHRlcm5hbCB1bWQge1wiY29tbW9uanNcIjpcInBpeGkuanNcIixcImNvbW1vbmpzMlwiOlwicGl4aS5qc1wiLFwiYW1kXCI6XCJwaXhpLmpzXCIsXCJyb290XCI6XCJQSVhJXCJ9Iiwid2VicGFjazovL21veGkvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbW94aS93ZWJwYWNrL2JlZm9yZS1zdGFydHVwIiwid2VicGFjazovL21veGkvd2VicGFjay9zdGFydHVwIiwid2VicGFjazovL21veGkvd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInBpeGkuanNcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wicGl4aS5qc1wiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJtb3hpXCJdID0gZmFjdG9yeShyZXF1aXJlKFwicGl4aS5qc1wiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wibW94aVwiXSA9IGZhY3Rvcnkocm9vdFtcIlBJWElcIl0pO1xufSkoc2VsZiwgKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfcGl4aV9qc19fKSA9PiB7XG5yZXR1cm4gIiwiLyogRm9udCBGYWNlIE9ic2VydmVyIHYyLjMuMCAtIMKpIEJyYW0gU3RlaW4uIExpY2Vuc2U6IEJTRC0zLUNsYXVzZSAqLyhmdW5jdGlvbigpe2Z1bmN0aW9uIHAoYSxjKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLGMsITEpOmEuYXR0YWNoRXZlbnQoXCJzY3JvbGxcIixjKX1mdW5jdGlvbiB1KGEpe2RvY3VtZW50LmJvZHk/YSgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbiBiKCl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixiKTthKCl9KTpkb2N1bWVudC5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGZ1bmN0aW9uIGcoKXtpZihcImludGVyYWN0aXZlXCI9PWRvY3VtZW50LnJlYWR5U3RhdGV8fFwiY29tcGxldGVcIj09ZG9jdW1lbnQucmVhZHlTdGF0ZSlkb2N1bWVudC5kZXRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGcpLGEoKX0pfTtmdW5jdGlvbiB3KGEpe3RoaXMuZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RoaXMuZy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKTt0aGlzLmcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSkpO3RoaXMuaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTt0aGlzLmk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7dGhpcy5tPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO3RoaXMuaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTt0aGlzLmw9LTE7dGhpcy5oLnN0eWxlLmNzc1RleHQ9XCJtYXgtd2lkdGg6bm9uZTtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO292ZXJmbG93OnNjcm9sbDtmb250LXNpemU6MTZweDtcIjt0aGlzLmkuc3R5bGUuY3NzVGV4dD1cIm1heC13aWR0aDpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7b3ZlcmZsb3c6c2Nyb2xsO2ZvbnQtc2l6ZToxNnB4O1wiO1xudGhpcy5qLnN0eWxlLmNzc1RleHQ9XCJtYXgtd2lkdGg6bm9uZTtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO292ZXJmbG93OnNjcm9sbDtmb250LXNpemU6MTZweDtcIjt0aGlzLm0uc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjIwMCU7aGVpZ2h0OjIwMCU7Zm9udC1zaXplOjE2cHg7bWF4LXdpZHRoOm5vbmU7XCI7dGhpcy5oLmFwcGVuZENoaWxkKHRoaXMubSk7dGhpcy5pLmFwcGVuZENoaWxkKHRoaXMuaik7dGhpcy5nLmFwcGVuZENoaWxkKHRoaXMuaCk7dGhpcy5nLmFwcGVuZENoaWxkKHRoaXMuaSl9XG5mdW5jdGlvbiB4KGEsYyl7YS5nLnN0eWxlLmNzc1RleHQ9XCJtYXgtd2lkdGg6bm9uZTttaW4td2lkdGg6MjBweDttaW4taGVpZ2h0OjIwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOmF1dG87bWFyZ2luOjA7cGFkZGluZzowO3RvcDotOTk5cHg7d2hpdGUtc3BhY2U6bm93cmFwO2ZvbnQtc3ludGhlc2lzOm5vbmU7Zm9udDpcIitjK1wiO1wifWZ1bmN0aW9uIEIoYSl7dmFyIGM9YS5nLm9mZnNldFdpZHRoLGI9YysxMDA7YS5qLnN0eWxlLndpZHRoPWIrXCJweFwiO2EuaS5zY3JvbGxMZWZ0PWI7YS5oLnNjcm9sbExlZnQ9YS5oLnNjcm9sbFdpZHRoKzEwMDtyZXR1cm4gYS5sIT09Yz8oYS5sPWMsITApOiExfWZ1bmN0aW9uIEMoYSxjKXtmdW5jdGlvbiBiKCl7dmFyIGU9ZztCKGUpJiZudWxsIT09ZS5nLnBhcmVudE5vZGUmJmMoZS5sKX12YXIgZz1hO3AoYS5oLGIpO3AoYS5pLGIpO0IoYSl9O2Z1bmN0aW9uIEQoYSxjLGIpe2M9Y3x8e307Yj1ifHx3aW5kb3c7dGhpcy5mYW1pbHk9YTt0aGlzLnN0eWxlPWMuc3R5bGV8fFwibm9ybWFsXCI7dGhpcy53ZWlnaHQ9Yy53ZWlnaHR8fFwibm9ybWFsXCI7dGhpcy5zdHJldGNoPWMuc3RyZXRjaHx8XCJub3JtYWxcIjt0aGlzLmNvbnRleHQ9Yn12YXIgRT1udWxsLEY9bnVsbCxHPW51bGwsSD1udWxsO2Z1bmN0aW9uIEkoYSl7bnVsbD09PUYmJihNKGEpJiYvQXBwbGUvLnRlc3Qod2luZG93Lm5hdmlnYXRvci52ZW5kb3IpPyhhPS9BcHBsZVdlYktpdFxcLyhbMC05XSspKD86XFwuKFswLTldKykpKD86XFwuKFswLTldKykpLy5leGVjKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSxGPSEhYSYmNjAzPnBhcnNlSW50KGFbMV0sMTApKTpGPSExKTtyZXR1cm4gRn1mdW5jdGlvbiBNKGEpe251bGw9PT1IJiYoSD0hIWEuZG9jdW1lbnQuZm9udHMpO3JldHVybiBIfVxuZnVuY3Rpb24gTihhLGMpe3ZhciBiPWEuc3R5bGUsZz1hLndlaWdodDtpZihudWxsPT09Ryl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0cnl7ZS5zdHlsZS5mb250PVwiY29uZGVuc2VkIDEwMHB4IHNhbnMtc2VyaWZcIn1jYXRjaChxKXt9Rz1cIlwiIT09ZS5zdHlsZS5mb250fXJldHVybltiLGcsRz9hLnN0cmV0Y2g6XCJcIixcIjEwMHB4XCIsY10uam9pbihcIiBcIil9XG5ELnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcyxnPWF8fFwiQkVTYnN3eVwiLGU9MCxxPWN8fDNFMyxKPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihLLEwpe2lmKE0oYi5jb250ZXh0KSYmIUkoYi5jb250ZXh0KSl7dmFyIE89bmV3IFByb21pc2UoZnVuY3Rpb24ocix0KXtmdW5jdGlvbiBoKCl7KG5ldyBEYXRlKS5nZXRUaW1lKCktSj49cT90KEVycm9yKFwiXCIrcStcIm1zIHRpbWVvdXQgZXhjZWVkZWRcIikpOmIuY29udGV4dC5kb2N1bWVudC5mb250cy5sb2FkKE4oYiwnXCInK2IuZmFtaWx5KydcIicpLGcpLnRoZW4oZnVuY3Rpb24obil7MTw9bi5sZW5ndGg/cigpOnNldFRpbWVvdXQoaCwyNSl9LHQpfWgoKX0pLFA9bmV3IFByb21pc2UoZnVuY3Rpb24ocix0KXtlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KEVycm9yKFwiXCIrcStcIm1zIHRpbWVvdXQgZXhjZWVkZWRcIikpfSxxKX0pO1Byb21pc2UucmFjZShbUCxPXSkudGhlbihmdW5jdGlvbigpe2NsZWFyVGltZW91dChlKTtcbksoYil9LEwpfWVsc2UgdShmdW5jdGlvbigpe2Z1bmN0aW9uIHIoKXt2YXIgZDtpZihkPS0xIT1rJiYtMSE9bHx8LTEhPWsmJi0xIT1tfHwtMSE9bCYmLTEhPW0pKGQ9ayE9bCYmayE9bSYmbCE9bSl8fChudWxsPT09RSYmKGQ9L0FwcGxlV2ViS2l0XFwvKFswLTldKykoPzpcXC4oWzAtOV0rKSkvLmV4ZWMod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpLEU9ISFkJiYoNTM2PnBhcnNlSW50KGRbMV0sMTApfHw1MzY9PT1wYXJzZUludChkWzFdLDEwKSYmMTE+PXBhcnNlSW50KGRbMl0sMTApKSksZD1FJiYoaz09eSYmbD09eSYmbT09eXx8az09eiYmbD09eiYmbT09enx8az09QSYmbD09QSYmbT09QSkpLGQ9IWQ7ZCYmKG51bGwhPT1mLnBhcmVudE5vZGUmJmYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmKSxjbGVhclRpbWVvdXQoZSksSyhiKSl9ZnVuY3Rpb24gdCgpe2lmKChuZXcgRGF0ZSkuZ2V0VGltZSgpLUo+PXEpbnVsbCE9PWYucGFyZW50Tm9kZSYmZi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGYpLFxuTChFcnJvcihcIlwiK3ErXCJtcyB0aW1lb3V0IGV4Y2VlZGVkXCIpKTtlbHNle3ZhciBkPWIuY29udGV4dC5kb2N1bWVudC5oaWRkZW47aWYoITA9PT1kfHx2b2lkIDA9PT1kKWs9aC5nLm9mZnNldFdpZHRoLGw9bi5nLm9mZnNldFdpZHRoLG09di5nLm9mZnNldFdpZHRoLHIoKTtlPXNldFRpbWVvdXQodCw1MCl9fXZhciBoPW5ldyB3KGcpLG49bmV3IHcoZyksdj1uZXcgdyhnKSxrPS0xLGw9LTEsbT0tMSx5PS0xLHo9LTEsQT0tMSxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zi5kaXI9XCJsdHJcIjt4KGgsTihiLFwic2Fucy1zZXJpZlwiKSk7eChuLE4oYixcInNlcmlmXCIpKTt4KHYsTihiLFwibW9ub3NwYWNlXCIpKTtmLmFwcGVuZENoaWxkKGguZyk7Zi5hcHBlbmRDaGlsZChuLmcpO2YuYXBwZW5kQ2hpbGQodi5nKTtiLmNvbnRleHQuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmKTt5PWguZy5vZmZzZXRXaWR0aDt6PW4uZy5vZmZzZXRXaWR0aDtBPXYuZy5vZmZzZXRXaWR0aDt0KCk7XG5DKGgsZnVuY3Rpb24oZCl7az1kO3IoKX0pO3goaCxOKGIsJ1wiJytiLmZhbWlseSsnXCIsc2Fucy1zZXJpZicpKTtDKG4sZnVuY3Rpb24oZCl7bD1kO3IoKX0pO3gobixOKGIsJ1wiJytiLmZhbWlseSsnXCIsc2VyaWYnKSk7Qyh2LGZ1bmN0aW9uKGQpe209ZDtyKCl9KTt4KHYsTihiLCdcIicrYi5mYW1pbHkrJ1wiLG1vbm9zcGFjZScpKX0pfSl9O1wib2JqZWN0XCI9PT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPUQ6KHdpbmRvdy5Gb250RmFjZU9ic2VydmVyPUQsd2luZG93LkZvbnRGYWNlT2JzZXJ2ZXIucHJvdG90eXBlLmxvYWQ9RC5wcm90b3R5cGUubG9hZCk7fSgpKTtcbiIsIihmdW5jdGlvbihnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiA/IGZhY3RvcnkoZXhwb3J0cykgOiB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbXCJleHBvcnRzXCJdLCBmYWN0b3J5KSA6IChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwucGxhbmNrID0ge30pKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKGV4cG9ydHMyKSB7XG4gIFwidXNlIHN0cmljdFwiOy8qKlxuICogUGxhbmNrLmpzIHYxLjQuMlxuICogQGxpY2Vuc2UgVGhlIE1JVCBsaWNlbnNlXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAyNSBFcmluIENhdHRvLCBBbGkgU2hha2liYVxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAqIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuICogU09GVFdBUkUuXG4gKi9cblxuICAvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuICBcbiAgICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxuICAgICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxuICBcbiAgICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcbiAgICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxuICAgICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxuICAgICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXG4gICAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxuICAgICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxuICAgICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cbiAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG4gIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZDIsIGIyKSB7XG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uKGQzLCBiMykge1xuICAgICAgZDMuX19wcm90b19fID0gYjM7XG4gICAgfSB8fCBmdW5jdGlvbihkMywgYjMpIHtcbiAgICAgIGZvciAodmFyIHAgaW4gYjMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYjMsIHApKSBkM1twXSA9IGIzW3BdO1xuICAgIH07XG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZDIsIGIyKTtcbiAgfTtcbiAgZnVuY3Rpb24gX19leHRlbmRzKGQyLCBiMikge1xuICAgIGlmICh0eXBlb2YgYjIgIT09IFwiZnVuY3Rpb25cIiAmJiBiMiAhPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIyKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgZXh0ZW5kU3RhdGljcyhkMiwgYjIpO1xuICAgIGZ1bmN0aW9uIF9fKCkge1xuICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQyO1xuICAgIH1cbiAgICBkMi5wcm90b3R5cGUgPSBiMiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYjIpIDogKF9fLnByb3RvdHlwZSA9IGIyLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICB9XG4gIHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbjIodCkge1xuICAgICAgZm9yICh2YXIgczIsIGkgPSAxLCBuMiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuMjsgaSsrKSB7XG4gICAgICAgIHMyID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBmb3IgKHZhciBwIGluIHMyKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMyLCBwKSkgdFtwXSA9IHMyW3BdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbiAgdmFyIG9wdGlvbnMgPSBmdW5jdGlvbihpbnB1dDIsIGRlZmF1bHRzKSB7XG4gICAgaWYgKGlucHV0MiA9PT0gbnVsbCB8fCB0eXBlb2YgaW5wdXQyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpbnB1dDIgPSB7fTtcbiAgICB9XG4gICAgdmFyIG91dHB1dDIgPSBfX2Fzc2lnbih7fSwgaW5wdXQyKTtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgIGlmIChkZWZhdWx0cy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHR5cGVvZiBpbnB1dDJba2V5XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBvdXRwdXQyW2tleV0gPSBkZWZhdWx0c1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGRlZmF1bHRzKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc3ltYm9sID0gc3ltYm9sc1tpXTtcbiAgICAgICAgaWYgKGRlZmF1bHRzLnByb3BlcnR5SXNFbnVtZXJhYmxlKHN5bWJvbCkgJiYgdHlwZW9mIGlucHV0MltzeW1ib2xdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgb3V0cHV0MltzeW1ib2xdID0gZGVmYXVsdHNbc3ltYm9sXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0MjtcbiAgfTtcbiAgdmFyIG1hdGhfcmFuZG9tID0gTWF0aC5yYW5kb207XG4gIHZhciBFUFNJTE9OID0gMWUtOTtcbiAgdmFyIGlzRmluaXRlID0gTnVtYmVyLmlzRmluaXRlO1xuICBmdW5jdGlvbiBuZXh0UG93ZXJPZlR3byh4Mikge1xuICAgIHgyIHw9IHgyID4+IDE7XG4gICAgeDIgfD0geDIgPj4gMjtcbiAgICB4MiB8PSB4MiA+PiA0O1xuICAgIHgyIHw9IHgyID4+IDg7XG4gICAgeDIgfD0geDIgPj4gMTY7XG4gICAgcmV0dXJuIHgyICsgMTtcbiAgfVxuICBmdW5jdGlvbiBpc1Bvd2VyT2ZUd28oeDIpIHtcbiAgICByZXR1cm4geDIgPiAwICYmICh4MiAmIHgyIC0gMSkgPT09IDA7XG4gIH1cbiAgZnVuY3Rpb24gbW9kKG51bSwgbWluLCBtYXgpIHtcbiAgICBpZiAodHlwZW9mIG1pbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgbWF4ID0gMTtcbiAgICAgIG1pbiA9IDA7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbWF4ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBtYXggPSBtaW47XG4gICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICBpZiAobWF4ID4gbWluKSB7XG4gICAgICBudW0gPSAobnVtIC0gbWluKSAlIChtYXggLSBtaW4pO1xuICAgICAgcmV0dXJuIG51bSArIChudW0gPCAwID8gbWF4IDogbWluKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbnVtID0gKG51bSAtIG1heCkgJSAobWluIC0gbWF4KTtcbiAgICAgIHJldHVybiBudW0gKyAobnVtIDw9IDAgPyBtaW4gOiBtYXgpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBjbGFtcChudW0sIG1pbiwgbWF4KSB7XG4gICAgaWYgKG51bSA8IG1pbikge1xuICAgICAgcmV0dXJuIG1pbjtcbiAgICB9IGVsc2UgaWYgKG51bSA+IG1heCkge1xuICAgICAgcmV0dXJuIG1heDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcmFuZG9tKG1pbiwgbWF4KSB7XG4gICAgaWYgKHR5cGVvZiBtaW4gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIG1heCA9IDE7XG4gICAgICBtaW4gPSAwO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1heCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgbWF4ID0gbWluO1xuICAgICAgbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG1pbiA9PT0gbWF4ID8gbWluIDogbWF0aF9yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuICB9XG4gIHZhciBtYXRoID0gT2JqZWN0LmNyZWF0ZShNYXRoKTtcbiAgbWF0aC5FUFNJTE9OID0gRVBTSUxPTjtcbiAgbWF0aC5pc0Zpbml0ZSA9IGlzRmluaXRlO1xuICBtYXRoLm5leHRQb3dlck9mVHdvID0gbmV4dFBvd2VyT2ZUd287XG4gIG1hdGguaXNQb3dlck9mVHdvID0gaXNQb3dlck9mVHdvO1xuICBtYXRoLm1vZCA9IG1vZDtcbiAgbWF0aC5jbGFtcCA9IGNsYW1wO1xuICBtYXRoLnJhbmRvbSA9IHJhbmRvbTtcbiAgdmFyIG1hdGhfYWJzJDkgPSBNYXRoLmFicztcbiAgdmFyIG1hdGhfc3FydCQ1ID0gTWF0aC5zcXJ0O1xuICB2YXIgbWF0aF9tYXgkOCA9IE1hdGgubWF4O1xuICB2YXIgbWF0aF9taW4kOCA9IE1hdGgubWluO1xuICB2YXIgVmVjMiA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBWZWMyMih4MiwgeSkge1xuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVmVjMjIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBWZWMyMih4MiwgeSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB4MiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHRoaXMueCA9IDA7XG4gICAgICAgICAgdGhpcy55ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgeDIgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICB0aGlzLnggPSB4Mi54O1xuICAgICAgICAgIHRoaXMueSA9IHgyLnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy54ID0geDI7XG4gICAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgVmVjMjIucHJvdG90eXBlLl9zZXJpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgeTogdGhpcy55XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgVmVjMjIuX2Rlc2VyaWFsaXplID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShWZWMyMi5wcm90b3R5cGUpO1xuICAgICAgICBvYmoueCA9IGRhdGEueDtcbiAgICAgICAgb2JqLnkgPSBkYXRhLnk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9O1xuICAgICAgVmVjMjIuemVybyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShWZWMyMi5wcm90b3R5cGUpO1xuICAgICAgICBvYmoueCA9IDA7XG4gICAgICAgIG9iai55ID0gMDtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH07XG4gICAgICBWZWMyMi5uZW8gPSBmdW5jdGlvbih4MiwgeSkge1xuICAgICAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShWZWMyMi5wcm90b3R5cGUpO1xuICAgICAgICBvYmoueCA9IHgyO1xuICAgICAgICBvYmoueSA9IHk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9O1xuICAgICAgVmVjMjIuY2xvbmUgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICByZXR1cm4gVmVjMjIubmVvKHYzLngsIHYzLnkpO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcyk7XG4gICAgICB9O1xuICAgICAgVmVjMjIuaXNWYWxpZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShvYmoueCkgJiYgTnVtYmVyLmlzRmluaXRlKG9iai55KTtcbiAgICAgIH07XG4gICAgICBWZWMyMi5hc3NlcnQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB9O1xuICAgICAgVmVjMjIucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBWZWMyMi5jbG9uZSh0aGlzKTtcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUuc2V0WmVybyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnggPSAwO1xuICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oeDIsIHkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4MiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHRoaXMueCA9IHgyLng7XG4gICAgICAgICAgdGhpcy55ID0geDIueTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnggPSB4MjtcbiAgICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLnByb3RvdHlwZS5zZXROdW0gPSBmdW5jdGlvbih4MiwgeSkge1xuICAgICAgICB0aGlzLnggPSB4MjtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgVmVjMjIucHJvdG90eXBlLnNldFZlYzIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnggPSB2YWx1ZS54O1xuICAgICAgICB0aGlzLnkgPSB2YWx1ZS55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUud1NldCA9IGZ1bmN0aW9uKGEyLCB2MywgYjIsIHcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiMiAhPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHJldHVybiB0aGlzLnNldENvbWJpbmUoYTIsIHYzLCBiMiwgdyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc2V0TXVsKGEyLCB2Myk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUuc2V0Q29tYmluZSA9IGZ1bmN0aW9uKGEyLCB2MywgYjIsIHcpIHtcbiAgICAgICAgdmFyIHgyID0gYTIgKiB2My54ICsgYjIgKiB3Lng7XG4gICAgICAgIHZhciB5ID0gYTIgKiB2My55ICsgYjIgKiB3Lnk7XG4gICAgICAgIHRoaXMueCA9IHgyO1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUuc2V0TXVsID0gZnVuY3Rpb24oYTIsIHYzKSB7XG4gICAgICAgIHZhciB4MiA9IGEyICogdjMueDtcbiAgICAgICAgdmFyIHkgPSBhMiAqIHYzLnk7XG4gICAgICAgIHRoaXMueCA9IHgyO1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24odykge1xuICAgICAgICB0aGlzLnggKz0gdy54O1xuICAgICAgICB0aGlzLnkgKz0gdy55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUud0FkZCA9IGZ1bmN0aW9uKGEyLCB2MywgYjIsIHcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiMiAhPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHJldHVybiB0aGlzLmFkZENvbWJpbmUoYTIsIHYzLCBiMiwgdyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYWRkTXVsKGEyLCB2Myk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUuYWRkQ29tYmluZSA9IGZ1bmN0aW9uKGEyLCB2MywgYjIsIHcpIHtcbiAgICAgICAgdmFyIHgyID0gYTIgKiB2My54ICsgYjIgKiB3Lng7XG4gICAgICAgIHZhciB5ID0gYTIgKiB2My55ICsgYjIgKiB3Lnk7XG4gICAgICAgIHRoaXMueCArPSB4MjtcbiAgICAgICAgdGhpcy55ICs9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLnByb3RvdHlwZS5hZGRNdWwgPSBmdW5jdGlvbihhMiwgdjMpIHtcbiAgICAgICAgdmFyIHgyID0gYTIgKiB2My54O1xuICAgICAgICB2YXIgeSA9IGEyICogdjMueTtcbiAgICAgICAgdGhpcy54ICs9IHgyO1xuICAgICAgICB0aGlzLnkgKz0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgVmVjMjIucHJvdG90eXBlLndTdWIgPSBmdW5jdGlvbihhMiwgdjMsIGIyLCB3KSB7XG4gICAgICAgIGlmICh0eXBlb2YgYjIgIT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHcgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zdWJDb21iaW5lKGEyLCB2MywgYjIsIHcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLnN1Yk11bChhMiwgdjMpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgVmVjMjIucHJvdG90eXBlLnN1YkNvbWJpbmUgPSBmdW5jdGlvbihhMiwgdjMsIGIyLCB3KSB7XG4gICAgICAgIHZhciB4MiA9IGEyICogdjMueCArIGIyICogdy54O1xuICAgICAgICB2YXIgeSA9IGEyICogdjMueSArIGIyICogdy55O1xuICAgICAgICB0aGlzLnggLT0geDI7XG4gICAgICAgIHRoaXMueSAtPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUuc3ViTXVsID0gZnVuY3Rpb24oYTIsIHYzKSB7XG4gICAgICAgIHZhciB4MiA9IGEyICogdjMueDtcbiAgICAgICAgdmFyIHkgPSBhMiAqIHYzLnk7XG4gICAgICAgIHRoaXMueCAtPSB4MjtcbiAgICAgICAgdGhpcy55IC09IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbih3KSB7XG4gICAgICAgIHRoaXMueCAtPSB3Lng7XG4gICAgICAgIHRoaXMueSAtPSB3Lnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbihtKSB7XG4gICAgICAgIHRoaXMueCAqPSBtO1xuICAgICAgICB0aGlzLnkgKj0gbTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgVmVjMjIucHJvdG90eXBlLmxlbmd0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gVmVjMjIubGVuZ3RoT2YodGhpcyk7XG4gICAgICB9O1xuICAgICAgVmVjMjIucHJvdG90eXBlLmxlbmd0aFNxdWFyZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIyLmxlbmd0aFNxdWFyZWQodGhpcyk7XG4gICAgICB9O1xuICAgICAgVmVjMjIucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGgoKTtcbiAgICAgICAgaWYgKGxlbmd0aCA8IEVQU0lMT04pIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW52TGVuZ3RoID0gMSAvIGxlbmd0aDtcbiAgICAgICAgdGhpcy54ICo9IGludkxlbmd0aDtcbiAgICAgICAgdGhpcy55ICo9IGludkxlbmd0aDtcbiAgICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICAgIH07XG4gICAgICBWZWMyMi5ub3JtYWxpemUgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICB2YXIgbGVuZ3RoID0gVmVjMjIubGVuZ3RoT2YodjMpO1xuICAgICAgICBpZiAobGVuZ3RoIDwgRVBTSUxPTikge1xuICAgICAgICAgIHJldHVybiBWZWMyMi56ZXJvKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGludkxlbmd0aCA9IDEgLyBsZW5ndGg7XG4gICAgICAgIHJldHVybiBWZWMyMi5uZW8odjMueCAqIGludkxlbmd0aCwgdjMueSAqIGludkxlbmd0aCk7XG4gICAgICB9O1xuICAgICAgVmVjMjIubGVuZ3RoT2YgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICByZXR1cm4gbWF0aF9zcXJ0JDUodjMueCAqIHYzLnggKyB2My55ICogdjMueSk7XG4gICAgICB9O1xuICAgICAgVmVjMjIubGVuZ3RoU3F1YXJlZCA9IGZ1bmN0aW9uKHYzKSB7XG4gICAgICAgIHJldHVybiB2My54ICogdjMueCArIHYzLnkgKiB2My55O1xuICAgICAgfTtcbiAgICAgIFZlYzIyLmRpc3RhbmNlID0gZnVuY3Rpb24odjMsIHcpIHtcbiAgICAgICAgdmFyIGR4ID0gdjMueCAtIHcueDtcbiAgICAgICAgdmFyIGR5ID0gdjMueSAtIHcueTtcbiAgICAgICAgcmV0dXJuIG1hdGhfc3FydCQ1KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgIH07XG4gICAgICBWZWMyMi5kaXN0YW5jZVNxdWFyZWQgPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICB2YXIgZHggPSB2My54IC0gdy54O1xuICAgICAgICB2YXIgZHkgPSB2My55IC0gdy55O1xuICAgICAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICB9O1xuICAgICAgVmVjMjIuYXJlRXF1YWwgPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICByZXR1cm4gdjMgPT09IHcgfHwgdHlwZW9mIHcgPT09IFwib2JqZWN0XCIgJiYgdyAhPT0gbnVsbCAmJiB2My54ID09PSB3LnggJiYgdjMueSA9PT0gdy55O1xuICAgICAgfTtcbiAgICAgIFZlYzIyLnNrZXcgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICByZXR1cm4gVmVjMjIubmVvKC12My55LCB2My54KTtcbiAgICAgIH07XG4gICAgICBWZWMyMi5kb3QgPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICByZXR1cm4gdjMueCAqIHcueCArIHYzLnkgKiB3Lnk7XG4gICAgICB9O1xuICAgICAgVmVjMjIuY3Jvc3MgPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICBpZiAodHlwZW9mIHcgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICByZXR1cm4gVmVjMjIubmVvKHcgKiB2My55LCAtdyAqIHYzLngpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2MyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIHJldHVybiBWZWMyMi5uZW8oLXYzICogdy55LCB2MyAqIHcueCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHYzLnggKiB3LnkgLSB2My55ICogdy54O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgVmVjMjIuY3Jvc3NWZWMyVmVjMiA9IGZ1bmN0aW9uKHYzLCB3KSB7XG4gICAgICAgIHJldHVybiB2My54ICogdy55IC0gdjMueSAqIHcueDtcbiAgICAgIH07XG4gICAgICBWZWMyMi5jcm9zc1ZlYzJOdW0gPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICByZXR1cm4gVmVjMjIubmVvKHcgKiB2My55LCAtdyAqIHYzLngpO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLmNyb3NzTnVtVmVjMiA9IGZ1bmN0aW9uKHYzLCB3KSB7XG4gICAgICAgIHJldHVybiBWZWMyMi5uZW8oLXYzICogdy55LCB2MyAqIHcueCk7XG4gICAgICB9O1xuICAgICAgVmVjMjIuYWRkQ3Jvc3MgPSBmdW5jdGlvbihhMiwgdjMsIHcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgcmV0dXJuIFZlYzIyLm5lbyh3ICogdjMueSArIGEyLngsIC13ICogdjMueCArIGEyLnkpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2MyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIHJldHVybiBWZWMyMi5uZW8oLXYzICogdy55ICsgYTIueCwgdjMgKiB3LnggKyBhMi55KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFZlYzIyLmFkZENyb3NzVmVjMk51bSA9IGZ1bmN0aW9uKGEyLCB2Mywgdykge1xuICAgICAgICByZXR1cm4gVmVjMjIubmVvKHcgKiB2My55ICsgYTIueCwgLXcgKiB2My54ICsgYTIueSk7XG4gICAgICB9O1xuICAgICAgVmVjMjIuYWRkQ3Jvc3NOdW1WZWMyID0gZnVuY3Rpb24oYTIsIHYzLCB3KSB7XG4gICAgICAgIHJldHVybiBWZWMyMi5uZW8oLXYzICogdy55ICsgYTIueCwgdjMgKiB3LnggKyBhMi55KTtcbiAgICAgIH07XG4gICAgICBWZWMyMi5hZGQgPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICByZXR1cm4gVmVjMjIubmVvKHYzLnggKyB3LngsIHYzLnkgKyB3LnkpO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLndBZGQgPSBmdW5jdGlvbihhMiwgdjMsIGIyLCB3KSB7XG4gICAgICAgIGlmICh0eXBlb2YgYjIgIT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHcgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICByZXR1cm4gVmVjMjIuY29tYmluZShhMiwgdjMsIGIyLCB3KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gVmVjMjIubXVsTnVtVmVjMihhMiwgdjMpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgVmVjMjIuY29tYmluZSA9IGZ1bmN0aW9uKGEyLCB2MywgYjIsIHcpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIyLnplcm8oKS5zZXRDb21iaW5lKGEyLCB2MywgYjIsIHcpO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLnN1YiA9IGZ1bmN0aW9uKHYzLCB3KSB7XG4gICAgICAgIHJldHVybiBWZWMyMi5uZW8odjMueCAtIHcueCwgdjMueSAtIHcueSk7XG4gICAgICB9O1xuICAgICAgVmVjMjIubXVsID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYTIgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICByZXR1cm4gVmVjMjIubmVvKGEyLnggKiBiMiwgYTIueSAqIGIyKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYjIgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICByZXR1cm4gVmVjMjIubmVvKGEyICogYjIueCwgYTIgKiBiMi55KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFZlYzIyLm11bFZlYzJOdW0gPSBmdW5jdGlvbihhMiwgYjIpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIyLm5lbyhhMi54ICogYjIsIGEyLnkgKiBiMik7XG4gICAgICB9O1xuICAgICAgVmVjMjIubXVsTnVtVmVjMiA9IGZ1bmN0aW9uKGEyLCBiMikge1xuICAgICAgICByZXR1cm4gVmVjMjIubmVvKGEyICogYjIueCwgYTIgKiBiMi55KTtcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMueCA9IC10aGlzLng7XG4gICAgICAgIHRoaXMueSA9IC10aGlzLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLm5lZyA9IGZ1bmN0aW9uKHYzKSB7XG4gICAgICAgIHJldHVybiBWZWMyMi5uZW8oLXYzLngsIC12My55KTtcbiAgICAgIH07XG4gICAgICBWZWMyMi5hYnMgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICByZXR1cm4gVmVjMjIubmVvKG1hdGhfYWJzJDkodjMueCksIG1hdGhfYWJzJDkodjMueSkpO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLm1pZCA9IGZ1bmN0aW9uKHYzLCB3KSB7XG4gICAgICAgIHJldHVybiBWZWMyMi5uZW8oKHYzLnggKyB3LngpICogMC41LCAodjMueSArIHcueSkgKiAwLjUpO1xuICAgICAgfTtcbiAgICAgIFZlYzIyLnVwcGVyID0gZnVuY3Rpb24odjMsIHcpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIyLm5lbyhtYXRoX21heCQ4KHYzLngsIHcueCksIG1hdGhfbWF4JDgodjMueSwgdy55KSk7XG4gICAgICB9O1xuICAgICAgVmVjMjIubG93ZXIgPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICByZXR1cm4gVmVjMjIubmVvKG1hdGhfbWluJDgodjMueCwgdy54KSwgbWF0aF9taW4kOCh2My55LCB3LnkpKTtcbiAgICAgIH07XG4gICAgICBWZWMyMi5wcm90b3R5cGUuY2xhbXAgPSBmdW5jdGlvbihtYXgpIHtcbiAgICAgICAgdmFyIGxlbmd0aFNxciA9IHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueTtcbiAgICAgICAgaWYgKGxlbmd0aFNxciA+IG1heCAqIG1heCkge1xuICAgICAgICAgIHZhciBzY2FsZSA9IG1heCAvIG1hdGhfc3FydCQ1KGxlbmd0aFNxcik7XG4gICAgICAgICAgdGhpcy54ICo9IHNjYWxlO1xuICAgICAgICAgIHRoaXMueSAqPSBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBWZWMyMi5jbGFtcCA9IGZ1bmN0aW9uKHYzLCBtYXgpIHtcbiAgICAgICAgdmFyIHIgPSBWZWMyMi5uZW8odjMueCwgdjMueSk7XG4gICAgICAgIHIuY2xhbXAobWF4KTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgICB9O1xuICAgICAgVmVjMjIuY2xhbXBWZWMyID0gZnVuY3Rpb24odjMsIG1pbiwgbWF4KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogY2xhbXAodjMueCwgbWluID09PSBudWxsIHx8IG1pbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWluLngsIG1heCA9PT0gbnVsbCB8fCBtYXggPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1heC54KSxcbiAgICAgICAgICB5OiBjbGFtcCh2My55LCBtaW4gPT09IG51bGwgfHwgbWluID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtaW4ueSwgbWF4ID09PSBudWxsIHx8IG1heCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF4LnkpXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgVmVjMjIuc2NhbGVGbiA9IGZ1bmN0aW9uKHgyLCB5KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2Mykge1xuICAgICAgICAgIHJldHVybiBWZWMyMi5uZW8odjMueCAqIHgyLCB2My55ICogeSk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgVmVjMjIudHJhbnNsYXRlRm4gPSBmdW5jdGlvbih4MiwgeSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odjMpIHtcbiAgICAgICAgICByZXR1cm4gVmVjMjIubmVvKHYzLnggKyB4MiwgdjMueSArIHkpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIHJldHVybiBWZWMyMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIG1hdGhfbWF4JDcgPSBNYXRoLm1heDtcbiAgdmFyIG1hdGhfbWluJDcgPSBNYXRoLm1pbjtcbiAgdmFyIEFBQkIgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gQUFCQjIobG93ZXIsIHVwcGVyKSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBBQUJCMikpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEFBQkIyKGxvd2VyLCB1cHBlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb3dlckJvdW5kID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIHRoaXMudXBwZXJCb3VuZCA9IFZlYzIuemVybygpO1xuICAgICAgICBpZiAodHlwZW9mIGxvd2VyID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgdGhpcy5sb3dlckJvdW5kLnNldFZlYzIobG93ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdXBwZXIgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICB0aGlzLnVwcGVyQm91bmQuc2V0VmVjMih1cHBlcik7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxvd2VyID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgdGhpcy51cHBlckJvdW5kLnNldFZlYzIobG93ZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBBQUJCMi5wcm90b3R5cGUuaXNWYWxpZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gQUFCQjIuaXNWYWxpZCh0aGlzKTtcbiAgICAgIH07XG4gICAgICBBQUJCMi5pc1ZhbGlkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVmVjMi5pc1ZhbGlkKG9iai5sb3dlckJvdW5kKSAmJiBWZWMyLmlzVmFsaWQob2JqLnVwcGVyQm91bmQpICYmIFZlYzIuc3ViKG9iai51cHBlckJvdW5kLCBvYmoubG93ZXJCb3VuZCkubGVuZ3RoU3F1YXJlZCgpID49IDA7XG4gICAgICB9O1xuICAgICAgQUFCQjIuYXNzZXJ0ID0gZnVuY3Rpb24obykge1xuICAgICAgfTtcbiAgICAgIEFBQkIyLnByb3RvdHlwZS5nZXRDZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIubmVvKCh0aGlzLmxvd2VyQm91bmQueCArIHRoaXMudXBwZXJCb3VuZC54KSAqIDAuNSwgKHRoaXMubG93ZXJCb3VuZC55ICsgdGhpcy51cHBlckJvdW5kLnkpICogMC41KTtcbiAgICAgIH07XG4gICAgICBBQUJCMi5wcm90b3R5cGUuZ2V0RXh0ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gVmVjMi5uZW8oKHRoaXMudXBwZXJCb3VuZC54IC0gdGhpcy5sb3dlckJvdW5kLngpICogMC41LCAodGhpcy51cHBlckJvdW5kLnkgLSB0aGlzLmxvd2VyQm91bmQueSkgKiAwLjUpO1xuICAgICAgfTtcbiAgICAgIEFBQkIyLnByb3RvdHlwZS5nZXRQZXJpbWV0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIDIgKiAodGhpcy51cHBlckJvdW5kLnggLSB0aGlzLmxvd2VyQm91bmQueCArIHRoaXMudXBwZXJCb3VuZC55IC0gdGhpcy5sb3dlckJvdW5kLnkpO1xuICAgICAgfTtcbiAgICAgIEFBQkIyLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIGIyID0gYjIgfHwgdGhpcztcbiAgICAgICAgdmFyIGxvd2VyQSA9IGEyLmxvd2VyQm91bmQ7XG4gICAgICAgIHZhciB1cHBlckEgPSBhMi51cHBlckJvdW5kO1xuICAgICAgICB2YXIgbG93ZXJCID0gYjIubG93ZXJCb3VuZDtcbiAgICAgICAgdmFyIHVwcGVyQiA9IGIyLnVwcGVyQm91bmQ7XG4gICAgICAgIHZhciBsb3dlclggPSBtYXRoX21pbiQ3KGxvd2VyQS54LCBsb3dlckIueCk7XG4gICAgICAgIHZhciBsb3dlclkgPSBtYXRoX21pbiQ3KGxvd2VyQS55LCBsb3dlckIueSk7XG4gICAgICAgIHZhciB1cHBlclggPSBtYXRoX21heCQ3KHVwcGVyQi54LCB1cHBlckEueCk7XG4gICAgICAgIHZhciB1cHBlclkgPSBtYXRoX21heCQ3KHVwcGVyQi55LCB1cHBlckEueSk7XG4gICAgICAgIHRoaXMubG93ZXJCb3VuZC5zZXROdW0obG93ZXJYLCBsb3dlclkpO1xuICAgICAgICB0aGlzLnVwcGVyQm91bmQuc2V0TnVtKHVwcGVyWCwgdXBwZXJZKTtcbiAgICAgIH07XG4gICAgICBBQUJCMi5wcm90b3R5cGUuY29tYmluZVBvaW50cyA9IGZ1bmN0aW9uKGEyLCBiMikge1xuICAgICAgICB0aGlzLmxvd2VyQm91bmQuc2V0TnVtKG1hdGhfbWluJDcoYTIueCwgYjIueCksIG1hdGhfbWluJDcoYTIueSwgYjIueSkpO1xuICAgICAgICB0aGlzLnVwcGVyQm91bmQuc2V0TnVtKG1hdGhfbWF4JDcoYTIueCwgYjIueCksIG1hdGhfbWF4JDcoYTIueSwgYjIueSkpO1xuICAgICAgfTtcbiAgICAgIEFBQkIyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihhYWJiKSB7XG4gICAgICAgIHRoaXMubG93ZXJCb3VuZC5zZXROdW0oYWFiYi5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC55KTtcbiAgICAgICAgdGhpcy51cHBlckJvdW5kLnNldE51bShhYWJiLnVwcGVyQm91bmQueCwgYWFiYi51cHBlckJvdW5kLnkpO1xuICAgICAgfTtcbiAgICAgIEFBQkIyLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKGFhYmIpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdCAmJiB0aGlzLmxvd2VyQm91bmQueCA8PSBhYWJiLmxvd2VyQm91bmQueDtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmIHRoaXMubG93ZXJCb3VuZC55IDw9IGFhYmIubG93ZXJCb3VuZC55O1xuICAgICAgICByZXN1bHQgPSByZXN1bHQgJiYgYWFiYi51cHBlckJvdW5kLnggPD0gdGhpcy51cHBlckJvdW5kLng7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdCAmJiBhYWJiLnVwcGVyQm91bmQueSA8PSB0aGlzLnVwcGVyQm91bmQueTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgICBBQUJCMi5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgQUFCQjIuZXh0ZW5kKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgQUFCQjIuZXh0ZW5kID0gZnVuY3Rpb24ob3V0LCB2YWx1ZSkge1xuICAgICAgICBvdXQubG93ZXJCb3VuZC54IC09IHZhbHVlO1xuICAgICAgICBvdXQubG93ZXJCb3VuZC55IC09IHZhbHVlO1xuICAgICAgICBvdXQudXBwZXJCb3VuZC54ICs9IHZhbHVlO1xuICAgICAgICBvdXQudXBwZXJCb3VuZC55ICs9IHZhbHVlO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgfTtcbiAgICAgIEFBQkIyLnRlc3RPdmVybGFwID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIHZhciBkMXggPSBiMi5sb3dlckJvdW5kLnggLSBhMi51cHBlckJvdW5kLng7XG4gICAgICAgIHZhciBkMnggPSBhMi5sb3dlckJvdW5kLnggLSBiMi51cHBlckJvdW5kLng7XG4gICAgICAgIHZhciBkMXkgPSBiMi5sb3dlckJvdW5kLnkgLSBhMi51cHBlckJvdW5kLnk7XG4gICAgICAgIHZhciBkMnkgPSBhMi5sb3dlckJvdW5kLnkgLSBiMi51cHBlckJvdW5kLnk7XG4gICAgICAgIGlmIChkMXggPiAwIHx8IGQxeSA+IDAgfHwgZDJ4ID4gMCB8fCBkMnkgPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfTtcbiAgICAgIEFBQkIyLmFyZUVxdWFsID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIHJldHVybiBWZWMyLmFyZUVxdWFsKGEyLmxvd2VyQm91bmQsIGIyLmxvd2VyQm91bmQpICYmIFZlYzIuYXJlRXF1YWwoYTIudXBwZXJCb3VuZCwgYjIudXBwZXJCb3VuZCk7XG4gICAgICB9O1xuICAgICAgQUFCQjIuZGlmZiA9IGZ1bmN0aW9uKGEyLCBiMikge1xuICAgICAgICB2YXIgd0QgPSBtYXRoX21heCQ3KDAsIG1hdGhfbWluJDcoYTIudXBwZXJCb3VuZC54LCBiMi51cHBlckJvdW5kLngpIC0gbWF0aF9tYXgkNyhiMi5sb3dlckJvdW5kLngsIGEyLmxvd2VyQm91bmQueCkpO1xuICAgICAgICB2YXIgaEQgPSBtYXRoX21heCQ3KDAsIG1hdGhfbWluJDcoYTIudXBwZXJCb3VuZC55LCBiMi51cHBlckJvdW5kLnkpIC0gbWF0aF9tYXgkNyhiMi5sb3dlckJvdW5kLnksIGEyLmxvd2VyQm91bmQueSkpO1xuICAgICAgICB2YXIgd0EgPSBhMi51cHBlckJvdW5kLnggLSBhMi5sb3dlckJvdW5kLng7XG4gICAgICAgIHZhciBoQSA9IGEyLnVwcGVyQm91bmQueSAtIGEyLmxvd2VyQm91bmQueTtcbiAgICAgICAgdmFyIHdCID0gYjIudXBwZXJCb3VuZC54IC0gYjIubG93ZXJCb3VuZC54O1xuICAgICAgICB2YXIgaEIgPSBiMi51cHBlckJvdW5kLnkgLSBiMi5sb3dlckJvdW5kLnk7XG4gICAgICAgIHJldHVybiB3QSAqIGhBICsgd0IgKiBoQiAtIHdEICogaEQ7XG4gICAgICB9O1xuICAgICAgQUFCQjIucHJvdG90eXBlLnJheUNhc3QgPSBmdW5jdGlvbihvdXRwdXQyLCBpbnB1dDIpIHtcbiAgICAgICAgdmFyIHRtaW4gPSAtSW5maW5pdHk7XG4gICAgICAgIHZhciB0bWF4ID0gSW5maW5pdHk7XG4gICAgICAgIHZhciBwID0gaW5wdXQyLnAxO1xuICAgICAgICB2YXIgZDIgPSBWZWMyLnN1YihpbnB1dDIucDIsIGlucHV0Mi5wMSk7XG4gICAgICAgIHZhciBhYnNEID0gVmVjMi5hYnMoZDIpO1xuICAgICAgICB2YXIgbm9ybWFsMyA9IFZlYzIuemVybygpO1xuICAgICAgICB7XG4gICAgICAgICAgaWYgKGFic0QueCA8IEVQU0lMT04pIHtcbiAgICAgICAgICAgIGlmIChwLnggPCB0aGlzLmxvd2VyQm91bmQueCB8fCB0aGlzLnVwcGVyQm91bmQueCA8IHAueCkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpbnZfZCA9IDEgLyBkMi54O1xuICAgICAgICAgICAgdmFyIHQxID0gKHRoaXMubG93ZXJCb3VuZC54IC0gcC54KSAqIGludl9kO1xuICAgICAgICAgICAgdmFyIHQyID0gKHRoaXMudXBwZXJCb3VuZC54IC0gcC54KSAqIGludl9kO1xuICAgICAgICAgICAgdmFyIHMyID0gLTE7XG4gICAgICAgICAgICBpZiAodDEgPiB0Mikge1xuICAgICAgICAgICAgICB2YXIgdGVtcDMgPSB0MTtcbiAgICAgICAgICAgICAgdDEgPSB0MjtcbiAgICAgICAgICAgICAgdDIgPSB0ZW1wMztcbiAgICAgICAgICAgICAgczIgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHQxID4gdG1pbikge1xuICAgICAgICAgICAgICBub3JtYWwzLnNldFplcm8oKTtcbiAgICAgICAgICAgICAgbm9ybWFsMy54ID0gczI7XG4gICAgICAgICAgICAgIHRtaW4gPSB0MTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRtYXggPSBtYXRoX21pbiQ3KHRtYXgsIHQyKTtcbiAgICAgICAgICAgIGlmICh0bWluID4gdG1heCkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICBpZiAoYWJzRC55IDwgRVBTSUxPTikge1xuICAgICAgICAgICAgaWYgKHAueSA8IHRoaXMubG93ZXJCb3VuZC55IHx8IHRoaXMudXBwZXJCb3VuZC55IDwgcC55KSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGludl9kID0gMSAvIGQyLnk7XG4gICAgICAgICAgICB2YXIgdDEgPSAodGhpcy5sb3dlckJvdW5kLnkgLSBwLnkpICogaW52X2Q7XG4gICAgICAgICAgICB2YXIgdDIgPSAodGhpcy51cHBlckJvdW5kLnkgLSBwLnkpICogaW52X2Q7XG4gICAgICAgICAgICB2YXIgczIgPSAtMTtcbiAgICAgICAgICAgIGlmICh0MSA+IHQyKSB7XG4gICAgICAgICAgICAgIHZhciB0ZW1wMyA9IHQxO1xuICAgICAgICAgICAgICB0MSA9IHQyO1xuICAgICAgICAgICAgICB0MiA9IHRlbXAzO1xuICAgICAgICAgICAgICBzMiA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodDEgPiB0bWluKSB7XG4gICAgICAgICAgICAgIG5vcm1hbDMuc2V0WmVybygpO1xuICAgICAgICAgICAgICBub3JtYWwzLnkgPSBzMjtcbiAgICAgICAgICAgICAgdG1pbiA9IHQxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG1heCA9IG1hdGhfbWluJDcodG1heCwgdDIpO1xuICAgICAgICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRtaW4gPCAwIHx8IGlucHV0Mi5tYXhGcmFjdGlvbiA8IHRtaW4pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0Mi5mcmFjdGlvbiA9IHRtaW47XG4gICAgICAgIG91dHB1dDIubm9ybWFsID0gbm9ybWFsMztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgICAgQUFCQjIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcbiAgICAgIH07XG4gICAgICBBQUJCMi5jb21iaW5lUG9pbnRzID0gZnVuY3Rpb24ob3V0LCBhMiwgYjIpIHtcbiAgICAgICAgb3V0Lmxvd2VyQm91bmQueCA9IG1hdGhfbWluJDcoYTIueCwgYjIueCk7XG4gICAgICAgIG91dC5sb3dlckJvdW5kLnkgPSBtYXRoX21pbiQ3KGEyLnksIGIyLnkpO1xuICAgICAgICBvdXQudXBwZXJCb3VuZC54ID0gbWF0aF9tYXgkNyhhMi54LCBiMi54KTtcbiAgICAgICAgb3V0LnVwcGVyQm91bmQueSA9IG1hdGhfbWF4JDcoYTIueSwgYjIueSk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgICB9O1xuICAgICAgQUFCQjIuY29tYmluZWRQZXJpbWV0ZXIgPSBmdW5jdGlvbihhMiwgYjIpIHtcbiAgICAgICAgdmFyIGx4ID0gbWF0aF9taW4kNyhhMi5sb3dlckJvdW5kLngsIGIyLmxvd2VyQm91bmQueCk7XG4gICAgICAgIHZhciBseSA9IG1hdGhfbWluJDcoYTIubG93ZXJCb3VuZC55LCBiMi5sb3dlckJvdW5kLnkpO1xuICAgICAgICB2YXIgdXggPSBtYXRoX21heCQ3KGEyLnVwcGVyQm91bmQueCwgYjIudXBwZXJCb3VuZC54KTtcbiAgICAgICAgdmFyIHV5ID0gbWF0aF9tYXgkNyhhMi51cHBlckJvdW5kLnksIGIyLnVwcGVyQm91bmQueSk7XG4gICAgICAgIHJldHVybiAyICogKHV4IC0gbHggKyB1eSAtIGx5KTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gQUFCQjI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBtYXRoX1BJJDYgPSBNYXRoLlBJO1xuICB2YXIgU2V0dGluZ3MgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gU2V0dGluZ3MyKCkge1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzMiwgXCJwb2x5Z29uUmFkaXVzXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHBvbHlnb24vZWRnZSBzaGFwZSBza2luLiBUaGlzIHNob3VsZCBub3QgYmUgbW9kaWZpZWQuXG4gICAgICAgICAqIE1ha2luZyB0aGlzIHNtYWxsZXIgbWVhbnMgcG9seWdvbnMgd2lsbCBoYXZlIGFuIGluc3VmZmljaWVudCBidWZmZXIgZm9yXG4gICAgICAgICAqIGNvbnRpbnVvdXMgY29sbGlzaW9uLiBNYWtpbmcgaXQgbGFyZ2VyIG1heSBjcmVhdGUgYXJ0aWZhY3RzIGZvciB2ZXJ0ZXhcbiAgICAgICAgICogY29sbGlzaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gMiAqIFNldHRpbmdzMi5saW5lYXJTbG9wO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIFNldHRpbmdzMi5sZW5ndGhVbml0c1Blck1ldGVyID0gMTtcbiAgICAgIFNldHRpbmdzMi5tYXhNYW5pZm9sZFBvaW50cyA9IDI7XG4gICAgICBTZXR0aW5nczIubWF4UG9seWdvblZlcnRpY2VzID0gMTI7XG4gICAgICBTZXR0aW5nczIuYWFiYkV4dGVuc2lvbiA9IDAuMTtcbiAgICAgIFNldHRpbmdzMi5hYWJiTXVsdGlwbGllciA9IDI7XG4gICAgICBTZXR0aW5nczIubGluZWFyU2xvcCA9IDVlLTM7XG4gICAgICBTZXR0aW5nczIuYW5ndWxhclNsb3AgPSAyIC8gMTgwICogbWF0aF9QSSQ2O1xuICAgICAgU2V0dGluZ3MyLm1heFN1YlN0ZXBzID0gODtcbiAgICAgIFNldHRpbmdzMi5tYXhUT0lDb250YWN0cyA9IDMyO1xuICAgICAgU2V0dGluZ3MyLm1heFRPSUl0ZXJhdGlvbnMgPSAyMDtcbiAgICAgIFNldHRpbmdzMi5tYXhEaXN0YW5jZUl0ZXJhdGlvbnMgPSAyMDtcbiAgICAgIFNldHRpbmdzMi52ZWxvY2l0eVRocmVzaG9sZCA9IDE7XG4gICAgICBTZXR0aW5nczIubWF4TGluZWFyQ29ycmVjdGlvbiA9IDAuMjtcbiAgICAgIFNldHRpbmdzMi5tYXhBbmd1bGFyQ29ycmVjdGlvbiA9IDggLyAxODAgKiBtYXRoX1BJJDY7XG4gICAgICBTZXR0aW5nczIubWF4VHJhbnNsYXRpb24gPSAyO1xuICAgICAgU2V0dGluZ3MyLm1heFJvdGF0aW9uID0gMC41ICogbWF0aF9QSSQ2O1xuICAgICAgU2V0dGluZ3MyLmJhdW1nYXJ0ZSA9IDAuMjtcbiAgICAgIFNldHRpbmdzMi50b2lCYXVnYXJ0ZSA9IDAuNzU7XG4gICAgICBTZXR0aW5nczIudGltZVRvU2xlZXAgPSAwLjU7XG4gICAgICBTZXR0aW5nczIubGluZWFyU2xlZXBUb2xlcmFuY2UgPSAwLjAxO1xuICAgICAgU2V0dGluZ3MyLmFuZ3VsYXJTbGVlcFRvbGVyYW5jZSA9IDIgLyAxODAgKiBtYXRoX1BJJDY7XG4gICAgICByZXR1cm4gU2V0dGluZ3MyO1xuICAgIH0oKVxuICApO1xuICB2YXIgU2V0dGluZ3NJbnRlcm5hbCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBTZXR0aW5nc0ludGVybmFsMigpIHtcbiAgICAgIH1cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXR0aW5nc0ludGVybmFsMiwgXCJtYXhNYW5pZm9sZFBvaW50c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLm1heE1hbmlmb2xkUG9pbnRzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXR0aW5nc0ludGVybmFsMiwgXCJtYXhQb2x5Z29uVmVydGljZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5tYXhQb2x5Z29uVmVydGljZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzSW50ZXJuYWwyLCBcImFhYmJFeHRlbnNpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5hYWJiRXh0ZW5zaW9uICogU2V0dGluZ3MubGVuZ3RoVW5pdHNQZXJNZXRlcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwiYWFiYk11bHRpcGxpZXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5hYWJiTXVsdGlwbGllcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibGluZWFyU2xvcFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLmxpbmVhclNsb3AgKiBTZXR0aW5ncy5sZW5ndGhVbml0c1Blck1ldGVyO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXR0aW5nc0ludGVybmFsMiwgXCJsaW5lYXJTbG9wU3F1YXJlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLmxpbmVhclNsb3AgKiBTZXR0aW5ncy5sZW5ndGhVbml0c1Blck1ldGVyICogU2V0dGluZ3MubGluZWFyU2xvcCAqIFNldHRpbmdzLmxlbmd0aFVuaXRzUGVyTWV0ZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzSW50ZXJuYWwyLCBcImFuZ3VsYXJTbG9wXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gU2V0dGluZ3MuYW5ndWxhclNsb3A7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzSW50ZXJuYWwyLCBcInBvbHlnb25SYWRpdXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAyICogU2V0dGluZ3MubGluZWFyU2xvcDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibWF4U3ViU3RlcHNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5tYXhTdWJTdGVwcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibWF4VE9JQ29udGFjdHNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5tYXhUT0lDb250YWN0cztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibWF4VE9JSXRlcmF0aW9uc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLm1heFRPSUl0ZXJhdGlvbnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzSW50ZXJuYWwyLCBcIm1heERpc3RhbmNlSXRlcmF0aW9uc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLm1heERpc3RhbmNlSXRlcmF0aW9ucztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwidmVsb2NpdHlUaHJlc2hvbGRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy52ZWxvY2l0eVRocmVzaG9sZCAqIFNldHRpbmdzLmxlbmd0aFVuaXRzUGVyTWV0ZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzSW50ZXJuYWwyLCBcIm1heExpbmVhckNvcnJlY3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5tYXhMaW5lYXJDb3JyZWN0aW9uICogU2V0dGluZ3MubGVuZ3RoVW5pdHNQZXJNZXRlcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibWF4QW5ndWxhckNvcnJlY3Rpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5tYXhBbmd1bGFyQ29ycmVjdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibWF4VHJhbnNsYXRpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5tYXhUcmFuc2xhdGlvbiAqIFNldHRpbmdzLmxlbmd0aFVuaXRzUGVyTWV0ZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzSW50ZXJuYWwyLCBcIm1heFRyYW5zbGF0aW9uU3F1YXJlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLm1heFRyYW5zbGF0aW9uICogU2V0dGluZ3MubGVuZ3RoVW5pdHNQZXJNZXRlciAqIFNldHRpbmdzLm1heFRyYW5zbGF0aW9uICogU2V0dGluZ3MubGVuZ3RoVW5pdHNQZXJNZXRlcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibWF4Um90YXRpb25cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5tYXhSb3RhdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibWF4Um90YXRpb25TcXVhcmVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gU2V0dGluZ3MubWF4Um90YXRpb24gKiBTZXR0aW5ncy5tYXhSb3RhdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwiYmF1bWdhcnRlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gU2V0dGluZ3MuYmF1bWdhcnRlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXR0aW5nc0ludGVybmFsMiwgXCJ0b2lCYXVnYXJ0ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLnRvaUJhdWdhcnRlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXR0aW5nc0ludGVybmFsMiwgXCJ0aW1lVG9TbGVlcFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLnRpbWVUb1NsZWVwO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXR0aW5nc0ludGVybmFsMiwgXCJsaW5lYXJTbGVlcFRvbGVyYW5jZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLmxpbmVhclNsZWVwVG9sZXJhbmNlICogU2V0dGluZ3MubGVuZ3RoVW5pdHNQZXJNZXRlcjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwibGluZWFyU2xlZXBUb2xlcmFuY2VTcXJcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBTZXR0aW5ncy5saW5lYXJTbGVlcFRvbGVyYW5jZSAqIFNldHRpbmdzLmxlbmd0aFVuaXRzUGVyTWV0ZXIgKiBTZXR0aW5ncy5saW5lYXJTbGVlcFRvbGVyYW5jZSAqIFNldHRpbmdzLmxlbmd0aFVuaXRzUGVyTWV0ZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNldHRpbmdzSW50ZXJuYWwyLCBcImFuZ3VsYXJTbGVlcFRvbGVyYW5jZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIFNldHRpbmdzLmFuZ3VsYXJTbGVlcFRvbGVyYW5jZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2V0dGluZ3NJbnRlcm5hbDIsIFwiYW5ndWxhclNsZWVwVG9sZXJhbmNlU3FyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gU2V0dGluZ3MuYW5ndWxhclNsZWVwVG9sZXJhbmNlICogU2V0dGluZ3MuYW5ndWxhclNsZWVwVG9sZXJhbmNlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBTZXR0aW5nc0ludGVybmFsMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIFBvb2wgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gUG9vbDIob3B0cykge1xuICAgICAgICB0aGlzLl9saXN0ID0gW107XG4gICAgICAgIHRoaXMuX21heCA9IEluZmluaXR5O1xuICAgICAgICB0aGlzLl9oYXNDcmVhdGVGbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jcmVhdGVDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX2hhc0FsbG9jYXRlRm4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYWxsb2NhdGVDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX2hhc1JlbGVhc2VGbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9yZWxlYXNlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLl9oYXNEaXNwb3NlRm4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzcG9zZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xuICAgICAgICB0aGlzLl9tYXggPSBvcHRzLm1heCB8fCB0aGlzLl9tYXg7XG4gICAgICAgIHRoaXMuX2NyZWF0ZUZuID0gb3B0cy5jcmVhdGU7XG4gICAgICAgIHRoaXMuX2hhc0NyZWF0ZUZuID0gdHlwZW9mIHRoaXMuX2NyZWF0ZUZuID09PSBcImZ1bmN0aW9uXCI7XG4gICAgICAgIHRoaXMuX2FsbG9jYXRlRm4gPSBvcHRzLmFsbG9jYXRlO1xuICAgICAgICB0aGlzLl9oYXNBbGxvY2F0ZUZuID0gdHlwZW9mIHRoaXMuX2FsbG9jYXRlRm4gPT09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgdGhpcy5fcmVsZWFzZUZuID0gb3B0cy5yZWxlYXNlO1xuICAgICAgICB0aGlzLl9oYXNSZWxlYXNlRm4gPSB0eXBlb2YgdGhpcy5fcmVsZWFzZUZuID09PSBcImZ1bmN0aW9uXCI7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VGbiA9IG9wdHMuZGlzcG9zZTtcbiAgICAgICAgdGhpcy5faGFzRGlzcG9zZUZuID0gdHlwZW9mIHRoaXMuX2Rpc3Bvc2VGbiA9PT0gXCJmdW5jdGlvblwiO1xuICAgICAgfVxuICAgICAgUG9vbDIucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKG4yKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbjIgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB0aGlzLl9tYXggPSBuMjtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4O1xuICAgICAgfTtcbiAgICAgIFBvb2wyLnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aDtcbiAgICAgIH07XG4gICAgICBQb29sMi5wcm90b3R5cGUuYWxsb2NhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgIGlmICh0aGlzLl9saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBpdGVtID0gdGhpcy5fbGlzdC5zaGlmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2NyZWF0ZUNvdW50Kys7XG4gICAgICAgICAgaWYgKHRoaXMuX2hhc0NyZWF0ZUZuKSB7XG4gICAgICAgICAgICBpdGVtID0gdGhpcy5fY3JlYXRlRm4oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbSA9IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hbGxvY2F0ZUNvdW50Kys7XG4gICAgICAgIGlmICh0aGlzLl9oYXNBbGxvY2F0ZUZuKSB7XG4gICAgICAgICAgdGhpcy5fYWxsb2NhdGVGbihpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH07XG4gICAgICBQb29sMi5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgaWYgKHRoaXMuX2xpc3QubGVuZ3RoIDwgdGhpcy5fbWF4KSB7XG4gICAgICAgICAgdGhpcy5fcmVsZWFzZUNvdW50Kys7XG4gICAgICAgICAgaWYgKHRoaXMuX2hhc1JlbGVhc2VGbikge1xuICAgICAgICAgICAgdGhpcy5fcmVsZWFzZUZuKGl0ZW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9saXN0LnB1c2goaXRlbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZGlzcG9zZUNvdW50Kys7XG4gICAgICAgICAgaWYgKHRoaXMuX2hhc0Rpc3Bvc2VGbikge1xuICAgICAgICAgICAgaXRlbSA9IHRoaXMuX2Rpc3Bvc2VGbihpdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBQb29sMi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFwiICtcIiArIHRoaXMuX2NyZWF0ZUNvdW50ICsgXCIgPlwiICsgdGhpcy5fYWxsb2NhdGVDb3VudCArIFwiIDxcIiArIHRoaXMuX3JlbGVhc2VDb3VudCArIFwiIC1cIiArIHRoaXMuX2Rpc3Bvc2VDb3VudCArIFwiID1cIiArIHRoaXMuX2xpc3QubGVuZ3RoICsgXCIvXCIgKyB0aGlzLl9tYXg7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFBvb2wyO1xuICAgIH0oKVxuICApO1xuICB2YXIgbWF0aF9hYnMkOCA9IE1hdGguYWJzO1xuICB2YXIgbWF0aF9tYXgkNiA9IE1hdGgubWF4O1xuICB2YXIgVHJlZU5vZGUgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gVHJlZU5vZGUyKGlkKSB7XG4gICAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7XG4gICAgICAgIHRoaXMudXNlckRhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuY2hpbGQxID0gbnVsbDtcbiAgICAgICAgdGhpcy5jaGlsZDIgPSBudWxsO1xuICAgICAgICB0aGlzLmhlaWdodCA9IC0xO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICB9XG4gICAgICBUcmVlTm9kZTIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkICsgXCI6IFwiICsgdGhpcy51c2VyRGF0YTtcbiAgICAgIH07XG4gICAgICBUcmVlTm9kZTIucHJvdG90eXBlLmlzTGVhZiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZDEgPT0gbnVsbDtcbiAgICAgIH07XG4gICAgICByZXR1cm4gVHJlZU5vZGUyO1xuICAgIH0oKVxuICApO1xuICB2YXIgcG9vbFRyZWVOb2RlID0gbmV3IFBvb2woe1xuICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKCk7XG4gICAgfSxcbiAgICByZWxlYXNlOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICBub2RlLnVzZXJEYXRhID0gbnVsbDtcbiAgICAgIG5vZGUucGFyZW50ID0gbnVsbDtcbiAgICAgIG5vZGUuY2hpbGQxID0gbnVsbDtcbiAgICAgIG5vZGUuY2hpbGQyID0gbnVsbDtcbiAgICAgIG5vZGUuaGVpZ2h0ID0gLTE7XG4gICAgICBub2RlLmlkID0gdm9pZCAwO1xuICAgIH1cbiAgfSk7XG4gIHZhciBEeW5hbWljVHJlZSA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBEeW5hbWljVHJlZTIoKSB7XG4gICAgICAgIHRoaXMuaW5wdXRQb29sID0gbmV3IFBvb2woe1xuICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWxlYXNlOiBmdW5jdGlvbihzdGFjaykge1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RhY2tQb29sID0gbmV3IFBvb2woe1xuICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWxlYXNlOiBmdW5jdGlvbihzdGFjaykge1xuICAgICAgICAgICAgc3RhY2subGVuZ3RoID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLml0ZXJhdG9yUG9vbCA9IG5ldyBQb29sKHtcbiAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvcigpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVsZWFzZTogZnVuY3Rpb24oaXRlcmF0b3IpIHtcbiAgICAgICAgICAgIGl0ZXJhdG9yLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tX3Jvb3QgPSBudWxsO1xuICAgICAgICB0aGlzLm1fbm9kZXMgPSB7fTtcbiAgICAgICAgdGhpcy5tX2xhc3RQcm94eUlkID0gMDtcbiAgICAgIH1cbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICB2YXIgbm9kZSA9IHRoaXMubV9ub2Rlc1tpZF07XG4gICAgICAgIHJldHVybiBub2RlLnVzZXJEYXRhO1xuICAgICAgfTtcbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUuZ2V0RmF0QUFCQiA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5tX25vZGVzW2lkXTtcbiAgICAgICAgcmV0dXJuIG5vZGUuYWFiYjtcbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLmFsbG9jYXRlTm9kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbm9kZSA9IHBvb2xUcmVlTm9kZS5hbGxvY2F0ZSgpO1xuICAgICAgICBub2RlLmlkID0gKyt0aGlzLm1fbGFzdFByb3h5SWQ7XG4gICAgICAgIHRoaXMubV9ub2Rlc1tub2RlLmlkXSA9IG5vZGU7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfTtcbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUuZnJlZU5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm1fbm9kZXNbbm9kZS5pZF07XG4gICAgICAgIHBvb2xUcmVlTm9kZS5yZWxlYXNlKG5vZGUpO1xuICAgICAgfTtcbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUuY3JlYXRlUHJveHkgPSBmdW5jdGlvbihhYWJiLCB1c2VyRGF0YSkge1xuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuYWxsb2NhdGVOb2RlKCk7XG4gICAgICAgIG5vZGUuYWFiYi5zZXQoYWFiYik7XG4gICAgICAgIEFBQkIuZXh0ZW5kKG5vZGUuYWFiYiwgU2V0dGluZ3NJbnRlcm5hbC5hYWJiRXh0ZW5zaW9uKTtcbiAgICAgICAgbm9kZS51c2VyRGF0YSA9IHVzZXJEYXRhO1xuICAgICAgICBub2RlLmhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuaW5zZXJ0TGVhZihub2RlKTtcbiAgICAgICAgcmV0dXJuIG5vZGUuaWQ7XG4gICAgICB9O1xuICAgICAgRHluYW1pY1RyZWUyLnByb3RvdHlwZS5kZXN0cm95UHJveHkgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICB2YXIgbm9kZSA9IHRoaXMubV9ub2Rlc1tpZF07XG4gICAgICAgIHRoaXMucmVtb3ZlTGVhZihub2RlKTtcbiAgICAgICAgdGhpcy5mcmVlTm9kZShub2RlKTtcbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLm1vdmVQcm94eSA9IGZ1bmN0aW9uKGlkLCBhYWJiLCBkMikge1xuICAgICAgICB2YXIgbm9kZSA9IHRoaXMubV9ub2Rlc1tpZF07XG4gICAgICAgIGlmIChub2RlLmFhYmIuY29udGFpbnMoYWFiYikpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVMZWFmKG5vZGUpO1xuICAgICAgICBub2RlLmFhYmIuc2V0KGFhYmIpO1xuICAgICAgICBhYWJiID0gbm9kZS5hYWJiO1xuICAgICAgICBBQUJCLmV4dGVuZChhYWJiLCBTZXR0aW5nc0ludGVybmFsLmFhYmJFeHRlbnNpb24pO1xuICAgICAgICBpZiAoZDIueCA8IDApIHtcbiAgICAgICAgICBhYWJiLmxvd2VyQm91bmQueCArPSBkMi54ICogU2V0dGluZ3NJbnRlcm5hbC5hYWJiTXVsdGlwbGllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhYWJiLnVwcGVyQm91bmQueCArPSBkMi54ICogU2V0dGluZ3NJbnRlcm5hbC5hYWJiTXVsdGlwbGllcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZDIueSA8IDApIHtcbiAgICAgICAgICBhYWJiLmxvd2VyQm91bmQueSArPSBkMi55ICogU2V0dGluZ3NJbnRlcm5hbC5hYWJiTXVsdGlwbGllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhYWJiLnVwcGVyQm91bmQueSArPSBkMi55ICogU2V0dGluZ3NJbnRlcm5hbC5hYWJiTXVsdGlwbGllcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluc2VydExlYWYobm9kZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfTtcbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUuaW5zZXJ0TGVhZiA9IGZ1bmN0aW9uKGxlYWYpIHtcbiAgICAgICAgaWYgKHRoaXMubV9yb290ID09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLm1fcm9vdCA9IGxlYWY7XG4gICAgICAgICAgdGhpcy5tX3Jvb3QucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxlYWZBQUJCID0gbGVhZi5hYWJiO1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLm1fcm9vdDtcbiAgICAgICAgd2hpbGUgKCFpbmRleC5pc0xlYWYoKSkge1xuICAgICAgICAgIHZhciBjaGlsZDEgPSBpbmRleC5jaGlsZDE7XG4gICAgICAgICAgdmFyIGNoaWxkMiA9IGluZGV4LmNoaWxkMjtcbiAgICAgICAgICB2YXIgYXJlYSA9IGluZGV4LmFhYmIuZ2V0UGVyaW1ldGVyKCk7XG4gICAgICAgICAgdmFyIGNvbWJpbmVkQXJlYSA9IEFBQkIuY29tYmluZWRQZXJpbWV0ZXIoaW5kZXguYWFiYiwgbGVhZkFBQkIpO1xuICAgICAgICAgIHZhciBjb3N0ID0gMiAqIGNvbWJpbmVkQXJlYTtcbiAgICAgICAgICB2YXIgaW5oZXJpdGFuY2VDb3N0ID0gMiAqIChjb21iaW5lZEFyZWEgLSBhcmVhKTtcbiAgICAgICAgICB2YXIgbmV3QXJlYTEgPSBBQUJCLmNvbWJpbmVkUGVyaW1ldGVyKGxlYWZBQUJCLCBjaGlsZDEuYWFiYik7XG4gICAgICAgICAgdmFyIGNvc3QxID0gbmV3QXJlYTEgKyBpbmhlcml0YW5jZUNvc3Q7XG4gICAgICAgICAgaWYgKCFjaGlsZDEuaXNMZWFmKCkpIHtcbiAgICAgICAgICAgIHZhciBvbGRBcmVhID0gY2hpbGQxLmFhYmIuZ2V0UGVyaW1ldGVyKCk7XG4gICAgICAgICAgICBjb3N0MSAtPSBvbGRBcmVhO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgbmV3QXJlYTIgPSBBQUJCLmNvbWJpbmVkUGVyaW1ldGVyKGxlYWZBQUJCLCBjaGlsZDIuYWFiYik7XG4gICAgICAgICAgdmFyIGNvc3QyID0gbmV3QXJlYTIgKyBpbmhlcml0YW5jZUNvc3Q7XG4gICAgICAgICAgaWYgKCFjaGlsZDIuaXNMZWFmKCkpIHtcbiAgICAgICAgICAgIHZhciBvbGRBcmVhID0gY2hpbGQyLmFhYmIuZ2V0UGVyaW1ldGVyKCk7XG4gICAgICAgICAgICBjb3N0MiAtPSBvbGRBcmVhO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29zdCA8IGNvc3QxICYmIGNvc3QgPCBjb3N0Mikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb3N0MSA8IGNvc3QyKSB7XG4gICAgICAgICAgICBpbmRleCA9IGNoaWxkMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5kZXggPSBjaGlsZDI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzaWJsaW5nID0gaW5kZXg7XG4gICAgICAgIHZhciBvbGRQYXJlbnQgPSBzaWJsaW5nLnBhcmVudDtcbiAgICAgICAgdmFyIG5ld1BhcmVudCA9IHRoaXMuYWxsb2NhdGVOb2RlKCk7XG4gICAgICAgIG5ld1BhcmVudC5wYXJlbnQgPSBvbGRQYXJlbnQ7XG4gICAgICAgIG5ld1BhcmVudC51c2VyRGF0YSA9IG51bGw7XG4gICAgICAgIG5ld1BhcmVudC5hYWJiLmNvbWJpbmUobGVhZkFBQkIsIHNpYmxpbmcuYWFiYik7XG4gICAgICAgIG5ld1BhcmVudC5oZWlnaHQgPSBzaWJsaW5nLmhlaWdodCArIDE7XG4gICAgICAgIGlmIChvbGRQYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChvbGRQYXJlbnQuY2hpbGQxID09PSBzaWJsaW5nKSB7XG4gICAgICAgICAgICBvbGRQYXJlbnQuY2hpbGQxID0gbmV3UGFyZW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvbGRQYXJlbnQuY2hpbGQyID0gbmV3UGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdQYXJlbnQuY2hpbGQxID0gc2libGluZztcbiAgICAgICAgICBuZXdQYXJlbnQuY2hpbGQyID0gbGVhZjtcbiAgICAgICAgICBzaWJsaW5nLnBhcmVudCA9IG5ld1BhcmVudDtcbiAgICAgICAgICBsZWFmLnBhcmVudCA9IG5ld1BhcmVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdQYXJlbnQuY2hpbGQxID0gc2libGluZztcbiAgICAgICAgICBuZXdQYXJlbnQuY2hpbGQyID0gbGVhZjtcbiAgICAgICAgICBzaWJsaW5nLnBhcmVudCA9IG5ld1BhcmVudDtcbiAgICAgICAgICBsZWFmLnBhcmVudCA9IG5ld1BhcmVudDtcbiAgICAgICAgICB0aGlzLm1fcm9vdCA9IG5ld1BhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBpbmRleCA9IGxlYWYucGFyZW50O1xuICAgICAgICB3aGlsZSAoaW5kZXggIT0gbnVsbCkge1xuICAgICAgICAgIGluZGV4ID0gdGhpcy5iYWxhbmNlKGluZGV4KTtcbiAgICAgICAgICB2YXIgY2hpbGQxID0gaW5kZXguY2hpbGQxO1xuICAgICAgICAgIHZhciBjaGlsZDIgPSBpbmRleC5jaGlsZDI7XG4gICAgICAgICAgaW5kZXguaGVpZ2h0ID0gMSArIG1hdGhfbWF4JDYoY2hpbGQxLmhlaWdodCwgY2hpbGQyLmhlaWdodCk7XG4gICAgICAgICAgaW5kZXguYWFiYi5jb21iaW5lKGNoaWxkMS5hYWJiLCBjaGlsZDIuYWFiYik7XG4gICAgICAgICAgaW5kZXggPSBpbmRleC5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLnJlbW92ZUxlYWYgPSBmdW5jdGlvbihsZWFmKSB7XG4gICAgICAgIGlmIChsZWFmID09PSB0aGlzLm1fcm9vdCkge1xuICAgICAgICAgIHRoaXMubV9yb290ID0gbnVsbDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmVudCA9IGxlYWYucGFyZW50O1xuICAgICAgICB2YXIgZ3JhbmRQYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgICAgICB2YXIgc2libGluZztcbiAgICAgICAgaWYgKHBhcmVudC5jaGlsZDEgPT09IGxlYWYpIHtcbiAgICAgICAgICBzaWJsaW5nID0gcGFyZW50LmNoaWxkMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaWJsaW5nID0gcGFyZW50LmNoaWxkMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3JhbmRQYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChncmFuZFBhcmVudC5jaGlsZDEgPT09IHBhcmVudCkge1xuICAgICAgICAgICAgZ3JhbmRQYXJlbnQuY2hpbGQxID0gc2libGluZztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JhbmRQYXJlbnQuY2hpbGQyID0gc2libGluZztcbiAgICAgICAgICB9XG4gICAgICAgICAgc2libGluZy5wYXJlbnQgPSBncmFuZFBhcmVudDtcbiAgICAgICAgICB0aGlzLmZyZWVOb2RlKHBhcmVudCk7XG4gICAgICAgICAgdmFyIGluZGV4ID0gZ3JhbmRQYXJlbnQ7XG4gICAgICAgICAgd2hpbGUgKGluZGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5iYWxhbmNlKGluZGV4KTtcbiAgICAgICAgICAgIHZhciBjaGlsZDEgPSBpbmRleC5jaGlsZDE7XG4gICAgICAgICAgICB2YXIgY2hpbGQyID0gaW5kZXguY2hpbGQyO1xuICAgICAgICAgICAgaW5kZXguYWFiYi5jb21iaW5lKGNoaWxkMS5hYWJiLCBjaGlsZDIuYWFiYik7XG4gICAgICAgICAgICBpbmRleC5oZWlnaHQgPSAxICsgbWF0aF9tYXgkNihjaGlsZDEuaGVpZ2h0LCBjaGlsZDIuaGVpZ2h0KTtcbiAgICAgICAgICAgIGluZGV4ID0gaW5kZXgucGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fcm9vdCA9IHNpYmxpbmc7XG4gICAgICAgICAgc2libGluZy5wYXJlbnQgPSBudWxsO1xuICAgICAgICAgIHRoaXMuZnJlZU5vZGUocGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUuYmFsYW5jZSA9IGZ1bmN0aW9uKGlBKSB7XG4gICAgICAgIHZhciBBID0gaUE7XG4gICAgICAgIGlmIChBLmlzTGVhZigpIHx8IEEuaGVpZ2h0IDwgMikge1xuICAgICAgICAgIHJldHVybiBpQTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgQiA9IEEuY2hpbGQxO1xuICAgICAgICB2YXIgQyA9IEEuY2hpbGQyO1xuICAgICAgICB2YXIgYmFsYW5jZSA9IEMuaGVpZ2h0IC0gQi5oZWlnaHQ7XG4gICAgICAgIGlmIChiYWxhbmNlID4gMSkge1xuICAgICAgICAgIHZhciBGID0gQy5jaGlsZDE7XG4gICAgICAgICAgdmFyIEcgPSBDLmNoaWxkMjtcbiAgICAgICAgICBDLmNoaWxkMSA9IEE7XG4gICAgICAgICAgQy5wYXJlbnQgPSBBLnBhcmVudDtcbiAgICAgICAgICBBLnBhcmVudCA9IEM7XG4gICAgICAgICAgaWYgKEMucGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChDLnBhcmVudC5jaGlsZDEgPT09IGlBKSB7XG4gICAgICAgICAgICAgIEMucGFyZW50LmNoaWxkMSA9IEM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBDLnBhcmVudC5jaGlsZDIgPSBDO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1fcm9vdCA9IEM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChGLmhlaWdodCA+IEcuaGVpZ2h0KSB7XG4gICAgICAgICAgICBDLmNoaWxkMiA9IEY7XG4gICAgICAgICAgICBBLmNoaWxkMiA9IEc7XG4gICAgICAgICAgICBHLnBhcmVudCA9IEE7XG4gICAgICAgICAgICBBLmFhYmIuY29tYmluZShCLmFhYmIsIEcuYWFiYik7XG4gICAgICAgICAgICBDLmFhYmIuY29tYmluZShBLmFhYmIsIEYuYWFiYik7XG4gICAgICAgICAgICBBLmhlaWdodCA9IDEgKyBtYXRoX21heCQ2KEIuaGVpZ2h0LCBHLmhlaWdodCk7XG4gICAgICAgICAgICBDLmhlaWdodCA9IDEgKyBtYXRoX21heCQ2KEEuaGVpZ2h0LCBGLmhlaWdodCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEMuY2hpbGQyID0gRztcbiAgICAgICAgICAgIEEuY2hpbGQyID0gRjtcbiAgICAgICAgICAgIEYucGFyZW50ID0gQTtcbiAgICAgICAgICAgIEEuYWFiYi5jb21iaW5lKEIuYWFiYiwgRi5hYWJiKTtcbiAgICAgICAgICAgIEMuYWFiYi5jb21iaW5lKEEuYWFiYiwgRy5hYWJiKTtcbiAgICAgICAgICAgIEEuaGVpZ2h0ID0gMSArIG1hdGhfbWF4JDYoQi5oZWlnaHQsIEYuaGVpZ2h0KTtcbiAgICAgICAgICAgIEMuaGVpZ2h0ID0gMSArIG1hdGhfbWF4JDYoQS5oZWlnaHQsIEcuaGVpZ2h0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIEM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhbGFuY2UgPCAtMSkge1xuICAgICAgICAgIHZhciBEID0gQi5jaGlsZDE7XG4gICAgICAgICAgdmFyIEUgPSBCLmNoaWxkMjtcbiAgICAgICAgICBCLmNoaWxkMSA9IEE7XG4gICAgICAgICAgQi5wYXJlbnQgPSBBLnBhcmVudDtcbiAgICAgICAgICBBLnBhcmVudCA9IEI7XG4gICAgICAgICAgaWYgKEIucGFyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChCLnBhcmVudC5jaGlsZDEgPT09IEEpIHtcbiAgICAgICAgICAgICAgQi5wYXJlbnQuY2hpbGQxID0gQjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIEIucGFyZW50LmNoaWxkMiA9IEI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubV9yb290ID0gQjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKEQuaGVpZ2h0ID4gRS5oZWlnaHQpIHtcbiAgICAgICAgICAgIEIuY2hpbGQyID0gRDtcbiAgICAgICAgICAgIEEuY2hpbGQxID0gRTtcbiAgICAgICAgICAgIEUucGFyZW50ID0gQTtcbiAgICAgICAgICAgIEEuYWFiYi5jb21iaW5lKEMuYWFiYiwgRS5hYWJiKTtcbiAgICAgICAgICAgIEIuYWFiYi5jb21iaW5lKEEuYWFiYiwgRC5hYWJiKTtcbiAgICAgICAgICAgIEEuaGVpZ2h0ID0gMSArIG1hdGhfbWF4JDYoQy5oZWlnaHQsIEUuaGVpZ2h0KTtcbiAgICAgICAgICAgIEIuaGVpZ2h0ID0gMSArIG1hdGhfbWF4JDYoQS5oZWlnaHQsIEQuaGVpZ2h0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQi5jaGlsZDIgPSBFO1xuICAgICAgICAgICAgQS5jaGlsZDEgPSBEO1xuICAgICAgICAgICAgRC5wYXJlbnQgPSBBO1xuICAgICAgICAgICAgQS5hYWJiLmNvbWJpbmUoQy5hYWJiLCBELmFhYmIpO1xuICAgICAgICAgICAgQi5hYWJiLmNvbWJpbmUoQS5hYWJiLCBFLmFhYmIpO1xuICAgICAgICAgICAgQS5oZWlnaHQgPSAxICsgbWF0aF9tYXgkNihDLmhlaWdodCwgRC5oZWlnaHQpO1xuICAgICAgICAgICAgQi5oZWlnaHQgPSAxICsgbWF0aF9tYXgkNihBLmhlaWdodCwgRS5oZWlnaHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gQjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQTtcbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5tX3Jvb3QgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm1fcm9vdC5oZWlnaHQ7XG4gICAgICB9O1xuICAgICAgRHluYW1pY1RyZWUyLnByb3RvdHlwZS5nZXRBcmVhUmF0aW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMubV9yb290ID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcm9vdCA9IHRoaXMubV9yb290O1xuICAgICAgICB2YXIgcm9vdEFyZWEgPSByb290LmFhYmIuZ2V0UGVyaW1ldGVyKCk7XG4gICAgICAgIHZhciB0b3RhbEFyZWEgPSAwO1xuICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgdmFyIGl0ID0gdGhpcy5pdGVyYXRvclBvb2wuYWxsb2NhdGUoKS5wcmVvcmRlcih0aGlzLm1fcm9vdCk7XG4gICAgICAgIHdoaWxlIChub2RlID0gaXQubmV4dCgpKSB7XG4gICAgICAgICAgaWYgKG5vZGUuaGVpZ2h0IDwgMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRvdGFsQXJlYSArPSBub2RlLmFhYmIuZ2V0UGVyaW1ldGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pdGVyYXRvclBvb2wucmVsZWFzZShpdCk7XG4gICAgICAgIHJldHVybiB0b3RhbEFyZWEgLyByb290QXJlYTtcbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLmNvbXB1dGVIZWlnaHQgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgaWYgKHR5cGVvZiBpZCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIG5vZGUgPSB0aGlzLm1fbm9kZXNbaWRdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUgPSB0aGlzLm1fcm9vdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5pc0xlYWYoKSkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoZWlnaHQxID0gdGhpcy5jb21wdXRlSGVpZ2h0KG5vZGUuY2hpbGQxLmlkKTtcbiAgICAgICAgdmFyIGhlaWdodDIgPSB0aGlzLmNvbXB1dGVIZWlnaHQobm9kZS5jaGlsZDIuaWQpO1xuICAgICAgICByZXR1cm4gMSArIG1hdGhfbWF4JDYoaGVpZ2h0MSwgaGVpZ2h0Mik7XG4gICAgICB9O1xuICAgICAgRHluYW1pY1RyZWUyLnByb3RvdHlwZS52YWxpZGF0ZVN0cnVjdHVyZSA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZSA9PT0gdGhpcy5tX3Jvb3QpIDtcbiAgICAgICAgdmFyIGNoaWxkMSA9IG5vZGUuY2hpbGQxO1xuICAgICAgICB2YXIgY2hpbGQyID0gbm9kZS5jaGlsZDI7XG4gICAgICAgIGlmIChub2RlLmlzTGVhZigpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsaWRhdGVTdHJ1Y3R1cmUoY2hpbGQxKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZVN0cnVjdHVyZShjaGlsZDIpO1xuICAgICAgfTtcbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUudmFsaWRhdGVNZXRyaWNzID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjaGlsZDEgPSBub2RlLmNoaWxkMTtcbiAgICAgICAgdmFyIGNoaWxkMiA9IG5vZGUuY2hpbGQyO1xuICAgICAgICBpZiAobm9kZS5pc0xlYWYoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbGlkYXRlTWV0cmljcyhjaGlsZDEpO1xuICAgICAgICB0aGlzLnZhbGlkYXRlTWV0cmljcyhjaGlsZDIpO1xuICAgICAgfTtcbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfTtcbiAgICAgIER5bmFtaWNUcmVlMi5wcm90b3R5cGUuZ2V0TWF4QmFsYW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbWF4QmFsYW5jZSA9IDA7XG4gICAgICAgIHZhciBub2RlO1xuICAgICAgICB2YXIgaXQgPSB0aGlzLml0ZXJhdG9yUG9vbC5hbGxvY2F0ZSgpLnByZW9yZGVyKHRoaXMubV9yb290KTtcbiAgICAgICAgd2hpbGUgKG5vZGUgPSBpdC5uZXh0KCkpIHtcbiAgICAgICAgICBpZiAobm9kZS5oZWlnaHQgPD0gMSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBiYWxhbmNlID0gbWF0aF9hYnMkOChub2RlLmNoaWxkMi5oZWlnaHQgLSBub2RlLmNoaWxkMS5oZWlnaHQpO1xuICAgICAgICAgIG1heEJhbGFuY2UgPSBtYXRoX21heCQ2KG1heEJhbGFuY2UsIGJhbGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXRlcmF0b3JQb29sLnJlbGVhc2UoaXQpO1xuICAgICAgICByZXR1cm4gbWF4QmFsYW5jZTtcbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLnJlYnVpbGRCb3R0b21VcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbm9kZXMgPSBbXTtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgIHZhciBpdCA9IHRoaXMuaXRlcmF0b3JQb29sLmFsbG9jYXRlKCkucHJlb3JkZXIodGhpcy5tX3Jvb3QpO1xuICAgICAgICB3aGlsZSAobm9kZSA9IGl0Lm5leHQoKSkge1xuICAgICAgICAgIGlmIChub2RlLmhlaWdodCA8IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobm9kZS5pc0xlYWYoKSkge1xuICAgICAgICAgICAgbm9kZS5wYXJlbnQgPSBudWxsO1xuICAgICAgICAgICAgbm9kZXNbY291bnRdID0gbm9kZTtcbiAgICAgICAgICAgICsrY291bnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZnJlZU5vZGUobm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXRlcmF0b3JQb29sLnJlbGVhc2UoaXQpO1xuICAgICAgICB3aGlsZSAoY291bnQgPiAxKSB7XG4gICAgICAgICAgdmFyIG1pbkNvc3QgPSBJbmZpbml0eTtcbiAgICAgICAgICB2YXIgaU1pbiA9IC0xO1xuICAgICAgICAgIHZhciBqTWluID0gLTE7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgYWFiYmkgPSBub2Rlc1tpXS5hYWJiO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgY291bnQ7ICsraikge1xuICAgICAgICAgICAgICB2YXIgYWFiYmogPSBub2Rlc1tqXS5hYWJiO1xuICAgICAgICAgICAgICB2YXIgY29zdCA9IEFBQkIuY29tYmluZWRQZXJpbWV0ZXIoYWFiYmksIGFhYmJqKTtcbiAgICAgICAgICAgICAgaWYgKGNvc3QgPCBtaW5Db3N0KSB7XG4gICAgICAgICAgICAgICAgaU1pbiA9IGk7XG4gICAgICAgICAgICAgICAgak1pbiA9IGo7XG4gICAgICAgICAgICAgICAgbWluQ29zdCA9IGNvc3Q7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGNoaWxkMSA9IG5vZGVzW2lNaW5dO1xuICAgICAgICAgIHZhciBjaGlsZDIgPSBub2Rlc1tqTWluXTtcbiAgICAgICAgICB2YXIgcGFyZW50XzEgPSB0aGlzLmFsbG9jYXRlTm9kZSgpO1xuICAgICAgICAgIHBhcmVudF8xLmNoaWxkMSA9IGNoaWxkMTtcbiAgICAgICAgICBwYXJlbnRfMS5jaGlsZDIgPSBjaGlsZDI7XG4gICAgICAgICAgcGFyZW50XzEuaGVpZ2h0ID0gMSArIG1hdGhfbWF4JDYoY2hpbGQxLmhlaWdodCwgY2hpbGQyLmhlaWdodCk7XG4gICAgICAgICAgcGFyZW50XzEuYWFiYi5jb21iaW5lKGNoaWxkMS5hYWJiLCBjaGlsZDIuYWFiYik7XG4gICAgICAgICAgcGFyZW50XzEucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICBjaGlsZDEucGFyZW50ID0gcGFyZW50XzE7XG4gICAgICAgICAgY2hpbGQyLnBhcmVudCA9IHBhcmVudF8xO1xuICAgICAgICAgIG5vZGVzW2pNaW5dID0gbm9kZXNbY291bnQgLSAxXTtcbiAgICAgICAgICBub2Rlc1tpTWluXSA9IHBhcmVudF8xO1xuICAgICAgICAgIC0tY291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX3Jvb3QgPSBub2Rlc1swXTtcbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLnNoaWZ0T3JpZ2luID0gZnVuY3Rpb24obmV3T3JpZ2luKSB7XG4gICAgICAgIHZhciBub2RlO1xuICAgICAgICB2YXIgaXQgPSB0aGlzLml0ZXJhdG9yUG9vbC5hbGxvY2F0ZSgpLnByZW9yZGVyKHRoaXMubV9yb290KTtcbiAgICAgICAgd2hpbGUgKG5vZGUgPSBpdC5uZXh0KCkpIHtcbiAgICAgICAgICB2YXIgYWFiYiA9IG5vZGUuYWFiYjtcbiAgICAgICAgICBhYWJiLmxvd2VyQm91bmQueCAtPSBuZXdPcmlnaW4ueDtcbiAgICAgICAgICBhYWJiLmxvd2VyQm91bmQueSAtPSBuZXdPcmlnaW4ueTtcbiAgICAgICAgICBhYWJiLnVwcGVyQm91bmQueCAtPSBuZXdPcmlnaW4ueDtcbiAgICAgICAgICBhYWJiLnVwcGVyQm91bmQueSAtPSBuZXdPcmlnaW4ueTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLml0ZXJhdG9yUG9vbC5yZWxlYXNlKGl0KTtcbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24oYWFiYiwgcXVlcnlDYWxsYmFjaykge1xuICAgICAgICB2YXIgc3RhY2sgPSB0aGlzLnN0YWNrUG9vbC5hbGxvY2F0ZSgpO1xuICAgICAgICBzdGFjay5wdXNoKHRoaXMubV9yb290KTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgbm9kZSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoQUFCQi50ZXN0T3ZlcmxhcChub2RlLmFhYmIsIGFhYmIpKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5pc0xlYWYoKSkge1xuICAgICAgICAgICAgICB2YXIgcHJvY2VlZCA9IHF1ZXJ5Q2FsbGJhY2sobm9kZS5pZCk7XG4gICAgICAgICAgICAgIGlmIChwcm9jZWVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3RhY2sucHVzaChub2RlLmNoaWxkMSk7XG4gICAgICAgICAgICAgIHN0YWNrLnB1c2gobm9kZS5jaGlsZDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YWNrUG9vbC5yZWxlYXNlKHN0YWNrKTtcbiAgICAgIH07XG4gICAgICBEeW5hbWljVHJlZTIucHJvdG90eXBlLnJheUNhc3QgPSBmdW5jdGlvbihpbnB1dDIsIHJheUNhc3RDYWxsYmFjaykge1xuICAgICAgICB2YXIgcDEgPSBpbnB1dDIucDE7XG4gICAgICAgIHZhciBwMiA9IGlucHV0Mi5wMjtcbiAgICAgICAgdmFyIHIgPSBWZWMyLnN1YihwMiwgcDEpO1xuICAgICAgICByLm5vcm1hbGl6ZSgpO1xuICAgICAgICB2YXIgdjMgPSBWZWMyLmNyb3NzTnVtVmVjMigxLCByKTtcbiAgICAgICAgdmFyIGFic192ID0gVmVjMi5hYnModjMpO1xuICAgICAgICB2YXIgbWF4RnJhY3Rpb24gPSBpbnB1dDIubWF4RnJhY3Rpb247XG4gICAgICAgIHZhciBzZWdtZW50QUFCQiA9IG5ldyBBQUJCKCk7XG4gICAgICAgIHZhciB0ID0gVmVjMi5jb21iaW5lKDEgLSBtYXhGcmFjdGlvbiwgcDEsIG1heEZyYWN0aW9uLCBwMik7XG4gICAgICAgIHNlZ21lbnRBQUJCLmNvbWJpbmVQb2ludHMocDEsIHQpO1xuICAgICAgICB2YXIgc3RhY2sgPSB0aGlzLnN0YWNrUG9vbC5hbGxvY2F0ZSgpO1xuICAgICAgICB2YXIgc3ViSW5wdXQgPSB0aGlzLmlucHV0UG9vbC5hbGxvY2F0ZSgpO1xuICAgICAgICBzdGFjay5wdXNoKHRoaXMubV9yb290KTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgbm9kZSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoQUFCQi50ZXN0T3ZlcmxhcChub2RlLmFhYmIsIHNlZ21lbnRBQUJCKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgYzIgPSBub2RlLmFhYmIuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgdmFyIGggPSBub2RlLmFhYmIuZ2V0RXh0ZW50cygpO1xuICAgICAgICAgIHZhciBzZXBhcmF0aW9uID0gbWF0aF9hYnMkOChWZWMyLmRvdCh2MywgVmVjMi5zdWIocDEsIGMyKSkpIC0gVmVjMi5kb3QoYWJzX3YsIGgpO1xuICAgICAgICAgIGlmIChzZXBhcmF0aW9uID4gMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChub2RlLmlzTGVhZigpKSB7XG4gICAgICAgICAgICBzdWJJbnB1dC5wMSA9IFZlYzIuY2xvbmUoaW5wdXQyLnAxKTtcbiAgICAgICAgICAgIHN1YklucHV0LnAyID0gVmVjMi5jbG9uZShpbnB1dDIucDIpO1xuICAgICAgICAgICAgc3ViSW5wdXQubWF4RnJhY3Rpb24gPSBtYXhGcmFjdGlvbjtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJheUNhc3RDYWxsYmFjayhzdWJJbnB1dCwgbm9kZS5pZCk7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID4gMCkge1xuICAgICAgICAgICAgICBtYXhGcmFjdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICB0ID0gVmVjMi5jb21iaW5lKDEgLSBtYXhGcmFjdGlvbiwgcDEsIG1heEZyYWN0aW9uLCBwMik7XG4gICAgICAgICAgICAgIHNlZ21lbnRBQUJCLmNvbWJpbmVQb2ludHMocDEsIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGFjay5wdXNoKG5vZGUuY2hpbGQxKTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2gobm9kZS5jaGlsZDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YWNrUG9vbC5yZWxlYXNlKHN0YWNrKTtcbiAgICAgICAgdGhpcy5pbnB1dFBvb2wucmVsZWFzZShzdWJJbnB1dCk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIER5bmFtaWNUcmVlMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIEl0ZXJhdG9yID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIEl0ZXJhdG9yMigpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRzID0gW107XG4gICAgICAgIHRoaXMuc3RhdGVzID0gW107XG4gICAgICB9XG4gICAgICBJdGVyYXRvcjIucHJvdG90eXBlLnByZW9yZGVyID0gZnVuY3Rpb24ocm9vdCkge1xuICAgICAgICB0aGlzLnBhcmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5wYXJlbnRzLnB1c2gocm9vdCk7XG4gICAgICAgIHRoaXMuc3RhdGVzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuc3RhdGVzLnB1c2goMCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIEl0ZXJhdG9yMi5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5wYXJlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgaSA9IHRoaXMucGFyZW50cy5sZW5ndGggLSAxO1xuICAgICAgICAgIHZhciBub2RlID0gdGhpcy5wYXJlbnRzW2ldO1xuICAgICAgICAgIGlmICh0aGlzLnN0YXRlc1tpXSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZXNbaV0gPSAxO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLnN0YXRlc1tpXSA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZXNbaV0gPSAyO1xuICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGQxKSB7XG4gICAgICAgICAgICAgIHRoaXMucGFyZW50cy5wdXNoKG5vZGUuY2hpbGQxKTtcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZXMucHVzaCgxKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuY2hpbGQxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZXNbaV0gPT09IDIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVzW2ldID0gMztcbiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkMikge1xuICAgICAgICAgICAgICB0aGlzLnBhcmVudHMucHVzaChub2RlLmNoaWxkMik7XG4gICAgICAgICAgICAgIHRoaXMuc3RhdGVzLnB1c2goMSk7XG4gICAgICAgICAgICAgIHJldHVybiBub2RlLmNoaWxkMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5wYXJlbnRzLnBvcCgpO1xuICAgICAgICAgIHRoaXMuc3RhdGVzLnBvcCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgSXRlcmF0b3IyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnBhcmVudHMubGVuZ3RoID0gMDtcbiAgICAgIH07XG4gICAgICByZXR1cm4gSXRlcmF0b3IyO1xuICAgIH0oKVxuICApO1xuICB2YXIgbWF0aF9tYXgkNSA9IE1hdGgubWF4O1xuICB2YXIgbWF0aF9taW4kNiA9IE1hdGgubWluO1xuICB2YXIgQnJvYWRQaGFzZSA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBCcm9hZFBoYXNlMigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5tX3RyZWUgPSBuZXcgRHluYW1pY1RyZWUoKTtcbiAgICAgICAgdGhpcy5tX21vdmVCdWZmZXIgPSBbXTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGZ1bmN0aW9uKGFhYmIsIHF1ZXJ5Q2FsbGJhY2spIHtcbiAgICAgICAgICBfdGhpcy5tX3RyZWUucXVlcnkoYWFiYiwgcXVlcnlDYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucXVlcnlDYWxsYmFjayA9IGZ1bmN0aW9uKHByb3h5SWQpIHtcbiAgICAgICAgICBpZiAocHJveHlJZCA9PT0gX3RoaXMubV9xdWVyeVByb3h5SWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcHJveHlJZEEgPSBtYXRoX21pbiQ2KHByb3h5SWQsIF90aGlzLm1fcXVlcnlQcm94eUlkKTtcbiAgICAgICAgICB2YXIgcHJveHlJZEIgPSBtYXRoX21heCQ1KHByb3h5SWQsIF90aGlzLm1fcXVlcnlQcm94eUlkKTtcbiAgICAgICAgICB2YXIgdXNlckRhdGFBID0gX3RoaXMubV90cmVlLmdldFVzZXJEYXRhKHByb3h5SWRBKTtcbiAgICAgICAgICB2YXIgdXNlckRhdGFCID0gX3RoaXMubV90cmVlLmdldFVzZXJEYXRhKHByb3h5SWRCKTtcbiAgICAgICAgICBfdGhpcy5tX2NhbGxiYWNrKHVzZXJEYXRhQSwgdXNlckRhdGFCKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIEJyb2FkUGhhc2UyLnByb3RvdHlwZS5nZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKHByb3h5SWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV90cmVlLmdldFVzZXJEYXRhKHByb3h5SWQpO1xuICAgICAgfTtcbiAgICAgIEJyb2FkUGhhc2UyLnByb3RvdHlwZS50ZXN0T3ZlcmxhcCA9IGZ1bmN0aW9uKHByb3h5SWRBLCBwcm94eUlkQikge1xuICAgICAgICB2YXIgYWFiYkEgPSB0aGlzLm1fdHJlZS5nZXRGYXRBQUJCKHByb3h5SWRBKTtcbiAgICAgICAgdmFyIGFhYmJCID0gdGhpcy5tX3RyZWUuZ2V0RmF0QUFCQihwcm94eUlkQik7XG4gICAgICAgIHJldHVybiBBQUJCLnRlc3RPdmVybGFwKGFhYmJBLCBhYWJiQik7XG4gICAgICB9O1xuICAgICAgQnJvYWRQaGFzZTIucHJvdG90eXBlLmdldEZhdEFBQkIgPSBmdW5jdGlvbihwcm94eUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fdHJlZS5nZXRGYXRBQUJCKHByb3h5SWQpO1xuICAgICAgfTtcbiAgICAgIEJyb2FkUGhhc2UyLnByb3RvdHlwZS5nZXRQcm94eUNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbW92ZUJ1ZmZlci5sZW5ndGg7XG4gICAgICB9O1xuICAgICAgQnJvYWRQaGFzZTIucHJvdG90eXBlLmdldFRyZWVIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV90cmVlLmdldEhlaWdodCgpO1xuICAgICAgfTtcbiAgICAgIEJyb2FkUGhhc2UyLnByb3RvdHlwZS5nZXRUcmVlQmFsYW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3RyZWUuZ2V0TWF4QmFsYW5jZSgpO1xuICAgICAgfTtcbiAgICAgIEJyb2FkUGhhc2UyLnByb3RvdHlwZS5nZXRUcmVlUXVhbGl0eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3RyZWUuZ2V0QXJlYVJhdGlvKCk7XG4gICAgICB9O1xuICAgICAgQnJvYWRQaGFzZTIucHJvdG90eXBlLnJheUNhc3QgPSBmdW5jdGlvbihpbnB1dDIsIHJheUNhc3RDYWxsYmFjaykge1xuICAgICAgICB0aGlzLm1fdHJlZS5yYXlDYXN0KGlucHV0MiwgcmF5Q2FzdENhbGxiYWNrKTtcbiAgICAgIH07XG4gICAgICBCcm9hZFBoYXNlMi5wcm90b3R5cGUuc2hpZnRPcmlnaW4gPSBmdW5jdGlvbihuZXdPcmlnaW4pIHtcbiAgICAgICAgdGhpcy5tX3RyZWUuc2hpZnRPcmlnaW4obmV3T3JpZ2luKTtcbiAgICAgIH07XG4gICAgICBCcm9hZFBoYXNlMi5wcm90b3R5cGUuY3JlYXRlUHJveHkgPSBmdW5jdGlvbihhYWJiLCB1c2VyRGF0YSkge1xuICAgICAgICB2YXIgcHJveHlJZCA9IHRoaXMubV90cmVlLmNyZWF0ZVByb3h5KGFhYmIsIHVzZXJEYXRhKTtcbiAgICAgICAgdGhpcy5idWZmZXJNb3ZlKHByb3h5SWQpO1xuICAgICAgICByZXR1cm4gcHJveHlJZDtcbiAgICAgIH07XG4gICAgICBCcm9hZFBoYXNlMi5wcm90b3R5cGUuZGVzdHJveVByb3h5ID0gZnVuY3Rpb24ocHJveHlJZCkge1xuICAgICAgICB0aGlzLnVuYnVmZmVyTW92ZShwcm94eUlkKTtcbiAgICAgICAgdGhpcy5tX3RyZWUuZGVzdHJveVByb3h5KHByb3h5SWQpO1xuICAgICAgfTtcbiAgICAgIEJyb2FkUGhhc2UyLnByb3RvdHlwZS5tb3ZlUHJveHkgPSBmdW5jdGlvbihwcm94eUlkLCBhYWJiLCBkaXNwbGFjZW1lbnQyKSB7XG4gICAgICAgIHZhciBjaGFuZ2VkID0gdGhpcy5tX3RyZWUubW92ZVByb3h5KHByb3h5SWQsIGFhYmIsIGRpc3BsYWNlbWVudDIpO1xuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgIHRoaXMuYnVmZmVyTW92ZShwcm94eUlkKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIEJyb2FkUGhhc2UyLnByb3RvdHlwZS50b3VjaFByb3h5ID0gZnVuY3Rpb24ocHJveHlJZCkge1xuICAgICAgICB0aGlzLmJ1ZmZlck1vdmUocHJveHlJZCk7XG4gICAgICB9O1xuICAgICAgQnJvYWRQaGFzZTIucHJvdG90eXBlLmJ1ZmZlck1vdmUgPSBmdW5jdGlvbihwcm94eUlkKSB7XG4gICAgICAgIHRoaXMubV9tb3ZlQnVmZmVyLnB1c2gocHJveHlJZCk7XG4gICAgICB9O1xuICAgICAgQnJvYWRQaGFzZTIucHJvdG90eXBlLnVuYnVmZmVyTW92ZSA9IGZ1bmN0aW9uKHByb3h5SWQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fbW92ZUJ1ZmZlci5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGlmICh0aGlzLm1fbW92ZUJ1ZmZlcltpXSA9PT0gcHJveHlJZCkge1xuICAgICAgICAgICAgdGhpcy5tX21vdmVCdWZmZXJbaV0gPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIEJyb2FkUGhhc2UyLnByb3RvdHlwZS51cGRhdGVQYWlycyA9IGZ1bmN0aW9uKGFkZFBhaXJDYWxsYmFjaykge1xuICAgICAgICB0aGlzLm1fY2FsbGJhY2sgPSBhZGRQYWlyQ2FsbGJhY2s7XG4gICAgICAgIHdoaWxlICh0aGlzLm1fbW92ZUJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5tX3F1ZXJ5UHJveHlJZCA9IHRoaXMubV9tb3ZlQnVmZmVyLnBvcCgpO1xuICAgICAgICAgIGlmICh0aGlzLm1fcXVlcnlQcm94eUlkID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGZhdEFBQkIgPSB0aGlzLm1fdHJlZS5nZXRGYXRBQUJCKHRoaXMubV9xdWVyeVByb3h5SWQpO1xuICAgICAgICAgIHRoaXMubV90cmVlLnF1ZXJ5KGZhdEFBQkIsIHRoaXMucXVlcnlDYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZXR1cm4gQnJvYWRQaGFzZTI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBtYXRoX3NpbiQyID0gTWF0aC5zaW47XG4gIHZhciBtYXRoX2NvcyQyID0gTWF0aC5jb3M7XG4gIHZhciBtYXRoX3NxcnQkNCA9IE1hdGguc3FydDtcbiAgZnVuY3Rpb24gdmVjMih4MiwgeSkge1xuICAgIHJldHVybiB7IHg6IHgyLCB5IH07XG4gIH1cbiAgZnVuY3Rpb24gcm90YXRpb24oYW5nbGUpIHtcbiAgICByZXR1cm4geyBzOiBtYXRoX3NpbiQyKGFuZ2xlKSwgYzogbWF0aF9jb3MkMihhbmdsZSkgfTtcbiAgfVxuICBmdW5jdGlvbiBzZXRWZWMyKG91dCwgeDIsIHkpIHtcbiAgICBvdXQueCA9IHgyO1xuICAgIG91dC55ID0geTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIGNvcHlWZWMyKG91dCwgdykge1xuICAgIG91dC54ID0gdy54O1xuICAgIG91dC55ID0gdy55O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgZnVuY3Rpb24gemVyb1ZlYzIob3V0KSB7XG4gICAgb3V0LnggPSAwO1xuICAgIG91dC55ID0gMDtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIG5lZ1ZlYzIob3V0KSB7XG4gICAgb3V0LnggPSAtb3V0Lng7XG4gICAgb3V0LnkgPSAtb3V0Lnk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBmdW5jdGlvbiBwbHVzVmVjMihvdXQsIHcpIHtcbiAgICBvdXQueCArPSB3Lng7XG4gICAgb3V0LnkgKz0gdy55O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgZnVuY3Rpb24gYWRkVmVjMihvdXQsIHYzLCB3KSB7XG4gICAgb3V0LnggPSB2My54ICsgdy54O1xuICAgIG91dC55ID0gdjMueCArIHcueTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIG1pbnVzVmVjMihvdXQsIHcpIHtcbiAgICBvdXQueCAtPSB3Lng7XG4gICAgb3V0LnkgLT0gdy55O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgZnVuY3Rpb24gc3ViVmVjMihvdXQsIHYzLCB3KSB7XG4gICAgb3V0LnggPSB2My54IC0gdy54O1xuICAgIG91dC55ID0gdjMueSAtIHcueTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIG11bFZlYzIob3V0LCBtKSB7XG4gICAgb3V0LnggKj0gbTtcbiAgICBvdXQueSAqPSBtO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgZnVuY3Rpb24gc2NhbGVWZWMyKG91dCwgbSwgdykge1xuICAgIG91dC54ID0gbSAqIHcueDtcbiAgICBvdXQueSA9IG0gKiB3Lnk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBmdW5jdGlvbiBwbHVzU2NhbGVWZWMyKG91dCwgbSwgdykge1xuICAgIG91dC54ICs9IG0gKiB3Lng7XG4gICAgb3V0LnkgKz0gbSAqIHcueTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIG1pbnVzU2NhbGVWZWMyKG91dCwgbSwgdykge1xuICAgIG91dC54IC09IG0gKiB3Lng7XG4gICAgb3V0LnkgLT0gbSAqIHcueTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIGNvbWJpbmUyVmVjMihvdXQsIGFtLCBhMiwgYm0sIGIyKSB7XG4gICAgb3V0LnggPSBhbSAqIGEyLnggKyBibSAqIGIyLng7XG4gICAgb3V0LnkgPSBhbSAqIGEyLnkgKyBibSAqIGIyLnk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBmdW5jdGlvbiBjb21iaW5lM1ZlYzIob3V0LCBhbSwgYTIsIGJtLCBiMiwgY20sIGMyKSB7XG4gICAgb3V0LnggPSBhbSAqIGEyLnggKyBibSAqIGIyLnggKyBjbSAqIGMyLng7XG4gICAgb3V0LnkgPSBhbSAqIGEyLnkgKyBibSAqIGIyLnkgKyBjbSAqIGMyLnk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBmdW5jdGlvbiBub3JtYWxpemVWZWMyTGVuZ3RoKG91dCkge1xuICAgIHZhciBsZW5ndGggPSBtYXRoX3NxcnQkNChvdXQueCAqIG91dC54ICsgb3V0LnkgKiBvdXQueSk7XG4gICAgaWYgKGxlbmd0aCAhPT0gMCkge1xuICAgICAgdmFyIGludkxlbmd0aCA9IDEgLyBsZW5ndGg7XG4gICAgICBvdXQueCAqPSBpbnZMZW5ndGg7XG4gICAgICBvdXQueSAqPSBpbnZMZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG4gIH1cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmVjMihvdXQpIHtcbiAgICB2YXIgbGVuZ3RoID0gbWF0aF9zcXJ0JDQob3V0LnggKiBvdXQueCArIG91dC55ICogb3V0LnkpO1xuICAgIGlmIChsZW5ndGggPiAwKSB7XG4gICAgICB2YXIgaW52TGVuZ3RoID0gMSAvIGxlbmd0aDtcbiAgICAgIG91dC54ICo9IGludkxlbmd0aDtcbiAgICAgIG91dC55ICo9IGludkxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBmdW5jdGlvbiBjcm9zc1ZlYzJOdW0ob3V0LCB2Mywgdykge1xuICAgIHZhciB4MiA9IHcgKiB2My55O1xuICAgIHZhciB5ID0gLXcgKiB2My54O1xuICAgIG91dC54ID0geDI7XG4gICAgb3V0LnkgPSB5O1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgZnVuY3Rpb24gY3Jvc3NOdW1WZWMyKG91dCwgdywgdjMpIHtcbiAgICB2YXIgeDIgPSAtdyAqIHYzLnk7XG4gICAgdmFyIHkgPSB3ICogdjMueDtcbiAgICBvdXQueCA9IHgyO1xuICAgIG91dC55ID0geTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIGNyb3NzVmVjMlZlYzIoYTIsIGIyKSB7XG4gICAgcmV0dXJuIGEyLnggKiBiMi55IC0gYTIueSAqIGIyLng7XG4gIH1cbiAgZnVuY3Rpb24gZG90VmVjMihhMiwgYjIpIHtcbiAgICByZXR1cm4gYTIueCAqIGIyLnggKyBhMi55ICogYjIueTtcbiAgfVxuICBmdW5jdGlvbiBsZW5ndGhTcXJWZWMyKGEyKSB7XG4gICAgcmV0dXJuIGEyLnggKiBhMi54ICsgYTIueSAqIGEyLnk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzdFZlYzIoYTIsIGIyKSB7XG4gICAgdmFyIGR4ID0gYTIueCAtIGIyLng7XG4gICAgdmFyIGR5ID0gYTIueSAtIGIyLnk7XG4gICAgcmV0dXJuIG1hdGhfc3FydCQ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgfVxuICBmdW5jdGlvbiBkaXN0U3FyVmVjMihhMiwgYjIpIHtcbiAgICB2YXIgZHggPSBhMi54IC0gYjIueDtcbiAgICB2YXIgZHkgPSBhMi55IC0gYjIueTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG4gIH1cbiAgZnVuY3Rpb24gc2V0Um90QW5nbGUob3V0LCBhMikge1xuICAgIG91dC5jID0gbWF0aF9jb3MkMihhMik7XG4gICAgb3V0LnMgPSBtYXRoX3NpbiQyKGEyKTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIHJvdFZlYzIob3V0LCBxLCB2Mykge1xuICAgIG91dC54ID0gcS5jICogdjMueCAtIHEucyAqIHYzLnk7XG4gICAgb3V0LnkgPSBxLnMgKiB2My54ICsgcS5jICogdjMueTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIGRlcm90VmVjMihvdXQsIHEsIHYzKSB7XG4gICAgdmFyIHgyID0gcS5jICogdjMueCArIHEucyAqIHYzLnk7XG4gICAgdmFyIHkgPSAtcS5zICogdjMueCArIHEuYyAqIHYzLnk7XG4gICAgb3V0LnggPSB4MjtcbiAgICBvdXQueSA9IHk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBmdW5jdGlvbiByZXJvdFZlYzIob3V0LCBiZWZvcmUsIGFmdGVyLCB2Mykge1xuICAgIHZhciB4MCA9IGJlZm9yZS5jICogdjMueCArIGJlZm9yZS5zICogdjMueTtcbiAgICB2YXIgeTAgPSAtYmVmb3JlLnMgKiB2My54ICsgYmVmb3JlLmMgKiB2My55O1xuICAgIHZhciB4MiA9IGFmdGVyLmMgKiB4MCAtIGFmdGVyLnMgKiB5MDtcbiAgICB2YXIgeSA9IGFmdGVyLnMgKiB4MCArIGFmdGVyLmMgKiB5MDtcbiAgICBvdXQueCA9IHgyO1xuICAgIG91dC55ID0geTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIHRyYW5zZm9ybSh4MiwgeSwgYTIpIHtcbiAgICByZXR1cm4geyBwOiB2ZWMyKHgyLCB5KSwgcTogcm90YXRpb24oYTIpIH07XG4gIH1cbiAgZnVuY3Rpb24gY29weVRyYW5zZm9ybShvdXQsIHRyYW5zZm9ybTIpIHtcbiAgICBvdXQucC54ID0gdHJhbnNmb3JtMi5wLng7XG4gICAgb3V0LnAueSA9IHRyYW5zZm9ybTIucC55O1xuICAgIG91dC5xLnMgPSB0cmFuc2Zvcm0yLnEucztcbiAgICBvdXQucS5jID0gdHJhbnNmb3JtMi5xLmM7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBmdW5jdGlvbiB0cmFuc2Zvcm1WZWMyKG91dCwgeGYyLCB2Mykge1xuICAgIHZhciB4MiA9IHhmMi5xLmMgKiB2My54IC0geGYyLnEucyAqIHYzLnkgKyB4ZjIucC54O1xuICAgIHZhciB5ID0geGYyLnEucyAqIHYzLnggKyB4ZjIucS5jICogdjMueSArIHhmMi5wLnk7XG4gICAgb3V0LnggPSB4MjtcbiAgICBvdXQueSA9IHk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICBmdW5jdGlvbiBkZXRyYW5zZm9ybVZlYzIob3V0LCB4ZjIsIHYzKSB7XG4gICAgdmFyIHB4ID0gdjMueCAtIHhmMi5wLng7XG4gICAgdmFyIHB5ID0gdjMueSAtIHhmMi5wLnk7XG4gICAgdmFyIHgyID0geGYyLnEuYyAqIHB4ICsgeGYyLnEucyAqIHB5O1xuICAgIHZhciB5ID0gLXhmMi5xLnMgKiBweCArIHhmMi5xLmMgKiBweTtcbiAgICBvdXQueCA9IHgyO1xuICAgIG91dC55ID0geTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIHJldHJhbnNmb3JtVmVjMihvdXQsIGZyb20sIHRvLCB2Mykge1xuICAgIHZhciB4MCA9IGZyb20ucS5jICogdjMueCAtIGZyb20ucS5zICogdjMueSArIGZyb20ucC54O1xuICAgIHZhciB5MCA9IGZyb20ucS5zICogdjMueCArIGZyb20ucS5jICogdjMueSArIGZyb20ucC55O1xuICAgIHZhciBweCA9IHgwIC0gdG8ucC54O1xuICAgIHZhciBweSA9IHkwIC0gdG8ucC55O1xuICAgIHZhciB4MiA9IHRvLnEuYyAqIHB4ICsgdG8ucS5zICogcHk7XG4gICAgdmFyIHkgPSAtdG8ucS5zICogcHggKyB0by5xLmMgKiBweTtcbiAgICBvdXQueCA9IHgyO1xuICAgIG91dC55ID0geTtcbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGZ1bmN0aW9uIGRldHJhbnNmb3JtVHJhbnNmb3JtKG91dCwgYTIsIGIyKSB7XG4gICAgdmFyIGMyID0gYTIucS5jICogYjIucS5jICsgYTIucS5zICogYjIucS5zO1xuICAgIHZhciBzMiA9IGEyLnEuYyAqIGIyLnEucyAtIGEyLnEucyAqIGIyLnEuYztcbiAgICB2YXIgeDIgPSBhMi5xLmMgKiAoYjIucC54IC0gYTIucC54KSArIGEyLnEucyAqIChiMi5wLnkgLSBhMi5wLnkpO1xuICAgIHZhciB5ID0gLWEyLnEucyAqIChiMi5wLnggLSBhMi5wLngpICsgYTIucS5jICogKGIyLnAueSAtIGEyLnAueSk7XG4gICAgb3V0LnEuYyA9IGMyO1xuICAgIG91dC5xLnMgPSBzMjtcbiAgICBvdXQucC54ID0geDI7XG4gICAgb3V0LnAueSA9IHk7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICB2YXIgbWF0aF9zaW4kMSA9IE1hdGguc2luO1xuICB2YXIgbWF0aF9jb3MkMSA9IE1hdGguY29zO1xuICB2YXIgbWF0aF9hdGFuMiQxID0gTWF0aC5hdGFuMjtcbiAgdmFyIFJvdCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBSb3QyKGFuZ2xlKSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSb3QyKSkge1xuICAgICAgICAgIHJldHVybiBuZXcgUm90MihhbmdsZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBhbmdsZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIHRoaXMuc2V0QW5nbGUoYW5nbGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhbmdsZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHRoaXMuc2V0Um90KGFuZ2xlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNldElkZW50aXR5KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFJvdDIubmVvID0gZnVuY3Rpb24oYW5nbGUpIHtcbiAgICAgICAgdmFyIG9iaiA9IE9iamVjdC5jcmVhdGUoUm90Mi5wcm90b3R5cGUpO1xuICAgICAgICBvYmouc2V0QW5nbGUoYW5nbGUpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfTtcbiAgICAgIFJvdDIuY2xvbmUgPSBmdW5jdGlvbihyb3QpIHtcbiAgICAgICAgdmFyIG9iaiA9IE9iamVjdC5jcmVhdGUoUm90Mi5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucyA9IHJvdC5zO1xuICAgICAgICBvYmouYyA9IHJvdC5jO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfTtcbiAgICAgIFJvdDIuaWRlbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9iaiA9IE9iamVjdC5jcmVhdGUoUm90Mi5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucyA9IDA7XG4gICAgICAgIG9iai5jID0gMTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH07XG4gICAgICBSb3QyLmlzVmFsaWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUob2JqLnMpICYmIE51bWJlci5pc0Zpbml0ZShvYmouYyk7XG4gICAgICB9O1xuICAgICAgUm90Mi5hc3NlcnQgPSBmdW5jdGlvbihvKSB7XG4gICAgICB9O1xuICAgICAgUm90Mi5wcm90b3R5cGUuc2V0SWRlbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zID0gMDtcbiAgICAgICAgdGhpcy5jID0gMTtcbiAgICAgIH07XG4gICAgICBSb3QyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihhbmdsZSkge1xuICAgICAgICBpZiAodHlwZW9mIGFuZ2xlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgdGhpcy5zID0gYW5nbGUucztcbiAgICAgICAgICB0aGlzLmMgPSBhbmdsZS5jO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucyA9IG1hdGhfc2luJDEoYW5nbGUpO1xuICAgICAgICAgIHRoaXMuYyA9IG1hdGhfY29zJDEoYW5nbGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgUm90Mi5wcm90b3R5cGUuc2V0Um90ID0gZnVuY3Rpb24oYW5nbGUpIHtcbiAgICAgICAgdGhpcy5zID0gYW5nbGUucztcbiAgICAgICAgdGhpcy5jID0gYW5nbGUuYztcbiAgICAgIH07XG4gICAgICBSb3QyLnByb3RvdHlwZS5zZXRBbmdsZSA9IGZ1bmN0aW9uKGFuZ2xlKSB7XG4gICAgICAgIHRoaXMucyA9IG1hdGhfc2luJDEoYW5nbGUpO1xuICAgICAgICB0aGlzLmMgPSBtYXRoX2NvcyQxKGFuZ2xlKTtcbiAgICAgIH07XG4gICAgICBSb3QyLnByb3RvdHlwZS5nZXRBbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbWF0aF9hdGFuMiQxKHRoaXMucywgdGhpcy5jKTtcbiAgICAgIH07XG4gICAgICBSb3QyLnByb3RvdHlwZS5nZXRYQXhpcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gVmVjMi5uZW8odGhpcy5jLCB0aGlzLnMpO1xuICAgICAgfTtcbiAgICAgIFJvdDIucHJvdG90eXBlLmdldFlBeGlzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBWZWMyLm5lbygtdGhpcy5zLCB0aGlzLmMpO1xuICAgICAgfTtcbiAgICAgIFJvdDIubXVsID0gZnVuY3Rpb24ocm90LCBtKSB7XG4gICAgICAgIGlmIChcImNcIiBpbiBtICYmIFwic1wiIGluIG0pIHtcbiAgICAgICAgICB2YXIgcXIgPSBSb3QyLmlkZW50aXR5KCk7XG4gICAgICAgICAgcXIucyA9IHJvdC5zICogbS5jICsgcm90LmMgKiBtLnM7XG4gICAgICAgICAgcXIuYyA9IHJvdC5jICogbS5jIC0gcm90LnMgKiBtLnM7XG4gICAgICAgICAgcmV0dXJuIHFyO1xuICAgICAgICB9IGVsc2UgaWYgKFwieFwiIGluIG0gJiYgXCJ5XCIgaW4gbSkge1xuICAgICAgICAgIHJldHVybiBWZWMyLm5lbyhyb3QuYyAqIG0ueCAtIHJvdC5zICogbS55LCByb3QucyAqIG0ueCArIHJvdC5jICogbS55KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFJvdDIubXVsUm90ID0gZnVuY3Rpb24ocm90LCBtKSB7XG4gICAgICAgIHZhciBxciA9IFJvdDIuaWRlbnRpdHkoKTtcbiAgICAgICAgcXIucyA9IHJvdC5zICogbS5jICsgcm90LmMgKiBtLnM7XG4gICAgICAgIHFyLmMgPSByb3QuYyAqIG0uYyAtIHJvdC5zICogbS5zO1xuICAgICAgICByZXR1cm4gcXI7XG4gICAgICB9O1xuICAgICAgUm90Mi5tdWxWZWMyID0gZnVuY3Rpb24ocm90LCBtKSB7XG4gICAgICAgIHJldHVybiBWZWMyLm5lbyhyb3QuYyAqIG0ueCAtIHJvdC5zICogbS55LCByb3QucyAqIG0ueCArIHJvdC5jICogbS55KTtcbiAgICAgIH07XG4gICAgICBSb3QyLm11bFN1YiA9IGZ1bmN0aW9uKHJvdCwgdjMsIHcpIHtcbiAgICAgICAgdmFyIHgyID0gcm90LmMgKiAodjMueCAtIHcueCkgLSByb3QucyAqICh2My55IC0gdy55KTtcbiAgICAgICAgdmFyIHkgPSByb3QucyAqICh2My54IC0gdy54KSArIHJvdC5jICogKHYzLnkgLSB3LnkpO1xuICAgICAgICByZXR1cm4gVmVjMi5uZW8oeDIsIHkpO1xuICAgICAgfTtcbiAgICAgIFJvdDIubXVsVCA9IGZ1bmN0aW9uKHJvdCwgbSkge1xuICAgICAgICBpZiAoXCJjXCIgaW4gbSAmJiBcInNcIiBpbiBtKSB7XG4gICAgICAgICAgdmFyIHFyID0gUm90Mi5pZGVudGl0eSgpO1xuICAgICAgICAgIHFyLnMgPSByb3QuYyAqIG0ucyAtIHJvdC5zICogbS5jO1xuICAgICAgICAgIHFyLmMgPSByb3QuYyAqIG0uYyArIHJvdC5zICogbS5zO1xuICAgICAgICAgIHJldHVybiBxcjtcbiAgICAgICAgfSBlbHNlIGlmIChcInhcIiBpbiBtICYmIFwieVwiIGluIG0pIHtcbiAgICAgICAgICByZXR1cm4gVmVjMi5uZW8ocm90LmMgKiBtLnggKyByb3QucyAqIG0ueSwgLXJvdC5zICogbS54ICsgcm90LmMgKiBtLnkpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgUm90Mi5tdWxUUm90ID0gZnVuY3Rpb24ocm90LCBtKSB7XG4gICAgICAgIHZhciBxciA9IFJvdDIuaWRlbnRpdHkoKTtcbiAgICAgICAgcXIucyA9IHJvdC5jICogbS5zIC0gcm90LnMgKiBtLmM7XG4gICAgICAgIHFyLmMgPSByb3QuYyAqIG0uYyArIHJvdC5zICogbS5zO1xuICAgICAgICByZXR1cm4gcXI7XG4gICAgICB9O1xuICAgICAgUm90Mi5tdWxUVmVjMiA9IGZ1bmN0aW9uKHJvdCwgbSkge1xuICAgICAgICByZXR1cm4gVmVjMi5uZW8ocm90LmMgKiBtLnggKyByb3QucyAqIG0ueSwgLXJvdC5zICogbS54ICsgcm90LmMgKiBtLnkpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBSb3QyO1xuICAgIH0oKVxuICApO1xuICB2YXIgbWF0aF9hdGFuMiA9IE1hdGguYXRhbjI7XG4gIHZhciBtYXRoX1BJJDUgPSBNYXRoLlBJO1xuICB2YXIgdGVtcCQ3ID0gdmVjMigwLCAwKTtcbiAgdmFyIFN3ZWVwID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFN3ZWVwMigpIHtcbiAgICAgICAgdGhpcy5sb2NhbENlbnRlciA9IFZlYzIuemVybygpO1xuICAgICAgICB0aGlzLmMgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgdGhpcy5hID0gMDtcbiAgICAgICAgdGhpcy5hbHBoYTAgPSAwO1xuICAgICAgICB0aGlzLmMwID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIHRoaXMuYTAgPSAwO1xuICAgICAgfVxuICAgICAgU3dlZXAyLnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHplcm9WZWMyKHRoaXMubG9jYWxDZW50ZXIpO1xuICAgICAgICB6ZXJvVmVjMih0aGlzLmMpO1xuICAgICAgICB0aGlzLmEgPSAwO1xuICAgICAgICB0aGlzLmFscGhhMCA9IDA7XG4gICAgICAgIHplcm9WZWMyKHRoaXMuYzApO1xuICAgICAgICB0aGlzLmEwID0gMDtcbiAgICAgIH07XG4gICAgICBTd2VlcDIucHJvdG90eXBlLnNldFRyYW5zZm9ybSA9IGZ1bmN0aW9uKHhmMikge1xuICAgICAgICB0cmFuc2Zvcm1WZWMyKHRlbXAkNywgeGYyLCB0aGlzLmxvY2FsQ2VudGVyKTtcbiAgICAgICAgY29weVZlYzIodGhpcy5jLCB0ZW1wJDcpO1xuICAgICAgICBjb3B5VmVjMih0aGlzLmMwLCB0ZW1wJDcpO1xuICAgICAgICB0aGlzLmEgPSB0aGlzLmEwID0gbWF0aF9hdGFuMih4ZjIucS5zLCB4ZjIucS5jKTtcbiAgICAgIH07XG4gICAgICBTd2VlcDIucHJvdG90eXBlLnNldExvY2FsQ2VudGVyID0gZnVuY3Rpb24obG9jYWxDZW50ZXIyLCB4ZjIpIHtcbiAgICAgICAgY29weVZlYzIodGhpcy5sb2NhbENlbnRlciwgbG9jYWxDZW50ZXIyKTtcbiAgICAgICAgdHJhbnNmb3JtVmVjMih0ZW1wJDcsIHhmMiwgdGhpcy5sb2NhbENlbnRlcik7XG4gICAgICAgIGNvcHlWZWMyKHRoaXMuYywgdGVtcCQ3KTtcbiAgICAgICAgY29weVZlYzIodGhpcy5jMCwgdGVtcCQ3KTtcbiAgICAgIH07XG4gICAgICBTd2VlcDIucHJvdG90eXBlLmdldFRyYW5zZm9ybSA9IGZ1bmN0aW9uKHhmMiwgYmV0YSkge1xuICAgICAgICBpZiAoYmV0YSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgYmV0YSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgc2V0Um90QW5nbGUoeGYyLnEsICgxIC0gYmV0YSkgKiB0aGlzLmEwICsgYmV0YSAqIHRoaXMuYSk7XG4gICAgICAgIGNvbWJpbmUyVmVjMih4ZjIucCwgMSAtIGJldGEsIHRoaXMuYzAsIGJldGEsIHRoaXMuYyk7XG4gICAgICAgIG1pbnVzVmVjMih4ZjIucCwgcm90VmVjMih0ZW1wJDcsIHhmMi5xLCB0aGlzLmxvY2FsQ2VudGVyKSk7XG4gICAgICB9O1xuICAgICAgU3dlZXAyLnByb3RvdHlwZS5hZHZhbmNlID0gZnVuY3Rpb24oYWxwaGEpIHtcbiAgICAgICAgdmFyIGJldGEgPSAoYWxwaGEgLSB0aGlzLmFscGhhMCkgLyAoMSAtIHRoaXMuYWxwaGEwKTtcbiAgICAgICAgY29tYmluZTJWZWMyKHRoaXMuYzAsIGJldGEsIHRoaXMuYywgMSAtIGJldGEsIHRoaXMuYzApO1xuICAgICAgICB0aGlzLmEwID0gYmV0YSAqIHRoaXMuYSArICgxIC0gYmV0YSkgKiB0aGlzLmEwO1xuICAgICAgICB0aGlzLmFscGhhMCA9IGFscGhhO1xuICAgICAgfTtcbiAgICAgIFN3ZWVwMi5wcm90b3R5cGUuZm9yd2FyZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmEwID0gdGhpcy5hO1xuICAgICAgICBjb3B5VmVjMih0aGlzLmMwLCB0aGlzLmMpO1xuICAgICAgfTtcbiAgICAgIFN3ZWVwMi5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhMCA9IG1vZCh0aGlzLmEwLCAtbWF0aF9QSSQ1LCArbWF0aF9QSSQ1KTtcbiAgICAgICAgdGhpcy5hIC09IHRoaXMuYTAgLSBhMDtcbiAgICAgICAgdGhpcy5hMCA9IGEwO1xuICAgICAgfTtcbiAgICAgIFN3ZWVwMi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24odGhhdCkge1xuICAgICAgICBjb3B5VmVjMih0aGlzLmxvY2FsQ2VudGVyLCB0aGF0LmxvY2FsQ2VudGVyKTtcbiAgICAgICAgY29weVZlYzIodGhpcy5jLCB0aGF0LmMpO1xuICAgICAgICB0aGlzLmEgPSB0aGF0LmE7XG4gICAgICAgIHRoaXMuYWxwaGEwID0gdGhhdC5hbHBoYTA7XG4gICAgICAgIGNvcHlWZWMyKHRoaXMuYzAsIHRoYXQuYzApO1xuICAgICAgICB0aGlzLmEwID0gdGhhdC5hMDtcbiAgICAgIH07XG4gICAgICByZXR1cm4gU3dlZXAyO1xuICAgIH0oKVxuICApO1xuICB2YXIgVHJhbnNmb3JtID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFRyYW5zZm9ybTIocG9zaXRpb24sIHJvdGF0aW9uMikge1xuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtMikpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybTIocG9zaXRpb24sIHJvdGF0aW9uMik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIHRoaXMucSA9IFJvdC5pZGVudGl0eSgpO1xuICAgICAgICBpZiAodHlwZW9mIHBvc2l0aW9uICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdGhpcy5wLnNldFZlYzIocG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygcm90YXRpb24yICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdGhpcy5xLnNldEFuZ2xlKHJvdGF0aW9uMik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFRyYW5zZm9ybTIuY2xvbmUgPSBmdW5jdGlvbih4ZjIpIHtcbiAgICAgICAgdmFyIG9iaiA9IE9iamVjdC5jcmVhdGUoVHJhbnNmb3JtMi5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucCA9IFZlYzIuY2xvbmUoeGYyLnApO1xuICAgICAgICBvYmoucSA9IFJvdC5jbG9uZSh4ZjIucSk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9O1xuICAgICAgVHJhbnNmb3JtMi5uZW8gPSBmdW5jdGlvbihwb3NpdGlvbiwgcm90YXRpb24yKSB7XG4gICAgICAgIHZhciBvYmogPSBPYmplY3QuY3JlYXRlKFRyYW5zZm9ybTIucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnAgPSBWZWMyLmNsb25lKHBvc2l0aW9uKTtcbiAgICAgICAgb2JqLnEgPSBSb3QuY2xvbmUocm90YXRpb24yKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLmlkZW50aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvYmogPSBPYmplY3QuY3JlYXRlKFRyYW5zZm9ybTIucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnAgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgb2JqLnEgPSBSb3QuaWRlbnRpdHkoKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLnByb3RvdHlwZS5zZXRJZGVudGl0eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnAuc2V0WmVybygpO1xuICAgICAgICB0aGlzLnEuc2V0SWRlbnRpdHkoKTtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihhMiwgYjIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiMiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHRoaXMucC5zZXQoYTIucCk7XG4gICAgICAgICAgdGhpcy5xLnNldChhMi5xKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnAuc2V0KGEyKTtcbiAgICAgICAgICB0aGlzLnEuc2V0KGIyKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFRyYW5zZm9ybTIucHJvdG90eXBlLnNldE51bSA9IGZ1bmN0aW9uKHBvc2l0aW9uLCByb3RhdGlvbjIpIHtcbiAgICAgICAgdGhpcy5wLnNldFZlYzIocG9zaXRpb24pO1xuICAgICAgICB0aGlzLnEuc2V0QW5nbGUocm90YXRpb24yKTtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLnByb3RvdHlwZS5zZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbih4ZjIpIHtcbiAgICAgICAgdGhpcy5wLnNldFZlYzIoeGYyLnApO1xuICAgICAgICB0aGlzLnEuc2V0Um90KHhmMi5xKTtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLmlzVmFsaWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBWZWMyLmlzVmFsaWQob2JqLnApICYmIFJvdC5pc1ZhbGlkKG9iai5xKTtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLmFzc2VydCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLm11bCA9IGZ1bmN0aW9uKGEyLCBiMikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiMikpIHtcbiAgICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiMi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJyW2ldID0gVHJhbnNmb3JtMi5tdWwoYTIsIGIyW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgICAgfSBlbHNlIGlmIChcInhcIiBpbiBiMiAmJiBcInlcIiBpbiBiMikge1xuICAgICAgICAgIHJldHVybiBUcmFuc2Zvcm0yLm11bFZlYzIoYTIsIGIyKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInBcIiBpbiBiMiAmJiBcInFcIiBpbiBiMikge1xuICAgICAgICAgIHJldHVybiBUcmFuc2Zvcm0yLm11bFhmKGEyLCBiMik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLm11bEFsbCA9IGZ1bmN0aW9uKGEyLCBiMikge1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYjIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcnJbaV0gPSBUcmFuc2Zvcm0yLm11bChhMiwgYjJbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgICB9O1xuICAgICAgVHJhbnNmb3JtMi5tdWxGbiA9IGZ1bmN0aW9uKGEyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihiMikge1xuICAgICAgICAgIHJldHVybiBUcmFuc2Zvcm0yLm11bChhMiwgYjIpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIFRyYW5zZm9ybTIubXVsVmVjMiA9IGZ1bmN0aW9uKGEyLCBiMikge1xuICAgICAgICB2YXIgeDIgPSBhMi5xLmMgKiBiMi54IC0gYTIucS5zICogYjIueSArIGEyLnAueDtcbiAgICAgICAgdmFyIHkgPSBhMi5xLnMgKiBiMi54ICsgYTIucS5jICogYjIueSArIGEyLnAueTtcbiAgICAgICAgcmV0dXJuIFZlYzIubmVvKHgyLCB5KTtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLm11bFhmID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIHZhciB4ZjIgPSBUcmFuc2Zvcm0yLmlkZW50aXR5KCk7XG4gICAgICAgIHhmMi5xID0gUm90Lm11bFJvdChhMi5xLCBiMi5xKTtcbiAgICAgICAgeGYyLnAgPSBWZWMyLmFkZChSb3QubXVsVmVjMihhMi5xLCBiMi5wKSwgYTIucCk7XG4gICAgICAgIHJldHVybiB4ZjI7XG4gICAgICB9O1xuICAgICAgVHJhbnNmb3JtMi5tdWxUID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIGlmIChcInhcIiBpbiBiMiAmJiBcInlcIiBpbiBiMikge1xuICAgICAgICAgIHJldHVybiBUcmFuc2Zvcm0yLm11bFRWZWMyKGEyLCBiMik7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJwXCIgaW4gYjIgJiYgXCJxXCIgaW4gYjIpIHtcbiAgICAgICAgICByZXR1cm4gVHJhbnNmb3JtMi5tdWxUWGYoYTIsIGIyKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFRyYW5zZm9ybTIubXVsVFZlYzIgPSBmdW5jdGlvbihhMiwgYjIpIHtcbiAgICAgICAgdmFyIHB4ID0gYjIueCAtIGEyLnAueDtcbiAgICAgICAgdmFyIHB5ID0gYjIueSAtIGEyLnAueTtcbiAgICAgICAgdmFyIHgyID0gYTIucS5jICogcHggKyBhMi5xLnMgKiBweTtcbiAgICAgICAgdmFyIHkgPSAtYTIucS5zICogcHggKyBhMi5xLmMgKiBweTtcbiAgICAgICAgcmV0dXJuIFZlYzIubmVvKHgyLCB5KTtcbiAgICAgIH07XG4gICAgICBUcmFuc2Zvcm0yLm11bFRYZiA9IGZ1bmN0aW9uKGEyLCBiMikge1xuICAgICAgICB2YXIgeGYyID0gVHJhbnNmb3JtMi5pZGVudGl0eSgpO1xuICAgICAgICB4ZjIucS5zZXRSb3QoUm90Lm11bFRSb3QoYTIucSwgYjIucSkpO1xuICAgICAgICB4ZjIucC5zZXRWZWMyKFJvdC5tdWxUVmVjMihhMi5xLCBWZWMyLnN1YihiMi5wLCBhMi5wKSkpO1xuICAgICAgICByZXR1cm4geGYyO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBUcmFuc2Zvcm0yO1xuICAgIH0oKVxuICApO1xuICB2YXIgVmVsb2NpdHkgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFZlbG9jaXR5MigpIHtcbiAgICAgICAgdGhpcy52ID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIHRoaXMudyA9IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gVmVsb2NpdHkyO1xuICAgIH0oKVxuICApO1xuICB2YXIgbWF0aF9zaW4gPSBNYXRoLnNpbjtcbiAgdmFyIG1hdGhfY29zID0gTWF0aC5jb3M7XG4gIHZhciBQb3NpdGlvbiA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBQb3NpdGlvbjIoKSB7XG4gICAgICAgIHRoaXMuYyA9IFZlYzIuemVybygpO1xuICAgICAgICB0aGlzLmEgPSAwO1xuICAgICAgfVxuICAgICAgUG9zaXRpb24yLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbih4ZjIsIHApIHtcbiAgICAgICAgeGYyLnEuYyA9IG1hdGhfY29zKHRoaXMuYSk7XG4gICAgICAgIHhmMi5xLnMgPSBtYXRoX3Npbih0aGlzLmEpO1xuICAgICAgICB4ZjIucC54ID0gdGhpcy5jLnggLSAoeGYyLnEuYyAqIHAueCAtIHhmMi5xLnMgKiBwLnkpO1xuICAgICAgICB4ZjIucC55ID0gdGhpcy5jLnkgLSAoeGYyLnEucyAqIHAueCArIHhmMi5xLmMgKiBwLnkpO1xuICAgICAgICByZXR1cm4geGYyO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBQb3NpdGlvbjI7XG4gICAgfSgpXG4gICk7XG4gIGZ1bmN0aW9uIGdldFRyYW5zZm9ybSh4ZjIsIHAsIGMyLCBhMikge1xuICAgIHhmMi5xLmMgPSBtYXRoX2NvcyhhMik7XG4gICAgeGYyLnEucyA9IG1hdGhfc2luKGEyKTtcbiAgICB4ZjIucC54ID0gYzIueCAtICh4ZjIucS5jICogcC54IC0geGYyLnEucyAqIHAueSk7XG4gICAgeGYyLnAueSA9IGMyLnkgLSAoeGYyLnEucyAqIHAueCArIHhmMi5xLmMgKiBwLnkpO1xuICAgIHJldHVybiB4ZjI7XG4gIH1cbiAgdmFyIFNoYXBlID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFNoYXBlMigpIHtcbiAgICAgICAgdGhpcy5zdHlsZSA9IHt9O1xuICAgICAgICB0aGlzLmFwcERhdGEgPSB7fTtcbiAgICAgIH1cbiAgICAgIFNoYXBlMi5pc1ZhbGlkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHlwZW9mIG9iai5tX3R5cGUgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIG9iai5tX3JhZGl1cyA9PT0gXCJudW1iZXJcIjtcbiAgICAgIH07XG4gICAgICByZXR1cm4gU2hhcGUyO1xuICAgIH0oKVxuICApO1xuICB2YXIgc3luY2hyb25pemVfYWFiYjEgPSBuZXcgQUFCQigpO1xuICB2YXIgc3luY2hyb25pemVfYWFiYjIgPSBuZXcgQUFCQigpO1xuICB2YXIgZGlzcGxhY2VtZW50ID0gdmVjMigwLCAwKTtcbiAgdmFyIEZpeHR1cmVEZWZEZWZhdWx0ID0ge1xuICAgIHVzZXJEYXRhOiBudWxsLFxuICAgIGZyaWN0aW9uOiAwLjIsXG4gICAgcmVzdGl0dXRpb246IDAsXG4gICAgZGVuc2l0eTogMCxcbiAgICBpc1NlbnNvcjogZmFsc2UsXG4gICAgZmlsdGVyR3JvdXBJbmRleDogMCxcbiAgICBmaWx0ZXJDYXRlZ29yeUJpdHM6IDEsXG4gICAgZmlsdGVyTWFza0JpdHM6IDY1NTM1XG4gIH07XG4gIHZhciBGaXh0dXJlUHJveHkgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIEZpeHR1cmVQcm94eTIoZml4dHVyZSwgY2hpbGRJbmRleCkge1xuICAgICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpO1xuICAgICAgICB0aGlzLmZpeHR1cmUgPSBmaXh0dXJlO1xuICAgICAgICB0aGlzLmNoaWxkSW5kZXggPSBjaGlsZEluZGV4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIEZpeHR1cmVQcm94eTI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBGaXh0dXJlID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIEZpeHR1cmUyKGJvZHksIHNoYXBlLCBkZWYpIHtcbiAgICAgICAgdGhpcy5zdHlsZSA9IHt9O1xuICAgICAgICB0aGlzLmFwcERhdGEgPSB7fTtcbiAgICAgICAgaWYgKHNoYXBlLnNoYXBlKSB7XG4gICAgICAgICAgZGVmID0gc2hhcGU7XG4gICAgICAgICAgc2hhcGUgPSBzaGFwZS5zaGFwZTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgZGVmID0geyBkZW5zaXR5OiBkZWYgfTtcbiAgICAgICAgfVxuICAgICAgICBkZWYgPSBvcHRpb25zKGRlZiwgRml4dHVyZURlZkRlZmF1bHQpO1xuICAgICAgICB0aGlzLm1fYm9keSA9IGJvZHk7XG4gICAgICAgIHRoaXMubV9mcmljdGlvbiA9IGRlZi5mcmljdGlvbjtcbiAgICAgICAgdGhpcy5tX3Jlc3RpdHV0aW9uID0gZGVmLnJlc3RpdHV0aW9uO1xuICAgICAgICB0aGlzLm1fZGVuc2l0eSA9IGRlZi5kZW5zaXR5O1xuICAgICAgICB0aGlzLm1faXNTZW5zb3IgPSBkZWYuaXNTZW5zb3I7XG4gICAgICAgIHRoaXMubV9maWx0ZXJHcm91cEluZGV4ID0gZGVmLmZpbHRlckdyb3VwSW5kZXg7XG4gICAgICAgIHRoaXMubV9maWx0ZXJDYXRlZ29yeUJpdHMgPSBkZWYuZmlsdGVyQ2F0ZWdvcnlCaXRzO1xuICAgICAgICB0aGlzLm1fZmlsdGVyTWFza0JpdHMgPSBkZWYuZmlsdGVyTWFza0JpdHM7XG4gICAgICAgIHRoaXMubV9zaGFwZSA9IHNoYXBlO1xuICAgICAgICB0aGlzLm1fbmV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMubV9wcm94aWVzID0gW107XG4gICAgICAgIHRoaXMubV9wcm94eUNvdW50ID0gMDtcbiAgICAgICAgdmFyIGNoaWxkQ291bnQgPSB0aGlzLm1fc2hhcGUuZ2V0Q2hpbGRDb3VudCgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkQ291bnQ7ICsraSkge1xuICAgICAgICAgIHRoaXMubV9wcm94aWVzW2ldID0gbmV3IEZpeHR1cmVQcm94eSh0aGlzLCBpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fdXNlckRhdGEgPSBkZWYudXNlckRhdGE7XG4gICAgICAgIGlmICh0eXBlb2YgZGVmLnN0eWxlID09PSBcIm9iamVjdFwiICYmIGRlZi5zdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuc3R5bGUgPSBkZWYuc3R5bGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGJvZHkgPSB0aGlzLmdldEJvZHkoKTtcbiAgICAgICAgdmFyIGJyb2FkUGhhc2UgPSBib2R5Lm1fd29ybGQubV9icm9hZFBoYXNlO1xuICAgICAgICB0aGlzLmRlc3Ryb3lQcm94aWVzKGJyb2FkUGhhc2UpO1xuICAgICAgICBpZiAodGhpcy5tX3NoYXBlLl9yZXNldCkge1xuICAgICAgICAgIHRoaXMubV9zaGFwZS5fcmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2hpbGRDb3VudCA9IHRoaXMubV9zaGFwZS5nZXRDaGlsZENvdW50KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRDb3VudDsgKytpKSB7XG4gICAgICAgICAgdGhpcy5tX3Byb3hpZXNbaV0gPSBuZXcgRml4dHVyZVByb3h5KHRoaXMsIGkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3JlYXRlUHJveGllcyhicm9hZFBoYXNlLCBib2R5Lm1feGYpO1xuICAgICAgICBib2R5LnJlc2V0TWFzc0RhdGEoKTtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGZyaWN0aW9uOiB0aGlzLm1fZnJpY3Rpb24sXG4gICAgICAgICAgcmVzdGl0dXRpb246IHRoaXMubV9yZXN0aXR1dGlvbixcbiAgICAgICAgICBkZW5zaXR5OiB0aGlzLm1fZGVuc2l0eSxcbiAgICAgICAgICBpc1NlbnNvcjogdGhpcy5tX2lzU2Vuc29yLFxuICAgICAgICAgIGZpbHRlckdyb3VwSW5kZXg6IHRoaXMubV9maWx0ZXJHcm91cEluZGV4LFxuICAgICAgICAgIGZpbHRlckNhdGVnb3J5Qml0czogdGhpcy5tX2ZpbHRlckNhdGVnb3J5Qml0cyxcbiAgICAgICAgICBmaWx0ZXJNYXNrQml0czogdGhpcy5tX2ZpbHRlck1hc2tCaXRzLFxuICAgICAgICAgIHNoYXBlOiB0aGlzLm1fc2hhcGVcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCBib2R5LCByZXN0b3JlKSB7XG4gICAgICAgIHZhciBzaGFwZSA9IHJlc3RvcmUoU2hhcGUsIGRhdGEuc2hhcGUpO1xuICAgICAgICB2YXIgZml4dHVyZSA9IHNoYXBlICYmIG5ldyBGaXh0dXJlMihib2R5LCBzaGFwZSwgZGF0YSk7XG4gICAgICAgIHJldHVybiBmaXh0dXJlO1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fc2hhcGUubV90eXBlO1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5nZXRTaGFwZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3NoYXBlO1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5pc1NlbnNvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2lzU2Vuc29yO1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5zZXRTZW5zb3IgPSBmdW5jdGlvbihzZW5zb3IpIHtcbiAgICAgICAgaWYgKHNlbnNvciAhPSB0aGlzLm1faXNTZW5zb3IpIHtcbiAgICAgICAgICB0aGlzLm1fYm9keS5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgICB0aGlzLm1faXNTZW5zb3IgPSBzZW5zb3I7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV91c2VyRGF0YTtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuc2V0VXNlckRhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHRoaXMubV91c2VyRGF0YSA9IGRhdGE7XG4gICAgICB9O1xuICAgICAgRml4dHVyZTIucHJvdG90eXBlLmdldEJvZHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5O1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5nZXROZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbmV4dDtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuZ2V0RGVuc2l0eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2RlbnNpdHk7XG4gICAgICB9O1xuICAgICAgRml4dHVyZTIucHJvdG90eXBlLnNldERlbnNpdHkgPSBmdW5jdGlvbihkZW5zaXR5KSB7XG4gICAgICAgIHRoaXMubV9kZW5zaXR5ID0gZGVuc2l0eTtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuZ2V0RnJpY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9mcmljdGlvbjtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuc2V0RnJpY3Rpb24gPSBmdW5jdGlvbihmcmljdGlvbikge1xuICAgICAgICB0aGlzLm1fZnJpY3Rpb24gPSBmcmljdGlvbjtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuZ2V0UmVzdGl0dXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9yZXN0aXR1dGlvbjtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuc2V0UmVzdGl0dXRpb24gPSBmdW5jdGlvbihyZXN0aXR1dGlvbikge1xuICAgICAgICB0aGlzLm1fcmVzdGl0dXRpb24gPSByZXN0aXR1dGlvbjtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUudGVzdFBvaW50ID0gZnVuY3Rpb24ocCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3NoYXBlLnRlc3RQb2ludCh0aGlzLm1fYm9keS5nZXRUcmFuc2Zvcm0oKSwgcCk7XG4gICAgICB9O1xuICAgICAgRml4dHVyZTIucHJvdG90eXBlLnJheUNhc3QgPSBmdW5jdGlvbihvdXRwdXQyLCBpbnB1dDIsIGNoaWxkSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9zaGFwZS5yYXlDYXN0KG91dHB1dDIsIGlucHV0MiwgdGhpcy5tX2JvZHkuZ2V0VHJhbnNmb3JtKCksIGNoaWxkSW5kZXgpO1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5nZXRNYXNzRGF0YSA9IGZ1bmN0aW9uKG1hc3NEYXRhKSB7XG4gICAgICAgIHRoaXMubV9zaGFwZS5jb21wdXRlTWFzcyhtYXNzRGF0YSwgdGhpcy5tX2RlbnNpdHkpO1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5nZXRBQUJCID0gZnVuY3Rpb24oY2hpbGRJbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3Byb3hpZXNbY2hpbGRJbmRleF0uYWFiYjtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuY3JlYXRlUHJveGllcyA9IGZ1bmN0aW9uKGJyb2FkUGhhc2UsIHhmMikge1xuICAgICAgICB0aGlzLm1fcHJveHlDb3VudCA9IHRoaXMubV9zaGFwZS5nZXRDaGlsZENvdW50KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX3Byb3h5Q291bnQ7ICsraSkge1xuICAgICAgICAgIHZhciBwcm94eSA9IHRoaXMubV9wcm94aWVzW2ldO1xuICAgICAgICAgIHRoaXMubV9zaGFwZS5jb21wdXRlQUFCQihwcm94eS5hYWJiLCB4ZjIsIGkpO1xuICAgICAgICAgIHByb3h5LnByb3h5SWQgPSBicm9hZFBoYXNlLmNyZWF0ZVByb3h5KHByb3h5LmFhYmIsIHByb3h5KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5kZXN0cm95UHJveGllcyA9IGZ1bmN0aW9uKGJyb2FkUGhhc2UpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fcHJveHlDb3VudDsgKytpKSB7XG4gICAgICAgICAgdmFyIHByb3h5ID0gdGhpcy5tX3Byb3hpZXNbaV07XG4gICAgICAgICAgYnJvYWRQaGFzZS5kZXN0cm95UHJveHkocHJveHkucHJveHlJZCk7XG4gICAgICAgICAgcHJveHkucHJveHlJZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX3Byb3h5Q291bnQgPSAwO1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5zeW5jaHJvbml6ZSA9IGZ1bmN0aW9uKGJyb2FkUGhhc2UsIHhmMSwgeGYyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX3Byb3h5Q291bnQ7ICsraSkge1xuICAgICAgICAgIHZhciBwcm94eSA9IHRoaXMubV9wcm94aWVzW2ldO1xuICAgICAgICAgIHRoaXMubV9zaGFwZS5jb21wdXRlQUFCQihzeW5jaHJvbml6ZV9hYWJiMSwgeGYxLCBwcm94eS5jaGlsZEluZGV4KTtcbiAgICAgICAgICB0aGlzLm1fc2hhcGUuY29tcHV0ZUFBQkIoc3luY2hyb25pemVfYWFiYjIsIHhmMiwgcHJveHkuY2hpbGRJbmRleCk7XG4gICAgICAgICAgcHJveHkuYWFiYi5jb21iaW5lKHN5bmNocm9uaXplX2FhYmIxLCBzeW5jaHJvbml6ZV9hYWJiMik7XG4gICAgICAgICAgc3ViVmVjMihkaXNwbGFjZW1lbnQsIHhmMi5wLCB4ZjEucCk7XG4gICAgICAgICAgYnJvYWRQaGFzZS5tb3ZlUHJveHkocHJveHkucHJveHlJZCwgcHJveHkuYWFiYiwgZGlzcGxhY2VtZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5zZXRGaWx0ZXJEYXRhID0gZnVuY3Rpb24oZmlsdGVyKSB7XG4gICAgICAgIHRoaXMubV9maWx0ZXJHcm91cEluZGV4ID0gZmlsdGVyLmdyb3VwSW5kZXg7XG4gICAgICAgIHRoaXMubV9maWx0ZXJDYXRlZ29yeUJpdHMgPSBmaWx0ZXIuY2F0ZWdvcnlCaXRzO1xuICAgICAgICB0aGlzLm1fZmlsdGVyTWFza0JpdHMgPSBmaWx0ZXIubWFza0JpdHM7XG4gICAgICAgIHRoaXMucmVmaWx0ZXIoKTtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUuZ2V0RmlsdGVyR3JvdXBJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2ZpbHRlckdyb3VwSW5kZXg7XG4gICAgICB9O1xuICAgICAgRml4dHVyZTIucHJvdG90eXBlLnNldEZpbHRlckdyb3VwSW5kZXggPSBmdW5jdGlvbihncm91cEluZGV4KSB7XG4gICAgICAgIHRoaXMubV9maWx0ZXJHcm91cEluZGV4ID0gZ3JvdXBJbmRleDtcbiAgICAgICAgdGhpcy5yZWZpbHRlcigpO1xuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5nZXRGaWx0ZXJDYXRlZ29yeUJpdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9maWx0ZXJDYXRlZ29yeUJpdHM7XG4gICAgICB9O1xuICAgICAgRml4dHVyZTIucHJvdG90eXBlLnNldEZpbHRlckNhdGVnb3J5Qml0cyA9IGZ1bmN0aW9uKGNhdGVnb3J5Qml0cykge1xuICAgICAgICB0aGlzLm1fZmlsdGVyQ2F0ZWdvcnlCaXRzID0gY2F0ZWdvcnlCaXRzO1xuICAgICAgICB0aGlzLnJlZmlsdGVyKCk7XG4gICAgICB9O1xuICAgICAgRml4dHVyZTIucHJvdG90eXBlLmdldEZpbHRlck1hc2tCaXRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZmlsdGVyTWFza0JpdHM7XG4gICAgICB9O1xuICAgICAgRml4dHVyZTIucHJvdG90eXBlLnNldEZpbHRlck1hc2tCaXRzID0gZnVuY3Rpb24obWFza0JpdHMpIHtcbiAgICAgICAgdGhpcy5tX2ZpbHRlck1hc2tCaXRzID0gbWFza0JpdHM7XG4gICAgICAgIHRoaXMucmVmaWx0ZXIoKTtcbiAgICAgIH07XG4gICAgICBGaXh0dXJlMi5wcm90b3R5cGUucmVmaWx0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMubV9ib2R5ID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkZ2UgPSB0aGlzLm1fYm9keS5nZXRDb250YWN0TGlzdCgpO1xuICAgICAgICB3aGlsZSAoZWRnZSkge1xuICAgICAgICAgIHZhciBjb250YWN0ID0gZWRnZS5jb250YWN0O1xuICAgICAgICAgIHZhciBmaXh0dXJlQSA9IGNvbnRhY3QuZ2V0Rml4dHVyZUEoKTtcbiAgICAgICAgICB2YXIgZml4dHVyZUIgPSBjb250YWN0LmdldEZpeHR1cmVCKCk7XG4gICAgICAgICAgaWYgKGZpeHR1cmVBID09IHRoaXMgfHwgZml4dHVyZUIgPT0gdGhpcykge1xuICAgICAgICAgICAgY29udGFjdC5mbGFnRm9yRmlsdGVyaW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdvcmxkID0gdGhpcy5tX2JvZHkuZ2V0V29ybGQoKTtcbiAgICAgICAgaWYgKHdvcmxkID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJyb2FkUGhhc2UgPSB3b3JsZC5tX2Jyb2FkUGhhc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX3Byb3h5Q291bnQ7ICsraSkge1xuICAgICAgICAgIGJyb2FkUGhhc2UudG91Y2hQcm94eSh0aGlzLm1fcHJveGllc1tpXS5wcm94eUlkKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIEZpeHR1cmUyLnByb3RvdHlwZS5zaG91bGRDb2xsaWRlID0gZnVuY3Rpb24odGhhdCkge1xuICAgICAgICBpZiAodGhhdC5tX2ZpbHRlckdyb3VwSW5kZXggPT09IHRoaXMubV9maWx0ZXJHcm91cEluZGV4ICYmIHRoYXQubV9maWx0ZXJHcm91cEluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHRoYXQubV9maWx0ZXJHcm91cEluZGV4ID4gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29sbGlkZUEgPSAodGhhdC5tX2ZpbHRlck1hc2tCaXRzICYgdGhpcy5tX2ZpbHRlckNhdGVnb3J5Qml0cykgIT09IDA7XG4gICAgICAgIHZhciBjb2xsaWRlQiA9ICh0aGF0Lm1fZmlsdGVyQ2F0ZWdvcnlCaXRzICYgdGhpcy5tX2ZpbHRlck1hc2tCaXRzKSAhPT0gMDtcbiAgICAgICAgdmFyIGNvbGxpZGUgPSBjb2xsaWRlQSAmJiBjb2xsaWRlQjtcbiAgICAgICAgcmV0dXJuIGNvbGxpZGU7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIEZpeHR1cmUyO1xuICAgIH0oKVxuICApO1xuICB2YXIgU1RBVElDID0gXCJzdGF0aWNcIjtcbiAgdmFyIEtJTkVNQVRJQyA9IFwia2luZW1hdGljXCI7XG4gIHZhciBEWU5BTUlDID0gXCJkeW5hbWljXCI7XG4gIHZhciBvbGRDZW50ZXIgPSB2ZWMyKDAsIDApO1xuICB2YXIgbG9jYWxDZW50ZXIgPSB2ZWMyKDAsIDApO1xuICB2YXIgc2hpZnQgPSB2ZWMyKDAsIDApO1xuICB2YXIgdGVtcCQ2ID0gdmVjMigwLCAwKTtcbiAgdmFyIHhmJDIgPSB0cmFuc2Zvcm0oMCwgMCwgMCk7XG4gIHZhciBCb2R5RGVmRGVmYXVsdCA9IHtcbiAgICB0eXBlOiBTVEFUSUMsXG4gICAgcG9zaXRpb246IFZlYzIuemVybygpLFxuICAgIGFuZ2xlOiAwLFxuICAgIGxpbmVhclZlbG9jaXR5OiBWZWMyLnplcm8oKSxcbiAgICBhbmd1bGFyVmVsb2NpdHk6IDAsXG4gICAgbGluZWFyRGFtcGluZzogMCxcbiAgICBhbmd1bGFyRGFtcGluZzogMCxcbiAgICBmaXhlZFJvdGF0aW9uOiBmYWxzZSxcbiAgICBidWxsZXQ6IGZhbHNlLFxuICAgIGdyYXZpdHlTY2FsZTogMSxcbiAgICBhbGxvd1NsZWVwOiB0cnVlLFxuICAgIGF3YWtlOiB0cnVlLFxuICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICB1c2VyRGF0YTogbnVsbFxuICB9O1xuICB2YXIgQm9keSA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBCb2R5Mih3b3JsZCwgZGVmKSB7XG4gICAgICAgIHRoaXMuc3R5bGUgPSB7fTtcbiAgICAgICAgdGhpcy5hcHBEYXRhID0ge307XG4gICAgICAgIGRlZiA9IG9wdGlvbnMoZGVmLCBCb2R5RGVmRGVmYXVsdCk7XG4gICAgICAgIHRoaXMubV93b3JsZCA9IHdvcmxkO1xuICAgICAgICB0aGlzLm1fYXdha2VGbGFnID0gZGVmLmF3YWtlO1xuICAgICAgICB0aGlzLm1fYXV0b1NsZWVwRmxhZyA9IGRlZi5hbGxvd1NsZWVwO1xuICAgICAgICB0aGlzLm1fYnVsbGV0RmxhZyA9IGRlZi5idWxsZXQ7XG4gICAgICAgIHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZyA9IGRlZi5maXhlZFJvdGF0aW9uO1xuICAgICAgICB0aGlzLm1fYWN0aXZlRmxhZyA9IGRlZi5hY3RpdmU7XG4gICAgICAgIHRoaXMubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgIHRoaXMubV90b2lGbGFnID0gZmFsc2U7XG4gICAgICAgIHRoaXMubV91c2VyRGF0YSA9IGRlZi51c2VyRGF0YTtcbiAgICAgICAgdGhpcy5tX3R5cGUgPSBkZWYudHlwZTtcbiAgICAgICAgaWYgKHRoaXMubV90eXBlID09IERZTkFNSUMpIHtcbiAgICAgICAgICB0aGlzLm1fbWFzcyA9IDE7XG4gICAgICAgICAgdGhpcy5tX2ludk1hc3MgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9tYXNzID0gMDtcbiAgICAgICAgICB0aGlzLm1faW52TWFzcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX0kgPSAwO1xuICAgICAgICB0aGlzLm1faW52SSA9IDA7XG4gICAgICAgIHRoaXMubV94ZiA9IFRyYW5zZm9ybS5pZGVudGl0eSgpO1xuICAgICAgICB0aGlzLm1feGYucC5zZXRWZWMyKGRlZi5wb3NpdGlvbik7XG4gICAgICAgIHRoaXMubV94Zi5xLnNldEFuZ2xlKGRlZi5hbmdsZSk7XG4gICAgICAgIHRoaXMubV9zd2VlcCA9IG5ldyBTd2VlcCgpO1xuICAgICAgICB0aGlzLm1fc3dlZXAuc2V0VHJhbnNmb3JtKHRoaXMubV94Zik7XG4gICAgICAgIHRoaXMuY192ZWxvY2l0eSA9IG5ldyBWZWxvY2l0eSgpO1xuICAgICAgICB0aGlzLmNfcG9zaXRpb24gPSBuZXcgUG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy5tX2ZvcmNlID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIHRoaXMubV90b3JxdWUgPSAwO1xuICAgICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkgPSBWZWMyLmNsb25lKGRlZi5saW5lYXJWZWxvY2l0eSk7XG4gICAgICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSBkZWYuYW5ndWxhclZlbG9jaXR5O1xuICAgICAgICB0aGlzLm1fbGluZWFyRGFtcGluZyA9IGRlZi5saW5lYXJEYW1waW5nO1xuICAgICAgICB0aGlzLm1fYW5ndWxhckRhbXBpbmcgPSBkZWYuYW5ndWxhckRhbXBpbmc7XG4gICAgICAgIHRoaXMubV9ncmF2aXR5U2NhbGUgPSBkZWYuZ3Jhdml0eVNjYWxlO1xuICAgICAgICB0aGlzLm1fc2xlZXBUaW1lID0gMDtcbiAgICAgICAgdGhpcy5tX2pvaW50TGlzdCA9IG51bGw7XG4gICAgICAgIHRoaXMubV9jb250YWN0TGlzdCA9IG51bGw7XG4gICAgICAgIHRoaXMubV9maXh0dXJlTGlzdCA9IG51bGw7XG4gICAgICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX25leHQgPSBudWxsO1xuICAgICAgICB0aGlzLm1fZGVzdHJveWVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0eXBlb2YgZGVmLnN0eWxlID09PSBcIm9iamVjdFwiICYmIGRlZi5zdHlsZSAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuc3R5bGUgPSBkZWYuc3R5bGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIEJvZHkyLnByb3RvdHlwZS5fc2VyaWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmaXh0dXJlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBmID0gdGhpcy5tX2ZpeHR1cmVMaXN0OyBmOyBmID0gZi5tX25leHQpIHtcbiAgICAgICAgICBmaXh0dXJlcy5wdXNoKGYpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5tX3R5cGUsXG4gICAgICAgICAgYnVsbGV0OiB0aGlzLm1fYnVsbGV0RmxhZyxcbiAgICAgICAgICBwb3NpdGlvbjogdGhpcy5tX3hmLnAsXG4gICAgICAgICAgYW5nbGU6IHRoaXMubV94Zi5xLmdldEFuZ2xlKCksXG4gICAgICAgICAgbGluZWFyVmVsb2NpdHk6IHRoaXMubV9saW5lYXJWZWxvY2l0eSxcbiAgICAgICAgICBhbmd1bGFyVmVsb2NpdHk6IHRoaXMubV9hbmd1bGFyVmVsb2NpdHksXG4gICAgICAgICAgZml4dHVyZXNcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCB3b3JsZCwgcmVzdG9yZSkge1xuICAgICAgICB2YXIgYm9keSA9IG5ldyBCb2R5Mih3b3JsZCwgZGF0YSk7XG4gICAgICAgIGlmIChkYXRhLmZpeHR1cmVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IGRhdGEuZml4dHVyZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBmaXh0dXJlID0gcmVzdG9yZShGaXh0dXJlLCBkYXRhLmZpeHR1cmVzW2ldLCBib2R5KTtcbiAgICAgICAgICAgIGJvZHkuX2FkZEZpeHR1cmUoZml4dHVyZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBib2R5O1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5pc1dvcmxkTG9ja2VkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fd29ybGQgJiYgdGhpcy5tX3dvcmxkLmlzTG9ja2VkKCkgPyB0cnVlIDogZmFsc2U7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmdldFdvcmxkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fd29ybGQ7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmdldE5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9uZXh0O1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5zZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdGhpcy5tX3VzZXJEYXRhID0gZGF0YTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0VXNlckRhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV91c2VyRGF0YTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0Rml4dHVyZUxpc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9maXh0dXJlTGlzdDtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0Sm9pbnRMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fam9pbnRMaXN0O1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRDb250YWN0TGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5pc1N0YXRpYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3R5cGUgPT0gU1RBVElDO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5pc0R5bmFtaWMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV90eXBlID09IERZTkFNSUM7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmlzS2luZW1hdGljID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fdHlwZSA9PSBLSU5FTUFUSUM7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLnNldFN0YXRpYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFR5cGUoU1RBVElDKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLnNldER5bmFtaWMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXRUeXBlKERZTkFNSUMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuc2V0S2luZW1hdGljID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0VHlwZShLSU5FTUFUSUMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3R5cGU7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLnNldFR5cGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzV29ybGRMb2NrZWQoKSA9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fdHlwZSA9PSB0eXBlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV90eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5yZXNldE1hc3NEYXRhKCk7XG4gICAgICAgIGlmICh0aGlzLm1fdHlwZSA9PSBTVEFUSUMpIHtcbiAgICAgICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuc2V0WmVybygpO1xuICAgICAgICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSAwO1xuICAgICAgICAgIHRoaXMubV9zd2VlcC5mb3J3YXJkKCk7XG4gICAgICAgICAgdGhpcy5zeW5jaHJvbml6ZUZpeHR1cmVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgdGhpcy5tX2ZvcmNlLnNldFplcm8oKTtcbiAgICAgICAgdGhpcy5tX3RvcnF1ZSA9IDA7XG4gICAgICAgIHZhciBjZSA9IHRoaXMubV9jb250YWN0TGlzdDtcbiAgICAgICAgd2hpbGUgKGNlKSB7XG4gICAgICAgICAgdmFyIGNlMCA9IGNlO1xuICAgICAgICAgIGNlID0gY2UubmV4dDtcbiAgICAgICAgICB0aGlzLm1fd29ybGQuZGVzdHJveUNvbnRhY3QoY2UwLmNvbnRhY3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9jb250YWN0TGlzdCA9IG51bGw7XG4gICAgICAgIHZhciBicm9hZFBoYXNlID0gdGhpcy5tX3dvcmxkLm1fYnJvYWRQaGFzZTtcbiAgICAgICAgZm9yICh2YXIgZiA9IHRoaXMubV9maXh0dXJlTGlzdDsgZjsgZiA9IGYubV9uZXh0KSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmLm1fcHJveHlDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBicm9hZFBoYXNlLnRvdWNoUHJveHkoZi5tX3Byb3hpZXNbaV0ucHJveHlJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmlzQnVsbGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYnVsbGV0RmxhZztcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuc2V0QnVsbGV0ID0gZnVuY3Rpb24oZmxhZykge1xuICAgICAgICB0aGlzLm1fYnVsbGV0RmxhZyA9ICEhZmxhZztcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuaXNTbGVlcGluZ0FsbG93ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9hdXRvU2xlZXBGbGFnO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5zZXRTbGVlcGluZ0FsbG93ZWQgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgICAgIHRoaXMubV9hdXRvU2xlZXBGbGFnID0gISFmbGFnO1xuICAgICAgICBpZiAodGhpcy5tX2F1dG9TbGVlcEZsYWcgPT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmlzQXdha2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9hd2FrZUZsYWc7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLnNldEF3YWtlID0gZnVuY3Rpb24oZmxhZykge1xuICAgICAgICBpZiAoZmxhZykge1xuICAgICAgICAgIHRoaXMubV9hd2FrZUZsYWcgPSB0cnVlO1xuICAgICAgICAgIHRoaXMubV9zbGVlcFRpbWUgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9hd2FrZUZsYWcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLm1fc2xlZXBUaW1lID0gMDtcbiAgICAgICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuc2V0WmVybygpO1xuICAgICAgICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSAwO1xuICAgICAgICAgIHRoaXMubV9mb3JjZS5zZXRaZXJvKCk7XG4gICAgICAgICAgdGhpcy5tX3RvcnF1ZSA9IDA7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuaXNBY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9hY3RpdmVGbGFnO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5zZXRBY3RpdmUgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgICAgIGlmIChmbGFnID09IHRoaXMubV9hY3RpdmVGbGFnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9hY3RpdmVGbGFnID0gISFmbGFnO1xuICAgICAgICBpZiAodGhpcy5tX2FjdGl2ZUZsYWcpIHtcbiAgICAgICAgICB2YXIgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2Jyb2FkUGhhc2U7XG4gICAgICAgICAgZm9yICh2YXIgZiA9IHRoaXMubV9maXh0dXJlTGlzdDsgZjsgZiA9IGYubV9uZXh0KSB7XG4gICAgICAgICAgICBmLmNyZWF0ZVByb3hpZXMoYnJvYWRQaGFzZSwgdGhpcy5tX3hmKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5tX3dvcmxkLm1fbmV3Rml4dHVyZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGJyb2FkUGhhc2UgPSB0aGlzLm1fd29ybGQubV9icm9hZFBoYXNlO1xuICAgICAgICAgIGZvciAodmFyIGYgPSB0aGlzLm1fZml4dHVyZUxpc3Q7IGY7IGYgPSBmLm1fbmV4dCkge1xuICAgICAgICAgICAgZi5kZXN0cm95UHJveGllcyhicm9hZFBoYXNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGNlID0gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICAgICAgICAgIHdoaWxlIChjZSkge1xuICAgICAgICAgICAgdmFyIGNlMCA9IGNlO1xuICAgICAgICAgICAgY2UgPSBjZS5uZXh0O1xuICAgICAgICAgICAgdGhpcy5tX3dvcmxkLmRlc3Ryb3lDb250YWN0KGNlMC5jb250YWN0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5tX2NvbnRhY3RMaXN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5pc0ZpeGVkUm90YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZztcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuc2V0Rml4ZWRSb3RhdGlvbiA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICAgICAgaWYgKHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZyA9PSBmbGFnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZyA9ICEhZmxhZztcbiAgICAgICAgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSA9IDA7XG4gICAgICAgIHRoaXMucmVzZXRNYXNzRGF0YSgpO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV94ZjtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzV29ybGRMb2NrZWQoKSA9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYjIgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB0aGlzLm1feGYuc2V0TnVtKGEyLCBiMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX3hmLnNldFRyYW5zZm9ybShhMik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX3N3ZWVwLnNldFRyYW5zZm9ybSh0aGlzLm1feGYpO1xuICAgICAgICB2YXIgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2Jyb2FkUGhhc2U7XG4gICAgICAgIGZvciAodmFyIGYgPSB0aGlzLm1fZml4dHVyZUxpc3Q7IGY7IGYgPSBmLm1fbmV4dCkge1xuICAgICAgICAgIGYuc3luY2hyb25pemUoYnJvYWRQaGFzZSwgdGhpcy5tX3hmLCB0aGlzLm1feGYpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0QXdha2UodHJ1ZSk7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLnN5bmNocm9uaXplVHJhbnNmb3JtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubV9zd2VlcC5nZXRUcmFuc2Zvcm0odGhpcy5tX3hmLCAxKTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuc3luY2hyb25pemVGaXh0dXJlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLm1fc3dlZXAuZ2V0VHJhbnNmb3JtKHhmJDIsIDApO1xuICAgICAgICB2YXIgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2Jyb2FkUGhhc2U7XG4gICAgICAgIGZvciAodmFyIGYgPSB0aGlzLm1fZml4dHVyZUxpc3Q7IGY7IGYgPSBmLm1fbmV4dCkge1xuICAgICAgICAgIGYuc3luY2hyb25pemUoYnJvYWRQaGFzZSwgeGYkMiwgdGhpcy5tX3hmKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5hZHZhbmNlID0gZnVuY3Rpb24oYWxwaGEpIHtcbiAgICAgICAgdGhpcy5tX3N3ZWVwLmFkdmFuY2UoYWxwaGEpO1xuICAgICAgICBjb3B5VmVjMih0aGlzLm1fc3dlZXAuYywgdGhpcy5tX3N3ZWVwLmMwKTtcbiAgICAgICAgdGhpcy5tX3N3ZWVwLmEgPSB0aGlzLm1fc3dlZXAuYTA7XG4gICAgICAgIHRoaXMubV9zd2VlcC5nZXRUcmFuc2Zvcm0odGhpcy5tX3hmLCAxKTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV94Zi5wO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0ocCwgdGhpcy5tX3N3ZWVwLmEpO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRBbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3N3ZWVwLmE7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLnNldEFuZ2xlID0gZnVuY3Rpb24oYW5nbGUpIHtcbiAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0odGhpcy5tX3hmLnAsIGFuZ2xlKTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0V29ybGRDZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9zd2VlcC5jO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRMb2NhbENlbnRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRMaW5lYXJWZWxvY2l0eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2xpbmVhclZlbG9jaXR5O1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50ID0gZnVuY3Rpb24od29ybGRQb2ludCkge1xuICAgICAgICB2YXIgbG9jYWxDZW50ZXIyID0gVmVjMi5zdWIod29ybGRQb2ludCwgdGhpcy5tX3N3ZWVwLmMpO1xuICAgICAgICByZXR1cm4gVmVjMi5hZGQodGhpcy5tX2xpbmVhclZlbG9jaXR5LCBWZWMyLmNyb3NzTnVtVmVjMih0aGlzLm1fYW5ndWxhclZlbG9jaXR5LCBsb2NhbENlbnRlcjIpKTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0TGluZWFyVmVsb2NpdHlGcm9tTG9jYWxQb2ludCA9IGZ1bmN0aW9uKGxvY2FsUG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZWFyVmVsb2NpdHlGcm9tV29ybGRQb2ludCh0aGlzLmdldFdvcmxkUG9pbnQobG9jYWxQb2ludCkpO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5zZXRMaW5lYXJWZWxvY2l0eSA9IGZ1bmN0aW9uKHYzKSB7XG4gICAgICAgIGlmICh0aGlzLm1fdHlwZSA9PSBTVEFUSUMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFZlYzIuZG90KHYzLCB2MykgPiAwKSB7XG4gICAgICAgICAgdGhpcy5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuc2V0VmVjMih2Myk7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmdldEFuZ3VsYXJWZWxvY2l0eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuc2V0QW5ndWxhclZlbG9jaXR5ID0gZnVuY3Rpb24odykge1xuICAgICAgICBpZiAodGhpcy5tX3R5cGUgPT0gU1RBVElDKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3ICogdyA+IDApIHtcbiAgICAgICAgICB0aGlzLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSB3O1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRMaW5lYXJEYW1waW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbGluZWFyRGFtcGluZztcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuc2V0TGluZWFyRGFtcGluZyA9IGZ1bmN0aW9uKGxpbmVhckRhbXBpbmcpIHtcbiAgICAgICAgdGhpcy5tX2xpbmVhckRhbXBpbmcgPSBsaW5lYXJEYW1waW5nO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRBbmd1bGFyRGFtcGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2FuZ3VsYXJEYW1waW5nO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5zZXRBbmd1bGFyRGFtcGluZyA9IGZ1bmN0aW9uKGFuZ3VsYXJEYW1waW5nKSB7XG4gICAgICAgIHRoaXMubV9hbmd1bGFyRGFtcGluZyA9IGFuZ3VsYXJEYW1waW5nO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5nZXRHcmF2aXR5U2NhbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ncmF2aXR5U2NhbGU7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLnNldEdyYXZpdHlTY2FsZSA9IGZ1bmN0aW9uKHNjYWxlKSB7XG4gICAgICAgIHRoaXMubV9ncmF2aXR5U2NhbGUgPSBzY2FsZTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0TWFzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX21hc3M7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmdldEluZXJ0aWEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9JICsgdGhpcy5tX21hc3MgKiBWZWMyLmRvdCh0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIsIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmdldE1hc3NEYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBkYXRhLm1hc3MgPSB0aGlzLm1fbWFzcztcbiAgICAgICAgZGF0YS5JID0gdGhpcy5nZXRJbmVydGlhKCk7XG4gICAgICAgIGNvcHlWZWMyKGRhdGEuY2VudGVyLCB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5yZXNldE1hc3NEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubV9tYXNzID0gMDtcbiAgICAgICAgdGhpcy5tX2ludk1hc3MgPSAwO1xuICAgICAgICB0aGlzLm1fSSA9IDA7XG4gICAgICAgIHRoaXMubV9pbnZJID0gMDtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdGF0aWMoKSB8fCB0aGlzLmlzS2luZW1hdGljKCkpIHtcbiAgICAgICAgICBjb3B5VmVjMih0aGlzLm1fc3dlZXAuYzAsIHRoaXMubV94Zi5wKTtcbiAgICAgICAgICBjb3B5VmVjMih0aGlzLm1fc3dlZXAuYywgdGhpcy5tX3hmLnApO1xuICAgICAgICAgIHRoaXMubV9zd2VlcC5hMCA9IHRoaXMubV9zd2VlcC5hO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB6ZXJvVmVjMihsb2NhbENlbnRlcik7XG4gICAgICAgIGZvciAodmFyIGYgPSB0aGlzLm1fZml4dHVyZUxpc3Q7IGY7IGYgPSBmLm1fbmV4dCkge1xuICAgICAgICAgIGlmIChmLm1fZGVuc2l0eSA9PSAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIG1hc3NEYXRhID0ge1xuICAgICAgICAgICAgbWFzczogMCxcbiAgICAgICAgICAgIGNlbnRlcjogdmVjMigwLCAwKSxcbiAgICAgICAgICAgIEk6IDBcbiAgICAgICAgICB9O1xuICAgICAgICAgIGYuZ2V0TWFzc0RhdGEobWFzc0RhdGEpO1xuICAgICAgICAgIHRoaXMubV9tYXNzICs9IG1hc3NEYXRhLm1hc3M7XG4gICAgICAgICAgcGx1c1NjYWxlVmVjMihsb2NhbENlbnRlciwgbWFzc0RhdGEubWFzcywgbWFzc0RhdGEuY2VudGVyKTtcbiAgICAgICAgICB0aGlzLm1fSSArPSBtYXNzRGF0YS5JO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fbWFzcyA+IDApIHtcbiAgICAgICAgICB0aGlzLm1faW52TWFzcyA9IDEgLyB0aGlzLm1fbWFzcztcbiAgICAgICAgICBzY2FsZVZlYzIobG9jYWxDZW50ZXIsIHRoaXMubV9pbnZNYXNzLCBsb2NhbENlbnRlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX21hc3MgPSAxO1xuICAgICAgICAgIHRoaXMubV9pbnZNYXNzID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX0kgPiAwICYmIHRoaXMubV9maXhlZFJvdGF0aW9uRmxhZyA9PSBmYWxzZSkge1xuICAgICAgICAgIHRoaXMubV9JIC09IHRoaXMubV9tYXNzICogZG90VmVjMihsb2NhbENlbnRlciwgbG9jYWxDZW50ZXIpO1xuICAgICAgICAgIHRoaXMubV9pbnZJID0gMSAvIHRoaXMubV9JO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9JID0gMDtcbiAgICAgICAgICB0aGlzLm1faW52SSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29weVZlYzIob2xkQ2VudGVyLCB0aGlzLm1fc3dlZXAuYyk7XG4gICAgICAgIHRoaXMubV9zd2VlcC5zZXRMb2NhbENlbnRlcihsb2NhbENlbnRlciwgdGhpcy5tX3hmKTtcbiAgICAgICAgc3ViVmVjMihzaGlmdCwgdGhpcy5tX3N3ZWVwLmMsIG9sZENlbnRlcik7XG4gICAgICAgIGNyb3NzTnVtVmVjMih0ZW1wJDYsIHRoaXMubV9hbmd1bGFyVmVsb2NpdHksIHNoaWZ0KTtcbiAgICAgICAgcGx1c1ZlYzIodGhpcy5tX2xpbmVhclZlbG9jaXR5LCB0ZW1wJDYpO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5zZXRNYXNzRGF0YSA9IGZ1bmN0aW9uKG1hc3NEYXRhKSB7XG4gICAgICAgIGlmICh0aGlzLmlzV29ybGRMb2NrZWQoKSA9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fdHlwZSAhPSBEWU5BTUlDKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9pbnZNYXNzID0gMDtcbiAgICAgICAgdGhpcy5tX0kgPSAwO1xuICAgICAgICB0aGlzLm1faW52SSA9IDA7XG4gICAgICAgIHRoaXMubV9tYXNzID0gbWFzc0RhdGEubWFzcztcbiAgICAgICAgaWYgKHRoaXMubV9tYXNzIDw9IDApIHtcbiAgICAgICAgICB0aGlzLm1fbWFzcyA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX2ludk1hc3MgPSAxIC8gdGhpcy5tX21hc3M7XG4gICAgICAgIGlmIChtYXNzRGF0YS5JID4gMCAmJiB0aGlzLm1fZml4ZWRSb3RhdGlvbkZsYWcgPT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLm1fSSA9IG1hc3NEYXRhLkkgLSB0aGlzLm1fbWFzcyAqIGRvdFZlYzIobWFzc0RhdGEuY2VudGVyLCBtYXNzRGF0YS5jZW50ZXIpO1xuICAgICAgICAgIHRoaXMubV9pbnZJID0gMSAvIHRoaXMubV9JO1xuICAgICAgICB9XG4gICAgICAgIGNvcHlWZWMyKG9sZENlbnRlciwgdGhpcy5tX3N3ZWVwLmMpO1xuICAgICAgICB0aGlzLm1fc3dlZXAuc2V0TG9jYWxDZW50ZXIobWFzc0RhdGEuY2VudGVyLCB0aGlzLm1feGYpO1xuICAgICAgICBzdWJWZWMyKHNoaWZ0LCB0aGlzLm1fc3dlZXAuYywgb2xkQ2VudGVyKTtcbiAgICAgICAgY3Jvc3NOdW1WZWMyKHRlbXAkNiwgdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSwgc2hpZnQpO1xuICAgICAgICBwbHVzVmVjMih0aGlzLm1fbGluZWFyVmVsb2NpdHksIHRlbXAkNik7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmFwcGx5Rm9yY2UgPSBmdW5jdGlvbihmb3JjZSwgcG9pbnQyLCB3YWtlKSB7XG4gICAgICAgIGlmICh3YWtlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB3YWtlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX3R5cGUgIT0gRFlOQU1JQykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2FrZSAmJiB0aGlzLm1fYXdha2VGbGFnID09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2F3YWtlRmxhZykge1xuICAgICAgICAgIHRoaXMubV9mb3JjZS5hZGQoZm9yY2UpO1xuICAgICAgICAgIHRoaXMubV90b3JxdWUgKz0gVmVjMi5jcm9zc1ZlYzJWZWMyKFZlYzIuc3ViKHBvaW50MiwgdGhpcy5tX3N3ZWVwLmMpLCBmb3JjZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuYXBwbHlGb3JjZVRvQ2VudGVyID0gZnVuY3Rpb24oZm9yY2UsIHdha2UpIHtcbiAgICAgICAgaWYgKHdha2UgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHdha2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fdHlwZSAhPSBEWU5BTUlDKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3YWtlICYmIHRoaXMubV9hd2FrZUZsYWcgPT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fYXdha2VGbGFnKSB7XG4gICAgICAgICAgdGhpcy5tX2ZvcmNlLmFkZChmb3JjZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuYXBwbHlUb3JxdWUgPSBmdW5jdGlvbih0b3JxdWUsIHdha2UpIHtcbiAgICAgICAgaWYgKHdha2UgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHdha2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fdHlwZSAhPSBEWU5BTUlDKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3YWtlICYmIHRoaXMubV9hd2FrZUZsYWcgPT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fYXdha2VGbGFnKSB7XG4gICAgICAgICAgdGhpcy5tX3RvcnF1ZSArPSB0b3JxdWU7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuYXBwbHlMaW5lYXJJbXB1bHNlID0gZnVuY3Rpb24oaW1wdWxzZSwgcG9pbnQyLCB3YWtlKSB7XG4gICAgICAgIGlmICh3YWtlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB3YWtlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX3R5cGUgIT0gRFlOQU1JQykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2FrZSAmJiB0aGlzLm1fYXdha2VGbGFnID09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2F3YWtlRmxhZykge1xuICAgICAgICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS5hZGRNdWwodGhpcy5tX2ludk1hc3MsIGltcHVsc2UpO1xuICAgICAgICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKz0gdGhpcy5tX2ludkkgKiBWZWMyLmNyb3NzVmVjMlZlYzIoVmVjMi5zdWIocG9pbnQyLCB0aGlzLm1fc3dlZXAuYyksIGltcHVsc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmFwcGx5QW5ndWxhckltcHVsc2UgPSBmdW5jdGlvbihpbXB1bHNlLCB3YWtlKSB7XG4gICAgICAgIGlmICh3YWtlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB3YWtlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX3R5cGUgIT0gRFlOQU1JQykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2FrZSAmJiB0aGlzLm1fYXdha2VGbGFnID09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2F3YWtlRmxhZykge1xuICAgICAgICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKz0gdGhpcy5tX2ludkkgKiBpbXB1bHNlO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLnNob3VsZENvbGxpZGUgPSBmdW5jdGlvbih0aGF0KSB7XG4gICAgICAgIGlmICh0aGlzLm1fdHlwZSAhPSBEWU5BTUlDICYmIHRoYXQubV90eXBlICE9IERZTkFNSUMpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgam4gPSB0aGlzLm1fam9pbnRMaXN0OyBqbjsgam4gPSBqbi5uZXh0KSB7XG4gICAgICAgICAgaWYgKGpuLm90aGVyID09IHRoYXQpIHtcbiAgICAgICAgICAgIGlmIChqbi5qb2ludC5tX2NvbGxpZGVDb25uZWN0ZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuX2FkZEZpeHR1cmUgPSBmdW5jdGlvbihmaXh0dXJlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzV29ybGRMb2NrZWQoKSA9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubV9hY3RpdmVGbGFnKSB7XG4gICAgICAgICAgdmFyIGJyb2FkUGhhc2UgPSB0aGlzLm1fd29ybGQubV9icm9hZFBoYXNlO1xuICAgICAgICAgIGZpeHR1cmUuY3JlYXRlUHJveGllcyhicm9hZFBoYXNlLCB0aGlzLm1feGYpO1xuICAgICAgICB9XG4gICAgICAgIGZpeHR1cmUubV9uZXh0ID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgICAgICB0aGlzLm1fZml4dHVyZUxpc3QgPSBmaXh0dXJlO1xuICAgICAgICBpZiAoZml4dHVyZS5tX2RlbnNpdHkgPiAwKSB7XG4gICAgICAgICAgdGhpcy5yZXNldE1hc3NEYXRhKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX3dvcmxkLm1fbmV3Rml4dHVyZSA9IHRydWU7XG4gICAgICAgIHJldHVybiBmaXh0dXJlO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5jcmVhdGVGaXh0dXJlID0gZnVuY3Rpb24oc2hhcGUsIGZpeGRlZikge1xuICAgICAgICBpZiAodGhpcy5pc1dvcmxkTG9ja2VkKCkgPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmaXh0dXJlID0gbmV3IEZpeHR1cmUodGhpcywgc2hhcGUsIGZpeGRlZik7XG4gICAgICAgIHRoaXMuX2FkZEZpeHR1cmUoZml4dHVyZSk7XG4gICAgICAgIHJldHVybiBmaXh0dXJlO1xuICAgICAgfTtcbiAgICAgIEJvZHkyLnByb3RvdHlwZS5kZXN0cm95Rml4dHVyZSA9IGZ1bmN0aW9uKGZpeHR1cmUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNXb3JsZExvY2tlZCgpID09IHRydWUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubV9maXh0dXJlTGlzdCA9PT0gZml4dHVyZSkge1xuICAgICAgICAgIHRoaXMubV9maXh0dXJlTGlzdCA9IGZpeHR1cmUubV9uZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBub2RlID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgICAgICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChub2RlLm1fbmV4dCA9PT0gZml4dHVyZSkge1xuICAgICAgICAgICAgICBub2RlLm1fbmV4dCA9IGZpeHR1cmUubV9uZXh0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUgPSBub2RlLm1fbmV4dDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVkZ2UgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgICAgIHdoaWxlIChlZGdlKSB7XG4gICAgICAgICAgdmFyIGMyID0gZWRnZS5jb250YWN0O1xuICAgICAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgICAgICAgdmFyIGZpeHR1cmVBID0gYzIuZ2V0Rml4dHVyZUEoKTtcbiAgICAgICAgICB2YXIgZml4dHVyZUIgPSBjMi5nZXRGaXh0dXJlQigpO1xuICAgICAgICAgIGlmIChmaXh0dXJlID09IGZpeHR1cmVBIHx8IGZpeHR1cmUgPT0gZml4dHVyZUIpIHtcbiAgICAgICAgICAgIHRoaXMubV93b3JsZC5kZXN0cm95Q29udGFjdChjMik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fYWN0aXZlRmxhZykge1xuICAgICAgICAgIHZhciBicm9hZFBoYXNlID0gdGhpcy5tX3dvcmxkLm1fYnJvYWRQaGFzZTtcbiAgICAgICAgICBmaXh0dXJlLmRlc3Ryb3lQcm94aWVzKGJyb2FkUGhhc2UpO1xuICAgICAgICB9XG4gICAgICAgIGZpeHR1cmUubV9ib2R5ID0gbnVsbDtcbiAgICAgICAgZml4dHVyZS5tX25leHQgPSBudWxsO1xuICAgICAgICB0aGlzLm1fd29ybGQucHVibGlzaChcInJlbW92ZS1maXh0dXJlXCIsIGZpeHR1cmUpO1xuICAgICAgICB0aGlzLnJlc2V0TWFzc0RhdGEoKTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0V29ybGRQb2ludCA9IGZ1bmN0aW9uKGxvY2FsUG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIFRyYW5zZm9ybS5tdWxWZWMyKHRoaXMubV94ZiwgbG9jYWxQb2ludCk7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmdldFdvcmxkVmVjdG9yID0gZnVuY3Rpb24obG9jYWxWZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIFJvdC5tdWxWZWMyKHRoaXMubV94Zi5xLCBsb2NhbFZlY3Rvcik7XG4gICAgICB9O1xuICAgICAgQm9keTIucHJvdG90eXBlLmdldExvY2FsUG9pbnQgPSBmdW5jdGlvbih3b3JsZFBvaW50KSB7XG4gICAgICAgIHJldHVybiBUcmFuc2Zvcm0ubXVsVFZlYzIodGhpcy5tX3hmLCB3b3JsZFBvaW50KTtcbiAgICAgIH07XG4gICAgICBCb2R5Mi5wcm90b3R5cGUuZ2V0TG9jYWxWZWN0b3IgPSBmdW5jdGlvbih3b3JsZFZlY3Rvcikge1xuICAgICAgICByZXR1cm4gUm90Lm11bFRWZWMyKHRoaXMubV94Zi5xLCB3b3JsZFZlY3Rvcik7XG4gICAgICB9O1xuICAgICAgQm9keTIuU1RBVElDID0gXCJzdGF0aWNcIjtcbiAgICAgIEJvZHkyLktJTkVNQVRJQyA9IFwia2luZW1hdGljXCI7XG4gICAgICBCb2R5Mi5EWU5BTUlDID0gXCJkeW5hbWljXCI7XG4gICAgICByZXR1cm4gQm9keTI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBKb2ludEVkZ2UgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIEpvaW50RWRnZTIoKSB7XG4gICAgICAgIHRoaXMub3RoZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmpvaW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBKb2ludEVkZ2UyO1xuICAgIH0oKVxuICApO1xuICB2YXIgSm9pbnQgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCKSB7XG4gICAgICAgIHRoaXMubV90eXBlID0gXCJ1bmtub3duLWpvaW50XCI7XG4gICAgICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX25leHQgPSBudWxsO1xuICAgICAgICB0aGlzLm1fZWRnZUEgPSBuZXcgSm9pbnRFZGdlKCk7XG4gICAgICAgIHRoaXMubV9lZGdlQiA9IG5ldyBKb2ludEVkZ2UoKTtcbiAgICAgICAgdGhpcy5tX2lzbGFuZEZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdHlsZSA9IHt9O1xuICAgICAgICB0aGlzLmFwcERhdGEgPSB7fTtcbiAgICAgICAgYm9keUEgPSBcImJvZHlBXCIgaW4gZGVmID8gZGVmLmJvZHlBIDogYm9keUE7XG4gICAgICAgIGJvZHlCID0gXCJib2R5QlwiIGluIGRlZiA/IGRlZi5ib2R5QiA6IGJvZHlCO1xuICAgICAgICB0aGlzLm1fYm9keUEgPSBib2R5QTtcbiAgICAgICAgdGhpcy5tX2JvZHlCID0gYm9keUI7XG4gICAgICAgIHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkID0gISFkZWYuY29sbGlkZUNvbm5lY3RlZDtcbiAgICAgICAgdGhpcy5tX3VzZXJEYXRhID0gZGVmLnVzZXJEYXRhO1xuICAgICAgICBpZiAodHlwZW9mIGRlZi5zdHlsZSA9PT0gXCJvYmplY3RcIiAmJiBkZWYuc3R5bGUgIT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLnN0eWxlID0gZGVmLnN0eWxlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBKb2ludDIucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUEuaXNBY3RpdmUoKSAmJiB0aGlzLm1fYm9keUIuaXNBY3RpdmUoKTtcbiAgICAgIH07XG4gICAgICBKb2ludDIucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV90eXBlO1xuICAgICAgfTtcbiAgICAgIEpvaW50Mi5wcm90b3R5cGUuZ2V0Qm9keUEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5QTtcbiAgICAgIH07XG4gICAgICBKb2ludDIucHJvdG90eXBlLmdldEJvZHlCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUI7XG4gICAgICB9O1xuICAgICAgSm9pbnQyLnByb3RvdHlwZS5nZXROZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbmV4dDtcbiAgICAgIH07XG4gICAgICBKb2ludDIucHJvdG90eXBlLmdldFVzZXJEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fdXNlckRhdGE7XG4gICAgICB9O1xuICAgICAgSm9pbnQyLnByb3RvdHlwZS5zZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdGhpcy5tX3VzZXJEYXRhID0gZGF0YTtcbiAgICAgIH07XG4gICAgICBKb2ludDIucHJvdG90eXBlLmdldENvbGxpZGVDb25uZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkO1xuICAgICAgfTtcbiAgICAgIEpvaW50Mi5wcm90b3R5cGUuc2hpZnRPcmlnaW4gPSBmdW5jdGlvbihuZXdPcmlnaW4pIHtcbiAgICAgIH07XG4gICAgICBKb2ludDIucHJvdG90eXBlLl9yZXNldEFuY2hvcnMgPSBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc2V0KGRlZik7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIEpvaW50MjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIHN0YXRzID0ge1xuICAgIGdqa0NhbGxzOiAwLFxuICAgIGdqa0l0ZXJzOiAwLFxuICAgIGdqa01heEl0ZXJzOiAwLFxuICAgIHRvaVRpbWU6IDAsXG4gICAgdG9pTWF4VGltZTogMCxcbiAgICB0b2lDYWxsczogMCxcbiAgICB0b2lJdGVyczogMCxcbiAgICB0b2lNYXhJdGVyczogMCxcbiAgICB0b2lSb290SXRlcnM6IDAsXG4gICAgdG9pTWF4Um9vdEl0ZXJzOiAwLFxuICAgIHRvU3RyaW5nOiBmdW5jdGlvbihuZXdsaW5lKSB7XG4gICAgICBuZXdsaW5lID0gdHlwZW9mIG5ld2xpbmUgPT09IFwic3RyaW5nXCIgPyBuZXdsaW5lIDogXCJcXG5cIjtcbiAgICAgIHZhciBzdHJpbmcgPSBcIlwiO1xuICAgICAgZm9yICh2YXIgbmFtZV8xIGluIHRoaXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzW25hbWVfMV0gIT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdGhpc1tuYW1lXzFdICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgc3RyaW5nICs9IG5hbWVfMSArIFwiOiBcIiArIHRoaXNbbmFtZV8xXSArIG5ld2xpbmU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICB9O1xuICB2YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCk7XG4gIH07XG4gIHZhciBkaWZmID0gZnVuY3Rpb24odGltZSkge1xuICAgIHJldHVybiBEYXRlLm5vdygpIC0gdGltZTtcbiAgfTtcbiAgY29uc3QgVGltZXIgPSB7XG4gICAgbm93LFxuICAgIGRpZmZcbiAgfTtcbiAgdmFyIG1hdGhfbWF4JDQgPSBNYXRoLm1heDtcbiAgdmFyIHRlbXAkNSA9IHZlYzIoMCwgMCk7XG4gIHZhciBub3JtYWwkNCA9IHZlYzIoMCwgMCk7XG4gIHZhciBlMTIgPSB2ZWMyKDAsIDApO1xuICB2YXIgZTEzID0gdmVjMigwLCAwKTtcbiAgdmFyIGUyMyA9IHZlYzIoMCwgMCk7XG4gIHZhciB0ZW1wMSA9IHZlYzIoMCwgMCk7XG4gIHZhciB0ZW1wMiA9IHZlYzIoMCwgMCk7XG4gIHN0YXRzLmdqa0NhbGxzID0gMDtcbiAgc3RhdHMuZ2prSXRlcnMgPSAwO1xuICBzdGF0cy5namtNYXhJdGVycyA9IDA7XG4gIHZhciBEaXN0YW5jZUlucHV0ID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIERpc3RhbmNlSW5wdXQyKCkge1xuICAgICAgICB0aGlzLnByb3h5QSA9IG5ldyBEaXN0YW5jZVByb3h5KCk7XG4gICAgICAgIHRoaXMucHJveHlCID0gbmV3IERpc3RhbmNlUHJveHkoKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1BID0gVHJhbnNmb3JtLmlkZW50aXR5KCk7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtQiA9IFRyYW5zZm9ybS5pZGVudGl0eSgpO1xuICAgICAgICB0aGlzLnVzZVJhZGlpID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBEaXN0YW5jZUlucHV0Mi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnByb3h5QS5yZWN5Y2xlKCk7XG4gICAgICAgIHRoaXMucHJveHlCLnJlY3ljbGUoKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1BLnNldElkZW50aXR5KCk7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtQi5zZXRJZGVudGl0eSgpO1xuICAgICAgICB0aGlzLnVzZVJhZGlpID0gZmFsc2U7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIERpc3RhbmNlSW5wdXQyO1xuICAgIH0oKVxuICApO1xuICB2YXIgRGlzdGFuY2VPdXRwdXQgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gRGlzdGFuY2VPdXRwdXQyKCkge1xuICAgICAgICB0aGlzLnBvaW50QSA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMucG9pbnRCID0gdmVjMigwLCAwKTtcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IDA7XG4gICAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDA7XG4gICAgICB9XG4gICAgICBEaXN0YW5jZU91dHB1dDIucHJvdG90eXBlLnJlY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5wb2ludEEpO1xuICAgICAgICB6ZXJvVmVjMih0aGlzLnBvaW50Qik7XG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSAwO1xuICAgICAgICB0aGlzLml0ZXJhdGlvbnMgPSAwO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBEaXN0YW5jZU91dHB1dDI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBTaW1wbGV4Q2FjaGUgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gU2ltcGxleENhY2hlMigpIHtcbiAgICAgICAgdGhpcy5tZXRyaWMgPSAwO1xuICAgICAgICB0aGlzLmluZGV4QSA9IFtdO1xuICAgICAgICB0aGlzLmluZGV4QiA9IFtdO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgIH1cbiAgICAgIFNpbXBsZXhDYWNoZTIucHJvdG90eXBlLnJlY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5tZXRyaWMgPSAwO1xuICAgICAgICB0aGlzLmluZGV4QS5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmluZGV4Qi5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgIH07XG4gICAgICByZXR1cm4gU2ltcGxleENhY2hlMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIERpc3RhbmNlID0gZnVuY3Rpb24ob3V0cHV0MiwgY2FjaGUyLCBpbnB1dDIpIHtcbiAgICArK3N0YXRzLmdqa0NhbGxzO1xuICAgIHZhciBwcm94eUEgPSBpbnB1dDIucHJveHlBO1xuICAgIHZhciBwcm94eUIgPSBpbnB1dDIucHJveHlCO1xuICAgIHZhciB4ZkEyID0gaW5wdXQyLnRyYW5zZm9ybUE7XG4gICAgdmFyIHhmQjIgPSBpbnB1dDIudHJhbnNmb3JtQjtcbiAgICBzaW1wbGV4LnJlY3ljbGUoKTtcbiAgICBzaW1wbGV4LnJlYWRDYWNoZShjYWNoZTIsIHByb3h5QSwgeGZBMiwgcHJveHlCLCB4ZkIyKTtcbiAgICB2YXIgdmVydGljZXMgPSBzaW1wbGV4Lm1fdjtcbiAgICB2YXIga19tYXhJdGVycyA9IFNldHRpbmdzSW50ZXJuYWwubWF4RGlzdGFuY2VJdGVyYXRpb25zO1xuICAgIHZhciBzYXZlQSA9IFtdO1xuICAgIHZhciBzYXZlQiA9IFtdO1xuICAgIHZhciBzYXZlQ291bnQgPSAwO1xuICAgIHZhciBpdGVyID0gMDtcbiAgICB3aGlsZSAoaXRlciA8IGtfbWF4SXRlcnMpIHtcbiAgICAgIHNhdmVDb3VudCA9IHNpbXBsZXgubV9jb3VudDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2F2ZUNvdW50OyArK2kpIHtcbiAgICAgICAgc2F2ZUFbaV0gPSB2ZXJ0aWNlc1tpXS5pbmRleEE7XG4gICAgICAgIHNhdmVCW2ldID0gdmVydGljZXNbaV0uaW5kZXhCO1xuICAgICAgfVxuICAgICAgc2ltcGxleC5zb2x2ZSgpO1xuICAgICAgaWYgKHNpbXBsZXgubV9jb3VudCA9PT0gMykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHZhciBkMiA9IHNpbXBsZXguZ2V0U2VhcmNoRGlyZWN0aW9uKCk7XG4gICAgICBpZiAobGVuZ3RoU3FyVmVjMihkMikgPCBFUFNJTE9OICogRVBTSUxPTikge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHZhciB2ZXJ0ZXggPSB2ZXJ0aWNlc1tzaW1wbGV4Lm1fY291bnRdO1xuICAgICAgdmVydGV4LmluZGV4QSA9IHByb3h5QS5nZXRTdXBwb3J0KGRlcm90VmVjMih0ZW1wJDUsIHhmQTIucSwgc2NhbGVWZWMyKHRlbXAkNSwgLTEsIGQyKSkpO1xuICAgICAgdHJhbnNmb3JtVmVjMih2ZXJ0ZXgud0EsIHhmQTIsIHByb3h5QS5nZXRWZXJ0ZXgodmVydGV4LmluZGV4QSkpO1xuICAgICAgdmVydGV4LmluZGV4QiA9IHByb3h5Qi5nZXRTdXBwb3J0KGRlcm90VmVjMih0ZW1wJDUsIHhmQjIucSwgZDIpKTtcbiAgICAgIHRyYW5zZm9ybVZlYzIodmVydGV4LndCLCB4ZkIyLCBwcm94eUIuZ2V0VmVydGV4KHZlcnRleC5pbmRleEIpKTtcbiAgICAgIHN1YlZlYzIodmVydGV4LncsIHZlcnRleC53QiwgdmVydGV4LndBKTtcbiAgICAgICsraXRlcjtcbiAgICAgICsrc3RhdHMuZ2prSXRlcnM7XG4gICAgICB2YXIgZHVwbGljYXRlID0gZmFsc2U7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhdmVDb3VudDsgKytpKSB7XG4gICAgICAgIGlmICh2ZXJ0ZXguaW5kZXhBID09PSBzYXZlQVtpXSAmJiB2ZXJ0ZXguaW5kZXhCID09PSBzYXZlQltpXSkge1xuICAgICAgICAgIGR1cGxpY2F0ZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICArK3NpbXBsZXgubV9jb3VudDtcbiAgICB9XG4gICAgc3RhdHMuZ2prTWF4SXRlcnMgPSBtYXRoX21heCQ0KHN0YXRzLmdqa01heEl0ZXJzLCBpdGVyKTtcbiAgICBzaW1wbGV4LmdldFdpdG5lc3NQb2ludHMob3V0cHV0Mi5wb2ludEEsIG91dHB1dDIucG9pbnRCKTtcbiAgICBvdXRwdXQyLmRpc3RhbmNlID0gZGlzdFZlYzIob3V0cHV0Mi5wb2ludEEsIG91dHB1dDIucG9pbnRCKTtcbiAgICBvdXRwdXQyLml0ZXJhdGlvbnMgPSBpdGVyO1xuICAgIHNpbXBsZXgud3JpdGVDYWNoZShjYWNoZTIpO1xuICAgIGlmIChpbnB1dDIudXNlUmFkaWkpIHtcbiAgICAgIHZhciByQTIgPSBwcm94eUEubV9yYWRpdXM7XG4gICAgICB2YXIgckIyID0gcHJveHlCLm1fcmFkaXVzO1xuICAgICAgaWYgKG91dHB1dDIuZGlzdGFuY2UgPiByQTIgKyByQjIgJiYgb3V0cHV0Mi5kaXN0YW5jZSA+IEVQU0lMT04pIHtcbiAgICAgICAgb3V0cHV0Mi5kaXN0YW5jZSAtPSByQTIgKyByQjI7XG4gICAgICAgIHN1YlZlYzIobm9ybWFsJDQsIG91dHB1dDIucG9pbnRCLCBvdXRwdXQyLnBvaW50QSk7XG4gICAgICAgIG5vcm1hbGl6ZVZlYzIobm9ybWFsJDQpO1xuICAgICAgICBwbHVzU2NhbGVWZWMyKG91dHB1dDIucG9pbnRBLCByQTIsIG5vcm1hbCQ0KTtcbiAgICAgICAgbWludXNTY2FsZVZlYzIob3V0cHV0Mi5wb2ludEIsIHJCMiwgbm9ybWFsJDQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHAgPSBzdWJWZWMyKHRlbXAkNSwgb3V0cHV0Mi5wb2ludEEsIG91dHB1dDIucG9pbnRCKTtcbiAgICAgICAgY29weVZlYzIob3V0cHV0Mi5wb2ludEEsIHApO1xuICAgICAgICBjb3B5VmVjMihvdXRwdXQyLnBvaW50QiwgcCk7XG4gICAgICAgIG91dHB1dDIuZGlzdGFuY2UgPSAwO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdmFyIERpc3RhbmNlUHJveHkgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gRGlzdGFuY2VQcm94eTIoKSB7XG4gICAgICAgIHRoaXMubV92ZXJ0aWNlcyA9IFtdO1xuICAgICAgICB0aGlzLm1fY291bnQgPSAwO1xuICAgICAgICB0aGlzLm1fcmFkaXVzID0gMDtcbiAgICAgIH1cbiAgICAgIERpc3RhbmNlUHJveHkyLnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubV92ZXJ0aWNlcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLm1fY291bnQgPSAwO1xuICAgICAgICB0aGlzLm1fcmFkaXVzID0gMDtcbiAgICAgIH07XG4gICAgICBEaXN0YW5jZVByb3h5Mi5wcm90b3R5cGUuZ2V0VmVydGV4Q291bnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9jb3VudDtcbiAgICAgIH07XG4gICAgICBEaXN0YW5jZVByb3h5Mi5wcm90b3R5cGUuZ2V0VmVydGV4ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV92ZXJ0aWNlc1tpbmRleF07XG4gICAgICB9O1xuICAgICAgRGlzdGFuY2VQcm94eTIucHJvdG90eXBlLmdldFN1cHBvcnQgPSBmdW5jdGlvbihkMikge1xuICAgICAgICB2YXIgYmVzdEluZGV4ID0gLTE7XG4gICAgICAgIHZhciBiZXN0VmFsdWUgPSAtSW5maW5pdHk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBkb3RWZWMyKHRoaXMubV92ZXJ0aWNlc1tpXSwgZDIpO1xuICAgICAgICAgIGlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkge1xuICAgICAgICAgICAgYmVzdEluZGV4ID0gaTtcbiAgICAgICAgICAgIGJlc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmVzdEluZGV4O1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlUHJveHkyLnByb3RvdHlwZS5nZXRTdXBwb3J0VmVydGV4ID0gZnVuY3Rpb24oZDIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV92ZXJ0aWNlc1t0aGlzLmdldFN1cHBvcnQoZDIpXTtcbiAgICAgIH07XG4gICAgICBEaXN0YW5jZVByb3h5Mi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oc2hhcGUsIGluZGV4KSB7XG4gICAgICAgIHNoYXBlLmNvbXB1dGVEaXN0YW5jZVByb3h5KHRoaXMsIGluZGV4KTtcbiAgICAgIH07XG4gICAgICBEaXN0YW5jZVByb3h5Mi5wcm90b3R5cGUuc2V0VmVydGljZXMgPSBmdW5jdGlvbih2ZXJ0aWNlcywgY291bnQsIHJhZGl1cykge1xuICAgICAgICB0aGlzLm1fdmVydGljZXMgPSB2ZXJ0aWNlcztcbiAgICAgICAgdGhpcy5tX2NvdW50ID0gY291bnQ7XG4gICAgICAgIHRoaXMubV9yYWRpdXMgPSByYWRpdXM7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIERpc3RhbmNlUHJveHkyO1xuICAgIH0oKVxuICApO1xuICB2YXIgU2ltcGxleFZlcnRleCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBTaW1wbGV4VmVydGV4MigpIHtcbiAgICAgICAgdGhpcy53QSA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMuaW5kZXhBID0gMDtcbiAgICAgICAgdGhpcy53QiA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMuaW5kZXhCID0gMDtcbiAgICAgICAgdGhpcy53ID0gdmVjMigwLCAwKTtcbiAgICAgICAgdGhpcy5hID0gMDtcbiAgICAgIH1cbiAgICAgIFNpbXBsZXhWZXJ0ZXgyLnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuaW5kZXhBID0gMDtcbiAgICAgICAgdGhpcy5pbmRleEIgPSAwO1xuICAgICAgICB6ZXJvVmVjMih0aGlzLndBKTtcbiAgICAgICAgemVyb1ZlYzIodGhpcy53Qik7XG4gICAgICAgIHplcm9WZWMyKHRoaXMudyk7XG4gICAgICAgIHRoaXMuYSA9IDA7XG4gICAgICB9O1xuICAgICAgU2ltcGxleFZlcnRleDIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHYzKSB7XG4gICAgICAgIHRoaXMuaW5kZXhBID0gdjMuaW5kZXhBO1xuICAgICAgICB0aGlzLmluZGV4QiA9IHYzLmluZGV4QjtcbiAgICAgICAgY29weVZlYzIodGhpcy53QSwgdjMud0EpO1xuICAgICAgICBjb3B5VmVjMih0aGlzLndCLCB2My53Qik7XG4gICAgICAgIGNvcHlWZWMyKHRoaXMudywgdjMudyk7XG4gICAgICAgIHRoaXMuYSA9IHYzLmE7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFNpbXBsZXhWZXJ0ZXgyO1xuICAgIH0oKVxuICApO1xuICB2YXIgc2VhcmNoRGlyZWN0aW9uX3JldXNlID0gdmVjMigwLCAwKTtcbiAgdmFyIGNsb3Nlc3RQb2ludF9yZXVzZSA9IHZlYzIoMCwgMCk7XG4gIHZhciBTaW1wbGV4ID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFNpbXBsZXgyKCkge1xuICAgICAgICB0aGlzLm1fdjEgPSBuZXcgU2ltcGxleFZlcnRleCgpO1xuICAgICAgICB0aGlzLm1fdjIgPSBuZXcgU2ltcGxleFZlcnRleCgpO1xuICAgICAgICB0aGlzLm1fdjMgPSBuZXcgU2ltcGxleFZlcnRleCgpO1xuICAgICAgICB0aGlzLm1fdiA9IFt0aGlzLm1fdjEsIHRoaXMubV92MiwgdGhpcy5tX3YzXTtcbiAgICAgIH1cbiAgICAgIFNpbXBsZXgyLnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubV92MS5yZWN5Y2xlKCk7XG4gICAgICAgIHRoaXMubV92Mi5yZWN5Y2xlKCk7XG4gICAgICAgIHRoaXMubV92My5yZWN5Y2xlKCk7XG4gICAgICAgIHRoaXMubV9jb3VudCA9IDA7XG4gICAgICB9O1xuICAgICAgU2ltcGxleDIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLm1fY291bnQgPT09IDMpIHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCIrXCIgKyB0aGlzLm1fY291bnQsXG4gICAgICAgICAgICB0aGlzLm1fdjEuYSxcbiAgICAgICAgICAgIHRoaXMubV92MS53QS54LFxuICAgICAgICAgICAgdGhpcy5tX3YxLndBLnksXG4gICAgICAgICAgICB0aGlzLm1fdjEud0IueCxcbiAgICAgICAgICAgIHRoaXMubV92MS53Qi55LFxuICAgICAgICAgICAgdGhpcy5tX3YyLmEsXG4gICAgICAgICAgICB0aGlzLm1fdjIud0EueCxcbiAgICAgICAgICAgIHRoaXMubV92Mi53QS55LFxuICAgICAgICAgICAgdGhpcy5tX3YyLndCLngsXG4gICAgICAgICAgICB0aGlzLm1fdjIud0IueSxcbiAgICAgICAgICAgIHRoaXMubV92My5hLFxuICAgICAgICAgICAgdGhpcy5tX3YzLndBLngsXG4gICAgICAgICAgICB0aGlzLm1fdjMud0EueSxcbiAgICAgICAgICAgIHRoaXMubV92My53Qi54LFxuICAgICAgICAgICAgdGhpcy5tX3YzLndCLnlcbiAgICAgICAgICBdLnRvU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5tX2NvdW50ID09PSAyKSB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiK1wiICsgdGhpcy5tX2NvdW50LFxuICAgICAgICAgICAgdGhpcy5tX3YxLmEsXG4gICAgICAgICAgICB0aGlzLm1fdjEud0EueCxcbiAgICAgICAgICAgIHRoaXMubV92MS53QS55LFxuICAgICAgICAgICAgdGhpcy5tX3YxLndCLngsXG4gICAgICAgICAgICB0aGlzLm1fdjEud0IueSxcbiAgICAgICAgICAgIHRoaXMubV92Mi5hLFxuICAgICAgICAgICAgdGhpcy5tX3YyLndBLngsXG4gICAgICAgICAgICB0aGlzLm1fdjIud0EueSxcbiAgICAgICAgICAgIHRoaXMubV92Mi53Qi54LFxuICAgICAgICAgICAgdGhpcy5tX3YyLndCLnlcbiAgICAgICAgICBdLnRvU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5tX2NvdW50ID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiK1wiICsgdGhpcy5tX2NvdW50LFxuICAgICAgICAgICAgdGhpcy5tX3YxLmEsXG4gICAgICAgICAgICB0aGlzLm1fdjEud0EueCxcbiAgICAgICAgICAgIHRoaXMubV92MS53QS55LFxuICAgICAgICAgICAgdGhpcy5tX3YxLndCLngsXG4gICAgICAgICAgICB0aGlzLm1fdjEud0IueVxuICAgICAgICAgIF0udG9TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gXCIrXCIgKyB0aGlzLm1fY291bnQ7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBTaW1wbGV4Mi5wcm90b3R5cGUucmVhZENhY2hlID0gZnVuY3Rpb24oY2FjaGUyLCBwcm94eUEsIHRyYW5zZm9ybUEsIHByb3h5QiwgdHJhbnNmb3JtQikge1xuICAgICAgICB0aGlzLm1fY291bnQgPSBjYWNoZTIuY291bnQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgICAgICB2YXIgdjMgPSB0aGlzLm1fdltpXTtcbiAgICAgICAgICB2My5pbmRleEEgPSBjYWNoZTIuaW5kZXhBW2ldO1xuICAgICAgICAgIHYzLmluZGV4QiA9IGNhY2hlMi5pbmRleEJbaV07XG4gICAgICAgICAgdmFyIHdBTG9jYWwgPSBwcm94eUEuZ2V0VmVydGV4KHYzLmluZGV4QSk7XG4gICAgICAgICAgdmFyIHdCTG9jYWwgPSBwcm94eUIuZ2V0VmVydGV4KHYzLmluZGV4Qik7XG4gICAgICAgICAgdHJhbnNmb3JtVmVjMih2My53QSwgdHJhbnNmb3JtQSwgd0FMb2NhbCk7XG4gICAgICAgICAgdHJhbnNmb3JtVmVjMih2My53QiwgdHJhbnNmb3JtQiwgd0JMb2NhbCk7XG4gICAgICAgICAgc3ViVmVjMih2My53LCB2My53QiwgdjMud0EpO1xuICAgICAgICAgIHYzLmEgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fY291bnQgPiAxKSB7XG4gICAgICAgICAgdmFyIG1ldHJpYzEgPSBjYWNoZTIubWV0cmljO1xuICAgICAgICAgIHZhciBtZXRyaWMyID0gdGhpcy5nZXRNZXRyaWMoKTtcbiAgICAgICAgICBpZiAobWV0cmljMiA8IDAuNSAqIG1ldHJpYzEgfHwgMiAqIG1ldHJpYzEgPCBtZXRyaWMyIHx8IG1ldHJpYzIgPCBFUFNJTE9OKSB7XG4gICAgICAgICAgICB0aGlzLm1fY291bnQgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2NvdW50ID09PSAwKSB7XG4gICAgICAgICAgdmFyIHYzID0gdGhpcy5tX3ZbMF07XG4gICAgICAgICAgdjMuaW5kZXhBID0gMDtcbiAgICAgICAgICB2My5pbmRleEIgPSAwO1xuICAgICAgICAgIHZhciB3QUxvY2FsID0gcHJveHlBLmdldFZlcnRleCgwKTtcbiAgICAgICAgICB2YXIgd0JMb2NhbCA9IHByb3h5Qi5nZXRWZXJ0ZXgoMCk7XG4gICAgICAgICAgdHJhbnNmb3JtVmVjMih2My53QSwgdHJhbnNmb3JtQSwgd0FMb2NhbCk7XG4gICAgICAgICAgdHJhbnNmb3JtVmVjMih2My53QiwgdHJhbnNmb3JtQiwgd0JMb2NhbCk7XG4gICAgICAgICAgc3ViVmVjMih2My53LCB2My53QiwgdjMud0EpO1xuICAgICAgICAgIHYzLmEgPSAxO1xuICAgICAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBTaW1wbGV4Mi5wcm90b3R5cGUud3JpdGVDYWNoZSA9IGZ1bmN0aW9uKGNhY2hlMikge1xuICAgICAgICBjYWNoZTIubWV0cmljID0gdGhpcy5nZXRNZXRyaWMoKTtcbiAgICAgICAgY2FjaGUyLmNvdW50ID0gdGhpcy5tX2NvdW50O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICAgICAgY2FjaGUyLmluZGV4QVtpXSA9IHRoaXMubV92W2ldLmluZGV4QTtcbiAgICAgICAgICBjYWNoZTIuaW5kZXhCW2ldID0gdGhpcy5tX3ZbaV0uaW5kZXhCO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgU2ltcGxleDIucHJvdG90eXBlLmdldFNlYXJjaERpcmVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdjEzID0gdGhpcy5tX3YxO1xuICAgICAgICB2YXIgdjIyID0gdGhpcy5tX3YyO1xuICAgICAgICBzd2l0Y2ggKHRoaXMubV9jb3VudCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBzZXRWZWMyKHNlYXJjaERpcmVjdGlvbl9yZXVzZSwgLXYxMy53LngsIC12MTMudy55KTtcbiAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgIHN1YlZlYzIoZTEyLCB2MjIudywgdjEzLncpO1xuICAgICAgICAgICAgdmFyIHNnbiA9IC1jcm9zc1ZlYzJWZWMyKGUxMiwgdjEzLncpO1xuICAgICAgICAgICAgaWYgKHNnbiA+IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNldFZlYzIoc2VhcmNoRGlyZWN0aW9uX3JldXNlLCAtZTEyLnksIGUxMi54KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZXRWZWMyKHNlYXJjaERpcmVjdGlvbl9yZXVzZSwgZTEyLnksIC1lMTIueCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gemVyb1ZlYzIoc2VhcmNoRGlyZWN0aW9uX3JldXNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFNpbXBsZXgyLnByb3RvdHlwZS5nZXRDbG9zZXN0UG9pbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHYxMyA9IHRoaXMubV92MTtcbiAgICAgICAgdmFyIHYyMiA9IHRoaXMubV92MjtcbiAgICAgICAgc3dpdGNoICh0aGlzLm1fY291bnQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gemVyb1ZlYzIoY2xvc2VzdFBvaW50X3JldXNlKTtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gY29weVZlYzIoY2xvc2VzdFBvaW50X3JldXNlLCB2MTMudyk7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGNvbWJpbmUyVmVjMihjbG9zZXN0UG9pbnRfcmV1c2UsIHYxMy5hLCB2MTMudywgdjIyLmEsIHYyMi53KTtcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gemVyb1ZlYzIoY2xvc2VzdFBvaW50X3JldXNlKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHplcm9WZWMyKGNsb3Nlc3RQb2ludF9yZXVzZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBTaW1wbGV4Mi5wcm90b3R5cGUuZ2V0V2l0bmVzc1BvaW50cyA9IGZ1bmN0aW9uKHBBMiwgcEIyKSB7XG4gICAgICAgIHZhciB2MTMgPSB0aGlzLm1fdjE7XG4gICAgICAgIHZhciB2MjIgPSB0aGlzLm1fdjI7XG4gICAgICAgIHZhciB2MyA9IHRoaXMubV92MztcbiAgICAgICAgc3dpdGNoICh0aGlzLm1fY291bnQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjb3B5VmVjMihwQTIsIHYxMy53QSk7XG4gICAgICAgICAgICBjb3B5VmVjMihwQjIsIHYxMy53Qik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjb21iaW5lMlZlYzIocEEyLCB2MTMuYSwgdjEzLndBLCB2MjIuYSwgdjIyLndBKTtcbiAgICAgICAgICAgIGNvbWJpbmUyVmVjMihwQjIsIHYxMy5hLCB2MTMud0IsIHYyMi5hLCB2MjIud0IpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY29tYmluZTNWZWMyKHBBMiwgdjEzLmEsIHYxMy53QSwgdjIyLmEsIHYyMi53QSwgdjMuYSwgdjMud0EpO1xuICAgICAgICAgICAgY29weVZlYzIocEIyLCBwQTIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBTaW1wbGV4Mi5wcm90b3R5cGUuZ2V0TWV0cmljID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGRpc3RWZWMyKHRoaXMubV92MS53LCB0aGlzLm1fdjIudyk7XG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIGNyb3NzVmVjMlZlYzIoc3ViVmVjMih0ZW1wMSwgdGhpcy5tX3YyLncsIHRoaXMubV92MS53KSwgc3ViVmVjMih0ZW1wMiwgdGhpcy5tX3YzLncsIHRoaXMubV92MS53KSk7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgU2ltcGxleDIucHJvdG90eXBlLnNvbHZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgdGhpcy5zb2x2ZTIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHRoaXMuc29sdmUzKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFNpbXBsZXgyLnByb3RvdHlwZS5zb2x2ZTIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHcxID0gdGhpcy5tX3YxLnc7XG4gICAgICAgIHZhciB3MiA9IHRoaXMubV92Mi53O1xuICAgICAgICBzdWJWZWMyKGUxMiwgdzIsIHcxKTtcbiAgICAgICAgdmFyIGQxMl8yID0gLWRvdFZlYzIodzEsIGUxMik7XG4gICAgICAgIGlmIChkMTJfMiA8PSAwKSB7XG4gICAgICAgICAgdGhpcy5tX3YxLmEgPSAxO1xuICAgICAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkMTJfMSA9IGRvdFZlYzIodzIsIGUxMik7XG4gICAgICAgIGlmIChkMTJfMSA8PSAwKSB7XG4gICAgICAgICAgdGhpcy5tX3YyLmEgPSAxO1xuICAgICAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICAgICAgdGhpcy5tX3YxLnNldCh0aGlzLm1fdjIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW52X2QxMiA9IDEgLyAoZDEyXzEgKyBkMTJfMik7XG4gICAgICAgIHRoaXMubV92MS5hID0gZDEyXzEgKiBpbnZfZDEyO1xuICAgICAgICB0aGlzLm1fdjIuYSA9IGQxMl8yICogaW52X2QxMjtcbiAgICAgICAgdGhpcy5tX2NvdW50ID0gMjtcbiAgICAgIH07XG4gICAgICBTaW1wbGV4Mi5wcm90b3R5cGUuc29sdmUzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3MSA9IHRoaXMubV92MS53O1xuICAgICAgICB2YXIgdzIgPSB0aGlzLm1fdjIudztcbiAgICAgICAgdmFyIHczID0gdGhpcy5tX3YzLnc7XG4gICAgICAgIHN1YlZlYzIoZTEyLCB3MiwgdzEpO1xuICAgICAgICB2YXIgdzFlMTIgPSBkb3RWZWMyKHcxLCBlMTIpO1xuICAgICAgICB2YXIgdzJlMTIgPSBkb3RWZWMyKHcyLCBlMTIpO1xuICAgICAgICB2YXIgZDEyXzEgPSB3MmUxMjtcbiAgICAgICAgdmFyIGQxMl8yID0gLXcxZTEyO1xuICAgICAgICBzdWJWZWMyKGUxMywgdzMsIHcxKTtcbiAgICAgICAgdmFyIHcxZTEzID0gZG90VmVjMih3MSwgZTEzKTtcbiAgICAgICAgdmFyIHczZTEzID0gZG90VmVjMih3MywgZTEzKTtcbiAgICAgICAgdmFyIGQxM18xID0gdzNlMTM7XG4gICAgICAgIHZhciBkMTNfMiA9IC13MWUxMztcbiAgICAgICAgc3ViVmVjMihlMjMsIHczLCB3Mik7XG4gICAgICAgIHZhciB3MmUyMyA9IGRvdFZlYzIodzIsIGUyMyk7XG4gICAgICAgIHZhciB3M2UyMyA9IGRvdFZlYzIodzMsIGUyMyk7XG4gICAgICAgIHZhciBkMjNfMSA9IHczZTIzO1xuICAgICAgICB2YXIgZDIzXzIgPSAtdzJlMjM7XG4gICAgICAgIHZhciBuMTIzID0gY3Jvc3NWZWMyVmVjMihlMTIsIGUxMyk7XG4gICAgICAgIHZhciBkMTIzXzEgPSBuMTIzICogY3Jvc3NWZWMyVmVjMih3MiwgdzMpO1xuICAgICAgICB2YXIgZDEyM18yID0gbjEyMyAqIGNyb3NzVmVjMlZlYzIodzMsIHcxKTtcbiAgICAgICAgdmFyIGQxMjNfMyA9IG4xMjMgKiBjcm9zc1ZlYzJWZWMyKHcxLCB3Mik7XG4gICAgICAgIGlmIChkMTJfMiA8PSAwICYmIGQxM18yIDw9IDApIHtcbiAgICAgICAgICB0aGlzLm1fdjEuYSA9IDE7XG4gICAgICAgICAgdGhpcy5tX2NvdW50ID0gMTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQxMl8xID4gMCAmJiBkMTJfMiA+IDAgJiYgZDEyM18zIDw9IDApIHtcbiAgICAgICAgICB2YXIgaW52X2QxMiA9IDEgLyAoZDEyXzEgKyBkMTJfMik7XG4gICAgICAgICAgdGhpcy5tX3YxLmEgPSBkMTJfMSAqIGludl9kMTI7XG4gICAgICAgICAgdGhpcy5tX3YyLmEgPSBkMTJfMiAqIGludl9kMTI7XG4gICAgICAgICAgdGhpcy5tX2NvdW50ID0gMjtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQxM18xID4gMCAmJiBkMTNfMiA+IDAgJiYgZDEyM18yIDw9IDApIHtcbiAgICAgICAgICB2YXIgaW52X2QxMyA9IDEgLyAoZDEzXzEgKyBkMTNfMik7XG4gICAgICAgICAgdGhpcy5tX3YxLmEgPSBkMTNfMSAqIGludl9kMTM7XG4gICAgICAgICAgdGhpcy5tX3YzLmEgPSBkMTNfMiAqIGludl9kMTM7XG4gICAgICAgICAgdGhpcy5tX2NvdW50ID0gMjtcbiAgICAgICAgICB0aGlzLm1fdjIuc2V0KHRoaXMubV92Myk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkMTJfMSA8PSAwICYmIGQyM18yIDw9IDApIHtcbiAgICAgICAgICB0aGlzLm1fdjIuYSA9IDE7XG4gICAgICAgICAgdGhpcy5tX2NvdW50ID0gMTtcbiAgICAgICAgICB0aGlzLm1fdjEuc2V0KHRoaXMubV92Mik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkMTNfMSA8PSAwICYmIGQyM18xIDw9IDApIHtcbiAgICAgICAgICB0aGlzLm1fdjMuYSA9IDE7XG4gICAgICAgICAgdGhpcy5tX2NvdW50ID0gMTtcbiAgICAgICAgICB0aGlzLm1fdjEuc2V0KHRoaXMubV92Myk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkMjNfMSA+IDAgJiYgZDIzXzIgPiAwICYmIGQxMjNfMSA8PSAwKSB7XG4gICAgICAgICAgdmFyIGludl9kMjMgPSAxIC8gKGQyM18xICsgZDIzXzIpO1xuICAgICAgICAgIHRoaXMubV92Mi5hID0gZDIzXzEgKiBpbnZfZDIzO1xuICAgICAgICAgIHRoaXMubV92My5hID0gZDIzXzIgKiBpbnZfZDIzO1xuICAgICAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICAgICAgdGhpcy5tX3YxLnNldCh0aGlzLm1fdjMpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW52X2QxMjMgPSAxIC8gKGQxMjNfMSArIGQxMjNfMiArIGQxMjNfMyk7XG4gICAgICAgIHRoaXMubV92MS5hID0gZDEyM18xICogaW52X2QxMjM7XG4gICAgICAgIHRoaXMubV92Mi5hID0gZDEyM18yICogaW52X2QxMjM7XG4gICAgICAgIHRoaXMubV92My5hID0gZDEyM18zICogaW52X2QxMjM7XG4gICAgICAgIHRoaXMubV9jb3VudCA9IDM7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFNpbXBsZXgyO1xuICAgIH0oKVxuICApO1xuICB2YXIgc2ltcGxleCA9IG5ldyBTaW1wbGV4KCk7XG4gIHZhciBpbnB1dCQxID0gbmV3IERpc3RhbmNlSW5wdXQoKTtcbiAgdmFyIGNhY2hlJDEgPSBuZXcgU2ltcGxleENhY2hlKCk7XG4gIHZhciBvdXRwdXQkMSA9IG5ldyBEaXN0YW5jZU91dHB1dCgpO1xuICB2YXIgdGVzdE92ZXJsYXAgPSBmdW5jdGlvbihzaGFwZUEsIGluZGV4QSwgc2hhcGVCLCBpbmRleEIsIHhmQTIsIHhmQjIpIHtcbiAgICBpbnB1dCQxLnJlY3ljbGUoKTtcbiAgICBpbnB1dCQxLnByb3h5QS5zZXQoc2hhcGVBLCBpbmRleEEpO1xuICAgIGlucHV0JDEucHJveHlCLnNldChzaGFwZUIsIGluZGV4Qik7XG4gICAgY29weVRyYW5zZm9ybShpbnB1dCQxLnRyYW5zZm9ybUEsIHhmQTIpO1xuICAgIGNvcHlUcmFuc2Zvcm0oaW5wdXQkMS50cmFuc2Zvcm1CLCB4ZkIyKTtcbiAgICBpbnB1dCQxLnVzZVJhZGlpID0gdHJ1ZTtcbiAgICBvdXRwdXQkMS5yZWN5Y2xlKCk7XG4gICAgY2FjaGUkMS5yZWN5Y2xlKCk7XG4gICAgRGlzdGFuY2Uob3V0cHV0JDEsIGNhY2hlJDEsIGlucHV0JDEpO1xuICAgIHJldHVybiBvdXRwdXQkMS5kaXN0YW5jZSA8IDEwICogRVBTSUxPTjtcbiAgfTtcbiAgRGlzdGFuY2UudGVzdE92ZXJsYXAgPSB0ZXN0T3ZlcmxhcDtcbiAgRGlzdGFuY2UuSW5wdXQgPSBEaXN0YW5jZUlucHV0O1xuICBEaXN0YW5jZS5PdXRwdXQgPSBEaXN0YW5jZU91dHB1dDtcbiAgRGlzdGFuY2UuUHJveHkgPSBEaXN0YW5jZVByb3h5O1xuICBEaXN0YW5jZS5DYWNoZSA9IFNpbXBsZXhDYWNoZTtcbiAgdmFyIFNoYXBlQ2FzdElucHV0ID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFNoYXBlQ2FzdElucHV0MigpIHtcbiAgICAgICAgdGhpcy5wcm94eUEgPSBuZXcgRGlzdGFuY2VQcm94eSgpO1xuICAgICAgICB0aGlzLnByb3h5QiA9IG5ldyBEaXN0YW5jZVByb3h5KCk7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtQSA9IFRyYW5zZm9ybS5pZGVudGl0eSgpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybUIgPSBUcmFuc2Zvcm0uaWRlbnRpdHkoKTtcbiAgICAgICAgdGhpcy50cmFuc2xhdGlvbkIgPSBWZWMyLnplcm8oKTtcbiAgICAgIH1cbiAgICAgIFNoYXBlQ2FzdElucHV0Mi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnByb3h5QS5yZWN5Y2xlKCk7XG4gICAgICAgIHRoaXMucHJveHlCLnJlY3ljbGUoKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1BLnNldElkZW50aXR5KCk7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtQi5zZXRJZGVudGl0eSgpO1xuICAgICAgICB6ZXJvVmVjMih0aGlzLnRyYW5zbGF0aW9uQik7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFNoYXBlQ2FzdElucHV0MjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIFNoYXBlQ2FzdE91dHB1dCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gU2hhcGVDYXN0T3V0cHV0MigpIHtcbiAgICAgICAgdGhpcy5wb2ludCA9IFZlYzIuemVybygpO1xuICAgICAgICB0aGlzLm5vcm1hbCA9IFZlYzIuemVybygpO1xuICAgICAgICB0aGlzLmxhbWJkYSA9IDE7XG4gICAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gU2hhcGVDYXN0T3V0cHV0MjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIFNoYXBlQ2FzdCA9IGZ1bmN0aW9uKG91dHB1dDIsIGlucHV0Mikge1xuICAgIG91dHB1dDIuaXRlcmF0aW9ucyA9IDA7XG4gICAgb3V0cHV0Mi5sYW1iZGEgPSAxO1xuICAgIG91dHB1dDIubm9ybWFsLnNldFplcm8oKTtcbiAgICBvdXRwdXQyLnBvaW50LnNldFplcm8oKTtcbiAgICB2YXIgcHJveHlBID0gaW5wdXQyLnByb3h5QTtcbiAgICB2YXIgcHJveHlCID0gaW5wdXQyLnByb3h5QjtcbiAgICB2YXIgcmFkaXVzQSA9IG1hdGhfbWF4JDQocHJveHlBLm1fcmFkaXVzLCBTZXR0aW5nc0ludGVybmFsLnBvbHlnb25SYWRpdXMpO1xuICAgIHZhciByYWRpdXNCID0gbWF0aF9tYXgkNChwcm94eUIubV9yYWRpdXMsIFNldHRpbmdzSW50ZXJuYWwucG9seWdvblJhZGl1cyk7XG4gICAgdmFyIHJhZGl1cyA9IHJhZGl1c0EgKyByYWRpdXNCO1xuICAgIHZhciB4ZkEyID0gaW5wdXQyLnRyYW5zZm9ybUE7XG4gICAgdmFyIHhmQjIgPSBpbnB1dDIudHJhbnNmb3JtQjtcbiAgICB2YXIgciA9IGlucHV0Mi50cmFuc2xhdGlvbkI7XG4gICAgdmFyIG4yID0gVmVjMi56ZXJvKCk7XG4gICAgdmFyIGxhbWJkYSA9IDA7XG4gICAgdmFyIHNpbXBsZXgyID0gbmV3IFNpbXBsZXgoKTtcbiAgICBzaW1wbGV4Mi5tX2NvdW50ID0gMDtcbiAgICB2YXIgdmVydGljZXMgPSBzaW1wbGV4Mi5tX3Y7XG4gICAgdmFyIGluZGV4QSA9IHByb3h5QS5nZXRTdXBwb3J0KFJvdC5tdWxUVmVjMih4ZkEyLnEsIFZlYzIubmVnKHIpKSk7XG4gICAgdmFyIHdBID0gVHJhbnNmb3JtLm11bFZlYzIoeGZBMiwgcHJveHlBLmdldFZlcnRleChpbmRleEEpKTtcbiAgICB2YXIgaW5kZXhCID0gcHJveHlCLmdldFN1cHBvcnQoUm90Lm11bFRWZWMyKHhmQjIucSwgcikpO1xuICAgIHZhciB3QiA9IFRyYW5zZm9ybS5tdWxWZWMyKHhmQjIsIHByb3h5Qi5nZXRWZXJ0ZXgoaW5kZXhCKSk7XG4gICAgdmFyIHYzID0gVmVjMi5zdWIod0EsIHdCKTtcbiAgICB2YXIgc2lnbWEgPSBtYXRoX21heCQ0KFNldHRpbmdzSW50ZXJuYWwucG9seWdvblJhZGl1cywgcmFkaXVzIC0gU2V0dGluZ3NJbnRlcm5hbC5wb2x5Z29uUmFkaXVzKTtcbiAgICB2YXIgdG9sZXJhbmNlID0gMC41ICogU2V0dGluZ3NJbnRlcm5hbC5saW5lYXJTbG9wO1xuICAgIHZhciBrX21heEl0ZXJzID0gMjA7XG4gICAgdmFyIGl0ZXIgPSAwO1xuICAgIHdoaWxlIChpdGVyIDwga19tYXhJdGVycyAmJiB2My5sZW5ndGgoKSAtIHNpZ21hID4gdG9sZXJhbmNlKSB7XG4gICAgICBvdXRwdXQyLml0ZXJhdGlvbnMgKz0gMTtcbiAgICAgIGluZGV4QSA9IHByb3h5QS5nZXRTdXBwb3J0KFJvdC5tdWxUVmVjMih4ZkEyLnEsIFZlYzIubmVnKHYzKSkpO1xuICAgICAgd0EgPSBUcmFuc2Zvcm0ubXVsVmVjMih4ZkEyLCBwcm94eUEuZ2V0VmVydGV4KGluZGV4QSkpO1xuICAgICAgaW5kZXhCID0gcHJveHlCLmdldFN1cHBvcnQoUm90Lm11bFRWZWMyKHhmQjIucSwgdjMpKTtcbiAgICAgIHdCID0gVHJhbnNmb3JtLm11bFZlYzIoeGZCMiwgcHJveHlCLmdldFZlcnRleChpbmRleEIpKTtcbiAgICAgIHZhciBwID0gVmVjMi5zdWIod0EsIHdCKTtcbiAgICAgIHYzLm5vcm1hbGl6ZSgpO1xuICAgICAgdmFyIHZwID0gVmVjMi5kb3QodjMsIHApO1xuICAgICAgdmFyIHZyID0gVmVjMi5kb3QodjMsIHIpO1xuICAgICAgaWYgKHZwIC0gc2lnbWEgPiBsYW1iZGEgKiB2cikge1xuICAgICAgICBpZiAodnIgPD0gMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsYW1iZGEgPSAodnAgLSBzaWdtYSkgLyB2cjtcbiAgICAgICAgaWYgKGxhbWJkYSA+IDEpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbjIuc2V0TXVsKC0xLCB2Myk7XG4gICAgICAgIHNpbXBsZXgyLm1fY291bnQgPSAwO1xuICAgICAgfVxuICAgICAgdmFyIHZlcnRleCA9IHZlcnRpY2VzW3NpbXBsZXgyLm1fY291bnRdO1xuICAgICAgdmVydGV4LmluZGV4QSA9IGluZGV4QjtcbiAgICAgIHZlcnRleC53QSA9IFZlYzIuY29tYmluZSgxLCB3QiwgbGFtYmRhLCByKTtcbiAgICAgIHZlcnRleC5pbmRleEIgPSBpbmRleEE7XG4gICAgICB2ZXJ0ZXgud0IgPSB3QTtcbiAgICAgIHZlcnRleC53ID0gVmVjMi5zdWIodmVydGV4LndCLCB2ZXJ0ZXgud0EpO1xuICAgICAgdmVydGV4LmEgPSAxO1xuICAgICAgc2ltcGxleDIubV9jb3VudCArPSAxO1xuICAgICAgc3dpdGNoIChzaW1wbGV4Mi5tX2NvdW50KSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNpbXBsZXgyLnNvbHZlMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2ltcGxleDIuc29sdmUzKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc2ltcGxleDIubV9jb3VudCA9PSAzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHYzLnNldFZlYzIoc2ltcGxleDIuZ2V0Q2xvc2VzdFBvaW50KCkpO1xuICAgICAgKytpdGVyO1xuICAgIH1cbiAgICBpZiAoaXRlciA9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBwb2ludEEyID0gVmVjMi56ZXJvKCk7XG4gICAgdmFyIHBvaW50QjIgPSBWZWMyLnplcm8oKTtcbiAgICBzaW1wbGV4Mi5nZXRXaXRuZXNzUG9pbnRzKHBvaW50QjIsIHBvaW50QTIpO1xuICAgIGlmICh2My5sZW5ndGhTcXVhcmVkKCkgPiAwKSB7XG4gICAgICBuMi5zZXRNdWwoLTEsIHYzKTtcbiAgICAgIG4yLm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgICBvdXRwdXQyLnBvaW50ID0gVmVjMi5jb21iaW5lKDEsIHBvaW50QTIsIHJhZGl1c0EsIG4yKTtcbiAgICBvdXRwdXQyLm5vcm1hbCA9IG4yO1xuICAgIG91dHB1dDIubGFtYmRhID0gbGFtYmRhO1xuICAgIG91dHB1dDIuaXRlcmF0aW9ucyA9IGl0ZXI7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIHZhciBtYXRoX2FicyQ3ID0gTWF0aC5hYnM7XG4gIHZhciBtYXRoX21heCQzID0gTWF0aC5tYXg7XG4gIHZhciBUT0lJbnB1dCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBUT0lJbnB1dDIoKSB7XG4gICAgICAgIHRoaXMucHJveHlBID0gbmV3IERpc3RhbmNlUHJveHkoKTtcbiAgICAgICAgdGhpcy5wcm94eUIgPSBuZXcgRGlzdGFuY2VQcm94eSgpO1xuICAgICAgICB0aGlzLnN3ZWVwQSA9IG5ldyBTd2VlcCgpO1xuICAgICAgICB0aGlzLnN3ZWVwQiA9IG5ldyBTd2VlcCgpO1xuICAgICAgfVxuICAgICAgVE9JSW5wdXQyLnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucHJveHlBLnJlY3ljbGUoKTtcbiAgICAgICAgdGhpcy5wcm94eUIucmVjeWNsZSgpO1xuICAgICAgICB0aGlzLnN3ZWVwQS5yZWN5Y2xlKCk7XG4gICAgICAgIHRoaXMuc3dlZXBCLnJlY3ljbGUoKTtcbiAgICAgICAgdGhpcy50TWF4ID0gLTE7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFRPSUlucHV0MjtcbiAgICB9KClcbiAgKTtcbiAgZXhwb3J0czIuVE9JT3V0cHV0U3RhdGUgPSB2b2lkIDA7XG4gIChmdW5jdGlvbihUT0lPdXRwdXRTdGF0ZTIpIHtcbiAgICBUT0lPdXRwdXRTdGF0ZTJbVE9JT3V0cHV0U3RhdGUyW1wiZV91bnNldFwiXSA9IC0xXSA9IFwiZV91bnNldFwiO1xuICAgIFRPSU91dHB1dFN0YXRlMltUT0lPdXRwdXRTdGF0ZTJbXCJlX3Vua25vd25cIl0gPSAwXSA9IFwiZV91bmtub3duXCI7XG4gICAgVE9JT3V0cHV0U3RhdGUyW1RPSU91dHB1dFN0YXRlMltcImVfZmFpbGVkXCJdID0gMV0gPSBcImVfZmFpbGVkXCI7XG4gICAgVE9JT3V0cHV0U3RhdGUyW1RPSU91dHB1dFN0YXRlMltcImVfb3ZlcmxhcHBlZFwiXSA9IDJdID0gXCJlX292ZXJsYXBwZWRcIjtcbiAgICBUT0lPdXRwdXRTdGF0ZTJbVE9JT3V0cHV0U3RhdGUyW1wiZV90b3VjaGluZ1wiXSA9IDNdID0gXCJlX3RvdWNoaW5nXCI7XG4gICAgVE9JT3V0cHV0U3RhdGUyW1RPSU91dHB1dFN0YXRlMltcImVfc2VwYXJhdGVkXCJdID0gNF0gPSBcImVfc2VwYXJhdGVkXCI7XG4gIH0pKGV4cG9ydHMyLlRPSU91dHB1dFN0YXRlIHx8IChleHBvcnRzMi5UT0lPdXRwdXRTdGF0ZSA9IHt9KSk7XG4gIHZhciBUT0lPdXRwdXQgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gVE9JT3V0cHV0MigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGV4cG9ydHMyLlRPSU91dHB1dFN0YXRlLmVfdW5zZXQ7XG4gICAgICAgIHRoaXMudCA9IC0xO1xuICAgICAgfVxuICAgICAgVE9JT3V0cHV0Mi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gZXhwb3J0czIuVE9JT3V0cHV0U3RhdGUuZV91bnNldDtcbiAgICAgICAgdGhpcy50ID0gLTE7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFRPSU91dHB1dDI7XG4gICAgfSgpXG4gICk7XG4gIHN0YXRzLnRvaVRpbWUgPSAwO1xuICBzdGF0cy50b2lNYXhUaW1lID0gMDtcbiAgc3RhdHMudG9pQ2FsbHMgPSAwO1xuICBzdGF0cy50b2lJdGVycyA9IDA7XG4gIHN0YXRzLnRvaU1heEl0ZXJzID0gMDtcbiAgc3RhdHMudG9pUm9vdEl0ZXJzID0gMDtcbiAgc3RhdHMudG9pTWF4Um9vdEl0ZXJzID0gMDtcbiAgdmFyIGRpc3RhbmNlSW5wdXQgPSBuZXcgRGlzdGFuY2VJbnB1dCgpO1xuICB2YXIgZGlzdGFuY2VPdXRwdXQgPSBuZXcgRGlzdGFuY2VPdXRwdXQoKTtcbiAgdmFyIGNhY2hlID0gbmV3IFNpbXBsZXhDYWNoZSgpO1xuICB2YXIgeGZBJDEgPSB0cmFuc2Zvcm0oMCwgMCwgMCk7XG4gIHZhciB4ZkIkMSA9IHRyYW5zZm9ybSgwLCAwLCAwKTtcbiAgdmFyIHRlbXAkNCA9IHZlYzIoMCwgMCk7XG4gIHZhciBwb2ludEEkMiA9IHZlYzIoMCwgMCk7XG4gIHZhciBwb2ludEIkMiA9IHZlYzIoMCwgMCk7XG4gIHZhciBub3JtYWwkMyA9IHZlYzIoMCwgMCk7XG4gIHZhciBheGlzQSA9IHZlYzIoMCwgMCk7XG4gIHZhciBheGlzQiA9IHZlYzIoMCwgMCk7XG4gIHZhciBsb2NhbFBvaW50QSA9IHZlYzIoMCwgMCk7XG4gIHZhciBsb2NhbFBvaW50QiA9IHZlYzIoMCwgMCk7XG4gIHZhciBUaW1lT2ZJbXBhY3QgPSBmdW5jdGlvbihvdXRwdXQyLCBpbnB1dDIpIHtcbiAgICB2YXIgdGltZXIgPSBUaW1lci5ub3coKTtcbiAgICArK3N0YXRzLnRvaUNhbGxzO1xuICAgIG91dHB1dDIuc3RhdGUgPSBleHBvcnRzMi5UT0lPdXRwdXRTdGF0ZS5lX3Vua25vd247XG4gICAgb3V0cHV0Mi50ID0gaW5wdXQyLnRNYXg7XG4gICAgdmFyIHByb3h5QSA9IGlucHV0Mi5wcm94eUE7XG4gICAgdmFyIHByb3h5QiA9IGlucHV0Mi5wcm94eUI7XG4gICAgdmFyIHN3ZWVwQSA9IGlucHV0Mi5zd2VlcEE7XG4gICAgdmFyIHN3ZWVwQiA9IGlucHV0Mi5zd2VlcEI7XG4gICAgc3dlZXBBLm5vcm1hbGl6ZSgpO1xuICAgIHN3ZWVwQi5ub3JtYWxpemUoKTtcbiAgICB2YXIgdE1heCA9IGlucHV0Mi50TWF4O1xuICAgIHZhciB0b3RhbFJhZGl1cyA9IHByb3h5QS5tX3JhZGl1cyArIHByb3h5Qi5tX3JhZGl1cztcbiAgICB2YXIgdGFyZ2V0ID0gbWF0aF9tYXgkMyhTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3AsIHRvdGFsUmFkaXVzIC0gMyAqIFNldHRpbmdzSW50ZXJuYWwubGluZWFyU2xvcCk7XG4gICAgdmFyIHRvbGVyYW5jZSA9IDAuMjUgKiBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3A7XG4gICAgdmFyIHQxID0gMDtcbiAgICB2YXIga19tYXhJdGVyYXRpb25zID0gU2V0dGluZ3NJbnRlcm5hbC5tYXhUT0lJdGVyYXRpb25zO1xuICAgIHZhciBpdGVyID0gMDtcbiAgICBjYWNoZS5yZWN5Y2xlKCk7XG4gICAgZGlzdGFuY2VJbnB1dC5wcm94eUEuc2V0VmVydGljZXMocHJveHlBLm1fdmVydGljZXMsIHByb3h5QS5tX2NvdW50LCBwcm94eUEubV9yYWRpdXMpO1xuICAgIGRpc3RhbmNlSW5wdXQucHJveHlCLnNldFZlcnRpY2VzKHByb3h5Qi5tX3ZlcnRpY2VzLCBwcm94eUIubV9jb3VudCwgcHJveHlCLm1fcmFkaXVzKTtcbiAgICBkaXN0YW5jZUlucHV0LnVzZVJhZGlpID0gZmFsc2U7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIHN3ZWVwQS5nZXRUcmFuc2Zvcm0oeGZBJDEsIHQxKTtcbiAgICAgIHN3ZWVwQi5nZXRUcmFuc2Zvcm0oeGZCJDEsIHQxKTtcbiAgICAgIGNvcHlUcmFuc2Zvcm0oZGlzdGFuY2VJbnB1dC50cmFuc2Zvcm1BLCB4ZkEkMSk7XG4gICAgICBjb3B5VHJhbnNmb3JtKGRpc3RhbmNlSW5wdXQudHJhbnNmb3JtQiwgeGZCJDEpO1xuICAgICAgRGlzdGFuY2UoZGlzdGFuY2VPdXRwdXQsIGNhY2hlLCBkaXN0YW5jZUlucHV0KTtcbiAgICAgIGlmIChkaXN0YW5jZU91dHB1dC5kaXN0YW5jZSA8PSAwKSB7XG4gICAgICAgIG91dHB1dDIuc3RhdGUgPSBleHBvcnRzMi5UT0lPdXRwdXRTdGF0ZS5lX292ZXJsYXBwZWQ7XG4gICAgICAgIG91dHB1dDIudCA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGRpc3RhbmNlT3V0cHV0LmRpc3RhbmNlIDwgdGFyZ2V0ICsgdG9sZXJhbmNlKSB7XG4gICAgICAgIG91dHB1dDIuc3RhdGUgPSBleHBvcnRzMi5UT0lPdXRwdXRTdGF0ZS5lX3RvdWNoaW5nO1xuICAgICAgICBvdXRwdXQyLnQgPSB0MTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzZXBhcmF0aW9uRnVuY3Rpb24uaW5pdGlhbGl6ZShjYWNoZSwgcHJveHlBLCBzd2VlcEEsIHByb3h5Qiwgc3dlZXBCLCB0MSk7XG4gICAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgICAgdmFyIHQyID0gdE1heDtcbiAgICAgIHZhciBwdXNoQmFja0l0ZXIgPSAwO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIHMyID0gc2VwYXJhdGlvbkZ1bmN0aW9uLmZpbmRNaW5TZXBhcmF0aW9uKHQyKTtcbiAgICAgICAgaWYgKHMyID4gdGFyZ2V0ICsgdG9sZXJhbmNlKSB7XG4gICAgICAgICAgb3V0cHV0Mi5zdGF0ZSA9IGV4cG9ydHMyLlRPSU91dHB1dFN0YXRlLmVfc2VwYXJhdGVkO1xuICAgICAgICAgIG91dHB1dDIudCA9IHRNYXg7XG4gICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMyID4gdGFyZ2V0IC0gdG9sZXJhbmNlKSB7XG4gICAgICAgICAgdDEgPSB0MjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2YXIgczEgPSBzZXBhcmF0aW9uRnVuY3Rpb24uZXZhbHVhdGUodDEpO1xuICAgICAgICBpZiAoczEgPCB0YXJnZXQgLSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICBvdXRwdXQyLnN0YXRlID0gZXhwb3J0czIuVE9JT3V0cHV0U3RhdGUuZV9mYWlsZWQ7XG4gICAgICAgICAgb3V0cHV0Mi50ID0gdDE7XG4gICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMxIDw9IHRhcmdldCArIHRvbGVyYW5jZSkge1xuICAgICAgICAgIG91dHB1dDIuc3RhdGUgPSBleHBvcnRzMi5UT0lPdXRwdXRTdGF0ZS5lX3RvdWNoaW5nO1xuICAgICAgICAgIG91dHB1dDIudCA9IHQxO1xuICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb290SXRlckNvdW50ID0gMDtcbiAgICAgICAgdmFyIGExID0gdDE7XG4gICAgICAgIHZhciBhMiA9IHQyO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIHZhciB0ID0gdm9pZCAwO1xuICAgICAgICAgIGlmIChyb290SXRlckNvdW50ICYgMSkge1xuICAgICAgICAgICAgdCA9IGExICsgKHRhcmdldCAtIHMxKSAqIChhMiAtIGExKSAvIChzMiAtIHMxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdCA9IDAuNSAqIChhMSArIGEyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgKytyb290SXRlckNvdW50O1xuICAgICAgICAgICsrc3RhdHMudG9pUm9vdEl0ZXJzO1xuICAgICAgICAgIHZhciBzMyA9IHNlcGFyYXRpb25GdW5jdGlvbi5ldmFsdWF0ZSh0KTtcbiAgICAgICAgICBpZiAobWF0aF9hYnMkNyhzMyAtIHRhcmdldCkgPCB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgIHQyID0gdDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoczMgPiB0YXJnZXQpIHtcbiAgICAgICAgICAgIGExID0gdDtcbiAgICAgICAgICAgIHMxID0gczM7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGEyID0gdDtcbiAgICAgICAgICAgIHMyID0gczM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyb290SXRlckNvdW50ID09PSA1MCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRzLnRvaU1heFJvb3RJdGVycyA9IG1hdGhfbWF4JDMoc3RhdHMudG9pTWF4Um9vdEl0ZXJzLCByb290SXRlckNvdW50KTtcbiAgICAgICAgKytwdXNoQmFja0l0ZXI7XG4gICAgICAgIGlmIChwdXNoQmFja0l0ZXIgPT09IFNldHRpbmdzSW50ZXJuYWwubWF4UG9seWdvblZlcnRpY2VzKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICsraXRlcjtcbiAgICAgICsrc3RhdHMudG9pSXRlcnM7XG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChpdGVyID09PSBrX21heEl0ZXJhdGlvbnMpIHtcbiAgICAgICAgb3V0cHV0Mi5zdGF0ZSA9IGV4cG9ydHMyLlRPSU91dHB1dFN0YXRlLmVfZmFpbGVkO1xuICAgICAgICBvdXRwdXQyLnQgPSB0MTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHN0YXRzLnRvaU1heEl0ZXJzID0gbWF0aF9tYXgkMyhzdGF0cy50b2lNYXhJdGVycywgaXRlcik7XG4gICAgdmFyIHRpbWUgPSBUaW1lci5kaWZmKHRpbWVyKTtcbiAgICBzdGF0cy50b2lNYXhUaW1lID0gbWF0aF9tYXgkMyhzdGF0cy50b2lNYXhUaW1lLCB0aW1lKTtcbiAgICBzdGF0cy50b2lUaW1lICs9IHRpbWU7XG4gICAgc2VwYXJhdGlvbkZ1bmN0aW9uLnJlY3ljbGUoKTtcbiAgfTtcbiAgdmFyIFNlcGFyYXRpb25GdW5jdGlvblR5cGU7XG4gIChmdW5jdGlvbihTZXBhcmF0aW9uRnVuY3Rpb25UeXBlMikge1xuICAgIFNlcGFyYXRpb25GdW5jdGlvblR5cGUyW1NlcGFyYXRpb25GdW5jdGlvblR5cGUyW1wiZV91bnNldFwiXSA9IC0xXSA9IFwiZV91bnNldFwiO1xuICAgIFNlcGFyYXRpb25GdW5jdGlvblR5cGUyW1NlcGFyYXRpb25GdW5jdGlvblR5cGUyW1wiZV9wb2ludHNcIl0gPSAxXSA9IFwiZV9wb2ludHNcIjtcbiAgICBTZXBhcmF0aW9uRnVuY3Rpb25UeXBlMltTZXBhcmF0aW9uRnVuY3Rpb25UeXBlMltcImVfZmFjZUFcIl0gPSAyXSA9IFwiZV9mYWNlQVwiO1xuICAgIFNlcGFyYXRpb25GdW5jdGlvblR5cGUyW1NlcGFyYXRpb25GdW5jdGlvblR5cGUyW1wiZV9mYWNlQlwiXSA9IDNdID0gXCJlX2ZhY2VCXCI7XG4gIH0pKFNlcGFyYXRpb25GdW5jdGlvblR5cGUgfHwgKFNlcGFyYXRpb25GdW5jdGlvblR5cGUgPSB7fSkpO1xuICB2YXIgU2VwYXJhdGlvbkZ1bmN0aW9uID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFNlcGFyYXRpb25GdW5jdGlvbjIoKSB7XG4gICAgICAgIHRoaXMubV9wcm94eUEgPSBudWxsO1xuICAgICAgICB0aGlzLm1fcHJveHlCID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX3N3ZWVwQSA9IG51bGw7XG4gICAgICAgIHRoaXMubV9zd2VlcEIgPSBudWxsO1xuICAgICAgICB0aGlzLm1fdHlwZSA9IFNlcGFyYXRpb25GdW5jdGlvblR5cGUuZV91bnNldDtcbiAgICAgICAgdGhpcy5tX2xvY2FsUG9pbnQgPSB2ZWMyKDAsIDApO1xuICAgICAgICB0aGlzLm1fYXhpcyA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMuaW5kZXhBID0gLTE7XG4gICAgICAgIHRoaXMuaW5kZXhCID0gLTE7XG4gICAgICB9XG4gICAgICBTZXBhcmF0aW9uRnVuY3Rpb24yLnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubV9wcm94eUEgPSBudWxsO1xuICAgICAgICB0aGlzLm1fcHJveHlCID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX3N3ZWVwQSA9IG51bGw7XG4gICAgICAgIHRoaXMubV9zd2VlcEIgPSBudWxsO1xuICAgICAgICB0aGlzLm1fdHlwZSA9IFNlcGFyYXRpb25GdW5jdGlvblR5cGUuZV91bnNldDtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5tX2xvY2FsUG9pbnQpO1xuICAgICAgICB6ZXJvVmVjMih0aGlzLm1fYXhpcyk7XG4gICAgICAgIHRoaXMuaW5kZXhBID0gLTE7XG4gICAgICAgIHRoaXMuaW5kZXhCID0gLTE7XG4gICAgICB9O1xuICAgICAgU2VwYXJhdGlvbkZ1bmN0aW9uMi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGNhY2hlMiwgcHJveHlBLCBzd2VlcEEsIHByb3h5Qiwgc3dlZXBCLCB0MSkge1xuICAgICAgICB2YXIgY291bnQgPSBjYWNoZTIuY291bnQ7XG4gICAgICAgIHRoaXMubV9wcm94eUEgPSBwcm94eUE7XG4gICAgICAgIHRoaXMubV9wcm94eUIgPSBwcm94eUI7XG4gICAgICAgIHRoaXMubV9zd2VlcEEgPSBzd2VlcEE7XG4gICAgICAgIHRoaXMubV9zd2VlcEIgPSBzd2VlcEI7XG4gICAgICAgIHRoaXMubV9zd2VlcEEuZ2V0VHJhbnNmb3JtKHhmQSQxLCB0MSk7XG4gICAgICAgIHRoaXMubV9zd2VlcEIuZ2V0VHJhbnNmb3JtKHhmQiQxLCB0MSk7XG4gICAgICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgICAgIHRoaXMubV90eXBlID0gU2VwYXJhdGlvbkZ1bmN0aW9uVHlwZS5lX3BvaW50cztcbiAgICAgICAgICB2YXIgbG9jYWxQb2ludEFfMSA9IHRoaXMubV9wcm94eUEuZ2V0VmVydGV4KGNhY2hlMi5pbmRleEFbMF0pO1xuICAgICAgICAgIHZhciBsb2NhbFBvaW50Ql8xID0gdGhpcy5tX3Byb3h5Qi5nZXRWZXJ0ZXgoY2FjaGUyLmluZGV4QlswXSk7XG4gICAgICAgICAgdHJhbnNmb3JtVmVjMihwb2ludEEkMiwgeGZBJDEsIGxvY2FsUG9pbnRBXzEpO1xuICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRCJDIsIHhmQiQxLCBsb2NhbFBvaW50Ql8xKTtcbiAgICAgICAgICBzdWJWZWMyKHRoaXMubV9heGlzLCBwb2ludEIkMiwgcG9pbnRBJDIpO1xuICAgICAgICAgIHZhciBzMiA9IG5vcm1hbGl6ZVZlYzJMZW5ndGgodGhpcy5tX2F4aXMpO1xuICAgICAgICAgIHJldHVybiBzMjtcbiAgICAgICAgfSBlbHNlIGlmIChjYWNoZTIuaW5kZXhBWzBdID09PSBjYWNoZTIuaW5kZXhBWzFdKSB7XG4gICAgICAgICAgdGhpcy5tX3R5cGUgPSBTZXBhcmF0aW9uRnVuY3Rpb25UeXBlLmVfZmFjZUI7XG4gICAgICAgICAgdmFyIGxvY2FsUG9pbnRCMSA9IHByb3h5Qi5nZXRWZXJ0ZXgoY2FjaGUyLmluZGV4QlswXSk7XG4gICAgICAgICAgdmFyIGxvY2FsUG9pbnRCMiA9IHByb3h5Qi5nZXRWZXJ0ZXgoY2FjaGUyLmluZGV4QlsxXSk7XG4gICAgICAgICAgY3Jvc3NWZWMyTnVtKHRoaXMubV9heGlzLCBzdWJWZWMyKHRlbXAkNCwgbG9jYWxQb2ludEIyLCBsb2NhbFBvaW50QjEpLCAxKTtcbiAgICAgICAgICBub3JtYWxpemVWZWMyKHRoaXMubV9heGlzKTtcbiAgICAgICAgICByb3RWZWMyKG5vcm1hbCQzLCB4ZkIkMS5xLCB0aGlzLm1fYXhpcyk7XG4gICAgICAgICAgY29tYmluZTJWZWMyKHRoaXMubV9sb2NhbFBvaW50LCAwLjUsIGxvY2FsUG9pbnRCMSwgMC41LCBsb2NhbFBvaW50QjIpO1xuICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRCJDIsIHhmQiQxLCB0aGlzLm1fbG9jYWxQb2ludCk7XG4gICAgICAgICAgdmFyIGxvY2FsUG9pbnRBXzIgPSBwcm94eUEuZ2V0VmVydGV4KGNhY2hlMi5pbmRleEFbMF0pO1xuICAgICAgICAgIHZhciBwb2ludEFfMSA9IFRyYW5zZm9ybS5tdWxWZWMyKHhmQSQxLCBsb2NhbFBvaW50QV8yKTtcbiAgICAgICAgICB2YXIgczIgPSBkb3RWZWMyKHBvaW50QV8xLCBub3JtYWwkMykgLSBkb3RWZWMyKHBvaW50QiQyLCBub3JtYWwkMyk7XG4gICAgICAgICAgaWYgKHMyIDwgMCkge1xuICAgICAgICAgICAgbmVnVmVjMih0aGlzLm1fYXhpcyk7XG4gICAgICAgICAgICBzMiA9IC1zMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHMyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV90eXBlID0gU2VwYXJhdGlvbkZ1bmN0aW9uVHlwZS5lX2ZhY2VBO1xuICAgICAgICAgIHZhciBsb2NhbFBvaW50QTEgPSB0aGlzLm1fcHJveHlBLmdldFZlcnRleChjYWNoZTIuaW5kZXhBWzBdKTtcbiAgICAgICAgICB2YXIgbG9jYWxQb2ludEEyID0gdGhpcy5tX3Byb3h5QS5nZXRWZXJ0ZXgoY2FjaGUyLmluZGV4QVsxXSk7XG4gICAgICAgICAgY3Jvc3NWZWMyTnVtKHRoaXMubV9heGlzLCBzdWJWZWMyKHRlbXAkNCwgbG9jYWxQb2ludEEyLCBsb2NhbFBvaW50QTEpLCAxKTtcbiAgICAgICAgICBub3JtYWxpemVWZWMyKHRoaXMubV9heGlzKTtcbiAgICAgICAgICByb3RWZWMyKG5vcm1hbCQzLCB4ZkEkMS5xLCB0aGlzLm1fYXhpcyk7XG4gICAgICAgICAgY29tYmluZTJWZWMyKHRoaXMubV9sb2NhbFBvaW50LCAwLjUsIGxvY2FsUG9pbnRBMSwgMC41LCBsb2NhbFBvaW50QTIpO1xuICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRBJDIsIHhmQSQxLCB0aGlzLm1fbG9jYWxQb2ludCk7XG4gICAgICAgICAgdmFyIGxvY2FsUG9pbnRCXzIgPSB0aGlzLm1fcHJveHlCLmdldFZlcnRleChjYWNoZTIuaW5kZXhCWzBdKTtcbiAgICAgICAgICB0cmFuc2Zvcm1WZWMyKHBvaW50QiQyLCB4ZkIkMSwgbG9jYWxQb2ludEJfMik7XG4gICAgICAgICAgdmFyIHMyID0gZG90VmVjMihwb2ludEIkMiwgbm9ybWFsJDMpIC0gZG90VmVjMihwb2ludEEkMiwgbm9ybWFsJDMpO1xuICAgICAgICAgIGlmIChzMiA8IDApIHtcbiAgICAgICAgICAgIG5lZ1ZlYzIodGhpcy5tX2F4aXMpO1xuICAgICAgICAgICAgczIgPSAtczI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzMjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFNlcGFyYXRpb25GdW5jdGlvbjIucHJvdG90eXBlLmNvbXB1dGUgPSBmdW5jdGlvbihmaW5kLCB0KSB7XG4gICAgICAgIHRoaXMubV9zd2VlcEEuZ2V0VHJhbnNmb3JtKHhmQSQxLCB0KTtcbiAgICAgICAgdGhpcy5tX3N3ZWVwQi5nZXRUcmFuc2Zvcm0oeGZCJDEsIHQpO1xuICAgICAgICBzd2l0Y2ggKHRoaXMubV90eXBlKSB7XG4gICAgICAgICAgY2FzZSBTZXBhcmF0aW9uRnVuY3Rpb25UeXBlLmVfcG9pbnRzOiB7XG4gICAgICAgICAgICBpZiAoZmluZCkge1xuICAgICAgICAgICAgICBkZXJvdFZlYzIoYXhpc0EsIHhmQSQxLnEsIHRoaXMubV9heGlzKTtcbiAgICAgICAgICAgICAgZGVyb3RWZWMyKGF4aXNCLCB4ZkIkMS5xLCBzY2FsZVZlYzIodGVtcCQ0LCAtMSwgdGhpcy5tX2F4aXMpKTtcbiAgICAgICAgICAgICAgdGhpcy5pbmRleEEgPSB0aGlzLm1fcHJveHlBLmdldFN1cHBvcnQoYXhpc0EpO1xuICAgICAgICAgICAgICB0aGlzLmluZGV4QiA9IHRoaXMubV9wcm94eUIuZ2V0U3VwcG9ydChheGlzQik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb3B5VmVjMihsb2NhbFBvaW50QSwgdGhpcy5tX3Byb3h5QS5nZXRWZXJ0ZXgodGhpcy5pbmRleEEpKTtcbiAgICAgICAgICAgIGNvcHlWZWMyKGxvY2FsUG9pbnRCLCB0aGlzLm1fcHJveHlCLmdldFZlcnRleCh0aGlzLmluZGV4QikpO1xuICAgICAgICAgICAgdHJhbnNmb3JtVmVjMihwb2ludEEkMiwgeGZBJDEsIGxvY2FsUG9pbnRBKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRCJDIsIHhmQiQxLCBsb2NhbFBvaW50Qik7XG4gICAgICAgICAgICB2YXIgc2VwID0gZG90VmVjMihwb2ludEIkMiwgdGhpcy5tX2F4aXMpIC0gZG90VmVjMihwb2ludEEkMiwgdGhpcy5tX2F4aXMpO1xuICAgICAgICAgICAgcmV0dXJuIHNlcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBTZXBhcmF0aW9uRnVuY3Rpb25UeXBlLmVfZmFjZUE6IHtcbiAgICAgICAgICAgIHJvdFZlYzIobm9ybWFsJDMsIHhmQSQxLnEsIHRoaXMubV9heGlzKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRBJDIsIHhmQSQxLCB0aGlzLm1fbG9jYWxQb2ludCk7XG4gICAgICAgICAgICBpZiAoZmluZCkge1xuICAgICAgICAgICAgICBkZXJvdFZlYzIoYXhpc0IsIHhmQiQxLnEsIHNjYWxlVmVjMih0ZW1wJDQsIC0xLCBub3JtYWwkMykpO1xuICAgICAgICAgICAgICB0aGlzLmluZGV4QSA9IC0xO1xuICAgICAgICAgICAgICB0aGlzLmluZGV4QiA9IHRoaXMubV9wcm94eUIuZ2V0U3VwcG9ydChheGlzQik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb3B5VmVjMihsb2NhbFBvaW50QiwgdGhpcy5tX3Byb3h5Qi5nZXRWZXJ0ZXgodGhpcy5pbmRleEIpKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRCJDIsIHhmQiQxLCBsb2NhbFBvaW50Qik7XG4gICAgICAgICAgICB2YXIgc2VwID0gZG90VmVjMihwb2ludEIkMiwgbm9ybWFsJDMpIC0gZG90VmVjMihwb2ludEEkMiwgbm9ybWFsJDMpO1xuICAgICAgICAgICAgcmV0dXJuIHNlcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBTZXBhcmF0aW9uRnVuY3Rpb25UeXBlLmVfZmFjZUI6IHtcbiAgICAgICAgICAgIHJvdFZlYzIobm9ybWFsJDMsIHhmQiQxLnEsIHRoaXMubV9heGlzKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRCJDIsIHhmQiQxLCB0aGlzLm1fbG9jYWxQb2ludCk7XG4gICAgICAgICAgICBpZiAoZmluZCkge1xuICAgICAgICAgICAgICBkZXJvdFZlYzIoYXhpc0EsIHhmQSQxLnEsIHNjYWxlVmVjMih0ZW1wJDQsIC0xLCBub3JtYWwkMykpO1xuICAgICAgICAgICAgICB0aGlzLmluZGV4QiA9IC0xO1xuICAgICAgICAgICAgICB0aGlzLmluZGV4QSA9IHRoaXMubV9wcm94eUEuZ2V0U3VwcG9ydChheGlzQSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb3B5VmVjMihsb2NhbFBvaW50QSwgdGhpcy5tX3Byb3h5QS5nZXRWZXJ0ZXgodGhpcy5pbmRleEEpKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRBJDIsIHhmQSQxLCBsb2NhbFBvaW50QSk7XG4gICAgICAgICAgICB2YXIgc2VwID0gZG90VmVjMihwb2ludEEkMiwgbm9ybWFsJDMpIC0gZG90VmVjMihwb2ludEIkMiwgbm9ybWFsJDMpO1xuICAgICAgICAgICAgcmV0dXJuIHNlcDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmIChmaW5kKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5kZXhBID0gLTE7XG4gICAgICAgICAgICAgIHRoaXMuaW5kZXhCID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFNlcGFyYXRpb25GdW5jdGlvbjIucHJvdG90eXBlLmZpbmRNaW5TZXBhcmF0aW9uID0gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wdXRlKHRydWUsIHQpO1xuICAgICAgfTtcbiAgICAgIFNlcGFyYXRpb25GdW5jdGlvbjIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wdXRlKGZhbHNlLCB0KTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gU2VwYXJhdGlvbkZ1bmN0aW9uMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIHNlcGFyYXRpb25GdW5jdGlvbiA9IG5ldyBTZXBhcmF0aW9uRnVuY3Rpb24oKTtcbiAgVGltZU9mSW1wYWN0LklucHV0ID0gVE9JSW5wdXQ7XG4gIFRpbWVPZkltcGFjdC5PdXRwdXQgPSBUT0lPdXRwdXQ7XG4gIHZhciBtYXRoX2FicyQ2ID0gTWF0aC5hYnM7XG4gIHZhciBtYXRoX3NxcnQkMyA9IE1hdGguc3FydDtcbiAgdmFyIG1hdGhfbWluJDUgPSBNYXRoLm1pbjtcbiAgdmFyIFRpbWVTdGVwID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFRpbWVTdGVwMigpIHtcbiAgICAgICAgdGhpcy5kdCA9IDA7XG4gICAgICAgIHRoaXMuaW52X2R0ID0gMDtcbiAgICAgICAgdGhpcy52ZWxvY2l0eUl0ZXJhdGlvbnMgPSAwO1xuICAgICAgICB0aGlzLnBvc2l0aW9uSXRlcmF0aW9ucyA9IDA7XG4gICAgICAgIHRoaXMud2FybVN0YXJ0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYmxvY2tTb2x2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaW52X2R0MCA9IDA7XG4gICAgICAgIHRoaXMuZHRSYXRpbyA9IDE7XG4gICAgICB9XG4gICAgICBUaW1lU3RlcDIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oZHQpIHtcbiAgICAgICAgaWYgKHRoaXMuZHQgPiAwKSB7XG4gICAgICAgICAgdGhpcy5pbnZfZHQwID0gdGhpcy5pbnZfZHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgICB0aGlzLmludl9kdCA9IGR0ID09IDAgPyAwIDogMSAvIGR0O1xuICAgICAgICB0aGlzLmR0UmF0aW8gPSBkdCAqIHRoaXMuaW52X2R0MDtcbiAgICAgIH07XG4gICAgICByZXR1cm4gVGltZVN0ZXAyO1xuICAgIH0oKVxuICApO1xuICB2YXIgc19zdWJTdGVwID0gbmV3IFRpbWVTdGVwKCk7XG4gIHZhciBjID0gdmVjMigwLCAwKTtcbiAgdmFyIHYgPSB2ZWMyKDAsIDApO1xuICB2YXIgdHJhbnNsYXRpb24gPSB2ZWMyKDAsIDApO1xuICB2YXIgaW5wdXQgPSBuZXcgVE9JSW5wdXQoKTtcbiAgdmFyIG91dHB1dCA9IG5ldyBUT0lPdXRwdXQoKTtcbiAgdmFyIGJhY2t1cCA9IG5ldyBTd2VlcCgpO1xuICB2YXIgYmFja3VwMSA9IG5ldyBTd2VlcCgpO1xuICB2YXIgYmFja3VwMiA9IG5ldyBTd2VlcCgpO1xuICB2YXIgQ29udGFjdEltcHVsc2UgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gQ29udGFjdEltcHVsc2UyKGNvbnRhY3QpIHtcbiAgICAgICAgdGhpcy5jb250YWN0ID0gY29udGFjdDtcbiAgICAgICAgdGhpcy5ub3JtYWxzID0gW107XG4gICAgICAgIHRoaXMudGFuZ2VudHMgPSBbXTtcbiAgICAgIH1cbiAgICAgIENvbnRhY3RJbXB1bHNlMi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLm5vcm1hbHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy50YW5nZW50cy5sZW5ndGggPSAwO1xuICAgICAgfTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb250YWN0SW1wdWxzZTIucHJvdG90eXBlLCBcIm5vcm1hbEltcHVsc2VzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgY29udGFjdCA9IHRoaXMuY29udGFjdDtcbiAgICAgICAgICB2YXIgbm9ybWFscyA9IHRoaXMubm9ybWFscztcbiAgICAgICAgICBub3JtYWxzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBjb250YWN0LnZfcG9pbnRzLmxlbmd0aDsgKytwKSB7XG4gICAgICAgICAgICBub3JtYWxzLnB1c2goY29udGFjdC52X3BvaW50c1twXS5ub3JtYWxJbXB1bHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5vcm1hbHM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnRhY3RJbXB1bHNlMi5wcm90b3R5cGUsIFwidGFuZ2VudEltcHVsc2VzXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgY29udGFjdCA9IHRoaXMuY29udGFjdDtcbiAgICAgICAgICB2YXIgdGFuZ2VudHMgPSB0aGlzLnRhbmdlbnRzO1xuICAgICAgICAgIHRhbmdlbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBjb250YWN0LnZfcG9pbnRzLmxlbmd0aDsgKytwKSB7XG4gICAgICAgICAgICB0YW5nZW50cy5wdXNoKGNvbnRhY3Qudl9wb2ludHNbcF0udGFuZ2VudEltcHVsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGFuZ2VudHM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIENvbnRhY3RJbXB1bHNlMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIFNvbHZlciA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBTb2x2ZXIyKHdvcmxkKSB7XG4gICAgICAgIHRoaXMubV93b3JsZCA9IHdvcmxkO1xuICAgICAgICB0aGlzLm1fc3RhY2sgPSBbXTtcbiAgICAgICAgdGhpcy5tX2JvZGllcyA9IFtdO1xuICAgICAgICB0aGlzLm1fY29udGFjdHMgPSBbXTtcbiAgICAgICAgdGhpcy5tX2pvaW50cyA9IFtdO1xuICAgICAgfVxuICAgICAgU29sdmVyMi5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5tX3N0YWNrLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubV9ib2RpZXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5tX2NvbnRhY3RzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubV9qb2ludHMubGVuZ3RoID0gMDtcbiAgICAgIH07XG4gICAgICBTb2x2ZXIyLnByb3RvdHlwZS5hZGRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgICAgICB0aGlzLm1fYm9kaWVzLnB1c2goYm9keSk7XG4gICAgICB9O1xuICAgICAgU29sdmVyMi5wcm90b3R5cGUuYWRkQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3QpIHtcbiAgICAgICAgdGhpcy5tX2NvbnRhY3RzLnB1c2goY29udGFjdCk7XG4gICAgICB9O1xuICAgICAgU29sdmVyMi5wcm90b3R5cGUuYWRkSm9pbnQgPSBmdW5jdGlvbihqb2ludCkge1xuICAgICAgICB0aGlzLm1fam9pbnRzLnB1c2goam9pbnQpO1xuICAgICAgfTtcbiAgICAgIFNvbHZlcjIucHJvdG90eXBlLnNvbHZlV29ybGQgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciB3b3JsZCA9IHRoaXMubV93b3JsZDtcbiAgICAgICAgZm9yICh2YXIgYjIgPSB3b3JsZC5tX2JvZHlMaXN0OyBiMjsgYjIgPSBiMi5tX25leHQpIHtcbiAgICAgICAgICBiMi5tX2lzbGFuZEZsYWcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBjXzEgPSB3b3JsZC5tX2NvbnRhY3RMaXN0OyBjXzE7IGNfMSA9IGNfMS5tX25leHQpIHtcbiAgICAgICAgICBjXzEubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaiA9IHdvcmxkLm1fam9pbnRMaXN0OyBqOyBqID0gai5tX25leHQpIHtcbiAgICAgICAgICBqLm1faXNsYW5kRmxhZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFjayA9IHRoaXMubV9zdGFjaztcbiAgICAgICAgZm9yICh2YXIgc2VlZCA9IHdvcmxkLm1fYm9keUxpc3Q7IHNlZWQ7IHNlZWQgPSBzZWVkLm1fbmV4dCkge1xuICAgICAgICAgIGlmIChzZWVkLm1faXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzZWVkLmlzQXdha2UoKSA9PSBmYWxzZSB8fCBzZWVkLmlzQWN0aXZlKCkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2VlZC5pc1N0YXRpYygpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgIHN0YWNrLnB1c2goc2VlZCk7XG4gICAgICAgICAgc2VlZC5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgYjIgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkQm9keShiMik7XG4gICAgICAgICAgICBiMi5tX2F3YWtlRmxhZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAoYjIuaXNTdGF0aWMoKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGNlID0gYjIubV9jb250YWN0TGlzdDsgY2U7IGNlID0gY2UubmV4dCkge1xuICAgICAgICAgICAgICB2YXIgY29udGFjdCA9IGNlLmNvbnRhY3Q7XG4gICAgICAgICAgICAgIGlmIChjb250YWN0Lm1faXNsYW5kRmxhZykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjb250YWN0LmlzRW5hYmxlZCgpID09IGZhbHNlIHx8IGNvbnRhY3QuaXNUb3VjaGluZygpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIHNlbnNvckEgPSBjb250YWN0Lm1fZml4dHVyZUEubV9pc1NlbnNvcjtcbiAgICAgICAgICAgICAgdmFyIHNlbnNvckIgPSBjb250YWN0Lm1fZml4dHVyZUIubV9pc1NlbnNvcjtcbiAgICAgICAgICAgICAgaWYgKHNlbnNvckEgfHwgc2Vuc29yQikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuYWRkQ29udGFjdChjb250YWN0KTtcbiAgICAgICAgICAgICAgY29udGFjdC5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICB2YXIgb3RoZXIgPSBjZS5vdGhlcjtcbiAgICAgICAgICAgICAgaWYgKG90aGVyLm1faXNsYW5kRmxhZykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN0YWNrLnB1c2gob3RoZXIpO1xuICAgICAgICAgICAgICBvdGhlci5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgamUgPSBiMi5tX2pvaW50TGlzdDsgamU7IGplID0gamUubmV4dCkge1xuICAgICAgICAgICAgICBpZiAoamUuam9pbnQubV9pc2xhbmRGbGFnID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2YXIgb3RoZXIgPSBqZS5vdGhlcjtcbiAgICAgICAgICAgICAgaWYgKG90aGVyLmlzQWN0aXZlKCkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmFkZEpvaW50KGplLmpvaW50KTtcbiAgICAgICAgICAgICAgamUuam9pbnQubV9pc2xhbmRGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaWYgKG90aGVyLm1faXNsYW5kRmxhZykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN0YWNrLnB1c2gob3RoZXIpO1xuICAgICAgICAgICAgICBvdGhlci5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNvbHZlSXNsYW5kKHN0ZXApO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2JvZGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGIyID0gdGhpcy5tX2JvZGllc1tpXTtcbiAgICAgICAgICAgIGlmIChiMi5pc1N0YXRpYygpKSB7XG4gICAgICAgICAgICAgIGIyLm1faXNsYW5kRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFNvbHZlcjIucHJvdG90eXBlLnNvbHZlSXNsYW5kID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgd29ybGQgPSB0aGlzLm1fd29ybGQ7XG4gICAgICAgIHZhciBncmF2aXR5ID0gd29ybGQubV9ncmF2aXR5O1xuICAgICAgICB2YXIgYWxsb3dTbGVlcCA9IHdvcmxkLm1fYWxsb3dTbGVlcDtcbiAgICAgICAgdmFyIGggPSBzdGVwLmR0O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB2YXIgYm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICAgICAgY29weVZlYzIoYywgYm9keS5tX3N3ZWVwLmMpO1xuICAgICAgICAgIHZhciBhMiA9IGJvZHkubV9zd2VlcC5hO1xuICAgICAgICAgIGNvcHlWZWMyKHYsIGJvZHkubV9saW5lYXJWZWxvY2l0eSk7XG4gICAgICAgICAgdmFyIHcgPSBib2R5Lm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgICAgIGNvcHlWZWMyKGJvZHkubV9zd2VlcC5jMCwgYm9keS5tX3N3ZWVwLmMpO1xuICAgICAgICAgIGJvZHkubV9zd2VlcC5hMCA9IGJvZHkubV9zd2VlcC5hO1xuICAgICAgICAgIGlmIChib2R5LmlzRHluYW1pYygpKSB7XG4gICAgICAgICAgICBwbHVzU2NhbGVWZWMyKHYsIGggKiBib2R5Lm1fZ3Jhdml0eVNjYWxlLCBncmF2aXR5KTtcbiAgICAgICAgICAgIHBsdXNTY2FsZVZlYzIodiwgaCAqIGJvZHkubV9pbnZNYXNzLCBib2R5Lm1fZm9yY2UpO1xuICAgICAgICAgICAgdyArPSBoICogYm9keS5tX2ludkkgKiBib2R5Lm1fdG9ycXVlO1xuICAgICAgICAgICAgc2NhbGVWZWMyKHYsIDEgLyAoMSArIGggKiBib2R5Lm1fbGluZWFyRGFtcGluZyksIHYpO1xuICAgICAgICAgICAgdyAqPSAxIC8gKDEgKyBoICogYm9keS5tX2FuZ3VsYXJEYW1waW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29weVZlYzIoYm9keS5jX3Bvc2l0aW9uLmMsIGMpO1xuICAgICAgICAgIGJvZHkuY19wb3NpdGlvbi5hID0gYTI7XG4gICAgICAgICAgY29weVZlYzIoYm9keS5jX3ZlbG9jaXR5LnYsIHYpO1xuICAgICAgICAgIGJvZHkuY192ZWxvY2l0eS53ID0gdztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb250YWN0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RzW2ldO1xuICAgICAgICAgIGNvbnRhY3QuaW5pdENvbnN0cmFpbnQoc3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB2YXIgY29udGFjdCA9IHRoaXMubV9jb250YWN0c1tpXTtcbiAgICAgICAgICBjb250YWN0LmluaXRWZWxvY2l0eUNvbnN0cmFpbnQoc3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RzW2ldO1xuICAgICAgICAgICAgY29udGFjdC53YXJtU3RhcnRDb25zdHJhaW50KHN0ZXApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9qb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB2YXIgam9pbnQgPSB0aGlzLm1fam9pbnRzW2ldO1xuICAgICAgICAgIGpvaW50LmluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKHN0ZXApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnM7ICsraSkge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5tX2pvaW50cy5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgdmFyIGpvaW50ID0gdGhpcy5tX2pvaW50c1tqXTtcbiAgICAgICAgICAgIGpvaW50LnNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyhzdGVwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIHZhciBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RzW2pdO1xuICAgICAgICAgICAgY29udGFjdC5zb2x2ZVZlbG9jaXR5Q29uc3RyYWludChzdGVwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB2YXIgY29udGFjdCA9IHRoaXMubV9jb250YWN0c1tpXTtcbiAgICAgICAgICBjb250YWN0LnN0b3JlQ29uc3RyYWludEltcHVsc2VzKHN0ZXApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2JvZGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBib2R5ID0gdGhpcy5tX2JvZGllc1tpXTtcbiAgICAgICAgICBjb3B5VmVjMihjLCBib2R5LmNfcG9zaXRpb24uYyk7XG4gICAgICAgICAgdmFyIGEyID0gYm9keS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgICAgY29weVZlYzIodiwgYm9keS5jX3ZlbG9jaXR5LnYpO1xuICAgICAgICAgIHZhciB3ID0gYm9keS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgICAgc2NhbGVWZWMyKHRyYW5zbGF0aW9uLCBoLCB2KTtcbiAgICAgICAgICB2YXIgdHJhbnNsYXRpb25MZW5ndGhTcXIgPSBsZW5ndGhTcXJWZWMyKHRyYW5zbGF0aW9uKTtcbiAgICAgICAgICBpZiAodHJhbnNsYXRpb25MZW5ndGhTcXIgPiBTZXR0aW5nc0ludGVybmFsLm1heFRyYW5zbGF0aW9uU3F1YXJlZCkge1xuICAgICAgICAgICAgdmFyIHJhdGlvID0gU2V0dGluZ3NJbnRlcm5hbC5tYXhUcmFuc2xhdGlvbiAvIG1hdGhfc3FydCQzKHRyYW5zbGF0aW9uTGVuZ3RoU3FyKTtcbiAgICAgICAgICAgIG11bFZlYzIodiwgcmF0aW8pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcm90YXRpb24yID0gaCAqIHc7XG4gICAgICAgICAgaWYgKHJvdGF0aW9uMiAqIHJvdGF0aW9uMiA+IFNldHRpbmdzSW50ZXJuYWwubWF4Um90YXRpb25TcXVhcmVkKSB7XG4gICAgICAgICAgICB2YXIgcmF0aW8gPSBTZXR0aW5nc0ludGVybmFsLm1heFJvdGF0aW9uIC8gbWF0aF9hYnMkNihyb3RhdGlvbjIpO1xuICAgICAgICAgICAgdyAqPSByYXRpbztcbiAgICAgICAgICB9XG4gICAgICAgICAgcGx1c1NjYWxlVmVjMihjLCBoLCB2KTtcbiAgICAgICAgICBhMiArPSBoICogdztcbiAgICAgICAgICBjb3B5VmVjMihib2R5LmNfcG9zaXRpb24uYywgYyk7XG4gICAgICAgICAgYm9keS5jX3Bvc2l0aW9uLmEgPSBhMjtcbiAgICAgICAgICBjb3B5VmVjMihib2R5LmNfdmVsb2NpdHkudiwgdik7XG4gICAgICAgICAgYm9keS5jX3ZlbG9jaXR5LncgPSB3O1xuICAgICAgICB9XG4gICAgICAgIHZhciBwb3NpdGlvblNvbHZlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXAucG9zaXRpb25JdGVyYXRpb25zOyArK2kpIHtcbiAgICAgICAgICB2YXIgbWluU2VwYXJhdGlvbiA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIHZhciBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RzW2pdO1xuICAgICAgICAgICAgdmFyIHNlcGFyYXRpb24gPSBjb250YWN0LnNvbHZlUG9zaXRpb25Db25zdHJhaW50KHN0ZXApO1xuICAgICAgICAgICAgbWluU2VwYXJhdGlvbiA9IG1hdGhfbWluJDUobWluU2VwYXJhdGlvbiwgc2VwYXJhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBjb250YWN0c09rYXkgPSBtaW5TZXBhcmF0aW9uID49IC0zICogU2V0dGluZ3NJbnRlcm5hbC5saW5lYXJTbG9wO1xuICAgICAgICAgIHZhciBqb2ludHNPa2F5ID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMubV9qb2ludHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIHZhciBqb2ludCA9IHRoaXMubV9qb2ludHNbal07XG4gICAgICAgICAgICB2YXIgam9pbnRPa2F5ID0gam9pbnQuc29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzKHN0ZXApO1xuICAgICAgICAgICAgam9pbnRzT2theSA9IGpvaW50c09rYXkgJiYgam9pbnRPa2F5O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29udGFjdHNPa2F5ICYmIGpvaW50c09rYXkpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uU29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB2YXIgYm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICAgICAgY29weVZlYzIoYm9keS5tX3N3ZWVwLmMsIGJvZHkuY19wb3NpdGlvbi5jKTtcbiAgICAgICAgICBib2R5Lm1fc3dlZXAuYSA9IGJvZHkuY19wb3NpdGlvbi5hO1xuICAgICAgICAgIGNvcHlWZWMyKGJvZHkubV9saW5lYXJWZWxvY2l0eSwgYm9keS5jX3ZlbG9jaXR5LnYpO1xuICAgICAgICAgIGJvZHkubV9hbmd1bGFyVmVsb2NpdHkgPSBib2R5LmNfdmVsb2NpdHkudztcbiAgICAgICAgICBib2R5LnN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3N0U29sdmVJc2xhbmQoKTtcbiAgICAgICAgaWYgKGFsbG93U2xlZXApIHtcbiAgICAgICAgICB2YXIgbWluU2xlZXBUaW1lID0gSW5maW5pdHk7XG4gICAgICAgICAgdmFyIGxpblRvbFNxciA9IFNldHRpbmdzSW50ZXJuYWwubGluZWFyU2xlZXBUb2xlcmFuY2VTcXI7XG4gICAgICAgICAgdmFyIGFuZ1RvbFNxciA9IFNldHRpbmdzSW50ZXJuYWwuYW5ndWxhclNsZWVwVG9sZXJhbmNlU3FyO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2JvZGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGJvZHkgPSB0aGlzLm1fYm9kaWVzW2ldO1xuICAgICAgICAgICAgaWYgKGJvZHkuaXNTdGF0aWMoKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChib2R5Lm1fYXV0b1NsZWVwRmxhZyA9PSBmYWxzZSB8fCBib2R5Lm1fYW5ndWxhclZlbG9jaXR5ICogYm9keS5tX2FuZ3VsYXJWZWxvY2l0eSA+IGFuZ1RvbFNxciB8fCBsZW5ndGhTcXJWZWMyKGJvZHkubV9saW5lYXJWZWxvY2l0eSkgPiBsaW5Ub2xTcXIpIHtcbiAgICAgICAgICAgICAgYm9keS5tX3NsZWVwVGltZSA9IDA7XG4gICAgICAgICAgICAgIG1pblNsZWVwVGltZSA9IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBib2R5Lm1fc2xlZXBUaW1lICs9IGg7XG4gICAgICAgICAgICAgIG1pblNsZWVwVGltZSA9IG1hdGhfbWluJDUobWluU2xlZXBUaW1lLCBib2R5Lm1fc2xlZXBUaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1pblNsZWVwVGltZSA+PSBTZXR0aW5nc0ludGVybmFsLnRpbWVUb1NsZWVwICYmIHBvc2l0aW9uU29sdmVkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgdmFyIGJvZHkgPSB0aGlzLm1fYm9kaWVzW2ldO1xuICAgICAgICAgICAgICBib2R5LnNldEF3YWtlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBTb2x2ZXIyLnByb3RvdHlwZS5zb2x2ZVdvcmxkVE9JID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgd29ybGQgPSB0aGlzLm1fd29ybGQ7XG4gICAgICAgIGlmICh3b3JsZC5tX3N0ZXBDb21wbGV0ZSkge1xuICAgICAgICAgIGZvciAodmFyIGIyID0gd29ybGQubV9ib2R5TGlzdDsgYjI7IGIyID0gYjIubV9uZXh0KSB7XG4gICAgICAgICAgICBiMi5tX2lzbGFuZEZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGIyLm1fc3dlZXAuYWxwaGEwID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yICh2YXIgY18yID0gd29ybGQubV9jb250YWN0TGlzdDsgY18yOyBjXzIgPSBjXzIubV9uZXh0KSB7XG4gICAgICAgICAgICBjXzIubV90b2lGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICBjXzIubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICBjXzIubV90b2lDb3VudCA9IDA7XG4gICAgICAgICAgICBjXzIubV90b2kgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIHZhciBtaW5Db250YWN0ID0gbnVsbDtcbiAgICAgICAgICB2YXIgbWluQWxwaGEgPSAxO1xuICAgICAgICAgIGZvciAodmFyIGNfMyA9IHdvcmxkLm1fY29udGFjdExpc3Q7IGNfMzsgY18zID0gY18zLm1fbmV4dCkge1xuICAgICAgICAgICAgaWYgKGNfMy5pc0VuYWJsZWQoKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjXzMubV90b2lDb3VudCA+IFNldHRpbmdzSW50ZXJuYWwubWF4U3ViU3RlcHMpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSAxO1xuICAgICAgICAgICAgaWYgKGNfMy5tX3RvaUZsYWcpIHtcbiAgICAgICAgICAgICAgYWxwaGEgPSBjXzMubV90b2k7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgZkFfMSA9IGNfMy5nZXRGaXh0dXJlQSgpO1xuICAgICAgICAgICAgICB2YXIgZkJfMSA9IGNfMy5nZXRGaXh0dXJlQigpO1xuICAgICAgICAgICAgICBpZiAoZkFfMS5pc1NlbnNvcigpIHx8IGZCXzEuaXNTZW5zb3IoKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhciBiQV8xID0gZkFfMS5nZXRCb2R5KCk7XG4gICAgICAgICAgICAgIHZhciBiQl8xID0gZkJfMS5nZXRCb2R5KCk7XG4gICAgICAgICAgICAgIHZhciBhY3RpdmVBID0gYkFfMS5pc0F3YWtlKCkgJiYgIWJBXzEuaXNTdGF0aWMoKTtcbiAgICAgICAgICAgICAgdmFyIGFjdGl2ZUIgPSBiQl8xLmlzQXdha2UoKSAmJiAhYkJfMS5pc1N0YXRpYygpO1xuICAgICAgICAgICAgICBpZiAoYWN0aXZlQSA9PSBmYWxzZSAmJiBhY3RpdmVCID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIGNvbGxpZGVBID0gYkFfMS5pc0J1bGxldCgpIHx8ICFiQV8xLmlzRHluYW1pYygpO1xuICAgICAgICAgICAgICB2YXIgY29sbGlkZUIgPSBiQl8xLmlzQnVsbGV0KCkgfHwgIWJCXzEuaXNEeW5hbWljKCk7XG4gICAgICAgICAgICAgIGlmIChjb2xsaWRlQSA9PSBmYWxzZSAmJiBjb2xsaWRlQiA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhciBhbHBoYTAgPSBiQV8xLm1fc3dlZXAuYWxwaGEwO1xuICAgICAgICAgICAgICBpZiAoYkFfMS5tX3N3ZWVwLmFscGhhMCA8IGJCXzEubV9zd2VlcC5hbHBoYTApIHtcbiAgICAgICAgICAgICAgICBhbHBoYTAgPSBiQl8xLm1fc3dlZXAuYWxwaGEwO1xuICAgICAgICAgICAgICAgIGJBXzEubV9zd2VlcC5hZHZhbmNlKGFscGhhMCk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoYkJfMS5tX3N3ZWVwLmFscGhhMCA8IGJBXzEubV9zd2VlcC5hbHBoYTApIHtcbiAgICAgICAgICAgICAgICBhbHBoYTAgPSBiQV8xLm1fc3dlZXAuYWxwaGEwO1xuICAgICAgICAgICAgICAgIGJCXzEubV9zd2VlcC5hZHZhbmNlKGFscGhhMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIGluZGV4QSA9IGNfMy5nZXRDaGlsZEluZGV4QSgpO1xuICAgICAgICAgICAgICB2YXIgaW5kZXhCID0gY18zLmdldENoaWxkSW5kZXhCKCk7XG4gICAgICAgICAgICAgIGlucHV0LnByb3h5QS5zZXQoZkFfMS5nZXRTaGFwZSgpLCBpbmRleEEpO1xuICAgICAgICAgICAgICBpbnB1dC5wcm94eUIuc2V0KGZCXzEuZ2V0U2hhcGUoKSwgaW5kZXhCKTtcbiAgICAgICAgICAgICAgaW5wdXQuc3dlZXBBLnNldChiQV8xLm1fc3dlZXApO1xuICAgICAgICAgICAgICBpbnB1dC5zd2VlcEIuc2V0KGJCXzEubV9zd2VlcCk7XG4gICAgICAgICAgICAgIGlucHV0LnRNYXggPSAxO1xuICAgICAgICAgICAgICBUaW1lT2ZJbXBhY3Qob3V0cHV0LCBpbnB1dCk7XG4gICAgICAgICAgICAgIHZhciBiZXRhID0gb3V0cHV0LnQ7XG4gICAgICAgICAgICAgIGlmIChvdXRwdXQuc3RhdGUgPT0gZXhwb3J0czIuVE9JT3V0cHV0U3RhdGUuZV90b3VjaGluZykge1xuICAgICAgICAgICAgICAgIGFscGhhID0gbWF0aF9taW4kNShhbHBoYTAgKyAoMSAtIGFscGhhMCkgKiBiZXRhLCAxKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbHBoYSA9IDE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY18zLm1fdG9pID0gYWxwaGE7XG4gICAgICAgICAgICAgIGNfMy5tX3RvaUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFscGhhIDwgbWluQWxwaGEpIHtcbiAgICAgICAgICAgICAgbWluQ29udGFjdCA9IGNfMztcbiAgICAgICAgICAgICAgbWluQWxwaGEgPSBhbHBoYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1pbkNvbnRhY3QgPT0gbnVsbCB8fCAxIC0gMTAgKiBFUFNJTE9OIDwgbWluQWxwaGEpIHtcbiAgICAgICAgICAgIHdvcmxkLm1fc3RlcENvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgZkEgPSBtaW5Db250YWN0LmdldEZpeHR1cmVBKCk7XG4gICAgICAgICAgdmFyIGZCID0gbWluQ29udGFjdC5nZXRGaXh0dXJlQigpO1xuICAgICAgICAgIHZhciBiQSA9IGZBLmdldEJvZHkoKTtcbiAgICAgICAgICB2YXIgYkIgPSBmQi5nZXRCb2R5KCk7XG4gICAgICAgICAgYmFja3VwMS5zZXQoYkEubV9zd2VlcCk7XG4gICAgICAgICAgYmFja3VwMi5zZXQoYkIubV9zd2VlcCk7XG4gICAgICAgICAgYkEuYWR2YW5jZShtaW5BbHBoYSk7XG4gICAgICAgICAgYkIuYWR2YW5jZShtaW5BbHBoYSk7XG4gICAgICAgICAgbWluQ29udGFjdC51cGRhdGUod29ybGQpO1xuICAgICAgICAgIG1pbkNvbnRhY3QubV90b2lGbGFnID0gZmFsc2U7XG4gICAgICAgICAgKyttaW5Db250YWN0Lm1fdG9pQ291bnQ7XG4gICAgICAgICAgaWYgKG1pbkNvbnRhY3QuaXNFbmFibGVkKCkgPT0gZmFsc2UgfHwgbWluQ29udGFjdC5pc1RvdWNoaW5nKCkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIG1pbkNvbnRhY3Quc2V0RW5hYmxlZChmYWxzZSk7XG4gICAgICAgICAgICBiQS5tX3N3ZWVwLnNldChiYWNrdXAxKTtcbiAgICAgICAgICAgIGJCLm1fc3dlZXAuc2V0KGJhY2t1cDIpO1xuICAgICAgICAgICAgYkEuc3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIGJCLnN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYkEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgYkIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuYWRkQm9keShiQSk7XG4gICAgICAgICAgdGhpcy5hZGRCb2R5KGJCKTtcbiAgICAgICAgICB0aGlzLmFkZENvbnRhY3QobWluQ29udGFjdCk7XG4gICAgICAgICAgYkEubV9pc2xhbmRGbGFnID0gdHJ1ZTtcbiAgICAgICAgICBiQi5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgIG1pbkNvbnRhY3QubV9pc2xhbmRGbGFnID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgYm9kaWVzID0gW2JBLCBiQl07XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBib2R5ID0gYm9kaWVzW2ldO1xuICAgICAgICAgICAgaWYgKGJvZHkuaXNEeW5hbWljKCkpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgY2UgPSBib2R5Lm1fY29udGFjdExpc3Q7IGNlOyBjZSA9IGNlLm5leHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGFjdCA9IGNlLmNvbnRhY3Q7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRhY3QubV9pc2xhbmRGbGFnKSB7XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG90aGVyID0gY2Uub3RoZXI7XG4gICAgICAgICAgICAgICAgaWYgKG90aGVyLmlzRHluYW1pYygpICYmICFib2R5LmlzQnVsbGV0KCkgJiYgIW90aGVyLmlzQnVsbGV0KCkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc2Vuc29yQSA9IGNvbnRhY3QubV9maXh0dXJlQS5tX2lzU2Vuc29yO1xuICAgICAgICAgICAgICAgIHZhciBzZW5zb3JCID0gY29udGFjdC5tX2ZpeHR1cmVCLm1faXNTZW5zb3I7XG4gICAgICAgICAgICAgICAgaWYgKHNlbnNvckEgfHwgc2Vuc29yQikge1xuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJhY2t1cC5zZXQob3RoZXIubV9zd2VlcCk7XG4gICAgICAgICAgICAgICAgaWYgKG90aGVyLm1faXNsYW5kRmxhZyA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgb3RoZXIuYWR2YW5jZShtaW5BbHBoYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRhY3QudXBkYXRlKHdvcmxkKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGFjdC5pc0VuYWJsZWQoKSA9PSBmYWxzZSB8fCBjb250YWN0LmlzVG91Y2hpbmcoKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgb3RoZXIubV9zd2VlcC5zZXQoYmFja3VwKTtcbiAgICAgICAgICAgICAgICAgIG90aGVyLnN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGFjdC5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29udGFjdChjb250YWN0KTtcbiAgICAgICAgICAgICAgICBpZiAob3RoZXIubV9pc2xhbmRGbGFnKSB7XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3RoZXIubV9pc2xhbmRGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIW90aGVyLmlzU3RhdGljKCkpIHtcbiAgICAgICAgICAgICAgICAgIG90aGVyLnNldEF3YWtlKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFkZEJvZHkob3RoZXIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHNfc3ViU3RlcC5yZXNldCgoMSAtIG1pbkFscGhhKSAqIHN0ZXAuZHQpO1xuICAgICAgICAgIHNfc3ViU3RlcC5kdFJhdGlvID0gMTtcbiAgICAgICAgICBzX3N1YlN0ZXAucG9zaXRpb25JdGVyYXRpb25zID0gMjA7XG4gICAgICAgICAgc19zdWJTdGVwLnZlbG9jaXR5SXRlcmF0aW9ucyA9IHN0ZXAudmVsb2NpdHlJdGVyYXRpb25zO1xuICAgICAgICAgIHNfc3ViU3RlcC53YXJtU3RhcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnNvbHZlSXNsYW5kVE9JKHNfc3ViU3RlcCwgYkEsIGJCKTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBib2R5ID0gdGhpcy5tX2JvZGllc1tpXTtcbiAgICAgICAgICAgIGJvZHkubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIWJvZHkuaXNEeW5hbWljKCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2R5LnN5bmNocm9uaXplRml4dHVyZXMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGNlID0gYm9keS5tX2NvbnRhY3RMaXN0OyBjZTsgY2UgPSBjZS5uZXh0KSB7XG4gICAgICAgICAgICAgIGNlLmNvbnRhY3QubV90b2lGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgIGNlLmNvbnRhY3QubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHdvcmxkLmZpbmROZXdDb250YWN0cygpO1xuICAgICAgICAgIGlmICh3b3JsZC5tX3N1YlN0ZXBwaW5nKSB7XG4gICAgICAgICAgICB3b3JsZC5tX3N0ZXBDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgU29sdmVyMi5wcm90b3R5cGUuc29sdmVJc2xhbmRUT0kgPSBmdW5jdGlvbihzdWJTdGVwLCB0b2lBLCB0b2lCKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2JvZGllcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIHZhciBib2R5ID0gdGhpcy5tX2JvZGllc1tpXTtcbiAgICAgICAgICBjb3B5VmVjMihib2R5LmNfcG9zaXRpb24uYywgYm9keS5tX3N3ZWVwLmMpO1xuICAgICAgICAgIGJvZHkuY19wb3NpdGlvbi5hID0gYm9keS5tX3N3ZWVwLmE7XG4gICAgICAgICAgY29weVZlYzIoYm9keS5jX3ZlbG9jaXR5LnYsIGJvZHkubV9saW5lYXJWZWxvY2l0eSk7XG4gICAgICAgICAgYm9keS5jX3ZlbG9jaXR5LncgPSBib2R5Lm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2NvbnRhY3RzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgdmFyIGNvbnRhY3QgPSB0aGlzLm1fY29udGFjdHNbaV07XG4gICAgICAgICAgY29udGFjdC5pbml0Q29uc3RyYWludChzdWJTdGVwKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YlN0ZXAucG9zaXRpb25JdGVyYXRpb25zOyArK2kpIHtcbiAgICAgICAgICB2YXIgbWluU2VwYXJhdGlvbiA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIHZhciBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RzW2pdO1xuICAgICAgICAgICAgdmFyIHNlcGFyYXRpb24gPSBjb250YWN0LnNvbHZlUG9zaXRpb25Db25zdHJhaW50VE9JKHN1YlN0ZXAsIHRvaUEsIHRvaUIpO1xuICAgICAgICAgICAgbWluU2VwYXJhdGlvbiA9IG1hdGhfbWluJDUobWluU2VwYXJhdGlvbiwgc2VwYXJhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBjb250YWN0c09rYXkgPSBtaW5TZXBhcmF0aW9uID49IC0xLjUgKiBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3A7XG4gICAgICAgICAgaWYgKGNvbnRhY3RzT2theSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBpO1xuICAgICAgICBjb3B5VmVjMih0b2lBLm1fc3dlZXAuYzAsIHRvaUEuY19wb3NpdGlvbi5jKTtcbiAgICAgICAgdG9pQS5tX3N3ZWVwLmEwID0gdG9pQS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIGNvcHlWZWMyKHRvaUIubV9zd2VlcC5jMCwgdG9pQi5jX3Bvc2l0aW9uLmMpO1xuICAgICAgICB0b2lCLm1fc3dlZXAuYTAgPSB0b2lCLmNfcG9zaXRpb24uYTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB2YXIgY29udGFjdCA9IHRoaXMubV9jb250YWN0c1tpXTtcbiAgICAgICAgICBjb250YWN0LmluaXRWZWxvY2l0eUNvbnN0cmFpbnQoc3ViU3RlcCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJTdGVwLnZlbG9jaXR5SXRlcmF0aW9uczsgKytpKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgIHZhciBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RzW2pdO1xuICAgICAgICAgICAgY29udGFjdC5zb2x2ZVZlbG9jaXR5Q29uc3RyYWludChzdWJTdGVwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGggPSBzdWJTdGVwLmR0O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9ib2RpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB2YXIgYm9keSA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICAgICAgY29weVZlYzIoYywgYm9keS5jX3Bvc2l0aW9uLmMpO1xuICAgICAgICAgIHZhciBhMiA9IGJvZHkuY19wb3NpdGlvbi5hO1xuICAgICAgICAgIGNvcHlWZWMyKHYsIGJvZHkuY192ZWxvY2l0eS52KTtcbiAgICAgICAgICB2YXIgdyA9IGJvZHkuY192ZWxvY2l0eS53O1xuICAgICAgICAgIHNjYWxlVmVjMih0cmFuc2xhdGlvbiwgaCwgdik7XG4gICAgICAgICAgdmFyIHRyYW5zbGF0aW9uTGVuZ3RoU3FyID0gbGVuZ3RoU3FyVmVjMih0cmFuc2xhdGlvbik7XG4gICAgICAgICAgaWYgKHRyYW5zbGF0aW9uTGVuZ3RoU3FyID4gU2V0dGluZ3NJbnRlcm5hbC5tYXhUcmFuc2xhdGlvblNxdWFyZWQpIHtcbiAgICAgICAgICAgIHZhciByYXRpbyA9IFNldHRpbmdzSW50ZXJuYWwubWF4VHJhbnNsYXRpb24gLyBtYXRoX3NxcnQkMyh0cmFuc2xhdGlvbkxlbmd0aFNxcik7XG4gICAgICAgICAgICBtdWxWZWMyKHYsIHJhdGlvKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHJvdGF0aW9uMiA9IGggKiB3O1xuICAgICAgICAgIGlmIChyb3RhdGlvbjIgKiByb3RhdGlvbjIgPiBTZXR0aW5nc0ludGVybmFsLm1heFJvdGF0aW9uU3F1YXJlZCkge1xuICAgICAgICAgICAgdmFyIHJhdGlvID0gU2V0dGluZ3NJbnRlcm5hbC5tYXhSb3RhdGlvbiAvIG1hdGhfYWJzJDYocm90YXRpb24yKTtcbiAgICAgICAgICAgIHcgKj0gcmF0aW87XG4gICAgICAgICAgfVxuICAgICAgICAgIHBsdXNTY2FsZVZlYzIoYywgaCwgdik7XG4gICAgICAgICAgYTIgKz0gaCAqIHc7XG4gICAgICAgICAgY29weVZlYzIoYm9keS5jX3Bvc2l0aW9uLmMsIGMpO1xuICAgICAgICAgIGJvZHkuY19wb3NpdGlvbi5hID0gYTI7XG4gICAgICAgICAgY29weVZlYzIoYm9keS5jX3ZlbG9jaXR5LnYsIHYpO1xuICAgICAgICAgIGJvZHkuY192ZWxvY2l0eS53ID0gdztcbiAgICAgICAgICBjb3B5VmVjMihib2R5Lm1fc3dlZXAuYywgYyk7XG4gICAgICAgICAgYm9keS5tX3N3ZWVwLmEgPSBhMjtcbiAgICAgICAgICBjb3B5VmVjMihib2R5Lm1fbGluZWFyVmVsb2NpdHksIHYpO1xuICAgICAgICAgIGJvZHkubV9hbmd1bGFyVmVsb2NpdHkgPSB3O1xuICAgICAgICAgIGJvZHkuc3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvc3RTb2x2ZUlzbGFuZCgpO1xuICAgICAgfTtcbiAgICAgIFNvbHZlcjIucHJvdG90eXBlLnBvc3RTb2x2ZUlzbGFuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBjXzUgPSAwOyBjXzUgPCB0aGlzLm1fY29udGFjdHMubGVuZ3RoOyArK2NfNSkge1xuICAgICAgICAgIHZhciBjb250YWN0ID0gdGhpcy5tX2NvbnRhY3RzW2NfNV07XG4gICAgICAgICAgdGhpcy5tX3dvcmxkLnBvc3RTb2x2ZShjb250YWN0LCBjb250YWN0Lm1faW1wdWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZXR1cm4gU29sdmVyMjtcbiAgICB9KClcbiAgKTtcbiAgU29sdmVyLlRpbWVTdGVwID0gVGltZVN0ZXA7XG4gIHZhciBNYXQyMiA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBNYXQyMjIoYTIsIGIyLCBjMiwgZDIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhMiA9PT0gXCJvYmplY3RcIiAmJiBhMiAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuZXggPSBWZWMyLmNsb25lKGEyKTtcbiAgICAgICAgICB0aGlzLmV5ID0gVmVjMi5jbG9uZShiMik7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGEyID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgdGhpcy5leCA9IFZlYzIubmVvKGEyLCBjMik7XG4gICAgICAgICAgdGhpcy5leSA9IFZlYzIubmVvKGIyLCBkMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5leCA9IFZlYzIuemVybygpO1xuICAgICAgICAgIHRoaXMuZXkgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgTWF0MjIyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcyk7XG4gICAgICB9O1xuICAgICAgTWF0MjIyLmlzVmFsaWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBWZWMyLmlzVmFsaWQob2JqLmV4KSAmJiBWZWMyLmlzVmFsaWQob2JqLmV5KTtcbiAgICAgIH07XG4gICAgICBNYXQyMjIuYXNzZXJ0ID0gZnVuY3Rpb24obykge1xuICAgICAgfTtcbiAgICAgIE1hdDIyMi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oYTIsIGIyLCBjMiwgZDIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhMiA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgYjIgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGMyID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBkMiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIHRoaXMuZXguc2V0TnVtKGEyLCBjMik7XG4gICAgICAgICAgdGhpcy5leS5zZXROdW0oYjIsIGQyKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYTIgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGIyID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgdGhpcy5leC5zZXRWZWMyKGEyKTtcbiAgICAgICAgICB0aGlzLmV5LnNldFZlYzIoYjIpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhMiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHRoaXMuZXguc2V0VmVjMihhMi5leCk7XG4gICAgICAgICAgdGhpcy5leS5zZXRWZWMyKGEyLmV5KTtcbiAgICAgICAgfSBlbHNlIDtcbiAgICAgIH07XG4gICAgICBNYXQyMjIucHJvdG90eXBlLnNldElkZW50aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZXgueCA9IDE7XG4gICAgICAgIHRoaXMuZXkueCA9IDA7XG4gICAgICAgIHRoaXMuZXgueSA9IDA7XG4gICAgICAgIHRoaXMuZXkueSA9IDE7XG4gICAgICB9O1xuICAgICAgTWF0MjIyLnByb3RvdHlwZS5zZXRaZXJvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZXgueCA9IDA7XG4gICAgICAgIHRoaXMuZXkueCA9IDA7XG4gICAgICAgIHRoaXMuZXgueSA9IDA7XG4gICAgICAgIHRoaXMuZXkueSA9IDA7XG4gICAgICB9O1xuICAgICAgTWF0MjIyLnByb3RvdHlwZS5nZXRJbnZlcnNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhMiA9IHRoaXMuZXgueDtcbiAgICAgICAgdmFyIGIyID0gdGhpcy5leS54O1xuICAgICAgICB2YXIgYzIgPSB0aGlzLmV4Lnk7XG4gICAgICAgIHZhciBkMiA9IHRoaXMuZXkueTtcbiAgICAgICAgdmFyIGRldCA9IGEyICogZDIgLSBiMiAqIGMyO1xuICAgICAgICBpZiAoZGV0ICE9PSAwKSB7XG4gICAgICAgICAgZGV0ID0gMSAvIGRldDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW14ID0gbmV3IE1hdDIyMigpO1xuICAgICAgICBpbXguZXgueCA9IGRldCAqIGQyO1xuICAgICAgICBpbXguZXkueCA9IC1kZXQgKiBiMjtcbiAgICAgICAgaW14LmV4LnkgPSAtZGV0ICogYzI7XG4gICAgICAgIGlteC5leS55ID0gZGV0ICogYTI7XG4gICAgICAgIHJldHVybiBpbXg7XG4gICAgICB9O1xuICAgICAgTWF0MjIyLnByb3RvdHlwZS5zb2x2ZSA9IGZ1bmN0aW9uKHYzKSB7XG4gICAgICAgIHZhciBhMiA9IHRoaXMuZXgueDtcbiAgICAgICAgdmFyIGIyID0gdGhpcy5leS54O1xuICAgICAgICB2YXIgYzIgPSB0aGlzLmV4Lnk7XG4gICAgICAgIHZhciBkMiA9IHRoaXMuZXkueTtcbiAgICAgICAgdmFyIGRldCA9IGEyICogZDIgLSBiMiAqIGMyO1xuICAgICAgICBpZiAoZGV0ICE9PSAwKSB7XG4gICAgICAgICAgZGV0ID0gMSAvIGRldDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdyA9IFZlYzIuemVybygpO1xuICAgICAgICB3LnggPSBkZXQgKiAoZDIgKiB2My54IC0gYjIgKiB2My55KTtcbiAgICAgICAgdy55ID0gZGV0ICogKGEyICogdjMueSAtIGMyICogdjMueCk7XG4gICAgICAgIHJldHVybiB3O1xuICAgICAgfTtcbiAgICAgIE1hdDIyMi5tdWwgPSBmdW5jdGlvbihteCwgdjMpIHtcbiAgICAgICAgaWYgKHYzICYmIFwieFwiIGluIHYzICYmIFwieVwiIGluIHYzKSB7XG4gICAgICAgICAgdmFyIHgyID0gbXguZXgueCAqIHYzLnggKyBteC5leS54ICogdjMueTtcbiAgICAgICAgICB2YXIgeSA9IG14LmV4LnkgKiB2My54ICsgbXguZXkueSAqIHYzLnk7XG4gICAgICAgICAgcmV0dXJuIFZlYzIubmVvKHgyLCB5KTtcbiAgICAgICAgfSBlbHNlIGlmICh2MyAmJiBcImV4XCIgaW4gdjMgJiYgXCJleVwiIGluIHYzKSB7XG4gICAgICAgICAgdmFyIGEyID0gbXguZXgueCAqIHYzLmV4LnggKyBteC5leS54ICogdjMuZXgueTtcbiAgICAgICAgICB2YXIgYjIgPSBteC5leC54ICogdjMuZXkueCArIG14LmV5LnggKiB2My5leS55O1xuICAgICAgICAgIHZhciBjMiA9IG14LmV4LnkgKiB2My5leC54ICsgbXguZXkueSAqIHYzLmV4Lnk7XG4gICAgICAgICAgdmFyIGQyID0gbXguZXgueSAqIHYzLmV5LnggKyBteC5leS55ICogdjMuZXkueTtcbiAgICAgICAgICByZXR1cm4gbmV3IE1hdDIyMihhMiwgYjIsIGMyLCBkMik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYXQyMjIubXVsVmVjMiA9IGZ1bmN0aW9uKG14LCB2Mykge1xuICAgICAgICB2YXIgeDIgPSBteC5leC54ICogdjMueCArIG14LmV5LnggKiB2My55O1xuICAgICAgICB2YXIgeSA9IG14LmV4LnkgKiB2My54ICsgbXguZXkueSAqIHYzLnk7XG4gICAgICAgIHJldHVybiBWZWMyLm5lbyh4MiwgeSk7XG4gICAgICB9O1xuICAgICAgTWF0MjIyLm11bE1hdDIyID0gZnVuY3Rpb24obXgsIHYzKSB7XG4gICAgICAgIHZhciBhMiA9IG14LmV4LnggKiB2My5leC54ICsgbXguZXkueCAqIHYzLmV4Lnk7XG4gICAgICAgIHZhciBiMiA9IG14LmV4LnggKiB2My5leS54ICsgbXguZXkueCAqIHYzLmV5Lnk7XG4gICAgICAgIHZhciBjMiA9IG14LmV4LnkgKiB2My5leC54ICsgbXguZXkueSAqIHYzLmV4Lnk7XG4gICAgICAgIHZhciBkMiA9IG14LmV4LnkgKiB2My5leS54ICsgbXguZXkueSAqIHYzLmV5Lnk7XG4gICAgICAgIHJldHVybiBuZXcgTWF0MjIyKGEyLCBiMiwgYzIsIGQyKTtcbiAgICAgIH07XG4gICAgICBNYXQyMjIubXVsVCA9IGZ1bmN0aW9uKG14LCB2Mykge1xuICAgICAgICBpZiAodjMgJiYgXCJ4XCIgaW4gdjMgJiYgXCJ5XCIgaW4gdjMpIHtcbiAgICAgICAgICByZXR1cm4gVmVjMi5uZW8oVmVjMi5kb3QodjMsIG14LmV4KSwgVmVjMi5kb3QodjMsIG14LmV5KSk7XG4gICAgICAgIH0gZWxzZSBpZiAodjMgJiYgXCJleFwiIGluIHYzICYmIFwiZXlcIiBpbiB2Mykge1xuICAgICAgICAgIHZhciBjMSA9IFZlYzIubmVvKFZlYzIuZG90KG14LmV4LCB2My5leCksIFZlYzIuZG90KG14LmV5LCB2My5leCkpO1xuICAgICAgICAgIHZhciBjMiA9IFZlYzIubmVvKFZlYzIuZG90KG14LmV4LCB2My5leSksIFZlYzIuZG90KG14LmV5LCB2My5leSkpO1xuICAgICAgICAgIHJldHVybiBuZXcgTWF0MjIyKGMxLCBjMik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNYXQyMjIubXVsVFZlYzIgPSBmdW5jdGlvbihteCwgdjMpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIubmVvKFZlYzIuZG90KHYzLCBteC5leCksIFZlYzIuZG90KHYzLCBteC5leSkpO1xuICAgICAgfTtcbiAgICAgIE1hdDIyMi5tdWxUTWF0MjIgPSBmdW5jdGlvbihteCwgdjMpIHtcbiAgICAgICAgdmFyIGMxID0gVmVjMi5uZW8oVmVjMi5kb3QobXguZXgsIHYzLmV4KSwgVmVjMi5kb3QobXguZXksIHYzLmV4KSk7XG4gICAgICAgIHZhciBjMiA9IFZlYzIubmVvKFZlYzIuZG90KG14LmV4LCB2My5leSksIFZlYzIuZG90KG14LmV5LCB2My5leSkpO1xuICAgICAgICByZXR1cm4gbmV3IE1hdDIyMihjMSwgYzIpO1xuICAgICAgfTtcbiAgICAgIE1hdDIyMi5hYnMgPSBmdW5jdGlvbihteCkge1xuICAgICAgICByZXR1cm4gbmV3IE1hdDIyMihWZWMyLmFicyhteC5leCksIFZlYzIuYWJzKG14LmV5KSk7XG4gICAgICB9O1xuICAgICAgTWF0MjIyLmFkZCA9IGZ1bmN0aW9uKG14MSwgbXgyKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWF0MjIyKFZlYzIuYWRkKG14MS5leCwgbXgyLmV4KSwgVmVjMi5hZGQobXgxLmV5LCBteDIuZXkpKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gTWF0MjIyO1xuICAgIH0oKVxuICApO1xuICB2YXIgbWF0aF9zcXJ0JDIgPSBNYXRoLnNxcnQ7XG4gIHZhciBwb2ludEEkMSA9IHZlYzIoMCwgMCk7XG4gIHZhciBwb2ludEIkMSA9IHZlYzIoMCwgMCk7XG4gIHZhciB0ZW1wJDMgPSB2ZWMyKDAsIDApO1xuICB2YXIgY0EkMSA9IHZlYzIoMCwgMCk7XG4gIHZhciBjQiQxID0gdmVjMigwLCAwKTtcbiAgdmFyIGRpc3QgPSB2ZWMyKDAsIDApO1xuICB2YXIgcGxhbmVQb2ludCQyID0gdmVjMigwLCAwKTtcbiAgdmFyIGNsaXBQb2ludCQxID0gdmVjMigwLCAwKTtcbiAgZXhwb3J0czIuTWFuaWZvbGRUeXBlID0gdm9pZCAwO1xuICAoZnVuY3Rpb24oTWFuaWZvbGRUeXBlMikge1xuICAgIE1hbmlmb2xkVHlwZTJbTWFuaWZvbGRUeXBlMltcImVfdW5zZXRcIl0gPSAtMV0gPSBcImVfdW5zZXRcIjtcbiAgICBNYW5pZm9sZFR5cGUyW01hbmlmb2xkVHlwZTJbXCJlX2NpcmNsZXNcIl0gPSAwXSA9IFwiZV9jaXJjbGVzXCI7XG4gICAgTWFuaWZvbGRUeXBlMltNYW5pZm9sZFR5cGUyW1wiZV9mYWNlQVwiXSA9IDFdID0gXCJlX2ZhY2VBXCI7XG4gICAgTWFuaWZvbGRUeXBlMltNYW5pZm9sZFR5cGUyW1wiZV9mYWNlQlwiXSA9IDJdID0gXCJlX2ZhY2VCXCI7XG4gIH0pKGV4cG9ydHMyLk1hbmlmb2xkVHlwZSB8fCAoZXhwb3J0czIuTWFuaWZvbGRUeXBlID0ge30pKTtcbiAgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlID0gdm9pZCAwO1xuICAoZnVuY3Rpb24oQ29udGFjdEZlYXR1cmVUeXBlMikge1xuICAgIENvbnRhY3RGZWF0dXJlVHlwZTJbQ29udGFjdEZlYXR1cmVUeXBlMltcImVfdW5zZXRcIl0gPSAtMV0gPSBcImVfdW5zZXRcIjtcbiAgICBDb250YWN0RmVhdHVyZVR5cGUyW0NvbnRhY3RGZWF0dXJlVHlwZTJbXCJlX3ZlcnRleFwiXSA9IDBdID0gXCJlX3ZlcnRleFwiO1xuICAgIENvbnRhY3RGZWF0dXJlVHlwZTJbQ29udGFjdEZlYXR1cmVUeXBlMltcImVfZmFjZVwiXSA9IDFdID0gXCJlX2ZhY2VcIjtcbiAgfSkoZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlIHx8IChleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUgPSB7fSkpO1xuICBleHBvcnRzMi5Qb2ludFN0YXRlID0gdm9pZCAwO1xuICAoZnVuY3Rpb24oUG9pbnRTdGF0ZTIpIHtcbiAgICBQb2ludFN0YXRlMltQb2ludFN0YXRlMltcIm51bGxTdGF0ZVwiXSA9IDBdID0gXCJudWxsU3RhdGVcIjtcbiAgICBQb2ludFN0YXRlMltQb2ludFN0YXRlMltcImFkZFN0YXRlXCJdID0gMV0gPSBcImFkZFN0YXRlXCI7XG4gICAgUG9pbnRTdGF0ZTJbUG9pbnRTdGF0ZTJbXCJwZXJzaXN0U3RhdGVcIl0gPSAyXSA9IFwicGVyc2lzdFN0YXRlXCI7XG4gICAgUG9pbnRTdGF0ZTJbUG9pbnRTdGF0ZTJbXCJyZW1vdmVTdGF0ZVwiXSA9IDNdID0gXCJyZW1vdmVTdGF0ZVwiO1xuICB9KShleHBvcnRzMi5Qb2ludFN0YXRlIHx8IChleHBvcnRzMi5Qb2ludFN0YXRlID0ge30pKTtcbiAgdmFyIENsaXBWZXJ0ZXggPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gQ2xpcFZlcnRleDIoKSB7XG4gICAgICAgIHRoaXMudiA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMuaWQgPSBuZXcgQ29udGFjdElEKCk7XG4gICAgICB9XG4gICAgICBDbGlwVmVydGV4Mi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obykge1xuICAgICAgICBjb3B5VmVjMih0aGlzLnYsIG8udik7XG4gICAgICAgIHRoaXMuaWQuc2V0KG8uaWQpO1xuICAgICAgfTtcbiAgICAgIENsaXBWZXJ0ZXgyLnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHplcm9WZWMyKHRoaXMudik7XG4gICAgICAgIHRoaXMuaWQucmVjeWNsZSgpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBDbGlwVmVydGV4MjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIE1hbmlmb2xkID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIE1hbmlmb2xkMigpIHtcbiAgICAgICAgdGhpcy5sb2NhbE5vcm1hbCA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMubG9jYWxQb2ludCA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMucG9pbnRzID0gW25ldyBNYW5pZm9sZFBvaW50KCksIG5ldyBNYW5pZm9sZFBvaW50KCldO1xuICAgICAgICB0aGlzLnBvaW50Q291bnQgPSAwO1xuICAgICAgfVxuICAgICAgTWFuaWZvbGQyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih0aGF0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHRoYXQudHlwZTtcbiAgICAgICAgY29weVZlYzIodGhpcy5sb2NhbE5vcm1hbCwgdGhhdC5sb2NhbE5vcm1hbCk7XG4gICAgICAgIGNvcHlWZWMyKHRoaXMubG9jYWxQb2ludCwgdGhhdC5sb2NhbFBvaW50KTtcbiAgICAgICAgdGhpcy5wb2ludENvdW50ID0gdGhhdC5wb2ludENvdW50O1xuICAgICAgICB0aGlzLnBvaW50c1swXS5zZXQodGhhdC5wb2ludHNbMF0pO1xuICAgICAgICB0aGlzLnBvaW50c1sxXS5zZXQodGhhdC5wb2ludHNbMV0pO1xuICAgICAgfTtcbiAgICAgIE1hbmlmb2xkMi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnR5cGUgPSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV91bnNldDtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5sb2NhbE5vcm1hbCk7XG4gICAgICAgIHplcm9WZWMyKHRoaXMubG9jYWxQb2ludCk7XG4gICAgICAgIHRoaXMucG9pbnRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMucG9pbnRzWzBdLnJlY3ljbGUoKTtcbiAgICAgICAgdGhpcy5wb2ludHNbMV0ucmVjeWNsZSgpO1xuICAgICAgfTtcbiAgICAgIE1hbmlmb2xkMi5wcm90b3R5cGUuZ2V0V29ybGRNYW5pZm9sZCA9IGZ1bmN0aW9uKHdtLCB4ZkEyLCByYWRpdXNBLCB4ZkIyLCByYWRpdXNCKSB7XG4gICAgICAgIGlmICh0aGlzLnBvaW50Q291bnQgPT0gMCkge1xuICAgICAgICAgIHJldHVybiB3bTtcbiAgICAgICAgfVxuICAgICAgICB3bSA9IHdtIHx8IG5ldyBXb3JsZE1hbmlmb2xkKCk7XG4gICAgICAgIHdtLnBvaW50Q291bnQgPSB0aGlzLnBvaW50Q291bnQ7XG4gICAgICAgIHZhciBub3JtYWwzID0gd20ubm9ybWFsO1xuICAgICAgICB2YXIgcG9pbnRzID0gd20ucG9pbnRzO1xuICAgICAgICB2YXIgc2VwYXJhdGlvbnMgPSB3bS5zZXBhcmF0aW9ucztcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIGV4cG9ydHMyLk1hbmlmb2xkVHlwZS5lX2NpcmNsZXM6IHtcbiAgICAgICAgICAgIHNldFZlYzIobm9ybWFsMywgMSwgMCk7XG4gICAgICAgICAgICB2YXIgbWFuaWZvbGRQb2ludCA9IHRoaXMucG9pbnRzWzBdO1xuICAgICAgICAgICAgdHJhbnNmb3JtVmVjMihwb2ludEEkMSwgeGZBMiwgdGhpcy5sb2NhbFBvaW50KTtcbiAgICAgICAgICAgIHRyYW5zZm9ybVZlYzIocG9pbnRCJDEsIHhmQjIsIG1hbmlmb2xkUG9pbnQubG9jYWxQb2ludCk7XG4gICAgICAgICAgICBzdWJWZWMyKGRpc3QsIHBvaW50QiQxLCBwb2ludEEkMSk7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoU3FyID0gbGVuZ3RoU3FyVmVjMihkaXN0KTtcbiAgICAgICAgICAgIGlmIChsZW5ndGhTcXIgPiBFUFNJTE9OICogRVBTSUxPTikge1xuICAgICAgICAgICAgICB2YXIgbGVuZ3RoXzEgPSBtYXRoX3NxcnQkMihsZW5ndGhTcXIpO1xuICAgICAgICAgICAgICBzY2FsZVZlYzIobm9ybWFsMywgMSAvIGxlbmd0aF8xLCBkaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbWJpbmUyVmVjMihjQSQxLCAxLCBwb2ludEEkMSwgcmFkaXVzQSwgbm9ybWFsMyk7XG4gICAgICAgICAgICBjb21iaW5lMlZlYzIoY0IkMSwgMSwgcG9pbnRCJDEsIC1yYWRpdXNCLCBub3JtYWwzKTtcbiAgICAgICAgICAgIGNvbWJpbmUyVmVjMihwb2ludHNbMF0sIDAuNSwgY0EkMSwgMC41LCBjQiQxKTtcbiAgICAgICAgICAgIHNlcGFyYXRpb25zWzBdID0gZG90VmVjMihzdWJWZWMyKHRlbXAkMywgY0IkMSwgY0EkMSksIG5vcm1hbDMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgZXhwb3J0czIuTWFuaWZvbGRUeXBlLmVfZmFjZUE6IHtcbiAgICAgICAgICAgIHJvdFZlYzIobm9ybWFsMywgeGZBMi5xLCB0aGlzLmxvY2FsTm9ybWFsKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybVZlYzIocGxhbmVQb2ludCQyLCB4ZkEyLCB0aGlzLmxvY2FsUG9pbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvaW50Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgICB2YXIgbWFuaWZvbGRQb2ludCA9IHRoaXMucG9pbnRzW2ldO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm1WZWMyKGNsaXBQb2ludCQxLCB4ZkIyLCBtYW5pZm9sZFBvaW50LmxvY2FsUG9pbnQpO1xuICAgICAgICAgICAgICBjb21iaW5lMlZlYzIoY0EkMSwgMSwgY2xpcFBvaW50JDEsIHJhZGl1c0EgLSBkb3RWZWMyKHN1YlZlYzIodGVtcCQzLCBjbGlwUG9pbnQkMSwgcGxhbmVQb2ludCQyKSwgbm9ybWFsMyksIG5vcm1hbDMpO1xuICAgICAgICAgICAgICBjb21iaW5lMlZlYzIoY0IkMSwgMSwgY2xpcFBvaW50JDEsIC1yYWRpdXNCLCBub3JtYWwzKTtcbiAgICAgICAgICAgICAgY29tYmluZTJWZWMyKHBvaW50c1tpXSwgMC41LCBjQSQxLCAwLjUsIGNCJDEpO1xuICAgICAgICAgICAgICBzZXBhcmF0aW9uc1tpXSA9IGRvdFZlYzIoc3ViVmVjMih0ZW1wJDMsIGNCJDEsIGNBJDEpLCBub3JtYWwzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIGV4cG9ydHMyLk1hbmlmb2xkVHlwZS5lX2ZhY2VCOiB7XG4gICAgICAgICAgICByb3RWZWMyKG5vcm1hbDMsIHhmQjIucSwgdGhpcy5sb2NhbE5vcm1hbCk7XG4gICAgICAgICAgICB0cmFuc2Zvcm1WZWMyKHBsYW5lUG9pbnQkMiwgeGZCMiwgdGhpcy5sb2NhbFBvaW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb2ludENvdW50OyArK2kpIHtcbiAgICAgICAgICAgICAgdmFyIG1hbmlmb2xkUG9pbnQgPSB0aGlzLnBvaW50c1tpXTtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtVmVjMihjbGlwUG9pbnQkMSwgeGZBMiwgbWFuaWZvbGRQb2ludC5sb2NhbFBvaW50KTtcbiAgICAgICAgICAgICAgY29tYmluZTJWZWMyKGNCJDEsIDEsIGNsaXBQb2ludCQxLCByYWRpdXNCIC0gZG90VmVjMihzdWJWZWMyKHRlbXAkMywgY2xpcFBvaW50JDEsIHBsYW5lUG9pbnQkMiksIG5vcm1hbDMpLCBub3JtYWwzKTtcbiAgICAgICAgICAgICAgY29tYmluZTJWZWMyKGNBJDEsIDEsIGNsaXBQb2ludCQxLCAtcmFkaXVzQSwgbm9ybWFsMyk7XG4gICAgICAgICAgICAgIGNvbWJpbmUyVmVjMihwb2ludHNbaV0sIDAuNSwgY0EkMSwgMC41LCBjQiQxKTtcbiAgICAgICAgICAgICAgc2VwYXJhdGlvbnNbaV0gPSBkb3RWZWMyKHN1YlZlYzIodGVtcCQzLCBjQSQxLCBjQiQxKSwgbm9ybWFsMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZWdWZWMyKG5vcm1hbDMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3bTtcbiAgICAgIH07XG4gICAgICBNYW5pZm9sZDIuY2xpcFNlZ21lbnRUb0xpbmUgPSBjbGlwU2VnbWVudFRvTGluZTtcbiAgICAgIE1hbmlmb2xkMi5DbGlwVmVydGV4ID0gQ2xpcFZlcnRleDtcbiAgICAgIE1hbmlmb2xkMi5nZXRQb2ludFN0YXRlcyA9IGdldFBvaW50U3RhdGVzO1xuICAgICAgTWFuaWZvbGQyLlBvaW50U3RhdGUgPSBleHBvcnRzMi5Qb2ludFN0YXRlO1xuICAgICAgcmV0dXJuIE1hbmlmb2xkMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIE1hbmlmb2xkUG9pbnQgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gTWFuaWZvbGRQb2ludDIoKSB7XG4gICAgICAgIHRoaXMubG9jYWxQb2ludCA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMubm9ybWFsSW1wdWxzZSA9IDA7XG4gICAgICAgIHRoaXMudGFuZ2VudEltcHVsc2UgPSAwO1xuICAgICAgICB0aGlzLmlkID0gbmV3IENvbnRhY3RJRCgpO1xuICAgICAgfVxuICAgICAgTWFuaWZvbGRQb2ludDIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHRoYXQpIHtcbiAgICAgICAgY29weVZlYzIodGhpcy5sb2NhbFBvaW50LCB0aGF0LmxvY2FsUG9pbnQpO1xuICAgICAgICB0aGlzLm5vcm1hbEltcHVsc2UgPSB0aGF0Lm5vcm1hbEltcHVsc2U7XG4gICAgICAgIHRoaXMudGFuZ2VudEltcHVsc2UgPSB0aGF0LnRhbmdlbnRJbXB1bHNlO1xuICAgICAgICB0aGlzLmlkLnNldCh0aGF0LmlkKTtcbiAgICAgIH07XG4gICAgICBNYW5pZm9sZFBvaW50Mi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB6ZXJvVmVjMih0aGlzLmxvY2FsUG9pbnQpO1xuICAgICAgICB0aGlzLm5vcm1hbEltcHVsc2UgPSAwO1xuICAgICAgICB0aGlzLnRhbmdlbnRJbXB1bHNlID0gMDtcbiAgICAgICAgdGhpcy5pZC5yZWN5Y2xlKCk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIE1hbmlmb2xkUG9pbnQyO1xuICAgIH0oKVxuICApO1xuICB2YXIgQ29udGFjdElEID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIENvbnRhY3RJRDIoKSB7XG4gICAgICAgIHRoaXMua2V5ID0gLTE7XG4gICAgICAgIHRoaXMuaW5kZXhBID0gLTE7XG4gICAgICAgIHRoaXMuaW5kZXhCID0gLTE7XG4gICAgICAgIHRoaXMudHlwZUEgPSBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV91bnNldDtcbiAgICAgICAgdGhpcy50eXBlQiA9IGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX3Vuc2V0O1xuICAgICAgfVxuICAgICAgQ29udGFjdElEMi5wcm90b3R5cGUuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbihpbmRleEEsIHR5cGVBLCBpbmRleEIsIHR5cGVCKSB7XG4gICAgICAgIHRoaXMuaW5kZXhBID0gaW5kZXhBO1xuICAgICAgICB0aGlzLmluZGV4QiA9IGluZGV4QjtcbiAgICAgICAgdGhpcy50eXBlQSA9IHR5cGVBO1xuICAgICAgICB0aGlzLnR5cGVCID0gdHlwZUI7XG4gICAgICAgIHRoaXMua2V5ID0gdGhpcy5pbmRleEEgKyB0aGlzLmluZGV4QiAqIDQgKyB0aGlzLnR5cGVBICogMTYgKyB0aGlzLnR5cGVCICogNjQ7XG4gICAgICB9O1xuICAgICAgQ29udGFjdElEMi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24odGhhdCkge1xuICAgICAgICB0aGlzLmluZGV4QSA9IHRoYXQuaW5kZXhBO1xuICAgICAgICB0aGlzLmluZGV4QiA9IHRoYXQuaW5kZXhCO1xuICAgICAgICB0aGlzLnR5cGVBID0gdGhhdC50eXBlQTtcbiAgICAgICAgdGhpcy50eXBlQiA9IHRoYXQudHlwZUI7XG4gICAgICAgIHRoaXMua2V5ID0gdGhpcy5pbmRleEEgKyB0aGlzLmluZGV4QiAqIDQgKyB0aGlzLnR5cGVBICogMTYgKyB0aGlzLnR5cGVCICogNjQ7XG4gICAgICB9O1xuICAgICAgQ29udGFjdElEMi5wcm90b3R5cGUuc3dhcEZlYXR1cmVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbmRleEEgPSB0aGlzLmluZGV4QTtcbiAgICAgICAgdmFyIGluZGV4QiA9IHRoaXMuaW5kZXhCO1xuICAgICAgICB2YXIgdHlwZUEgPSB0aGlzLnR5cGVBO1xuICAgICAgICB2YXIgdHlwZUIgPSB0aGlzLnR5cGVCO1xuICAgICAgICB0aGlzLmluZGV4QSA9IGluZGV4QjtcbiAgICAgICAgdGhpcy5pbmRleEIgPSBpbmRleEE7XG4gICAgICAgIHRoaXMudHlwZUEgPSB0eXBlQjtcbiAgICAgICAgdGhpcy50eXBlQiA9IHR5cGVBO1xuICAgICAgICB0aGlzLmtleSA9IHRoaXMuaW5kZXhBICsgdGhpcy5pbmRleEIgKiA0ICsgdGhpcy50eXBlQSAqIDE2ICsgdGhpcy50eXBlQiAqIDY0O1xuICAgICAgfTtcbiAgICAgIENvbnRhY3RJRDIucHJvdG90eXBlLnJlY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5pbmRleEEgPSAwO1xuICAgICAgICB0aGlzLmluZGV4QiA9IDA7XG4gICAgICAgIHRoaXMudHlwZUEgPSBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV91bnNldDtcbiAgICAgICAgdGhpcy50eXBlQiA9IGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX3Vuc2V0O1xuICAgICAgICB0aGlzLmtleSA9IC0xO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBDb250YWN0SUQyO1xuICAgIH0oKVxuICApO1xuICB2YXIgV29ybGRNYW5pZm9sZCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBXb3JsZE1hbmlmb2xkMigpIHtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSB2ZWMyKDAsIDApO1xuICAgICAgICB0aGlzLnBvaW50cyA9IFt2ZWMyKDAsIDApLCB2ZWMyKDAsIDApXTtcbiAgICAgICAgdGhpcy5zZXBhcmF0aW9ucyA9IFswLCAwXTtcbiAgICAgICAgdGhpcy5wb2ludENvdW50ID0gMDtcbiAgICAgIH1cbiAgICAgIFdvcmxkTWFuaWZvbGQyLnByb3RvdHlwZS5yZWN5Y2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHplcm9WZWMyKHRoaXMubm9ybWFsKTtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5wb2ludHNbMF0pO1xuICAgICAgICB6ZXJvVmVjMih0aGlzLnBvaW50c1sxXSk7XG4gICAgICAgIHRoaXMuc2VwYXJhdGlvbnNbMF0gPSAwO1xuICAgICAgICB0aGlzLnNlcGFyYXRpb25zWzFdID0gMDtcbiAgICAgICAgdGhpcy5wb2ludENvdW50ID0gMDtcbiAgICAgIH07XG4gICAgICByZXR1cm4gV29ybGRNYW5pZm9sZDI7XG4gICAgfSgpXG4gICk7XG4gIGZ1bmN0aW9uIGdldFBvaW50U3RhdGVzKHN0YXRlMSwgc3RhdGUyLCBtYW5pZm9sZDEsIG1hbmlmb2xkMikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFuaWZvbGQxLnBvaW50Q291bnQ7ICsraSkge1xuICAgICAgdmFyIGlkID0gbWFuaWZvbGQxLnBvaW50c1tpXS5pZDtcbiAgICAgIHN0YXRlMVtpXSA9IGV4cG9ydHMyLlBvaW50U3RhdGUucmVtb3ZlU3RhdGU7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1hbmlmb2xkMi5wb2ludENvdW50OyArK2opIHtcbiAgICAgICAgaWYgKG1hbmlmb2xkMi5wb2ludHNbal0uaWQua2V5ID09PSBpZC5rZXkpIHtcbiAgICAgICAgICBzdGF0ZTFbaV0gPSBleHBvcnRzMi5Qb2ludFN0YXRlLnBlcnNpc3RTdGF0ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hbmlmb2xkMi5wb2ludENvdW50OyArK2kpIHtcbiAgICAgIHZhciBpZCA9IG1hbmlmb2xkMi5wb2ludHNbaV0uaWQ7XG4gICAgICBzdGF0ZTJbaV0gPSBleHBvcnRzMi5Qb2ludFN0YXRlLmFkZFN0YXRlO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYW5pZm9sZDEucG9pbnRDb3VudDsgKytqKSB7XG4gICAgICAgIGlmIChtYW5pZm9sZDEucG9pbnRzW2pdLmlkLmtleSA9PT0gaWQua2V5KSB7XG4gICAgICAgICAgc3RhdGUyW2ldID0gZXhwb3J0czIuUG9pbnRTdGF0ZS5wZXJzaXN0U3RhdGU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gY2xpcFNlZ21lbnRUb0xpbmUodk91dCwgdkluLCBub3JtYWwzLCBvZmZzZXQsIHZlcnRleEluZGV4QSkge1xuICAgIHZhciBudW1PdXQgPSAwO1xuICAgIHZhciBkaXN0YW5jZTAgPSBkb3RWZWMyKG5vcm1hbDMsIHZJblswXS52KSAtIG9mZnNldDtcbiAgICB2YXIgZGlzdGFuY2UxID0gZG90VmVjMihub3JtYWwzLCB2SW5bMV0udikgLSBvZmZzZXQ7XG4gICAgaWYgKGRpc3RhbmNlMCA8PSAwKVxuICAgICAgdk91dFtudW1PdXQrK10uc2V0KHZJblswXSk7XG4gICAgaWYgKGRpc3RhbmNlMSA8PSAwKVxuICAgICAgdk91dFtudW1PdXQrK10uc2V0KHZJblsxXSk7XG4gICAgaWYgKGRpc3RhbmNlMCAqIGRpc3RhbmNlMSA8IDApIHtcbiAgICAgIHZhciBpbnRlcnAgPSBkaXN0YW5jZTAgLyAoZGlzdGFuY2UwIC0gZGlzdGFuY2UxKTtcbiAgICAgIGNvbWJpbmUyVmVjMih2T3V0W251bU91dF0udiwgMSAtIGludGVycCwgdkluWzBdLnYsIGludGVycCwgdkluWzFdLnYpO1xuICAgICAgdk91dFtudW1PdXRdLmlkLnNldEZlYXR1cmVzKHZlcnRleEluZGV4QSwgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4LCB2SW5bMF0uaWQuaW5kZXhCLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV9mYWNlKTtcbiAgICAgICsrbnVtT3V0O1xuICAgIH1cbiAgICByZXR1cm4gbnVtT3V0O1xuICB9XG4gIHZhciBtYXRoX3NxcnQkMSA9IE1hdGguc3FydDtcbiAgdmFyIG1hdGhfbWF4JDIgPSBNYXRoLm1heDtcbiAgdmFyIG1hdGhfbWluJDQgPSBNYXRoLm1pbjtcbiAgdmFyIGNvbnRhY3RQb29sID0gbmV3IFBvb2woe1xuICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IENvbnRhY3QoKTtcbiAgICB9LFxuICAgIHJlbGVhc2U6IGZ1bmN0aW9uKGNvbnRhY3QpIHtcbiAgICAgIGNvbnRhY3QucmVjeWNsZSgpO1xuICAgIH1cbiAgfSk7XG4gIHZhciBvbGRNYW5pZm9sZCA9IG5ldyBNYW5pZm9sZCgpO1xuICB2YXIgd29ybGRNYW5pZm9sZCA9IG5ldyBXb3JsZE1hbmlmb2xkKCk7XG4gIHZhciBDb250YWN0RWRnZSA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBDb250YWN0RWRnZTIoY29udGFjdCkge1xuICAgICAgICB0aGlzLnByZXYgPSBudWxsO1xuICAgICAgICB0aGlzLm5leHQgPSBudWxsO1xuICAgICAgICB0aGlzLm90aGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb250YWN0ID0gY29udGFjdDtcbiAgICAgIH1cbiAgICAgIENvbnRhY3RFZGdlMi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnByZXYgPSBudWxsO1xuICAgICAgICB0aGlzLm5leHQgPSBudWxsO1xuICAgICAgICB0aGlzLm90aGVyID0gbnVsbDtcbiAgICAgIH07XG4gICAgICByZXR1cm4gQ29udGFjdEVkZ2UyO1xuICAgIH0oKVxuICApO1xuICBmdW5jdGlvbiBtaXhGcmljdGlvbihmcmljdGlvbjEsIGZyaWN0aW9uMikge1xuICAgIHJldHVybiBtYXRoX3NxcnQkMShmcmljdGlvbjEgKiBmcmljdGlvbjIpO1xuICB9XG4gIGZ1bmN0aW9uIG1peFJlc3RpdHV0aW9uKHJlc3RpdHV0aW9uMSwgcmVzdGl0dXRpb24yKSB7XG4gICAgcmV0dXJuIHJlc3RpdHV0aW9uMSA+IHJlc3RpdHV0aW9uMiA/IHJlc3RpdHV0aW9uMSA6IHJlc3RpdHV0aW9uMjtcbiAgfVxuICB2YXIgc19yZWdpc3RlcnMgPSBbXTtcbiAgdmFyIFZlbG9jaXR5Q29uc3RyYWludFBvaW50ID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFZlbG9jaXR5Q29uc3RyYWludFBvaW50MigpIHtcbiAgICAgICAgdGhpcy5yQSA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMuckIgPSB2ZWMyKDAsIDApO1xuICAgICAgICB0aGlzLm5vcm1hbEltcHVsc2UgPSAwO1xuICAgICAgICB0aGlzLnRhbmdlbnRJbXB1bHNlID0gMDtcbiAgICAgICAgdGhpcy5ub3JtYWxNYXNzID0gMDtcbiAgICAgICAgdGhpcy50YW5nZW50TWFzcyA9IDA7XG4gICAgICAgIHRoaXMudmVsb2NpdHlCaWFzID0gMDtcbiAgICAgIH1cbiAgICAgIFZlbG9jaXR5Q29uc3RyYWludFBvaW50Mi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB6ZXJvVmVjMih0aGlzLnJBKTtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5yQik7XG4gICAgICAgIHRoaXMubm9ybWFsSW1wdWxzZSA9IDA7XG4gICAgICAgIHRoaXMudGFuZ2VudEltcHVsc2UgPSAwO1xuICAgICAgICB0aGlzLm5vcm1hbE1hc3MgPSAwO1xuICAgICAgICB0aGlzLnRhbmdlbnRNYXNzID0gMDtcbiAgICAgICAgdGhpcy52ZWxvY2l0eUJpYXMgPSAwO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBWZWxvY2l0eUNvbnN0cmFpbnRQb2ludDI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBjQSA9IHZlYzIoMCwgMCk7XG4gIHZhciB2QSA9IHZlYzIoMCwgMCk7XG4gIHZhciBjQiA9IHZlYzIoMCwgMCk7XG4gIHZhciB2QiA9IHZlYzIoMCwgMCk7XG4gIHZhciB0YW5nZW50JDEgPSB2ZWMyKDAsIDApO1xuICB2YXIgeGZBID0gdHJhbnNmb3JtKDAsIDAsIDApO1xuICB2YXIgeGZCID0gdHJhbnNmb3JtKDAsIDAsIDApO1xuICB2YXIgcG9pbnRBID0gdmVjMigwLCAwKTtcbiAgdmFyIHBvaW50QiA9IHZlYzIoMCwgMCk7XG4gIHZhciBjbGlwUG9pbnQgPSB2ZWMyKDAsIDApO1xuICB2YXIgcGxhbmVQb2ludCQxID0gdmVjMigwLCAwKTtcbiAgdmFyIHJBID0gdmVjMigwLCAwKTtcbiAgdmFyIHJCID0gdmVjMigwLCAwKTtcbiAgdmFyIFAkMSA9IHZlYzIoMCwgMCk7XG4gIHZhciBub3JtYWwkMiA9IHZlYzIoMCwgMCk7XG4gIHZhciBwb2ludCA9IHZlYzIoMCwgMCk7XG4gIHZhciBkdiA9IHZlYzIoMCwgMCk7XG4gIHZhciBkdjEgPSB2ZWMyKDAsIDApO1xuICB2YXIgZHYyID0gdmVjMigwLCAwKTtcbiAgdmFyIGIgPSB2ZWMyKDAsIDApO1xuICB2YXIgYSA9IHZlYzIoMCwgMCk7XG4gIHZhciB4ID0gdmVjMigwLCAwKTtcbiAgdmFyIGQgPSB2ZWMyKDAsIDApO1xuICB2YXIgUDEgPSB2ZWMyKDAsIDApO1xuICB2YXIgUDIgPSB2ZWMyKDAsIDApO1xuICB2YXIgdGVtcCQyID0gdmVjMigwLCAwKTtcbiAgdmFyIENvbnRhY3QgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gQ29udGFjdDIoKSB7XG4gICAgICAgIHRoaXMubV9ub2RlQSA9IG5ldyBDb250YWN0RWRnZSh0aGlzKTtcbiAgICAgICAgdGhpcy5tX25vZGVCID0gbmV3IENvbnRhY3RFZGdlKHRoaXMpO1xuICAgICAgICB0aGlzLm1fZml4dHVyZUEgPSBudWxsO1xuICAgICAgICB0aGlzLm1fZml4dHVyZUIgPSBudWxsO1xuICAgICAgICB0aGlzLm1faW5kZXhBID0gLTE7XG4gICAgICAgIHRoaXMubV9pbmRleEIgPSAtMTtcbiAgICAgICAgdGhpcy5tX2V2YWx1YXRlRmNuID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX21hbmlmb2xkID0gbmV3IE1hbmlmb2xkKCk7XG4gICAgICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX25leHQgPSBudWxsO1xuICAgICAgICB0aGlzLm1fdG9pID0gMTtcbiAgICAgICAgdGhpcy5tX3RvaUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5tX3RvaUZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2ZyaWN0aW9uID0gMDtcbiAgICAgICAgdGhpcy5tX3Jlc3RpdHV0aW9uID0gMDtcbiAgICAgICAgdGhpcy5tX3RhbmdlbnRTcGVlZCA9IDA7XG4gICAgICAgIHRoaXMubV9lbmFibGVkRmxhZyA9IHRydWU7XG4gICAgICAgIHRoaXMubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgIHRoaXMubV90b3VjaGluZ0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2ZpbHRlckZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2J1bGxldEhpdEZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2ltcHVsc2UgPSBuZXcgQ29udGFjdEltcHVsc2UodGhpcyk7XG4gICAgICAgIHRoaXMudl9wb2ludHMgPSBbbmV3IFZlbG9jaXR5Q29uc3RyYWludFBvaW50KCksIG5ldyBWZWxvY2l0eUNvbnN0cmFpbnRQb2ludCgpXTtcbiAgICAgICAgdGhpcy52X25vcm1hbCA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMudl9ub3JtYWxNYXNzID0gbmV3IE1hdDIyKCk7XG4gICAgICAgIHRoaXMudl9LID0gbmV3IE1hdDIyKCk7XG4gICAgICAgIHRoaXMudl9wb2ludENvdW50ID0gMDtcbiAgICAgICAgdGhpcy52X3RhbmdlbnRTcGVlZCA9IDA7XG4gICAgICAgIHRoaXMudl9mcmljdGlvbiA9IDA7XG4gICAgICAgIHRoaXMudl9yZXN0aXR1dGlvbiA9IDA7XG4gICAgICAgIHRoaXMudl9pbnZNYXNzQSA9IDA7XG4gICAgICAgIHRoaXMudl9pbnZNYXNzQiA9IDA7XG4gICAgICAgIHRoaXMudl9pbnZJQSA9IDA7XG4gICAgICAgIHRoaXMudl9pbnZJQiA9IDA7XG4gICAgICAgIHRoaXMucF9sb2NhbFBvaW50cyA9IFt2ZWMyKDAsIDApLCB2ZWMyKDAsIDApXTtcbiAgICAgICAgdGhpcy5wX2xvY2FsTm9ybWFsID0gdmVjMigwLCAwKTtcbiAgICAgICAgdGhpcy5wX2xvY2FsUG9pbnQgPSB2ZWMyKDAsIDApO1xuICAgICAgICB0aGlzLnBfbG9jYWxDZW50ZXJBID0gdmVjMigwLCAwKTtcbiAgICAgICAgdGhpcy5wX2xvY2FsQ2VudGVyQiA9IHZlYzIoMCwgMCk7XG4gICAgICAgIHRoaXMucF90eXBlID0gZXhwb3J0czIuTWFuaWZvbGRUeXBlLmVfdW5zZXQ7XG4gICAgICAgIHRoaXMucF9yYWRpdXNBID0gMDtcbiAgICAgICAgdGhpcy5wX3JhZGl1c0IgPSAwO1xuICAgICAgICB0aGlzLnBfcG9pbnRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMucF9pbnZNYXNzQSA9IDA7XG4gICAgICAgIHRoaXMucF9pbnZNYXNzQiA9IDA7XG4gICAgICAgIHRoaXMucF9pbnZJQSA9IDA7XG4gICAgICAgIHRoaXMucF9pbnZJQiA9IDA7XG4gICAgICB9XG4gICAgICBDb250YWN0Mi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGZBLCBpbmRleEEsIGZCLCBpbmRleEIsIGV2YWx1YXRlRmNuKSB7XG4gICAgICAgIHRoaXMubV9maXh0dXJlQSA9IGZBO1xuICAgICAgICB0aGlzLm1fZml4dHVyZUIgPSBmQjtcbiAgICAgICAgdGhpcy5tX2luZGV4QSA9IGluZGV4QTtcbiAgICAgICAgdGhpcy5tX2luZGV4QiA9IGluZGV4QjtcbiAgICAgICAgdGhpcy5tX2V2YWx1YXRlRmNuID0gZXZhbHVhdGVGY247XG4gICAgICAgIHRoaXMubV9mcmljdGlvbiA9IG1peEZyaWN0aW9uKHRoaXMubV9maXh0dXJlQS5tX2ZyaWN0aW9uLCB0aGlzLm1fZml4dHVyZUIubV9mcmljdGlvbik7XG4gICAgICAgIHRoaXMubV9yZXN0aXR1dGlvbiA9IG1peFJlc3RpdHV0aW9uKHRoaXMubV9maXh0dXJlQS5tX3Jlc3RpdHV0aW9uLCB0aGlzLm1fZml4dHVyZUIubV9yZXN0aXR1dGlvbik7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLnJlY3ljbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5tX25vZGVBLnJlY3ljbGUoKTtcbiAgICAgICAgdGhpcy5tX25vZGVCLnJlY3ljbGUoKTtcbiAgICAgICAgdGhpcy5tX2ZpeHR1cmVBID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX2ZpeHR1cmVCID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX2luZGV4QSA9IC0xO1xuICAgICAgICB0aGlzLm1faW5kZXhCID0gLTE7XG4gICAgICAgIHRoaXMubV9ldmFsdWF0ZUZjbiA9IG51bGw7XG4gICAgICAgIHRoaXMubV9tYW5pZm9sZC5yZWN5Y2xlKCk7XG4gICAgICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX25leHQgPSBudWxsO1xuICAgICAgICB0aGlzLm1fdG9pID0gMTtcbiAgICAgICAgdGhpcy5tX3RvaUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5tX3RvaUZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2ZyaWN0aW9uID0gMDtcbiAgICAgICAgdGhpcy5tX3Jlc3RpdHV0aW9uID0gMDtcbiAgICAgICAgdGhpcy5tX3RhbmdlbnRTcGVlZCA9IDA7XG4gICAgICAgIHRoaXMubV9lbmFibGVkRmxhZyA9IHRydWU7XG4gICAgICAgIHRoaXMubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgICAgIHRoaXMubV90b3VjaGluZ0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2ZpbHRlckZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2J1bGxldEhpdEZsYWcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2ltcHVsc2UucmVjeWNsZSgpO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hMiA9IHRoaXMudl9wb2ludHM7IF9pIDwgX2EyLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgIHZhciBwb2ludF8xID0gX2EyW19pXTtcbiAgICAgICAgICBwb2ludF8xLnJlY3ljbGUoKTtcbiAgICAgICAgfVxuICAgICAgICB6ZXJvVmVjMih0aGlzLnZfbm9ybWFsKTtcbiAgICAgICAgdGhpcy52X25vcm1hbE1hc3Muc2V0WmVybygpO1xuICAgICAgICB0aGlzLnZfSy5zZXRaZXJvKCk7XG4gICAgICAgIHRoaXMudl9wb2ludENvdW50ID0gMDtcbiAgICAgICAgdGhpcy52X3RhbmdlbnRTcGVlZCA9IDA7XG4gICAgICAgIHRoaXMudl9mcmljdGlvbiA9IDA7XG4gICAgICAgIHRoaXMudl9yZXN0aXR1dGlvbiA9IDA7XG4gICAgICAgIHRoaXMudl9pbnZNYXNzQSA9IDA7XG4gICAgICAgIHRoaXMudl9pbnZNYXNzQiA9IDA7XG4gICAgICAgIHRoaXMudl9pbnZJQSA9IDA7XG4gICAgICAgIHRoaXMudl9pbnZJQiA9IDA7XG4gICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSB0aGlzLnBfbG9jYWxQb2ludHM7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgdmFyIHBvaW50XzIgPSBfY1tfYl07XG4gICAgICAgICAgemVyb1ZlYzIocG9pbnRfMik7XG4gICAgICAgIH1cbiAgICAgICAgemVyb1ZlYzIodGhpcy5wX2xvY2FsTm9ybWFsKTtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5wX2xvY2FsUG9pbnQpO1xuICAgICAgICB6ZXJvVmVjMih0aGlzLnBfbG9jYWxDZW50ZXJBKTtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5wX2xvY2FsQ2VudGVyQik7XG4gICAgICAgIHRoaXMucF90eXBlID0gZXhwb3J0czIuTWFuaWZvbGRUeXBlLmVfdW5zZXQ7XG4gICAgICAgIHRoaXMucF9yYWRpdXNBID0gMDtcbiAgICAgICAgdGhpcy5wX3JhZGl1c0IgPSAwO1xuICAgICAgICB0aGlzLnBfcG9pbnRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMucF9pbnZNYXNzQSA9IDA7XG4gICAgICAgIHRoaXMucF9pbnZNYXNzQiA9IDA7XG4gICAgICAgIHRoaXMucF9pbnZJQSA9IDA7XG4gICAgICAgIHRoaXMucF9pbnZJQiA9IDA7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLmluaXRDb25zdHJhaW50ID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgZml4dHVyZUEgPSB0aGlzLm1fZml4dHVyZUE7XG4gICAgICAgIHZhciBmaXh0dXJlQiA9IHRoaXMubV9maXh0dXJlQjtcbiAgICAgICAgaWYgKGZpeHR1cmVBID09PSBudWxsIHx8IGZpeHR1cmVCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGJvZHlBID0gZml4dHVyZUEubV9ib2R5O1xuICAgICAgICB2YXIgYm9keUIgPSBmaXh0dXJlQi5tX2JvZHk7XG4gICAgICAgIGlmIChib2R5QSA9PT0gbnVsbCB8fCBib2R5QiA9PT0gbnVsbClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBzaGFwZUEgPSBmaXh0dXJlQS5tX3NoYXBlO1xuICAgICAgICB2YXIgc2hhcGVCID0gZml4dHVyZUIubV9zaGFwZTtcbiAgICAgICAgaWYgKHNoYXBlQSA9PT0gbnVsbCB8fCBzaGFwZUIgPT09IG51bGwpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgbWFuaWZvbGQgPSB0aGlzLm1fbWFuaWZvbGQ7XG4gICAgICAgIHZhciBwb2ludENvdW50ID0gbWFuaWZvbGQucG9pbnRDb3VudDtcbiAgICAgICAgdGhpcy52X2ludk1hc3NBID0gYm9keUEubV9pbnZNYXNzO1xuICAgICAgICB0aGlzLnZfaW52TWFzc0IgPSBib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMudl9pbnZJQSA9IGJvZHlBLm1faW52STtcbiAgICAgICAgdGhpcy52X2ludklCID0gYm9keUIubV9pbnZJO1xuICAgICAgICB0aGlzLnZfZnJpY3Rpb24gPSB0aGlzLm1fZnJpY3Rpb247XG4gICAgICAgIHRoaXMudl9yZXN0aXR1dGlvbiA9IHRoaXMubV9yZXN0aXR1dGlvbjtcbiAgICAgICAgdGhpcy52X3RhbmdlbnRTcGVlZCA9IHRoaXMubV90YW5nZW50U3BlZWQ7XG4gICAgICAgIHRoaXMudl9wb2ludENvdW50ID0gcG9pbnRDb3VudDtcbiAgICAgICAgdGhpcy52X0suc2V0WmVybygpO1xuICAgICAgICB0aGlzLnZfbm9ybWFsTWFzcy5zZXRaZXJvKCk7XG4gICAgICAgIHRoaXMucF9pbnZNYXNzQSA9IGJvZHlBLm1faW52TWFzcztcbiAgICAgICAgdGhpcy5wX2ludk1hc3NCID0gYm9keUIubV9pbnZNYXNzO1xuICAgICAgICB0aGlzLnBfaW52SUEgPSBib2R5QS5tX2ludkk7XG4gICAgICAgIHRoaXMucF9pbnZJQiA9IGJvZHlCLm1faW52STtcbiAgICAgICAgY29weVZlYzIodGhpcy5wX2xvY2FsQ2VudGVyQSwgYm9keUEubV9zd2VlcC5sb2NhbENlbnRlcik7XG4gICAgICAgIGNvcHlWZWMyKHRoaXMucF9sb2NhbENlbnRlckIsIGJvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICAgICAgICB0aGlzLnBfcmFkaXVzQSA9IHNoYXBlQS5tX3JhZGl1cztcbiAgICAgICAgdGhpcy5wX3JhZGl1c0IgPSBzaGFwZUIubV9yYWRpdXM7XG4gICAgICAgIHRoaXMucF90eXBlID0gbWFuaWZvbGQudHlwZTtcbiAgICAgICAgY29weVZlYzIodGhpcy5wX2xvY2FsTm9ybWFsLCBtYW5pZm9sZC5sb2NhbE5vcm1hbCk7XG4gICAgICAgIGNvcHlWZWMyKHRoaXMucF9sb2NhbFBvaW50LCBtYW5pZm9sZC5sb2NhbFBvaW50KTtcbiAgICAgICAgdGhpcy5wX3BvaW50Q291bnQgPSBwb2ludENvdW50O1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IFNldHRpbmdzSW50ZXJuYWwubWF4TWFuaWZvbGRQb2ludHM7ICsraikge1xuICAgICAgICAgIHRoaXMudl9wb2ludHNbal0ucmVjeWNsZSgpO1xuICAgICAgICAgIHplcm9WZWMyKHRoaXMucF9sb2NhbFBvaW50c1tqXSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwb2ludENvdW50OyArK2opIHtcbiAgICAgICAgICB2YXIgY3AgPSBtYW5pZm9sZC5wb2ludHNbal07XG4gICAgICAgICAgdmFyIHZjcCA9IHRoaXMudl9wb2ludHNbal07XG4gICAgICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgICAgICB2Y3Aubm9ybWFsSW1wdWxzZSA9IHN0ZXAuZHRSYXRpbyAqIGNwLm5vcm1hbEltcHVsc2U7XG4gICAgICAgICAgICB2Y3AudGFuZ2VudEltcHVsc2UgPSBzdGVwLmR0UmF0aW8gKiBjcC50YW5nZW50SW1wdWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29weVZlYzIodGhpcy5wX2xvY2FsUG9pbnRzW2pdLCBjcC5sb2NhbFBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS5nZXRNYW5pZm9sZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX21hbmlmb2xkO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS5nZXRXb3JsZE1hbmlmb2xkID0gZnVuY3Rpb24od29ybGRNYW5pZm9sZDIpIHtcbiAgICAgICAgdmFyIGZpeHR1cmVBID0gdGhpcy5tX2ZpeHR1cmVBO1xuICAgICAgICB2YXIgZml4dHVyZUIgPSB0aGlzLm1fZml4dHVyZUI7XG4gICAgICAgIGlmIChmaXh0dXJlQSA9PT0gbnVsbCB8fCBmaXh0dXJlQiA9PT0gbnVsbClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBib2R5QSA9IGZpeHR1cmVBLm1fYm9keTtcbiAgICAgICAgdmFyIGJvZHlCID0gZml4dHVyZUIubV9ib2R5O1xuICAgICAgICBpZiAoYm9keUEgPT09IG51bGwgfHwgYm9keUIgPT09IG51bGwpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgc2hhcGVBID0gZml4dHVyZUEubV9zaGFwZTtcbiAgICAgICAgdmFyIHNoYXBlQiA9IGZpeHR1cmVCLm1fc2hhcGU7XG4gICAgICAgIGlmIChzaGFwZUEgPT09IG51bGwgfHwgc2hhcGVCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9tYW5pZm9sZC5nZXRXb3JsZE1hbmlmb2xkKHdvcmxkTWFuaWZvbGQyLCBib2R5QS5nZXRUcmFuc2Zvcm0oKSwgc2hhcGVBLm1fcmFkaXVzLCBib2R5Qi5nZXRUcmFuc2Zvcm0oKSwgc2hhcGVCLm1fcmFkaXVzKTtcbiAgICAgIH07XG4gICAgICBDb250YWN0Mi5wcm90b3R5cGUuc2V0RW5hYmxlZCA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICAgICAgdGhpcy5tX2VuYWJsZWRGbGFnID0gISFmbGFnO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS5pc0VuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9lbmFibGVkRmxhZztcbiAgICAgIH07XG4gICAgICBDb250YWN0Mi5wcm90b3R5cGUuaXNUb3VjaGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3RvdWNoaW5nRmxhZztcbiAgICAgIH07XG4gICAgICBDb250YWN0Mi5wcm90b3R5cGUuZ2V0TmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX25leHQ7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLmdldEZpeHR1cmVBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZml4dHVyZUE7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLmdldEZpeHR1cmVCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZml4dHVyZUI7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLmdldENoaWxkSW5kZXhBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1faW5kZXhBO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS5nZXRDaGlsZEluZGV4QiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2luZGV4QjtcbiAgICAgIH07XG4gICAgICBDb250YWN0Mi5wcm90b3R5cGUuZmxhZ0ZvckZpbHRlcmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLm1fZmlsdGVyRmxhZyA9IHRydWU7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLnNldEZyaWN0aW9uID0gZnVuY3Rpb24oZnJpY3Rpb24pIHtcbiAgICAgICAgdGhpcy5tX2ZyaWN0aW9uID0gZnJpY3Rpb247XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLmdldEZyaWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZnJpY3Rpb247XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLnJlc2V0RnJpY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGZpeHR1cmVBID0gdGhpcy5tX2ZpeHR1cmVBO1xuICAgICAgICB2YXIgZml4dHVyZUIgPSB0aGlzLm1fZml4dHVyZUI7XG4gICAgICAgIGlmIChmaXh0dXJlQSA9PT0gbnVsbCB8fCBmaXh0dXJlQiA9PT0gbnVsbClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMubV9mcmljdGlvbiA9IG1peEZyaWN0aW9uKGZpeHR1cmVBLm1fZnJpY3Rpb24sIGZpeHR1cmVCLm1fZnJpY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS5zZXRSZXN0aXR1dGlvbiA9IGZ1bmN0aW9uKHJlc3RpdHV0aW9uKSB7XG4gICAgICAgIHRoaXMubV9yZXN0aXR1dGlvbiA9IHJlc3RpdHV0aW9uO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS5nZXRSZXN0aXR1dGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3Jlc3RpdHV0aW9uO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS5yZXNldFJlc3RpdHV0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmaXh0dXJlQSA9IHRoaXMubV9maXh0dXJlQTtcbiAgICAgICAgdmFyIGZpeHR1cmVCID0gdGhpcy5tX2ZpeHR1cmVCO1xuICAgICAgICBpZiAoZml4dHVyZUEgPT09IG51bGwgfHwgZml4dHVyZUIgPT09IG51bGwpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm1fcmVzdGl0dXRpb24gPSBtaXhSZXN0aXR1dGlvbihmaXh0dXJlQS5tX3Jlc3RpdHV0aW9uLCBmaXh0dXJlQi5tX3Jlc3RpdHV0aW9uKTtcbiAgICAgIH07XG4gICAgICBDb250YWN0Mi5wcm90b3R5cGUuc2V0VGFuZ2VudFNwZWVkID0gZnVuY3Rpb24oc3BlZWQpIHtcbiAgICAgICAgdGhpcy5tX3RhbmdlbnRTcGVlZCA9IHNwZWVkO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS5nZXRUYW5nZW50U3BlZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV90YW5nZW50U3BlZWQ7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24obWFuaWZvbGQsIHhmQTIsIHhmQjIpIHtcbiAgICAgICAgdmFyIGZpeHR1cmVBID0gdGhpcy5tX2ZpeHR1cmVBO1xuICAgICAgICB2YXIgZml4dHVyZUIgPSB0aGlzLm1fZml4dHVyZUI7XG4gICAgICAgIGlmIChmaXh0dXJlQSA9PT0gbnVsbCB8fCBmaXh0dXJlQiA9PT0gbnVsbClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMubV9ldmFsdWF0ZUZjbihtYW5pZm9sZCwgeGZBMiwgZml4dHVyZUEsIHRoaXMubV9pbmRleEEsIHhmQjIsIGZpeHR1cmVCLCB0aGlzLm1faW5kZXhCKTtcbiAgICAgIH07XG4gICAgICBDb250YWN0Mi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGZpeHR1cmVBID0gdGhpcy5tX2ZpeHR1cmVBO1xuICAgICAgICB2YXIgZml4dHVyZUIgPSB0aGlzLm1fZml4dHVyZUI7XG4gICAgICAgIGlmIChmaXh0dXJlQSA9PT0gbnVsbCB8fCBmaXh0dXJlQiA9PT0gbnVsbClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBib2R5QSA9IGZpeHR1cmVBLm1fYm9keTtcbiAgICAgICAgdmFyIGJvZHlCID0gZml4dHVyZUIubV9ib2R5O1xuICAgICAgICBpZiAoYm9keUEgPT09IG51bGwgfHwgYm9keUIgPT09IG51bGwpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgc2hhcGVBID0gZml4dHVyZUEubV9zaGFwZTtcbiAgICAgICAgdmFyIHNoYXBlQiA9IGZpeHR1cmVCLm1fc2hhcGU7XG4gICAgICAgIGlmIChzaGFwZUEgPT09IG51bGwgfHwgc2hhcGVCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5tX2VuYWJsZWRGbGFnID0gdHJ1ZTtcbiAgICAgICAgdmFyIHRvdWNoaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciB3YXNUb3VjaGluZyA9IHRoaXMubV90b3VjaGluZ0ZsYWc7XG4gICAgICAgIHZhciBzZW5zb3JBID0gZml4dHVyZUEubV9pc1NlbnNvcjtcbiAgICAgICAgdmFyIHNlbnNvckIgPSBmaXh0dXJlQi5tX2lzU2Vuc29yO1xuICAgICAgICB2YXIgc2Vuc29yID0gc2Vuc29yQSB8fCBzZW5zb3JCO1xuICAgICAgICB2YXIgeGZBMiA9IGJvZHlBLm1feGY7XG4gICAgICAgIHZhciB4ZkIyID0gYm9keUIubV94ZjtcbiAgICAgICAgaWYgKHNlbnNvcikge1xuICAgICAgICAgIHRvdWNoaW5nID0gdGVzdE92ZXJsYXAoc2hhcGVBLCB0aGlzLm1faW5kZXhBLCBzaGFwZUIsIHRoaXMubV9pbmRleEIsIHhmQTIsIHhmQjIpO1xuICAgICAgICAgIHRoaXMubV9tYW5pZm9sZC5wb2ludENvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbGRNYW5pZm9sZC5yZWN5Y2xlKCk7XG4gICAgICAgICAgb2xkTWFuaWZvbGQuc2V0KHRoaXMubV9tYW5pZm9sZCk7XG4gICAgICAgICAgdGhpcy5tX21hbmlmb2xkLnJlY3ljbGUoKTtcbiAgICAgICAgICB0aGlzLmV2YWx1YXRlKHRoaXMubV9tYW5pZm9sZCwgeGZBMiwgeGZCMik7XG4gICAgICAgICAgdG91Y2hpbmcgPSB0aGlzLm1fbWFuaWZvbGQucG9pbnRDb3VudCA+IDA7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fbWFuaWZvbGQucG9pbnRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbm1wID0gdGhpcy5tX21hbmlmb2xkLnBvaW50c1tpXTtcbiAgICAgICAgICAgIG5tcC5ub3JtYWxJbXB1bHNlID0gMDtcbiAgICAgICAgICAgIG5tcC50YW5nZW50SW1wdWxzZSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9sZE1hbmlmb2xkLnBvaW50Q291bnQ7ICsraikge1xuICAgICAgICAgICAgICB2YXIgb21wID0gb2xkTWFuaWZvbGQucG9pbnRzW2pdO1xuICAgICAgICAgICAgICBpZiAob21wLmlkLmtleSA9PT0gbm1wLmlkLmtleSkge1xuICAgICAgICAgICAgICAgIG5tcC5ub3JtYWxJbXB1bHNlID0gb21wLm5vcm1hbEltcHVsc2U7XG4gICAgICAgICAgICAgICAgbm1wLnRhbmdlbnRJbXB1bHNlID0gb21wLnRhbmdlbnRJbXB1bHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0b3VjaGluZyAhPT0gd2FzVG91Y2hpbmcpIHtcbiAgICAgICAgICAgIGJvZHlBLnNldEF3YWtlKHRydWUpO1xuICAgICAgICAgICAgYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubV90b3VjaGluZ0ZsYWcgPSB0b3VjaGluZztcbiAgICAgICAgdmFyIGhhc0xpc3RlbmVyID0gdHlwZW9mIGxpc3RlbmVyID09PSBcIm9iamVjdFwiICYmIGxpc3RlbmVyICE9PSBudWxsO1xuICAgICAgICBpZiAoIXdhc1RvdWNoaW5nICYmIHRvdWNoaW5nICYmIGhhc0xpc3RlbmVyKSB7XG4gICAgICAgICAgbGlzdGVuZXIuYmVnaW5Db250YWN0KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3YXNUb3VjaGluZyAmJiAhdG91Y2hpbmcgJiYgaGFzTGlzdGVuZXIpIHtcbiAgICAgICAgICBsaXN0ZW5lci5lbmRDb250YWN0KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2Vuc29yICYmIHRvdWNoaW5nICYmIGhhc0xpc3RlbmVyICYmIG9sZE1hbmlmb2xkKSB7XG4gICAgICAgICAgbGlzdGVuZXIucHJlU29sdmUodGhpcywgb2xkTWFuaWZvbGQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLnNvbHZlUG9zaXRpb25Db25zdHJhaW50ID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc29sdmVQb3NpdGlvbkNvbnN0cmFpbnQoc3RlcCwgbnVsbCwgbnVsbCk7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLnNvbHZlUG9zaXRpb25Db25zdHJhaW50VE9JID0gZnVuY3Rpb24oc3RlcCwgdG9pQSwgdG9pQikge1xuICAgICAgICByZXR1cm4gdGhpcy5fc29sdmVQb3NpdGlvbkNvbnN0cmFpbnQoc3RlcCwgdG9pQSwgdG9pQik7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLl9zb2x2ZVBvc2l0aW9uQ29uc3RyYWludCA9IGZ1bmN0aW9uKHN0ZXAsIHRvaUEsIHRvaUIpIHtcbiAgICAgICAgdmFyIHRvaSA9IHRvaUEgIT09IG51bGwgJiYgdG9pQiAhPT0gbnVsbCA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdmFyIG1pblNlcGFyYXRpb24gPSAwO1xuICAgICAgICB2YXIgZml4dHVyZUEgPSB0aGlzLm1fZml4dHVyZUE7XG4gICAgICAgIHZhciBmaXh0dXJlQiA9IHRoaXMubV9maXh0dXJlQjtcbiAgICAgICAgaWYgKGZpeHR1cmVBID09PSBudWxsIHx8IGZpeHR1cmVCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybiBtaW5TZXBhcmF0aW9uO1xuICAgICAgICB2YXIgYm9keUEgPSBmaXh0dXJlQS5tX2JvZHk7XG4gICAgICAgIHZhciBib2R5QiA9IGZpeHR1cmVCLm1fYm9keTtcbiAgICAgICAgaWYgKGJvZHlBID09PSBudWxsIHx8IGJvZHlCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybiBtaW5TZXBhcmF0aW9uO1xuICAgICAgICB2YXIgcG9zaXRpb25BID0gYm9keUEuY19wb3NpdGlvbjtcbiAgICAgICAgdmFyIHBvc2l0aW9uQiA9IGJvZHlCLmNfcG9zaXRpb247XG4gICAgICAgIHZhciBsb2NhbENlbnRlckEgPSB0aGlzLnBfbG9jYWxDZW50ZXJBO1xuICAgICAgICB2YXIgbG9jYWxDZW50ZXJCID0gdGhpcy5wX2xvY2FsQ2VudGVyQjtcbiAgICAgICAgdmFyIG1BID0gMDtcbiAgICAgICAgdmFyIGlBID0gMDtcbiAgICAgICAgaWYgKCF0b2kgfHwgYm9keUEgPT09IHRvaUEgfHwgYm9keUEgPT09IHRvaUIpIHtcbiAgICAgICAgICBtQSA9IHRoaXMucF9pbnZNYXNzQTtcbiAgICAgICAgICBpQSA9IHRoaXMucF9pbnZJQTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbUIgPSAwO1xuICAgICAgICB2YXIgaUIgPSAwO1xuICAgICAgICBpZiAoIXRvaSB8fCBib2R5QiA9PT0gdG9pQSB8fCBib2R5QiA9PT0gdG9pQikge1xuICAgICAgICAgIG1CID0gdGhpcy5wX2ludk1hc3NCO1xuICAgICAgICAgIGlCID0gdGhpcy5wX2ludklCO1xuICAgICAgICB9XG4gICAgICAgIGNvcHlWZWMyKGNBLCBwb3NpdGlvbkEuYyk7XG4gICAgICAgIHZhciBhQSA9IHBvc2l0aW9uQS5hO1xuICAgICAgICBjb3B5VmVjMihjQiwgcG9zaXRpb25CLmMpO1xuICAgICAgICB2YXIgYUIgPSBwb3NpdGlvbkIuYTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnBfcG9pbnRDb3VudDsgKytqKSB7XG4gICAgICAgICAgZ2V0VHJhbnNmb3JtKHhmQSwgbG9jYWxDZW50ZXJBLCBjQSwgYUEpO1xuICAgICAgICAgIGdldFRyYW5zZm9ybSh4ZkIsIGxvY2FsQ2VudGVyQiwgY0IsIGFCKTtcbiAgICAgICAgICB2YXIgc2VwYXJhdGlvbiA9IHZvaWQgMDtcbiAgICAgICAgICBzd2l0Y2ggKHRoaXMucF90eXBlKSB7XG4gICAgICAgICAgICBjYXNlIGV4cG9ydHMyLk1hbmlmb2xkVHlwZS5lX2NpcmNsZXM6IHtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtVmVjMihwb2ludEEsIHhmQSwgdGhpcy5wX2xvY2FsUG9pbnQpO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm1WZWMyKHBvaW50QiwgeGZCLCB0aGlzLnBfbG9jYWxQb2ludHNbMF0pO1xuICAgICAgICAgICAgICBzdWJWZWMyKG5vcm1hbCQyLCBwb2ludEIsIHBvaW50QSk7XG4gICAgICAgICAgICAgIG5vcm1hbGl6ZVZlYzIobm9ybWFsJDIpO1xuICAgICAgICAgICAgICBjb21iaW5lMlZlYzIocG9pbnQsIDAuNSwgcG9pbnRBLCAwLjUsIHBvaW50Qik7XG4gICAgICAgICAgICAgIHNlcGFyYXRpb24gPSBkb3RWZWMyKHBvaW50Qiwgbm9ybWFsJDIpIC0gZG90VmVjMihwb2ludEEsIG5vcm1hbCQyKSAtIHRoaXMucF9yYWRpdXNBIC0gdGhpcy5wX3JhZGl1c0I7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV9mYWNlQToge1xuICAgICAgICAgICAgICByb3RWZWMyKG5vcm1hbCQyLCB4ZkEucSwgdGhpcy5wX2xvY2FsTm9ybWFsKTtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtVmVjMihwbGFuZVBvaW50JDEsIHhmQSwgdGhpcy5wX2xvY2FsUG9pbnQpO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm1WZWMyKGNsaXBQb2ludCwgeGZCLCB0aGlzLnBfbG9jYWxQb2ludHNbal0pO1xuICAgICAgICAgICAgICBzZXBhcmF0aW9uID0gZG90VmVjMihjbGlwUG9pbnQsIG5vcm1hbCQyKSAtIGRvdFZlYzIocGxhbmVQb2ludCQxLCBub3JtYWwkMikgLSB0aGlzLnBfcmFkaXVzQSAtIHRoaXMucF9yYWRpdXNCO1xuICAgICAgICAgICAgICBjb3B5VmVjMihwb2ludCwgY2xpcFBvaW50KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGV4cG9ydHMyLk1hbmlmb2xkVHlwZS5lX2ZhY2VCOiB7XG4gICAgICAgICAgICAgIHJvdFZlYzIobm9ybWFsJDIsIHhmQi5xLCB0aGlzLnBfbG9jYWxOb3JtYWwpO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm1WZWMyKHBsYW5lUG9pbnQkMSwgeGZCLCB0aGlzLnBfbG9jYWxQb2ludCk7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybVZlYzIoY2xpcFBvaW50LCB4ZkEsIHRoaXMucF9sb2NhbFBvaW50c1tqXSk7XG4gICAgICAgICAgICAgIHNlcGFyYXRpb24gPSBkb3RWZWMyKGNsaXBQb2ludCwgbm9ybWFsJDIpIC0gZG90VmVjMihwbGFuZVBvaW50JDEsIG5vcm1hbCQyKSAtIHRoaXMucF9yYWRpdXNBIC0gdGhpcy5wX3JhZGl1c0I7XG4gICAgICAgICAgICAgIGNvcHlWZWMyKHBvaW50LCBjbGlwUG9pbnQpO1xuICAgICAgICAgICAgICBuZWdWZWMyKG5vcm1hbCQyKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgIHJldHVybiBtaW5TZXBhcmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJWZWMyKHJBLCBwb2ludCwgY0EpO1xuICAgICAgICAgIHN1YlZlYzIockIsIHBvaW50LCBjQik7XG4gICAgICAgICAgbWluU2VwYXJhdGlvbiA9IG1hdGhfbWluJDQobWluU2VwYXJhdGlvbiwgc2VwYXJhdGlvbik7XG4gICAgICAgICAgdmFyIGJhdW1nYXJ0ZSA9IHRvaSA/IFNldHRpbmdzSW50ZXJuYWwudG9pQmF1Z2FydGUgOiBTZXR0aW5nc0ludGVybmFsLmJhdW1nYXJ0ZTtcbiAgICAgICAgICB2YXIgbGluZWFyU2xvcCA9IFNldHRpbmdzSW50ZXJuYWwubGluZWFyU2xvcDtcbiAgICAgICAgICB2YXIgbWF4TGluZWFyQ29ycmVjdGlvbiA9IFNldHRpbmdzSW50ZXJuYWwubWF4TGluZWFyQ29ycmVjdGlvbjtcbiAgICAgICAgICB2YXIgQyA9IGNsYW1wKGJhdW1nYXJ0ZSAqIChzZXBhcmF0aW9uICsgbGluZWFyU2xvcCksIC1tYXhMaW5lYXJDb3JyZWN0aW9uLCAwKTtcbiAgICAgICAgICB2YXIgcm5BID0gY3Jvc3NWZWMyVmVjMihyQSwgbm9ybWFsJDIpO1xuICAgICAgICAgIHZhciBybkIgPSBjcm9zc1ZlYzJWZWMyKHJCLCBub3JtYWwkMik7XG4gICAgICAgICAgdmFyIEsgPSBtQSArIG1CICsgaUEgKiBybkEgKiBybkEgKyBpQiAqIHJuQiAqIHJuQjtcbiAgICAgICAgICB2YXIgaW1wdWxzZSA9IEsgPiAwID8gLUMgLyBLIDogMDtcbiAgICAgICAgICBzY2FsZVZlYzIoUCQxLCBpbXB1bHNlLCBub3JtYWwkMik7XG4gICAgICAgICAgbWludXNTY2FsZVZlYzIoY0EsIG1BLCBQJDEpO1xuICAgICAgICAgIGFBIC09IGlBICogY3Jvc3NWZWMyVmVjMihyQSwgUCQxKTtcbiAgICAgICAgICBwbHVzU2NhbGVWZWMyKGNCLCBtQiwgUCQxKTtcbiAgICAgICAgICBhQiArPSBpQiAqIGNyb3NzVmVjMlZlYzIockIsIFAkMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29weVZlYzIocG9zaXRpb25BLmMsIGNBKTtcbiAgICAgICAgcG9zaXRpb25BLmEgPSBhQTtcbiAgICAgICAgY29weVZlYzIocG9zaXRpb25CLmMsIGNCKTtcbiAgICAgICAgcG9zaXRpb25CLmEgPSBhQjtcbiAgICAgICAgcmV0dXJuIG1pblNlcGFyYXRpb247XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLmluaXRWZWxvY2l0eUNvbnN0cmFpbnQgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciBmaXh0dXJlQSA9IHRoaXMubV9maXh0dXJlQTtcbiAgICAgICAgdmFyIGZpeHR1cmVCID0gdGhpcy5tX2ZpeHR1cmVCO1xuICAgICAgICBpZiAoZml4dHVyZUEgPT09IG51bGwgfHwgZml4dHVyZUIgPT09IG51bGwpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgYm9keUEgPSBmaXh0dXJlQS5tX2JvZHk7XG4gICAgICAgIHZhciBib2R5QiA9IGZpeHR1cmVCLm1fYm9keTtcbiAgICAgICAgaWYgKGJvZHlBID09PSBudWxsIHx8IGJvZHlCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHZlbG9jaXR5QSA9IGJvZHlBLmNfdmVsb2NpdHk7XG4gICAgICAgIHZhciB2ZWxvY2l0eUIgPSBib2R5Qi5jX3ZlbG9jaXR5O1xuICAgICAgICB2YXIgcG9zaXRpb25BID0gYm9keUEuY19wb3NpdGlvbjtcbiAgICAgICAgdmFyIHBvc2l0aW9uQiA9IGJvZHlCLmNfcG9zaXRpb247XG4gICAgICAgIHZhciByYWRpdXNBID0gdGhpcy5wX3JhZGl1c0E7XG4gICAgICAgIHZhciByYWRpdXNCID0gdGhpcy5wX3JhZGl1c0I7XG4gICAgICAgIHZhciBtYW5pZm9sZCA9IHRoaXMubV9tYW5pZm9sZDtcbiAgICAgICAgdmFyIG1BID0gdGhpcy52X2ludk1hc3NBO1xuICAgICAgICB2YXIgbUIgPSB0aGlzLnZfaW52TWFzc0I7XG4gICAgICAgIHZhciBpQSA9IHRoaXMudl9pbnZJQTtcbiAgICAgICAgdmFyIGlCID0gdGhpcy52X2ludklCO1xuICAgICAgICB2YXIgbG9jYWxDZW50ZXJBID0gdGhpcy5wX2xvY2FsQ2VudGVyQTtcbiAgICAgICAgdmFyIGxvY2FsQ2VudGVyQiA9IHRoaXMucF9sb2NhbENlbnRlckI7XG4gICAgICAgIGNvcHlWZWMyKGNBLCBwb3NpdGlvbkEuYyk7XG4gICAgICAgIHZhciBhQSA9IHBvc2l0aW9uQS5hO1xuICAgICAgICBjb3B5VmVjMih2QSwgdmVsb2NpdHlBLnYpO1xuICAgICAgICB2YXIgd0EgPSB2ZWxvY2l0eUEudztcbiAgICAgICAgY29weVZlYzIoY0IsIHBvc2l0aW9uQi5jKTtcbiAgICAgICAgdmFyIGFCID0gcG9zaXRpb25CLmE7XG4gICAgICAgIGNvcHlWZWMyKHZCLCB2ZWxvY2l0eUIudik7XG4gICAgICAgIHZhciB3QiA9IHZlbG9jaXR5Qi53O1xuICAgICAgICBnZXRUcmFuc2Zvcm0oeGZBLCBsb2NhbENlbnRlckEsIGNBLCBhQSk7XG4gICAgICAgIGdldFRyYW5zZm9ybSh4ZkIsIGxvY2FsQ2VudGVyQiwgY0IsIGFCKTtcbiAgICAgICAgd29ybGRNYW5pZm9sZC5yZWN5Y2xlKCk7XG4gICAgICAgIG1hbmlmb2xkLmdldFdvcmxkTWFuaWZvbGQod29ybGRNYW5pZm9sZCwgeGZBLCByYWRpdXNBLCB4ZkIsIHJhZGl1c0IpO1xuICAgICAgICBjb3B5VmVjMih0aGlzLnZfbm9ybWFsLCB3b3JsZE1hbmlmb2xkLm5vcm1hbCk7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy52X3BvaW50Q291bnQ7ICsraikge1xuICAgICAgICAgIHZhciB2Y3AgPSB0aGlzLnZfcG9pbnRzW2pdO1xuICAgICAgICAgIHZhciB3bXAgPSB3b3JsZE1hbmlmb2xkLnBvaW50c1tqXTtcbiAgICAgICAgICBzdWJWZWMyKHZjcC5yQSwgd21wLCBjQSk7XG4gICAgICAgICAgc3ViVmVjMih2Y3AuckIsIHdtcCwgY0IpO1xuICAgICAgICAgIHZhciBybkEgPSBjcm9zc1ZlYzJWZWMyKHZjcC5yQSwgdGhpcy52X25vcm1hbCk7XG4gICAgICAgICAgdmFyIHJuQiA9IGNyb3NzVmVjMlZlYzIodmNwLnJCLCB0aGlzLnZfbm9ybWFsKTtcbiAgICAgICAgICB2YXIga05vcm1hbCA9IG1BICsgbUIgKyBpQSAqIHJuQSAqIHJuQSArIGlCICogcm5CICogcm5CO1xuICAgICAgICAgIHZjcC5ub3JtYWxNYXNzID0ga05vcm1hbCA+IDAgPyAxIC8ga05vcm1hbCA6IDA7XG4gICAgICAgICAgY3Jvc3NWZWMyTnVtKHRhbmdlbnQkMSwgdGhpcy52X25vcm1hbCwgMSk7XG4gICAgICAgICAgdmFyIHJ0QSA9IGNyb3NzVmVjMlZlYzIodmNwLnJBLCB0YW5nZW50JDEpO1xuICAgICAgICAgIHZhciBydEIgPSBjcm9zc1ZlYzJWZWMyKHZjcC5yQiwgdGFuZ2VudCQxKTtcbiAgICAgICAgICB2YXIga1RhbmdlbnQgPSBtQSArIG1CICsgaUEgKiBydEEgKiBydEEgKyBpQiAqIHJ0QiAqIHJ0QjtcbiAgICAgICAgICB2Y3AudGFuZ2VudE1hc3MgPSBrVGFuZ2VudCA+IDAgPyAxIC8ga1RhbmdlbnQgOiAwO1xuICAgICAgICAgIHZjcC52ZWxvY2l0eUJpYXMgPSAwO1xuICAgICAgICAgIHZhciB2UmVsID0gMDtcbiAgICAgICAgICB2UmVsICs9IGRvdFZlYzIodGhpcy52X25vcm1hbCwgdkIpO1xuICAgICAgICAgIHZSZWwgKz0gZG90VmVjMih0aGlzLnZfbm9ybWFsLCBjcm9zc051bVZlYzIodGVtcCQyLCB3QiwgdmNwLnJCKSk7XG4gICAgICAgICAgdlJlbCAtPSBkb3RWZWMyKHRoaXMudl9ub3JtYWwsIHZBKTtcbiAgICAgICAgICB2UmVsIC09IGRvdFZlYzIodGhpcy52X25vcm1hbCwgY3Jvc3NOdW1WZWMyKHRlbXAkMiwgd0EsIHZjcC5yQSkpO1xuICAgICAgICAgIGlmICh2UmVsIDwgLVNldHRpbmdzSW50ZXJuYWwudmVsb2NpdHlUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHZjcC52ZWxvY2l0eUJpYXMgPSAtdGhpcy52X3Jlc3RpdHV0aW9uICogdlJlbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudl9wb2ludENvdW50ID09IDIgJiYgc3RlcC5ibG9ja1NvbHZlKSB7XG4gICAgICAgICAgdmFyIHZjcDEgPSB0aGlzLnZfcG9pbnRzWzBdO1xuICAgICAgICAgIHZhciB2Y3AyID0gdGhpcy52X3BvaW50c1sxXTtcbiAgICAgICAgICB2YXIgcm4xQSA9IGNyb3NzVmVjMlZlYzIodmNwMS5yQSwgdGhpcy52X25vcm1hbCk7XG4gICAgICAgICAgdmFyIHJuMUIgPSBjcm9zc1ZlYzJWZWMyKHZjcDEuckIsIHRoaXMudl9ub3JtYWwpO1xuICAgICAgICAgIHZhciBybjJBID0gY3Jvc3NWZWMyVmVjMih2Y3AyLnJBLCB0aGlzLnZfbm9ybWFsKTtcbiAgICAgICAgICB2YXIgcm4yQiA9IGNyb3NzVmVjMlZlYzIodmNwMi5yQiwgdGhpcy52X25vcm1hbCk7XG4gICAgICAgICAgdmFyIGsxMSA9IG1BICsgbUIgKyBpQSAqIHJuMUEgKiBybjFBICsgaUIgKiBybjFCICogcm4xQjtcbiAgICAgICAgICB2YXIgazIyID0gbUEgKyBtQiArIGlBICogcm4yQSAqIHJuMkEgKyBpQiAqIHJuMkIgKiBybjJCO1xuICAgICAgICAgIHZhciBrMTIgPSBtQSArIG1CICsgaUEgKiBybjFBICogcm4yQSArIGlCICogcm4xQiAqIHJuMkI7XG4gICAgICAgICAgdmFyIGtfbWF4Q29uZGl0aW9uTnVtYmVyID0gMWUzO1xuICAgICAgICAgIGlmIChrMTEgKiBrMTEgPCBrX21heENvbmRpdGlvbk51bWJlciAqIChrMTEgKiBrMjIgLSBrMTIgKiBrMTIpKSB7XG4gICAgICAgICAgICB0aGlzLnZfSy5leC5zZXROdW0oazExLCBrMTIpO1xuICAgICAgICAgICAgdGhpcy52X0suZXkuc2V0TnVtKGsxMiwgazIyKTtcbiAgICAgICAgICAgIHZhciBhXzEgPSB0aGlzLnZfSy5leC54O1xuICAgICAgICAgICAgdmFyIGJfMSA9IHRoaXMudl9LLmV5Lng7XG4gICAgICAgICAgICB2YXIgYzIgPSB0aGlzLnZfSy5leC55O1xuICAgICAgICAgICAgdmFyIGRfMSA9IHRoaXMudl9LLmV5Lnk7XG4gICAgICAgICAgICB2YXIgZGV0ID0gYV8xICogZF8xIC0gYl8xICogYzI7XG4gICAgICAgICAgICBpZiAoZGV0ICE9PSAwKSB7XG4gICAgICAgICAgICAgIGRldCA9IDEgLyBkZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnZfbm9ybWFsTWFzcy5leC54ID0gZGV0ICogZF8xO1xuICAgICAgICAgICAgdGhpcy52X25vcm1hbE1hc3MuZXkueCA9IC1kZXQgKiBiXzE7XG4gICAgICAgICAgICB0aGlzLnZfbm9ybWFsTWFzcy5leC55ID0gLWRldCAqIGMyO1xuICAgICAgICAgICAgdGhpcy52X25vcm1hbE1hc3MuZXkueSA9IGRldCAqIGFfMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52X3BvaW50Q291bnQgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb3B5VmVjMihwb3NpdGlvbkEuYywgY0EpO1xuICAgICAgICBwb3NpdGlvbkEuYSA9IGFBO1xuICAgICAgICBjb3B5VmVjMih2ZWxvY2l0eUEudiwgdkEpO1xuICAgICAgICB2ZWxvY2l0eUEudyA9IHdBO1xuICAgICAgICBjb3B5VmVjMihwb3NpdGlvbkIuYywgY0IpO1xuICAgICAgICBwb3NpdGlvbkIuYSA9IGFCO1xuICAgICAgICBjb3B5VmVjMih2ZWxvY2l0eUIudiwgdkIpO1xuICAgICAgICB2ZWxvY2l0eUIudyA9IHdCO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLnByb3RvdHlwZS53YXJtU3RhcnRDb25zdHJhaW50ID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgZml4dHVyZUEgPSB0aGlzLm1fZml4dHVyZUE7XG4gICAgICAgIHZhciBmaXh0dXJlQiA9IHRoaXMubV9maXh0dXJlQjtcbiAgICAgICAgaWYgKGZpeHR1cmVBID09PSBudWxsIHx8IGZpeHR1cmVCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGJvZHlBID0gZml4dHVyZUEubV9ib2R5O1xuICAgICAgICB2YXIgYm9keUIgPSBmaXh0dXJlQi5tX2JvZHk7XG4gICAgICAgIGlmIChib2R5QSA9PT0gbnVsbCB8fCBib2R5QiA9PT0gbnVsbClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciB2ZWxvY2l0eUEgPSBib2R5QS5jX3ZlbG9jaXR5O1xuICAgICAgICB2YXIgdmVsb2NpdHlCID0gYm9keUIuY192ZWxvY2l0eTtcbiAgICAgICAgdmFyIG1BID0gdGhpcy52X2ludk1hc3NBO1xuICAgICAgICB2YXIgaUEgPSB0aGlzLnZfaW52SUE7XG4gICAgICAgIHZhciBtQiA9IHRoaXMudl9pbnZNYXNzQjtcbiAgICAgICAgdmFyIGlCID0gdGhpcy52X2ludklCO1xuICAgICAgICBjb3B5VmVjMih2QSwgdmVsb2NpdHlBLnYpO1xuICAgICAgICB2YXIgd0EgPSB2ZWxvY2l0eUEudztcbiAgICAgICAgY29weVZlYzIodkIsIHZlbG9jaXR5Qi52KTtcbiAgICAgICAgdmFyIHdCID0gdmVsb2NpdHlCLnc7XG4gICAgICAgIGNvcHlWZWMyKG5vcm1hbCQyLCB0aGlzLnZfbm9ybWFsKTtcbiAgICAgICAgY3Jvc3NWZWMyTnVtKHRhbmdlbnQkMSwgbm9ybWFsJDIsIDEpO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMudl9wb2ludENvdW50OyArK2opIHtcbiAgICAgICAgICB2YXIgdmNwID0gdGhpcy52X3BvaW50c1tqXTtcbiAgICAgICAgICBjb21iaW5lMlZlYzIoUCQxLCB2Y3Aubm9ybWFsSW1wdWxzZSwgbm9ybWFsJDIsIHZjcC50YW5nZW50SW1wdWxzZSwgdGFuZ2VudCQxKTtcbiAgICAgICAgICB3QSAtPSBpQSAqIGNyb3NzVmVjMlZlYzIodmNwLnJBLCBQJDEpO1xuICAgICAgICAgIG1pbnVzU2NhbGVWZWMyKHZBLCBtQSwgUCQxKTtcbiAgICAgICAgICB3QiArPSBpQiAqIGNyb3NzVmVjMlZlYzIodmNwLnJCLCBQJDEpO1xuICAgICAgICAgIHBsdXNTY2FsZVZlYzIodkIsIG1CLCBQJDEpO1xuICAgICAgICB9XG4gICAgICAgIGNvcHlWZWMyKHZlbG9jaXR5QS52LCB2QSk7XG4gICAgICAgIHZlbG9jaXR5QS53ID0gd0E7XG4gICAgICAgIGNvcHlWZWMyKHZlbG9jaXR5Qi52LCB2Qik7XG4gICAgICAgIHZlbG9jaXR5Qi53ID0gd0I7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIucHJvdG90eXBlLnN0b3JlQ29uc3RyYWludEltcHVsc2VzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgbWFuaWZvbGQgPSB0aGlzLm1fbWFuaWZvbGQ7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy52X3BvaW50Q291bnQ7ICsraikge1xuICAgICAgICAgIG1hbmlmb2xkLnBvaW50c1tqXS5ub3JtYWxJbXB1bHNlID0gdGhpcy52X3BvaW50c1tqXS5ub3JtYWxJbXB1bHNlO1xuICAgICAgICAgIG1hbmlmb2xkLnBvaW50c1tqXS50YW5nZW50SW1wdWxzZSA9IHRoaXMudl9wb2ludHNbal0udGFuZ2VudEltcHVsc2U7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBDb250YWN0Mi5wcm90b3R5cGUuc29sdmVWZWxvY2l0eUNvbnN0cmFpbnQgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciBmaXh0dXJlQSA9IHRoaXMubV9maXh0dXJlQTtcbiAgICAgICAgdmFyIGZpeHR1cmVCID0gdGhpcy5tX2ZpeHR1cmVCO1xuICAgICAgICBpZiAoZml4dHVyZUEgPT09IG51bGwgfHwgZml4dHVyZUIgPT09IG51bGwpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgYm9keUEgPSBmaXh0dXJlQS5tX2JvZHk7XG4gICAgICAgIHZhciBib2R5QiA9IGZpeHR1cmVCLm1fYm9keTtcbiAgICAgICAgaWYgKGJvZHlBID09PSBudWxsIHx8IGJvZHlCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHZlbG9jaXR5QSA9IGJvZHlBLmNfdmVsb2NpdHk7XG4gICAgICAgIHZhciB2ZWxvY2l0eUIgPSBib2R5Qi5jX3ZlbG9jaXR5O1xuICAgICAgICB2YXIgbUEgPSB0aGlzLnZfaW52TWFzc0E7XG4gICAgICAgIHZhciBpQSA9IHRoaXMudl9pbnZJQTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy52X2ludk1hc3NCO1xuICAgICAgICB2YXIgaUIgPSB0aGlzLnZfaW52SUI7XG4gICAgICAgIGNvcHlWZWMyKHZBLCB2ZWxvY2l0eUEudik7XG4gICAgICAgIHZhciB3QSA9IHZlbG9jaXR5QS53O1xuICAgICAgICBjb3B5VmVjMih2QiwgdmVsb2NpdHlCLnYpO1xuICAgICAgICB2YXIgd0IgPSB2ZWxvY2l0eUIudztcbiAgICAgICAgY29weVZlYzIobm9ybWFsJDIsIHRoaXMudl9ub3JtYWwpO1xuICAgICAgICBjcm9zc1ZlYzJOdW0odGFuZ2VudCQxLCBub3JtYWwkMiwgMSk7XG4gICAgICAgIHZhciBmcmljdGlvbiA9IHRoaXMudl9mcmljdGlvbjtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnZfcG9pbnRDb3VudDsgKytqKSB7XG4gICAgICAgICAgdmFyIHZjcCA9IHRoaXMudl9wb2ludHNbal07XG4gICAgICAgICAgemVyb1ZlYzIoZHYpO1xuICAgICAgICAgIHBsdXNWZWMyKGR2LCB2Qik7XG4gICAgICAgICAgcGx1c1ZlYzIoZHYsIGNyb3NzTnVtVmVjMih0ZW1wJDIsIHdCLCB2Y3AuckIpKTtcbiAgICAgICAgICBtaW51c1ZlYzIoZHYsIHZBKTtcbiAgICAgICAgICBtaW51c1ZlYzIoZHYsIGNyb3NzTnVtVmVjMih0ZW1wJDIsIHdBLCB2Y3AuckEpKTtcbiAgICAgICAgICB2YXIgdnQgPSBkb3RWZWMyKGR2LCB0YW5nZW50JDEpIC0gdGhpcy52X3RhbmdlbnRTcGVlZDtcbiAgICAgICAgICB2YXIgbGFtYmRhID0gdmNwLnRhbmdlbnRNYXNzICogLXZ0O1xuICAgICAgICAgIHZhciBtYXhGcmljdGlvbiA9IGZyaWN0aW9uICogdmNwLm5vcm1hbEltcHVsc2U7XG4gICAgICAgICAgdmFyIG5ld0ltcHVsc2UgPSBjbGFtcCh2Y3AudGFuZ2VudEltcHVsc2UgKyBsYW1iZGEsIC1tYXhGcmljdGlvbiwgbWF4RnJpY3Rpb24pO1xuICAgICAgICAgIGxhbWJkYSA9IG5ld0ltcHVsc2UgLSB2Y3AudGFuZ2VudEltcHVsc2U7XG4gICAgICAgICAgdmNwLnRhbmdlbnRJbXB1bHNlID0gbmV3SW1wdWxzZTtcbiAgICAgICAgICBzY2FsZVZlYzIoUCQxLCBsYW1iZGEsIHRhbmdlbnQkMSk7XG4gICAgICAgICAgbWludXNTY2FsZVZlYzIodkEsIG1BLCBQJDEpO1xuICAgICAgICAgIHdBIC09IGlBICogY3Jvc3NWZWMyVmVjMih2Y3AuckEsIFAkMSk7XG4gICAgICAgICAgcGx1c1NjYWxlVmVjMih2QiwgbUIsIFAkMSk7XG4gICAgICAgICAgd0IgKz0gaUIgKiBjcm9zc1ZlYzJWZWMyKHZjcC5yQiwgUCQxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52X3BvaW50Q291bnQgPT0gMSB8fCBzdGVwLmJsb2NrU29sdmUgPT0gZmFsc2UpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudl9wb2ludENvdW50OyArK2kpIHtcbiAgICAgICAgICAgIHZhciB2Y3AgPSB0aGlzLnZfcG9pbnRzW2ldO1xuICAgICAgICAgICAgemVyb1ZlYzIoZHYpO1xuICAgICAgICAgICAgcGx1c1ZlYzIoZHYsIHZCKTtcbiAgICAgICAgICAgIHBsdXNWZWMyKGR2LCBjcm9zc051bVZlYzIodGVtcCQyLCB3QiwgdmNwLnJCKSk7XG4gICAgICAgICAgICBtaW51c1ZlYzIoZHYsIHZBKTtcbiAgICAgICAgICAgIG1pbnVzVmVjMihkdiwgY3Jvc3NOdW1WZWMyKHRlbXAkMiwgd0EsIHZjcC5yQSkpO1xuICAgICAgICAgICAgdmFyIHZuID0gZG90VmVjMihkdiwgbm9ybWFsJDIpO1xuICAgICAgICAgICAgdmFyIGxhbWJkYSA9IC12Y3Aubm9ybWFsTWFzcyAqICh2biAtIHZjcC52ZWxvY2l0eUJpYXMpO1xuICAgICAgICAgICAgdmFyIG5ld0ltcHVsc2UgPSBtYXRoX21heCQyKHZjcC5ub3JtYWxJbXB1bHNlICsgbGFtYmRhLCAwKTtcbiAgICAgICAgICAgIGxhbWJkYSA9IG5ld0ltcHVsc2UgLSB2Y3Aubm9ybWFsSW1wdWxzZTtcbiAgICAgICAgICAgIHZjcC5ub3JtYWxJbXB1bHNlID0gbmV3SW1wdWxzZTtcbiAgICAgICAgICAgIHNjYWxlVmVjMihQJDEsIGxhbWJkYSwgbm9ybWFsJDIpO1xuICAgICAgICAgICAgbWludXNTY2FsZVZlYzIodkEsIG1BLCBQJDEpO1xuICAgICAgICAgICAgd0EgLT0gaUEgKiBjcm9zc1ZlYzJWZWMyKHZjcC5yQSwgUCQxKTtcbiAgICAgICAgICAgIHBsdXNTY2FsZVZlYzIodkIsIG1CLCBQJDEpO1xuICAgICAgICAgICAgd0IgKz0gaUIgKiBjcm9zc1ZlYzJWZWMyKHZjcC5yQiwgUCQxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHZjcDEgPSB0aGlzLnZfcG9pbnRzWzBdO1xuICAgICAgICAgIHZhciB2Y3AyID0gdGhpcy52X3BvaW50c1sxXTtcbiAgICAgICAgICBzZXRWZWMyKGEsIHZjcDEubm9ybWFsSW1wdWxzZSwgdmNwMi5ub3JtYWxJbXB1bHNlKTtcbiAgICAgICAgICB6ZXJvVmVjMihkdjEpO1xuICAgICAgICAgIHBsdXNWZWMyKGR2MSwgdkIpO1xuICAgICAgICAgIHBsdXNWZWMyKGR2MSwgY3Jvc3NOdW1WZWMyKHRlbXAkMiwgd0IsIHZjcDEuckIpKTtcbiAgICAgICAgICBtaW51c1ZlYzIoZHYxLCB2QSk7XG4gICAgICAgICAgbWludXNWZWMyKGR2MSwgY3Jvc3NOdW1WZWMyKHRlbXAkMiwgd0EsIHZjcDEuckEpKTtcbiAgICAgICAgICB6ZXJvVmVjMihkdjIpO1xuICAgICAgICAgIHBsdXNWZWMyKGR2MiwgdkIpO1xuICAgICAgICAgIHBsdXNWZWMyKGR2MiwgY3Jvc3NOdW1WZWMyKHRlbXAkMiwgd0IsIHZjcDIuckIpKTtcbiAgICAgICAgICBtaW51c1ZlYzIoZHYyLCB2QSk7XG4gICAgICAgICAgbWludXNWZWMyKGR2MiwgY3Jvc3NOdW1WZWMyKHRlbXAkMiwgd0EsIHZjcDIuckEpKTtcbiAgICAgICAgICB2YXIgdm4xID0gZG90VmVjMihkdjEsIG5vcm1hbCQyKTtcbiAgICAgICAgICB2YXIgdm4yID0gZG90VmVjMihkdjIsIG5vcm1hbCQyKTtcbiAgICAgICAgICBzZXRWZWMyKGIsIHZuMSAtIHZjcDEudmVsb2NpdHlCaWFzLCB2bjIgLSB2Y3AyLnZlbG9jaXR5Qmlhcyk7XG4gICAgICAgICAgYi54IC09IHRoaXMudl9LLmV4LnggKiBhLnggKyB0aGlzLnZfSy5leS54ICogYS55O1xuICAgICAgICAgIGIueSAtPSB0aGlzLnZfSy5leC55ICogYS54ICsgdGhpcy52X0suZXkueSAqIGEueTtcbiAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgemVyb1ZlYzIoeCk7XG4gICAgICAgICAgICB4LnggPSAtKHRoaXMudl9ub3JtYWxNYXNzLmV4LnggKiBiLnggKyB0aGlzLnZfbm9ybWFsTWFzcy5leS54ICogYi55KTtcbiAgICAgICAgICAgIHgueSA9IC0odGhpcy52X25vcm1hbE1hc3MuZXgueSAqIGIueCArIHRoaXMudl9ub3JtYWxNYXNzLmV5LnkgKiBiLnkpO1xuICAgICAgICAgICAgaWYgKHgueCA+PSAwICYmIHgueSA+PSAwKSB7XG4gICAgICAgICAgICAgIHN1YlZlYzIoZCwgeCwgYSk7XG4gICAgICAgICAgICAgIHNjYWxlVmVjMihQMSwgZC54LCBub3JtYWwkMik7XG4gICAgICAgICAgICAgIHNjYWxlVmVjMihQMiwgZC55LCBub3JtYWwkMik7XG4gICAgICAgICAgICAgIGNvbWJpbmUzVmVjMih2QSwgLW1BLCBQMSwgLW1BLCBQMiwgMSwgdkEpO1xuICAgICAgICAgICAgICB3QSAtPSBpQSAqIChjcm9zc1ZlYzJWZWMyKHZjcDEuckEsIFAxKSArIGNyb3NzVmVjMlZlYzIodmNwMi5yQSwgUDIpKTtcbiAgICAgICAgICAgICAgY29tYmluZTNWZWMyKHZCLCBtQiwgUDEsIG1CLCBQMiwgMSwgdkIpO1xuICAgICAgICAgICAgICB3QiArPSBpQiAqIChjcm9zc1ZlYzJWZWMyKHZjcDEuckIsIFAxKSArIGNyb3NzVmVjMlZlYzIodmNwMi5yQiwgUDIpKTtcbiAgICAgICAgICAgICAgdmNwMS5ub3JtYWxJbXB1bHNlID0geC54O1xuICAgICAgICAgICAgICB2Y3AyLm5vcm1hbEltcHVsc2UgPSB4Lnk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeC54ID0gLXZjcDEubm9ybWFsTWFzcyAqIGIueDtcbiAgICAgICAgICAgIHgueSA9IDA7XG4gICAgICAgICAgICB2bjEgPSAwO1xuICAgICAgICAgICAgdm4yID0gdGhpcy52X0suZXgueSAqIHgueCArIGIueTtcbiAgICAgICAgICAgIGlmICh4LnggPj0gMCAmJiB2bjIgPj0gMCkge1xuICAgICAgICAgICAgICBzdWJWZWMyKGQsIHgsIGEpO1xuICAgICAgICAgICAgICBzY2FsZVZlYzIoUDEsIGQueCwgbm9ybWFsJDIpO1xuICAgICAgICAgICAgICBzY2FsZVZlYzIoUDIsIGQueSwgbm9ybWFsJDIpO1xuICAgICAgICAgICAgICBjb21iaW5lM1ZlYzIodkEsIC1tQSwgUDEsIC1tQSwgUDIsIDEsIHZBKTtcbiAgICAgICAgICAgICAgd0EgLT0gaUEgKiAoY3Jvc3NWZWMyVmVjMih2Y3AxLnJBLCBQMSkgKyBjcm9zc1ZlYzJWZWMyKHZjcDIuckEsIFAyKSk7XG4gICAgICAgICAgICAgIGNvbWJpbmUzVmVjMih2QiwgbUIsIFAxLCBtQiwgUDIsIDEsIHZCKTtcbiAgICAgICAgICAgICAgd0IgKz0gaUIgKiAoY3Jvc3NWZWMyVmVjMih2Y3AxLnJCLCBQMSkgKyBjcm9zc1ZlYzJWZWMyKHZjcDIuckIsIFAyKSk7XG4gICAgICAgICAgICAgIHZjcDEubm9ybWFsSW1wdWxzZSA9IHgueDtcbiAgICAgICAgICAgICAgdmNwMi5ub3JtYWxJbXB1bHNlID0geC55O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHgueCA9IDA7XG4gICAgICAgICAgICB4LnkgPSAtdmNwMi5ub3JtYWxNYXNzICogYi55O1xuICAgICAgICAgICAgdm4xID0gdGhpcy52X0suZXkueCAqIHgueSArIGIueDtcbiAgICAgICAgICAgIHZuMiA9IDA7XG4gICAgICAgICAgICBpZiAoeC55ID49IDAgJiYgdm4xID49IDApIHtcbiAgICAgICAgICAgICAgc3ViVmVjMihkLCB4LCBhKTtcbiAgICAgICAgICAgICAgc2NhbGVWZWMyKFAxLCBkLngsIG5vcm1hbCQyKTtcbiAgICAgICAgICAgICAgc2NhbGVWZWMyKFAyLCBkLnksIG5vcm1hbCQyKTtcbiAgICAgICAgICAgICAgY29tYmluZTNWZWMyKHZBLCAtbUEsIFAxLCAtbUEsIFAyLCAxLCB2QSk7XG4gICAgICAgICAgICAgIHdBIC09IGlBICogKGNyb3NzVmVjMlZlYzIodmNwMS5yQSwgUDEpICsgY3Jvc3NWZWMyVmVjMih2Y3AyLnJBLCBQMikpO1xuICAgICAgICAgICAgICBjb21iaW5lM1ZlYzIodkIsIG1CLCBQMSwgbUIsIFAyLCAxLCB2Qik7XG4gICAgICAgICAgICAgIHdCICs9IGlCICogKGNyb3NzVmVjMlZlYzIodmNwMS5yQiwgUDEpICsgY3Jvc3NWZWMyVmVjMih2Y3AyLnJCLCBQMikpO1xuICAgICAgICAgICAgICB2Y3AxLm5vcm1hbEltcHVsc2UgPSB4Lng7XG4gICAgICAgICAgICAgIHZjcDIubm9ybWFsSW1wdWxzZSA9IHgueTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4LnggPSAwO1xuICAgICAgICAgICAgeC55ID0gMDtcbiAgICAgICAgICAgIHZuMSA9IGIueDtcbiAgICAgICAgICAgIHZuMiA9IGIueTtcbiAgICAgICAgICAgIGlmICh2bjEgPj0gMCAmJiB2bjIgPj0gMCkge1xuICAgICAgICAgICAgICBzdWJWZWMyKGQsIHgsIGEpO1xuICAgICAgICAgICAgICBzY2FsZVZlYzIoUDEsIGQueCwgbm9ybWFsJDIpO1xuICAgICAgICAgICAgICBzY2FsZVZlYzIoUDIsIGQueSwgbm9ybWFsJDIpO1xuICAgICAgICAgICAgICBjb21iaW5lM1ZlYzIodkEsIC1tQSwgUDEsIC1tQSwgUDIsIDEsIHZBKTtcbiAgICAgICAgICAgICAgd0EgLT0gaUEgKiAoY3Jvc3NWZWMyVmVjMih2Y3AxLnJBLCBQMSkgKyBjcm9zc1ZlYzJWZWMyKHZjcDIuckEsIFAyKSk7XG4gICAgICAgICAgICAgIGNvbWJpbmUzVmVjMih2QiwgbUIsIFAxLCBtQiwgUDIsIDEsIHZCKTtcbiAgICAgICAgICAgICAgd0IgKz0gaUIgKiAoY3Jvc3NWZWMyVmVjMih2Y3AxLnJCLCBQMSkgKyBjcm9zc1ZlYzJWZWMyKHZjcDIuckIsIFAyKSk7XG4gICAgICAgICAgICAgIHZjcDEubm9ybWFsSW1wdWxzZSA9IHgueDtcbiAgICAgICAgICAgICAgdmNwMi5ub3JtYWxJbXB1bHNlID0geC55O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb3B5VmVjMih2ZWxvY2l0eUEudiwgdkEpO1xuICAgICAgICB2ZWxvY2l0eUEudyA9IHdBO1xuICAgICAgICBjb3B5VmVjMih2ZWxvY2l0eUIudiwgdkIpO1xuICAgICAgICB2ZWxvY2l0eUIudyA9IHdCO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLmFkZFR5cGUgPSBmdW5jdGlvbih0eXBlMSwgdHlwZTIsIGNhbGxiYWNrKSB7XG4gICAgICAgIHNfcmVnaXN0ZXJzW3R5cGUxXSA9IHNfcmVnaXN0ZXJzW3R5cGUxXSB8fCB7fTtcbiAgICAgICAgc19yZWdpc3RlcnNbdHlwZTFdW3R5cGUyXSA9IGNhbGxiYWNrO1xuICAgICAgfTtcbiAgICAgIENvbnRhY3QyLmNyZWF0ZSA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBpbmRleEEsIGZpeHR1cmVCLCBpbmRleEIpIHtcbiAgICAgICAgdmFyIHR5cGVBID0gZml4dHVyZUEubV9zaGFwZS5tX3R5cGU7XG4gICAgICAgIHZhciB0eXBlQiA9IGZpeHR1cmVCLm1fc2hhcGUubV90eXBlO1xuICAgICAgICB2YXIgY29udGFjdCA9IGNvbnRhY3RQb29sLmFsbG9jYXRlKCk7XG4gICAgICAgIHZhciBldmFsdWF0ZUZjbjtcbiAgICAgICAgaWYgKGV2YWx1YXRlRmNuID0gc19yZWdpc3RlcnNbdHlwZUFdICYmIHNfcmVnaXN0ZXJzW3R5cGVBXVt0eXBlQl0pIHtcbiAgICAgICAgICBjb250YWN0LmluaXRpYWxpemUoZml4dHVyZUEsIGluZGV4QSwgZml4dHVyZUIsIGluZGV4QiwgZXZhbHVhdGVGY24pO1xuICAgICAgICB9IGVsc2UgaWYgKGV2YWx1YXRlRmNuID0gc19yZWdpc3RlcnNbdHlwZUJdICYmIHNfcmVnaXN0ZXJzW3R5cGVCXVt0eXBlQV0pIHtcbiAgICAgICAgICBjb250YWN0LmluaXRpYWxpemUoZml4dHVyZUIsIGluZGV4QiwgZml4dHVyZUEsIGluZGV4QSwgZXZhbHVhdGVGY24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGZpeHR1cmVBID0gY29udGFjdC5tX2ZpeHR1cmVBO1xuICAgICAgICBmaXh0dXJlQiA9IGNvbnRhY3QubV9maXh0dXJlQjtcbiAgICAgICAgaW5kZXhBID0gY29udGFjdC5nZXRDaGlsZEluZGV4QSgpO1xuICAgICAgICBpbmRleEIgPSBjb250YWN0LmdldENoaWxkSW5kZXhCKCk7XG4gICAgICAgIHZhciBib2R5QSA9IGZpeHR1cmVBLm1fYm9keTtcbiAgICAgICAgdmFyIGJvZHlCID0gZml4dHVyZUIubV9ib2R5O1xuICAgICAgICBjb250YWN0Lm1fbm9kZUEuY29udGFjdCA9IGNvbnRhY3Q7XG4gICAgICAgIGNvbnRhY3QubV9ub2RlQS5vdGhlciA9IGJvZHlCO1xuICAgICAgICBjb250YWN0Lm1fbm9kZUEucHJldiA9IG51bGw7XG4gICAgICAgIGNvbnRhY3QubV9ub2RlQS5uZXh0ID0gYm9keUEubV9jb250YWN0TGlzdDtcbiAgICAgICAgaWYgKGJvZHlBLm1fY29udGFjdExpc3QgIT0gbnVsbCkge1xuICAgICAgICAgIGJvZHlBLm1fY29udGFjdExpc3QucHJldiA9IGNvbnRhY3QubV9ub2RlQTtcbiAgICAgICAgfVxuICAgICAgICBib2R5QS5tX2NvbnRhY3RMaXN0ID0gY29udGFjdC5tX25vZGVBO1xuICAgICAgICBjb250YWN0Lm1fbm9kZUIuY29udGFjdCA9IGNvbnRhY3Q7XG4gICAgICAgIGNvbnRhY3QubV9ub2RlQi5vdGhlciA9IGJvZHlBO1xuICAgICAgICBjb250YWN0Lm1fbm9kZUIucHJldiA9IG51bGw7XG4gICAgICAgIGNvbnRhY3QubV9ub2RlQi5uZXh0ID0gYm9keUIubV9jb250YWN0TGlzdDtcbiAgICAgICAgaWYgKGJvZHlCLm1fY29udGFjdExpc3QgIT0gbnVsbCkge1xuICAgICAgICAgIGJvZHlCLm1fY29udGFjdExpc3QucHJldiA9IGNvbnRhY3QubV9ub2RlQjtcbiAgICAgICAgfVxuICAgICAgICBib2R5Qi5tX2NvbnRhY3RMaXN0ID0gY29udGFjdC5tX25vZGVCO1xuICAgICAgICBpZiAoZml4dHVyZUEuaXNTZW5zb3IoKSA9PSBmYWxzZSAmJiBmaXh0dXJlQi5pc1NlbnNvcigpID09IGZhbHNlKSB7XG4gICAgICAgICAgYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRhY3Q7XG4gICAgICB9O1xuICAgICAgQ29udGFjdDIuZGVzdHJveSA9IGZ1bmN0aW9uKGNvbnRhY3QsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBmaXh0dXJlQSA9IGNvbnRhY3QubV9maXh0dXJlQTtcbiAgICAgICAgdmFyIGZpeHR1cmVCID0gY29udGFjdC5tX2ZpeHR1cmVCO1xuICAgICAgICBpZiAoZml4dHVyZUEgPT09IG51bGwgfHwgZml4dHVyZUIgPT09IG51bGwpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgYm9keUEgPSBmaXh0dXJlQS5tX2JvZHk7XG4gICAgICAgIHZhciBib2R5QiA9IGZpeHR1cmVCLm1fYm9keTtcbiAgICAgICAgaWYgKGJvZHlBID09PSBudWxsIHx8IGJvZHlCID09PSBudWxsKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGNvbnRhY3QuaXNUb3VjaGluZygpKSB7XG4gICAgICAgICAgbGlzdGVuZXIuZW5kQ29udGFjdChjb250YWN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGFjdC5tX25vZGVBLnByZXYpIHtcbiAgICAgICAgICBjb250YWN0Lm1fbm9kZUEucHJldi5uZXh0ID0gY29udGFjdC5tX25vZGVBLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRhY3QubV9ub2RlQS5uZXh0KSB7XG4gICAgICAgICAgY29udGFjdC5tX25vZGVBLm5leHQucHJldiA9IGNvbnRhY3QubV9ub2RlQS5wcmV2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWN0Lm1fbm9kZUEgPT0gYm9keUEubV9jb250YWN0TGlzdCkge1xuICAgICAgICAgIGJvZHlBLm1fY29udGFjdExpc3QgPSBjb250YWN0Lm1fbm9kZUEubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGFjdC5tX25vZGVCLnByZXYpIHtcbiAgICAgICAgICBjb250YWN0Lm1fbm9kZUIucHJldi5uZXh0ID0gY29udGFjdC5tX25vZGVCLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRhY3QubV9ub2RlQi5uZXh0KSB7XG4gICAgICAgICAgY29udGFjdC5tX25vZGVCLm5leHQucHJldiA9IGNvbnRhY3QubV9ub2RlQi5wcmV2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWN0Lm1fbm9kZUIgPT0gYm9keUIubV9jb250YWN0TGlzdCkge1xuICAgICAgICAgIGJvZHlCLm1fY29udGFjdExpc3QgPSBjb250YWN0Lm1fbm9kZUIubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGFjdC5tX21hbmlmb2xkLnBvaW50Q291bnQgPiAwICYmICFmaXh0dXJlQS5tX2lzU2Vuc29yICYmICFmaXh0dXJlQi5tX2lzU2Vuc29yKSB7XG4gICAgICAgICAgYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGFjdFBvb2wucmVsZWFzZShjb250YWN0KTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gQ29udGFjdDI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBERUZBVUxUUyRiID0ge1xuICAgIGdyYXZpdHk6IFZlYzIuemVybygpLFxuICAgIGFsbG93U2xlZXA6IHRydWUsXG4gICAgd2FybVN0YXJ0aW5nOiB0cnVlLFxuICAgIGNvbnRpbnVvdXNQaHlzaWNzOiB0cnVlLFxuICAgIHN1YlN0ZXBwaW5nOiBmYWxzZSxcbiAgICBibG9ja1NvbHZlOiB0cnVlLFxuICAgIHZlbG9jaXR5SXRlcmF0aW9uczogOCxcbiAgICBwb3NpdGlvbkl0ZXJhdGlvbnM6IDNcbiAgfTtcbiAgdmFyIFdvcmxkID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFdvcmxkMihkZWYpIHtcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFdvcmxkMikpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFdvcmxkMihkZWYpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc19zdGVwID0gbmV3IFRpbWVTdGVwKCk7XG4gICAgICAgIGlmICghZGVmKSB7XG4gICAgICAgICAgZGVmID0ge307XG4gICAgICAgIH0gZWxzZSBpZiAoVmVjMi5pc1ZhbGlkKGRlZikpIHtcbiAgICAgICAgICBkZWYgPSB7IGdyYXZpdHk6IGRlZiB9O1xuICAgICAgICB9XG4gICAgICAgIGRlZiA9IG9wdGlvbnMoZGVmLCBERUZBVUxUUyRiKTtcbiAgICAgICAgdGhpcy5tX3NvbHZlciA9IG5ldyBTb2x2ZXIodGhpcyk7XG4gICAgICAgIHRoaXMubV9icm9hZFBoYXNlID0gbmV3IEJyb2FkUGhhc2UoKTtcbiAgICAgICAgdGhpcy5tX2NvbnRhY3RMaXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX2NvbnRhY3RDb3VudCA9IDA7XG4gICAgICAgIHRoaXMubV9ib2R5TGlzdCA9IG51bGw7XG4gICAgICAgIHRoaXMubV9ib2R5Q291bnQgPSAwO1xuICAgICAgICB0aGlzLm1fam9pbnRMaXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX2pvaW50Q291bnQgPSAwO1xuICAgICAgICB0aGlzLm1fc3RlcENvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5tX2FsbG93U2xlZXAgPSBkZWYuYWxsb3dTbGVlcDtcbiAgICAgICAgdGhpcy5tX2dyYXZpdHkgPSBWZWMyLmNsb25lKGRlZi5ncmF2aXR5KTtcbiAgICAgICAgdGhpcy5tX2NsZWFyRm9yY2VzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5tX25ld0ZpeHR1cmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2xvY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1fd2FybVN0YXJ0aW5nID0gZGVmLndhcm1TdGFydGluZztcbiAgICAgICAgdGhpcy5tX2NvbnRpbnVvdXNQaHlzaWNzID0gZGVmLmNvbnRpbnVvdXNQaHlzaWNzO1xuICAgICAgICB0aGlzLm1fc3ViU3RlcHBpbmcgPSBkZWYuc3ViU3RlcHBpbmc7XG4gICAgICAgIHRoaXMubV9ibG9ja1NvbHZlID0gZGVmLmJsb2NrU29sdmU7XG4gICAgICAgIHRoaXMubV92ZWxvY2l0eUl0ZXJhdGlvbnMgPSBkZWYudmVsb2NpdHlJdGVyYXRpb25zO1xuICAgICAgICB0aGlzLm1fcG9zaXRpb25JdGVyYXRpb25zID0gZGVmLnBvc2l0aW9uSXRlcmF0aW9ucztcbiAgICAgICAgdGhpcy5tX3QgPSAwO1xuICAgICAgICB0aGlzLm1fc3RlcF9jYWxsYmFjayA9IFtdO1xuICAgICAgfVxuICAgICAgV29ybGQyLnByb3RvdHlwZS5fc2VyaWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBib2RpZXMgPSBbXTtcbiAgICAgICAgdmFyIGpvaW50cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBiMiA9IHRoaXMuZ2V0Qm9keUxpc3QoKTsgYjI7IGIyID0gYjIuZ2V0TmV4dCgpKSB7XG4gICAgICAgICAgYm9kaWVzLnB1c2goYjIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGogPSB0aGlzLmdldEpvaW50TGlzdCgpOyBqOyBqID0gai5nZXROZXh0KCkpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGouX3NlcmlhbGl6ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBqb2ludHMucHVzaChqKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBncmF2aXR5OiB0aGlzLm1fZ3Jhdml0eSxcbiAgICAgICAgICBib2RpZXMsXG4gICAgICAgICAgam9pbnRzXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgV29ybGQyLl9kZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGRhdGEsIGNvbnRleHQsIHJlc3RvcmUpIHtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBXb3JsZDIoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd29ybGQgPSBuZXcgV29ybGQyKGRhdGEuZ3Jhdml0eSk7XG4gICAgICAgIGlmIChkYXRhLmJvZGllcykge1xuICAgICAgICAgIGZvciAodmFyIGkgPSBkYXRhLmJvZGllcy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgd29ybGQuX2FkZEJvZHkocmVzdG9yZShCb2R5LCBkYXRhLmJvZGllc1tpXSwgd29ybGQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEuam9pbnRzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IGRhdGEuam9pbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB3b3JsZC5jcmVhdGVKb2ludChyZXN0b3JlKEpvaW50LCBkYXRhLmpvaW50c1tpXSwgd29ybGQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdvcmxkO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuZ2V0Qm9keUxpc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5TGlzdDtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLmdldEpvaW50TGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2pvaW50TGlzdDtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLmdldENvbnRhY3RMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5nZXRCb2R5Q291bnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5Q291bnQ7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5nZXRKb2ludENvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fam9pbnRDb3VudDtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLmdldENvbnRhY3RDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RDb3VudDtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLnNldEdyYXZpdHkgPSBmdW5jdGlvbihncmF2aXR5KSB7XG4gICAgICAgIHRoaXMubV9ncmF2aXR5LnNldChncmF2aXR5KTtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLmdldEdyYXZpdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ncmF2aXR5O1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuaXNMb2NrZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sb2NrZWQ7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5zZXRBbGxvd1NsZWVwaW5nID0gZnVuY3Rpb24oZmxhZykge1xuICAgICAgICBpZiAoZmxhZyA9PSB0aGlzLm1fYWxsb3dTbGVlcCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYWxsb3dTbGVlcCA9IGZsYWc7XG4gICAgICAgIGlmICh0aGlzLm1fYWxsb3dTbGVlcCA9PSBmYWxzZSkge1xuICAgICAgICAgIGZvciAodmFyIGIyID0gdGhpcy5tX2JvZHlMaXN0OyBiMjsgYjIgPSBiMi5tX25leHQpIHtcbiAgICAgICAgICAgIGIyLnNldEF3YWtlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuZ2V0QWxsb3dTbGVlcGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2FsbG93U2xlZXA7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5zZXRXYXJtU3RhcnRpbmcgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgICAgIHRoaXMubV93YXJtU3RhcnRpbmcgPSBmbGFnO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuZ2V0V2FybVN0YXJ0aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fd2FybVN0YXJ0aW5nO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuc2V0Q29udGludW91c1BoeXNpY3MgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgICAgIHRoaXMubV9jb250aW51b3VzUGh5c2ljcyA9IGZsYWc7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5nZXRDb250aW51b3VzUGh5c2ljcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2NvbnRpbnVvdXNQaHlzaWNzO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuc2V0U3ViU3RlcHBpbmcgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgICAgIHRoaXMubV9zdWJTdGVwcGluZyA9IGZsYWc7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5nZXRTdWJTdGVwcGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3N1YlN0ZXBwaW5nO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuc2V0QXV0b0NsZWFyRm9yY2VzID0gZnVuY3Rpb24oZmxhZykge1xuICAgICAgICB0aGlzLm1fY2xlYXJGb3JjZXMgPSBmbGFnO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuZ2V0QXV0b0NsZWFyRm9yY2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fY2xlYXJGb3JjZXM7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5jbGVhckZvcmNlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBib2R5ID0gdGhpcy5tX2JvZHlMaXN0OyBib2R5OyBib2R5ID0gYm9keS5nZXROZXh0KCkpIHtcbiAgICAgICAgICBib2R5Lm1fZm9yY2Uuc2V0WmVybygpO1xuICAgICAgICAgIGJvZHkubV90b3JxdWUgPSAwO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5xdWVyeUFBQkIgPSBmdW5jdGlvbihhYWJiLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYnJvYWRQaGFzZSA9IHRoaXMubV9icm9hZFBoYXNlO1xuICAgICAgICB0aGlzLm1fYnJvYWRQaGFzZS5xdWVyeShhYWJiLCBmdW5jdGlvbihwcm94eUlkKSB7XG4gICAgICAgICAgdmFyIHByb3h5ID0gYnJvYWRQaGFzZS5nZXRVc2VyRGF0YShwcm94eUlkKTtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2socHJveHkuZml4dHVyZSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUucmF5Q2FzdCA9IGZ1bmN0aW9uKHBvaW50MSwgcG9pbnQyLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYnJvYWRQaGFzZSA9IHRoaXMubV9icm9hZFBoYXNlO1xuICAgICAgICB0aGlzLm1fYnJvYWRQaGFzZS5yYXlDYXN0KHtcbiAgICAgICAgICBtYXhGcmFjdGlvbjogMSxcbiAgICAgICAgICBwMTogcG9pbnQxLFxuICAgICAgICAgIHAyOiBwb2ludDJcbiAgICAgICAgfSwgZnVuY3Rpb24oaW5wdXQyLCBwcm94eUlkKSB7XG4gICAgICAgICAgdmFyIHByb3h5ID0gYnJvYWRQaGFzZS5nZXRVc2VyRGF0YShwcm94eUlkKTtcbiAgICAgICAgICB2YXIgZml4dHVyZSA9IHByb3h5LmZpeHR1cmU7XG4gICAgICAgICAgdmFyIGluZGV4ID0gcHJveHkuY2hpbGRJbmRleDtcbiAgICAgICAgICB2YXIgb3V0cHV0MiA9IHt9O1xuICAgICAgICAgIHZhciBoaXQgPSBmaXh0dXJlLnJheUNhc3Qob3V0cHV0MiwgaW5wdXQyLCBpbmRleCk7XG4gICAgICAgICAgaWYgKGhpdCkge1xuICAgICAgICAgICAgdmFyIGZyYWN0aW9uID0gb3V0cHV0Mi5mcmFjdGlvbjtcbiAgICAgICAgICAgIHZhciBwb2ludDMgPSBWZWMyLmFkZChWZWMyLm11bE51bVZlYzIoMSAtIGZyYWN0aW9uLCBpbnB1dDIucDEpLCBWZWMyLm11bE51bVZlYzIoZnJhY3Rpb24sIGlucHV0Mi5wMikpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZpeHR1cmUsIHBvaW50Mywgb3V0cHV0Mi5ub3JtYWwsIGZyYWN0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGlucHV0Mi5tYXhGcmFjdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5nZXRQcm94eUNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYnJvYWRQaGFzZS5nZXRQcm94eUNvdW50KCk7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5nZXRUcmVlSGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYnJvYWRQaGFzZS5nZXRUcmVlSGVpZ2h0KCk7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5nZXRUcmVlQmFsYW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2Jyb2FkUGhhc2UuZ2V0VHJlZUJhbGFuY2UoKTtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLmdldFRyZWVRdWFsaXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYnJvYWRQaGFzZS5nZXRUcmVlUXVhbGl0eSgpO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuc2hpZnRPcmlnaW4gPSBmdW5jdGlvbihuZXdPcmlnaW4pIHtcbiAgICAgICAgaWYgKHRoaXMuaXNMb2NrZWQoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBiMiA9IHRoaXMubV9ib2R5TGlzdDsgYjI7IGIyID0gYjIubV9uZXh0KSB7XG4gICAgICAgICAgYjIubV94Zi5wLnN1YihuZXdPcmlnaW4pO1xuICAgICAgICAgIGIyLm1fc3dlZXAuYzAuc3ViKG5ld09yaWdpbik7XG4gICAgICAgICAgYjIubV9zd2VlcC5jLnN1YihuZXdPcmlnaW4pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGogPSB0aGlzLm1fam9pbnRMaXN0OyBqOyBqID0gai5tX25leHQpIHtcbiAgICAgICAgICBqLnNoaWZ0T3JpZ2luKG5ld09yaWdpbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX2Jyb2FkUGhhc2Uuc2hpZnRPcmlnaW4obmV3T3JpZ2luKTtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLl9hZGRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgICAgICBpZiAodGhpcy5pc0xvY2tlZCgpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGJvZHkubV9wcmV2ID0gbnVsbDtcbiAgICAgICAgYm9keS5tX25leHQgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgICAgIGlmICh0aGlzLm1fYm9keUxpc3QpIHtcbiAgICAgICAgICB0aGlzLm1fYm9keUxpc3QubV9wcmV2ID0gYm9keTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUxpc3QgPSBib2R5O1xuICAgICAgICArK3RoaXMubV9ib2R5Q291bnQ7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5jcmVhdGVCb2R5ID0gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xuICAgICAgICBpZiAodGhpcy5pc0xvY2tlZCgpKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlZiA9IHt9O1xuICAgICAgICBpZiAoIWFyZzEpIDtcbiAgICAgICAgZWxzZSBpZiAoVmVjMi5pc1ZhbGlkKGFyZzEpKSB7XG4gICAgICAgICAgZGVmID0geyBwb3NpdGlvbjogYXJnMSwgYW5nbGU6IGFyZzIgfTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnMSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGRlZiA9IGFyZzE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJvZHkgPSBuZXcgQm9keSh0aGlzLCBkZWYpO1xuICAgICAgICB0aGlzLl9hZGRCb2R5KGJvZHkpO1xuICAgICAgICByZXR1cm4gYm9keTtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLmNyZWF0ZUR5bmFtaWNCb2R5ID0gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xuICAgICAgICB2YXIgZGVmID0ge307XG4gICAgICAgIGlmICghYXJnMSkgO1xuICAgICAgICBlbHNlIGlmIChWZWMyLmlzVmFsaWQoYXJnMSkpIHtcbiAgICAgICAgICBkZWYgPSB7IHBvc2l0aW9uOiBhcmcxLCBhbmdsZTogYXJnMiB9O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmcxID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgZGVmID0gYXJnMTtcbiAgICAgICAgfVxuICAgICAgICBkZWYudHlwZSA9IFwiZHluYW1pY1wiO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVCb2R5KGRlZik7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5jcmVhdGVLaW5lbWF0aWNCb2R5ID0gZnVuY3Rpb24oYXJnMSwgYXJnMikge1xuICAgICAgICB2YXIgZGVmID0ge307XG4gICAgICAgIGlmICghYXJnMSkgO1xuICAgICAgICBlbHNlIGlmIChWZWMyLmlzVmFsaWQoYXJnMSkpIHtcbiAgICAgICAgICBkZWYgPSB7IHBvc2l0aW9uOiBhcmcxLCBhbmdsZTogYXJnMiB9O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmcxID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgZGVmID0gYXJnMTtcbiAgICAgICAgfVxuICAgICAgICBkZWYudHlwZSA9IFwia2luZW1hdGljXCI7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUJvZHkoZGVmKTtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLmRlc3Ryb3lCb2R5ID0gZnVuY3Rpb24oYjIpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNMb2NrZWQoKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYjIubV9kZXN0cm95ZWQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGplID0gYjIubV9qb2ludExpc3Q7XG4gICAgICAgIHdoaWxlIChqZSkge1xuICAgICAgICAgIHZhciBqZTAgPSBqZTtcbiAgICAgICAgICBqZSA9IGplLm5leHQ7XG4gICAgICAgICAgdGhpcy5wdWJsaXNoKFwicmVtb3ZlLWpvaW50XCIsIGplMC5qb2ludCk7XG4gICAgICAgICAgdGhpcy5kZXN0cm95Sm9pbnQoamUwLmpvaW50KTtcbiAgICAgICAgICBiMi5tX2pvaW50TGlzdCA9IGplO1xuICAgICAgICB9XG4gICAgICAgIGIyLm1fam9pbnRMaXN0ID0gbnVsbDtcbiAgICAgICAgdmFyIGNlID0gYjIubV9jb250YWN0TGlzdDtcbiAgICAgICAgd2hpbGUgKGNlKSB7XG4gICAgICAgICAgdmFyIGNlMCA9IGNlO1xuICAgICAgICAgIGNlID0gY2UubmV4dDtcbiAgICAgICAgICB0aGlzLmRlc3Ryb3lDb250YWN0KGNlMC5jb250YWN0KTtcbiAgICAgICAgICBiMi5tX2NvbnRhY3RMaXN0ID0gY2U7XG4gICAgICAgIH1cbiAgICAgICAgYjIubV9jb250YWN0TGlzdCA9IG51bGw7XG4gICAgICAgIHZhciBmID0gYjIubV9maXh0dXJlTGlzdDtcbiAgICAgICAgd2hpbGUgKGYpIHtcbiAgICAgICAgICB2YXIgZjAgPSBmO1xuICAgICAgICAgIGYgPSBmLm1fbmV4dDtcbiAgICAgICAgICB0aGlzLnB1Ymxpc2goXCJyZW1vdmUtZml4dHVyZVwiLCBmMCk7XG4gICAgICAgICAgZjAuZGVzdHJveVByb3hpZXModGhpcy5tX2Jyb2FkUGhhc2UpO1xuICAgICAgICAgIGIyLm1fZml4dHVyZUxpc3QgPSBmO1xuICAgICAgICB9XG4gICAgICAgIGIyLm1fZml4dHVyZUxpc3QgPSBudWxsO1xuICAgICAgICBpZiAoYjIubV9wcmV2KSB7XG4gICAgICAgICAgYjIubV9wcmV2Lm1fbmV4dCA9IGIyLm1fbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYjIubV9uZXh0KSB7XG4gICAgICAgICAgYjIubV9uZXh0Lm1fcHJldiA9IGIyLm1fcHJldjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYjIgPT0gdGhpcy5tX2JvZHlMaXN0KSB7XG4gICAgICAgICAgdGhpcy5tX2JvZHlMaXN0ID0gYjIubV9uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGIyLm1fZGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgICAgLS10aGlzLm1fYm9keUNvdW50O1xuICAgICAgICB0aGlzLnB1Ymxpc2goXCJyZW1vdmUtYm9keVwiLCBiMik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuY3JlYXRlSm9pbnQgPSBmdW5jdGlvbihqb2ludCkge1xuICAgICAgICBpZiAodGhpcy5pc0xvY2tlZCgpKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgam9pbnQubV9wcmV2ID0gbnVsbDtcbiAgICAgICAgam9pbnQubV9uZXh0ID0gdGhpcy5tX2pvaW50TGlzdDtcbiAgICAgICAgaWYgKHRoaXMubV9qb2ludExpc3QpIHtcbiAgICAgICAgICB0aGlzLm1fam9pbnRMaXN0Lm1fcHJldiA9IGpvaW50O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9qb2ludExpc3QgPSBqb2ludDtcbiAgICAgICAgKyt0aGlzLm1fam9pbnRDb3VudDtcbiAgICAgICAgam9pbnQubV9lZGdlQS5qb2ludCA9IGpvaW50O1xuICAgICAgICBqb2ludC5tX2VkZ2VBLm90aGVyID0gam9pbnQubV9ib2R5QjtcbiAgICAgICAgam9pbnQubV9lZGdlQS5wcmV2ID0gbnVsbDtcbiAgICAgICAgam9pbnQubV9lZGdlQS5uZXh0ID0gam9pbnQubV9ib2R5QS5tX2pvaW50TGlzdDtcbiAgICAgICAgaWYgKGpvaW50Lm1fYm9keUEubV9qb2ludExpc3QpXG4gICAgICAgICAgam9pbnQubV9ib2R5QS5tX2pvaW50TGlzdC5wcmV2ID0gam9pbnQubV9lZGdlQTtcbiAgICAgICAgam9pbnQubV9ib2R5QS5tX2pvaW50TGlzdCA9IGpvaW50Lm1fZWRnZUE7XG4gICAgICAgIGpvaW50Lm1fZWRnZUIuam9pbnQgPSBqb2ludDtcbiAgICAgICAgam9pbnQubV9lZGdlQi5vdGhlciA9IGpvaW50Lm1fYm9keUE7XG4gICAgICAgIGpvaW50Lm1fZWRnZUIucHJldiA9IG51bGw7XG4gICAgICAgIGpvaW50Lm1fZWRnZUIubmV4dCA9IGpvaW50Lm1fYm9keUIubV9qb2ludExpc3Q7XG4gICAgICAgIGlmIChqb2ludC5tX2JvZHlCLm1fam9pbnRMaXN0KVxuICAgICAgICAgIGpvaW50Lm1fYm9keUIubV9qb2ludExpc3QucHJldiA9IGpvaW50Lm1fZWRnZUI7XG4gICAgICAgIGpvaW50Lm1fYm9keUIubV9qb2ludExpc3QgPSBqb2ludC5tX2VkZ2VCO1xuICAgICAgICBpZiAoam9pbnQubV9jb2xsaWRlQ29ubmVjdGVkID09IGZhbHNlKSB7XG4gICAgICAgICAgZm9yICh2YXIgZWRnZSA9IGpvaW50Lm1fYm9keUIuZ2V0Q29udGFjdExpc3QoKTsgZWRnZTsgZWRnZSA9IGVkZ2UubmV4dCkge1xuICAgICAgICAgICAgaWYgKGVkZ2Uub3RoZXIgPT0gam9pbnQubV9ib2R5QSkge1xuICAgICAgICAgICAgICBlZGdlLmNvbnRhY3QuZmxhZ0ZvckZpbHRlcmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gam9pbnQ7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5kZXN0cm95Sm9pbnQgPSBmdW5jdGlvbihqb2ludCkge1xuICAgICAgICBpZiAodGhpcy5pc0xvY2tlZCgpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb2ludC5tX3ByZXYpIHtcbiAgICAgICAgICBqb2ludC5tX3ByZXYubV9uZXh0ID0gam9pbnQubV9uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb2ludC5tX25leHQpIHtcbiAgICAgICAgICBqb2ludC5tX25leHQubV9wcmV2ID0gam9pbnQubV9wcmV2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb2ludCA9PSB0aGlzLm1fam9pbnRMaXN0KSB7XG4gICAgICAgICAgdGhpcy5tX2pvaW50TGlzdCA9IGpvaW50Lm1fbmV4dDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYm9keUEgPSBqb2ludC5tX2JvZHlBO1xuICAgICAgICB2YXIgYm9keUIgPSBqb2ludC5tX2JvZHlCO1xuICAgICAgICBib2R5QS5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIGlmIChqb2ludC5tX2VkZ2VBLnByZXYpIHtcbiAgICAgICAgICBqb2ludC5tX2VkZ2VBLnByZXYubmV4dCA9IGpvaW50Lm1fZWRnZUEubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoam9pbnQubV9lZGdlQS5uZXh0KSB7XG4gICAgICAgICAgam9pbnQubV9lZGdlQS5uZXh0LnByZXYgPSBqb2ludC5tX2VkZ2VBLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpvaW50Lm1fZWRnZUEgPT0gYm9keUEubV9qb2ludExpc3QpIHtcbiAgICAgICAgICBib2R5QS5tX2pvaW50TGlzdCA9IGpvaW50Lm1fZWRnZUEubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBqb2ludC5tX2VkZ2VBLnByZXYgPSBudWxsO1xuICAgICAgICBqb2ludC5tX2VkZ2VBLm5leHQgPSBudWxsO1xuICAgICAgICBpZiAoam9pbnQubV9lZGdlQi5wcmV2KSB7XG4gICAgICAgICAgam9pbnQubV9lZGdlQi5wcmV2Lm5leHQgPSBqb2ludC5tX2VkZ2VCLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpvaW50Lm1fZWRnZUIubmV4dCkge1xuICAgICAgICAgIGpvaW50Lm1fZWRnZUIubmV4dC5wcmV2ID0gam9pbnQubV9lZGdlQi5wcmV2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb2ludC5tX2VkZ2VCID09IGJvZHlCLm1fam9pbnRMaXN0KSB7XG4gICAgICAgICAgYm9keUIubV9qb2ludExpc3QgPSBqb2ludC5tX2VkZ2VCLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgam9pbnQubV9lZGdlQi5wcmV2ID0gbnVsbDtcbiAgICAgICAgam9pbnQubV9lZGdlQi5uZXh0ID0gbnVsbDtcbiAgICAgICAgLS10aGlzLm1fam9pbnRDb3VudDtcbiAgICAgICAgaWYgKGpvaW50Lm1fY29sbGlkZUNvbm5lY3RlZCA9PSBmYWxzZSkge1xuICAgICAgICAgIHZhciBlZGdlID0gYm9keUIuZ2V0Q29udGFjdExpc3QoKTtcbiAgICAgICAgICB3aGlsZSAoZWRnZSkge1xuICAgICAgICAgICAgaWYgKGVkZ2Uub3RoZXIgPT0gYm9keUEpIHtcbiAgICAgICAgICAgICAgZWRnZS5jb250YWN0LmZsYWdGb3JGaWx0ZXJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucHVibGlzaChcInJlbW92ZS1qb2ludFwiLCBqb2ludCk7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24odGltZVN0ZXAsIHZlbG9jaXR5SXRlcmF0aW9ucywgcG9zaXRpb25JdGVyYXRpb25zKSB7XG4gICAgICAgIHRoaXMucHVibGlzaChcInByZS1zdGVwXCIsIHRpbWVTdGVwKTtcbiAgICAgICAgaWYgKCh2ZWxvY2l0eUl0ZXJhdGlvbnMgfCAwKSAhPT0gdmVsb2NpdHlJdGVyYXRpb25zKSB7XG4gICAgICAgICAgdmVsb2NpdHlJdGVyYXRpb25zID0gMDtcbiAgICAgICAgfVxuICAgICAgICB2ZWxvY2l0eUl0ZXJhdGlvbnMgPSB2ZWxvY2l0eUl0ZXJhdGlvbnMgfHwgdGhpcy5tX3ZlbG9jaXR5SXRlcmF0aW9ucztcbiAgICAgICAgcG9zaXRpb25JdGVyYXRpb25zID0gcG9zaXRpb25JdGVyYXRpb25zIHx8IHRoaXMubV9wb3NpdGlvbkl0ZXJhdGlvbnM7XG4gICAgICAgIGlmICh0aGlzLm1fbmV3Rml4dHVyZSkge1xuICAgICAgICAgIHRoaXMuZmluZE5ld0NvbnRhY3RzKCk7XG4gICAgICAgICAgdGhpcy5tX25ld0ZpeHR1cmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fbG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zX3N0ZXAucmVzZXQodGltZVN0ZXApO1xuICAgICAgICB0aGlzLnNfc3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnMgPSB2ZWxvY2l0eUl0ZXJhdGlvbnM7XG4gICAgICAgIHRoaXMuc19zdGVwLnBvc2l0aW9uSXRlcmF0aW9ucyA9IHBvc2l0aW9uSXRlcmF0aW9ucztcbiAgICAgICAgdGhpcy5zX3N0ZXAud2FybVN0YXJ0aW5nID0gdGhpcy5tX3dhcm1TdGFydGluZztcbiAgICAgICAgdGhpcy5zX3N0ZXAuYmxvY2tTb2x2ZSA9IHRoaXMubV9ibG9ja1NvbHZlO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhY3RzKCk7XG4gICAgICAgIGlmICh0aGlzLm1fc3RlcENvbXBsZXRlICYmIHRpbWVTdGVwID4gMCkge1xuICAgICAgICAgIHRoaXMubV9zb2x2ZXIuc29sdmVXb3JsZCh0aGlzLnNfc3RlcCk7XG4gICAgICAgICAgZm9yICh2YXIgYjIgPSB0aGlzLm1fYm9keUxpc3Q7IGIyOyBiMiA9IGIyLmdldE5leHQoKSkge1xuICAgICAgICAgICAgaWYgKGIyLm1faXNsYW5kRmxhZyA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiMi5pc1N0YXRpYygpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYjIuc3luY2hyb25pemVGaXh0dXJlcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmZpbmROZXdDb250YWN0cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fY29udGludW91c1BoeXNpY3MgJiYgdGltZVN0ZXAgPiAwKSB7XG4gICAgICAgICAgdGhpcy5tX3NvbHZlci5zb2x2ZVdvcmxkVE9JKHRoaXMuc19zdGVwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2NsZWFyRm9yY2VzKSB7XG4gICAgICAgICAgdGhpcy5jbGVhckZvcmNlcygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9sb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGNhbGxiYWNrO1xuICAgICAgICB3aGlsZSAoY2FsbGJhY2sgPSB0aGlzLm1fc3RlcF9jYWxsYmFjay5zaGlmdCgpKSB7XG4gICAgICAgICAgY2FsbGJhY2sodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wdWJsaXNoKFwicG9zdC1zdGVwXCIsIHRpbWVTdGVwKTtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLnF1ZXVlVXBkYXRlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTG9ja2VkKCkpIHtcbiAgICAgICAgICBjYWxsYmFjayh0aGlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fc3RlcF9jYWxsYmFjay5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuZmluZE5ld0NvbnRhY3RzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubV9icm9hZFBoYXNlLnVwZGF0ZVBhaXJzKGZ1bmN0aW9uKHByb3h5QSwgcHJveHlCKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZUNvbnRhY3QocHJveHlBLCBwcm94eUIpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLmNyZWF0ZUNvbnRhY3QgPSBmdW5jdGlvbihwcm94eUEsIHByb3h5Qikge1xuICAgICAgICB2YXIgZml4dHVyZUEgPSBwcm94eUEuZml4dHVyZTtcbiAgICAgICAgdmFyIGZpeHR1cmVCID0gcHJveHlCLmZpeHR1cmU7XG4gICAgICAgIHZhciBpbmRleEEgPSBwcm94eUEuY2hpbGRJbmRleDtcbiAgICAgICAgdmFyIGluZGV4QiA9IHByb3h5Qi5jaGlsZEluZGV4O1xuICAgICAgICB2YXIgYm9keUEgPSBmaXh0dXJlQS5nZXRCb2R5KCk7XG4gICAgICAgIHZhciBib2R5QiA9IGZpeHR1cmVCLmdldEJvZHkoKTtcbiAgICAgICAgaWYgKGJvZHlBID09IGJvZHlCKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlZGdlID0gYm9keUIuZ2V0Q29udGFjdExpc3QoKTtcbiAgICAgICAgd2hpbGUgKGVkZ2UpIHtcbiAgICAgICAgICBpZiAoZWRnZS5vdGhlciA9PSBib2R5QSkge1xuICAgICAgICAgICAgdmFyIGZBID0gZWRnZS5jb250YWN0LmdldEZpeHR1cmVBKCk7XG4gICAgICAgICAgICB2YXIgZkIgPSBlZGdlLmNvbnRhY3QuZ2V0Rml4dHVyZUIoKTtcbiAgICAgICAgICAgIHZhciBpQSA9IGVkZ2UuY29udGFjdC5nZXRDaGlsZEluZGV4QSgpO1xuICAgICAgICAgICAgdmFyIGlCID0gZWRnZS5jb250YWN0LmdldENoaWxkSW5kZXhCKCk7XG4gICAgICAgICAgICBpZiAoZkEgPT0gZml4dHVyZUEgJiYgZkIgPT0gZml4dHVyZUIgJiYgaUEgPT0gaW5kZXhBICYmIGlCID09IGluZGV4Qikge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZkEgPT0gZml4dHVyZUIgJiYgZkIgPT0gZml4dHVyZUEgJiYgaUEgPT0gaW5kZXhCICYmIGlCID09IGluZGV4QSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJvZHlCLnNob3VsZENvbGxpZGUoYm9keUEpID09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaXh0dXJlQi5zaG91bGRDb2xsaWRlKGZpeHR1cmVBKSA9PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29udGFjdCA9IENvbnRhY3QuY3JlYXRlKGZpeHR1cmVBLCBpbmRleEEsIGZpeHR1cmVCLCBpbmRleEIpO1xuICAgICAgICBpZiAoY29udGFjdCA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRhY3QubV9wcmV2ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMubV9jb250YWN0TGlzdCAhPSBudWxsKSB7XG4gICAgICAgICAgY29udGFjdC5tX25leHQgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgICAgICAgdGhpcy5tX2NvbnRhY3RMaXN0Lm1fcHJldiA9IGNvbnRhY3Q7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX2NvbnRhY3RMaXN0ID0gY29udGFjdDtcbiAgICAgICAgKyt0aGlzLm1fY29udGFjdENvdW50O1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUudXBkYXRlQ29udGFjdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGMyO1xuICAgICAgICB2YXIgbmV4dF9jID0gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICAgICAgICB3aGlsZSAoYzIgPSBuZXh0X2MpIHtcbiAgICAgICAgICBuZXh0X2MgPSBjMi5nZXROZXh0KCk7XG4gICAgICAgICAgdmFyIGZpeHR1cmVBID0gYzIuZ2V0Rml4dHVyZUEoKTtcbiAgICAgICAgICB2YXIgZml4dHVyZUIgPSBjMi5nZXRGaXh0dXJlQigpO1xuICAgICAgICAgIHZhciBpbmRleEEgPSBjMi5nZXRDaGlsZEluZGV4QSgpO1xuICAgICAgICAgIHZhciBpbmRleEIgPSBjMi5nZXRDaGlsZEluZGV4QigpO1xuICAgICAgICAgIHZhciBib2R5QSA9IGZpeHR1cmVBLmdldEJvZHkoKTtcbiAgICAgICAgICB2YXIgYm9keUIgPSBmaXh0dXJlQi5nZXRCb2R5KCk7XG4gICAgICAgICAgaWYgKGMyLm1fZmlsdGVyRmxhZykge1xuICAgICAgICAgICAgaWYgKGJvZHlCLnNob3VsZENvbGxpZGUoYm9keUEpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHRoaXMuZGVzdHJveUNvbnRhY3QoYzIpO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaXh0dXJlQi5zaG91bGRDb2xsaWRlKGZpeHR1cmVBKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lDb250YWN0KGMyKTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjMi5tX2ZpbHRlckZsYWcgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGFjdGl2ZUEgPSBib2R5QS5pc0F3YWtlKCkgJiYgIWJvZHlBLmlzU3RhdGljKCk7XG4gICAgICAgICAgdmFyIGFjdGl2ZUIgPSBib2R5Qi5pc0F3YWtlKCkgJiYgIWJvZHlCLmlzU3RhdGljKCk7XG4gICAgICAgICAgaWYgKGFjdGl2ZUEgPT0gZmFsc2UgJiYgYWN0aXZlQiA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBwcm94eUlkQSA9IGZpeHR1cmVBLm1fcHJveGllc1tpbmRleEFdLnByb3h5SWQ7XG4gICAgICAgICAgdmFyIHByb3h5SWRCID0gZml4dHVyZUIubV9wcm94aWVzW2luZGV4Ql0ucHJveHlJZDtcbiAgICAgICAgICB2YXIgb3ZlcmxhcCA9IHRoaXMubV9icm9hZFBoYXNlLnRlc3RPdmVybGFwKHByb3h5SWRBLCBwcm94eUlkQik7XG4gICAgICAgICAgaWYgKG92ZXJsYXAgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUNvbnRhY3QoYzIpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGMyLnVwZGF0ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUuZGVzdHJveUNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XG4gICAgICAgIGlmIChjb250YWN0Lm1fcHJldikge1xuICAgICAgICAgIGNvbnRhY3QubV9wcmV2Lm1fbmV4dCA9IGNvbnRhY3QubV9uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWN0Lm1fbmV4dCkge1xuICAgICAgICAgIGNvbnRhY3QubV9uZXh0Lm1fcHJldiA9IGNvbnRhY3QubV9wcmV2O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWN0ID09IHRoaXMubV9jb250YWN0TGlzdCkge1xuICAgICAgICAgIHRoaXMubV9jb250YWN0TGlzdCA9IGNvbnRhY3QubV9uZXh0O1xuICAgICAgICB9XG4gICAgICAgIENvbnRhY3QuZGVzdHJveShjb250YWN0LCB0aGlzKTtcbiAgICAgICAgLS10aGlzLm1fY29udGFjdENvdW50O1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUub24gPSBmdW5jdGlvbihuYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGxpc3RlbmVyICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fbGlzdGVuZXJzW25hbWVdKSB7XG4gICAgICAgICAgdGhpcy5fbGlzdGVuZXJzW25hbWVdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzW25hbWVdLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgbGlzdGVuZXIgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMgJiYgdGhpcy5fbGlzdGVuZXJzW25hbWVdO1xuICAgICAgICBpZiAoIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLnB1Ymxpc2ggPSBmdW5jdGlvbihuYW1lLCBhcmcxLCBhcmcyLCBhcmczKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMgJiYgdGhpcy5fbGlzdGVuZXJzW25hbWVdO1xuICAgICAgICBpZiAoIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgbGlzdGVuZXJzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgbGlzdGVuZXJzW2xdLmNhbGwodGhpcywgYXJnMSwgYXJnMiwgYXJnMyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3RlbmVycy5sZW5ndGg7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5iZWdpbkNvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XG4gICAgICAgIHRoaXMucHVibGlzaChcImJlZ2luLWNvbnRhY3RcIiwgY29udGFjdCk7XG4gICAgICB9O1xuICAgICAgV29ybGQyLnByb3RvdHlwZS5lbmRDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge1xuICAgICAgICB0aGlzLnB1Ymxpc2goXCJlbmQtY29udGFjdFwiLCBjb250YWN0KTtcbiAgICAgIH07XG4gICAgICBXb3JsZDIucHJvdG90eXBlLnByZVNvbHZlID0gZnVuY3Rpb24oY29udGFjdCwgb2xkTWFuaWZvbGQyKSB7XG4gICAgICAgIHRoaXMucHVibGlzaChcInByZS1zb2x2ZVwiLCBjb250YWN0LCBvbGRNYW5pZm9sZDIpO1xuICAgICAgfTtcbiAgICAgIFdvcmxkMi5wcm90b3R5cGUucG9zdFNvbHZlID0gZnVuY3Rpb24oY29udGFjdCwgaW1wdWxzZSkge1xuICAgICAgICB0aGlzLnB1Ymxpc2goXCJwb3N0LXNvbHZlXCIsIGNvbnRhY3QsIGltcHVsc2UpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBXb3JsZDI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBWZWMzID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFZlYzMyKHgyLCB5LCB6KSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBWZWMzMikpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFZlYzMyKHgyLCB5LCB6KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHgyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdGhpcy54ID0gMDtcbiAgICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICAgIHRoaXMueiA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHgyID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgdGhpcy54ID0geDIueDtcbiAgICAgICAgICB0aGlzLnkgPSB4Mi55O1xuICAgICAgICAgIHRoaXMueiA9IHgyLno7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy54ID0geDI7XG4gICAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgICB0aGlzLnogPSB6O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBWZWMzMi5wcm90b3R5cGUuX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICB5OiB0aGlzLnksXG4gICAgICAgICAgejogdGhpcy56XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgVmVjMzIuX2Rlc2VyaWFsaXplID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShWZWMzMi5wcm90b3R5cGUpO1xuICAgICAgICBvYmoueCA9IGRhdGEueDtcbiAgICAgICAgb2JqLnkgPSBkYXRhLnk7XG4gICAgICAgIG9iai56ID0gZGF0YS56O1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfTtcbiAgICAgIFZlYzMyLm5lbyA9IGZ1bmN0aW9uKHgyLCB5LCB6KSB7XG4gICAgICAgIHZhciBvYmogPSBPYmplY3QuY3JlYXRlKFZlYzMyLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai54ID0geDI7XG4gICAgICAgIG9iai55ID0geTtcbiAgICAgICAgb2JqLnogPSB6O1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfTtcbiAgICAgIFZlYzMyLnplcm8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9iaiA9IE9iamVjdC5jcmVhdGUoVmVjMzIucHJvdG90eXBlKTtcbiAgICAgICAgb2JqLnggPSAwO1xuICAgICAgICBvYmoueSA9IDA7XG4gICAgICAgIG9iai56ID0gMDtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH07XG4gICAgICBWZWMzMi5jbG9uZSA9IGZ1bmN0aW9uKHYzKSB7XG4gICAgICAgIHJldHVybiBWZWMzMi5uZW8odjMueCwgdjMueSwgdjMueik7XG4gICAgICB9O1xuICAgICAgVmVjMzIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcbiAgICAgIH07XG4gICAgICBWZWMzMi5pc1ZhbGlkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG9iai54KSAmJiBOdW1iZXIuaXNGaW5pdGUob2JqLnkpICYmIE51bWJlci5pc0Zpbml0ZShvYmoueik7XG4gICAgICB9O1xuICAgICAgVmVjMzIuYXNzZXJ0ID0gZnVuY3Rpb24obykge1xuICAgICAgfTtcbiAgICAgIFZlYzMyLnByb3RvdHlwZS5zZXRaZXJvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMueCA9IDA7XG4gICAgICAgIHRoaXMueSA9IDA7XG4gICAgICAgIHRoaXMueiA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIFZlYzMyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih4MiwgeSwgeikge1xuICAgICAgICB0aGlzLnggPSB4MjtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy56ID0gejtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgVmVjMzIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHcpIHtcbiAgICAgICAgdGhpcy54ICs9IHcueDtcbiAgICAgICAgdGhpcy55ICs9IHcueTtcbiAgICAgICAgdGhpcy56ICs9IHcuejtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgVmVjMzIucHJvdG90eXBlLnN1YiA9IGZ1bmN0aW9uKHcpIHtcbiAgICAgICAgdGhpcy54IC09IHcueDtcbiAgICAgICAgdGhpcy55IC09IHcueTtcbiAgICAgICAgdGhpcy56IC09IHcuejtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgVmVjMzIucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdGhpcy54ICo9IG07XG4gICAgICAgIHRoaXMueSAqPSBtO1xuICAgICAgICB0aGlzLnogKj0gbTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgVmVjMzIuYXJlRXF1YWwgPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICByZXR1cm4gdjMgPT09IHcgfHwgdHlwZW9mIHYzID09PSBcIm9iamVjdFwiICYmIHYzICE9PSBudWxsICYmIHR5cGVvZiB3ID09PSBcIm9iamVjdFwiICYmIHcgIT09IG51bGwgJiYgdjMueCA9PT0gdy54ICYmIHYzLnkgPT09IHcueSAmJiB2My56ID09PSB3Lno7XG4gICAgICB9O1xuICAgICAgVmVjMzIuZG90ID0gZnVuY3Rpb24odjMsIHcpIHtcbiAgICAgICAgcmV0dXJuIHYzLnggKiB3LnggKyB2My55ICogdy55ICsgdjMueiAqIHcuejtcbiAgICAgIH07XG4gICAgICBWZWMzMi5jcm9zcyA9IGZ1bmN0aW9uKHYzLCB3KSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjMzIodjMueSAqIHcueiAtIHYzLnogKiB3LnksIHYzLnogKiB3LnggLSB2My54ICogdy56LCB2My54ICogdy55IC0gdjMueSAqIHcueCk7XG4gICAgICB9O1xuICAgICAgVmVjMzIuYWRkID0gZnVuY3Rpb24odjMsIHcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMzMih2My54ICsgdy54LCB2My55ICsgdy55LCB2My56ICsgdy56KTtcbiAgICAgIH07XG4gICAgICBWZWMzMi5zdWIgPSBmdW5jdGlvbih2Mywgdykge1xuICAgICAgICByZXR1cm4gbmV3IFZlYzMyKHYzLnggLSB3LngsIHYzLnkgLSB3LnksIHYzLnogLSB3LnopO1xuICAgICAgfTtcbiAgICAgIFZlYzMyLm11bCA9IGZ1bmN0aW9uKHYzLCBtKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjMzIobSAqIHYzLngsIG0gKiB2My55LCBtICogdjMueik7XG4gICAgICB9O1xuICAgICAgVmVjMzIucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnggPSAtdGhpcy54O1xuICAgICAgICB0aGlzLnkgPSAtdGhpcy55O1xuICAgICAgICB0aGlzLnogPSAtdGhpcy56O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBWZWMzMi5uZWcgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICByZXR1cm4gbmV3IFZlYzMyKC12My54LCAtdjMueSwgLXYzLnopO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBWZWMzMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIHYxJDIgPSB2ZWMyKDAsIDApO1xuICB2YXIgdjIkMSA9IHZlYzIoMCwgMCk7XG4gIHZhciBFZGdlU2hhcGUgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKEVkZ2VTaGFwZTIsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBFZGdlU2hhcGUyKHYxMjIsIHYyMikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIShfdGhpcyBpbnN0YW5jZW9mIEVkZ2VTaGFwZTIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFZGdlU2hhcGUyKHYxMjIsIHYyMik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5tX3R5cGUgPSBFZGdlU2hhcGUyLlRZUEU7XG4gICAgICAgIF90aGlzLm1fcmFkaXVzID0gU2V0dGluZ3NJbnRlcm5hbC5wb2x5Z29uUmFkaXVzO1xuICAgICAgICBfdGhpcy5tX3ZlcnRleDEgPSB2MTIyID8gVmVjMi5jbG9uZSh2MTIyKSA6IFZlYzIuemVybygpO1xuICAgICAgICBfdGhpcy5tX3ZlcnRleDIgPSB2MjIgPyBWZWMyLmNsb25lKHYyMikgOiBWZWMyLnplcm8oKTtcbiAgICAgICAgX3RoaXMubV92ZXJ0ZXgwID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIF90aGlzLm1fdmVydGV4MyA9IFZlYzIuemVybygpO1xuICAgICAgICBfdGhpcy5tX2hhc1ZlcnRleDAgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMubV9oYXNWZXJ0ZXgzID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLl9zZXJpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiB0aGlzLm1fdHlwZSxcbiAgICAgICAgICB2ZXJ0ZXgxOiB0aGlzLm1fdmVydGV4MSxcbiAgICAgICAgICB2ZXJ0ZXgyOiB0aGlzLm1fdmVydGV4MixcbiAgICAgICAgICB2ZXJ0ZXgwOiB0aGlzLm1fdmVydGV4MCxcbiAgICAgICAgICB2ZXJ0ZXgzOiB0aGlzLm1fdmVydGV4MyxcbiAgICAgICAgICBoYXNWZXJ0ZXgwOiB0aGlzLm1faGFzVmVydGV4MCxcbiAgICAgICAgICBoYXNWZXJ0ZXgzOiB0aGlzLm1faGFzVmVydGV4M1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIuX2Rlc2VyaWFsaXplID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2YXIgc2hhcGUgPSBuZXcgRWRnZVNoYXBlMihkYXRhLnZlcnRleDEsIGRhdGEudmVydGV4Mik7XG4gICAgICAgIGlmIChzaGFwZS5tX2hhc1ZlcnRleDApIHtcbiAgICAgICAgICBzaGFwZS5zZXRQcmV2VmVydGV4KGRhdGEudmVydGV4MCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYXBlLm1faGFzVmVydGV4Mykge1xuICAgICAgICAgIHNoYXBlLnNldE5leHRWZXJ0ZXgoZGF0YS52ZXJ0ZXgzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgICB9O1xuICAgICAgRWRnZVNoYXBlMi5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB9O1xuICAgICAgRWRnZVNoYXBlMi5wcm90b3R5cGUuZ2V0UmFkaXVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fcmFkaXVzO1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV90eXBlO1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLnNldE5leHQgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXROZXh0VmVydGV4KHYzKTtcbiAgICAgIH07XG4gICAgICBFZGdlU2hhcGUyLnByb3RvdHlwZS5zZXROZXh0VmVydGV4ID0gZnVuY3Rpb24odjMpIHtcbiAgICAgICAgaWYgKHYzKSB7XG4gICAgICAgICAgdGhpcy5tX3ZlcnRleDMuc2V0VmVjMih2Myk7XG4gICAgICAgICAgdGhpcy5tX2hhc1ZlcnRleDMgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV92ZXJ0ZXgzLnNldFplcm8oKTtcbiAgICAgICAgICB0aGlzLm1faGFzVmVydGV4MyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLmdldE5leHRWZXJ0ZXggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV92ZXJ0ZXgzO1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLnNldFByZXYgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRQcmV2VmVydGV4KHYzKTtcbiAgICAgIH07XG4gICAgICBFZGdlU2hhcGUyLnByb3RvdHlwZS5zZXRQcmV2VmVydGV4ID0gZnVuY3Rpb24odjMpIHtcbiAgICAgICAgaWYgKHYzKSB7XG4gICAgICAgICAgdGhpcy5tX3ZlcnRleDAuc2V0VmVjMih2Myk7XG4gICAgICAgICAgdGhpcy5tX2hhc1ZlcnRleDAgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV92ZXJ0ZXgwLnNldFplcm8oKTtcbiAgICAgICAgICB0aGlzLm1faGFzVmVydGV4MCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLmdldFByZXZWZXJ0ZXggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV92ZXJ0ZXgwO1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbih2MTIyLCB2MjIpIHtcbiAgICAgICAgdGhpcy5tX3ZlcnRleDEuc2V0VmVjMih2MTIyKTtcbiAgICAgICAgdGhpcy5tX3ZlcnRleDIuc2V0VmVjMih2MjIpO1xuICAgICAgICB0aGlzLm1faGFzVmVydGV4MCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1faGFzVmVydGV4MyA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBFZGdlU2hhcGUyLnByb3RvdHlwZS5fY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNsb25lID0gbmV3IEVkZ2VTaGFwZTIoKTtcbiAgICAgICAgY2xvbmUubV90eXBlID0gdGhpcy5tX3R5cGU7XG4gICAgICAgIGNsb25lLm1fcmFkaXVzID0gdGhpcy5tX3JhZGl1cztcbiAgICAgICAgY2xvbmUubV92ZXJ0ZXgxLnNldFZlYzIodGhpcy5tX3ZlcnRleDEpO1xuICAgICAgICBjbG9uZS5tX3ZlcnRleDIuc2V0VmVjMih0aGlzLm1fdmVydGV4Mik7XG4gICAgICAgIGNsb25lLm1fdmVydGV4MC5zZXRWZWMyKHRoaXMubV92ZXJ0ZXgwKTtcbiAgICAgICAgY2xvbmUubV92ZXJ0ZXgzLnNldFZlYzIodGhpcy5tX3ZlcnRleDMpO1xuICAgICAgICBjbG9uZS5tX2hhc1ZlcnRleDAgPSB0aGlzLm1faGFzVmVydGV4MDtcbiAgICAgICAgY2xvbmUubV9oYXNWZXJ0ZXgzID0gdGhpcy5tX2hhc1ZlcnRleDM7XG4gICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgIH07XG4gICAgICBFZGdlU2hhcGUyLnByb3RvdHlwZS5nZXRDaGlsZENvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLnRlc3RQb2ludCA9IGZ1bmN0aW9uKHhmMiwgcCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9O1xuICAgICAgRWRnZVNoYXBlMi5wcm90b3R5cGUucmF5Q2FzdCA9IGZ1bmN0aW9uKG91dHB1dDIsIGlucHV0MiwgeGYyLCBjaGlsZEluZGV4KSB7XG4gICAgICAgIHZhciBwMSA9IFJvdC5tdWxUVmVjMih4ZjIucSwgVmVjMi5zdWIoaW5wdXQyLnAxLCB4ZjIucCkpO1xuICAgICAgICB2YXIgcDIgPSBSb3QubXVsVFZlYzIoeGYyLnEsIFZlYzIuc3ViKGlucHV0Mi5wMiwgeGYyLnApKTtcbiAgICAgICAgdmFyIGQyID0gVmVjMi5zdWIocDIsIHAxKTtcbiAgICAgICAgdmFyIHYxMjIgPSB0aGlzLm1fdmVydGV4MTtcbiAgICAgICAgdmFyIHYyMiA9IHRoaXMubV92ZXJ0ZXgyO1xuICAgICAgICB2YXIgZTMgPSBWZWMyLnN1Yih2MjIsIHYxMjIpO1xuICAgICAgICB2YXIgbm9ybWFsMyA9IFZlYzIubmVvKGUzLnksIC1lMy54KTtcbiAgICAgICAgbm9ybWFsMy5ub3JtYWxpemUoKTtcbiAgICAgICAgdmFyIG51bWVyYXRvciA9IFZlYzIuZG90KG5vcm1hbDMsIFZlYzIuc3ViKHYxMjIsIHAxKSk7XG4gICAgICAgIHZhciBkZW5vbWluYXRvciA9IFZlYzIuZG90KG5vcm1hbDMsIGQyKTtcbiAgICAgICAgaWYgKGRlbm9taW5hdG9yID09IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHQgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcbiAgICAgICAgaWYgKHQgPCAwIHx8IGlucHV0Mi5tYXhGcmFjdGlvbiA8IHQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHEgPSBWZWMyLmFkZChwMSwgVmVjMi5tdWxOdW1WZWMyKHQsIGQyKSk7XG4gICAgICAgIHZhciByID0gVmVjMi5zdWIodjIyLCB2MTIyKTtcbiAgICAgICAgdmFyIHJyID0gVmVjMi5kb3Qociwgcik7XG4gICAgICAgIGlmIChyciA9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzMiA9IFZlYzIuZG90KFZlYzIuc3ViKHEsIHYxMjIpLCByKSAvIHJyO1xuICAgICAgICBpZiAoczIgPCAwIHx8IDEgPCBzMikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQyLmZyYWN0aW9uID0gdDtcbiAgICAgICAgaWYgKG51bWVyYXRvciA+IDApIHtcbiAgICAgICAgICBvdXRwdXQyLm5vcm1hbCA9IFJvdC5tdWxWZWMyKHhmMi5xLCBub3JtYWwzKS5uZWcoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdXRwdXQyLm5vcm1hbCA9IFJvdC5tdWxWZWMyKHhmMi5xLCBub3JtYWwzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBFZGdlU2hhcGUyLnByb3RvdHlwZS5jb21wdXRlQUFCQiA9IGZ1bmN0aW9uKGFhYmIsIHhmMiwgY2hpbGRJbmRleCkge1xuICAgICAgICB0cmFuc2Zvcm1WZWMyKHYxJDIsIHhmMiwgdGhpcy5tX3ZlcnRleDEpO1xuICAgICAgICB0cmFuc2Zvcm1WZWMyKHYyJDEsIHhmMiwgdGhpcy5tX3ZlcnRleDIpO1xuICAgICAgICBBQUJCLmNvbWJpbmVQb2ludHMoYWFiYiwgdjEkMiwgdjIkMSk7XG4gICAgICAgIEFBQkIuZXh0ZW5kKGFhYmIsIHRoaXMubV9yYWRpdXMpO1xuICAgICAgfTtcbiAgICAgIEVkZ2VTaGFwZTIucHJvdG90eXBlLmNvbXB1dGVNYXNzID0gZnVuY3Rpb24obWFzc0RhdGEsIGRlbnNpdHkpIHtcbiAgICAgICAgbWFzc0RhdGEubWFzcyA9IDA7XG4gICAgICAgIGNvbWJpbmUyVmVjMihtYXNzRGF0YS5jZW50ZXIsIDAuNSwgdGhpcy5tX3ZlcnRleDEsIDAuNSwgdGhpcy5tX3ZlcnRleDIpO1xuICAgICAgICBtYXNzRGF0YS5JID0gMDtcbiAgICAgIH07XG4gICAgICBFZGdlU2hhcGUyLnByb3RvdHlwZS5jb21wdXRlRGlzdGFuY2VQcm94eSA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgICAgIHByb3h5Lm1fdmVydGljZXNbMF0gPSB0aGlzLm1fdmVydGV4MTtcbiAgICAgICAgcHJveHkubV92ZXJ0aWNlc1sxXSA9IHRoaXMubV92ZXJ0ZXgyO1xuICAgICAgICBwcm94eS5tX3ZlcnRpY2VzLmxlbmd0aCA9IDI7XG4gICAgICAgIHByb3h5Lm1fY291bnQgPSAyO1xuICAgICAgICBwcm94eS5tX3JhZGl1cyA9IHRoaXMubV9yYWRpdXM7XG4gICAgICB9O1xuICAgICAgRWRnZVNoYXBlMi5UWVBFID0gXCJlZGdlXCI7XG4gICAgICByZXR1cm4gRWRnZVNoYXBlMjtcbiAgICB9KFNoYXBlKVxuICApO1xuICB2YXIgdjEkMSA9IHZlYzIoMCwgMCk7XG4gIHZhciB2MiA9IHZlYzIoMCwgMCk7XG4gIHZhciBDaGFpblNoYXBlID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbihfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhDaGFpblNoYXBlMiwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIENoYWluU2hhcGUyKHZlcnRpY2VzLCBsb29wKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghKF90aGlzIGluc3RhbmNlb2YgQ2hhaW5TaGFwZTIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBDaGFpblNoYXBlMih2ZXJ0aWNlcywgbG9vcCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5tX3R5cGUgPSBDaGFpblNoYXBlMi5UWVBFO1xuICAgICAgICBfdGhpcy5tX3JhZGl1cyA9IFNldHRpbmdzSW50ZXJuYWwucG9seWdvblJhZGl1cztcbiAgICAgICAgX3RoaXMubV92ZXJ0aWNlcyA9IFtdO1xuICAgICAgICBfdGhpcy5tX2NvdW50ID0gMDtcbiAgICAgICAgX3RoaXMubV9wcmV2VmVydGV4ID0gbnVsbDtcbiAgICAgICAgX3RoaXMubV9uZXh0VmVydGV4ID0gbnVsbDtcbiAgICAgICAgX3RoaXMubV9oYXNQcmV2VmVydGV4ID0gZmFsc2U7XG4gICAgICAgIF90aGlzLm1faGFzTmV4dFZlcnRleCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5tX2lzTG9vcCA9ICEhbG9vcDtcbiAgICAgICAgaWYgKHZlcnRpY2VzICYmIHZlcnRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgIGlmIChsb29wKSB7XG4gICAgICAgICAgICBfdGhpcy5fY3JlYXRlTG9vcCh2ZXJ0aWNlcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLl9jcmVhdGVDaGFpbih2ZXJ0aWNlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIENoYWluU2hhcGUyLnByb3RvdHlwZS5fc2VyaWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMubV90eXBlLFxuICAgICAgICAgIHZlcnRpY2VzOiB0aGlzLm1faXNMb29wID8gdGhpcy5tX3ZlcnRpY2VzLnNsaWNlKDAsIHRoaXMubV92ZXJ0aWNlcy5sZW5ndGggLSAxKSA6IHRoaXMubV92ZXJ0aWNlcyxcbiAgICAgICAgICBpc0xvb3A6IHRoaXMubV9pc0xvb3AsXG4gICAgICAgICAgaGFzUHJldlZlcnRleDogdGhpcy5tX2hhc1ByZXZWZXJ0ZXgsXG4gICAgICAgICAgaGFzTmV4dFZlcnRleDogdGhpcy5tX2hhc05leHRWZXJ0ZXgsXG4gICAgICAgICAgcHJldlZlcnRleDogbnVsbCxcbiAgICAgICAgICBuZXh0VmVydGV4OiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm1fcHJldlZlcnRleCkge1xuICAgICAgICAgIGRhdGEucHJldlZlcnRleCA9IHRoaXMubV9wcmV2VmVydGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1fbmV4dFZlcnRleCkge1xuICAgICAgICAgIGRhdGEubmV4dFZlcnRleCA9IHRoaXMubV9uZXh0VmVydGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfTtcbiAgICAgIENoYWluU2hhcGUyLl9kZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGRhdGEsIGZpeHR1cmUsIHJlc3RvcmUpIHtcbiAgICAgICAgdmFyIHZlcnRpY2VzID0gW107XG4gICAgICAgIGlmIChkYXRhLnZlcnRpY2VzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHJlc3RvcmUoVmVjMiwgZGF0YS52ZXJ0aWNlc1tpXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgc2hhcGUgPSBuZXcgQ2hhaW5TaGFwZTIodmVydGljZXMsIGRhdGEuaXNMb29wKTtcbiAgICAgICAgaWYgKGRhdGEucHJldlZlcnRleCkge1xuICAgICAgICAgIHNoYXBlLnNldFByZXZWZXJ0ZXgoZGF0YS5wcmV2VmVydGV4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5uZXh0VmVydGV4KSB7XG4gICAgICAgICAgc2hhcGUuc2V0TmV4dFZlcnRleChkYXRhLm5leHRWZXJ0ZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaGFwZTtcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3R5cGU7XG4gICAgICB9O1xuICAgICAgQ2hhaW5TaGFwZTIucHJvdG90eXBlLmdldFJhZGl1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3JhZGl1cztcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuX2NyZWF0ZUxvb3AgPSBmdW5jdGlvbih2ZXJ0aWNlcykge1xuICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoIDwgMykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaTtcbiAgICAgICAgdGhpcy5tX3ZlcnRpY2VzID0gW107XG4gICAgICAgIHRoaXMubV9jb3VudCA9IHZlcnRpY2VzLmxlbmd0aCArIDE7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB0aGlzLm1fdmVydGljZXNbaV0gPSBWZWMyLmNsb25lKHZlcnRpY2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fdmVydGljZXNbdmVydGljZXMubGVuZ3RoXSA9IFZlYzIuY2xvbmUodmVydGljZXNbMF0pO1xuICAgICAgICB0aGlzLm1fcHJldlZlcnRleCA9IHRoaXMubV92ZXJ0aWNlc1t0aGlzLm1fY291bnQgLSAyXTtcbiAgICAgICAgdGhpcy5tX25leHRWZXJ0ZXggPSB0aGlzLm1fdmVydGljZXNbMV07XG4gICAgICAgIHRoaXMubV9oYXNQcmV2VmVydGV4ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5tX2hhc05leHRWZXJ0ZXggPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuX2NyZWF0ZUNoYWluID0gZnVuY3Rpb24odmVydGljZXMpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHRoaXMubV92ZXJ0aWNlcyA9IFtdO1xuICAgICAgICB0aGlzLm1fY291bnQgPSB2ZXJ0aWNlcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB0aGlzLm1fdmVydGljZXNbaV0gPSBWZWMyLmNsb25lKHZlcnRpY2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fcHJldlZlcnRleCA9IG51bGw7XG4gICAgICAgIHRoaXMubV9uZXh0VmVydGV4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5tX2hhc1ByZXZWZXJ0ZXggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tX2hhc05leHRWZXJ0ZXggPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgQ2hhaW5TaGFwZTIucHJvdG90eXBlLl9yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5tX2lzTG9vcCkge1xuICAgICAgICAgIHRoaXMuX2NyZWF0ZUxvb3AodGhpcy5tX3ZlcnRpY2VzLnNsaWNlKDAsIHRoaXMubV92ZXJ0aWNlcy5sZW5ndGggLSAxKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fY3JlYXRlQ2hhaW4odGhpcy5tX3ZlcnRpY2VzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIENoYWluU2hhcGUyLnByb3RvdHlwZS5zZXRQcmV2VmVydGV4ID0gZnVuY3Rpb24ocHJldlZlcnRleCkge1xuICAgICAgICB0aGlzLm1fcHJldlZlcnRleCA9IHByZXZWZXJ0ZXg7XG4gICAgICAgIHRoaXMubV9oYXNQcmV2VmVydGV4ID0gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuZ2V0UHJldlZlcnRleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3ByZXZWZXJ0ZXg7XG4gICAgICB9O1xuICAgICAgQ2hhaW5TaGFwZTIucHJvdG90eXBlLnNldE5leHRWZXJ0ZXggPSBmdW5jdGlvbihuZXh0VmVydGV4KSB7XG4gICAgICAgIHRoaXMubV9uZXh0VmVydGV4ID0gbmV4dFZlcnRleDtcbiAgICAgICAgdGhpcy5tX2hhc05leHRWZXJ0ZXggPSB0cnVlO1xuICAgICAgfTtcbiAgICAgIENoYWluU2hhcGUyLnByb3RvdHlwZS5nZXROZXh0VmVydGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbmV4dFZlcnRleDtcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuX2Nsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjbG9uZSA9IG5ldyBDaGFpblNoYXBlMigpO1xuICAgICAgICBjbG9uZS5fY3JlYXRlQ2hhaW4odGhpcy5tX3ZlcnRpY2VzKTtcbiAgICAgICAgY2xvbmUubV90eXBlID0gdGhpcy5tX3R5cGU7XG4gICAgICAgIGNsb25lLm1fcmFkaXVzID0gdGhpcy5tX3JhZGl1cztcbiAgICAgICAgY2xvbmUubV9wcmV2VmVydGV4ID0gdGhpcy5tX3ByZXZWZXJ0ZXg7XG4gICAgICAgIGNsb25lLm1fbmV4dFZlcnRleCA9IHRoaXMubV9uZXh0VmVydGV4O1xuICAgICAgICBjbG9uZS5tX2hhc1ByZXZWZXJ0ZXggPSB0aGlzLm1faGFzUHJldlZlcnRleDtcbiAgICAgICAgY2xvbmUubV9oYXNOZXh0VmVydGV4ID0gdGhpcy5tX2hhc05leHRWZXJ0ZXg7XG4gICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuZ2V0Q2hpbGRDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2NvdW50IC0gMTtcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuZ2V0Q2hpbGRFZGdlID0gZnVuY3Rpb24oZWRnZSwgY2hpbGRJbmRleCkge1xuICAgICAgICBlZGdlLm1fdHlwZSA9IEVkZ2VTaGFwZS5UWVBFO1xuICAgICAgICBlZGdlLm1fcmFkaXVzID0gdGhpcy5tX3JhZGl1cztcbiAgICAgICAgZWRnZS5tX3ZlcnRleDEgPSB0aGlzLm1fdmVydGljZXNbY2hpbGRJbmRleF07XG4gICAgICAgIGVkZ2UubV92ZXJ0ZXgyID0gdGhpcy5tX3ZlcnRpY2VzW2NoaWxkSW5kZXggKyAxXTtcbiAgICAgICAgaWYgKGNoaWxkSW5kZXggPiAwKSB7XG4gICAgICAgICAgZWRnZS5tX3ZlcnRleDAgPSB0aGlzLm1fdmVydGljZXNbY2hpbGRJbmRleCAtIDFdO1xuICAgICAgICAgIGVkZ2UubV9oYXNWZXJ0ZXgwID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlZGdlLm1fdmVydGV4MCA9IHRoaXMubV9wcmV2VmVydGV4O1xuICAgICAgICAgIGVkZ2UubV9oYXNWZXJ0ZXgwID0gdGhpcy5tX2hhc1ByZXZWZXJ0ZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkSW5kZXggPCB0aGlzLm1fY291bnQgLSAyKSB7XG4gICAgICAgICAgZWRnZS5tX3ZlcnRleDMgPSB0aGlzLm1fdmVydGljZXNbY2hpbGRJbmRleCArIDJdO1xuICAgICAgICAgIGVkZ2UubV9oYXNWZXJ0ZXgzID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlZGdlLm1fdmVydGV4MyA9IHRoaXMubV9uZXh0VmVydGV4O1xuICAgICAgICAgIGVkZ2UubV9oYXNWZXJ0ZXgzID0gdGhpcy5tX2hhc05leHRWZXJ0ZXg7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuZ2V0VmVydGV4ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4IDwgdGhpcy5tX2NvdW50KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubV92ZXJ0aWNlc1tpbmRleF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubV92ZXJ0aWNlc1swXTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIENoYWluU2hhcGUyLnByb3RvdHlwZS5pc0xvb3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9pc0xvb3A7XG4gICAgICB9O1xuICAgICAgQ2hhaW5TaGFwZTIucHJvdG90eXBlLnRlc3RQb2ludCA9IGZ1bmN0aW9uKHhmMiwgcCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9O1xuICAgICAgQ2hhaW5TaGFwZTIucHJvdG90eXBlLnJheUNhc3QgPSBmdW5jdGlvbihvdXRwdXQyLCBpbnB1dDIsIHhmMiwgY2hpbGRJbmRleCkge1xuICAgICAgICB2YXIgZWRnZVNoYXBlID0gbmV3IEVkZ2VTaGFwZSh0aGlzLmdldFZlcnRleChjaGlsZEluZGV4KSwgdGhpcy5nZXRWZXJ0ZXgoY2hpbGRJbmRleCArIDEpKTtcbiAgICAgICAgcmV0dXJuIGVkZ2VTaGFwZS5yYXlDYXN0KG91dHB1dDIsIGlucHV0MiwgeGYyLCAwKTtcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuY29tcHV0ZUFBQkIgPSBmdW5jdGlvbihhYWJiLCB4ZjIsIGNoaWxkSW5kZXgpIHtcbiAgICAgICAgdHJhbnNmb3JtVmVjMih2MSQxLCB4ZjIsIHRoaXMuZ2V0VmVydGV4KGNoaWxkSW5kZXgpKTtcbiAgICAgICAgdHJhbnNmb3JtVmVjMih2MiwgeGYyLCB0aGlzLmdldFZlcnRleChjaGlsZEluZGV4ICsgMSkpO1xuICAgICAgICBBQUJCLmNvbWJpbmVQb2ludHMoYWFiYiwgdjEkMSwgdjIpO1xuICAgICAgfTtcbiAgICAgIENoYWluU2hhcGUyLnByb3RvdHlwZS5jb21wdXRlTWFzcyA9IGZ1bmN0aW9uKG1hc3NEYXRhLCBkZW5zaXR5KSB7XG4gICAgICAgIG1hc3NEYXRhLm1hc3MgPSAwO1xuICAgICAgICB6ZXJvVmVjMihtYXNzRGF0YS5jZW50ZXIpO1xuICAgICAgICBtYXNzRGF0YS5JID0gMDtcbiAgICAgIH07XG4gICAgICBDaGFpblNoYXBlMi5wcm90b3R5cGUuY29tcHV0ZURpc3RhbmNlUHJveHkgPSBmdW5jdGlvbihwcm94eSwgY2hpbGRJbmRleCkge1xuICAgICAgICBwcm94eS5tX3ZlcnRpY2VzWzBdID0gdGhpcy5nZXRWZXJ0ZXgoY2hpbGRJbmRleCk7XG4gICAgICAgIHByb3h5Lm1fdmVydGljZXNbMV0gPSB0aGlzLmdldFZlcnRleChjaGlsZEluZGV4ICsgMSk7XG4gICAgICAgIHByb3h5Lm1fY291bnQgPSAyO1xuICAgICAgICBwcm94eS5tX3JhZGl1cyA9IHRoaXMubV9yYWRpdXM7XG4gICAgICB9O1xuICAgICAgQ2hhaW5TaGFwZTIuVFlQRSA9IFwiY2hhaW5cIjtcbiAgICAgIHJldHVybiBDaGFpblNoYXBlMjtcbiAgICB9KFNoYXBlKVxuICApO1xuICB2YXIgbWF0aF9tYXgkMSA9IE1hdGgubWF4O1xuICB2YXIgbWF0aF9taW4kMyA9IE1hdGgubWluO1xuICB2YXIgdGVtcCQxID0gdmVjMigwLCAwKTtcbiAgdmFyIGUkMSA9IHZlYzIoMCwgMCk7XG4gIHZhciBlMSQxID0gdmVjMigwLCAwKTtcbiAgdmFyIGUyJDEgPSB2ZWMyKDAsIDApO1xuICB2YXIgY2VudGVyID0gdmVjMigwLCAwKTtcbiAgdmFyIHMgPSB2ZWMyKDAsIDApO1xuICB2YXIgUG9seWdvblNoYXBlID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbihfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhQb2x5Z29uU2hhcGUyLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gUG9seWdvblNoYXBlMih2ZXJ0aWNlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIShfdGhpcyBpbnN0YW5jZW9mIFBvbHlnb25TaGFwZTIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uU2hhcGUyKHZlcnRpY2VzKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm1fdHlwZSA9IFBvbHlnb25TaGFwZTIuVFlQRTtcbiAgICAgICAgX3RoaXMubV9yYWRpdXMgPSBTZXR0aW5nc0ludGVybmFsLnBvbHlnb25SYWRpdXM7XG4gICAgICAgIF90aGlzLm1fY2VudHJvaWQgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgX3RoaXMubV92ZXJ0aWNlcyA9IFtdO1xuICAgICAgICBfdGhpcy5tX25vcm1hbHMgPSBbXTtcbiAgICAgICAgX3RoaXMubV9jb3VudCA9IDA7XG4gICAgICAgIGlmICh2ZXJ0aWNlcyAmJiB2ZXJ0aWNlcy5sZW5ndGgpIHtcbiAgICAgICAgICBfdGhpcy5fc2V0KHZlcnRpY2VzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBQb2x5Z29uU2hhcGUyLnByb3RvdHlwZS5fc2VyaWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5tX3R5cGUsXG4gICAgICAgICAgdmVydGljZXM6IHRoaXMubV92ZXJ0aWNlc1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIFBvbHlnb25TaGFwZTIuX2Rlc2VyaWFsaXplID0gZnVuY3Rpb24oZGF0YSwgZml4dHVyZSwgcmVzdG9yZSkge1xuICAgICAgICB2YXIgdmVydGljZXMgPSBbXTtcbiAgICAgICAgaWYgKGRhdGEudmVydGljZXMpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEudmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2gocmVzdG9yZShWZWMyLCBkYXRhLnZlcnRpY2VzW2ldKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzaGFwZSA9IG5ldyBQb2x5Z29uU2hhcGUyKHZlcnRpY2VzKTtcbiAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgICAgfTtcbiAgICAgIFBvbHlnb25TaGFwZTIucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV90eXBlO1xuICAgICAgfTtcbiAgICAgIFBvbHlnb25TaGFwZTIucHJvdG90eXBlLmdldFJhZGl1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3JhZGl1cztcbiAgICAgIH07XG4gICAgICBQb2x5Z29uU2hhcGUyLnByb3RvdHlwZS5fY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNsb25lID0gbmV3IFBvbHlnb25TaGFwZTIoKTtcbiAgICAgICAgY2xvbmUubV90eXBlID0gdGhpcy5tX3R5cGU7XG4gICAgICAgIGNsb25lLm1fcmFkaXVzID0gdGhpcy5tX3JhZGl1cztcbiAgICAgICAgY2xvbmUubV9jb3VudCA9IHRoaXMubV9jb3VudDtcbiAgICAgICAgY2xvbmUubV9jZW50cm9pZC5zZXRWZWMyKHRoaXMubV9jZW50cm9pZCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyBpKyspIHtcbiAgICAgICAgICBjbG9uZS5tX3ZlcnRpY2VzLnB1c2godGhpcy5tX3ZlcnRpY2VzW2ldLmNsb25lKCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX25vcm1hbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjbG9uZS5tX25vcm1hbHMucHVzaCh0aGlzLm1fbm9ybWFsc1tpXS5jbG9uZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICB9O1xuICAgICAgUG9seWdvblNoYXBlMi5wcm90b3R5cGUuZ2V0Q2hpbGRDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH07XG4gICAgICBQb2x5Z29uU2hhcGUyLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fc2V0KHRoaXMubV92ZXJ0aWNlcyk7XG4gICAgICB9O1xuICAgICAgUG9seWdvblNoYXBlMi5wcm90b3R5cGUuX3NldCA9IGZ1bmN0aW9uKHZlcnRpY2VzKSB7XG4gICAgICAgIGlmICh2ZXJ0aWNlcy5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgdGhpcy5fc2V0QXNCb3goMSwgMSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuMiA9IG1hdGhfbWluJDModmVydGljZXMubGVuZ3RoLCBTZXR0aW5nc0ludGVybmFsLm1heFBvbHlnb25WZXJ0aWNlcyk7XG4gICAgICAgIHZhciBwcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG4yOyArK2kpIHtcbiAgICAgICAgICB2YXIgdjMgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgICAgICB2YXIgdW5pcXVlID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICBpZiAoVmVjMi5kaXN0YW5jZVNxdWFyZWQodjMsIHBzW2pdKSA8IDAuMjUgKiBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3BTcXVhcmVkKSB7XG4gICAgICAgICAgICAgIHVuaXF1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHVuaXF1ZSkge1xuICAgICAgICAgICAgcHMucHVzaChWZWMyLmNsb25lKHYzKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG4yID0gcHMubGVuZ3RoO1xuICAgICAgICBpZiAobjIgPCAzKSB7XG4gICAgICAgICAgdGhpcy5fc2V0QXNCb3goMSwgMSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpMCA9IDA7XG4gICAgICAgIHZhciB4MCA9IHBzWzBdLng7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbjI7ICsraSkge1xuICAgICAgICAgIHZhciB4MiA9IHBzW2ldLng7XG4gICAgICAgICAgaWYgKHgyID4geDAgfHwgeDIgPT09IHgwICYmIHBzW2ldLnkgPCBwc1tpMF0ueSkge1xuICAgICAgICAgICAgaTAgPSBpO1xuICAgICAgICAgICAgeDAgPSB4MjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGh1bGwgPSBbXTtcbiAgICAgICAgdmFyIG0gPSAwO1xuICAgICAgICB2YXIgaWggPSBpMDtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICBodWxsW21dID0gaWg7XG4gICAgICAgICAgdmFyIGllMiA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBuMjsgKytqKSB7XG4gICAgICAgICAgICBpZiAoaWUyID09PSBpaCkge1xuICAgICAgICAgICAgICBpZTIgPSBqO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByID0gVmVjMi5zdWIocHNbaWUyXSwgcHNbaHVsbFttXV0pO1xuICAgICAgICAgICAgdmFyIHYzID0gVmVjMi5zdWIocHNbal0sIHBzW2h1bGxbbV1dKTtcbiAgICAgICAgICAgIHZhciBjMiA9IFZlYzIuY3Jvc3NWZWMyVmVjMihyLCB2Myk7XG4gICAgICAgICAgICBpZiAoYzIgPCAwKSB7XG4gICAgICAgICAgICAgIGllMiA9IGo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYzIgPT09IDAgJiYgdjMubGVuZ3RoU3F1YXJlZCgpID4gci5sZW5ndGhTcXVhcmVkKCkpIHtcbiAgICAgICAgICAgICAgaWUyID0gajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgKyttO1xuICAgICAgICAgIGloID0gaWUyO1xuICAgICAgICAgIGlmIChpZTIgPT09IGkwKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0gPCAzKSB7XG4gICAgICAgICAgdGhpcy5fc2V0QXNCb3goMSwgMSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9jb3VudCA9IG07XG4gICAgICAgIHRoaXMubV92ZXJ0aWNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG07ICsraSkge1xuICAgICAgICAgIHRoaXMubV92ZXJ0aWNlc1tpXSA9IHBzW2h1bGxbaV1dO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbTsgKytpKSB7XG4gICAgICAgICAgdmFyIGkxID0gaTtcbiAgICAgICAgICB2YXIgaTIgPSBpICsgMSA8IG0gPyBpICsgMSA6IDA7XG4gICAgICAgICAgdmFyIGVkZ2UgPSBWZWMyLnN1Yih0aGlzLm1fdmVydGljZXNbaTJdLCB0aGlzLm1fdmVydGljZXNbaTFdKTtcbiAgICAgICAgICB0aGlzLm1fbm9ybWFsc1tpXSA9IFZlYzIuY3Jvc3NWZWMyTnVtKGVkZ2UsIDEpO1xuICAgICAgICAgIHRoaXMubV9ub3JtYWxzW2ldLm5vcm1hbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9jZW50cm9pZCA9IGNvbXB1dGVDZW50cm9pZCh0aGlzLm1fdmVydGljZXMsIG0pO1xuICAgICAgfTtcbiAgICAgIFBvbHlnb25TaGFwZTIucHJvdG90eXBlLl9zZXRBc0JveCA9IGZ1bmN0aW9uKGh4LCBoeSwgY2VudGVyMiwgYW5nbGUpIHtcbiAgICAgICAgdGhpcy5tX3ZlcnRpY2VzWzBdID0gVmVjMi5uZW8oaHgsIC1oeSk7XG4gICAgICAgIHRoaXMubV92ZXJ0aWNlc1sxXSA9IFZlYzIubmVvKGh4LCBoeSk7XG4gICAgICAgIHRoaXMubV92ZXJ0aWNlc1syXSA9IFZlYzIubmVvKC1oeCwgaHkpO1xuICAgICAgICB0aGlzLm1fdmVydGljZXNbM10gPSBWZWMyLm5lbygtaHgsIC1oeSk7XG4gICAgICAgIHRoaXMubV9ub3JtYWxzWzBdID0gVmVjMi5uZW8oMSwgMCk7XG4gICAgICAgIHRoaXMubV9ub3JtYWxzWzFdID0gVmVjMi5uZW8oMCwgMSk7XG4gICAgICAgIHRoaXMubV9ub3JtYWxzWzJdID0gVmVjMi5uZW8oLTEsIDApO1xuICAgICAgICB0aGlzLm1fbm9ybWFsc1szXSA9IFZlYzIubmVvKDAsIC0xKTtcbiAgICAgICAgdGhpcy5tX2NvdW50ID0gNDtcbiAgICAgICAgaWYgKGNlbnRlcjIgJiYgVmVjMi5pc1ZhbGlkKGNlbnRlcjIpKSB7XG4gICAgICAgICAgYW5nbGUgPSBhbmdsZSB8fCAwO1xuICAgICAgICAgIGNvcHlWZWMyKHRoaXMubV9jZW50cm9pZCwgY2VudGVyMik7XG4gICAgICAgICAgdmFyIHhmMiA9IFRyYW5zZm9ybS5pZGVudGl0eSgpO1xuICAgICAgICAgIHhmMi5wLnNldFZlYzIoY2VudGVyMik7XG4gICAgICAgICAgeGYyLnEuc2V0QW5nbGUoYW5nbGUpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMubV92ZXJ0aWNlc1tpXSA9IFRyYW5zZm9ybS5tdWxWZWMyKHhmMiwgdGhpcy5tX3ZlcnRpY2VzW2ldKTtcbiAgICAgICAgICAgIHRoaXMubV9ub3JtYWxzW2ldID0gUm90Lm11bFZlYzIoeGYyLnEsIHRoaXMubV9ub3JtYWxzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBQb2x5Z29uU2hhcGUyLnByb3RvdHlwZS50ZXN0UG9pbnQgPSBmdW5jdGlvbih4ZjIsIHApIHtcbiAgICAgICAgdmFyIHBMb2NhbCA9IGRldHJhbnNmb3JtVmVjMih0ZW1wJDEsIHhmMiwgcCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgICAgICB2YXIgZG90ID0gZG90VmVjMih0aGlzLm1fbm9ybWFsc1tpXSwgcExvY2FsKSAtIGRvdFZlYzIodGhpcy5tX25vcm1hbHNbaV0sIHRoaXMubV92ZXJ0aWNlc1tpXSk7XG4gICAgICAgICAgaWYgKGRvdCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgICAgUG9seWdvblNoYXBlMi5wcm90b3R5cGUucmF5Q2FzdCA9IGZ1bmN0aW9uKG91dHB1dDIsIGlucHV0MiwgeGYyLCBjaGlsZEluZGV4KSB7XG4gICAgICAgIHZhciBwMSA9IFJvdC5tdWxUVmVjMih4ZjIucSwgVmVjMi5zdWIoaW5wdXQyLnAxLCB4ZjIucCkpO1xuICAgICAgICB2YXIgcDIgPSBSb3QubXVsVFZlYzIoeGYyLnEsIFZlYzIuc3ViKGlucHV0Mi5wMiwgeGYyLnApKTtcbiAgICAgICAgdmFyIGQyID0gVmVjMi5zdWIocDIsIHAxKTtcbiAgICAgICAgdmFyIGxvd2VyID0gMDtcbiAgICAgICAgdmFyIHVwcGVyID0gaW5wdXQyLm1heEZyYWN0aW9uO1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgICAgIHZhciBudW1lcmF0b3IgPSBWZWMyLmRvdCh0aGlzLm1fbm9ybWFsc1tpXSwgVmVjMi5zdWIodGhpcy5tX3ZlcnRpY2VzW2ldLCBwMSkpO1xuICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IFZlYzIuZG90KHRoaXMubV9ub3JtYWxzW2ldLCBkMik7XG4gICAgICAgICAgaWYgKGRlbm9taW5hdG9yID09IDApIHtcbiAgICAgICAgICAgIGlmIChudW1lcmF0b3IgPCAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGRlbm9taW5hdG9yIDwgMCAmJiBudW1lcmF0b3IgPCBsb3dlciAqIGRlbm9taW5hdG9yKSB7XG4gICAgICAgICAgICAgIGxvd2VyID0gbnVtZXJhdG9yIC8gZGVub21pbmF0b3I7XG4gICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVub21pbmF0b3IgPiAwICYmIG51bWVyYXRvciA8IHVwcGVyICogZGVub21pbmF0b3IpIHtcbiAgICAgICAgICAgICAgdXBwZXIgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHVwcGVyIDwgbG93ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBvdXRwdXQyLmZyYWN0aW9uID0gbG93ZXI7XG4gICAgICAgICAgb3V0cHV0Mi5ub3JtYWwgPSBSb3QubXVsVmVjMih4ZjIucSwgdGhpcy5tX25vcm1hbHNbaW5kZXhdKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9O1xuICAgICAgUG9seWdvblNoYXBlMi5wcm90b3R5cGUuY29tcHV0ZUFBQkIgPSBmdW5jdGlvbihhYWJiLCB4ZjIsIGNoaWxkSW5kZXgpIHtcbiAgICAgICAgdmFyIG1pblggPSBJbmZpbml0eTtcbiAgICAgICAgdmFyIG1pblkgPSBJbmZpbml0eTtcbiAgICAgICAgdmFyIG1heFggPSAtSW5maW5pdHk7XG4gICAgICAgIHZhciBtYXhZID0gLUluZmluaXR5O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICAgICAgdmFyIHYzID0gdHJhbnNmb3JtVmVjMih0ZW1wJDEsIHhmMiwgdGhpcy5tX3ZlcnRpY2VzW2ldKTtcbiAgICAgICAgICBtaW5YID0gbWF0aF9taW4kMyhtaW5YLCB2My54KTtcbiAgICAgICAgICBtYXhYID0gbWF0aF9tYXgkMShtYXhYLCB2My54KTtcbiAgICAgICAgICBtaW5ZID0gbWF0aF9taW4kMyhtaW5ZLCB2My55KTtcbiAgICAgICAgICBtYXhZID0gbWF0aF9tYXgkMShtYXhZLCB2My55KTtcbiAgICAgICAgfVxuICAgICAgICBzZXRWZWMyKGFhYmIubG93ZXJCb3VuZCwgbWluWCAtIHRoaXMubV9yYWRpdXMsIG1pblkgLSB0aGlzLm1fcmFkaXVzKTtcbiAgICAgICAgc2V0VmVjMihhYWJiLnVwcGVyQm91bmQsIG1heFggKyB0aGlzLm1fcmFkaXVzLCBtYXhZICsgdGhpcy5tX3JhZGl1cyk7XG4gICAgICB9O1xuICAgICAgUG9seWdvblNoYXBlMi5wcm90b3R5cGUuY29tcHV0ZU1hc3MgPSBmdW5jdGlvbihtYXNzRGF0YSwgZGVuc2l0eSkge1xuICAgICAgICB6ZXJvVmVjMihjZW50ZXIpO1xuICAgICAgICB2YXIgYXJlYSA9IDA7XG4gICAgICAgIHZhciBJID0gMDtcbiAgICAgICAgemVyb1ZlYzIocyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX2NvdW50OyArK2kpIHtcbiAgICAgICAgICBwbHVzVmVjMihzLCB0aGlzLm1fdmVydGljZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHNjYWxlVmVjMihzLCAxIC8gdGhpcy5tX2NvdW50LCBzKTtcbiAgICAgICAgdmFyIGtfaW52MyA9IDEgLyAzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICAgICAgc3ViVmVjMihlMSQxLCB0aGlzLm1fdmVydGljZXNbaV0sIHMpO1xuICAgICAgICAgIGlmIChpICsgMSA8IHRoaXMubV9jb3VudCkge1xuICAgICAgICAgICAgc3ViVmVjMihlMiQxLCB0aGlzLm1fdmVydGljZXNbaSArIDFdLCBzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3ViVmVjMihlMiQxLCB0aGlzLm1fdmVydGljZXNbMF0sIHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgRCA9IGNyb3NzVmVjMlZlYzIoZTEkMSwgZTIkMSk7XG4gICAgICAgICAgdmFyIHRyaWFuZ2xlQXJlYSA9IDAuNSAqIEQ7XG4gICAgICAgICAgYXJlYSArPSB0cmlhbmdsZUFyZWE7XG4gICAgICAgICAgY29tYmluZTJWZWMyKHRlbXAkMSwgdHJpYW5nbGVBcmVhICoga19pbnYzLCBlMSQxLCB0cmlhbmdsZUFyZWEgKiBrX2ludjMsIGUyJDEpO1xuICAgICAgICAgIHBsdXNWZWMyKGNlbnRlciwgdGVtcCQxKTtcbiAgICAgICAgICB2YXIgZXgxID0gZTEkMS54O1xuICAgICAgICAgIHZhciBleTEgPSBlMSQxLnk7XG4gICAgICAgICAgdmFyIGV4MiA9IGUyJDEueDtcbiAgICAgICAgICB2YXIgZXkyID0gZTIkMS55O1xuICAgICAgICAgIHZhciBpbnR4MiA9IGV4MSAqIGV4MSArIGV4MiAqIGV4MSArIGV4MiAqIGV4MjtcbiAgICAgICAgICB2YXIgaW50eTIgPSBleTEgKiBleTEgKyBleTIgKiBleTEgKyBleTIgKiBleTI7XG4gICAgICAgICAgSSArPSAwLjI1ICoga19pbnYzICogRCAqIChpbnR4MiArIGludHkyKTtcbiAgICAgICAgfVxuICAgICAgICBtYXNzRGF0YS5tYXNzID0gZGVuc2l0eSAqIGFyZWE7XG4gICAgICAgIHNjYWxlVmVjMihjZW50ZXIsIDEgLyBhcmVhLCBjZW50ZXIpO1xuICAgICAgICBhZGRWZWMyKG1hc3NEYXRhLmNlbnRlciwgY2VudGVyLCBzKTtcbiAgICAgICAgbWFzc0RhdGEuSSA9IGRlbnNpdHkgKiBJO1xuICAgICAgICBtYXNzRGF0YS5JICs9IG1hc3NEYXRhLm1hc3MgKiAoZG90VmVjMihtYXNzRGF0YS5jZW50ZXIsIG1hc3NEYXRhLmNlbnRlcikgLSBkb3RWZWMyKGNlbnRlciwgY2VudGVyKSk7XG4gICAgICB9O1xuICAgICAgUG9seWdvblNoYXBlMi5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fY291bnQ7ICsraSkge1xuICAgICAgICAgIHZhciBpMSA9IGk7XG4gICAgICAgICAgdmFyIGkyID0gaSA8IHRoaXMubV9jb3VudCAtIDEgPyBpMSArIDEgOiAwO1xuICAgICAgICAgIHZhciBwID0gdGhpcy5tX3ZlcnRpY2VzW2kxXTtcbiAgICAgICAgICBzdWJWZWMyKGUkMSwgdGhpcy5tX3ZlcnRpY2VzW2kyXSwgcCk7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLm1fY291bnQ7ICsraikge1xuICAgICAgICAgICAgaWYgKGogPT0gaTEgfHwgaiA9PSBpMikge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjMiA9IGNyb3NzVmVjMlZlYzIoZSQxLCBzdWJWZWMyKHRlbXAkMSwgdGhpcy5tX3ZlcnRpY2VzW2pdLCBwKSk7XG4gICAgICAgICAgICBpZiAoYzIgPCAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgICAgUG9seWdvblNoYXBlMi5wcm90b3R5cGUuY29tcHV0ZURpc3RhbmNlUHJveHkgPSBmdW5jdGlvbihwcm94eSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9jb3VudDsgKytpKSB7XG4gICAgICAgICAgcHJveHkubV92ZXJ0aWNlc1tpXSA9IHRoaXMubV92ZXJ0aWNlc1tpXTtcbiAgICAgICAgfVxuICAgICAgICBwcm94eS5tX3ZlcnRpY2VzLmxlbmd0aCA9IHRoaXMubV9jb3VudDtcbiAgICAgICAgcHJveHkubV9jb3VudCA9IHRoaXMubV9jb3VudDtcbiAgICAgICAgcHJveHkubV9yYWRpdXMgPSB0aGlzLm1fcmFkaXVzO1xuICAgICAgfTtcbiAgICAgIFBvbHlnb25TaGFwZTIuVFlQRSA9IFwicG9seWdvblwiO1xuICAgICAgcmV0dXJuIFBvbHlnb25TaGFwZTI7XG4gICAgfShTaGFwZSlcbiAgKTtcbiAgZnVuY3Rpb24gY29tcHV0ZUNlbnRyb2lkKHZzLCBjb3VudCkge1xuICAgIHZhciBjMiA9IFZlYzIuemVybygpO1xuICAgIHZhciBhcmVhID0gMDtcbiAgICB2YXIgcFJlZiA9IFZlYzIuemVybygpO1xuICAgIHZhciBpO1xuICAgIHZhciBpbnYzID0gMSAvIDM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICB2YXIgcDEgPSBwUmVmO1xuICAgICAgdmFyIHAyID0gdnNbaV07XG4gICAgICB2YXIgcDMgPSBpICsgMSA8IGNvdW50ID8gdnNbaSArIDFdIDogdnNbMF07XG4gICAgICB2YXIgZTFfMSA9IFZlYzIuc3ViKHAyLCBwMSk7XG4gICAgICB2YXIgZTJfMSA9IFZlYzIuc3ViKHAzLCBwMSk7XG4gICAgICB2YXIgRCA9IFZlYzIuY3Jvc3NWZWMyVmVjMihlMV8xLCBlMl8xKTtcbiAgICAgIHZhciB0cmlhbmdsZUFyZWEgPSAwLjUgKiBEO1xuICAgICAgYXJlYSArPSB0cmlhbmdsZUFyZWE7XG4gICAgICBjb21iaW5lM1ZlYzIodGVtcCQxLCAxLCBwMSwgMSwgcDIsIDEsIHAzKTtcbiAgICAgIHBsdXNTY2FsZVZlYzIoYzIsIHRyaWFuZ2xlQXJlYSAqIGludjMsIHRlbXAkMSk7XG4gICAgfVxuICAgIGMyLm11bCgxIC8gYXJlYSk7XG4gICAgcmV0dXJuIGMyO1xuICB9XG4gIHZhciBtYXRoX3NxcnQgPSBNYXRoLnNxcnQ7XG4gIHZhciBtYXRoX1BJJDQgPSBNYXRoLlBJO1xuICB2YXIgdGVtcCA9IHZlYzIoMCwgMCk7XG4gIHZhciBDaXJjbGVTaGFwZSA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoQ2lyY2xlU2hhcGUyLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gQ2lyY2xlU2hhcGUyKGEyLCBiMikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIShfdGhpcyBpbnN0YW5jZW9mIENpcmNsZVNoYXBlMikpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IENpcmNsZVNoYXBlMihhMiwgYjIpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubV90eXBlID0gQ2lyY2xlU2hhcGUyLlRZUEU7XG4gICAgICAgIF90aGlzLm1fcCA9IFZlYzIuemVybygpO1xuICAgICAgICBfdGhpcy5tX3JhZGl1cyA9IDE7XG4gICAgICAgIGlmICh0eXBlb2YgYTIgPT09IFwib2JqZWN0XCIgJiYgVmVjMi5pc1ZhbGlkKGEyKSkge1xuICAgICAgICAgIF90aGlzLm1fcC5zZXRWZWMyKGEyKTtcbiAgICAgICAgICBpZiAodHlwZW9mIGIyID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBfdGhpcy5tX3JhZGl1cyA9IGIyO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYTIgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICBfdGhpcy5tX3JhZGl1cyA9IGEyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIENpcmNsZVNoYXBlMi5wcm90b3R5cGUuX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IHRoaXMubV90eXBlLFxuICAgICAgICAgIHA6IHRoaXMubV9wLFxuICAgICAgICAgIHJhZGl1czogdGhpcy5tX3JhZGl1c1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIENpcmNsZVNoYXBlMi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2lyY2xlU2hhcGUyKGRhdGEucCwgZGF0YS5yYWRpdXMpO1xuICAgICAgfTtcbiAgICAgIENpcmNsZVNoYXBlMi5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB9O1xuICAgICAgQ2lyY2xlU2hhcGUyLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fdHlwZTtcbiAgICAgIH07XG4gICAgICBDaXJjbGVTaGFwZTIucHJvdG90eXBlLmdldFJhZGl1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3JhZGl1cztcbiAgICAgIH07XG4gICAgICBDaXJjbGVTaGFwZTIucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3A7XG4gICAgICB9O1xuICAgICAgQ2lyY2xlU2hhcGUyLnByb3RvdHlwZS5fY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNsb25lID0gbmV3IENpcmNsZVNoYXBlMigpO1xuICAgICAgICBjbG9uZS5tX3R5cGUgPSB0aGlzLm1fdHlwZTtcbiAgICAgICAgY2xvbmUubV9yYWRpdXMgPSB0aGlzLm1fcmFkaXVzO1xuICAgICAgICBjbG9uZS5tX3AgPSB0aGlzLm1fcC5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICB9O1xuICAgICAgQ2lyY2xlU2hhcGUyLnByb3RvdHlwZS5nZXRDaGlsZENvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfTtcbiAgICAgIENpcmNsZVNoYXBlMi5wcm90b3R5cGUudGVzdFBvaW50ID0gZnVuY3Rpb24oeGYyLCBwKSB7XG4gICAgICAgIHZhciBjZW50ZXIyID0gdHJhbnNmb3JtVmVjMih0ZW1wLCB4ZjIsIHRoaXMubV9wKTtcbiAgICAgICAgcmV0dXJuIGRpc3RTcXJWZWMyKHAsIGNlbnRlcjIpIDw9IHRoaXMubV9yYWRpdXMgKiB0aGlzLm1fcmFkaXVzO1xuICAgICAgfTtcbiAgICAgIENpcmNsZVNoYXBlMi5wcm90b3R5cGUucmF5Q2FzdCA9IGZ1bmN0aW9uKG91dHB1dDIsIGlucHV0MiwgeGYyLCBjaGlsZEluZGV4KSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IFZlYzIuYWRkKHhmMi5wLCBSb3QubXVsVmVjMih4ZjIucSwgdGhpcy5tX3ApKTtcbiAgICAgICAgdmFyIHMyID0gVmVjMi5zdWIoaW5wdXQyLnAxLCBwb3NpdGlvbik7XG4gICAgICAgIHZhciBiMiA9IFZlYzIuZG90KHMyLCBzMikgLSB0aGlzLm1fcmFkaXVzICogdGhpcy5tX3JhZGl1cztcbiAgICAgICAgdmFyIHIgPSBWZWMyLnN1YihpbnB1dDIucDIsIGlucHV0Mi5wMSk7XG4gICAgICAgIHZhciBjMiA9IFZlYzIuZG90KHMyLCByKTtcbiAgICAgICAgdmFyIHJyID0gVmVjMi5kb3Qociwgcik7XG4gICAgICAgIHZhciBzaWdtYSA9IGMyICogYzIgLSByciAqIGIyO1xuICAgICAgICBpZiAoc2lnbWEgPCAwIHx8IHJyIDwgRVBTSUxPTikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYTIgPSAtKGMyICsgbWF0aF9zcXJ0KHNpZ21hKSk7XG4gICAgICAgIGlmICgwIDw9IGEyICYmIGEyIDw9IGlucHV0Mi5tYXhGcmFjdGlvbiAqIHJyKSB7XG4gICAgICAgICAgYTIgLz0gcnI7XG4gICAgICAgICAgb3V0cHV0Mi5mcmFjdGlvbiA9IGEyO1xuICAgICAgICAgIG91dHB1dDIubm9ybWFsID0gVmVjMi5hZGQoczIsIFZlYzIubXVsTnVtVmVjMihhMiwgcikpO1xuICAgICAgICAgIG91dHB1dDIubm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG4gICAgICBDaXJjbGVTaGFwZTIucHJvdG90eXBlLmNvbXB1dGVBQUJCID0gZnVuY3Rpb24oYWFiYiwgeGYyLCBjaGlsZEluZGV4KSB7XG4gICAgICAgIHZhciBwID0gdHJhbnNmb3JtVmVjMih0ZW1wLCB4ZjIsIHRoaXMubV9wKTtcbiAgICAgICAgc2V0VmVjMihhYWJiLmxvd2VyQm91bmQsIHAueCAtIHRoaXMubV9yYWRpdXMsIHAueSAtIHRoaXMubV9yYWRpdXMpO1xuICAgICAgICBzZXRWZWMyKGFhYmIudXBwZXJCb3VuZCwgcC54ICsgdGhpcy5tX3JhZGl1cywgcC55ICsgdGhpcy5tX3JhZGl1cyk7XG4gICAgICB9O1xuICAgICAgQ2lyY2xlU2hhcGUyLnByb3RvdHlwZS5jb21wdXRlTWFzcyA9IGZ1bmN0aW9uKG1hc3NEYXRhLCBkZW5zaXR5KSB7XG4gICAgICAgIG1hc3NEYXRhLm1hc3MgPSBkZW5zaXR5ICogbWF0aF9QSSQ0ICogdGhpcy5tX3JhZGl1cyAqIHRoaXMubV9yYWRpdXM7XG4gICAgICAgIGNvcHlWZWMyKG1hc3NEYXRhLmNlbnRlciwgdGhpcy5tX3ApO1xuICAgICAgICBtYXNzRGF0YS5JID0gbWFzc0RhdGEubWFzcyAqICgwLjUgKiB0aGlzLm1fcmFkaXVzICogdGhpcy5tX3JhZGl1cyArIGxlbmd0aFNxclZlYzIodGhpcy5tX3ApKTtcbiAgICAgIH07XG4gICAgICBDaXJjbGVTaGFwZTIucHJvdG90eXBlLmNvbXB1dGVEaXN0YW5jZVByb3h5ID0gZnVuY3Rpb24ocHJveHkpIHtcbiAgICAgICAgcHJveHkubV92ZXJ0aWNlc1swXSA9IHRoaXMubV9wO1xuICAgICAgICBwcm94eS5tX3ZlcnRpY2VzLmxlbmd0aCA9IDE7XG4gICAgICAgIHByb3h5Lm1fY291bnQgPSAxO1xuICAgICAgICBwcm94eS5tX3JhZGl1cyA9IHRoaXMubV9yYWRpdXM7XG4gICAgICB9O1xuICAgICAgQ2lyY2xlU2hhcGUyLlRZUEUgPSBcImNpcmNsZVwiO1xuICAgICAgcmV0dXJuIENpcmNsZVNoYXBlMjtcbiAgICB9KFNoYXBlKVxuICApO1xuICB2YXIgbWF0aF9hYnMkNSA9IE1hdGguYWJzO1xuICB2YXIgbWF0aF9QSSQzID0gTWF0aC5QSTtcbiAgdmFyIERFRkFVTFRTJGEgPSB7XG4gICAgZnJlcXVlbmN5SHo6IDAsXG4gICAgZGFtcGluZ1JhdGlvOiAwXG4gIH07XG4gIHZhciBEaXN0YW5jZUpvaW50ID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbihfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhEaXN0YW5jZUpvaW50MiwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIERpc3RhbmNlSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCBhbmNob3JBLCBhbmNob3JCKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghKF90aGlzIGluc3RhbmNlb2YgRGlzdGFuY2VKb2ludDIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBEaXN0YW5jZUpvaW50MihkZWYsIGJvZHlBLCBib2R5QiwgYW5jaG9yQSwgYW5jaG9yQik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJvZHlCICYmIGFuY2hvckEgJiYgXCJtX3R5cGVcIiBpbiBhbmNob3JBICYmIFwieFwiIGluIGJvZHlCICYmIFwieVwiIGluIGJvZHlCKSB7XG4gICAgICAgICAgdmFyIHRlbXAzID0gYm9keUI7XG4gICAgICAgICAgYm9keUIgPSBhbmNob3JBO1xuICAgICAgICAgIGFuY2hvckEgPSB0ZW1wMztcbiAgICAgICAgfVxuICAgICAgICBkZWYgPSBvcHRpb25zKGRlZiwgREVGQVVMVFMkYSk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVmLCBib2R5QSwgYm9keUIpIHx8IHRoaXM7XG4gICAgICAgIGJvZHlBID0gX3RoaXMubV9ib2R5QTtcbiAgICAgICAgYm9keUIgPSBfdGhpcy5tX2JvZHlCO1xuICAgICAgICBfdGhpcy5tX3R5cGUgPSBEaXN0YW5jZUpvaW50Mi5UWVBFO1xuICAgICAgICBfdGhpcy5tX2xvY2FsQW5jaG9yQSA9IFZlYzIuY2xvbmUoYW5jaG9yQSA/IGJvZHlBLmdldExvY2FsUG9pbnQoYW5jaG9yQSkgOiBkZWYubG9jYWxBbmNob3JBIHx8IFZlYzIuemVybygpKTtcbiAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckIgPSBWZWMyLmNsb25lKGFuY2hvckIgPyBib2R5Qi5nZXRMb2NhbFBvaW50KGFuY2hvckIpIDogZGVmLmxvY2FsQW5jaG9yQiB8fCBWZWMyLnplcm8oKSk7XG4gICAgICAgIF90aGlzLm1fbGVuZ3RoID0gTnVtYmVyLmlzRmluaXRlKGRlZi5sZW5ndGgpID8gZGVmLmxlbmd0aCA6IFZlYzIuZGlzdGFuY2UoYm9keUEuZ2V0V29ybGRQb2ludChfdGhpcy5tX2xvY2FsQW5jaG9yQSksIGJvZHlCLmdldFdvcmxkUG9pbnQoX3RoaXMubV9sb2NhbEFuY2hvckIpKTtcbiAgICAgICAgX3RoaXMubV9mcmVxdWVuY3lIeiA9IGRlZi5mcmVxdWVuY3lIejtcbiAgICAgICAgX3RoaXMubV9kYW1waW5nUmF0aW8gPSBkZWYuZGFtcGluZ1JhdGlvO1xuICAgICAgICBfdGhpcy5tX2ltcHVsc2UgPSAwO1xuICAgICAgICBfdGhpcy5tX2dhbW1hID0gMDtcbiAgICAgICAgX3RoaXMubV9iaWFzID0gMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgRGlzdGFuY2VKb2ludDIucHJvdG90eXBlLl9zZXJpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiB0aGlzLm1fdHlwZSxcbiAgICAgICAgICBib2R5QTogdGhpcy5tX2JvZHlBLFxuICAgICAgICAgIGJvZHlCOiB0aGlzLm1fYm9keUIsXG4gICAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdGhpcy5tX2NvbGxpZGVDb25uZWN0ZWQsXG4gICAgICAgICAgZnJlcXVlbmN5SHo6IHRoaXMubV9mcmVxdWVuY3lIeixcbiAgICAgICAgICBkYW1waW5nUmF0aW86IHRoaXMubV9kYW1waW5nUmF0aW8sXG4gICAgICAgICAgbG9jYWxBbmNob3JBOiB0aGlzLm1fbG9jYWxBbmNob3JBLFxuICAgICAgICAgIGxvY2FsQW5jaG9yQjogdGhpcy5tX2xvY2FsQW5jaG9yQixcbiAgICAgICAgICBsZW5ndGg6IHRoaXMubV9sZW5ndGgsXG4gICAgICAgICAgaW1wdWxzZTogdGhpcy5tX2ltcHVsc2UsXG4gICAgICAgICAgZ2FtbWE6IHRoaXMubV9nYW1tYSxcbiAgICAgICAgICBiaWFzOiB0aGlzLm1fYmlhc1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlSm9pbnQyLl9kZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGRhdGEsIHdvcmxkLCByZXN0b3JlKSB7XG4gICAgICAgIGRhdGEgPSBfX2Fzc2lnbih7fSwgZGF0YSk7XG4gICAgICAgIGRhdGEuYm9keUEgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUEsIHdvcmxkKTtcbiAgICAgICAgZGF0YS5ib2R5QiA9IHJlc3RvcmUoQm9keSwgZGF0YS5ib2R5Qiwgd29ybGQpO1xuICAgICAgICB2YXIgam9pbnQgPSBuZXcgRGlzdGFuY2VKb2ludDIoZGF0YSk7XG4gICAgICAgIHJldHVybiBqb2ludDtcbiAgICAgIH07XG4gICAgICBEaXN0YW5jZUpvaW50Mi5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24oZGVmKSB7XG4gICAgICAgIGlmIChkZWYuYW5jaG9yQSkge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckEuc2V0VmVjMih0aGlzLm1fYm9keUEuZ2V0TG9jYWxQb2ludChkZWYuYW5jaG9yQSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGRlZi5sb2NhbEFuY2hvckEpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JBLnNldFZlYzIoZGVmLmxvY2FsQW5jaG9yQSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5hbmNob3JCKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5zZXRWZWMyKHRoaXMubV9ib2R5Qi5nZXRMb2NhbFBvaW50KGRlZi5hbmNob3JCKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmLmxvY2FsQW5jaG9yQikge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckIuc2V0VmVjMihkZWYubG9jYWxBbmNob3JCKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLm1fbGVuZ3RoID0gK2RlZi5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmLmxlbmd0aCA8IDApIDtcbiAgICAgICAgZWxzZSBpZiAoZGVmLmFuY2hvckEgfHwgZGVmLmFuY2hvckEgfHwgZGVmLmFuY2hvckEgfHwgZGVmLmFuY2hvckEpIHtcbiAgICAgICAgICB0aGlzLm1fbGVuZ3RoID0gVmVjMi5kaXN0YW5jZSh0aGlzLm1fYm9keUEuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBKSwgdGhpcy5tX2JvZHlCLmdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLmZyZXF1ZW5jeUh6KSkge1xuICAgICAgICAgIHRoaXMubV9mcmVxdWVuY3lIeiA9IGRlZi5mcmVxdWVuY3lIejtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5kYW1waW5nUmF0aW8pKSB7XG4gICAgICAgICAgdGhpcy5tX2RhbXBpbmdSYXRpbyA9IGRlZi5kYW1waW5nUmF0aW87XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBEaXN0YW5jZUpvaW50Mi5wcm90b3R5cGUuZ2V0TG9jYWxBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JBO1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlSm9pbnQyLnByb3RvdHlwZS5nZXRMb2NhbEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckI7XG4gICAgICB9O1xuICAgICAgRGlzdGFuY2VKb2ludDIucHJvdG90eXBlLnNldExlbmd0aCA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgICAgICB0aGlzLm1fbGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlSm9pbnQyLnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sZW5ndGg7XG4gICAgICB9O1xuICAgICAgRGlzdGFuY2VKb2ludDIucHJvdG90eXBlLnNldEZyZXF1ZW5jeSA9IGZ1bmN0aW9uKGh6KSB7XG4gICAgICAgIHRoaXMubV9mcmVxdWVuY3lIeiA9IGh6O1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlSm9pbnQyLnByb3RvdHlwZS5nZXRGcmVxdWVuY3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9mcmVxdWVuY3lIejtcbiAgICAgIH07XG4gICAgICBEaXN0YW5jZUpvaW50Mi5wcm90b3R5cGUuc2V0RGFtcGluZ1JhdGlvID0gZnVuY3Rpb24ocmF0aW8pIHtcbiAgICAgICAgdGhpcy5tX2RhbXBpbmdSYXRpbyA9IHJhdGlvO1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlSm9pbnQyLnByb3RvdHlwZS5nZXREYW1waW5nUmF0aW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9kYW1waW5nUmF0aW87XG4gICAgICB9O1xuICAgICAgRGlzdGFuY2VKb2ludDIucHJvdG90eXBlLmdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5QS5nZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckEpO1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlSm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUIuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgIH07XG4gICAgICBEaXN0YW5jZUpvaW50Mi5wcm90b3R5cGUuZ2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgICAgICByZXR1cm4gVmVjMi5tdWxOdW1WZWMyKHRoaXMubV9pbXB1bHNlLCB0aGlzLm1fdSkubXVsKGludl9kdCk7XG4gICAgICB9O1xuICAgICAgRGlzdGFuY2VKb2ludDIucHJvdG90eXBlLmdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlSm9pbnQyLnByb3RvdHlwZS5pbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdGhpcy5tX2xvY2FsQ2VudGVyQSA9IHRoaXMubV9ib2R5QS5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgICB0aGlzLm1fbG9jYWxDZW50ZXJCID0gdGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZJQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XG4gICAgICAgIHRoaXMubV9pbnZJQiA9IHRoaXMubV9ib2R5Qi5tX2ludkk7XG4gICAgICAgIHZhciBjQTIgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUEgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkEyID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdBID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIGNCMiA9IHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmM7XG4gICAgICAgIHZhciBhQiA9IHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciB2QjIgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgcUEgPSBSb3QubmVvKGFBKTtcbiAgICAgICAgdmFyIHFCID0gUm90Lm5lbyhhQik7XG4gICAgICAgIHRoaXMubV9yQSA9IFJvdC5tdWxWZWMyKHFBLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBKSk7XG4gICAgICAgIHRoaXMubV9yQiA9IFJvdC5tdWxWZWMyKHFCLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKSk7XG4gICAgICAgIHRoaXMubV91ID0gVmVjMi5zdWIoVmVjMi5hZGQoY0IyLCB0aGlzLm1fckIpLCBWZWMyLmFkZChjQTIsIHRoaXMubV9yQSkpO1xuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5tX3UubGVuZ3RoKCk7XG4gICAgICAgIGlmIChsZW5ndGggPiBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3ApIHtcbiAgICAgICAgICB0aGlzLm1fdS5tdWwoMSAvIGxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX3Uuc2V0TnVtKDAsIDApO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjckF1ID0gVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgdGhpcy5tX3UpO1xuICAgICAgICB2YXIgY3JCdSA9IFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckIsIHRoaXMubV91KTtcbiAgICAgICAgdmFyIGludk1hc3MgPSB0aGlzLm1faW52TWFzc0EgKyB0aGlzLm1faW52SUEgKiBjckF1ICogY3JBdSArIHRoaXMubV9pbnZNYXNzQiArIHRoaXMubV9pbnZJQiAqIGNyQnUgKiBjckJ1O1xuICAgICAgICB0aGlzLm1fbWFzcyA9IGludk1hc3MgIT0gMCA/IDEgLyBpbnZNYXNzIDogMDtcbiAgICAgICAgaWYgKHRoaXMubV9mcmVxdWVuY3lIeiA+IDApIHtcbiAgICAgICAgICB2YXIgQyA9IGxlbmd0aCAtIHRoaXMubV9sZW5ndGg7XG4gICAgICAgICAgdmFyIG9tZWdhID0gMiAqIG1hdGhfUEkkMyAqIHRoaXMubV9mcmVxdWVuY3lIejtcbiAgICAgICAgICB2YXIgZDIgPSAyICogdGhpcy5tX21hc3MgKiB0aGlzLm1fZGFtcGluZ1JhdGlvICogb21lZ2E7XG4gICAgICAgICAgdmFyIGsgPSB0aGlzLm1fbWFzcyAqIG9tZWdhICogb21lZ2E7XG4gICAgICAgICAgdmFyIGggPSBzdGVwLmR0O1xuICAgICAgICAgIHRoaXMubV9nYW1tYSA9IGggKiAoZDIgKyBoICogayk7XG4gICAgICAgICAgdGhpcy5tX2dhbW1hID0gdGhpcy5tX2dhbW1hICE9IDAgPyAxIC8gdGhpcy5tX2dhbW1hIDogMDtcbiAgICAgICAgICB0aGlzLm1fYmlhcyA9IEMgKiBoICogayAqIHRoaXMubV9nYW1tYTtcbiAgICAgICAgICBpbnZNYXNzICs9IHRoaXMubV9nYW1tYTtcbiAgICAgICAgICB0aGlzLm1fbWFzcyA9IGludk1hc3MgIT0gMCA/IDEgLyBpbnZNYXNzIDogMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fZ2FtbWEgPSAwO1xuICAgICAgICAgIHRoaXMubV9iaWFzID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICAgICAgdmFyIFAzID0gVmVjMi5tdWxOdW1WZWMyKHRoaXMubV9pbXB1bHNlLCB0aGlzLm1fdSk7XG4gICAgICAgICAgdkEyLnN1Yk11bCh0aGlzLm1faW52TWFzc0EsIFAzKTtcbiAgICAgICAgICB3QSAtPSB0aGlzLm1faW52SUEgKiBWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JBLCBQMyk7XG4gICAgICAgICAgdkIyLmFkZE11bCh0aGlzLm1faW52TWFzc0IsIFAzKTtcbiAgICAgICAgICB3QiArPSB0aGlzLm1faW52SUIgKiBWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JCLCBQMyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnYuc2V0VmVjMih2QTIpO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYuc2V0VmVjMih2QjIpO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53ID0gd0I7XG4gICAgICB9O1xuICAgICAgRGlzdGFuY2VKb2ludDIucHJvdG90eXBlLnNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdmFyIHZBMiA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QSA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciB2QjIgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgdnBBID0gVmVjMi5hZGQodkEyLCBWZWMyLmNyb3NzTnVtVmVjMih3QSwgdGhpcy5tX3JBKSk7XG4gICAgICAgIHZhciB2cEIgPSBWZWMyLmFkZCh2QjIsIFZlYzIuY3Jvc3NOdW1WZWMyKHdCLCB0aGlzLm1fckIpKTtcbiAgICAgICAgdmFyIENkb3QgPSBWZWMyLmRvdCh0aGlzLm1fdSwgdnBCKSAtIFZlYzIuZG90KHRoaXMubV91LCB2cEEpO1xuICAgICAgICB2YXIgaW1wdWxzZSA9IC10aGlzLm1fbWFzcyAqIChDZG90ICsgdGhpcy5tX2JpYXMgKyB0aGlzLm1fZ2FtbWEgKiB0aGlzLm1faW1wdWxzZSk7XG4gICAgICAgIHRoaXMubV9pbXB1bHNlICs9IGltcHVsc2U7XG4gICAgICAgIHZhciBQMyA9IFZlYzIubXVsTnVtVmVjMihpbXB1bHNlLCB0aGlzLm1fdSk7XG4gICAgICAgIHZBMi5zdWJNdWwodGhpcy5tX2ludk1hc3NBLCBQMyk7XG4gICAgICAgIHdBIC09IHRoaXMubV9pbnZJQSAqIFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckEsIFAzKTtcbiAgICAgICAgdkIyLmFkZE11bCh0aGlzLm1faW52TWFzc0IsIFAzKTtcbiAgICAgICAgd0IgKz0gdGhpcy5tX2ludklCICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgUDMpO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52LnNldFZlYzIodkEyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudyA9IHdBO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52LnNldFZlYzIodkIyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudyA9IHdCO1xuICAgICAgfTtcbiAgICAgIERpc3RhbmNlSm9pbnQyLnByb3RvdHlwZS5zb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIGlmICh0aGlzLm1fZnJlcXVlbmN5SHogPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNBMiA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmM7XG4gICAgICAgIHZhciBhQSA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciBjQjIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgcUEgPSBSb3QubmVvKGFBKTtcbiAgICAgICAgdmFyIHFCID0gUm90Lm5lbyhhQik7XG4gICAgICAgIHZhciByQTIgPSBSb3QubXVsU3ViKHFBLCB0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBKTtcbiAgICAgICAgdmFyIHJCMiA9IFJvdC5tdWxTdWIocUIsIHRoaXMubV9sb2NhbEFuY2hvckIsIHRoaXMubV9sb2NhbENlbnRlckIpO1xuICAgICAgICB2YXIgdSA9IFZlYzIuc3ViKFZlYzIuYWRkKGNCMiwgckIyKSwgVmVjMi5hZGQoY0EyLCByQTIpKTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHUubm9ybWFsaXplKCk7XG4gICAgICAgIHZhciBDID0gY2xhbXAobGVuZ3RoIC0gdGhpcy5tX2xlbmd0aCwgLVNldHRpbmdzSW50ZXJuYWwubWF4TGluZWFyQ29ycmVjdGlvbiwgU2V0dGluZ3NJbnRlcm5hbC5tYXhMaW5lYXJDb3JyZWN0aW9uKTtcbiAgICAgICAgdmFyIGltcHVsc2UgPSAtdGhpcy5tX21hc3MgKiBDO1xuICAgICAgICB2YXIgUDMgPSBWZWMyLm11bE51bVZlYzIoaW1wdWxzZSwgdSk7XG4gICAgICAgIGNBMi5zdWJNdWwodGhpcy5tX2ludk1hc3NBLCBQMyk7XG4gICAgICAgIGFBIC09IHRoaXMubV9pbnZJQSAqIFZlYzIuY3Jvc3NWZWMyVmVjMihyQTIsIFAzKTtcbiAgICAgICAgY0IyLmFkZE11bCh0aGlzLm1faW52TWFzc0IsIFAzKTtcbiAgICAgICAgYUIgKz0gdGhpcy5tX2ludklCICogVmVjMi5jcm9zc1ZlYzJWZWMyKHJCMiwgUDMpO1xuICAgICAgICB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jLnNldFZlYzIoY0EyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYSA9IGFBO1xuICAgICAgICB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jLnNldFZlYzIoY0IyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYSA9IGFCO1xuICAgICAgICByZXR1cm4gbWF0aF9hYnMkNShDKSA8IFNldHRpbmdzSW50ZXJuYWwubGluZWFyU2xvcDtcbiAgICAgIH07XG4gICAgICBEaXN0YW5jZUpvaW50Mi5UWVBFID0gXCJkaXN0YW5jZS1qb2ludFwiO1xuICAgICAgcmV0dXJuIERpc3RhbmNlSm9pbnQyO1xuICAgIH0oSm9pbnQpXG4gICk7XG4gIHZhciBERUZBVUxUUyQ5ID0ge1xuICAgIG1heEZvcmNlOiAwLFxuICAgIG1heFRvcnF1ZTogMFxuICB9O1xuICB2YXIgRnJpY3Rpb25Kb2ludCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoRnJpY3Rpb25Kb2ludDIsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBGcmljdGlvbkpvaW50MihkZWYsIGJvZHlBLCBib2R5QiwgYW5jaG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghKF90aGlzIGluc3RhbmNlb2YgRnJpY3Rpb25Kb2ludDIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBGcmljdGlvbkpvaW50MihkZWYsIGJvZHlBLCBib2R5QiwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICBkZWYgPSBvcHRpb25zKGRlZiwgREVGQVVMVFMkOSk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVmLCBib2R5QSwgYm9keUIpIHx8IHRoaXM7XG4gICAgICAgIGJvZHlBID0gX3RoaXMubV9ib2R5QTtcbiAgICAgICAgYm9keUIgPSBfdGhpcy5tX2JvZHlCO1xuICAgICAgICBfdGhpcy5tX3R5cGUgPSBGcmljdGlvbkpvaW50Mi5UWVBFO1xuICAgICAgICBfdGhpcy5tX2xvY2FsQW5jaG9yQSA9IFZlYzIuY2xvbmUoYW5jaG9yID8gYm9keUEuZ2V0TG9jYWxQb2ludChhbmNob3IpIDogZGVmLmxvY2FsQW5jaG9yQSB8fCBWZWMyLnplcm8oKSk7XG4gICAgICAgIF90aGlzLm1fbG9jYWxBbmNob3JCID0gVmVjMi5jbG9uZShhbmNob3IgPyBib2R5Qi5nZXRMb2NhbFBvaW50KGFuY2hvcikgOiBkZWYubG9jYWxBbmNob3JCIHx8IFZlYzIuemVybygpKTtcbiAgICAgICAgX3RoaXMubV9saW5lYXJJbXB1bHNlID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIF90aGlzLm1fYW5ndWxhckltcHVsc2UgPSAwO1xuICAgICAgICBfdGhpcy5tX21heEZvcmNlID0gZGVmLm1heEZvcmNlO1xuICAgICAgICBfdGhpcy5tX21heFRvcnF1ZSA9IGRlZi5tYXhUb3JxdWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIEZyaWN0aW9uSm9pbnQyLnByb3RvdHlwZS5fc2VyaWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5tX3R5cGUsXG4gICAgICAgICAgYm9keUE6IHRoaXMubV9ib2R5QSxcbiAgICAgICAgICBib2R5QjogdGhpcy5tX2JvZHlCLFxuICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkLFxuICAgICAgICAgIG1heEZvcmNlOiB0aGlzLm1fbWF4Rm9yY2UsXG4gICAgICAgICAgbWF4VG9ycXVlOiB0aGlzLm1fbWF4VG9ycXVlLFxuICAgICAgICAgIGxvY2FsQW5jaG9yQTogdGhpcy5tX2xvY2FsQW5jaG9yQSxcbiAgICAgICAgICBsb2NhbEFuY2hvckI6IHRoaXMubV9sb2NhbEFuY2hvckJcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBGcmljdGlvbkpvaW50Mi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCB3b3JsZCwgcmVzdG9yZSkge1xuICAgICAgICBkYXRhID0gX19hc3NpZ24oe30sIGRhdGEpO1xuICAgICAgICBkYXRhLmJvZHlBID0gcmVzdG9yZShCb2R5LCBkYXRhLmJvZHlBLCB3b3JsZCk7XG4gICAgICAgIGRhdGEuYm9keUIgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUIsIHdvcmxkKTtcbiAgICAgICAgdmFyIGpvaW50ID0gbmV3IEZyaWN0aW9uSm9pbnQyKGRhdGEpO1xuICAgICAgICByZXR1cm4gam9pbnQ7XG4gICAgICB9O1xuICAgICAgRnJpY3Rpb25Kb2ludDIucHJvdG90eXBlLl9yZXNldCA9IGZ1bmN0aW9uKGRlZikge1xuICAgICAgICBpZiAoZGVmLmFuY2hvckEpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JBLnNldFZlYzIodGhpcy5tX2JvZHlBLmdldExvY2FsUG9pbnQoZGVmLmFuY2hvckEpKTtcbiAgICAgICAgfSBlbHNlIGlmIChkZWYubG9jYWxBbmNob3JBKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5zZXRWZWMyKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuYW5jaG9yQikge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckIuc2V0VmVjMih0aGlzLm1fYm9keUIuZ2V0TG9jYWxQb2ludChkZWYuYW5jaG9yQikpO1xuICAgICAgICB9IGVsc2UgaWYgKGRlZi5sb2NhbEFuY2hvckIpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JCLnNldFZlYzIoZGVmLmxvY2FsQW5jaG9yQik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYubWF4Rm9yY2UpKSB7XG4gICAgICAgICAgdGhpcy5tX21heEZvcmNlID0gZGVmLm1heEZvcmNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLm1heFRvcnF1ZSkpIHtcbiAgICAgICAgICB0aGlzLm1fbWF4VG9ycXVlID0gZGVmLm1heFRvcnF1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIEZyaWN0aW9uSm9pbnQyLnByb3RvdHlwZS5nZXRMb2NhbEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckE7XG4gICAgICB9O1xuICAgICAgRnJpY3Rpb25Kb2ludDIucHJvdG90eXBlLmdldExvY2FsQW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2xvY2FsQW5jaG9yQjtcbiAgICAgIH07XG4gICAgICBGcmljdGlvbkpvaW50Mi5wcm90b3R5cGUuc2V0TWF4Rm9yY2UgPSBmdW5jdGlvbihmb3JjZSkge1xuICAgICAgICB0aGlzLm1fbWF4Rm9yY2UgPSBmb3JjZTtcbiAgICAgIH07XG4gICAgICBGcmljdGlvbkpvaW50Mi5wcm90b3R5cGUuZ2V0TWF4Rm9yY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9tYXhGb3JjZTtcbiAgICAgIH07XG4gICAgICBGcmljdGlvbkpvaW50Mi5wcm90b3R5cGUuc2V0TWF4VG9ycXVlID0gZnVuY3Rpb24odG9ycXVlKSB7XG4gICAgICAgIHRoaXMubV9tYXhUb3JxdWUgPSB0b3JxdWU7XG4gICAgICB9O1xuICAgICAgRnJpY3Rpb25Kb2ludDIucHJvdG90eXBlLmdldE1heFRvcnF1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX21heFRvcnF1ZTtcbiAgICAgIH07XG4gICAgICBGcmljdGlvbkpvaW50Mi5wcm90b3R5cGUuZ2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2JvZHlBLmdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSk7XG4gICAgICB9O1xuICAgICAgRnJpY3Rpb25Kb2ludDIucHJvdG90eXBlLmdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5nZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckIpO1xuICAgICAgfTtcbiAgICAgIEZyaWN0aW9uSm9pbnQyLnByb3RvdHlwZS5nZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBWZWMyLm11bE51bVZlYzIoaW52X2R0LCB0aGlzLm1fbGluZWFySW1wdWxzZSk7XG4gICAgICB9O1xuICAgICAgRnJpY3Rpb25Kb2ludDIucHJvdG90eXBlLmdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1fYW5ndWxhckltcHVsc2U7XG4gICAgICB9O1xuICAgICAgRnJpY3Rpb25Kb2ludDIucHJvdG90eXBlLmluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB0aGlzLm1fbG9jYWxDZW50ZXJBID0gdGhpcy5tX2JvZHlBLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9sb2NhbENlbnRlckIgPSB0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICAgICAgdGhpcy5tX2ludk1hc3NBID0gdGhpcy5tX2JvZHlBLm1faW52TWFzcztcbiAgICAgICAgdGhpcy5tX2ludk1hc3NCID0gdGhpcy5tX2JvZHlCLm1faW52TWFzcztcbiAgICAgICAgdGhpcy5tX2ludklBID0gdGhpcy5tX2JvZHlBLm1faW52STtcbiAgICAgICAgdGhpcy5tX2ludklCID0gdGhpcy5tX2JvZHlCLm1faW52STtcbiAgICAgICAgdmFyIGFBID0gdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHZBMiA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QSA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBhQiA9IHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciB2QjIgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgcUEgPSBSb3QubmVvKGFBKTtcbiAgICAgICAgdmFyIHFCID0gUm90Lm5lbyhhQik7XG4gICAgICAgIHRoaXMubV9yQSA9IFJvdC5tdWxWZWMyKHFBLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBKSk7XG4gICAgICAgIHRoaXMubV9yQiA9IFJvdC5tdWxWZWMyKHFCLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKSk7XG4gICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgICB2YXIgaUEgPSB0aGlzLm1faW52SUE7XG4gICAgICAgIHZhciBpQiA9IHRoaXMubV9pbnZJQjtcbiAgICAgICAgdmFyIEsgPSBuZXcgTWF0MjIoKTtcbiAgICAgICAgSy5leC54ID0gbUEgKyBtQiArIGlBICogdGhpcy5tX3JBLnkgKiB0aGlzLm1fckEueSArIGlCICogdGhpcy5tX3JCLnkgKiB0aGlzLm1fckIueTtcbiAgICAgICAgSy5leC55ID0gLWlBICogdGhpcy5tX3JBLnggKiB0aGlzLm1fckEueSAtIGlCICogdGhpcy5tX3JCLnggKiB0aGlzLm1fckIueTtcbiAgICAgICAgSy5leS54ID0gSy5leC55O1xuICAgICAgICBLLmV5LnkgPSBtQSArIG1CICsgaUEgKiB0aGlzLm1fckEueCAqIHRoaXMubV9yQS54ICsgaUIgKiB0aGlzLm1fckIueCAqIHRoaXMubV9yQi54O1xuICAgICAgICB0aGlzLm1fbGluZWFyTWFzcyA9IEsuZ2V0SW52ZXJzZSgpO1xuICAgICAgICB0aGlzLm1fYW5ndWxhck1hc3MgPSBpQSArIGlCO1xuICAgICAgICBpZiAodGhpcy5tX2FuZ3VsYXJNYXNzID4gMCkge1xuICAgICAgICAgIHRoaXMubV9hbmd1bGFyTWFzcyA9IDEgLyB0aGlzLm1fYW5ndWxhck1hc3M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UubXVsKHN0ZXAuZHRSYXRpbyk7XG4gICAgICAgICAgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgICAgICB2YXIgUDMgPSBWZWMyLm5lbyh0aGlzLm1fbGluZWFySW1wdWxzZS54LCB0aGlzLm1fbGluZWFySW1wdWxzZS55KTtcbiAgICAgICAgICB2QTIuc3ViTXVsKG1BLCBQMyk7XG4gICAgICAgICAgd0EgLT0gaUEgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgUDMpICsgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlKTtcbiAgICAgICAgICB2QjIuYWRkTXVsKG1CLCBQMyk7XG4gICAgICAgICAgd0IgKz0gaUIgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgUDMpICsgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5zZXRaZXJvKCk7XG4gICAgICAgICAgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52ID0gdkEyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYgPSB2QjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBGcmljdGlvbkpvaW50Mi5wcm90b3R5cGUuc29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgdkEyID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdBID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHZCMiA9IHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QiA9IHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgICB2YXIgaUEgPSB0aGlzLm1faW52SUE7XG4gICAgICAgIHZhciBpQiA9IHRoaXMubV9pbnZJQjtcbiAgICAgICAgdmFyIGggPSBzdGVwLmR0O1xuICAgICAgICB7XG4gICAgICAgICAgdmFyIENkb3QgPSB3QiAtIHdBO1xuICAgICAgICAgIHZhciBpbXB1bHNlID0gLXRoaXMubV9hbmd1bGFyTWFzcyAqIENkb3Q7XG4gICAgICAgICAgdmFyIG9sZEltcHVsc2UgPSB0aGlzLm1fYW5ndWxhckltcHVsc2U7XG4gICAgICAgICAgdmFyIG1heEltcHVsc2UgPSBoICogdGhpcy5tX21heFRvcnF1ZTtcbiAgICAgICAgICB0aGlzLm1fYW5ndWxhckltcHVsc2UgPSBjbGFtcCh0aGlzLm1fYW5ndWxhckltcHVsc2UgKyBpbXB1bHNlLCAtbWF4SW1wdWxzZSwgbWF4SW1wdWxzZSk7XG4gICAgICAgICAgaW1wdWxzZSA9IHRoaXMubV9hbmd1bGFySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICAgICAgd0EgLT0gaUEgKiBpbXB1bHNlO1xuICAgICAgICAgIHdCICs9IGlCICogaW1wdWxzZTtcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgdmFyIENkb3QgPSBWZWMyLnN1YihWZWMyLmFkZCh2QjIsIFZlYzIuY3Jvc3NOdW1WZWMyKHdCLCB0aGlzLm1fckIpKSwgVmVjMi5hZGQodkEyLCBWZWMyLmNyb3NzTnVtVmVjMih3QSwgdGhpcy5tX3JBKSkpO1xuICAgICAgICAgIHZhciBpbXB1bHNlID0gVmVjMi5uZWcoTWF0MjIubXVsVmVjMih0aGlzLm1fbGluZWFyTWFzcywgQ2RvdCkpO1xuICAgICAgICAgIHZhciBvbGRJbXB1bHNlID0gdGhpcy5tX2xpbmVhckltcHVsc2U7XG4gICAgICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UuYWRkKGltcHVsc2UpO1xuICAgICAgICAgIHZhciBtYXhJbXB1bHNlID0gaCAqIHRoaXMubV9tYXhGb3JjZTtcbiAgICAgICAgICBpZiAodGhpcy5tX2xpbmVhckltcHVsc2UubGVuZ3RoU3F1YXJlZCgpID4gbWF4SW1wdWxzZSAqIG1heEltcHVsc2UpIHtcbiAgICAgICAgICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UubXVsKG1heEltcHVsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbXB1bHNlID0gVmVjMi5zdWIodGhpcy5tX2xpbmVhckltcHVsc2UsIG9sZEltcHVsc2UpO1xuICAgICAgICAgIHZBMi5zdWJNdWwobUEsIGltcHVsc2UpO1xuICAgICAgICAgIHdBIC09IGlBICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgaW1wdWxzZSk7XG4gICAgICAgICAgdkIyLmFkZE11bChtQiwgaW1wdWxzZSk7XG4gICAgICAgICAgd0IgKz0gaUIgKiBWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JCLCBpbXB1bHNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52ID0gdkEyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYgPSB2QjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBGcmljdGlvbkpvaW50Mi5wcm90b3R5cGUuc29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBGcmljdGlvbkpvaW50Mi5UWVBFID0gXCJmcmljdGlvbi1qb2ludFwiO1xuICAgICAgcmV0dXJuIEZyaWN0aW9uSm9pbnQyO1xuICAgIH0oSm9pbnQpXG4gICk7XG4gIHZhciBNYXQzMyA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBNYXQzMzIoYTIsIGIyLCBjMikge1xuICAgICAgICBpZiAodHlwZW9mIGEyID09PSBcIm9iamVjdFwiICYmIGEyICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5leCA9IFZlYzMuY2xvbmUoYTIpO1xuICAgICAgICAgIHRoaXMuZXkgPSBWZWMzLmNsb25lKGIyKTtcbiAgICAgICAgICB0aGlzLmV6ID0gVmVjMy5jbG9uZShjMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5leCA9IFZlYzMuemVybygpO1xuICAgICAgICAgIHRoaXMuZXkgPSBWZWMzLnplcm8oKTtcbiAgICAgICAgICB0aGlzLmV6ID0gVmVjMy56ZXJvKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIE1hdDMzMi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMpO1xuICAgICAgfTtcbiAgICAgIE1hdDMzMi5pc1ZhbGlkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVmVjMy5pc1ZhbGlkKG9iai5leCkgJiYgVmVjMy5pc1ZhbGlkKG9iai5leSkgJiYgVmVjMy5pc1ZhbGlkKG9iai5leik7XG4gICAgICB9O1xuICAgICAgTWF0MzMyLmFzc2VydCA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIH07XG4gICAgICBNYXQzMzIucHJvdG90eXBlLnNldFplcm8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5leC5zZXRaZXJvKCk7XG4gICAgICAgIHRoaXMuZXkuc2V0WmVybygpO1xuICAgICAgICB0aGlzLmV6LnNldFplcm8oKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgTWF0MzMyLnByb3RvdHlwZS5zb2x2ZTMzID0gZnVuY3Rpb24odjMpIHtcbiAgICAgICAgdmFyIGNyb3NzX3ggPSB0aGlzLmV5LnkgKiB0aGlzLmV6LnogLSB0aGlzLmV5LnogKiB0aGlzLmV6Lnk7XG4gICAgICAgIHZhciBjcm9zc195ID0gdGhpcy5leS56ICogdGhpcy5lei54IC0gdGhpcy5leS54ICogdGhpcy5lei56O1xuICAgICAgICB2YXIgY3Jvc3NfeiA9IHRoaXMuZXkueCAqIHRoaXMuZXoueSAtIHRoaXMuZXkueSAqIHRoaXMuZXoueDtcbiAgICAgICAgdmFyIGRldCA9IHRoaXMuZXgueCAqIGNyb3NzX3ggKyB0aGlzLmV4LnkgKiBjcm9zc195ICsgdGhpcy5leC56ICogY3Jvc3NfejtcbiAgICAgICAgaWYgKGRldCAhPT0gMCkge1xuICAgICAgICAgIGRldCA9IDEgLyBkZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHIgPSBuZXcgVmVjMygpO1xuICAgICAgICBjcm9zc194ID0gdGhpcy5leS55ICogdGhpcy5lei56IC0gdGhpcy5leS56ICogdGhpcy5lei55O1xuICAgICAgICBjcm9zc195ID0gdGhpcy5leS56ICogdGhpcy5lei54IC0gdGhpcy5leS54ICogdGhpcy5lei56O1xuICAgICAgICBjcm9zc196ID0gdGhpcy5leS54ICogdGhpcy5lei55IC0gdGhpcy5leS55ICogdGhpcy5lei54O1xuICAgICAgICByLnggPSBkZXQgKiAodjMueCAqIGNyb3NzX3ggKyB2My55ICogY3Jvc3NfeSArIHYzLnogKiBjcm9zc196KTtcbiAgICAgICAgY3Jvc3NfeCA9IHYzLnkgKiB0aGlzLmV6LnogLSB2My56ICogdGhpcy5lei55O1xuICAgICAgICBjcm9zc195ID0gdjMueiAqIHRoaXMuZXoueCAtIHYzLnggKiB0aGlzLmV6Lno7XG4gICAgICAgIGNyb3NzX3ogPSB2My54ICogdGhpcy5lei55IC0gdjMueSAqIHRoaXMuZXoueDtcbiAgICAgICAgci55ID0gZGV0ICogKHRoaXMuZXgueCAqIGNyb3NzX3ggKyB0aGlzLmV4LnkgKiBjcm9zc195ICsgdGhpcy5leC56ICogY3Jvc3Nfeik7XG4gICAgICAgIGNyb3NzX3ggPSB0aGlzLmV5LnkgKiB2My56IC0gdGhpcy5leS56ICogdjMueTtcbiAgICAgICAgY3Jvc3NfeSA9IHRoaXMuZXkueiAqIHYzLnggLSB0aGlzLmV5LnggKiB2My56O1xuICAgICAgICBjcm9zc196ID0gdGhpcy5leS54ICogdjMueSAtIHRoaXMuZXkueSAqIHYzLng7XG4gICAgICAgIHIueiA9IGRldCAqICh0aGlzLmV4LnggKiBjcm9zc194ICsgdGhpcy5leC55ICogY3Jvc3NfeSArIHRoaXMuZXgueiAqIGNyb3NzX3opO1xuICAgICAgICByZXR1cm4gcjtcbiAgICAgIH07XG4gICAgICBNYXQzMzIucHJvdG90eXBlLnNvbHZlMjIgPSBmdW5jdGlvbih2Mykge1xuICAgICAgICB2YXIgYTExID0gdGhpcy5leC54O1xuICAgICAgICB2YXIgYTEyID0gdGhpcy5leS54O1xuICAgICAgICB2YXIgYTIxID0gdGhpcy5leC55O1xuICAgICAgICB2YXIgYTIyID0gdGhpcy5leS55O1xuICAgICAgICB2YXIgZGV0ID0gYTExICogYTIyIC0gYTEyICogYTIxO1xuICAgICAgICBpZiAoZGV0ICE9PSAwKSB7XG4gICAgICAgICAgZGV0ID0gMSAvIGRldDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgciA9IFZlYzIuemVybygpO1xuICAgICAgICByLnggPSBkZXQgKiAoYTIyICogdjMueCAtIGExMiAqIHYzLnkpO1xuICAgICAgICByLnkgPSBkZXQgKiAoYTExICogdjMueSAtIGEyMSAqIHYzLngpO1xuICAgICAgICByZXR1cm4gcjtcbiAgICAgIH07XG4gICAgICBNYXQzMzIucHJvdG90eXBlLmdldEludmVyc2UyMiA9IGZ1bmN0aW9uKE0pIHtcbiAgICAgICAgdmFyIGEyID0gdGhpcy5leC54O1xuICAgICAgICB2YXIgYjIgPSB0aGlzLmV5Lng7XG4gICAgICAgIHZhciBjMiA9IHRoaXMuZXgueTtcbiAgICAgICAgdmFyIGQyID0gdGhpcy5leS55O1xuICAgICAgICB2YXIgZGV0ID0gYTIgKiBkMiAtIGIyICogYzI7XG4gICAgICAgIGlmIChkZXQgIT09IDApIHtcbiAgICAgICAgICBkZXQgPSAxIC8gZGV0O1xuICAgICAgICB9XG4gICAgICAgIE0uZXgueCA9IGRldCAqIGQyO1xuICAgICAgICBNLmV5LnggPSAtZGV0ICogYjI7XG4gICAgICAgIE0uZXgueiA9IDA7XG4gICAgICAgIE0uZXgueSA9IC1kZXQgKiBjMjtcbiAgICAgICAgTS5leS55ID0gZGV0ICogYTI7XG4gICAgICAgIE0uZXkueiA9IDA7XG4gICAgICAgIE0uZXoueCA9IDA7XG4gICAgICAgIE0uZXoueSA9IDA7XG4gICAgICAgIE0uZXoueiA9IDA7XG4gICAgICB9O1xuICAgICAgTWF0MzMyLnByb3RvdHlwZS5nZXRTeW1JbnZlcnNlMzMgPSBmdW5jdGlvbihNKSB7XG4gICAgICAgIHZhciBkZXQgPSBWZWMzLmRvdCh0aGlzLmV4LCBWZWMzLmNyb3NzKHRoaXMuZXksIHRoaXMuZXopKTtcbiAgICAgICAgaWYgKGRldCAhPT0gMCkge1xuICAgICAgICAgIGRldCA9IDEgLyBkZXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGExMSA9IHRoaXMuZXgueDtcbiAgICAgICAgdmFyIGExMiA9IHRoaXMuZXkueDtcbiAgICAgICAgdmFyIGExMyA9IHRoaXMuZXoueDtcbiAgICAgICAgdmFyIGEyMiA9IHRoaXMuZXkueTtcbiAgICAgICAgdmFyIGEyMyA9IHRoaXMuZXoueTtcbiAgICAgICAgdmFyIGEzMyA9IHRoaXMuZXouejtcbiAgICAgICAgTS5leC54ID0gZGV0ICogKGEyMiAqIGEzMyAtIGEyMyAqIGEyMyk7XG4gICAgICAgIE0uZXgueSA9IGRldCAqIChhMTMgKiBhMjMgLSBhMTIgKiBhMzMpO1xuICAgICAgICBNLmV4LnogPSBkZXQgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKTtcbiAgICAgICAgTS5leS54ID0gTS5leC55O1xuICAgICAgICBNLmV5LnkgPSBkZXQgKiAoYTExICogYTMzIC0gYTEzICogYTEzKTtcbiAgICAgICAgTS5leS56ID0gZGV0ICogKGExMyAqIGExMiAtIGExMSAqIGEyMyk7XG4gICAgICAgIE0uZXoueCA9IE0uZXguejtcbiAgICAgICAgTS5lei55ID0gTS5leS56O1xuICAgICAgICBNLmV6LnogPSBkZXQgKiAoYTExICogYTIyIC0gYTEyICogYTEyKTtcbiAgICAgIH07XG4gICAgICBNYXQzMzIubXVsID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIGlmIChiMiAmJiBcInpcIiBpbiBiMiAmJiBcInlcIiBpbiBiMiAmJiBcInhcIiBpbiBiMikge1xuICAgICAgICAgIHZhciB4MiA9IGEyLmV4LnggKiBiMi54ICsgYTIuZXkueCAqIGIyLnkgKyBhMi5lei54ICogYjIuejtcbiAgICAgICAgICB2YXIgeSA9IGEyLmV4LnkgKiBiMi54ICsgYTIuZXkueSAqIGIyLnkgKyBhMi5lei55ICogYjIuejtcbiAgICAgICAgICB2YXIgeiA9IGEyLmV4LnogKiBiMi54ICsgYTIuZXkueiAqIGIyLnkgKyBhMi5lei56ICogYjIuejtcbiAgICAgICAgICByZXR1cm4gbmV3IFZlYzMoeDIsIHksIHopO1xuICAgICAgICB9IGVsc2UgaWYgKGIyICYmIFwieVwiIGluIGIyICYmIFwieFwiIGluIGIyKSB7XG4gICAgICAgICAgdmFyIHgyID0gYTIuZXgueCAqIGIyLnggKyBhMi5leS54ICogYjIueTtcbiAgICAgICAgICB2YXIgeSA9IGEyLmV4LnkgKiBiMi54ICsgYTIuZXkueSAqIGIyLnk7XG4gICAgICAgICAgcmV0dXJuIFZlYzIubmVvKHgyLCB5KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIE1hdDMzMi5tdWxWZWMzID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIHZhciB4MiA9IGEyLmV4LnggKiBiMi54ICsgYTIuZXkueCAqIGIyLnkgKyBhMi5lei54ICogYjIuejtcbiAgICAgICAgdmFyIHkgPSBhMi5leC55ICogYjIueCArIGEyLmV5LnkgKiBiMi55ICsgYTIuZXoueSAqIGIyLno7XG4gICAgICAgIHZhciB6ID0gYTIuZXgueiAqIGIyLnggKyBhMi5leS56ICogYjIueSArIGEyLmV6LnogKiBiMi56O1xuICAgICAgICByZXR1cm4gbmV3IFZlYzMoeDIsIHksIHopO1xuICAgICAgfTtcbiAgICAgIE1hdDMzMi5tdWxWZWMyID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIHZhciB4MiA9IGEyLmV4LnggKiBiMi54ICsgYTIuZXkueCAqIGIyLnk7XG4gICAgICAgIHZhciB5ID0gYTIuZXgueSAqIGIyLnggKyBhMi5leS55ICogYjIueTtcbiAgICAgICAgcmV0dXJuIFZlYzIubmVvKHgyLCB5KTtcbiAgICAgIH07XG4gICAgICBNYXQzMzIuYWRkID0gZnVuY3Rpb24oYTIsIGIyKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWF0MzMyKFZlYzMuYWRkKGEyLmV4LCBiMi5leCksIFZlYzMuYWRkKGEyLmV5LCBiMi5leSksIFZlYzMuYWRkKGEyLmV6LCBiMi5leikpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBNYXQzMzI7XG4gICAgfSgpXG4gICk7XG4gIHZhciBtYXRoX2FicyQ0ID0gTWF0aC5hYnM7XG4gIHZhciBMaW1pdFN0YXRlJDI7XG4gIChmdW5jdGlvbihMaW1pdFN0YXRlMikge1xuICAgIExpbWl0U3RhdGUyW0xpbWl0U3RhdGUyW1wiaW5hY3RpdmVMaW1pdFwiXSA9IDBdID0gXCJpbmFjdGl2ZUxpbWl0XCI7XG4gICAgTGltaXRTdGF0ZTJbTGltaXRTdGF0ZTJbXCJhdExvd2VyTGltaXRcIl0gPSAxXSA9IFwiYXRMb3dlckxpbWl0XCI7XG4gICAgTGltaXRTdGF0ZTJbTGltaXRTdGF0ZTJbXCJhdFVwcGVyTGltaXRcIl0gPSAyXSA9IFwiYXRVcHBlckxpbWl0XCI7XG4gICAgTGltaXRTdGF0ZTJbTGltaXRTdGF0ZTJbXCJlcXVhbExpbWl0c1wiXSA9IDNdID0gXCJlcXVhbExpbWl0c1wiO1xuICB9KShMaW1pdFN0YXRlJDIgfHwgKExpbWl0U3RhdGUkMiA9IHt9KSk7XG4gIHZhciBERUZBVUxUUyQ4ID0ge1xuICAgIGxvd2VyQW5nbGU6IDAsXG4gICAgdXBwZXJBbmdsZTogMCxcbiAgICBtYXhNb3RvclRvcnF1ZTogMCxcbiAgICBtb3RvclNwZWVkOiAwLFxuICAgIGVuYWJsZUxpbWl0OiBmYWxzZSxcbiAgICBlbmFibGVNb3RvcjogZmFsc2VcbiAgfTtcbiAgdmFyIFJldm9sdXRlSm9pbnQgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKFJldm9sdXRlSm9pbnQyLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gUmV2b2x1dGVKb2ludDIoZGVmLCBib2R5QSwgYm9keUIsIGFuY2hvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EyLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgICAgIGlmICghKF90aGlzIGluc3RhbmNlb2YgUmV2b2x1dGVKb2ludDIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBSZXZvbHV0ZUpvaW50MihkZWYsIGJvZHlBLCBib2R5QiwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICBkZWYgPSBkZWYgIT09IG51bGwgJiYgZGVmICE9PSB2b2lkIDAgPyBkZWYgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZWYsIGJvZHlBLCBib2R5QikgfHwgdGhpcztcbiAgICAgICAgYm9keUEgPSBfdGhpcy5tX2JvZHlBO1xuICAgICAgICBib2R5QiA9IF90aGlzLm1fYm9keUI7XG4gICAgICAgIF90aGlzLm1fbWFzcyA9IG5ldyBNYXQzMygpO1xuICAgICAgICBfdGhpcy5tX2xpbWl0U3RhdGUgPSBMaW1pdFN0YXRlJDIuaW5hY3RpdmVMaW1pdDtcbiAgICAgICAgX3RoaXMubV90eXBlID0gUmV2b2x1dGVKb2ludDIuVFlQRTtcbiAgICAgICAgaWYgKFZlYzIuaXNWYWxpZChhbmNob3IpKSB7XG4gICAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckEgPSBib2R5QS5nZXRMb2NhbFBvaW50KGFuY2hvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoVmVjMi5pc1ZhbGlkKGRlZi5sb2NhbEFuY2hvckEpKSB7XG4gICAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckEgPSBWZWMyLmNsb25lKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLm1fbG9jYWxBbmNob3JBID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFZlYzIuaXNWYWxpZChhbmNob3IpKSB7XG4gICAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckIgPSBib2R5Qi5nZXRMb2NhbFBvaW50KGFuY2hvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoVmVjMi5pc1ZhbGlkKGRlZi5sb2NhbEFuY2hvckIpKSB7XG4gICAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckIgPSBWZWMyLmNsb25lKGRlZi5sb2NhbEFuY2hvckIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLm1fbG9jYWxBbmNob3JCID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYucmVmZXJlbmNlQW5nbGUpKSB7XG4gICAgICAgICAgX3RoaXMubV9yZWZlcmVuY2VBbmdsZSA9IGRlZi5yZWZlcmVuY2VBbmdsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpcy5tX3JlZmVyZW5jZUFuZ2xlID0gYm9keUIuZ2V0QW5nbGUoKSAtIGJvZHlBLmdldEFuZ2xlKCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMubV9pbXB1bHNlID0gbmV3IFZlYzMoKTtcbiAgICAgICAgX3RoaXMubV9tb3RvckltcHVsc2UgPSAwO1xuICAgICAgICBfdGhpcy5tX2xvd2VyQW5nbGUgPSAoX2EyID0gZGVmLmxvd2VyQW5nbGUpICE9PSBudWxsICYmIF9hMiAhPT0gdm9pZCAwID8gX2EyIDogREVGQVVMVFMkOC5sb3dlckFuZ2xlO1xuICAgICAgICBfdGhpcy5tX3VwcGVyQW5nbGUgPSAoX2IgPSBkZWYudXBwZXJBbmdsZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogREVGQVVMVFMkOC51cHBlckFuZ2xlO1xuICAgICAgICBfdGhpcy5tX21heE1vdG9yVG9ycXVlID0gKF9jID0gZGVmLm1heE1vdG9yVG9ycXVlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBERUZBVUxUUyQ4Lm1heE1vdG9yVG9ycXVlO1xuICAgICAgICBfdGhpcy5tX21vdG9yU3BlZWQgPSAoX2QgPSBkZWYubW90b3JTcGVlZCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogREVGQVVMVFMkOC5tb3RvclNwZWVkO1xuICAgICAgICBfdGhpcy5tX2VuYWJsZUxpbWl0ID0gKF9lID0gZGVmLmVuYWJsZUxpbWl0KSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBERUZBVUxUUyQ4LmVuYWJsZUxpbWl0O1xuICAgICAgICBfdGhpcy5tX2VuYWJsZU1vdG9yID0gKF9mID0gZGVmLmVuYWJsZU1vdG9yKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBERUZBVUxUUyQ4LmVuYWJsZU1vdG9yO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IHRoaXMubV90eXBlLFxuICAgICAgICAgIGJvZHlBOiB0aGlzLm1fYm9keUEsXG4gICAgICAgICAgYm9keUI6IHRoaXMubV9ib2R5QixcbiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkOiB0aGlzLm1fY29sbGlkZUNvbm5lY3RlZCxcbiAgICAgICAgICBsb3dlckFuZ2xlOiB0aGlzLm1fbG93ZXJBbmdsZSxcbiAgICAgICAgICB1cHBlckFuZ2xlOiB0aGlzLm1fdXBwZXJBbmdsZSxcbiAgICAgICAgICBtYXhNb3RvclRvcnF1ZTogdGhpcy5tX21heE1vdG9yVG9ycXVlLFxuICAgICAgICAgIG1vdG9yU3BlZWQ6IHRoaXMubV9tb3RvclNwZWVkLFxuICAgICAgICAgIGVuYWJsZUxpbWl0OiB0aGlzLm1fZW5hYmxlTGltaXQsXG4gICAgICAgICAgZW5hYmxlTW90b3I6IHRoaXMubV9lbmFibGVNb3RvcixcbiAgICAgICAgICBsb2NhbEFuY2hvckE6IHRoaXMubV9sb2NhbEFuY2hvckEsXG4gICAgICAgICAgbG9jYWxBbmNob3JCOiB0aGlzLm1fbG9jYWxBbmNob3JCLFxuICAgICAgICAgIHJlZmVyZW5jZUFuZ2xlOiB0aGlzLm1fcmVmZXJlbmNlQW5nbGVcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCB3b3JsZCwgcmVzdG9yZSkge1xuICAgICAgICBkYXRhID0gX19hc3NpZ24oe30sIGRhdGEpO1xuICAgICAgICBkYXRhLmJvZHlBID0gcmVzdG9yZShCb2R5LCBkYXRhLmJvZHlBLCB3b3JsZCk7XG4gICAgICAgIGRhdGEuYm9keUIgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUIsIHdvcmxkKTtcbiAgICAgICAgdmFyIGpvaW50ID0gbmV3IFJldm9sdXRlSm9pbnQyKGRhdGEpO1xuICAgICAgICByZXR1cm4gam9pbnQ7XG4gICAgICB9O1xuICAgICAgUmV2b2x1dGVKb2ludDIucHJvdG90eXBlLl9yZXNldCA9IGZ1bmN0aW9uKGRlZikge1xuICAgICAgICBpZiAoZGVmLmFuY2hvckEpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JBLnNldFZlYzIodGhpcy5tX2JvZHlBLmdldExvY2FsUG9pbnQoZGVmLmFuY2hvckEpKTtcbiAgICAgICAgfSBlbHNlIGlmIChkZWYubG9jYWxBbmNob3JBKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5zZXRWZWMyKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuYW5jaG9yQikge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckIuc2V0VmVjMih0aGlzLm1fYm9keUIuZ2V0TG9jYWxQb2ludChkZWYuYW5jaG9yQikpO1xuICAgICAgICB9IGVsc2UgaWYgKGRlZi5sb2NhbEFuY2hvckIpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JCLnNldFZlYzIoZGVmLmxvY2FsQW5jaG9yQik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYucmVmZXJlbmNlQW5nbGUpKSB7XG4gICAgICAgICAgdGhpcy5tX3JlZmVyZW5jZUFuZ2xlID0gZGVmLnJlZmVyZW5jZUFuZ2xlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZW5hYmxlTGltaXQgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHRoaXMubV9lbmFibGVMaW1pdCA9IGRlZi5lbmFibGVMaW1pdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5sb3dlckFuZ2xlKSkge1xuICAgICAgICAgIHRoaXMubV9sb3dlckFuZ2xlID0gZGVmLmxvd2VyQW5nbGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYudXBwZXJBbmdsZSkpIHtcbiAgICAgICAgICB0aGlzLm1fdXBwZXJBbmdsZSA9IGRlZi51cHBlckFuZ2xlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLm1heE1vdG9yVG9ycXVlKSkge1xuICAgICAgICAgIHRoaXMubV9tYXhNb3RvclRvcnF1ZSA9IGRlZi5tYXhNb3RvclRvcnF1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5tb3RvclNwZWVkKSkge1xuICAgICAgICAgIHRoaXMubV9tb3RvclNwZWVkID0gZGVmLm1vdG9yU3BlZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5lbmFibGVNb3RvciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZGVmLmVuYWJsZU1vdG9yO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgUmV2b2x1dGVKb2ludDIucHJvdG90eXBlLmdldExvY2FsQW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2xvY2FsQW5jaG9yQTtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuZ2V0TG9jYWxBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JCO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5nZXRSZWZlcmVuY2VBbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5nZXRKb2ludEFuZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICAgICAgdmFyIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgICAgICByZXR1cm4gYkIubV9zd2VlcC5hIC0gYkEubV9zd2VlcC5hIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5nZXRKb2ludFNwZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICAgICAgdmFyIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgICAgICByZXR1cm4gYkIubV9hbmd1bGFyVmVsb2NpdHkgLSBiQS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuaXNNb3RvckVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9lbmFibGVNb3RvcjtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuZW5hYmxlTW90b3IgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgICAgIGlmIChmbGFnID09IHRoaXMubV9lbmFibGVNb3RvcilcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMubV9ib2R5QS5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB0aGlzLm1fZW5hYmxlTW90b3IgPSBmbGFnO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5nZXRNb3RvclRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgICAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX21vdG9ySW1wdWxzZTtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuc2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKHNwZWVkKSB7XG4gICAgICAgIGlmIChzcGVlZCA9PSB0aGlzLm1fbW90b3JTcGVlZClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMubV9ib2R5QS5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB0aGlzLm1fbW90b3JTcGVlZCA9IHNwZWVkO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5nZXRNb3RvclNwZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbW90b3JTcGVlZDtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuc2V0TWF4TW90b3JUb3JxdWUgPSBmdW5jdGlvbih0b3JxdWUpIHtcbiAgICAgICAgaWYgKHRvcnF1ZSA9PSB0aGlzLm1fbWF4TW90b3JUb3JxdWUpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm1fYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgdGhpcy5tX21heE1vdG9yVG9ycXVlID0gdG9ycXVlO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5nZXRNYXhNb3RvclRvcnF1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX21heE1vdG9yVG9ycXVlO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5pc0xpbWl0RW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2VuYWJsZUxpbWl0O1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5lbmFibGVMaW1pdCA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICAgICAgaWYgKGZsYWcgIT0gdGhpcy5tX2VuYWJsZUxpbWl0KSB7XG4gICAgICAgICAgdGhpcy5tX2JvZHlBLnNldEF3YWtlKHRydWUpO1xuICAgICAgICAgIHRoaXMubV9ib2R5Qi5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgICB0aGlzLm1fZW5hYmxlTGltaXQgPSBmbGFnO1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSAwO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgUmV2b2x1dGVKb2ludDIucHJvdG90eXBlLmdldExvd2VyTGltaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sb3dlckFuZ2xlO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5nZXRVcHBlckxpbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fdXBwZXJBbmdsZTtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuc2V0TGltaXRzID0gZnVuY3Rpb24obG93ZXIsIHVwcGVyKSB7XG4gICAgICAgIGlmIChsb3dlciAhPSB0aGlzLm1fbG93ZXJBbmdsZSB8fCB1cHBlciAhPSB0aGlzLm1fdXBwZXJBbmdsZSkge1xuICAgICAgICAgIHRoaXMubV9ib2R5QS5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgICB0aGlzLm1fYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IDA7XG4gICAgICAgICAgdGhpcy5tX2xvd2VyQW5nbGUgPSBsb3dlcjtcbiAgICAgICAgICB0aGlzLm1fdXBwZXJBbmdsZSA9IHVwcGVyO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgUmV2b2x1dGVKb2ludDIucHJvdG90eXBlLmdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5QS5nZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckEpO1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUIuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuZ2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgICAgICByZXR1cm4gVmVjMi5uZW8odGhpcy5tX2ltcHVsc2UueCwgdGhpcy5tX2ltcHVsc2UueSkubXVsKGludl9kdCk7XG4gICAgICB9O1xuICAgICAgUmV2b2x1dGVKb2ludDIucHJvdG90eXBlLmdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS56O1xuICAgICAgfTtcbiAgICAgIFJldm9sdXRlSm9pbnQyLnByb3RvdHlwZS5pbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdGhpcy5tX2xvY2FsQ2VudGVyQSA9IHRoaXMubV9ib2R5QS5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgICB0aGlzLm1fbG9jYWxDZW50ZXJCID0gdGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZJQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XG4gICAgICAgIHRoaXMubV9pbnZJQiA9IHRoaXMubV9ib2R5Qi5tX2ludkk7XG4gICAgICAgIHZhciBhQSA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciB2QTIgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0EgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB0aGlzLm1fckEgPSBSb3QubXVsVmVjMihxQSwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQSwgdGhpcy5tX2xvY2FsQ2VudGVyQSkpO1xuICAgICAgICB0aGlzLm1fckIgPSBSb3QubXVsVmVjMihxQiwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQikpO1xuICAgICAgICB2YXIgbUEgPSB0aGlzLm1faW52TWFzc0E7XG4gICAgICAgIHZhciBtQiA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICAgICAgdmFyIGlBID0gdGhpcy5tX2ludklBO1xuICAgICAgICB2YXIgaUIgPSB0aGlzLm1faW52SUI7XG4gICAgICAgIHZhciBmaXhlZFJvdGF0aW9uID0gaUEgKyBpQiA9PT0gMDtcbiAgICAgICAgdGhpcy5tX21hc3MuZXgueCA9IG1BICsgbUIgKyB0aGlzLm1fckEueSAqIHRoaXMubV9yQS55ICogaUEgKyB0aGlzLm1fckIueSAqIHRoaXMubV9yQi55ICogaUI7XG4gICAgICAgIHRoaXMubV9tYXNzLmV5LnggPSAtdGhpcy5tX3JBLnkgKiB0aGlzLm1fckEueCAqIGlBIC0gdGhpcy5tX3JCLnkgKiB0aGlzLm1fckIueCAqIGlCO1xuICAgICAgICB0aGlzLm1fbWFzcy5lei54ID0gLXRoaXMubV9yQS55ICogaUEgLSB0aGlzLm1fckIueSAqIGlCO1xuICAgICAgICB0aGlzLm1fbWFzcy5leC55ID0gdGhpcy5tX21hc3MuZXkueDtcbiAgICAgICAgdGhpcy5tX21hc3MuZXkueSA9IG1BICsgbUIgKyB0aGlzLm1fckEueCAqIHRoaXMubV9yQS54ICogaUEgKyB0aGlzLm1fckIueCAqIHRoaXMubV9yQi54ICogaUI7XG4gICAgICAgIHRoaXMubV9tYXNzLmV6LnkgPSB0aGlzLm1fckEueCAqIGlBICsgdGhpcy5tX3JCLnggKiBpQjtcbiAgICAgICAgdGhpcy5tX21hc3MuZXgueiA9IHRoaXMubV9tYXNzLmV6Lng7XG4gICAgICAgIHRoaXMubV9tYXNzLmV5LnogPSB0aGlzLm1fbWFzcy5lei55O1xuICAgICAgICB0aGlzLm1fbWFzcy5lei56ID0gaUEgKyBpQjtcbiAgICAgICAgdGhpcy5tX21vdG9yTWFzcyA9IGlBICsgaUI7XG4gICAgICAgIGlmICh0aGlzLm1fbW90b3JNYXNzID4gMCkge1xuICAgICAgICAgIHRoaXMubV9tb3Rvck1hc3MgPSAxIC8gdGhpcy5tX21vdG9yTWFzcztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yID09IGZhbHNlIHx8IGZpeGVkUm90YXRpb24pIHtcbiAgICAgICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0ICYmIGZpeGVkUm90YXRpb24gPT0gZmFsc2UpIHtcbiAgICAgICAgICB2YXIgam9pbnRBbmdsZSA9IGFCIC0gYUEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG4gICAgICAgICAgaWYgKG1hdGhfYWJzJDQodGhpcy5tX3VwcGVyQW5nbGUgLSB0aGlzLm1fbG93ZXJBbmdsZSkgPCAyICogU2V0dGluZ3NJbnRlcm5hbC5hbmd1bGFyU2xvcCkge1xuICAgICAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBMaW1pdFN0YXRlJDIuZXF1YWxMaW1pdHM7XG4gICAgICAgICAgfSBlbHNlIGlmIChqb2ludEFuZ2xlIDw9IHRoaXMubV9sb3dlckFuZ2xlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUgIT0gTGltaXRTdGF0ZSQyLmF0TG93ZXJMaW1pdCkge1xuICAgICAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gTGltaXRTdGF0ZSQyLmF0TG93ZXJMaW1pdDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGpvaW50QW5nbGUgPj0gdGhpcy5tX3VwcGVyQW5nbGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSAhPSBMaW1pdFN0YXRlJDIuYXRVcHBlckxpbWl0KSB7XG4gICAgICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBMaW1pdFN0YXRlJDIuYXRVcHBlckxpbWl0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IExpbWl0U3RhdGUkMi5pbmFjdGl2ZUxpbWl0O1xuICAgICAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gTGltaXRTdGF0ZSQyLmluYWN0aXZlTGltaXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UubXVsKHN0ZXAuZHRSYXRpbyk7XG4gICAgICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICAgICAgdmFyIFAzID0gVmVjMi5uZW8odGhpcy5tX2ltcHVsc2UueCwgdGhpcy5tX2ltcHVsc2UueSk7XG4gICAgICAgICAgdkEyLnN1Yk11bChtQSwgUDMpO1xuICAgICAgICAgIHdBIC09IGlBICogKFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckEsIFAzKSArIHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS56KTtcbiAgICAgICAgICB2QjIuYWRkTXVsKG1CLCBQMyk7XG4gICAgICAgICAgd0IgKz0gaUIgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgUDMpICsgdGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnNldFplcm8oKTtcbiAgICAgICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52ID0gdkEyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYgPSB2QjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBSZXZvbHV0ZUpvaW50Mi5wcm90b3R5cGUuc29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgdkEyID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdBID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHZCMiA9IHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QiA9IHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgICB2YXIgaUEgPSB0aGlzLm1faW52SUE7XG4gICAgICAgIHZhciBpQiA9IHRoaXMubV9pbnZJQjtcbiAgICAgICAgdmFyIGZpeGVkUm90YXRpb24gPSBpQSArIGlCID09PSAwO1xuICAgICAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yICYmIHRoaXMubV9saW1pdFN0YXRlICE9IExpbWl0U3RhdGUkMi5lcXVhbExpbWl0cyAmJiBmaXhlZFJvdGF0aW9uID09IGZhbHNlKSB7XG4gICAgICAgICAgdmFyIENkb3QgPSB3QiAtIHdBIC0gdGhpcy5tX21vdG9yU3BlZWQ7XG4gICAgICAgICAgdmFyIGltcHVsc2UgPSAtdGhpcy5tX21vdG9yTWFzcyAqIENkb3Q7XG4gICAgICAgICAgdmFyIG9sZEltcHVsc2UgPSB0aGlzLm1fbW90b3JJbXB1bHNlO1xuICAgICAgICAgIHZhciBtYXhJbXB1bHNlID0gc3RlcC5kdCAqIHRoaXMubV9tYXhNb3RvclRvcnF1ZTtcbiAgICAgICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gY2xhbXAodGhpcy5tX21vdG9ySW1wdWxzZSArIGltcHVsc2UsIC1tYXhJbXB1bHNlLCBtYXhJbXB1bHNlKTtcbiAgICAgICAgICBpbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICAgICAgd0EgLT0gaUEgKiBpbXB1bHNlO1xuICAgICAgICAgIHdCICs9IGlCICogaW1wdWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0ICYmIHRoaXMubV9saW1pdFN0YXRlICE9IExpbWl0U3RhdGUkMi5pbmFjdGl2ZUxpbWl0ICYmIGZpeGVkUm90YXRpb24gPT0gZmFsc2UpIHtcbiAgICAgICAgICB2YXIgQ2RvdDEgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgICBDZG90MS5hZGRDb21iaW5lKDEsIHZCMiwgMSwgVmVjMi5jcm9zc051bVZlYzIod0IsIHRoaXMubV9yQikpO1xuICAgICAgICAgIENkb3QxLnN1YkNvbWJpbmUoMSwgdkEyLCAxLCBWZWMyLmNyb3NzTnVtVmVjMih3QSwgdGhpcy5tX3JBKSk7XG4gICAgICAgICAgdmFyIENkb3QyID0gd0IgLSB3QTtcbiAgICAgICAgICB2YXIgQ2RvdCA9IG5ldyBWZWMzKENkb3QxLngsIENkb3QxLnksIENkb3QyKTtcbiAgICAgICAgICB2YXIgaW1wdWxzZSA9IFZlYzMubmVnKHRoaXMubV9tYXNzLnNvbHZlMzMoQ2RvdCkpO1xuICAgICAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PSBMaW1pdFN0YXRlJDIuZXF1YWxMaW1pdHMpIHtcbiAgICAgICAgICAgIHRoaXMubV9pbXB1bHNlLmFkZChpbXB1bHNlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubV9saW1pdFN0YXRlID09IExpbWl0U3RhdGUkMi5hdExvd2VyTGltaXQpIHtcbiAgICAgICAgICAgIHZhciBuZXdJbXB1bHNlID0gdGhpcy5tX2ltcHVsc2UueiArIGltcHVsc2UuejtcbiAgICAgICAgICAgIGlmIChuZXdJbXB1bHNlIDwgMCkge1xuICAgICAgICAgICAgICB2YXIgcmhzID0gVmVjMi5jb21iaW5lKC0xLCBDZG90MSwgdGhpcy5tX2ltcHVsc2UueiwgVmVjMi5uZW8odGhpcy5tX21hc3MuZXoueCwgdGhpcy5tX21hc3MuZXoueSkpO1xuICAgICAgICAgICAgICB2YXIgcmVkdWNlZCA9IHRoaXMubV9tYXNzLnNvbHZlMjIocmhzKTtcbiAgICAgICAgICAgICAgaW1wdWxzZS54ID0gcmVkdWNlZC54O1xuICAgICAgICAgICAgICBpbXB1bHNlLnkgPSByZWR1Y2VkLnk7XG4gICAgICAgICAgICAgIGltcHVsc2UueiA9IC10aGlzLm1faW1wdWxzZS56O1xuICAgICAgICAgICAgICB0aGlzLm1faW1wdWxzZS54ICs9IHJlZHVjZWQueDtcbiAgICAgICAgICAgICAgdGhpcy5tX2ltcHVsc2UueSArPSByZWR1Y2VkLnk7XG4gICAgICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5tX2ltcHVsc2UuYWRkKGltcHVsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT0gTGltaXRTdGF0ZSQyLmF0VXBwZXJMaW1pdCkge1xuICAgICAgICAgICAgdmFyIG5ld0ltcHVsc2UgPSB0aGlzLm1faW1wdWxzZS56ICsgaW1wdWxzZS56O1xuICAgICAgICAgICAgaWYgKG5ld0ltcHVsc2UgPiAwKSB7XG4gICAgICAgICAgICAgIHZhciByaHMgPSBWZWMyLmNvbWJpbmUoLTEsIENkb3QxLCB0aGlzLm1faW1wdWxzZS56LCBWZWMyLm5lbyh0aGlzLm1fbWFzcy5lei54LCB0aGlzLm1fbWFzcy5lei55KSk7XG4gICAgICAgICAgICAgIHZhciByZWR1Y2VkID0gdGhpcy5tX21hc3Muc29sdmUyMihyaHMpO1xuICAgICAgICAgICAgICBpbXB1bHNlLnggPSByZWR1Y2VkLng7XG4gICAgICAgICAgICAgIGltcHVsc2UueSA9IHJlZHVjZWQueTtcbiAgICAgICAgICAgICAgaW1wdWxzZS56ID0gLXRoaXMubV9pbXB1bHNlLno7XG4gICAgICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gcmVkdWNlZC54O1xuICAgICAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ICs9IHJlZHVjZWQueTtcbiAgICAgICAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLm1faW1wdWxzZS5hZGQoaW1wdWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBQMyA9IFZlYzIubmVvKGltcHVsc2UueCwgaW1wdWxzZS55KTtcbiAgICAgICAgICB2QTIuc3ViTXVsKG1BLCBQMyk7XG4gICAgICAgICAgd0EgLT0gaUEgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgUDMpICsgaW1wdWxzZS56KTtcbiAgICAgICAgICB2QjIuYWRkTXVsKG1CLCBQMyk7XG4gICAgICAgICAgd0IgKz0gaUIgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgUDMpICsgaW1wdWxzZS56KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgQ2RvdCA9IFZlYzIuemVybygpO1xuICAgICAgICAgIENkb3QuYWRkQ29tYmluZSgxLCB2QjIsIDEsIFZlYzIuY3Jvc3NOdW1WZWMyKHdCLCB0aGlzLm1fckIpKTtcbiAgICAgICAgICBDZG90LnN1YkNvbWJpbmUoMSwgdkEyLCAxLCBWZWMyLmNyb3NzTnVtVmVjMih3QSwgdGhpcy5tX3JBKSk7XG4gICAgICAgICAgdmFyIGltcHVsc2UgPSB0aGlzLm1fbWFzcy5zb2x2ZTIyKFZlYzIubmVnKENkb3QpKTtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS54ICs9IGltcHVsc2UueDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ICs9IGltcHVsc2UueTtcbiAgICAgICAgICB2QTIuc3ViTXVsKG1BLCBpbXB1bHNlKTtcbiAgICAgICAgICB3QSAtPSBpQSAqIFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckEsIGltcHVsc2UpO1xuICAgICAgICAgIHZCMi5hZGRNdWwobUIsIGltcHVsc2UpO1xuICAgICAgICAgIHdCICs9IGlCICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgaW1wdWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudiA9IHZBMjtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudyA9IHdBO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52ID0gdkIyO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53ID0gd0I7XG4gICAgICB9O1xuICAgICAgUmV2b2x1dGVKb2ludDIucHJvdG90eXBlLnNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdmFyIGNBMiA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmM7XG4gICAgICAgIHZhciBhQSA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciBjQjIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgcUEgPSBSb3QubmVvKGFBKTtcbiAgICAgICAgdmFyIHFCID0gUm90Lm5lbyhhQik7XG4gICAgICAgIHZhciBhbmd1bGFyRXJyb3IgPSAwO1xuICAgICAgICB2YXIgcG9zaXRpb25FcnJvciA9IDA7XG4gICAgICAgIHZhciBmaXhlZFJvdGF0aW9uID0gdGhpcy5tX2ludklBICsgdGhpcy5tX2ludklCID09IDA7XG4gICAgICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQgJiYgdGhpcy5tX2xpbWl0U3RhdGUgIT0gTGltaXRTdGF0ZSQyLmluYWN0aXZlTGltaXQgJiYgZml4ZWRSb3RhdGlvbiA9PSBmYWxzZSkge1xuICAgICAgICAgIHZhciBhbmdsZSA9IGFCIC0gYUEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG4gICAgICAgICAgdmFyIGxpbWl0SW1wdWxzZSA9IDA7XG4gICAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlID09IExpbWl0U3RhdGUkMi5lcXVhbExpbWl0cykge1xuICAgICAgICAgICAgdmFyIEMgPSBjbGFtcChhbmdsZSAtIHRoaXMubV9sb3dlckFuZ2xlLCAtU2V0dGluZ3NJbnRlcm5hbC5tYXhBbmd1bGFyQ29ycmVjdGlvbiwgU2V0dGluZ3NJbnRlcm5hbC5tYXhBbmd1bGFyQ29ycmVjdGlvbik7XG4gICAgICAgICAgICBsaW1pdEltcHVsc2UgPSAtdGhpcy5tX21vdG9yTWFzcyAqIEM7XG4gICAgICAgICAgICBhbmd1bGFyRXJyb3IgPSBtYXRoX2FicyQ0KEMpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT0gTGltaXRTdGF0ZSQyLmF0TG93ZXJMaW1pdCkge1xuICAgICAgICAgICAgdmFyIEMgPSBhbmdsZSAtIHRoaXMubV9sb3dlckFuZ2xlO1xuICAgICAgICAgICAgYW5ndWxhckVycm9yID0gLUM7XG4gICAgICAgICAgICBDID0gY2xhbXAoQyArIFNldHRpbmdzSW50ZXJuYWwuYW5ndWxhclNsb3AsIC1TZXR0aW5nc0ludGVybmFsLm1heEFuZ3VsYXJDb3JyZWN0aW9uLCAwKTtcbiAgICAgICAgICAgIGxpbWl0SW1wdWxzZSA9IC10aGlzLm1fbW90b3JNYXNzICogQztcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubV9saW1pdFN0YXRlID09IExpbWl0U3RhdGUkMi5hdFVwcGVyTGltaXQpIHtcbiAgICAgICAgICAgIHZhciBDID0gYW5nbGUgLSB0aGlzLm1fdXBwZXJBbmdsZTtcbiAgICAgICAgICAgIGFuZ3VsYXJFcnJvciA9IEM7XG4gICAgICAgICAgICBDID0gY2xhbXAoQyAtIFNldHRpbmdzSW50ZXJuYWwuYW5ndWxhclNsb3AsIDAsIFNldHRpbmdzSW50ZXJuYWwubWF4QW5ndWxhckNvcnJlY3Rpb24pO1xuICAgICAgICAgICAgbGltaXRJbXB1bHNlID0gLXRoaXMubV9tb3Rvck1hc3MgKiBDO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhQSAtPSB0aGlzLm1faW52SUEgKiBsaW1pdEltcHVsc2U7XG4gICAgICAgICAgYUIgKz0gdGhpcy5tX2ludklCICogbGltaXRJbXB1bHNlO1xuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICBxQS5zZXRBbmdsZShhQSk7XG4gICAgICAgICAgcUIuc2V0QW5nbGUoYUIpO1xuICAgICAgICAgIHZhciByQTIgPSBSb3QubXVsVmVjMihxQSwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQSwgdGhpcy5tX2xvY2FsQ2VudGVyQSkpO1xuICAgICAgICAgIHZhciByQjIgPSBSb3QubXVsVmVjMihxQiwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQikpO1xuICAgICAgICAgIHZhciBDID0gVmVjMi56ZXJvKCk7XG4gICAgICAgICAgQy5hZGRDb21iaW5lKDEsIGNCMiwgMSwgckIyKTtcbiAgICAgICAgICBDLnN1YkNvbWJpbmUoMSwgY0EyLCAxLCByQTIpO1xuICAgICAgICAgIHBvc2l0aW9uRXJyb3IgPSBDLmxlbmd0aCgpO1xuICAgICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgICAgICB2YXIgbUIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgICAgICAgdmFyIGlBID0gdGhpcy5tX2ludklBO1xuICAgICAgICAgIHZhciBpQiA9IHRoaXMubV9pbnZJQjtcbiAgICAgICAgICB2YXIgSyA9IG5ldyBNYXQyMigpO1xuICAgICAgICAgIEsuZXgueCA9IG1BICsgbUIgKyBpQSAqIHJBMi55ICogckEyLnkgKyBpQiAqIHJCMi55ICogckIyLnk7XG4gICAgICAgICAgSy5leC55ID0gLWlBICogckEyLnggKiByQTIueSAtIGlCICogckIyLnggKiByQjIueTtcbiAgICAgICAgICBLLmV5LnggPSBLLmV4Lnk7XG4gICAgICAgICAgSy5leS55ID0gbUEgKyBtQiArIGlBICogckEyLnggKiByQTIueCArIGlCICogckIyLnggKiByQjIueDtcbiAgICAgICAgICB2YXIgaW1wdWxzZSA9IFZlYzIubmVnKEsuc29sdmUoQykpO1xuICAgICAgICAgIGNBMi5zdWJNdWwobUEsIGltcHVsc2UpO1xuICAgICAgICAgIGFBIC09IGlBICogVmVjMi5jcm9zc1ZlYzJWZWMyKHJBMiwgaW1wdWxzZSk7XG4gICAgICAgICAgY0IyLmFkZE11bChtQiwgaW1wdWxzZSk7XG4gICAgICAgICAgYUIgKz0gaUIgKiBWZWMyLmNyb3NzVmVjMlZlYzIockIyLCBpbXB1bHNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jLnNldFZlYzIoY0EyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYSA9IGFBO1xuICAgICAgICB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jLnNldFZlYzIoY0IyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYSA9IGFCO1xuICAgICAgICByZXR1cm4gcG9zaXRpb25FcnJvciA8PSBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3AgJiYgYW5ndWxhckVycm9yIDw9IFNldHRpbmdzSW50ZXJuYWwuYW5ndWxhclNsb3A7XG4gICAgICB9O1xuICAgICAgUmV2b2x1dGVKb2ludDIuVFlQRSA9IFwicmV2b2x1dGUtam9pbnRcIjtcbiAgICAgIHJldHVybiBSZXZvbHV0ZUpvaW50MjtcbiAgICB9KEpvaW50KVxuICApO1xuICB2YXIgbWF0aF9hYnMkMyA9IE1hdGguYWJzO1xuICB2YXIgbWF0aF9tYXggPSBNYXRoLm1heDtcbiAgdmFyIG1hdGhfbWluJDIgPSBNYXRoLm1pbjtcbiAgdmFyIExpbWl0U3RhdGUkMTtcbiAgKGZ1bmN0aW9uKExpbWl0U3RhdGUyKSB7XG4gICAgTGltaXRTdGF0ZTJbTGltaXRTdGF0ZTJbXCJpbmFjdGl2ZUxpbWl0XCJdID0gMF0gPSBcImluYWN0aXZlTGltaXRcIjtcbiAgICBMaW1pdFN0YXRlMltMaW1pdFN0YXRlMltcImF0TG93ZXJMaW1pdFwiXSA9IDFdID0gXCJhdExvd2VyTGltaXRcIjtcbiAgICBMaW1pdFN0YXRlMltMaW1pdFN0YXRlMltcImF0VXBwZXJMaW1pdFwiXSA9IDJdID0gXCJhdFVwcGVyTGltaXRcIjtcbiAgICBMaW1pdFN0YXRlMltMaW1pdFN0YXRlMltcImVxdWFsTGltaXRzXCJdID0gM10gPSBcImVxdWFsTGltaXRzXCI7XG4gIH0pKExpbWl0U3RhdGUkMSB8fCAoTGltaXRTdGF0ZSQxID0ge30pKTtcbiAgdmFyIERFRkFVTFRTJDcgPSB7XG4gICAgZW5hYmxlTGltaXQ6IGZhbHNlLFxuICAgIGxvd2VyVHJhbnNsYXRpb246IDAsXG4gICAgdXBwZXJUcmFuc2xhdGlvbjogMCxcbiAgICBlbmFibGVNb3RvcjogZmFsc2UsXG4gICAgbWF4TW90b3JGb3JjZTogMCxcbiAgICBtb3RvclNwZWVkOiAwXG4gIH07XG4gIHZhciBQcmlzbWF0aWNKb2ludCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoUHJpc21hdGljSm9pbnQyLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gUHJpc21hdGljSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCBhbmNob3IsIGF4aXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCEoX3RoaXMgaW5zdGFuY2VvZiBQcmlzbWF0aWNKb2ludDIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcmlzbWF0aWNKb2ludDIoZGVmLCBib2R5QSwgYm9keUIsIGFuY2hvciwgYXhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmID0gb3B0aW9ucyhkZWYsIERFRkFVTFRTJDcpO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlZiwgYm9keUEsIGJvZHlCKSB8fCB0aGlzO1xuICAgICAgICBib2R5QSA9IF90aGlzLm1fYm9keUE7XG4gICAgICAgIGJvZHlCID0gX3RoaXMubV9ib2R5QjtcbiAgICAgICAgX3RoaXMubV90eXBlID0gUHJpc21hdGljSm9pbnQyLlRZUEU7XG4gICAgICAgIF90aGlzLm1fbG9jYWxBbmNob3JBID0gVmVjMi5jbG9uZShhbmNob3IgPyBib2R5QS5nZXRMb2NhbFBvaW50KGFuY2hvcikgOiBkZWYubG9jYWxBbmNob3JBIHx8IFZlYzIuemVybygpKTtcbiAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckIgPSBWZWMyLmNsb25lKGFuY2hvciA/IGJvZHlCLmdldExvY2FsUG9pbnQoYW5jaG9yKSA6IGRlZi5sb2NhbEFuY2hvckIgfHwgVmVjMi56ZXJvKCkpO1xuICAgICAgICBfdGhpcy5tX2xvY2FsWEF4aXNBID0gVmVjMi5jbG9uZShheGlzID8gYm9keUEuZ2V0TG9jYWxWZWN0b3IoYXhpcykgOiBkZWYubG9jYWxBeGlzQSB8fCBWZWMyLm5lbygxLCAwKSk7XG4gICAgICAgIF90aGlzLm1fbG9jYWxYQXhpc0Eubm9ybWFsaXplKCk7XG4gICAgICAgIF90aGlzLm1fbG9jYWxZQXhpc0EgPSBWZWMyLmNyb3NzTnVtVmVjMigxLCBfdGhpcy5tX2xvY2FsWEF4aXNBKTtcbiAgICAgICAgX3RoaXMubV9yZWZlcmVuY2VBbmdsZSA9IE51bWJlci5pc0Zpbml0ZShkZWYucmVmZXJlbmNlQW5nbGUpID8gZGVmLnJlZmVyZW5jZUFuZ2xlIDogYm9keUIuZ2V0QW5nbGUoKSAtIGJvZHlBLmdldEFuZ2xlKCk7XG4gICAgICAgIF90aGlzLm1faW1wdWxzZSA9IG5ldyBWZWMzKCk7XG4gICAgICAgIF90aGlzLm1fbW90b3JNYXNzID0gMDtcbiAgICAgICAgX3RoaXMubV9tb3RvckltcHVsc2UgPSAwO1xuICAgICAgICBfdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gPSBkZWYubG93ZXJUcmFuc2xhdGlvbjtcbiAgICAgICAgX3RoaXMubV91cHBlclRyYW5zbGF0aW9uID0gZGVmLnVwcGVyVHJhbnNsYXRpb247XG4gICAgICAgIF90aGlzLm1fbWF4TW90b3JGb3JjZSA9IGRlZi5tYXhNb3RvckZvcmNlO1xuICAgICAgICBfdGhpcy5tX21vdG9yU3BlZWQgPSBkZWYubW90b3JTcGVlZDtcbiAgICAgICAgX3RoaXMubV9lbmFibGVMaW1pdCA9IGRlZi5lbmFibGVMaW1pdDtcbiAgICAgICAgX3RoaXMubV9lbmFibGVNb3RvciA9IGRlZi5lbmFibGVNb3RvcjtcbiAgICAgICAgX3RoaXMubV9saW1pdFN0YXRlID0gTGltaXRTdGF0ZSQxLmluYWN0aXZlTGltaXQ7XG4gICAgICAgIF90aGlzLm1fYXhpcyA9IFZlYzIuemVybygpO1xuICAgICAgICBfdGhpcy5tX3BlcnAgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgX3RoaXMubV9LID0gbmV3IE1hdDMzKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IHRoaXMubV90eXBlLFxuICAgICAgICAgIGJvZHlBOiB0aGlzLm1fYm9keUEsXG4gICAgICAgICAgYm9keUI6IHRoaXMubV9ib2R5QixcbiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkOiB0aGlzLm1fY29sbGlkZUNvbm5lY3RlZCxcbiAgICAgICAgICBsb3dlclRyYW5zbGF0aW9uOiB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbixcbiAgICAgICAgICB1cHBlclRyYW5zbGF0aW9uOiB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbixcbiAgICAgICAgICBtYXhNb3RvckZvcmNlOiB0aGlzLm1fbWF4TW90b3JGb3JjZSxcbiAgICAgICAgICBtb3RvclNwZWVkOiB0aGlzLm1fbW90b3JTcGVlZCxcbiAgICAgICAgICBlbmFibGVMaW1pdDogdGhpcy5tX2VuYWJsZUxpbWl0LFxuICAgICAgICAgIGVuYWJsZU1vdG9yOiB0aGlzLm1fZW5hYmxlTW90b3IsXG4gICAgICAgICAgbG9jYWxBbmNob3JBOiB0aGlzLm1fbG9jYWxBbmNob3JBLFxuICAgICAgICAgIGxvY2FsQW5jaG9yQjogdGhpcy5tX2xvY2FsQW5jaG9yQixcbiAgICAgICAgICBsb2NhbEF4aXNBOiB0aGlzLm1fbG9jYWxYQXhpc0EsXG4gICAgICAgICAgcmVmZXJlbmNlQW5nbGU6IHRoaXMubV9yZWZlcmVuY2VBbmdsZVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCB3b3JsZCwgcmVzdG9yZSkge1xuICAgICAgICBkYXRhID0gX19hc3NpZ24oe30sIGRhdGEpO1xuICAgICAgICBkYXRhLmJvZHlBID0gcmVzdG9yZShCb2R5LCBkYXRhLmJvZHlBLCB3b3JsZCk7XG4gICAgICAgIGRhdGEuYm9keUIgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUIsIHdvcmxkKTtcbiAgICAgICAgZGF0YS5sb2NhbEF4aXNBID0gVmVjMi5jbG9uZShkYXRhLmxvY2FsQXhpc0EpO1xuICAgICAgICB2YXIgam9pbnQgPSBuZXcgUHJpc21hdGljSm9pbnQyKGRhdGEpO1xuICAgICAgICByZXR1cm4gam9pbnQ7XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgaWYgKGRlZi5hbmNob3JBKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5zZXRWZWMyKHRoaXMubV9ib2R5QS5nZXRMb2NhbFBvaW50KGRlZi5hbmNob3JBKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmLmxvY2FsQW5jaG9yQSkge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckEuc2V0VmVjMihkZWYubG9jYWxBbmNob3JBKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmFuY2hvckIpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JCLnNldFZlYzIodGhpcy5tX2JvZHlCLmdldExvY2FsUG9pbnQoZGVmLmFuY2hvckIpKTtcbiAgICAgICAgfSBlbHNlIGlmIChkZWYubG9jYWxBbmNob3JCKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5zZXRWZWMyKGRlZi5sb2NhbEFuY2hvckIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubG9jYWxBeGlzQSkge1xuICAgICAgICAgIHRoaXMubV9sb2NhbFhBeGlzQS5zZXRWZWMyKGRlZi5sb2NhbEF4aXNBKTtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxZQXhpc0Euc2V0VmVjMihWZWMyLmNyb3NzTnVtVmVjMigxLCBkZWYubG9jYWxBeGlzQSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLnJlZmVyZW5jZUFuZ2xlKSkge1xuICAgICAgICAgIHRoaXMubV9yZWZlcmVuY2VBbmdsZSA9IGRlZi5yZWZlcmVuY2VBbmdsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRlZi5lbmFibGVMaW1pdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHRoaXMubV9lbmFibGVMaW1pdCA9ICEhZGVmLmVuYWJsZUxpbWl0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLmxvd2VyVHJhbnNsYXRpb24pKSB7XG4gICAgICAgICAgdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gPSBkZWYubG93ZXJUcmFuc2xhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi51cHBlclRyYW5zbGF0aW9uKSkge1xuICAgICAgICAgIHRoaXMubV91cHBlclRyYW5zbGF0aW9uID0gZGVmLnVwcGVyVHJhbnNsYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkZWYuZW5hYmxlTW90b3IgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICB0aGlzLm1fZW5hYmxlTW90b3IgPSAhIWRlZi5lbmFibGVNb3RvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5tYXhNb3RvckZvcmNlKSkge1xuICAgICAgICAgIHRoaXMubV9tYXhNb3RvckZvcmNlID0gZGVmLm1heE1vdG9yRm9yY2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYubW90b3JTcGVlZCkpIHtcbiAgICAgICAgICB0aGlzLm1fbW90b3JTcGVlZCA9IGRlZi5tb3RvclNwZWVkO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5nZXRMb2NhbEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckE7XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5nZXRMb2NhbEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckI7XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5nZXRMb2NhbEF4aXNBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbG9jYWxYQXhpc0E7XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5nZXRSZWZlcmVuY2VBbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuZ2V0Sm9pbnRUcmFuc2xhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcEEyID0gdGhpcy5tX2JvZHlBLmdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSk7XG4gICAgICAgIHZhciBwQjIgPSB0aGlzLm1fYm9keUIuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgICAgdmFyIGQyID0gVmVjMi5zdWIocEIyLCBwQTIpO1xuICAgICAgICB2YXIgYXhpcyA9IHRoaXMubV9ib2R5QS5nZXRXb3JsZFZlY3Rvcih0aGlzLm1fbG9jYWxYQXhpc0EpO1xuICAgICAgICB2YXIgdHJhbnNsYXRpb24yID0gVmVjMi5kb3QoZDIsIGF4aXMpO1xuICAgICAgICByZXR1cm4gdHJhbnNsYXRpb24yO1xuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuZ2V0Sm9pbnRTcGVlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgICAgIHZhciBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICAgICAgdmFyIHJBMiA9IFJvdC5tdWxWZWMyKGJBLm1feGYucSwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQSwgYkEubV9zd2VlcC5sb2NhbENlbnRlcikpO1xuICAgICAgICB2YXIgckIyID0gUm90Lm11bFZlYzIoYkIubV94Zi5xLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JCLCBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyKSk7XG4gICAgICAgIHZhciBwMSA9IFZlYzIuYWRkKGJBLm1fc3dlZXAuYywgckEyKTtcbiAgICAgICAgdmFyIHAyID0gVmVjMi5hZGQoYkIubV9zd2VlcC5jLCByQjIpO1xuICAgICAgICB2YXIgZDIgPSBWZWMyLnN1YihwMiwgcDEpO1xuICAgICAgICB2YXIgYXhpcyA9IFJvdC5tdWxWZWMyKGJBLm1feGYucSwgdGhpcy5tX2xvY2FsWEF4aXNBKTtcbiAgICAgICAgdmFyIHZBMiA9IGJBLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgICAgIHZhciB2QjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5O1xuICAgICAgICB2YXIgd0EgPSBiQS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICAgICAgdmFyIHdCID0gYkIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICAgIHZhciBzcGVlZCA9IFZlYzIuZG90KGQyLCBWZWMyLmNyb3NzTnVtVmVjMih3QSwgYXhpcykpICsgVmVjMi5kb3QoYXhpcywgVmVjMi5zdWIoVmVjMi5hZGRDcm9zc051bVZlYzIodkIyLCB3QiwgckIyKSwgVmVjMi5hZGRDcm9zc051bVZlYzIodkEyLCB3QSwgckEyKSkpO1xuICAgICAgICByZXR1cm4gc3BlZWQ7XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5pc0xpbWl0RW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2VuYWJsZUxpbWl0O1xuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuZW5hYmxlTGltaXQgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgICAgIGlmIChmbGFnICE9IHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgICAgIHRoaXMubV9ib2R5QS5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgICB0aGlzLm1fYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5tX2VuYWJsZUxpbWl0ID0gZmxhZztcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuZ2V0TG93ZXJMaW1pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb247XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5nZXRVcHBlckxpbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbjtcbiAgICAgIH07XG4gICAgICBQcmlzbWF0aWNKb2ludDIucHJvdG90eXBlLnNldExpbWl0cyA9IGZ1bmN0aW9uKGxvd2VyLCB1cHBlcikge1xuICAgICAgICBpZiAobG93ZXIgIT0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gfHwgdXBwZXIgIT0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgICB0aGlzLm1fYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5tX2JvZHlCLnNldEF3YWtlKHRydWUpO1xuICAgICAgICAgIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uID0gbG93ZXI7XG4gICAgICAgICAgdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gPSB1cHBlcjtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuaXNNb3RvckVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9lbmFibGVNb3RvcjtcbiAgICAgIH07XG4gICAgICBQcmlzbWF0aWNKb2ludDIucHJvdG90eXBlLmVuYWJsZU1vdG9yID0gZnVuY3Rpb24oZmxhZykge1xuICAgICAgICBpZiAoZmxhZyA9PSB0aGlzLm1fZW5hYmxlTW90b3IpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm1fYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZmxhZztcbiAgICAgIH07XG4gICAgICBQcmlzbWF0aWNKb2ludDIucHJvdG90eXBlLnNldE1vdG9yU3BlZWQgPSBmdW5jdGlvbihzcGVlZCkge1xuICAgICAgICBpZiAoc3BlZWQgPT0gdGhpcy5tX21vdG9yU3BlZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm1fYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgdGhpcy5tX21vdG9yU3BlZWQgPSBzcGVlZDtcbiAgICAgIH07XG4gICAgICBQcmlzbWF0aWNKb2ludDIucHJvdG90eXBlLnNldE1heE1vdG9yRm9yY2UgPSBmdW5jdGlvbihmb3JjZSkge1xuICAgICAgICBpZiAoZm9yY2UgPT0gdGhpcy5tX21heE1vdG9yRm9yY2UpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm1fYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgdGhpcy5tX21heE1vdG9yRm9yY2UgPSBmb3JjZTtcbiAgICAgIH07XG4gICAgICBQcmlzbWF0aWNKb2ludDIucHJvdG90eXBlLmdldE1heE1vdG9yRm9yY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9tYXhNb3RvckZvcmNlO1xuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuZ2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX21vdG9yU3BlZWQ7XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5nZXRNb3RvckZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1fbW90b3JJbXB1bHNlO1xuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuZ2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2JvZHlBLmdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSk7XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUIuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgIH07XG4gICAgICBQcmlzbWF0aWNKb2ludDIucHJvdG90eXBlLmdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIuY29tYmluZSh0aGlzLm1faW1wdWxzZS54LCB0aGlzLm1fcGVycCwgdGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnosIHRoaXMubV9heGlzKS5tdWwoaW52X2R0KTtcbiAgICAgIH07XG4gICAgICBQcmlzbWF0aWNKb2ludDIucHJvdG90eXBlLmdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS55O1xuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5wcm90b3R5cGUuaW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHRoaXMubV9sb2NhbENlbnRlckEgPSB0aGlzLm1fYm9keUEubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICAgICAgdGhpcy5tX2xvY2FsQ2VudGVyQiA9IHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgICB0aGlzLm1faW52TWFzc0EgPSB0aGlzLm1fYm9keUEubV9pbnZNYXNzO1xuICAgICAgICB0aGlzLm1faW52TWFzc0IgPSB0aGlzLm1fYm9keUIubV9pbnZNYXNzO1xuICAgICAgICB0aGlzLm1faW52SUEgPSB0aGlzLm1fYm9keUEubV9pbnZJO1xuICAgICAgICB0aGlzLm1faW52SUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xuICAgICAgICB2YXIgY0EyID0gdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFBID0gdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHZBMiA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QSA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBjQjIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB2YXIgckEyID0gUm90Lm11bFZlYzIocUEsIFZlYzIuc3ViKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEpKTtcbiAgICAgICAgdmFyIHJCMiA9IFJvdC5tdWxWZWMyKHFCLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKSk7XG4gICAgICAgIHZhciBkMiA9IFZlYzIuemVybygpO1xuICAgICAgICBkMi5hZGRDb21iaW5lKDEsIGNCMiwgMSwgckIyKTtcbiAgICAgICAgZDIuc3ViQ29tYmluZSgxLCBjQTIsIDEsIHJBMik7XG4gICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgICB2YXIgaUEgPSB0aGlzLm1faW52SUE7XG4gICAgICAgIHZhciBpQiA9IHRoaXMubV9pbnZJQjtcbiAgICAgICAge1xuICAgICAgICAgIHRoaXMubV9heGlzID0gUm90Lm11bFZlYzIocUEsIHRoaXMubV9sb2NhbFhBeGlzQSk7XG4gICAgICAgICAgdGhpcy5tX2ExID0gVmVjMi5jcm9zc1ZlYzJWZWMyKFZlYzIuYWRkKGQyLCByQTIpLCB0aGlzLm1fYXhpcyk7XG4gICAgICAgICAgdGhpcy5tX2EyID0gVmVjMi5jcm9zc1ZlYzJWZWMyKHJCMiwgdGhpcy5tX2F4aXMpO1xuICAgICAgICAgIHRoaXMubV9tb3Rvck1hc3MgPSBtQSArIG1CICsgaUEgKiB0aGlzLm1fYTEgKiB0aGlzLm1fYTEgKyBpQiAqIHRoaXMubV9hMiAqIHRoaXMubV9hMjtcbiAgICAgICAgICBpZiAodGhpcy5tX21vdG9yTWFzcyA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubV9tb3Rvck1hc3MgPSAxIC8gdGhpcy5tX21vdG9yTWFzcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgIHRoaXMubV9wZXJwID0gUm90Lm11bFZlYzIocUEsIHRoaXMubV9sb2NhbFlBeGlzQSk7XG4gICAgICAgICAgdGhpcy5tX3MxID0gVmVjMi5jcm9zc1ZlYzJWZWMyKFZlYzIuYWRkKGQyLCByQTIpLCB0aGlzLm1fcGVycCk7XG4gICAgICAgICAgdGhpcy5tX3MyID0gVmVjMi5jcm9zc1ZlYzJWZWMyKHJCMiwgdGhpcy5tX3BlcnApO1xuICAgICAgICAgIFZlYzIuY3Jvc3NWZWMyVmVjMihyQTIsIHRoaXMubV9wZXJwKTtcbiAgICAgICAgICB2YXIgazExID0gbUEgKyBtQiArIGlBICogdGhpcy5tX3MxICogdGhpcy5tX3MxICsgaUIgKiB0aGlzLm1fczIgKiB0aGlzLm1fczI7XG4gICAgICAgICAgdmFyIGsxMiA9IGlBICogdGhpcy5tX3MxICsgaUIgKiB0aGlzLm1fczI7XG4gICAgICAgICAgdmFyIGsxMyA9IGlBICogdGhpcy5tX3MxICogdGhpcy5tX2ExICsgaUIgKiB0aGlzLm1fczIgKiB0aGlzLm1fYTI7XG4gICAgICAgICAgdmFyIGsyMiA9IGlBICsgaUI7XG4gICAgICAgICAgaWYgKGsyMiA9PSAwKSB7XG4gICAgICAgICAgICBrMjIgPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgazIzID0gaUEgKiB0aGlzLm1fYTEgKyBpQiAqIHRoaXMubV9hMjtcbiAgICAgICAgICB2YXIgazMzID0gbUEgKyBtQiArIGlBICogdGhpcy5tX2ExICogdGhpcy5tX2ExICsgaUIgKiB0aGlzLm1fYTIgKiB0aGlzLm1fYTI7XG4gICAgICAgICAgdGhpcy5tX0suZXguc2V0KGsxMSwgazEyLCBrMTMpO1xuICAgICAgICAgIHRoaXMubV9LLmV5LnNldChrMTIsIGsyMiwgazIzKTtcbiAgICAgICAgICB0aGlzLm1fSy5lei5zZXQoazEzLCBrMjMsIGszMyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgICAgIHZhciBqb2ludFRyYW5zbGF0aW9uID0gVmVjMi5kb3QodGhpcy5tX2F4aXMsIGQyKTtcbiAgICAgICAgICBpZiAobWF0aF9hYnMkMyh0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiAtIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKSA8IDIgKiBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3ApIHtcbiAgICAgICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gTGltaXRTdGF0ZSQxLmVxdWFsTGltaXRzO1xuICAgICAgICAgIH0gZWxzZSBpZiAoam9pbnRUcmFuc2xhdGlvbiA8PSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlICE9IExpbWl0U3RhdGUkMS5hdExvd2VyTGltaXQpIHtcbiAgICAgICAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBMaW1pdFN0YXRlJDEuYXRMb3dlckxpbWl0O1xuICAgICAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGpvaW50VHJhbnNsYXRpb24gPj0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSAhPSBMaW1pdFN0YXRlJDEuYXRVcHBlckxpbWl0KSB7XG4gICAgICAgICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gTGltaXRTdGF0ZSQxLmF0VXBwZXJMaW1pdDtcbiAgICAgICAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gTGltaXRTdGF0ZSQxLmluYWN0aXZlTGltaXQ7XG4gICAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBMaW1pdFN0YXRlJDEuaW5hY3RpdmVMaW1pdDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yID09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UubXVsKHN0ZXAuZHRSYXRpbyk7XG4gICAgICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICAgICAgdmFyIFAzID0gVmVjMi5jb21iaW5lKHRoaXMubV9pbXB1bHNlLngsIHRoaXMubV9wZXJwLCB0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueiwgdGhpcy5tX2F4aXMpO1xuICAgICAgICAgIHZhciBMQSA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fczEgKyB0aGlzLm1faW1wdWxzZS55ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS56KSAqIHRoaXMubV9hMTtcbiAgICAgICAgICB2YXIgTEIgPSB0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3MyICsgdGhpcy5tX2ltcHVsc2UueSArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueikgKiB0aGlzLm1fYTI7XG4gICAgICAgICAgdkEyLnN1Yk11bChtQSwgUDMpO1xuICAgICAgICAgIHdBIC09IGlBICogTEE7XG4gICAgICAgICAgdkIyLmFkZE11bChtQiwgUDMpO1xuICAgICAgICAgIHdCICs9IGlCICogTEI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2Uuc2V0WmVybygpO1xuICAgICAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnYuc2V0VmVjMih2QTIpO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYuc2V0VmVjMih2QjIpO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53ID0gd0I7XG4gICAgICB9O1xuICAgICAgUHJpc21hdGljSm9pbnQyLnByb3RvdHlwZS5zb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciB2QTIgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0EgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIG1BID0gdGhpcy5tX2ludk1hc3NBO1xuICAgICAgICB2YXIgbUIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgICAgIHZhciBpQSA9IHRoaXMubV9pbnZJQTtcbiAgICAgICAgdmFyIGlCID0gdGhpcy5tX2ludklCO1xuICAgICAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yICYmIHRoaXMubV9saW1pdFN0YXRlICE9IExpbWl0U3RhdGUkMS5lcXVhbExpbWl0cykge1xuICAgICAgICAgIHZhciBDZG90ID0gVmVjMi5kb3QodGhpcy5tX2F4aXMsIFZlYzIuc3ViKHZCMiwgdkEyKSkgKyB0aGlzLm1fYTIgKiB3QiAtIHRoaXMubV9hMSAqIHdBO1xuICAgICAgICAgIHZhciBpbXB1bHNlID0gdGhpcy5tX21vdG9yTWFzcyAqICh0aGlzLm1fbW90b3JTcGVlZCAtIENkb3QpO1xuICAgICAgICAgIHZhciBvbGRJbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZTtcbiAgICAgICAgICB2YXIgbWF4SW1wdWxzZSA9IHN0ZXAuZHQgKiB0aGlzLm1fbWF4TW90b3JGb3JjZTtcbiAgICAgICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gY2xhbXAodGhpcy5tX21vdG9ySW1wdWxzZSArIGltcHVsc2UsIC1tYXhJbXB1bHNlLCBtYXhJbXB1bHNlKTtcbiAgICAgICAgICBpbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICAgICAgdmFyIFAzID0gVmVjMi5tdWxOdW1WZWMyKGltcHVsc2UsIHRoaXMubV9heGlzKTtcbiAgICAgICAgICB2YXIgTEEgPSBpbXB1bHNlICogdGhpcy5tX2ExO1xuICAgICAgICAgIHZhciBMQiA9IGltcHVsc2UgKiB0aGlzLm1fYTI7XG4gICAgICAgICAgdkEyLnN1Yk11bChtQSwgUDMpO1xuICAgICAgICAgIHdBIC09IGlBICogTEE7XG4gICAgICAgICAgdkIyLmFkZE11bChtQiwgUDMpO1xuICAgICAgICAgIHdCICs9IGlCICogTEI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIENkb3QxID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIENkb3QxLnggKz0gVmVjMi5kb3QodGhpcy5tX3BlcnAsIHZCMikgKyB0aGlzLm1fczIgKiB3QjtcbiAgICAgICAgQ2RvdDEueCAtPSBWZWMyLmRvdCh0aGlzLm1fcGVycCwgdkEyKSArIHRoaXMubV9zMSAqIHdBO1xuICAgICAgICBDZG90MS55ID0gd0IgLSB3QTtcbiAgICAgICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCAmJiB0aGlzLm1fbGltaXRTdGF0ZSAhPSBMaW1pdFN0YXRlJDEuaW5hY3RpdmVMaW1pdCkge1xuICAgICAgICAgIHZhciBDZG90MiA9IDA7XG4gICAgICAgICAgQ2RvdDIgKz0gVmVjMi5kb3QodGhpcy5tX2F4aXMsIHZCMikgKyB0aGlzLm1fYTIgKiB3QjtcbiAgICAgICAgICBDZG90MiAtPSBWZWMyLmRvdCh0aGlzLm1fYXhpcywgdkEyKSArIHRoaXMubV9hMSAqIHdBO1xuICAgICAgICAgIHZhciBDZG90ID0gbmV3IFZlYzMoQ2RvdDEueCwgQ2RvdDEueSwgQ2RvdDIpO1xuICAgICAgICAgIHZhciBmMSA9IFZlYzMuY2xvbmUodGhpcy5tX2ltcHVsc2UpO1xuICAgICAgICAgIHZhciBkZiA9IHRoaXMubV9LLnNvbHZlMzMoVmVjMy5uZWcoQ2RvdCkpO1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLmFkZChkZik7XG4gICAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlID09IExpbWl0U3RhdGUkMS5hdExvd2VyTGltaXQpIHtcbiAgICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSBtYXRoX21heCh0aGlzLm1faW1wdWxzZS56LCAwKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubV9saW1pdFN0YXRlID09IExpbWl0U3RhdGUkMS5hdFVwcGVyTGltaXQpIHtcbiAgICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSBtYXRoX21pbiQyKHRoaXMubV9pbXB1bHNlLnosIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgYjIgPSBWZWMyLmNvbWJpbmUoLTEsIENkb3QxLCAtKHRoaXMubV9pbXB1bHNlLnogLSBmMS56KSwgVmVjMi5uZW8odGhpcy5tX0suZXoueCwgdGhpcy5tX0suZXoueSkpO1xuICAgICAgICAgIHZhciBmMnIgPSBWZWMyLmFkZCh0aGlzLm1fSy5zb2x2ZTIyKGIyKSwgVmVjMi5uZW8oZjEueCwgZjEueSkpO1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnggPSBmMnIueDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ID0gZjJyLnk7XG4gICAgICAgICAgZGYgPSBWZWMzLnN1Yih0aGlzLm1faW1wdWxzZSwgZjEpO1xuICAgICAgICAgIHZhciBQMyA9IFZlYzIuY29tYmluZShkZi54LCB0aGlzLm1fcGVycCwgZGYueiwgdGhpcy5tX2F4aXMpO1xuICAgICAgICAgIHZhciBMQSA9IGRmLnggKiB0aGlzLm1fczEgKyBkZi55ICsgZGYueiAqIHRoaXMubV9hMTtcbiAgICAgICAgICB2YXIgTEIgPSBkZi54ICogdGhpcy5tX3MyICsgZGYueSArIGRmLnogKiB0aGlzLm1fYTI7XG4gICAgICAgICAgdkEyLnN1Yk11bChtQSwgUDMpO1xuICAgICAgICAgIHdBIC09IGlBICogTEE7XG4gICAgICAgICAgdkIyLmFkZE11bChtQiwgUDMpO1xuICAgICAgICAgIHdCICs9IGlCICogTEI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGRmID0gdGhpcy5tX0suc29sdmUyMihWZWMyLm5lZyhDZG90MSkpO1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gZGYueDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ICs9IGRmLnk7XG4gICAgICAgICAgdmFyIFAzID0gVmVjMi5tdWxOdW1WZWMyKGRmLngsIHRoaXMubV9wZXJwKTtcbiAgICAgICAgICB2YXIgTEEgPSBkZi54ICogdGhpcy5tX3MxICsgZGYueTtcbiAgICAgICAgICB2YXIgTEIgPSBkZi54ICogdGhpcy5tX3MyICsgZGYueTtcbiAgICAgICAgICB2QTIuc3ViTXVsKG1BLCBQMyk7XG4gICAgICAgICAgd0EgLT0gaUEgKiBMQTtcbiAgICAgICAgICB2QjIuYWRkTXVsKG1CLCBQMyk7XG4gICAgICAgICAgd0IgKz0gaUIgKiBMQjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52ID0gdkEyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYgPSB2QjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBQcmlzbWF0aWNKb2ludDIucHJvdG90eXBlLnNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdmFyIGNBMiA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmM7XG4gICAgICAgIHZhciBhQSA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciBjQjIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgcUEgPSBSb3QubmVvKGFBKTtcbiAgICAgICAgdmFyIHFCID0gUm90Lm5lbyhhQik7XG4gICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgICB2YXIgaUEgPSB0aGlzLm1faW52SUE7XG4gICAgICAgIHZhciBpQiA9IHRoaXMubV9pbnZJQjtcbiAgICAgICAgdmFyIHJBMiA9IFJvdC5tdWxWZWMyKHFBLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBKSk7XG4gICAgICAgIHZhciByQjIgPSBSb3QubXVsVmVjMihxQiwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQikpO1xuICAgICAgICB2YXIgZDIgPSBWZWMyLnN1YihWZWMyLmFkZChjQjIsIHJCMiksIFZlYzIuYWRkKGNBMiwgckEyKSk7XG4gICAgICAgIHZhciBheGlzID0gUm90Lm11bFZlYzIocUEsIHRoaXMubV9sb2NhbFhBeGlzQSk7XG4gICAgICAgIHZhciBhMSA9IFZlYzIuY3Jvc3NWZWMyVmVjMihWZWMyLmFkZChkMiwgckEyKSwgYXhpcyk7XG4gICAgICAgIHZhciBhMiA9IFZlYzIuY3Jvc3NWZWMyVmVjMihyQjIsIGF4aXMpO1xuICAgICAgICB2YXIgcGVycDIgPSBSb3QubXVsVmVjMihxQSwgdGhpcy5tX2xvY2FsWUF4aXNBKTtcbiAgICAgICAgdmFyIHMxID0gVmVjMi5jcm9zc1ZlYzJWZWMyKFZlYzIuYWRkKGQyLCByQTIpLCBwZXJwMik7XG4gICAgICAgIHZhciBzMiA9IFZlYzIuY3Jvc3NWZWMyVmVjMihyQjIsIHBlcnAyKTtcbiAgICAgICAgdmFyIGltcHVsc2UgPSBuZXcgVmVjMygpO1xuICAgICAgICB2YXIgQzEgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgQzEueCA9IFZlYzIuZG90KHBlcnAyLCBkMik7XG4gICAgICAgIEMxLnkgPSBhQiAtIGFBIC0gdGhpcy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgICB2YXIgbGluZWFyRXJyb3IgPSBtYXRoX2FicyQzKEMxLngpO1xuICAgICAgICB2YXIgYW5ndWxhckVycm9yID0gbWF0aF9hYnMkMyhDMS55KTtcbiAgICAgICAgdmFyIGxpbmVhclNsb3AgPSBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3A7XG4gICAgICAgIHZhciBtYXhMaW5lYXJDb3JyZWN0aW9uID0gU2V0dGluZ3NJbnRlcm5hbC5tYXhMaW5lYXJDb3JyZWN0aW9uO1xuICAgICAgICB2YXIgYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHZhciBDMiA9IDA7XG4gICAgICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQpIHtcbiAgICAgICAgICB2YXIgdHJhbnNsYXRpb24yID0gVmVjMi5kb3QoYXhpcywgZDIpO1xuICAgICAgICAgIGlmIChtYXRoX2FicyQzKHRoaXMubV91cHBlclRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIDwgMiAqIGxpbmVhclNsb3ApIHtcbiAgICAgICAgICAgIEMyID0gY2xhbXAodHJhbnNsYXRpb24yLCAtbWF4TGluZWFyQ29ycmVjdGlvbiwgbWF4TGluZWFyQ29ycmVjdGlvbik7XG4gICAgICAgICAgICBsaW5lYXJFcnJvciA9IG1hdGhfbWF4KGxpbmVhckVycm9yLCBtYXRoX2FicyQzKHRyYW5zbGF0aW9uMikpO1xuICAgICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uMiA8PSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikge1xuICAgICAgICAgICAgQzIgPSBjbGFtcCh0cmFuc2xhdGlvbjIgLSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbiArIGxpbmVhclNsb3AsIC1tYXhMaW5lYXJDb3JyZWN0aW9uLCAwKTtcbiAgICAgICAgICAgIGxpbmVhckVycm9yID0gTWF0aC5tYXgobGluZWFyRXJyb3IsIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uIC0gdHJhbnNsYXRpb24yKTtcbiAgICAgICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmICh0cmFuc2xhdGlvbjIgPj0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgICAgIEMyID0gY2xhbXAodHJhbnNsYXRpb24yIC0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gLSBsaW5lYXJTbG9wLCAwLCBtYXhMaW5lYXJDb3JyZWN0aW9uKTtcbiAgICAgICAgICAgIGxpbmVhckVycm9yID0gTWF0aC5tYXgobGluZWFyRXJyb3IsIHRyYW5zbGF0aW9uMiAtIHRoaXMubV91cHBlclRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICB2YXIgazExID0gbUEgKyBtQiArIGlBICogczEgKiBzMSArIGlCICogczIgKiBzMjtcbiAgICAgICAgICB2YXIgazEyID0gaUEgKiBzMSArIGlCICogczI7XG4gICAgICAgICAgdmFyIGsxMyA9IGlBICogczEgKiBhMSArIGlCICogczIgKiBhMjtcbiAgICAgICAgICB2YXIgazIyID0gaUEgKyBpQjtcbiAgICAgICAgICBpZiAoazIyID09IDApIHtcbiAgICAgICAgICAgIGsyMiA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBrMjMgPSBpQSAqIGExICsgaUIgKiBhMjtcbiAgICAgICAgICB2YXIgazMzID0gbUEgKyBtQiArIGlBICogYTEgKiBhMSArIGlCICogYTIgKiBhMjtcbiAgICAgICAgICB2YXIgSyA9IG5ldyBNYXQzMygpO1xuICAgICAgICAgIEsuZXguc2V0KGsxMSwgazEyLCBrMTMpO1xuICAgICAgICAgIEsuZXkuc2V0KGsxMiwgazIyLCBrMjMpO1xuICAgICAgICAgIEsuZXouc2V0KGsxMywgazIzLCBrMzMpO1xuICAgICAgICAgIHZhciBDID0gbmV3IFZlYzMoKTtcbiAgICAgICAgICBDLnggPSBDMS54O1xuICAgICAgICAgIEMueSA9IEMxLnk7XG4gICAgICAgICAgQy56ID0gQzI7XG4gICAgICAgICAgaW1wdWxzZSA9IEsuc29sdmUzMyhWZWMzLm5lZyhDKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGsxMSA9IG1BICsgbUIgKyBpQSAqIHMxICogczEgKyBpQiAqIHMyICogczI7XG4gICAgICAgICAgdmFyIGsxMiA9IGlBICogczEgKyBpQiAqIHMyO1xuICAgICAgICAgIHZhciBrMjIgPSBpQSArIGlCO1xuICAgICAgICAgIGlmIChrMjIgPT0gMCkge1xuICAgICAgICAgICAgazIyID0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIEsgPSBuZXcgTWF0MjIoKTtcbiAgICAgICAgICBLLmV4LnNldE51bShrMTEsIGsxMik7XG4gICAgICAgICAgSy5leS5zZXROdW0oazEyLCBrMjIpO1xuICAgICAgICAgIHZhciBpbXB1bHNlMSA9IEsuc29sdmUoVmVjMi5uZWcoQzEpKTtcbiAgICAgICAgICBpbXB1bHNlLnggPSBpbXB1bHNlMS54O1xuICAgICAgICAgIGltcHVsc2UueSA9IGltcHVsc2UxLnk7XG4gICAgICAgICAgaW1wdWxzZS56ID0gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgUDMgPSBWZWMyLmNvbWJpbmUoaW1wdWxzZS54LCBwZXJwMiwgaW1wdWxzZS56LCBheGlzKTtcbiAgICAgICAgdmFyIExBID0gaW1wdWxzZS54ICogczEgKyBpbXB1bHNlLnkgKyBpbXB1bHNlLnogKiBhMTtcbiAgICAgICAgdmFyIExCID0gaW1wdWxzZS54ICogczIgKyBpbXB1bHNlLnkgKyBpbXB1bHNlLnogKiBhMjtcbiAgICAgICAgY0EyLnN1Yk11bChtQSwgUDMpO1xuICAgICAgICBhQSAtPSBpQSAqIExBO1xuICAgICAgICBjQjIuYWRkTXVsKG1CLCBQMyk7XG4gICAgICAgIGFCICs9IGlCICogTEI7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmMgPSBjQTI7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmEgPSBhQTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYyA9IGNCMjtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYSA9IGFCO1xuICAgICAgICByZXR1cm4gbGluZWFyRXJyb3IgPD0gU2V0dGluZ3NJbnRlcm5hbC5saW5lYXJTbG9wICYmIGFuZ3VsYXJFcnJvciA8PSBTZXR0aW5nc0ludGVybmFsLmFuZ3VsYXJTbG9wO1xuICAgICAgfTtcbiAgICAgIFByaXNtYXRpY0pvaW50Mi5UWVBFID0gXCJwcmlzbWF0aWMtam9pbnRcIjtcbiAgICAgIHJldHVybiBQcmlzbWF0aWNKb2ludDI7XG4gICAgfShKb2ludClcbiAgKTtcbiAgdmFyIERFRkFVTFRTJDYgPSB7XG4gICAgcmF0aW86IDFcbiAgfTtcbiAgdmFyIEdlYXJKb2ludCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoR2VhckpvaW50MiwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIEdlYXJKb2ludDIoZGVmLCBib2R5QSwgYm9keUIsIGpvaW50MSwgam9pbnQyLCByYXRpbykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIShfdGhpcyBpbnN0YW5jZW9mIEdlYXJKb2ludDIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBHZWFySm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCBqb2ludDEsIGpvaW50MiwgcmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIGRlZiA9IG9wdGlvbnMoZGVmLCBERUZBVUxUUyQ2KTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZWYsIGJvZHlBLCBib2R5QikgfHwgdGhpcztcbiAgICAgICAgYm9keUEgPSBfdGhpcy5tX2JvZHlBO1xuICAgICAgICBib2R5QiA9IF90aGlzLm1fYm9keUI7XG4gICAgICAgIF90aGlzLm1fdHlwZSA9IEdlYXJKb2ludDIuVFlQRTtcbiAgICAgICAgX3RoaXMubV9qb2ludDEgPSBqb2ludDEgPyBqb2ludDEgOiBkZWYuam9pbnQxO1xuICAgICAgICBfdGhpcy5tX2pvaW50MiA9IGpvaW50MiA/IGpvaW50MiA6IGRlZi5qb2ludDI7XG4gICAgICAgIF90aGlzLm1fcmF0aW8gPSBOdW1iZXIuaXNGaW5pdGUocmF0aW8pID8gcmF0aW8gOiBkZWYucmF0aW87XG4gICAgICAgIF90aGlzLm1fdHlwZTEgPSBfdGhpcy5tX2pvaW50MS5nZXRUeXBlKCk7XG4gICAgICAgIF90aGlzLm1fdHlwZTIgPSBfdGhpcy5tX2pvaW50Mi5nZXRUeXBlKCk7XG4gICAgICAgIHZhciBjb29yZGluYXRlQTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVCO1xuICAgICAgICBfdGhpcy5tX2JvZHlDID0gX3RoaXMubV9qb2ludDEuZ2V0Qm9keUEoKTtcbiAgICAgICAgX3RoaXMubV9ib2R5QSA9IF90aGlzLm1fam9pbnQxLmdldEJvZHlCKCk7XG4gICAgICAgIHZhciB4ZkEyID0gX3RoaXMubV9ib2R5QS5tX3hmO1xuICAgICAgICB2YXIgYUEgPSBfdGhpcy5tX2JvZHlBLm1fc3dlZXAuYTtcbiAgICAgICAgdmFyIHhmQyA9IF90aGlzLm1fYm9keUMubV94ZjtcbiAgICAgICAgdmFyIGFDID0gX3RoaXMubV9ib2R5Qy5tX3N3ZWVwLmE7XG4gICAgICAgIGlmIChfdGhpcy5tX3R5cGUxID09PSBSZXZvbHV0ZUpvaW50LlRZUEUpIHtcbiAgICAgICAgICB2YXIgcmV2b2x1dGUgPSBfdGhpcy5tX2pvaW50MTtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsQW5jaG9yQyA9IHJldm9sdXRlLm1fbG9jYWxBbmNob3JBO1xuICAgICAgICAgIF90aGlzLm1fbG9jYWxBbmNob3JBID0gcmV2b2x1dGUubV9sb2NhbEFuY2hvckI7XG4gICAgICAgICAgX3RoaXMubV9yZWZlcmVuY2VBbmdsZUEgPSByZXZvbHV0ZS5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgICAgIF90aGlzLm1fbG9jYWxBeGlzQyA9IFZlYzIuemVybygpO1xuICAgICAgICAgIGNvb3JkaW5hdGVBID0gYUEgLSBhQyAtIF90aGlzLm1fcmVmZXJlbmNlQW5nbGVBO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwcmlzbWF0aWMgPSBfdGhpcy5tX2pvaW50MTtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsQW5jaG9yQyA9IHByaXNtYXRpYy5tX2xvY2FsQW5jaG9yQTtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsQW5jaG9yQSA9IHByaXNtYXRpYy5tX2xvY2FsQW5jaG9yQjtcbiAgICAgICAgICBfdGhpcy5tX3JlZmVyZW5jZUFuZ2xlQSA9IHByaXNtYXRpYy5tX3JlZmVyZW5jZUFuZ2xlO1xuICAgICAgICAgIF90aGlzLm1fbG9jYWxBeGlzQyA9IHByaXNtYXRpYy5tX2xvY2FsWEF4aXNBO1xuICAgICAgICAgIHZhciBwQyA9IF90aGlzLm1fbG9jYWxBbmNob3JDO1xuICAgICAgICAgIHZhciBwQTIgPSBSb3QubXVsVFZlYzIoeGZDLnEsIFZlYzIuYWRkKFJvdC5tdWxWZWMyKHhmQTIucSwgX3RoaXMubV9sb2NhbEFuY2hvckEpLCBWZWMyLnN1Yih4ZkEyLnAsIHhmQy5wKSkpO1xuICAgICAgICAgIGNvb3JkaW5hdGVBID0gVmVjMi5kb3QocEEyLCBfdGhpcy5tX2xvY2FsQXhpc0MpIC0gVmVjMi5kb3QocEMsIF90aGlzLm1fbG9jYWxBeGlzQyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMubV9ib2R5RCA9IF90aGlzLm1fam9pbnQyLmdldEJvZHlBKCk7XG4gICAgICAgIF90aGlzLm1fYm9keUIgPSBfdGhpcy5tX2pvaW50Mi5nZXRCb2R5QigpO1xuICAgICAgICB2YXIgeGZCMiA9IF90aGlzLm1fYm9keUIubV94ZjtcbiAgICAgICAgdmFyIGFCID0gX3RoaXMubV9ib2R5Qi5tX3N3ZWVwLmE7XG4gICAgICAgIHZhciB4ZkQgPSBfdGhpcy5tX2JvZHlELm1feGY7XG4gICAgICAgIHZhciBhRCA9IF90aGlzLm1fYm9keUQubV9zd2VlcC5hO1xuICAgICAgICBpZiAoX3RoaXMubV90eXBlMiA9PT0gUmV2b2x1dGVKb2ludC5UWVBFKSB7XG4gICAgICAgICAgdmFyIHJldm9sdXRlID0gX3RoaXMubV9qb2ludDI7XG4gICAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckQgPSByZXZvbHV0ZS5tX2xvY2FsQW5jaG9yQTtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsQW5jaG9yQiA9IHJldm9sdXRlLm1fbG9jYWxBbmNob3JCO1xuICAgICAgICAgIF90aGlzLm1fcmVmZXJlbmNlQW5nbGVCID0gcmV2b2x1dGUubV9yZWZlcmVuY2VBbmdsZTtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsQXhpc0QgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgICBjb29yZGluYXRlQiA9IGFCIC0gYUQgLSBfdGhpcy5tX3JlZmVyZW5jZUFuZ2xlQjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcHJpc21hdGljID0gX3RoaXMubV9qb2ludDI7XG4gICAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckQgPSBwcmlzbWF0aWMubV9sb2NhbEFuY2hvckE7XG4gICAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckIgPSBwcmlzbWF0aWMubV9sb2NhbEFuY2hvckI7XG4gICAgICAgICAgX3RoaXMubV9yZWZlcmVuY2VBbmdsZUIgPSBwcmlzbWF0aWMubV9yZWZlcmVuY2VBbmdsZTtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsQXhpc0QgPSBwcmlzbWF0aWMubV9sb2NhbFhBeGlzQTtcbiAgICAgICAgICB2YXIgcEQgPSBfdGhpcy5tX2xvY2FsQW5jaG9yRDtcbiAgICAgICAgICB2YXIgcEIyID0gUm90Lm11bFRWZWMyKHhmRC5xLCBWZWMyLmFkZChSb3QubXVsVmVjMih4ZkIyLnEsIF90aGlzLm1fbG9jYWxBbmNob3JCKSwgVmVjMi5zdWIoeGZCMi5wLCB4ZkQucCkpKTtcbiAgICAgICAgICBjb29yZGluYXRlQiA9IFZlYzIuZG90KHBCMiwgX3RoaXMubV9sb2NhbEF4aXNEKSAtIFZlYzIuZG90KHBELCBfdGhpcy5tX2xvY2FsQXhpc0QpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLm1fY29uc3RhbnQgPSBjb29yZGluYXRlQSArIF90aGlzLm1fcmF0aW8gKiBjb29yZGluYXRlQjtcbiAgICAgICAgX3RoaXMubV9pbXB1bHNlID0gMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgR2VhckpvaW50Mi5wcm90b3R5cGUuX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IHRoaXMubV90eXBlLFxuICAgICAgICAgIGJvZHlBOiB0aGlzLm1fYm9keUEsXG4gICAgICAgICAgYm9keUI6IHRoaXMubV9ib2R5QixcbiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkOiB0aGlzLm1fY29sbGlkZUNvbm5lY3RlZCxcbiAgICAgICAgICBqb2ludDE6IHRoaXMubV9qb2ludDEsXG4gICAgICAgICAgam9pbnQyOiB0aGlzLm1fam9pbnQyLFxuICAgICAgICAgIHJhdGlvOiB0aGlzLm1fcmF0aW9cbiAgICAgICAgICAvLyBfY29uc3RhbnQ6IHRoaXMubV9jb25zdGFudCxcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBHZWFySm9pbnQyLl9kZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGRhdGEsIHdvcmxkLCByZXN0b3JlKSB7XG4gICAgICAgIGRhdGEgPSBfX2Fzc2lnbih7fSwgZGF0YSk7XG4gICAgICAgIGRhdGEuYm9keUEgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUEsIHdvcmxkKTtcbiAgICAgICAgZGF0YS5ib2R5QiA9IHJlc3RvcmUoQm9keSwgZGF0YS5ib2R5Qiwgd29ybGQpO1xuICAgICAgICBkYXRhLmpvaW50MSA9IHJlc3RvcmUoSm9pbnQsIGRhdGEuam9pbnQxLCB3b3JsZCk7XG4gICAgICAgIGRhdGEuam9pbnQyID0gcmVzdG9yZShKb2ludCwgZGF0YS5qb2ludDIsIHdvcmxkKTtcbiAgICAgICAgdmFyIGpvaW50ID0gbmV3IEdlYXJKb2ludDIoZGF0YSk7XG4gICAgICAgIHJldHVybiBqb2ludDtcbiAgICAgIH07XG4gICAgICBHZWFySm9pbnQyLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYucmF0aW8pKSB7XG4gICAgICAgICAgdGhpcy5tX3JhdGlvID0gZGVmLnJhdGlvO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgR2VhckpvaW50Mi5wcm90b3R5cGUuZ2V0Sm9pbnQxID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fam9pbnQxO1xuICAgICAgfTtcbiAgICAgIEdlYXJKb2ludDIucHJvdG90eXBlLmdldEpvaW50MiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2pvaW50MjtcbiAgICAgIH07XG4gICAgICBHZWFySm9pbnQyLnByb3RvdHlwZS5zZXRSYXRpbyA9IGZ1bmN0aW9uKHJhdGlvKSB7XG4gICAgICAgIHRoaXMubV9yYXRpbyA9IHJhdGlvO1xuICAgICAgfTtcbiAgICAgIEdlYXJKb2ludDIucHJvdG90eXBlLmdldFJhdGlvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fcmF0aW87XG4gICAgICB9O1xuICAgICAgR2VhckpvaW50Mi5wcm90b3R5cGUuZ2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2JvZHlBLmdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSk7XG4gICAgICB9O1xuICAgICAgR2VhckpvaW50Mi5wcm90b3R5cGUuZ2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2JvZHlCLmdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQik7XG4gICAgICB9O1xuICAgICAgR2VhckpvaW50Mi5wcm90b3R5cGUuZ2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgICAgICByZXR1cm4gVmVjMi5tdWxOdW1WZWMyKHRoaXMubV9pbXB1bHNlLCB0aGlzLm1fSnZBQykubXVsKGludl9kdCk7XG4gICAgICB9O1xuICAgICAgR2VhckpvaW50Mi5wcm90b3R5cGUuZ2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICAgICAgdmFyIEwgPSB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9Kd0E7XG4gICAgICAgIHJldHVybiBpbnZfZHQgKiBMO1xuICAgICAgfTtcbiAgICAgIEdlYXJKb2ludDIucHJvdG90eXBlLmluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB0aGlzLm1fbGNBID0gdGhpcy5tX2JvZHlBLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9sY0IgPSB0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICAgICAgdGhpcy5tX2xjQyA9IHRoaXMubV9ib2R5Qy5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgICB0aGlzLm1fbGNEID0gdGhpcy5tX2JvZHlELm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9tQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9tQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9tQyA9IHRoaXMubV9ib2R5Qy5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9tRCA9IHRoaXMubV9ib2R5RC5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XG4gICAgICAgIHRoaXMubV9pQiA9IHRoaXMubV9ib2R5Qi5tX2ludkk7XG4gICAgICAgIHRoaXMubV9pQyA9IHRoaXMubV9ib2R5Qy5tX2ludkk7XG4gICAgICAgIHRoaXMubV9pRCA9IHRoaXMubV9ib2R5RC5tX2ludkk7XG4gICAgICAgIHZhciBhQSA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciB2QTIgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0EgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIGFDID0gdGhpcy5tX2JvZHlDLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHZDID0gdGhpcy5tX2JvZHlDLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdDID0gdGhpcy5tX2JvZHlDLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIGFEID0gdGhpcy5tX2JvZHlELmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHZEID0gdGhpcy5tX2JvZHlELmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdEID0gdGhpcy5tX2JvZHlELmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB2YXIgcUMgPSBSb3QubmVvKGFDKTtcbiAgICAgICAgdmFyIHFEID0gUm90Lm5lbyhhRCk7XG4gICAgICAgIHRoaXMubV9tYXNzID0gMDtcbiAgICAgICAgaWYgKHRoaXMubV90eXBlMSA9PSBSZXZvbHV0ZUpvaW50LlRZUEUpIHtcbiAgICAgICAgICB0aGlzLm1fSnZBQyA9IFZlYzIuemVybygpO1xuICAgICAgICAgIHRoaXMubV9Kd0EgPSAxO1xuICAgICAgICAgIHRoaXMubV9Kd0MgPSAxO1xuICAgICAgICAgIHRoaXMubV9tYXNzICs9IHRoaXMubV9pQSArIHRoaXMubV9pQztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgdSA9IFJvdC5tdWxWZWMyKHFDLCB0aGlzLm1fbG9jYWxBeGlzQyk7XG4gICAgICAgICAgdmFyIHJDID0gUm90Lm11bFN1YihxQywgdGhpcy5tX2xvY2FsQW5jaG9yQywgdGhpcy5tX2xjQyk7XG4gICAgICAgICAgdmFyIHJBMiA9IFJvdC5tdWxTdWIocUEsIHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sY0EpO1xuICAgICAgICAgIHRoaXMubV9KdkFDID0gdTtcbiAgICAgICAgICB0aGlzLm1fSndDID0gVmVjMi5jcm9zc1ZlYzJWZWMyKHJDLCB1KTtcbiAgICAgICAgICB0aGlzLm1fSndBID0gVmVjMi5jcm9zc1ZlYzJWZWMyKHJBMiwgdSk7XG4gICAgICAgICAgdGhpcy5tX21hc3MgKz0gdGhpcy5tX21DICsgdGhpcy5tX21BICsgdGhpcy5tX2lDICogdGhpcy5tX0p3QyAqIHRoaXMubV9Kd0MgKyB0aGlzLm1faUEgKiB0aGlzLm1fSndBICogdGhpcy5tX0p3QTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX3R5cGUyID09IFJldm9sdXRlSm9pbnQuVFlQRSkge1xuICAgICAgICAgIHRoaXMubV9KdkJEID0gVmVjMi56ZXJvKCk7XG4gICAgICAgICAgdGhpcy5tX0p3QiA9IHRoaXMubV9yYXRpbztcbiAgICAgICAgICB0aGlzLm1fSndEID0gdGhpcy5tX3JhdGlvO1xuICAgICAgICAgIHRoaXMubV9tYXNzICs9IHRoaXMubV9yYXRpbyAqIHRoaXMubV9yYXRpbyAqICh0aGlzLm1faUIgKyB0aGlzLm1faUQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB1ID0gUm90Lm11bFZlYzIocUQsIHRoaXMubV9sb2NhbEF4aXNEKTtcbiAgICAgICAgICB2YXIgckQgPSBSb3QubXVsU3ViKHFELCB0aGlzLm1fbG9jYWxBbmNob3JELCB0aGlzLm1fbGNEKTtcbiAgICAgICAgICB2YXIgckIyID0gUm90Lm11bFN1YihxQiwgdGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xjQik7XG4gICAgICAgICAgdGhpcy5tX0p2QkQgPSBWZWMyLm11bE51bVZlYzIodGhpcy5tX3JhdGlvLCB1KTtcbiAgICAgICAgICB0aGlzLm1fSndEID0gdGhpcy5tX3JhdGlvICogVmVjMi5jcm9zc1ZlYzJWZWMyKHJELCB1KTtcbiAgICAgICAgICB0aGlzLm1fSndCID0gdGhpcy5tX3JhdGlvICogVmVjMi5jcm9zc1ZlYzJWZWMyKHJCMiwgdSk7XG4gICAgICAgICAgdGhpcy5tX21hc3MgKz0gdGhpcy5tX3JhdGlvICogdGhpcy5tX3JhdGlvICogKHRoaXMubV9tRCArIHRoaXMubV9tQikgKyB0aGlzLm1faUQgKiB0aGlzLm1fSndEICogdGhpcy5tX0p3RCArIHRoaXMubV9pQiAqIHRoaXMubV9Kd0IgKiB0aGlzLm1fSndCO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9tYXNzID0gdGhpcy5tX21hc3MgPiAwID8gMSAvIHRoaXMubV9tYXNzIDogMDtcbiAgICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgICAgdkEyLmFkZE11bCh0aGlzLm1fbUEgKiB0aGlzLm1faW1wdWxzZSwgdGhpcy5tX0p2QUMpO1xuICAgICAgICAgIHdBICs9IHRoaXMubV9pQSAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0p3QTtcbiAgICAgICAgICB2QjIuYWRkTXVsKHRoaXMubV9tQiAqIHRoaXMubV9pbXB1bHNlLCB0aGlzLm1fSnZCRCk7XG4gICAgICAgICAgd0IgKz0gdGhpcy5tX2lCICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSndCO1xuICAgICAgICAgIHZDLnN1Yk11bCh0aGlzLm1fbUMgKiB0aGlzLm1faW1wdWxzZSwgdGhpcy5tX0p2QUMpO1xuICAgICAgICAgIHdDIC09IHRoaXMubV9pQyAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0p3QztcbiAgICAgICAgICB2RC5zdWJNdWwodGhpcy5tX21EICogdGhpcy5tX2ltcHVsc2UsIHRoaXMubV9KdkJEKTtcbiAgICAgICAgICB3RCAtPSB0aGlzLm1faUQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9Kd0Q7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnYuc2V0VmVjMih2QTIpO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYuc2V0VmVjMih2QjIpO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53ID0gd0I7XG4gICAgICAgIHRoaXMubV9ib2R5Qy5jX3ZlbG9jaXR5LnYuc2V0VmVjMih2Qyk7XG4gICAgICAgIHRoaXMubV9ib2R5Qy5jX3ZlbG9jaXR5LncgPSB3QztcbiAgICAgICAgdGhpcy5tX2JvZHlELmNfdmVsb2NpdHkudi5zZXRWZWMyKHZEKTtcbiAgICAgICAgdGhpcy5tX2JvZHlELmNfdmVsb2NpdHkudyA9IHdEO1xuICAgICAgfTtcbiAgICAgIEdlYXJKb2ludDIucHJvdG90eXBlLnNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdmFyIHZBMiA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QSA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciB2QjIgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgdkMgPSB0aGlzLm1fYm9keUMuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0MgPSB0aGlzLm1fYm9keUMuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgdkQgPSB0aGlzLm1fYm9keUQuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0QgPSB0aGlzLm1fYm9keUQuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgQ2RvdCA9IFZlYzIuZG90KHRoaXMubV9KdkFDLCB2QTIpIC0gVmVjMi5kb3QodGhpcy5tX0p2QUMsIHZDKSArIFZlYzIuZG90KHRoaXMubV9KdkJELCB2QjIpIC0gVmVjMi5kb3QodGhpcy5tX0p2QkQsIHZEKTtcbiAgICAgICAgQ2RvdCArPSB0aGlzLm1fSndBICogd0EgLSB0aGlzLm1fSndDICogd0MgKyAodGhpcy5tX0p3QiAqIHdCIC0gdGhpcy5tX0p3RCAqIHdEKTtcbiAgICAgICAgdmFyIGltcHVsc2UgPSAtdGhpcy5tX21hc3MgKiBDZG90O1xuICAgICAgICB0aGlzLm1faW1wdWxzZSArPSBpbXB1bHNlO1xuICAgICAgICB2QTIuYWRkTXVsKHRoaXMubV9tQSAqIGltcHVsc2UsIHRoaXMubV9KdkFDKTtcbiAgICAgICAgd0EgKz0gdGhpcy5tX2lBICogaW1wdWxzZSAqIHRoaXMubV9Kd0E7XG4gICAgICAgIHZCMi5hZGRNdWwodGhpcy5tX21CICogaW1wdWxzZSwgdGhpcy5tX0p2QkQpO1xuICAgICAgICB3QiArPSB0aGlzLm1faUIgKiBpbXB1bHNlICogdGhpcy5tX0p3QjtcbiAgICAgICAgdkMuc3ViTXVsKHRoaXMubV9tQyAqIGltcHVsc2UsIHRoaXMubV9KdkFDKTtcbiAgICAgICAgd0MgLT0gdGhpcy5tX2lDICogaW1wdWxzZSAqIHRoaXMubV9Kd0M7XG4gICAgICAgIHZELnN1Yk11bCh0aGlzLm1fbUQgKiBpbXB1bHNlLCB0aGlzLm1fSnZCRCk7XG4gICAgICAgIHdEIC09IHRoaXMubV9pRCAqIGltcHVsc2UgKiB0aGlzLm1fSndEO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52LnNldFZlYzIodkEyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudyA9IHdBO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52LnNldFZlYzIodkIyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudyA9IHdCO1xuICAgICAgICB0aGlzLm1fYm9keUMuY192ZWxvY2l0eS52LnNldFZlYzIodkMpO1xuICAgICAgICB0aGlzLm1fYm9keUMuY192ZWxvY2l0eS53ID0gd0M7XG4gICAgICAgIHRoaXMubV9ib2R5RC5jX3ZlbG9jaXR5LnYuc2V0VmVjMih2RCk7XG4gICAgICAgIHRoaXMubV9ib2R5RC5jX3ZlbG9jaXR5LncgPSB3RDtcbiAgICAgIH07XG4gICAgICBHZWFySm9pbnQyLnByb3RvdHlwZS5zb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciBjQTIgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUEgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgY0IyID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFCID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIGNDID0gdGhpcy5tX2JvZHlDLmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFDID0gdGhpcy5tX2JvZHlDLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIGNEID0gdGhpcy5tX2JvZHlELmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFEID0gdGhpcy5tX2JvZHlELmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB2YXIgcUMgPSBSb3QubmVvKGFDKTtcbiAgICAgICAgdmFyIHFEID0gUm90Lm5lbyhhRCk7XG4gICAgICAgIHZhciBsaW5lYXJFcnJvciA9IDA7XG4gICAgICAgIHZhciBjb29yZGluYXRlQTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVCO1xuICAgICAgICB2YXIgSnZBQztcbiAgICAgICAgdmFyIEp2QkQ7XG4gICAgICAgIHZhciBKd0E7XG4gICAgICAgIHZhciBKd0I7XG4gICAgICAgIHZhciBKd0M7XG4gICAgICAgIHZhciBKd0Q7XG4gICAgICAgIHZhciBtYXNzID0gMDtcbiAgICAgICAgaWYgKHRoaXMubV90eXBlMSA9PSBSZXZvbHV0ZUpvaW50LlRZUEUpIHtcbiAgICAgICAgICBKdkFDID0gVmVjMi56ZXJvKCk7XG4gICAgICAgICAgSndBID0gMTtcbiAgICAgICAgICBKd0MgPSAxO1xuICAgICAgICAgIG1hc3MgKz0gdGhpcy5tX2lBICsgdGhpcy5tX2lDO1xuICAgICAgICAgIGNvb3JkaW5hdGVBID0gYUEgLSBhQyAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZUE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHUgPSBSb3QubXVsVmVjMihxQywgdGhpcy5tX2xvY2FsQXhpc0MpO1xuICAgICAgICAgIHZhciByQyA9IFJvdC5tdWxTdWIocUMsIHRoaXMubV9sb2NhbEFuY2hvckMsIHRoaXMubV9sY0MpO1xuICAgICAgICAgIHZhciByQTIgPSBSb3QubXVsU3ViKHFBLCB0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbGNBKTtcbiAgICAgICAgICBKdkFDID0gdTtcbiAgICAgICAgICBKd0MgPSBWZWMyLmNyb3NzVmVjMlZlYzIockMsIHUpO1xuICAgICAgICAgIEp3QSA9IFZlYzIuY3Jvc3NWZWMyVmVjMihyQTIsIHUpO1xuICAgICAgICAgIG1hc3MgKz0gdGhpcy5tX21DICsgdGhpcy5tX21BICsgdGhpcy5tX2lDICogSndDICogSndDICsgdGhpcy5tX2lBICogSndBICogSndBO1xuICAgICAgICAgIHZhciBwQyA9IFZlYzIuc3ViKHRoaXMubV9sb2NhbEFuY2hvckMsIHRoaXMubV9sY0MpO1xuICAgICAgICAgIHZhciBwQTIgPSBSb3QubXVsVFZlYzIocUMsIFZlYzIuYWRkKHJBMiwgVmVjMi5zdWIoY0EyLCBjQykpKTtcbiAgICAgICAgICBjb29yZGluYXRlQSA9IFZlYzIuZG90KFZlYzIuc3ViKHBBMiwgcEMpLCB0aGlzLm1fbG9jYWxBeGlzQyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubV90eXBlMiA9PSBSZXZvbHV0ZUpvaW50LlRZUEUpIHtcbiAgICAgICAgICBKdkJEID0gVmVjMi56ZXJvKCk7XG4gICAgICAgICAgSndCID0gdGhpcy5tX3JhdGlvO1xuICAgICAgICAgIEp3RCA9IHRoaXMubV9yYXRpbztcbiAgICAgICAgICBtYXNzICs9IHRoaXMubV9yYXRpbyAqIHRoaXMubV9yYXRpbyAqICh0aGlzLm1faUIgKyB0aGlzLm1faUQpO1xuICAgICAgICAgIGNvb3JkaW5hdGVCID0gYUIgLSBhRCAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZUI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHUgPSBSb3QubXVsVmVjMihxRCwgdGhpcy5tX2xvY2FsQXhpc0QpO1xuICAgICAgICAgIHZhciByRCA9IFJvdC5tdWxTdWIocUQsIHRoaXMubV9sb2NhbEFuY2hvckQsIHRoaXMubV9sY0QpO1xuICAgICAgICAgIHZhciByQjIgPSBSb3QubXVsU3ViKHFCLCB0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbGNCKTtcbiAgICAgICAgICBKdkJEID0gVmVjMi5tdWxOdW1WZWMyKHRoaXMubV9yYXRpbywgdSk7XG4gICAgICAgICAgSndEID0gdGhpcy5tX3JhdGlvICogVmVjMi5jcm9zc1ZlYzJWZWMyKHJELCB1KTtcbiAgICAgICAgICBKd0IgPSB0aGlzLm1fcmF0aW8gKiBWZWMyLmNyb3NzVmVjMlZlYzIockIyLCB1KTtcbiAgICAgICAgICBtYXNzICs9IHRoaXMubV9yYXRpbyAqIHRoaXMubV9yYXRpbyAqICh0aGlzLm1fbUQgKyB0aGlzLm1fbUIpICsgdGhpcy5tX2lEICogSndEICogSndEICsgdGhpcy5tX2lCICogSndCICogSndCO1xuICAgICAgICAgIHZhciBwRCA9IFZlYzIuc3ViKHRoaXMubV9sb2NhbEFuY2hvckQsIHRoaXMubV9sY0QpO1xuICAgICAgICAgIHZhciBwQjIgPSBSb3QubXVsVFZlYzIocUQsIFZlYzIuYWRkKHJCMiwgVmVjMi5zdWIoY0IyLCBjRCkpKTtcbiAgICAgICAgICBjb29yZGluYXRlQiA9IFZlYzIuZG90KHBCMiwgdGhpcy5tX2xvY2FsQXhpc0QpIC0gVmVjMi5kb3QocEQsIHRoaXMubV9sb2NhbEF4aXNEKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgQyA9IGNvb3JkaW5hdGVBICsgdGhpcy5tX3JhdGlvICogY29vcmRpbmF0ZUIgLSB0aGlzLm1fY29uc3RhbnQ7XG4gICAgICAgIHZhciBpbXB1bHNlID0gMDtcbiAgICAgICAgaWYgKG1hc3MgPiAwKSB7XG4gICAgICAgICAgaW1wdWxzZSA9IC1DIC8gbWFzcztcbiAgICAgICAgfVxuICAgICAgICBjQTIuYWRkTXVsKHRoaXMubV9tQSAqIGltcHVsc2UsIEp2QUMpO1xuICAgICAgICBhQSArPSB0aGlzLm1faUEgKiBpbXB1bHNlICogSndBO1xuICAgICAgICBjQjIuYWRkTXVsKHRoaXMubV9tQiAqIGltcHVsc2UsIEp2QkQpO1xuICAgICAgICBhQiArPSB0aGlzLm1faUIgKiBpbXB1bHNlICogSndCO1xuICAgICAgICBjQy5zdWJNdWwodGhpcy5tX21DICogaW1wdWxzZSwgSnZBQyk7XG4gICAgICAgIGFDIC09IHRoaXMubV9pQyAqIGltcHVsc2UgKiBKd0M7XG4gICAgICAgIGNELnN1Yk11bCh0aGlzLm1fbUQgKiBpbXB1bHNlLCBKdkJEKTtcbiAgICAgICAgYUQgLT0gdGhpcy5tX2lEICogaW1wdWxzZSAqIEp3RDtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYy5zZXRWZWMyKGNBMik7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmEgPSBhQTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYy5zZXRWZWMyKGNCMik7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmEgPSBhQjtcbiAgICAgICAgdGhpcy5tX2JvZHlDLmNfcG9zaXRpb24uYy5zZXRWZWMyKGNDKTtcbiAgICAgICAgdGhpcy5tX2JvZHlDLmNfcG9zaXRpb24uYSA9IGFDO1xuICAgICAgICB0aGlzLm1fYm9keUQuY19wb3NpdGlvbi5jLnNldFZlYzIoY0QpO1xuICAgICAgICB0aGlzLm1fYm9keUQuY19wb3NpdGlvbi5hID0gYUQ7XG4gICAgICAgIHJldHVybiBsaW5lYXJFcnJvciA8IFNldHRpbmdzSW50ZXJuYWwubGluZWFyU2xvcDtcbiAgICAgIH07XG4gICAgICBHZWFySm9pbnQyLlRZUEUgPSBcImdlYXItam9pbnRcIjtcbiAgICAgIHJldHVybiBHZWFySm9pbnQyO1xuICAgIH0oSm9pbnQpXG4gICk7XG4gIHZhciBERUZBVUxUUyQ1ID0ge1xuICAgIG1heEZvcmNlOiAxLFxuICAgIG1heFRvcnF1ZTogMSxcbiAgICBjb3JyZWN0aW9uRmFjdG9yOiAwLjNcbiAgfTtcbiAgdmFyIE1vdG9ySm9pbnQgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKE1vdG9ySm9pbnQyLCBfc3VwZXIpO1xuICAgICAgZnVuY3Rpb24gTW90b3JKb2ludDIoZGVmLCBib2R5QSwgYm9keUIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCEoX3RoaXMgaW5zdGFuY2VvZiBNb3RvckpvaW50MikpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IE1vdG9ySm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCKTtcbiAgICAgICAgfVxuICAgICAgICBkZWYgPSBvcHRpb25zKGRlZiwgREVGQVVMVFMkNSk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVmLCBib2R5QSwgYm9keUIpIHx8IHRoaXM7XG4gICAgICAgIGJvZHlBID0gX3RoaXMubV9ib2R5QTtcbiAgICAgICAgYm9keUIgPSBfdGhpcy5tX2JvZHlCO1xuICAgICAgICBfdGhpcy5tX3R5cGUgPSBNb3RvckpvaW50Mi5UWVBFO1xuICAgICAgICBfdGhpcy5tX2xpbmVhck9mZnNldCA9IFZlYzIuaXNWYWxpZChkZWYubGluZWFyT2Zmc2V0KSA/IFZlYzIuY2xvbmUoZGVmLmxpbmVhck9mZnNldCkgOiBib2R5QS5nZXRMb2NhbFBvaW50KGJvZHlCLmdldFBvc2l0aW9uKCkpO1xuICAgICAgICBfdGhpcy5tX2FuZ3VsYXJPZmZzZXQgPSBOdW1iZXIuaXNGaW5pdGUoZGVmLmFuZ3VsYXJPZmZzZXQpID8gZGVmLmFuZ3VsYXJPZmZzZXQgOiBib2R5Qi5nZXRBbmdsZSgpIC0gYm9keUEuZ2V0QW5nbGUoKTtcbiAgICAgICAgX3RoaXMubV9saW5lYXJJbXB1bHNlID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIF90aGlzLm1fYW5ndWxhckltcHVsc2UgPSAwO1xuICAgICAgICBfdGhpcy5tX21heEZvcmNlID0gZGVmLm1heEZvcmNlO1xuICAgICAgICBfdGhpcy5tX21heFRvcnF1ZSA9IGRlZi5tYXhUb3JxdWU7XG4gICAgICAgIF90aGlzLm1fY29ycmVjdGlvbkZhY3RvciA9IGRlZi5jb3JyZWN0aW9uRmFjdG9yO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBNb3RvckpvaW50Mi5wcm90b3R5cGUuX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IHRoaXMubV90eXBlLFxuICAgICAgICAgIGJvZHlBOiB0aGlzLm1fYm9keUEsXG4gICAgICAgICAgYm9keUI6IHRoaXMubV9ib2R5QixcbiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkOiB0aGlzLm1fY29sbGlkZUNvbm5lY3RlZCxcbiAgICAgICAgICBtYXhGb3JjZTogdGhpcy5tX21heEZvcmNlLFxuICAgICAgICAgIG1heFRvcnF1ZTogdGhpcy5tX21heFRvcnF1ZSxcbiAgICAgICAgICBjb3JyZWN0aW9uRmFjdG9yOiB0aGlzLm1fY29ycmVjdGlvbkZhY3RvcixcbiAgICAgICAgICBsaW5lYXJPZmZzZXQ6IHRoaXMubV9saW5lYXJPZmZzZXQsXG4gICAgICAgICAgYW5ndWxhck9mZnNldDogdGhpcy5tX2FuZ3VsYXJPZmZzZXRcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBNb3RvckpvaW50Mi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCB3b3JsZCwgcmVzdG9yZSkge1xuICAgICAgICBkYXRhID0gX19hc3NpZ24oe30sIGRhdGEpO1xuICAgICAgICBkYXRhLmJvZHlBID0gcmVzdG9yZShCb2R5LCBkYXRhLmJvZHlBLCB3b3JsZCk7XG4gICAgICAgIGRhdGEuYm9keUIgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUIsIHdvcmxkKTtcbiAgICAgICAgdmFyIGpvaW50ID0gbmV3IE1vdG9ySm9pbnQyKGRhdGEpO1xuICAgICAgICByZXR1cm4gam9pbnQ7XG4gICAgICB9O1xuICAgICAgTW90b3JKb2ludDIucHJvdG90eXBlLl9yZXNldCA9IGZ1bmN0aW9uKGRlZikge1xuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5hbmd1bGFyT2Zmc2V0KSkge1xuICAgICAgICAgIHRoaXMubV9hbmd1bGFyT2Zmc2V0ID0gZGVmLmFuZ3VsYXJPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYubWF4Rm9yY2UpKSB7XG4gICAgICAgICAgdGhpcy5tX21heEZvcmNlID0gZGVmLm1heEZvcmNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLm1heFRvcnF1ZSkpIHtcbiAgICAgICAgICB0aGlzLm1fbWF4VG9ycXVlID0gZGVmLm1heFRvcnF1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5jb3JyZWN0aW9uRmFjdG9yKSkge1xuICAgICAgICAgIHRoaXMubV9jb3JyZWN0aW9uRmFjdG9yID0gZGVmLmNvcnJlY3Rpb25GYWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFZlYzIuaXNWYWxpZChkZWYubGluZWFyT2Zmc2V0KSkge1xuICAgICAgICAgIHRoaXMubV9saW5lYXJPZmZzZXQuc2V0KGRlZi5saW5lYXJPZmZzZXQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTW90b3JKb2ludDIucHJvdG90eXBlLnNldE1heEZvcmNlID0gZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgICAgdGhpcy5tX21heEZvcmNlID0gZm9yY2U7XG4gICAgICB9O1xuICAgICAgTW90b3JKb2ludDIucHJvdG90eXBlLmdldE1heEZvcmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbWF4Rm9yY2U7XG4gICAgICB9O1xuICAgICAgTW90b3JKb2ludDIucHJvdG90eXBlLnNldE1heFRvcnF1ZSA9IGZ1bmN0aW9uKHRvcnF1ZSkge1xuICAgICAgICB0aGlzLm1fbWF4VG9ycXVlID0gdG9ycXVlO1xuICAgICAgfTtcbiAgICAgIE1vdG9ySm9pbnQyLnByb3RvdHlwZS5nZXRNYXhUb3JxdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9tYXhUb3JxdWU7XG4gICAgICB9O1xuICAgICAgTW90b3JKb2ludDIucHJvdG90eXBlLnNldENvcnJlY3Rpb25GYWN0b3IgPSBmdW5jdGlvbihmYWN0b3IpIHtcbiAgICAgICAgdGhpcy5tX2NvcnJlY3Rpb25GYWN0b3IgPSBmYWN0b3I7XG4gICAgICB9O1xuICAgICAgTW90b3JKb2ludDIucHJvdG90eXBlLmdldENvcnJlY3Rpb25GYWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9jb3JyZWN0aW9uRmFjdG9yO1xuICAgICAgfTtcbiAgICAgIE1vdG9ySm9pbnQyLnByb3RvdHlwZS5zZXRMaW5lYXJPZmZzZXQgPSBmdW5jdGlvbihsaW5lYXJPZmZzZXQpIHtcbiAgICAgICAgaWYgKGxpbmVhck9mZnNldC54ICE9IHRoaXMubV9saW5lYXJPZmZzZXQueCB8fCBsaW5lYXJPZmZzZXQueSAhPSB0aGlzLm1fbGluZWFyT2Zmc2V0LnkpIHtcbiAgICAgICAgICB0aGlzLm1fYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5tX2JvZHlCLnNldEF3YWtlKHRydWUpO1xuICAgICAgICAgIHRoaXMubV9saW5lYXJPZmZzZXQuc2V0KGxpbmVhck9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNb3RvckpvaW50Mi5wcm90b3R5cGUuZ2V0TGluZWFyT2Zmc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbGluZWFyT2Zmc2V0O1xuICAgICAgfTtcbiAgICAgIE1vdG9ySm9pbnQyLnByb3RvdHlwZS5zZXRBbmd1bGFyT2Zmc2V0ID0gZnVuY3Rpb24oYW5ndWxhck9mZnNldCkge1xuICAgICAgICBpZiAoYW5ndWxhck9mZnNldCAhPSB0aGlzLm1fYW5ndWxhck9mZnNldCkge1xuICAgICAgICAgIHRoaXMubV9ib2R5QS5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgICB0aGlzLm1fYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgdGhpcy5tX2FuZ3VsYXJPZmZzZXQgPSBhbmd1bGFyT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgTW90b3JKb2ludDIucHJvdG90eXBlLmdldEFuZ3VsYXJPZmZzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9hbmd1bGFyT2Zmc2V0O1xuICAgICAgfTtcbiAgICAgIE1vdG9ySm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUEuZ2V0UG9zaXRpb24oKTtcbiAgICAgIH07XG4gICAgICBNb3RvckpvaW50Mi5wcm90b3R5cGUuZ2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2JvZHlCLmdldFBvc2l0aW9uKCk7XG4gICAgICB9O1xuICAgICAgTW90b3JKb2ludDIucHJvdG90eXBlLmdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIubXVsTnVtVmVjMihpbnZfZHQsIHRoaXMubV9saW5lYXJJbXB1bHNlKTtcbiAgICAgIH07XG4gICAgICBNb3RvckpvaW50Mi5wcm90b3R5cGUuZ2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICAgICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9hbmd1bGFySW1wdWxzZTtcbiAgICAgIH07XG4gICAgICBNb3RvckpvaW50Mi5wcm90b3R5cGUuaW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHRoaXMubV9sb2NhbENlbnRlckEgPSB0aGlzLm1fYm9keUEubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICAgICAgdGhpcy5tX2xvY2FsQ2VudGVyQiA9IHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgICB0aGlzLm1faW52TWFzc0EgPSB0aGlzLm1fYm9keUEubV9pbnZNYXNzO1xuICAgICAgICB0aGlzLm1faW52TWFzc0IgPSB0aGlzLm1fYm9keUIubV9pbnZNYXNzO1xuICAgICAgICB0aGlzLm1faW52SUEgPSB0aGlzLm1fYm9keUEubV9pbnZJO1xuICAgICAgICB0aGlzLm1faW52SUIgPSB0aGlzLm1fYm9keUIubV9pbnZJO1xuICAgICAgICB2YXIgY0EyID0gdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFBID0gdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHZBMiA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QSA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBjQjIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB0aGlzLm1fckEgPSBSb3QubXVsVmVjMihxQSwgVmVjMi5zdWIodGhpcy5tX2xpbmVhck9mZnNldCwgdGhpcy5tX2xvY2FsQ2VudGVyQSkpO1xuICAgICAgICB0aGlzLm1fckIgPSBSb3QubXVsVmVjMihxQiwgVmVjMi5uZWcodGhpcy5tX2xvY2FsQ2VudGVyQikpO1xuICAgICAgICB2YXIgbUEgPSB0aGlzLm1faW52TWFzc0E7XG4gICAgICAgIHZhciBtQiA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICAgICAgdmFyIGlBID0gdGhpcy5tX2ludklBO1xuICAgICAgICB2YXIgaUIgPSB0aGlzLm1faW52SUI7XG4gICAgICAgIHZhciBLID0gbmV3IE1hdDIyKCk7XG4gICAgICAgIEsuZXgueCA9IG1BICsgbUIgKyBpQSAqIHRoaXMubV9yQS55ICogdGhpcy5tX3JBLnkgKyBpQiAqIHRoaXMubV9yQi55ICogdGhpcy5tX3JCLnk7XG4gICAgICAgIEsuZXgueSA9IC1pQSAqIHRoaXMubV9yQS54ICogdGhpcy5tX3JBLnkgLSBpQiAqIHRoaXMubV9yQi54ICogdGhpcy5tX3JCLnk7XG4gICAgICAgIEsuZXkueCA9IEsuZXgueTtcbiAgICAgICAgSy5leS55ID0gbUEgKyBtQiArIGlBICogdGhpcy5tX3JBLnggKiB0aGlzLm1fckEueCArIGlCICogdGhpcy5tX3JCLnggKiB0aGlzLm1fckIueDtcbiAgICAgICAgdGhpcy5tX2xpbmVhck1hc3MgPSBLLmdldEludmVyc2UoKTtcbiAgICAgICAgdGhpcy5tX2FuZ3VsYXJNYXNzID0gaUEgKyBpQjtcbiAgICAgICAgaWYgKHRoaXMubV9hbmd1bGFyTWFzcyA+IDApIHtcbiAgICAgICAgICB0aGlzLm1fYW5ndWxhck1hc3MgPSAxIC8gdGhpcy5tX2FuZ3VsYXJNYXNzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9saW5lYXJFcnJvciA9IFZlYzIuemVybygpO1xuICAgICAgICB0aGlzLm1fbGluZWFyRXJyb3IuYWRkQ29tYmluZSgxLCBjQjIsIDEsIHRoaXMubV9yQik7XG4gICAgICAgIHRoaXMubV9saW5lYXJFcnJvci5zdWJDb21iaW5lKDEsIGNBMiwgMSwgdGhpcy5tX3JBKTtcbiAgICAgICAgdGhpcy5tX2FuZ3VsYXJFcnJvciA9IGFCIC0gYUEgLSB0aGlzLm1fYW5ndWxhck9mZnNldDtcbiAgICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UubXVsKHN0ZXAuZHRSYXRpbyk7XG4gICAgICAgICAgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgICAgICB2YXIgUDMgPSBWZWMyLm5lbyh0aGlzLm1fbGluZWFySW1wdWxzZS54LCB0aGlzLm1fbGluZWFySW1wdWxzZS55KTtcbiAgICAgICAgICB2QTIuc3ViTXVsKG1BLCBQMyk7XG4gICAgICAgICAgd0EgLT0gaUEgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgUDMpICsgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlKTtcbiAgICAgICAgICB2QjIuYWRkTXVsKG1CLCBQMyk7XG4gICAgICAgICAgd0IgKz0gaUIgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgUDMpICsgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5zZXRaZXJvKCk7XG4gICAgICAgICAgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52ID0gdkEyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYgPSB2QjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBNb3RvckpvaW50Mi5wcm90b3R5cGUuc29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgdkEyID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdBID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHZCMiA9IHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QiA9IHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgICB2YXIgaUEgPSB0aGlzLm1faW52SUE7XG4gICAgICAgIHZhciBpQiA9IHRoaXMubV9pbnZJQjtcbiAgICAgICAgdmFyIGggPSBzdGVwLmR0O1xuICAgICAgICB2YXIgaW52X2ggPSBzdGVwLmludl9kdDtcbiAgICAgICAge1xuICAgICAgICAgIHZhciBDZG90ID0gd0IgLSB3QSArIGludl9oICogdGhpcy5tX2NvcnJlY3Rpb25GYWN0b3IgKiB0aGlzLm1fYW5ndWxhckVycm9yO1xuICAgICAgICAgIHZhciBpbXB1bHNlID0gLXRoaXMubV9hbmd1bGFyTWFzcyAqIENkb3Q7XG4gICAgICAgICAgdmFyIG9sZEltcHVsc2UgPSB0aGlzLm1fYW5ndWxhckltcHVsc2U7XG4gICAgICAgICAgdmFyIG1heEltcHVsc2UgPSBoICogdGhpcy5tX21heFRvcnF1ZTtcbiAgICAgICAgICB0aGlzLm1fYW5ndWxhckltcHVsc2UgPSBjbGFtcCh0aGlzLm1fYW5ndWxhckltcHVsc2UgKyBpbXB1bHNlLCAtbWF4SW1wdWxzZSwgbWF4SW1wdWxzZSk7XG4gICAgICAgICAgaW1wdWxzZSA9IHRoaXMubV9hbmd1bGFySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICAgICAgd0EgLT0gaUEgKiBpbXB1bHNlO1xuICAgICAgICAgIHdCICs9IGlCICogaW1wdWxzZTtcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgdmFyIENkb3QgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgICBDZG90LmFkZENvbWJpbmUoMSwgdkIyLCAxLCBWZWMyLmNyb3NzTnVtVmVjMih3QiwgdGhpcy5tX3JCKSk7XG4gICAgICAgICAgQ2RvdC5zdWJDb21iaW5lKDEsIHZBMiwgMSwgVmVjMi5jcm9zc051bVZlYzIod0EsIHRoaXMubV9yQSkpO1xuICAgICAgICAgIENkb3QuYWRkTXVsKGludl9oICogdGhpcy5tX2NvcnJlY3Rpb25GYWN0b3IsIHRoaXMubV9saW5lYXJFcnJvcik7XG4gICAgICAgICAgdmFyIGltcHVsc2UgPSBWZWMyLm5lZyhNYXQyMi5tdWxWZWMyKHRoaXMubV9saW5lYXJNYXNzLCBDZG90KSk7XG4gICAgICAgICAgdmFyIG9sZEltcHVsc2UgPSBWZWMyLmNsb25lKHRoaXMubV9saW5lYXJJbXB1bHNlKTtcbiAgICAgICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5hZGQoaW1wdWxzZSk7XG4gICAgICAgICAgdmFyIG1heEltcHVsc2UgPSBoICogdGhpcy5tX21heEZvcmNlO1xuICAgICAgICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLmNsYW1wKG1heEltcHVsc2UpO1xuICAgICAgICAgIGltcHVsc2UgPSBWZWMyLnN1Yih0aGlzLm1fbGluZWFySW1wdWxzZSwgb2xkSW1wdWxzZSk7XG4gICAgICAgICAgdkEyLnN1Yk11bChtQSwgaW1wdWxzZSk7XG4gICAgICAgICAgd0EgLT0gaUEgKiBWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JBLCBpbXB1bHNlKTtcbiAgICAgICAgICB2QjIuYWRkTXVsKG1CLCBpbXB1bHNlKTtcbiAgICAgICAgICB3QiArPSBpQiAqIFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckIsIGltcHVsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnYgPSB2QTI7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LncgPSB3QTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudiA9IHZCMjtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudyA9IHdCO1xuICAgICAgfTtcbiAgICAgIE1vdG9ySm9pbnQyLnByb3RvdHlwZS5zb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfTtcbiAgICAgIE1vdG9ySm9pbnQyLlRZUEUgPSBcIm1vdG9yLWpvaW50XCI7XG4gICAgICByZXR1cm4gTW90b3JKb2ludDI7XG4gICAgfShKb2ludClcbiAgKTtcbiAgdmFyIG1hdGhfUEkkMiA9IE1hdGguUEk7XG4gIHZhciBERUZBVUxUUyQ0ID0ge1xuICAgIG1heEZvcmNlOiAwLFxuICAgIGZyZXF1ZW5jeUh6OiA1LFxuICAgIGRhbXBpbmdSYXRpbzogMC43XG4gIH07XG4gIHZhciBNb3VzZUpvaW50ID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbihfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhNb3VzZUpvaW50MiwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIE1vdXNlSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCEoX3RoaXMgaW5zdGFuY2VvZiBNb3VzZUpvaW50MikpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IE1vdXNlSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGRlZiA9IG9wdGlvbnMoZGVmLCBERUZBVUxUUyQ0KTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZWYsIGJvZHlBLCBib2R5QikgfHwgdGhpcztcbiAgICAgICAgYm9keUEgPSBfdGhpcy5tX2JvZHlBO1xuICAgICAgICBib2R5QiA9IF90aGlzLm1fYm9keUI7XG4gICAgICAgIF90aGlzLm1fdHlwZSA9IE1vdXNlSm9pbnQyLlRZUEU7XG4gICAgICAgIGlmIChWZWMyLmlzVmFsaWQodGFyZ2V0KSkge1xuICAgICAgICAgIF90aGlzLm1fdGFyZ2V0QSA9IFZlYzIuY2xvbmUodGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIGlmIChWZWMyLmlzVmFsaWQoZGVmLnRhcmdldCkpIHtcbiAgICAgICAgICBfdGhpcy5tX3RhcmdldEEgPSBWZWMyLmNsb25lKGRlZi50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLm1fdGFyZ2V0QSA9IFZlYzIuemVybygpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLm1fbG9jYWxBbmNob3JCID0gVHJhbnNmb3JtLm11bFRWZWMyKGJvZHlCLmdldFRyYW5zZm9ybSgpLCBfdGhpcy5tX3RhcmdldEEpO1xuICAgICAgICBfdGhpcy5tX21heEZvcmNlID0gZGVmLm1heEZvcmNlO1xuICAgICAgICBfdGhpcy5tX2ltcHVsc2UgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgX3RoaXMubV9mcmVxdWVuY3lIeiA9IGRlZi5mcmVxdWVuY3lIejtcbiAgICAgICAgX3RoaXMubV9kYW1waW5nUmF0aW8gPSBkZWYuZGFtcGluZ1JhdGlvO1xuICAgICAgICBfdGhpcy5tX2JldGEgPSAwO1xuICAgICAgICBfdGhpcy5tX2dhbW1hID0gMDtcbiAgICAgICAgX3RoaXMubV9yQiA9IFZlYzIuemVybygpO1xuICAgICAgICBfdGhpcy5tX2xvY2FsQ2VudGVyQiA9IFZlYzIuemVybygpO1xuICAgICAgICBfdGhpcy5tX2ludk1hc3NCID0gMDtcbiAgICAgICAgX3RoaXMubV9pbnZJQiA9IDA7XG4gICAgICAgIF90aGlzLm1fbWFzcyA9IG5ldyBNYXQyMigpO1xuICAgICAgICBfdGhpcy5tX0MgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgTW91c2VKb2ludDIucHJvdG90eXBlLl9zZXJpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiB0aGlzLm1fdHlwZSxcbiAgICAgICAgICBib2R5QTogdGhpcy5tX2JvZHlBLFxuICAgICAgICAgIGJvZHlCOiB0aGlzLm1fYm9keUIsXG4gICAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdGhpcy5tX2NvbGxpZGVDb25uZWN0ZWQsXG4gICAgICAgICAgdGFyZ2V0OiB0aGlzLm1fdGFyZ2V0QSxcbiAgICAgICAgICBtYXhGb3JjZTogdGhpcy5tX21heEZvcmNlLFxuICAgICAgICAgIGZyZXF1ZW5jeUh6OiB0aGlzLm1fZnJlcXVlbmN5SHosXG4gICAgICAgICAgZGFtcGluZ1JhdGlvOiB0aGlzLm1fZGFtcGluZ1JhdGlvLFxuICAgICAgICAgIF9sb2NhbEFuY2hvckI6IHRoaXMubV9sb2NhbEFuY2hvckJcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCB3b3JsZCwgcmVzdG9yZSkge1xuICAgICAgICBkYXRhID0gX19hc3NpZ24oe30sIGRhdGEpO1xuICAgICAgICBkYXRhLmJvZHlBID0gcmVzdG9yZShCb2R5LCBkYXRhLmJvZHlBLCB3b3JsZCk7XG4gICAgICAgIGRhdGEuYm9keUIgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUIsIHdvcmxkKTtcbiAgICAgICAgZGF0YS50YXJnZXQgPSBWZWMyLmNsb25lKGRhdGEudGFyZ2V0KTtcbiAgICAgICAgdmFyIGpvaW50ID0gbmV3IE1vdXNlSm9pbnQyKGRhdGEpO1xuICAgICAgICBpZiAoZGF0YS5fbG9jYWxBbmNob3JCKSB7XG4gICAgICAgICAgam9pbnQubV9sb2NhbEFuY2hvckIgPSBkYXRhLl9sb2NhbEFuY2hvckI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpvaW50O1xuICAgICAgfTtcbiAgICAgIE1vdXNlSm9pbnQyLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYubWF4Rm9yY2UpKSB7XG4gICAgICAgICAgdGhpcy5tX21heEZvcmNlID0gZGVmLm1heEZvcmNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLmZyZXF1ZW5jeUh6KSkge1xuICAgICAgICAgIHRoaXMubV9mcmVxdWVuY3lIeiA9IGRlZi5mcmVxdWVuY3lIejtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5kYW1waW5nUmF0aW8pKSB7XG4gICAgICAgICAgdGhpcy5tX2RhbXBpbmdSYXRpbyA9IGRlZi5kYW1waW5nUmF0aW87XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuc2V0VGFyZ2V0ID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgIGlmIChWZWMyLmFyZUVxdWFsKHRhcmdldCwgdGhpcy5tX3RhcmdldEEpKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5tX2JvZHlCLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB0aGlzLm1fdGFyZ2V0QS5zZXQodGFyZ2V0KTtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuZ2V0VGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fdGFyZ2V0QTtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuc2V0TWF4Rm9yY2UgPSBmdW5jdGlvbihmb3JjZSkge1xuICAgICAgICB0aGlzLm1fbWF4Rm9yY2UgPSBmb3JjZTtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuZ2V0TWF4Rm9yY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9tYXhGb3JjZTtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuc2V0RnJlcXVlbmN5ID0gZnVuY3Rpb24oaHopIHtcbiAgICAgICAgdGhpcy5tX2ZyZXF1ZW5jeUh6ID0gaHo7XG4gICAgICB9O1xuICAgICAgTW91c2VKb2ludDIucHJvdG90eXBlLmdldEZyZXF1ZW5jeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2ZyZXF1ZW5jeUh6O1xuICAgICAgfTtcbiAgICAgIE1vdXNlSm9pbnQyLnByb3RvdHlwZS5zZXREYW1waW5nUmF0aW8gPSBmdW5jdGlvbihyYXRpbykge1xuICAgICAgICB0aGlzLm1fZGFtcGluZ1JhdGlvID0gcmF0aW87XG4gICAgICB9O1xuICAgICAgTW91c2VKb2ludDIucHJvdG90eXBlLmdldERhbXBpbmdSYXRpbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2RhbXBpbmdSYXRpbztcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuZ2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gVmVjMi5jbG9uZSh0aGlzLm1fdGFyZ2V0QSk7XG4gICAgICB9O1xuICAgICAgTW91c2VKb2ludDIucHJvdG90eXBlLmdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5nZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckIpO1xuICAgICAgfTtcbiAgICAgIE1vdXNlSm9pbnQyLnByb3RvdHlwZS5nZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBWZWMyLm11bE51bVZlYzIoaW52X2R0LCB0aGlzLm1faW1wdWxzZSk7XG4gICAgICB9O1xuICAgICAgTW91c2VKb2ludDIucHJvdG90eXBlLmdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBpbnZfZHQgKiAwO1xuICAgICAgfTtcbiAgICAgIE1vdXNlSm9pbnQyLnByb3RvdHlwZS5zaGlmdE9yaWdpbiA9IGZ1bmN0aW9uKG5ld09yaWdpbikge1xuICAgICAgICB0aGlzLm1fdGFyZ2V0QS5zdWIobmV3T3JpZ2luKTtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuaW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHRoaXMubV9sb2NhbENlbnRlckIgPSB0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICAgICAgdGhpcy5tX2ludk1hc3NCID0gdGhpcy5tX2JvZHlCLm1faW52TWFzcztcbiAgICAgICAgdGhpcy5tX2ludklCID0gdGhpcy5tX2JvZHlCLm1faW52STtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb247XG4gICAgICAgIHZhciB2ZWxvY2l0eSA9IHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5O1xuICAgICAgICB2YXIgY0IyID0gcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFCID0gcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHZCMiA9IHZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QiA9IHZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB2YXIgbWFzcyA9IHRoaXMubV9ib2R5Qi5nZXRNYXNzKCk7XG4gICAgICAgIHZhciBvbWVnYSA9IDIgKiBtYXRoX1BJJDIgKiB0aGlzLm1fZnJlcXVlbmN5SHo7XG4gICAgICAgIHZhciBkMiA9IDIgKiBtYXNzICogdGhpcy5tX2RhbXBpbmdSYXRpbyAqIG9tZWdhO1xuICAgICAgICB2YXIgayA9IG1hc3MgKiAob21lZ2EgKiBvbWVnYSk7XG4gICAgICAgIHZhciBoID0gc3RlcC5kdDtcbiAgICAgICAgdGhpcy5tX2dhbW1hID0gaCAqIChkMiArIGggKiBrKTtcbiAgICAgICAgaWYgKHRoaXMubV9nYW1tYSAhPSAwKSB7XG4gICAgICAgICAgdGhpcy5tX2dhbW1hID0gMSAvIHRoaXMubV9nYW1tYTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYmV0YSA9IGggKiBrICogdGhpcy5tX2dhbW1hO1xuICAgICAgICB0aGlzLm1fckIgPSBSb3QubXVsVmVjMihxQiwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQikpO1xuICAgICAgICB2YXIgSyA9IG5ldyBNYXQyMigpO1xuICAgICAgICBLLmV4LnggPSB0aGlzLm1faW52TWFzc0IgKyB0aGlzLm1faW52SUIgKiB0aGlzLm1fckIueSAqIHRoaXMubV9yQi55ICsgdGhpcy5tX2dhbW1hO1xuICAgICAgICBLLmV4LnkgPSAtdGhpcy5tX2ludklCICogdGhpcy5tX3JCLnggKiB0aGlzLm1fckIueTtcbiAgICAgICAgSy5leS54ID0gSy5leC55O1xuICAgICAgICBLLmV5LnkgPSB0aGlzLm1faW52TWFzc0IgKyB0aGlzLm1faW52SUIgKiB0aGlzLm1fckIueCAqIHRoaXMubV9yQi54ICsgdGhpcy5tX2dhbW1hO1xuICAgICAgICB0aGlzLm1fbWFzcyA9IEsuZ2V0SW52ZXJzZSgpO1xuICAgICAgICB0aGlzLm1fQy5zZXRWZWMyKGNCMik7XG4gICAgICAgIHRoaXMubV9DLmFkZENvbWJpbmUoMSwgdGhpcy5tX3JCLCAtMSwgdGhpcy5tX3RhcmdldEEpO1xuICAgICAgICB0aGlzLm1fQy5tdWwodGhpcy5tX2JldGEpO1xuICAgICAgICB3QiAqPSAwLjk4O1xuICAgICAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS5tdWwoc3RlcC5kdFJhdGlvKTtcbiAgICAgICAgICB2QjIuYWRkTXVsKHRoaXMubV9pbnZNYXNzQiwgdGhpcy5tX2ltcHVsc2UpO1xuICAgICAgICAgIHdCICs9IHRoaXMubV9pbnZJQiAqIFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckIsIHRoaXMubV9pbXB1bHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS5zZXRaZXJvKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmVsb2NpdHkudi5zZXRWZWMyKHZCMik7XG4gICAgICAgIHZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuc29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgdmVsb2NpdHkgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eTtcbiAgICAgICAgdmFyIHZCMiA9IFZlYzIuY2xvbmUodmVsb2NpdHkudik7XG4gICAgICAgIHZhciB3QiA9IHZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBDZG90ID0gVmVjMi5jcm9zc051bVZlYzIod0IsIHRoaXMubV9yQik7XG4gICAgICAgIENkb3QuYWRkKHZCMik7XG4gICAgICAgIENkb3QuYWRkQ29tYmluZSgxLCB0aGlzLm1fQywgdGhpcy5tX2dhbW1hLCB0aGlzLm1faW1wdWxzZSk7XG4gICAgICAgIENkb3QubmVnKCk7XG4gICAgICAgIHZhciBpbXB1bHNlID0gTWF0MjIubXVsVmVjMih0aGlzLm1fbWFzcywgQ2RvdCk7XG4gICAgICAgIHZhciBvbGRJbXB1bHNlID0gVmVjMi5jbG9uZSh0aGlzLm1faW1wdWxzZSk7XG4gICAgICAgIHRoaXMubV9pbXB1bHNlLmFkZChpbXB1bHNlKTtcbiAgICAgICAgdmFyIG1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heEZvcmNlO1xuICAgICAgICB0aGlzLm1faW1wdWxzZS5jbGFtcChtYXhJbXB1bHNlKTtcbiAgICAgICAgaW1wdWxzZSA9IFZlYzIuc3ViKHRoaXMubV9pbXB1bHNlLCBvbGRJbXB1bHNlKTtcbiAgICAgICAgdkIyLmFkZE11bCh0aGlzLm1faW52TWFzc0IsIGltcHVsc2UpO1xuICAgICAgICB3QiArPSB0aGlzLm1faW52SUIgKiBWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JCLCBpbXB1bHNlKTtcbiAgICAgICAgdmVsb2NpdHkudi5zZXRWZWMyKHZCMik7XG4gICAgICAgIHZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5wcm90b3R5cGUuc29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBNb3VzZUpvaW50Mi5UWVBFID0gXCJtb3VzZS1qb2ludFwiO1xuICAgICAgcmV0dXJuIE1vdXNlSm9pbnQyO1xuICAgIH0oSm9pbnQpXG4gICk7XG4gIHZhciBtYXRoX2FicyQyID0gTWF0aC5hYnM7XG4gIHZhciBERUZBVUxUUyQzID0ge1xuICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWVcbiAgfTtcbiAgdmFyIFB1bGxleUpvaW50ID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbihfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhQdWxsZXlKb2ludDIsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBQdWxsZXlKb2ludDIoZGVmLCBib2R5QSwgYm9keUIsIGdyb3VuZEEsIGdyb3VuZEIsIGFuY2hvckEsIGFuY2hvckIsIHJhdGlvKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghKF90aGlzIGluc3RhbmNlb2YgUHVsbGV5Sm9pbnQyKSkge1xuICAgICAgICAgIHJldHVybiBuZXcgUHVsbGV5Sm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCBncm91bmRBLCBncm91bmRCLCBhbmNob3JBLCBhbmNob3JCLCByYXRpbyk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmID0gb3B0aW9ucyhkZWYsIERFRkFVTFRTJDMpO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlZiwgYm9keUEsIGJvZHlCKSB8fCB0aGlzO1xuICAgICAgICBib2R5QSA9IF90aGlzLm1fYm9keUE7XG4gICAgICAgIGJvZHlCID0gX3RoaXMubV9ib2R5QjtcbiAgICAgICAgX3RoaXMubV90eXBlID0gUHVsbGV5Sm9pbnQyLlRZUEU7XG4gICAgICAgIF90aGlzLm1fZ3JvdW5kQW5jaG9yQSA9IFZlYzIuY2xvbmUoZ3JvdW5kQSA/IGdyb3VuZEEgOiBkZWYuZ3JvdW5kQW5jaG9yQSB8fCBWZWMyLm5lbygtMSwgMSkpO1xuICAgICAgICBfdGhpcy5tX2dyb3VuZEFuY2hvckIgPSBWZWMyLmNsb25lKGdyb3VuZEIgPyBncm91bmRCIDogZGVmLmdyb3VuZEFuY2hvckIgfHwgVmVjMi5uZW8oMSwgMSkpO1xuICAgICAgICBfdGhpcy5tX2xvY2FsQW5jaG9yQSA9IFZlYzIuY2xvbmUoYW5jaG9yQSA/IGJvZHlBLmdldExvY2FsUG9pbnQoYW5jaG9yQSkgOiBkZWYubG9jYWxBbmNob3JBIHx8IFZlYzIubmVvKC0xLCAwKSk7XG4gICAgICAgIF90aGlzLm1fbG9jYWxBbmNob3JCID0gVmVjMi5jbG9uZShhbmNob3JCID8gYm9keUIuZ2V0TG9jYWxQb2ludChhbmNob3JCKSA6IGRlZi5sb2NhbEFuY2hvckIgfHwgVmVjMi5uZW8oMSwgMCkpO1xuICAgICAgICBfdGhpcy5tX2xlbmd0aEEgPSBOdW1iZXIuaXNGaW5pdGUoZGVmLmxlbmd0aEEpID8gZGVmLmxlbmd0aEEgOiBWZWMyLmRpc3RhbmNlKGFuY2hvckEsIGdyb3VuZEEpO1xuICAgICAgICBfdGhpcy5tX2xlbmd0aEIgPSBOdW1iZXIuaXNGaW5pdGUoZGVmLmxlbmd0aEIpID8gZGVmLmxlbmd0aEIgOiBWZWMyLmRpc3RhbmNlKGFuY2hvckIsIGdyb3VuZEIpO1xuICAgICAgICBfdGhpcy5tX3JhdGlvID0gTnVtYmVyLmlzRmluaXRlKHJhdGlvKSA/IHJhdGlvIDogZGVmLnJhdGlvO1xuICAgICAgICBfdGhpcy5tX2NvbnN0YW50ID0gX3RoaXMubV9sZW5ndGhBICsgX3RoaXMubV9yYXRpbyAqIF90aGlzLm1fbGVuZ3RoQjtcbiAgICAgICAgX3RoaXMubV9pbXB1bHNlID0gMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgUHVsbGV5Sm9pbnQyLnByb3RvdHlwZS5fc2VyaWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5tX3R5cGUsXG4gICAgICAgICAgYm9keUE6IHRoaXMubV9ib2R5QSxcbiAgICAgICAgICBib2R5QjogdGhpcy5tX2JvZHlCLFxuICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkLFxuICAgICAgICAgIGdyb3VuZEFuY2hvckE6IHRoaXMubV9ncm91bmRBbmNob3JBLFxuICAgICAgICAgIGdyb3VuZEFuY2hvckI6IHRoaXMubV9ncm91bmRBbmNob3JCLFxuICAgICAgICAgIGxvY2FsQW5jaG9yQTogdGhpcy5tX2xvY2FsQW5jaG9yQSxcbiAgICAgICAgICBsb2NhbEFuY2hvckI6IHRoaXMubV9sb2NhbEFuY2hvckIsXG4gICAgICAgICAgbGVuZ3RoQTogdGhpcy5tX2xlbmd0aEEsXG4gICAgICAgICAgbGVuZ3RoQjogdGhpcy5tX2xlbmd0aEIsXG4gICAgICAgICAgcmF0aW86IHRoaXMubV9yYXRpb1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIFB1bGxleUpvaW50Mi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCB3b3JsZCwgcmVzdG9yZSkge1xuICAgICAgICBkYXRhID0gX19hc3NpZ24oe30sIGRhdGEpO1xuICAgICAgICBkYXRhLmJvZHlBID0gcmVzdG9yZShCb2R5LCBkYXRhLmJvZHlBLCB3b3JsZCk7XG4gICAgICAgIGRhdGEuYm9keUIgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUIsIHdvcmxkKTtcbiAgICAgICAgdmFyIGpvaW50ID0gbmV3IFB1bGxleUpvaW50MihkYXRhKTtcbiAgICAgICAgcmV0dXJuIGpvaW50O1xuICAgICAgfTtcbiAgICAgIFB1bGxleUpvaW50Mi5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24oZGVmKSB7XG4gICAgICAgIGlmIChWZWMyLmlzVmFsaWQoZGVmLmdyb3VuZEFuY2hvckEpKSB7XG4gICAgICAgICAgdGhpcy5tX2dyb3VuZEFuY2hvckEuc2V0KGRlZi5ncm91bmRBbmNob3JBKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoVmVjMi5pc1ZhbGlkKGRlZi5ncm91bmRBbmNob3JCKSkge1xuICAgICAgICAgIHRoaXMubV9ncm91bmRBbmNob3JCLnNldChkZWYuZ3JvdW5kQW5jaG9yQik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFZlYzIuaXNWYWxpZChkZWYubG9jYWxBbmNob3JBKSkge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckEuc2V0KGRlZi5sb2NhbEFuY2hvckEpO1xuICAgICAgICB9IGVsc2UgaWYgKFZlYzIuaXNWYWxpZChkZWYuYW5jaG9yQSkpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JBLnNldCh0aGlzLm1fYm9keUEuZ2V0TG9jYWxQb2ludChkZWYuYW5jaG9yQSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChWZWMyLmlzVmFsaWQoZGVmLmxvY2FsQW5jaG9yQikpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JCLnNldChkZWYubG9jYWxBbmNob3JCKTtcbiAgICAgICAgfSBlbHNlIGlmIChWZWMyLmlzVmFsaWQoZGVmLmFuY2hvckIpKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5zZXQodGhpcy5tX2JvZHlCLmdldExvY2FsUG9pbnQoZGVmLmFuY2hvckIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5sZW5ndGhBKSkge1xuICAgICAgICAgIHRoaXMubV9sZW5ndGhBID0gZGVmLmxlbmd0aEE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYubGVuZ3RoQikpIHtcbiAgICAgICAgICB0aGlzLm1fbGVuZ3RoQiA9IGRlZi5sZW5ndGhCO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLnJhdGlvKSkge1xuICAgICAgICAgIHRoaXMubV9yYXRpbyA9IGRlZi5yYXRpbztcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFB1bGxleUpvaW50Mi5wcm90b3R5cGUuZ2V0R3JvdW5kQW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2dyb3VuZEFuY2hvckE7XG4gICAgICB9O1xuICAgICAgUHVsbGV5Sm9pbnQyLnByb3RvdHlwZS5nZXRHcm91bmRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZ3JvdW5kQW5jaG9yQjtcbiAgICAgIH07XG4gICAgICBQdWxsZXlKb2ludDIucHJvdG90eXBlLmdldExlbmd0aEEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sZW5ndGhBO1xuICAgICAgfTtcbiAgICAgIFB1bGxleUpvaW50Mi5wcm90b3R5cGUuZ2V0TGVuZ3RoQiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2xlbmd0aEI7XG4gICAgICB9O1xuICAgICAgUHVsbGV5Sm9pbnQyLnByb3RvdHlwZS5nZXRSYXRpbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX3JhdGlvO1xuICAgICAgfTtcbiAgICAgIFB1bGxleUpvaW50Mi5wcm90b3R5cGUuZ2V0Q3VycmVudExlbmd0aEEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHAgPSB0aGlzLm1fYm9keUEuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBKTtcbiAgICAgICAgdmFyIHMyID0gdGhpcy5tX2dyb3VuZEFuY2hvckE7XG4gICAgICAgIHJldHVybiBWZWMyLmRpc3RhbmNlKHAsIHMyKTtcbiAgICAgIH07XG4gICAgICBQdWxsZXlKb2ludDIucHJvdG90eXBlLmdldEN1cnJlbnRMZW5ndGhCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwID0gdGhpcy5tX2JvZHlCLmdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQik7XG4gICAgICAgIHZhciBzMiA9IHRoaXMubV9ncm91bmRBbmNob3JCO1xuICAgICAgICByZXR1cm4gVmVjMi5kaXN0YW5jZShwLCBzMik7XG4gICAgICB9O1xuICAgICAgUHVsbGV5Sm9pbnQyLnByb3RvdHlwZS5zaGlmdE9yaWdpbiA9IGZ1bmN0aW9uKG5ld09yaWdpbikge1xuICAgICAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yQS5zdWIobmV3T3JpZ2luKTtcbiAgICAgICAgdGhpcy5tX2dyb3VuZEFuY2hvckIuc3ViKG5ld09yaWdpbik7XG4gICAgICB9O1xuICAgICAgUHVsbGV5Sm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUEuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBKTtcbiAgICAgIH07XG4gICAgICBQdWxsZXlKb2ludDIucHJvdG90eXBlLmdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5nZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckIpO1xuICAgICAgfTtcbiAgICAgIFB1bGxleUpvaW50Mi5wcm90b3R5cGUuZ2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgICAgICByZXR1cm4gVmVjMi5tdWxOdW1WZWMyKHRoaXMubV9pbXB1bHNlLCB0aGlzLm1fdUIpLm11bChpbnZfZHQpO1xuICAgICAgfTtcbiAgICAgIFB1bGxleUpvaW50Mi5wcm90b3R5cGUuZ2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9O1xuICAgICAgUHVsbGV5Sm9pbnQyLnByb3RvdHlwZS5pbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdGhpcy5tX2xvY2FsQ2VudGVyQSA9IHRoaXMubV9ib2R5QS5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgICB0aGlzLm1fbG9jYWxDZW50ZXJCID0gdGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZJQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XG4gICAgICAgIHRoaXMubV9pbnZJQiA9IHRoaXMubV9ib2R5Qi5tX2ludkk7XG4gICAgICAgIHZhciBjQTIgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUEgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkEyID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdBID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIGNCMiA9IHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmM7XG4gICAgICAgIHZhciBhQiA9IHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciB2QjIgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgcUEgPSBSb3QubmVvKGFBKTtcbiAgICAgICAgdmFyIHFCID0gUm90Lm5lbyhhQik7XG4gICAgICAgIHRoaXMubV9yQSA9IFJvdC5tdWxWZWMyKHFBLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBKSk7XG4gICAgICAgIHRoaXMubV9yQiA9IFJvdC5tdWxWZWMyKHFCLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKSk7XG4gICAgICAgIHRoaXMubV91QSA9IFZlYzIuc3ViKFZlYzIuYWRkKGNBMiwgdGhpcy5tX3JBKSwgdGhpcy5tX2dyb3VuZEFuY2hvckEpO1xuICAgICAgICB0aGlzLm1fdUIgPSBWZWMyLnN1YihWZWMyLmFkZChjQjIsIHRoaXMubV9yQiksIHRoaXMubV9ncm91bmRBbmNob3JCKTtcbiAgICAgICAgdmFyIGxlbmd0aEEgPSB0aGlzLm1fdUEubGVuZ3RoKCk7XG4gICAgICAgIHZhciBsZW5ndGhCID0gdGhpcy5tX3VCLmxlbmd0aCgpO1xuICAgICAgICBpZiAobGVuZ3RoQSA+IDEwICogU2V0dGluZ3NJbnRlcm5hbC5saW5lYXJTbG9wKSB7XG4gICAgICAgICAgdGhpcy5tX3VBLm11bCgxIC8gbGVuZ3RoQSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX3VBLnNldFplcm8oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoQiA+IDEwICogU2V0dGluZ3NJbnRlcm5hbC5saW5lYXJTbG9wKSB7XG4gICAgICAgICAgdGhpcy5tX3VCLm11bCgxIC8gbGVuZ3RoQik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX3VCLnNldFplcm8oKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcnVBID0gVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgdGhpcy5tX3VBKTtcbiAgICAgICAgdmFyIHJ1QiA9IFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckIsIHRoaXMubV91Qik7XG4gICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQSArIHRoaXMubV9pbnZJQSAqIHJ1QSAqIHJ1QTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy5tX2ludk1hc3NCICsgdGhpcy5tX2ludklCICogcnVCICogcnVCO1xuICAgICAgICB0aGlzLm1fbWFzcyA9IG1BICsgdGhpcy5tX3JhdGlvICogdGhpcy5tX3JhdGlvICogbUI7XG4gICAgICAgIGlmICh0aGlzLm1fbWFzcyA+IDApIHtcbiAgICAgICAgICB0aGlzLm1fbWFzcyA9IDEgLyB0aGlzLm1fbWFzcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICAgICAgdmFyIFBBID0gVmVjMi5tdWxOdW1WZWMyKC10aGlzLm1faW1wdWxzZSwgdGhpcy5tX3VBKTtcbiAgICAgICAgICB2YXIgUEIgPSBWZWMyLm11bE51bVZlYzIoLXRoaXMubV9yYXRpbyAqIHRoaXMubV9pbXB1bHNlLCB0aGlzLm1fdUIpO1xuICAgICAgICAgIHZBMi5hZGRNdWwodGhpcy5tX2ludk1hc3NBLCBQQSk7XG4gICAgICAgICAgd0EgKz0gdGhpcy5tX2ludklBICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgUEEpO1xuICAgICAgICAgIHZCMi5hZGRNdWwodGhpcy5tX2ludk1hc3NCLCBQQik7XG4gICAgICAgICAgd0IgKz0gdGhpcy5tX2ludklCICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgUEIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52ID0gdkEyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYgPSB2QjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBQdWxsZXlKb2ludDIucHJvdG90eXBlLnNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdmFyIHZBMiA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QSA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciB2QjIgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgdnBBID0gVmVjMi5hZGQodkEyLCBWZWMyLmNyb3NzTnVtVmVjMih3QSwgdGhpcy5tX3JBKSk7XG4gICAgICAgIHZhciB2cEIgPSBWZWMyLmFkZCh2QjIsIFZlYzIuY3Jvc3NOdW1WZWMyKHdCLCB0aGlzLm1fckIpKTtcbiAgICAgICAgdmFyIENkb3QgPSAtVmVjMi5kb3QodGhpcy5tX3VBLCB2cEEpIC0gdGhpcy5tX3JhdGlvICogVmVjMi5kb3QodGhpcy5tX3VCLCB2cEIpO1xuICAgICAgICB2YXIgaW1wdWxzZSA9IC10aGlzLm1fbWFzcyAqIENkb3Q7XG4gICAgICAgIHRoaXMubV9pbXB1bHNlICs9IGltcHVsc2U7XG4gICAgICAgIHZhciBQQSA9IFZlYzIubXVsTnVtVmVjMigtaW1wdWxzZSwgdGhpcy5tX3VBKTtcbiAgICAgICAgdmFyIFBCID0gVmVjMi5tdWxOdW1WZWMyKC10aGlzLm1fcmF0aW8gKiBpbXB1bHNlLCB0aGlzLm1fdUIpO1xuICAgICAgICB2QTIuYWRkTXVsKHRoaXMubV9pbnZNYXNzQSwgUEEpO1xuICAgICAgICB3QSArPSB0aGlzLm1faW52SUEgKiBWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JBLCBQQSk7XG4gICAgICAgIHZCMi5hZGRNdWwodGhpcy5tX2ludk1hc3NCLCBQQik7XG4gICAgICAgIHdCICs9IHRoaXMubV9pbnZJQiAqIFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckIsIFBCKTtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudiA9IHZBMjtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudyA9IHdBO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52ID0gdkIyO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53ID0gd0I7XG4gICAgICB9O1xuICAgICAgUHVsbGV5Sm9pbnQyLnByb3RvdHlwZS5zb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciBjQTIgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUEgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgY0IyID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFCID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB2YXIgckEyID0gUm90Lm11bFZlYzIocUEsIFZlYzIuc3ViKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEpKTtcbiAgICAgICAgdmFyIHJCMiA9IFJvdC5tdWxWZWMyKHFCLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKSk7XG4gICAgICAgIHZhciB1QSA9IFZlYzIuc3ViKFZlYzIuYWRkKGNBMiwgdGhpcy5tX3JBKSwgdGhpcy5tX2dyb3VuZEFuY2hvckEpO1xuICAgICAgICB2YXIgdUIgPSBWZWMyLnN1YihWZWMyLmFkZChjQjIsIHRoaXMubV9yQiksIHRoaXMubV9ncm91bmRBbmNob3JCKTtcbiAgICAgICAgdmFyIGxlbmd0aEEgPSB1QS5sZW5ndGgoKTtcbiAgICAgICAgdmFyIGxlbmd0aEIgPSB1Qi5sZW5ndGgoKTtcbiAgICAgICAgaWYgKGxlbmd0aEEgPiAxMCAqIFNldHRpbmdzSW50ZXJuYWwubGluZWFyU2xvcCkge1xuICAgICAgICAgIHVBLm11bCgxIC8gbGVuZ3RoQSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdUEuc2V0WmVybygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGhCID4gMTAgKiBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3ApIHtcbiAgICAgICAgICB1Qi5tdWwoMSAvIGxlbmd0aEIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVCLnNldFplcm8oKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcnVBID0gVmVjMi5jcm9zc1ZlYzJWZWMyKHJBMiwgdUEpO1xuICAgICAgICB2YXIgcnVCID0gVmVjMi5jcm9zc1ZlYzJWZWMyKHJCMiwgdUIpO1xuICAgICAgICB2YXIgbUEgPSB0aGlzLm1faW52TWFzc0EgKyB0aGlzLm1faW52SUEgKiBydUEgKiBydUE7XG4gICAgICAgIHZhciBtQiA9IHRoaXMubV9pbnZNYXNzQiArIHRoaXMubV9pbnZJQiAqIHJ1QiAqIHJ1QjtcbiAgICAgICAgdmFyIG1hc3MgPSBtQSArIHRoaXMubV9yYXRpbyAqIHRoaXMubV9yYXRpbyAqIG1CO1xuICAgICAgICBpZiAobWFzcyA+IDApIHtcbiAgICAgICAgICBtYXNzID0gMSAvIG1hc3M7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIEMgPSB0aGlzLm1fY29uc3RhbnQgLSBsZW5ndGhBIC0gdGhpcy5tX3JhdGlvICogbGVuZ3RoQjtcbiAgICAgICAgdmFyIGxpbmVhckVycm9yID0gbWF0aF9hYnMkMihDKTtcbiAgICAgICAgdmFyIGltcHVsc2UgPSAtbWFzcyAqIEM7XG4gICAgICAgIHZhciBQQSA9IFZlYzIubXVsTnVtVmVjMigtaW1wdWxzZSwgdUEpO1xuICAgICAgICB2YXIgUEIgPSBWZWMyLm11bE51bVZlYzIoLXRoaXMubV9yYXRpbyAqIGltcHVsc2UsIHVCKTtcbiAgICAgICAgY0EyLmFkZE11bCh0aGlzLm1faW52TWFzc0EsIFBBKTtcbiAgICAgICAgYUEgKz0gdGhpcy5tX2ludklBICogVmVjMi5jcm9zc1ZlYzJWZWMyKHJBMiwgUEEpO1xuICAgICAgICBjQjIuYWRkTXVsKHRoaXMubV9pbnZNYXNzQiwgUEIpO1xuICAgICAgICBhQiArPSB0aGlzLm1faW52SUIgKiBWZWMyLmNyb3NzVmVjMlZlYzIockIyLCBQQik7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmMgPSBjQTI7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmEgPSBhQTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYyA9IGNCMjtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYSA9IGFCO1xuICAgICAgICByZXR1cm4gbGluZWFyRXJyb3IgPCBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3A7XG4gICAgICB9O1xuICAgICAgUHVsbGV5Sm9pbnQyLlRZUEUgPSBcInB1bGxleS1qb2ludFwiO1xuICAgICAgcmV0dXJuIFB1bGxleUpvaW50MjtcbiAgICB9KEpvaW50KVxuICApO1xuICB2YXIgbWF0aF9taW4kMSA9IE1hdGgubWluO1xuICB2YXIgTGltaXRTdGF0ZTtcbiAgKGZ1bmN0aW9uKExpbWl0U3RhdGUyKSB7XG4gICAgTGltaXRTdGF0ZTJbTGltaXRTdGF0ZTJbXCJpbmFjdGl2ZUxpbWl0XCJdID0gMF0gPSBcImluYWN0aXZlTGltaXRcIjtcbiAgICBMaW1pdFN0YXRlMltMaW1pdFN0YXRlMltcImF0TG93ZXJMaW1pdFwiXSA9IDFdID0gXCJhdExvd2VyTGltaXRcIjtcbiAgICBMaW1pdFN0YXRlMltMaW1pdFN0YXRlMltcImF0VXBwZXJMaW1pdFwiXSA9IDJdID0gXCJhdFVwcGVyTGltaXRcIjtcbiAgICBMaW1pdFN0YXRlMltMaW1pdFN0YXRlMltcImVxdWFsTGltaXRzXCJdID0gM10gPSBcImVxdWFsTGltaXRzXCI7XG4gIH0pKExpbWl0U3RhdGUgfHwgKExpbWl0U3RhdGUgPSB7fSkpO1xuICB2YXIgREVGQVVMVFMkMiA9IHtcbiAgICBtYXhMZW5ndGg6IDBcbiAgfTtcbiAgdmFyIFJvcGVKb2ludCA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgICBfX2V4dGVuZHMoUm9wZUpvaW50MiwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIFJvcGVKb2ludDIoZGVmLCBib2R5QSwgYm9keUIsIGFuY2hvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIShfdGhpcyBpbnN0YW5jZW9mIFJvcGVKb2ludDIpKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBSb3BlSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIGRlZiA9IG9wdGlvbnMoZGVmLCBERUZBVUxUUyQyKTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZWYsIGJvZHlBLCBib2R5QikgfHwgdGhpcztcbiAgICAgICAgYm9keUEgPSBfdGhpcy5tX2JvZHlBO1xuICAgICAgICBib2R5QiA9IF90aGlzLm1fYm9keUI7XG4gICAgICAgIF90aGlzLm1fdHlwZSA9IFJvcGVKb2ludDIuVFlQRTtcbiAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckEgPSBWZWMyLmNsb25lKGFuY2hvciA/IGJvZHlBLmdldExvY2FsUG9pbnQoYW5jaG9yKSA6IGRlZi5sb2NhbEFuY2hvckEgfHwgVmVjMi5uZW8oLTEsIDApKTtcbiAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckIgPSBWZWMyLmNsb25lKGFuY2hvciA/IGJvZHlCLmdldExvY2FsUG9pbnQoYW5jaG9yKSA6IGRlZi5sb2NhbEFuY2hvckIgfHwgVmVjMi5uZW8oMSwgMCkpO1xuICAgICAgICBfdGhpcy5tX21heExlbmd0aCA9IGRlZi5tYXhMZW5ndGg7XG4gICAgICAgIF90aGlzLm1fbWFzcyA9IDA7XG4gICAgICAgIF90aGlzLm1faW1wdWxzZSA9IDA7XG4gICAgICAgIF90aGlzLm1fbGVuZ3RoID0gMDtcbiAgICAgICAgX3RoaXMubV9zdGF0ZSA9IExpbWl0U3RhdGUuaW5hY3RpdmVMaW1pdDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfVxuICAgICAgUm9wZUpvaW50Mi5wcm90b3R5cGUuX3NlcmlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IHRoaXMubV90eXBlLFxuICAgICAgICAgIGJvZHlBOiB0aGlzLm1fYm9keUEsXG4gICAgICAgICAgYm9keUI6IHRoaXMubV9ib2R5QixcbiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkOiB0aGlzLm1fY29sbGlkZUNvbm5lY3RlZCxcbiAgICAgICAgICBsb2NhbEFuY2hvckE6IHRoaXMubV9sb2NhbEFuY2hvckEsXG4gICAgICAgICAgbG9jYWxBbmNob3JCOiB0aGlzLm1fbG9jYWxBbmNob3JCLFxuICAgICAgICAgIG1heExlbmd0aDogdGhpcy5tX21heExlbmd0aFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIFJvcGVKb2ludDIuX2Rlc2VyaWFsaXplID0gZnVuY3Rpb24oZGF0YSwgd29ybGQsIHJlc3RvcmUpIHtcbiAgICAgICAgZGF0YSA9IF9fYXNzaWduKHt9LCBkYXRhKTtcbiAgICAgICAgZGF0YS5ib2R5QSA9IHJlc3RvcmUoQm9keSwgZGF0YS5ib2R5QSwgd29ybGQpO1xuICAgICAgICBkYXRhLmJvZHlCID0gcmVzdG9yZShCb2R5LCBkYXRhLmJvZHlCLCB3b3JsZCk7XG4gICAgICAgIHZhciBqb2ludCA9IG5ldyBSb3BlSm9pbnQyKGRhdGEpO1xuICAgICAgICByZXR1cm4gam9pbnQ7XG4gICAgICB9O1xuICAgICAgUm9wZUpvaW50Mi5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24oZGVmKSB7XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLm1heExlbmd0aCkpIHtcbiAgICAgICAgICB0aGlzLm1fbWF4TGVuZ3RoID0gZGVmLm1heExlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFJvcGVKb2ludDIucHJvdG90eXBlLmdldExvY2FsQW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2xvY2FsQW5jaG9yQTtcbiAgICAgIH07XG4gICAgICBSb3BlSm9pbnQyLnByb3RvdHlwZS5nZXRMb2NhbEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckI7XG4gICAgICB9O1xuICAgICAgUm9wZUpvaW50Mi5wcm90b3R5cGUuc2V0TWF4TGVuZ3RoID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgICAgIHRoaXMubV9tYXhMZW5ndGggPSBsZW5ndGg7XG4gICAgICB9O1xuICAgICAgUm9wZUpvaW50Mi5wcm90b3R5cGUuZ2V0TWF4TGVuZ3RoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbWF4TGVuZ3RoO1xuICAgICAgfTtcbiAgICAgIFJvcGVKb2ludDIucHJvdG90eXBlLmdldExpbWl0U3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9zdGF0ZTtcbiAgICAgIH07XG4gICAgICBSb3BlSm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUEuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBKTtcbiAgICAgIH07XG4gICAgICBSb3BlSm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUIuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgIH07XG4gICAgICBSb3BlSm9pbnQyLnByb3RvdHlwZS5nZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBWZWMyLm11bE51bVZlYzIodGhpcy5tX2ltcHVsc2UsIHRoaXMubV91KS5tdWwoaW52X2R0KTtcbiAgICAgIH07XG4gICAgICBSb3BlSm9pbnQyLnByb3RvdHlwZS5nZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH07XG4gICAgICBSb3BlSm9pbnQyLnByb3RvdHlwZS5pbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdGhpcy5tX2xvY2FsQ2VudGVyQSA9IHRoaXMubV9ib2R5QS5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgICB0aGlzLm1fbG9jYWxDZW50ZXJCID0gdGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZJQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XG4gICAgICAgIHRoaXMubV9pbnZJQiA9IHRoaXMubV9ib2R5Qi5tX2ludkk7XG4gICAgICAgIHZhciBjQTIgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUEgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkEyID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdBID0gdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIGNCMiA9IHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmM7XG4gICAgICAgIHZhciBhQiA9IHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciB2QjIgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgcUEgPSBSb3QubmVvKGFBKTtcbiAgICAgICAgdmFyIHFCID0gUm90Lm5lbyhhQik7XG4gICAgICAgIHRoaXMubV9yQSA9IFJvdC5tdWxTdWIocUEsIHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEpO1xuICAgICAgICB0aGlzLm1fckIgPSBSb3QubXVsU3ViKHFCLCB0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKTtcbiAgICAgICAgdGhpcy5tX3UgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgdGhpcy5tX3UuYWRkQ29tYmluZSgxLCBjQjIsIDEsIHRoaXMubV9yQik7XG4gICAgICAgIHRoaXMubV91LnN1YkNvbWJpbmUoMSwgY0EyLCAxLCB0aGlzLm1fckEpO1xuICAgICAgICB0aGlzLm1fbGVuZ3RoID0gdGhpcy5tX3UubGVuZ3RoKCk7XG4gICAgICAgIHZhciBDID0gdGhpcy5tX2xlbmd0aCAtIHRoaXMubV9tYXhMZW5ndGg7XG4gICAgICAgIGlmIChDID4gMCkge1xuICAgICAgICAgIHRoaXMubV9zdGF0ZSA9IExpbWl0U3RhdGUuYXRVcHBlckxpbWl0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9zdGF0ZSA9IExpbWl0U3RhdGUuaW5hY3RpdmVMaW1pdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2xlbmd0aCA+IFNldHRpbmdzSW50ZXJuYWwubGluZWFyU2xvcCkge1xuICAgICAgICAgIHRoaXMubV91Lm11bCgxIC8gdGhpcy5tX2xlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX3Uuc2V0WmVybygpO1xuICAgICAgICAgIHRoaXMubV9tYXNzID0gMDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZSA9IDA7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjckEgPSBWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JBLCB0aGlzLm1fdSk7XG4gICAgICAgIHZhciBjckIgPSBWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JCLCB0aGlzLm1fdSk7XG4gICAgICAgIHZhciBpbnZNYXNzID0gdGhpcy5tX2ludk1hc3NBICsgdGhpcy5tX2ludklBICogY3JBICogY3JBICsgdGhpcy5tX2ludk1hc3NCICsgdGhpcy5tX2ludklCICogY3JCICogY3JCO1xuICAgICAgICB0aGlzLm1fbWFzcyA9IGludk1hc3MgIT0gMCA/IDEgLyBpbnZNYXNzIDogMDtcbiAgICAgICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgICAgIHZhciBQMyA9IFZlYzIubXVsTnVtVmVjMih0aGlzLm1faW1wdWxzZSwgdGhpcy5tX3UpO1xuICAgICAgICAgIHZBMi5zdWJNdWwodGhpcy5tX2ludk1hc3NBLCBQMyk7XG4gICAgICAgICAgd0EgLT0gdGhpcy5tX2ludklBICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgUDMpO1xuICAgICAgICAgIHZCMi5hZGRNdWwodGhpcy5tX2ludk1hc3NCLCBQMyk7XG4gICAgICAgICAgd0IgKz0gdGhpcy5tX2ludklCICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgUDMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52LnNldFZlYzIodkEyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudyA9IHdBO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52LnNldFZlYzIodkIyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudyA9IHdCO1xuICAgICAgfTtcbiAgICAgIFJvcGVKb2ludDIucHJvdG90eXBlLnNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdmFyIHZBMiA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QSA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciB2QjIgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgdnBBID0gVmVjMi5hZGRDcm9zc051bVZlYzIodkEyLCB3QSwgdGhpcy5tX3JBKTtcbiAgICAgICAgdmFyIHZwQiA9IFZlYzIuYWRkQ3Jvc3NOdW1WZWMyKHZCMiwgd0IsIHRoaXMubV9yQik7XG4gICAgICAgIHZhciBDID0gdGhpcy5tX2xlbmd0aCAtIHRoaXMubV9tYXhMZW5ndGg7XG4gICAgICAgIHZhciBDZG90ID0gVmVjMi5kb3QodGhpcy5tX3UsIFZlYzIuc3ViKHZwQiwgdnBBKSk7XG4gICAgICAgIGlmIChDIDwgMCkge1xuICAgICAgICAgIENkb3QgKz0gc3RlcC5pbnZfZHQgKiBDO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbXB1bHNlID0gLXRoaXMubV9tYXNzICogQ2RvdDtcbiAgICAgICAgdmFyIG9sZEltcHVsc2UgPSB0aGlzLm1faW1wdWxzZTtcbiAgICAgICAgdGhpcy5tX2ltcHVsc2UgPSBtYXRoX21pbiQxKDAsIHRoaXMubV9pbXB1bHNlICsgaW1wdWxzZSk7XG4gICAgICAgIGltcHVsc2UgPSB0aGlzLm1faW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICAgIHZhciBQMyA9IFZlYzIubXVsTnVtVmVjMihpbXB1bHNlLCB0aGlzLm1fdSk7XG4gICAgICAgIHZBMi5zdWJNdWwodGhpcy5tX2ludk1hc3NBLCBQMyk7XG4gICAgICAgIHdBIC09IHRoaXMubV9pbnZJQSAqIFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckEsIFAzKTtcbiAgICAgICAgdkIyLmFkZE11bCh0aGlzLm1faW52TWFzc0IsIFAzKTtcbiAgICAgICAgd0IgKz0gdGhpcy5tX2ludklCICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQiwgUDMpO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52ID0gdkEyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYgPSB2QjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBSb3BlSm9pbnQyLnByb3RvdHlwZS5zb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciBjQTIgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUEgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgY0IyID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFCID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB2YXIgckEyID0gUm90Lm11bFN1YihxQSwgdGhpcy5tX2xvY2FsQW5jaG9yQSwgdGhpcy5tX2xvY2FsQ2VudGVyQSk7XG4gICAgICAgIHZhciByQjIgPSBSb3QubXVsU3ViKHFCLCB0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKTtcbiAgICAgICAgdmFyIHUgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgdS5hZGRDb21iaW5lKDEsIGNCMiwgMSwgckIyKTtcbiAgICAgICAgdS5zdWJDb21iaW5lKDEsIGNBMiwgMSwgckEyKTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHUubm9ybWFsaXplKCk7XG4gICAgICAgIHZhciBDID0gbGVuZ3RoIC0gdGhpcy5tX21heExlbmd0aDtcbiAgICAgICAgQyA9IGNsYW1wKEMsIDAsIFNldHRpbmdzSW50ZXJuYWwubWF4TGluZWFyQ29ycmVjdGlvbik7XG4gICAgICAgIHZhciBpbXB1bHNlID0gLXRoaXMubV9tYXNzICogQztcbiAgICAgICAgdmFyIFAzID0gVmVjMi5tdWxOdW1WZWMyKGltcHVsc2UsIHUpO1xuICAgICAgICBjQTIuc3ViTXVsKHRoaXMubV9pbnZNYXNzQSwgUDMpO1xuICAgICAgICBhQSAtPSB0aGlzLm1faW52SUEgKiBWZWMyLmNyb3NzVmVjMlZlYzIockEyLCBQMyk7XG4gICAgICAgIGNCMi5hZGRNdWwodGhpcy5tX2ludk1hc3NCLCBQMyk7XG4gICAgICAgIGFCICs9IHRoaXMubV9pbnZJQiAqIFZlYzIuY3Jvc3NWZWMyVmVjMihyQjIsIFAzKTtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYy5zZXRWZWMyKGNBMik7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmEgPSBhQTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYy5zZXRWZWMyKGNCMik7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmEgPSBhQjtcbiAgICAgICAgcmV0dXJuIGxlbmd0aCAtIHRoaXMubV9tYXhMZW5ndGggPCBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3A7XG4gICAgICB9O1xuICAgICAgUm9wZUpvaW50Mi5UWVBFID0gXCJyb3BlLWpvaW50XCI7XG4gICAgICByZXR1cm4gUm9wZUpvaW50MjtcbiAgICB9KEpvaW50KVxuICApO1xuICB2YXIgbWF0aF9hYnMkMSA9IE1hdGguYWJzO1xuICB2YXIgbWF0aF9QSSQxID0gTWF0aC5QSTtcbiAgdmFyIERFRkFVTFRTJDEgPSB7XG4gICAgZnJlcXVlbmN5SHo6IDAsXG4gICAgZGFtcGluZ1JhdGlvOiAwXG4gIH07XG4gIHZhciBXZWxkSm9pbnQgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKFdlbGRKb2ludDIsIF9zdXBlcik7XG4gICAgICBmdW5jdGlvbiBXZWxkSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCEoX3RoaXMgaW5zdGFuY2VvZiBXZWxkSm9pbnQyKSkge1xuICAgICAgICAgIHJldHVybiBuZXcgV2VsZEpvaW50MihkZWYsIGJvZHlBLCBib2R5QiwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICBkZWYgPSBvcHRpb25zKGRlZiwgREVGQVVMVFMkMSk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVmLCBib2R5QSwgYm9keUIpIHx8IHRoaXM7XG4gICAgICAgIGJvZHlBID0gX3RoaXMubV9ib2R5QTtcbiAgICAgICAgYm9keUIgPSBfdGhpcy5tX2JvZHlCO1xuICAgICAgICBfdGhpcy5tX3R5cGUgPSBXZWxkSm9pbnQyLlRZUEU7XG4gICAgICAgIF90aGlzLm1fbG9jYWxBbmNob3JBID0gVmVjMi5jbG9uZShhbmNob3IgPyBib2R5QS5nZXRMb2NhbFBvaW50KGFuY2hvcikgOiBkZWYubG9jYWxBbmNob3JBIHx8IFZlYzIuemVybygpKTtcbiAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckIgPSBWZWMyLmNsb25lKGFuY2hvciA/IGJvZHlCLmdldExvY2FsUG9pbnQoYW5jaG9yKSA6IGRlZi5sb2NhbEFuY2hvckIgfHwgVmVjMi56ZXJvKCkpO1xuICAgICAgICBfdGhpcy5tX3JlZmVyZW5jZUFuZ2xlID0gTnVtYmVyLmlzRmluaXRlKGRlZi5yZWZlcmVuY2VBbmdsZSkgPyBkZWYucmVmZXJlbmNlQW5nbGUgOiBib2R5Qi5nZXRBbmdsZSgpIC0gYm9keUEuZ2V0QW5nbGUoKTtcbiAgICAgICAgX3RoaXMubV9mcmVxdWVuY3lIeiA9IGRlZi5mcmVxdWVuY3lIejtcbiAgICAgICAgX3RoaXMubV9kYW1waW5nUmF0aW8gPSBkZWYuZGFtcGluZ1JhdGlvO1xuICAgICAgICBfdGhpcy5tX2ltcHVsc2UgPSBuZXcgVmVjMygpO1xuICAgICAgICBfdGhpcy5tX2JpYXMgPSAwO1xuICAgICAgICBfdGhpcy5tX2dhbW1hID0gMDtcbiAgICAgICAgX3RoaXMubV9tYXNzID0gbmV3IE1hdDMzKCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIFdlbGRKb2ludDIucHJvdG90eXBlLl9zZXJpYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiB0aGlzLm1fdHlwZSxcbiAgICAgICAgICBib2R5QTogdGhpcy5tX2JvZHlBLFxuICAgICAgICAgIGJvZHlCOiB0aGlzLm1fYm9keUIsXG4gICAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdGhpcy5tX2NvbGxpZGVDb25uZWN0ZWQsXG4gICAgICAgICAgZnJlcXVlbmN5SHo6IHRoaXMubV9mcmVxdWVuY3lIeixcbiAgICAgICAgICBkYW1waW5nUmF0aW86IHRoaXMubV9kYW1waW5nUmF0aW8sXG4gICAgICAgICAgbG9jYWxBbmNob3JBOiB0aGlzLm1fbG9jYWxBbmNob3JBLFxuICAgICAgICAgIGxvY2FsQW5jaG9yQjogdGhpcy5tX2xvY2FsQW5jaG9yQixcbiAgICAgICAgICByZWZlcmVuY2VBbmdsZTogdGhpcy5tX3JlZmVyZW5jZUFuZ2xlXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgV2VsZEpvaW50Mi5fZGVzZXJpYWxpemUgPSBmdW5jdGlvbihkYXRhLCB3b3JsZCwgcmVzdG9yZSkge1xuICAgICAgICBkYXRhID0gX19hc3NpZ24oe30sIGRhdGEpO1xuICAgICAgICBkYXRhLmJvZHlBID0gcmVzdG9yZShCb2R5LCBkYXRhLmJvZHlBLCB3b3JsZCk7XG4gICAgICAgIGRhdGEuYm9keUIgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUIsIHdvcmxkKTtcbiAgICAgICAgdmFyIGpvaW50ID0gbmV3IFdlbGRKb2ludDIoZGF0YSk7XG4gICAgICAgIHJldHVybiBqb2ludDtcbiAgICAgIH07XG4gICAgICBXZWxkSm9pbnQyLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbihkZWYpIHtcbiAgICAgICAgaWYgKGRlZi5hbmNob3JBKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5zZXRWZWMyKHRoaXMubV9ib2R5QS5nZXRMb2NhbFBvaW50KGRlZi5hbmNob3JBKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmLmxvY2FsQW5jaG9yQSkge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckEuc2V0VmVjMihkZWYubG9jYWxBbmNob3JBKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmFuY2hvckIpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JCLnNldFZlYzIodGhpcy5tX2JvZHlCLmdldExvY2FsUG9pbnQoZGVmLmFuY2hvckIpKTtcbiAgICAgICAgfSBlbHNlIGlmIChkZWYubG9jYWxBbmNob3JCKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5zZXRWZWMyKGRlZi5sb2NhbEFuY2hvckIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLmZyZXF1ZW5jeUh6KSkge1xuICAgICAgICAgIHRoaXMubV9mcmVxdWVuY3lIeiA9IGRlZi5mcmVxdWVuY3lIejtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5kYW1waW5nUmF0aW8pKSB7XG4gICAgICAgICAgdGhpcy5tX2RhbXBpbmdSYXRpbyA9IGRlZi5kYW1waW5nUmF0aW87XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBXZWxkSm9pbnQyLnByb3RvdHlwZS5nZXRMb2NhbEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9sb2NhbEFuY2hvckE7XG4gICAgICB9O1xuICAgICAgV2VsZEpvaW50Mi5wcm90b3R5cGUuZ2V0TG9jYWxBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JCO1xuICAgICAgfTtcbiAgICAgIFdlbGRKb2ludDIucHJvdG90eXBlLmdldFJlZmVyZW5jZUFuZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG4gICAgICB9O1xuICAgICAgV2VsZEpvaW50Mi5wcm90b3R5cGUuc2V0RnJlcXVlbmN5ID0gZnVuY3Rpb24oaHopIHtcbiAgICAgICAgdGhpcy5tX2ZyZXF1ZW5jeUh6ID0gaHo7XG4gICAgICB9O1xuICAgICAgV2VsZEpvaW50Mi5wcm90b3R5cGUuZ2V0RnJlcXVlbmN5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZnJlcXVlbmN5SHo7XG4gICAgICB9O1xuICAgICAgV2VsZEpvaW50Mi5wcm90b3R5cGUuc2V0RGFtcGluZ1JhdGlvID0gZnVuY3Rpb24ocmF0aW8pIHtcbiAgICAgICAgdGhpcy5tX2RhbXBpbmdSYXRpbyA9IHJhdGlvO1xuICAgICAgfTtcbiAgICAgIFdlbGRKb2ludDIucHJvdG90eXBlLmdldERhbXBpbmdSYXRpbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2RhbXBpbmdSYXRpbztcbiAgICAgIH07XG4gICAgICBXZWxkSm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUEuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBKTtcbiAgICAgIH07XG4gICAgICBXZWxkSm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUIuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgIH07XG4gICAgICBXZWxkSm9pbnQyLnByb3RvdHlwZS5nZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgICAgIHJldHVybiBWZWMyLm5lbyh0aGlzLm1faW1wdWxzZS54LCB0aGlzLm1faW1wdWxzZS55KS5tdWwoaW52X2R0KTtcbiAgICAgIH07XG4gICAgICBXZWxkSm9pbnQyLnByb3RvdHlwZS5nZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgICAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UuejtcbiAgICAgIH07XG4gICAgICBXZWxkSm9pbnQyLnByb3RvdHlwZS5pbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdGhpcy5tX2xvY2FsQ2VudGVyQSA9IHRoaXMubV9ib2R5QS5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgICAgICB0aGlzLm1fbG9jYWxDZW50ZXJCID0gdGhpcy5tX2JvZHlCLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQSA9IHRoaXMubV9ib2R5QS5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZNYXNzQiA9IHRoaXMubV9ib2R5Qi5tX2ludk1hc3M7XG4gICAgICAgIHRoaXMubV9pbnZJQSA9IHRoaXMubV9ib2R5QS5tX2ludkk7XG4gICAgICAgIHRoaXMubV9pbnZJQiA9IHRoaXMubV9ib2R5Qi5tX2ludkk7XG4gICAgICAgIHZhciBhQSA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciB2QTIgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0EgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB0aGlzLm1fckEgPSBSb3QubXVsVmVjMihxQSwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQSwgdGhpcy5tX2xvY2FsQ2VudGVyQSkpO1xuICAgICAgICB0aGlzLm1fckIgPSBSb3QubXVsVmVjMihxQiwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQikpO1xuICAgICAgICB2YXIgbUEgPSB0aGlzLm1faW52TWFzc0E7XG4gICAgICAgIHZhciBtQiA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICAgICAgdmFyIGlBID0gdGhpcy5tX2ludklBO1xuICAgICAgICB2YXIgaUIgPSB0aGlzLm1faW52SUI7XG4gICAgICAgIHZhciBLID0gbmV3IE1hdDMzKCk7XG4gICAgICAgIEsuZXgueCA9IG1BICsgbUIgKyB0aGlzLm1fckEueSAqIHRoaXMubV9yQS55ICogaUEgKyB0aGlzLm1fckIueSAqIHRoaXMubV9yQi55ICogaUI7XG4gICAgICAgIEsuZXkueCA9IC10aGlzLm1fckEueSAqIHRoaXMubV9yQS54ICogaUEgLSB0aGlzLm1fckIueSAqIHRoaXMubV9yQi54ICogaUI7XG4gICAgICAgIEsuZXoueCA9IC10aGlzLm1fckEueSAqIGlBIC0gdGhpcy5tX3JCLnkgKiBpQjtcbiAgICAgICAgSy5leC55ID0gSy5leS54O1xuICAgICAgICBLLmV5LnkgPSBtQSArIG1CICsgdGhpcy5tX3JBLnggKiB0aGlzLm1fckEueCAqIGlBICsgdGhpcy5tX3JCLnggKiB0aGlzLm1fckIueCAqIGlCO1xuICAgICAgICBLLmV6LnkgPSB0aGlzLm1fckEueCAqIGlBICsgdGhpcy5tX3JCLnggKiBpQjtcbiAgICAgICAgSy5leC56ID0gSy5lei54O1xuICAgICAgICBLLmV5LnogPSBLLmV6Lnk7XG4gICAgICAgIEsuZXoueiA9IGlBICsgaUI7XG4gICAgICAgIGlmICh0aGlzLm1fZnJlcXVlbmN5SHogPiAwKSB7XG4gICAgICAgICAgSy5nZXRJbnZlcnNlMjIodGhpcy5tX21hc3MpO1xuICAgICAgICAgIHZhciBpbnZNID0gaUEgKyBpQjtcbiAgICAgICAgICB2YXIgbSA9IGludk0gPiAwID8gMSAvIGludk0gOiAwO1xuICAgICAgICAgIHZhciBDID0gYUIgLSBhQSAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZTtcbiAgICAgICAgICB2YXIgb21lZ2EgPSAyICogbWF0aF9QSSQxICogdGhpcy5tX2ZyZXF1ZW5jeUh6O1xuICAgICAgICAgIHZhciBkMiA9IDIgKiBtICogdGhpcy5tX2RhbXBpbmdSYXRpbyAqIG9tZWdhO1xuICAgICAgICAgIHZhciBrID0gbSAqIG9tZWdhICogb21lZ2E7XG4gICAgICAgICAgdmFyIGggPSBzdGVwLmR0O1xuICAgICAgICAgIHRoaXMubV9nYW1tYSA9IGggKiAoZDIgKyBoICogayk7XG4gICAgICAgICAgdGhpcy5tX2dhbW1hID0gdGhpcy5tX2dhbW1hICE9IDAgPyAxIC8gdGhpcy5tX2dhbW1hIDogMDtcbiAgICAgICAgICB0aGlzLm1fYmlhcyA9IEMgKiBoICogayAqIHRoaXMubV9nYW1tYTtcbiAgICAgICAgICBpbnZNICs9IHRoaXMubV9nYW1tYTtcbiAgICAgICAgICB0aGlzLm1fbWFzcy5lei56ID0gaW52TSAhPSAwID8gMSAvIGludk0gOiAwO1xuICAgICAgICB9IGVsc2UgaWYgKEsuZXoueiA9PSAwKSB7XG4gICAgICAgICAgSy5nZXRJbnZlcnNlMjIodGhpcy5tX21hc3MpO1xuICAgICAgICAgIHRoaXMubV9nYW1tYSA9IDA7XG4gICAgICAgICAgdGhpcy5tX2JpYXMgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEsuZ2V0U3ltSW52ZXJzZTMzKHRoaXMubV9tYXNzKTtcbiAgICAgICAgICB0aGlzLm1fZ2FtbWEgPSAwO1xuICAgICAgICAgIHRoaXMubV9iaWFzID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS5tdWwoc3RlcC5kdFJhdGlvKTtcbiAgICAgICAgICB2YXIgUDMgPSBWZWMyLm5lbyh0aGlzLm1faW1wdWxzZS54LCB0aGlzLm1faW1wdWxzZS55KTtcbiAgICAgICAgICB2QTIuc3ViTXVsKG1BLCBQMyk7XG4gICAgICAgICAgd0EgLT0gaUEgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgUDMpICsgdGhpcy5tX2ltcHVsc2Uueik7XG4gICAgICAgICAgdkIyLmFkZE11bChtQiwgUDMpO1xuICAgICAgICAgIHdCICs9IGlCICogKFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckIsIFAzKSArIHRoaXMubV9pbXB1bHNlLnopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnNldFplcm8oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52ID0gdkEyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53ID0gd0E7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LnYgPSB2QjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBXZWxkSm9pbnQyLnByb3RvdHlwZS5zb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciB2QTIgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0EgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIG1BID0gdGhpcy5tX2ludk1hc3NBO1xuICAgICAgICB2YXIgbUIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgICAgIHZhciBpQSA9IHRoaXMubV9pbnZJQTtcbiAgICAgICAgdmFyIGlCID0gdGhpcy5tX2ludklCO1xuICAgICAgICBpZiAodGhpcy5tX2ZyZXF1ZW5jeUh6ID4gMCkge1xuICAgICAgICAgIHZhciBDZG90MiA9IHdCIC0gd0E7XG4gICAgICAgICAgdmFyIGltcHVsc2UyID0gLXRoaXMubV9tYXNzLmV6LnogKiAoQ2RvdDIgKyB0aGlzLm1fYmlhcyArIHRoaXMubV9nYW1tYSAqIHRoaXMubV9pbXB1bHNlLnopO1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogKz0gaW1wdWxzZTI7XG4gICAgICAgICAgd0EgLT0gaUEgKiBpbXB1bHNlMjtcbiAgICAgICAgICB3QiArPSBpQiAqIGltcHVsc2UyO1xuICAgICAgICAgIHZhciBDZG90MSA9IFZlYzIuemVybygpO1xuICAgICAgICAgIENkb3QxLmFkZENvbWJpbmUoMSwgdkIyLCAxLCBWZWMyLmNyb3NzTnVtVmVjMih3QiwgdGhpcy5tX3JCKSk7XG4gICAgICAgICAgQ2RvdDEuc3ViQ29tYmluZSgxLCB2QTIsIDEsIFZlYzIuY3Jvc3NOdW1WZWMyKHdBLCB0aGlzLm1fckEpKTtcbiAgICAgICAgICB2YXIgaW1wdWxzZTEgPSBWZWMyLm5lZyhNYXQzMy5tdWxWZWMyKHRoaXMubV9tYXNzLCBDZG90MSkpO1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gaW1wdWxzZTEueDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ICs9IGltcHVsc2UxLnk7XG4gICAgICAgICAgdmFyIFAzID0gVmVjMi5jbG9uZShpbXB1bHNlMSk7XG4gICAgICAgICAgdkEyLnN1Yk11bChtQSwgUDMpO1xuICAgICAgICAgIHdBIC09IGlBICogVmVjMi5jcm9zc1ZlYzJWZWMyKHRoaXMubV9yQSwgUDMpO1xuICAgICAgICAgIHZCMi5hZGRNdWwobUIsIFAzKTtcbiAgICAgICAgICB3QiArPSBpQiAqIFZlYzIuY3Jvc3NWZWMyVmVjMih0aGlzLm1fckIsIFAzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgQ2RvdDEgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgICBDZG90MS5hZGRDb21iaW5lKDEsIHZCMiwgMSwgVmVjMi5jcm9zc051bVZlYzIod0IsIHRoaXMubV9yQikpO1xuICAgICAgICAgIENkb3QxLnN1YkNvbWJpbmUoMSwgdkEyLCAxLCBWZWMyLmNyb3NzTnVtVmVjMih3QSwgdGhpcy5tX3JBKSk7XG4gICAgICAgICAgdmFyIENkb3QyID0gd0IgLSB3QTtcbiAgICAgICAgICB2YXIgQ2RvdCA9IG5ldyBWZWMzKENkb3QxLngsIENkb3QxLnksIENkb3QyKTtcbiAgICAgICAgICB2YXIgaW1wdWxzZSA9IFZlYzMubmVnKE1hdDMzLm11bFZlYzModGhpcy5tX21hc3MsIENkb3QpKTtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS5hZGQoaW1wdWxzZSk7XG4gICAgICAgICAgdmFyIFAzID0gVmVjMi5uZW8oaW1wdWxzZS54LCBpbXB1bHNlLnkpO1xuICAgICAgICAgIHZBMi5zdWJNdWwobUEsIFAzKTtcbiAgICAgICAgICB3QSAtPSBpQSAqIChWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JBLCBQMykgKyBpbXB1bHNlLnopO1xuICAgICAgICAgIHZCMi5hZGRNdWwobUIsIFAzKTtcbiAgICAgICAgICB3QiArPSBpQiAqIChWZWMyLmNyb3NzVmVjMlZlYzIodGhpcy5tX3JCLCBQMykgKyBpbXB1bHNlLnopO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnYgPSB2QTI7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LncgPSB3QTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudiA9IHZCMjtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudyA9IHdCO1xuICAgICAgfTtcbiAgICAgIFdlbGRKb2ludDIucHJvdG90eXBlLnNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICAgICAgdmFyIGNBMiA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmM7XG4gICAgICAgIHZhciBhQSA9IHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmE7XG4gICAgICAgIHZhciBjQjIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgcUEgPSBSb3QubmVvKGFBKTtcbiAgICAgICAgdmFyIHFCID0gUm90Lm5lbyhhQik7XG4gICAgICAgIHZhciBtQSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgICAgdmFyIG1CID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgICB2YXIgaUEgPSB0aGlzLm1faW52SUE7XG4gICAgICAgIHZhciBpQiA9IHRoaXMubV9pbnZJQjtcbiAgICAgICAgdmFyIHJBMiA9IFJvdC5tdWxWZWMyKHFBLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JBLCB0aGlzLm1fbG9jYWxDZW50ZXJBKSk7XG4gICAgICAgIHZhciByQjIgPSBSb3QubXVsVmVjMihxQiwgVmVjMi5zdWIodGhpcy5tX2xvY2FsQW5jaG9yQiwgdGhpcy5tX2xvY2FsQ2VudGVyQikpO1xuICAgICAgICB2YXIgcG9zaXRpb25FcnJvcjtcbiAgICAgICAgdmFyIGFuZ3VsYXJFcnJvcjtcbiAgICAgICAgdmFyIEsgPSBuZXcgTWF0MzMoKTtcbiAgICAgICAgSy5leC54ID0gbUEgKyBtQiArIHJBMi55ICogckEyLnkgKiBpQSArIHJCMi55ICogckIyLnkgKiBpQjtcbiAgICAgICAgSy5leS54ID0gLXJBMi55ICogckEyLnggKiBpQSAtIHJCMi55ICogckIyLnggKiBpQjtcbiAgICAgICAgSy5lei54ID0gLXJBMi55ICogaUEgLSByQjIueSAqIGlCO1xuICAgICAgICBLLmV4LnkgPSBLLmV5Lng7XG4gICAgICAgIEsuZXkueSA9IG1BICsgbUIgKyByQTIueCAqIHJBMi54ICogaUEgKyByQjIueCAqIHJCMi54ICogaUI7XG4gICAgICAgIEsuZXoueSA9IHJBMi54ICogaUEgKyByQjIueCAqIGlCO1xuICAgICAgICBLLmV4LnogPSBLLmV6Lng7XG4gICAgICAgIEsuZXkueiA9IEsuZXoueTtcbiAgICAgICAgSy5lei56ID0gaUEgKyBpQjtcbiAgICAgICAgaWYgKHRoaXMubV9mcmVxdWVuY3lIeiA+IDApIHtcbiAgICAgICAgICB2YXIgQzEgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgICBDMS5hZGRDb21iaW5lKDEsIGNCMiwgMSwgckIyKTtcbiAgICAgICAgICBDMS5zdWJDb21iaW5lKDEsIGNBMiwgMSwgckEyKTtcbiAgICAgICAgICBwb3NpdGlvbkVycm9yID0gQzEubGVuZ3RoKCk7XG4gICAgICAgICAgYW5ndWxhckVycm9yID0gMDtcbiAgICAgICAgICB2YXIgUDMgPSBWZWMyLm5lZyhLLnNvbHZlMjIoQzEpKTtcbiAgICAgICAgICBjQTIuc3ViTXVsKG1BLCBQMyk7XG4gICAgICAgICAgYUEgLT0gaUEgKiBWZWMyLmNyb3NzVmVjMlZlYzIockEyLCBQMyk7XG4gICAgICAgICAgY0IyLmFkZE11bChtQiwgUDMpO1xuICAgICAgICAgIGFCICs9IGlCICogVmVjMi5jcm9zc1ZlYzJWZWMyKHJCMiwgUDMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBDMSA9IFZlYzIuemVybygpO1xuICAgICAgICAgIEMxLmFkZENvbWJpbmUoMSwgY0IyLCAxLCByQjIpO1xuICAgICAgICAgIEMxLnN1YkNvbWJpbmUoMSwgY0EyLCAxLCByQTIpO1xuICAgICAgICAgIHZhciBDMiA9IGFCIC0gYUEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG4gICAgICAgICAgcG9zaXRpb25FcnJvciA9IEMxLmxlbmd0aCgpO1xuICAgICAgICAgIGFuZ3VsYXJFcnJvciA9IG1hdGhfYWJzJDEoQzIpO1xuICAgICAgICAgIHZhciBDID0gbmV3IFZlYzMoQzEueCwgQzEueSwgQzIpO1xuICAgICAgICAgIHZhciBpbXB1bHNlID0gbmV3IFZlYzMoKTtcbiAgICAgICAgICBpZiAoSy5lei56ID4gMCkge1xuICAgICAgICAgICAgaW1wdWxzZSA9IFZlYzMubmVnKEsuc29sdmUzMyhDKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpbXB1bHNlMiA9IFZlYzIubmVnKEsuc29sdmUyMihDMSkpO1xuICAgICAgICAgICAgaW1wdWxzZS5zZXQoaW1wdWxzZTIueCwgaW1wdWxzZTIueSwgMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBQMyA9IFZlYzIubmVvKGltcHVsc2UueCwgaW1wdWxzZS55KTtcbiAgICAgICAgICBjQTIuc3ViTXVsKG1BLCBQMyk7XG4gICAgICAgICAgYUEgLT0gaUEgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHJBMiwgUDMpICsgaW1wdWxzZS56KTtcbiAgICAgICAgICBjQjIuYWRkTXVsKG1CLCBQMyk7XG4gICAgICAgICAgYUIgKz0gaUIgKiAoVmVjMi5jcm9zc1ZlYzJWZWMyKHJCMiwgUDMpICsgaW1wdWxzZS56KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jID0gY0EyO1xuICAgICAgICB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5hID0gYUE7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmMgPSBjQjI7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmEgPSBhQjtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uRXJyb3IgPD0gU2V0dGluZ3NJbnRlcm5hbC5saW5lYXJTbG9wICYmIGFuZ3VsYXJFcnJvciA8PSBTZXR0aW5nc0ludGVybmFsLmFuZ3VsYXJTbG9wO1xuICAgICAgfTtcbiAgICAgIFdlbGRKb2ludDIuVFlQRSA9IFwid2VsZC1qb2ludFwiO1xuICAgICAgcmV0dXJuIFdlbGRKb2ludDI7XG4gICAgfShKb2ludClcbiAgKTtcbiAgdmFyIG1hdGhfYWJzID0gTWF0aC5hYnM7XG4gIHZhciBtYXRoX1BJID0gTWF0aC5QSTtcbiAgdmFyIERFRkFVTFRTID0ge1xuICAgIGVuYWJsZU1vdG9yOiBmYWxzZSxcbiAgICBtYXhNb3RvclRvcnF1ZTogMCxcbiAgICBtb3RvclNwZWVkOiAwLFxuICAgIGZyZXF1ZW5jeUh6OiAyLFxuICAgIGRhbXBpbmdSYXRpbzogMC43XG4gIH07XG4gIHZhciBXaGVlbEpvaW50ID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbihfc3VwZXIpIHtcbiAgICAgIF9fZXh0ZW5kcyhXaGVlbEpvaW50MiwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIFdoZWVsSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCBhbmNob3IsIGF4aXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCEoX3RoaXMgaW5zdGFuY2VvZiBXaGVlbEpvaW50MikpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFdoZWVsSm9pbnQyKGRlZiwgYm9keUEsIGJvZHlCLCBhbmNob3IsIGF4aXMpO1xuICAgICAgICB9XG4gICAgICAgIGRlZiA9IG9wdGlvbnMoZGVmLCBERUZBVUxUUyk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVmLCBib2R5QSwgYm9keUIpIHx8IHRoaXM7XG4gICAgICAgIGJvZHlBID0gX3RoaXMubV9ib2R5QTtcbiAgICAgICAgYm9keUIgPSBfdGhpcy5tX2JvZHlCO1xuICAgICAgICBfdGhpcy5tX2F4ID0gVmVjMi56ZXJvKCk7XG4gICAgICAgIF90aGlzLm1fYXkgPSBWZWMyLnplcm8oKTtcbiAgICAgICAgX3RoaXMubV90eXBlID0gV2hlZWxKb2ludDIuVFlQRTtcbiAgICAgICAgX3RoaXMubV9sb2NhbEFuY2hvckEgPSBWZWMyLmNsb25lKGFuY2hvciA/IGJvZHlBLmdldExvY2FsUG9pbnQoYW5jaG9yKSA6IGRlZi5sb2NhbEFuY2hvckEgfHwgVmVjMi56ZXJvKCkpO1xuICAgICAgICBfdGhpcy5tX2xvY2FsQW5jaG9yQiA9IFZlYzIuY2xvbmUoYW5jaG9yID8gYm9keUIuZ2V0TG9jYWxQb2ludChhbmNob3IpIDogZGVmLmxvY2FsQW5jaG9yQiB8fCBWZWMyLnplcm8oKSk7XG4gICAgICAgIGlmIChWZWMyLmlzVmFsaWQoYXhpcykpIHtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsWEF4aXNBID0gYm9keUEuZ2V0TG9jYWxWZWN0b3IoYXhpcyk7XG4gICAgICAgIH0gZWxzZSBpZiAoVmVjMi5pc1ZhbGlkKGRlZi5sb2NhbEF4aXNBKSkge1xuICAgICAgICAgIF90aGlzLm1fbG9jYWxYQXhpc0EgPSBWZWMyLmNsb25lKGRlZi5sb2NhbEF4aXNBKTtcbiAgICAgICAgfSBlbHNlIGlmIChWZWMyLmlzVmFsaWQoZGVmLmxvY2FsQXhpcykpIHtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsWEF4aXNBID0gVmVjMi5jbG9uZShkZWYubG9jYWxBeGlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpcy5tX2xvY2FsWEF4aXNBID0gVmVjMi5uZW8oMSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMubV9sb2NhbFlBeGlzQSA9IFZlYzIuY3Jvc3NOdW1WZWMyKDEsIF90aGlzLm1fbG9jYWxYQXhpc0EpO1xuICAgICAgICBfdGhpcy5tX21hc3MgPSAwO1xuICAgICAgICBfdGhpcy5tX2ltcHVsc2UgPSAwO1xuICAgICAgICBfdGhpcy5tX21vdG9yTWFzcyA9IDA7XG4gICAgICAgIF90aGlzLm1fbW90b3JJbXB1bHNlID0gMDtcbiAgICAgICAgX3RoaXMubV9zcHJpbmdNYXNzID0gMDtcbiAgICAgICAgX3RoaXMubV9zcHJpbmdJbXB1bHNlID0gMDtcbiAgICAgICAgX3RoaXMubV9tYXhNb3RvclRvcnF1ZSA9IGRlZi5tYXhNb3RvclRvcnF1ZTtcbiAgICAgICAgX3RoaXMubV9tb3RvclNwZWVkID0gZGVmLm1vdG9yU3BlZWQ7XG4gICAgICAgIF90aGlzLm1fZW5hYmxlTW90b3IgPSBkZWYuZW5hYmxlTW90b3I7XG4gICAgICAgIF90aGlzLm1fZnJlcXVlbmN5SHogPSBkZWYuZnJlcXVlbmN5SHo7XG4gICAgICAgIF90aGlzLm1fZGFtcGluZ1JhdGlvID0gZGVmLmRhbXBpbmdSYXRpbztcbiAgICAgICAgX3RoaXMubV9iaWFzID0gMDtcbiAgICAgICAgX3RoaXMubV9nYW1tYSA9IDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgIH1cbiAgICAgIFdoZWVsSm9pbnQyLnByb3RvdHlwZS5fc2VyaWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5tX3R5cGUsXG4gICAgICAgICAgYm9keUE6IHRoaXMubV9ib2R5QSxcbiAgICAgICAgICBib2R5QjogdGhpcy5tX2JvZHlCLFxuICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRoaXMubV9jb2xsaWRlQ29ubmVjdGVkLFxuICAgICAgICAgIGVuYWJsZU1vdG9yOiB0aGlzLm1fZW5hYmxlTW90b3IsXG4gICAgICAgICAgbWF4TW90b3JUb3JxdWU6IHRoaXMubV9tYXhNb3RvclRvcnF1ZSxcbiAgICAgICAgICBtb3RvclNwZWVkOiB0aGlzLm1fbW90b3JTcGVlZCxcbiAgICAgICAgICBmcmVxdWVuY3lIejogdGhpcy5tX2ZyZXF1ZW5jeUh6LFxuICAgICAgICAgIGRhbXBpbmdSYXRpbzogdGhpcy5tX2RhbXBpbmdSYXRpbyxcbiAgICAgICAgICBsb2NhbEFuY2hvckE6IHRoaXMubV9sb2NhbEFuY2hvckEsXG4gICAgICAgICAgbG9jYWxBbmNob3JCOiB0aGlzLm1fbG9jYWxBbmNob3JCLFxuICAgICAgICAgIGxvY2FsQXhpc0E6IHRoaXMubV9sb2NhbFhBeGlzQVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIFdoZWVsSm9pbnQyLl9kZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGRhdGEsIHdvcmxkLCByZXN0b3JlKSB7XG4gICAgICAgIGRhdGEgPSBfX2Fzc2lnbih7fSwgZGF0YSk7XG4gICAgICAgIGRhdGEuYm9keUEgPSByZXN0b3JlKEJvZHksIGRhdGEuYm9keUEsIHdvcmxkKTtcbiAgICAgICAgZGF0YS5ib2R5QiA9IHJlc3RvcmUoQm9keSwgZGF0YS5ib2R5Qiwgd29ybGQpO1xuICAgICAgICB2YXIgam9pbnQgPSBuZXcgV2hlZWxKb2ludDIoZGF0YSk7XG4gICAgICAgIHJldHVybiBqb2ludDtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24oZGVmKSB7XG4gICAgICAgIGlmIChkZWYuYW5jaG9yQSkge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckEuc2V0VmVjMih0aGlzLm1fYm9keUEuZ2V0TG9jYWxQb2ludChkZWYuYW5jaG9yQSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGRlZi5sb2NhbEFuY2hvckEpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxBbmNob3JBLnNldFZlYzIoZGVmLmxvY2FsQW5jaG9yQSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5hbmNob3JCKSB7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yQi5zZXRWZWMyKHRoaXMubV9ib2R5Qi5nZXRMb2NhbFBvaW50KGRlZi5hbmNob3JCKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmLmxvY2FsQW5jaG9yQikge1xuICAgICAgICAgIHRoaXMubV9sb2NhbEFuY2hvckIuc2V0VmVjMihkZWYubG9jYWxBbmNob3JCKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmxvY2FsQXhpc0EpIHtcbiAgICAgICAgICB0aGlzLm1fbG9jYWxYQXhpc0Euc2V0VmVjMihkZWYubG9jYWxBeGlzQSk7XG4gICAgICAgICAgdGhpcy5tX2xvY2FsWUF4aXNBLnNldFZlYzIoVmVjMi5jcm9zc051bVZlYzIoMSwgZGVmLmxvY2FsQXhpc0EpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmVuYWJsZU1vdG9yICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0aGlzLm1fZW5hYmxlTW90b3IgPSBkZWYuZW5hYmxlTW90b3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYubWF4TW90b3JUb3JxdWUpKSB7XG4gICAgICAgICAgdGhpcy5tX21heE1vdG9yVG9ycXVlID0gZGVmLm1heE1vdG9yVG9ycXVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVmLm1vdG9yU3BlZWQpKSB7XG4gICAgICAgICAgdGhpcy5tX21vdG9yU3BlZWQgPSBkZWYubW90b3JTcGVlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlZi5mcmVxdWVuY3lIeikpIHtcbiAgICAgICAgICB0aGlzLm1fZnJlcXVlbmN5SHogPSBkZWYuZnJlcXVlbmN5SHo7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShkZWYuZGFtcGluZ1JhdGlvKSkge1xuICAgICAgICAgIHRoaXMubV9kYW1waW5nUmF0aW8gPSBkZWYuZGFtcGluZ1JhdGlvO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLmdldExvY2FsQW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2xvY2FsQW5jaG9yQTtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuZ2V0TG9jYWxBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbG9jYWxBbmNob3JCO1xuICAgICAgfTtcbiAgICAgIFdoZWVsSm9pbnQyLnByb3RvdHlwZS5nZXRMb2NhbEF4aXNBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fbG9jYWxYQXhpc0E7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLmdldEpvaW50VHJhbnNsYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgICAgICB2YXIgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgICAgIHZhciBwQTIgPSBiQS5nZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckEpO1xuICAgICAgICB2YXIgcEIyID0gYkIuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JCKTtcbiAgICAgICAgdmFyIGQyID0gVmVjMi5zdWIocEIyLCBwQTIpO1xuICAgICAgICB2YXIgYXhpcyA9IGJBLmdldFdvcmxkVmVjdG9yKHRoaXMubV9sb2NhbFhBeGlzQSk7XG4gICAgICAgIHZhciB0cmFuc2xhdGlvbjIgPSBWZWMyLmRvdChkMiwgYXhpcyk7XG4gICAgICAgIHJldHVybiB0cmFuc2xhdGlvbjI7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLmdldEpvaW50U3BlZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHdBID0gdGhpcy5tX2JvZHlBLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgICB2YXIgd0IgPSB0aGlzLm1fYm9keUIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICAgIHJldHVybiB3QiAtIHdBO1xuICAgICAgfTtcbiAgICAgIFdoZWVsSm9pbnQyLnByb3RvdHlwZS5pc01vdG9yRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2VuYWJsZU1vdG9yO1xuICAgICAgfTtcbiAgICAgIFdoZWVsSm9pbnQyLnByb3RvdHlwZS5lbmFibGVNb3RvciA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICAgICAgaWYgKGZsYWcgPT0gdGhpcy5tX2VuYWJsZU1vdG9yKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5tX2JvZHlBLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB0aGlzLm1fYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIHRoaXMubV9lbmFibGVNb3RvciA9IGZsYWc7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLnNldE1vdG9yU3BlZWQgPSBmdW5jdGlvbihzcGVlZCkge1xuICAgICAgICBpZiAoc3BlZWQgPT0gdGhpcy5tX21vdG9yU3BlZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm1fYm9keUEuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5zZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgdGhpcy5tX21vdG9yU3BlZWQgPSBzcGVlZDtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuZ2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX21vdG9yU3BlZWQ7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLnNldE1heE1vdG9yVG9ycXVlID0gZnVuY3Rpb24odG9ycXVlKSB7XG4gICAgICAgIGlmICh0b3JxdWUgPT0gdGhpcy5tX21heE1vdG9yVG9ycXVlKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5tX2JvZHlBLnNldEF3YWtlKHRydWUpO1xuICAgICAgICB0aGlzLm1fYm9keUIuc2V0QXdha2UodHJ1ZSk7XG4gICAgICAgIHRoaXMubV9tYXhNb3RvclRvcnF1ZSA9IHRvcnF1ZTtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuZ2V0TWF4TW90b3JUb3JxdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubV9tYXhNb3RvclRvcnF1ZTtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuZ2V0TW90b3JUb3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICAgICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9tb3RvckltcHVsc2U7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLnNldFNwcmluZ0ZyZXF1ZW5jeUh6ID0gZnVuY3Rpb24oaHopIHtcbiAgICAgICAgdGhpcy5tX2ZyZXF1ZW5jeUh6ID0gaHo7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLmdldFNwcmluZ0ZyZXF1ZW5jeUh6ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZnJlcXVlbmN5SHo7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLnNldFNwcmluZ0RhbXBpbmdSYXRpbyA9IGZ1bmN0aW9uKHJhdGlvKSB7XG4gICAgICAgIHRoaXMubV9kYW1waW5nUmF0aW8gPSByYXRpbztcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuZ2V0U3ByaW5nRGFtcGluZ1JhdGlvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZGFtcGluZ1JhdGlvO1xuICAgICAgfTtcbiAgICAgIFdoZWVsSm9pbnQyLnByb3RvdHlwZS5nZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1fYm9keUEuZ2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3JBKTtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuZ2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tX2JvZHlCLmdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQik7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLmdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICAgICAgcmV0dXJuIFZlYzIuY29tYmluZSh0aGlzLm1faW1wdWxzZSwgdGhpcy5tX2F5LCB0aGlzLm1fc3ByaW5nSW1wdWxzZSwgdGhpcy5tX2F4KS5tdWwoaW52X2R0KTtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuZ2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICAgICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9tb3RvckltcHVsc2U7XG4gICAgICB9O1xuICAgICAgV2hlZWxKb2ludDIucHJvdG90eXBlLmluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB0aGlzLm1fbG9jYWxDZW50ZXJBID0gdGhpcy5tX2JvZHlBLm1fc3dlZXAubG9jYWxDZW50ZXI7XG4gICAgICAgIHRoaXMubV9sb2NhbENlbnRlckIgPSB0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICAgICAgdGhpcy5tX2ludk1hc3NBID0gdGhpcy5tX2JvZHlBLm1faW52TWFzcztcbiAgICAgICAgdGhpcy5tX2ludk1hc3NCID0gdGhpcy5tX2JvZHlCLm1faW52TWFzcztcbiAgICAgICAgdGhpcy5tX2ludklBID0gdGhpcy5tX2JvZHlBLm1faW52STtcbiAgICAgICAgdGhpcy5tX2ludklCID0gdGhpcy5tX2JvZHlCLm1faW52STtcbiAgICAgICAgdmFyIG1BID0gdGhpcy5tX2ludk1hc3NBO1xuICAgICAgICB2YXIgbUIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgICAgIHZhciBpQSA9IHRoaXMubV9pbnZJQTtcbiAgICAgICAgdmFyIGlCID0gdGhpcy5tX2ludklCO1xuICAgICAgICB2YXIgY0EyID0gdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFBID0gdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHZBMiA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LnY7XG4gICAgICAgIHZhciB3QSA9IHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5Lnc7XG4gICAgICAgIHZhciBjQjIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUIgPSB0aGlzLm1fYm9keUIuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB2YXIgckEyID0gUm90Lm11bFZlYzIocUEsIFZlYzIuc3ViKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEpKTtcbiAgICAgICAgdmFyIHJCMiA9IFJvdC5tdWxWZWMyKHFCLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKSk7XG4gICAgICAgIHZhciBkMiA9IFZlYzIuemVybygpO1xuICAgICAgICBkMi5hZGRDb21iaW5lKDEsIGNCMiwgMSwgckIyKTtcbiAgICAgICAgZDIuc3ViQ29tYmluZSgxLCBjQTIsIDEsIHJBMik7XG4gICAgICAgIHtcbiAgICAgICAgICB0aGlzLm1fYXkgPSBSb3QubXVsVmVjMihxQSwgdGhpcy5tX2xvY2FsWUF4aXNBKTtcbiAgICAgICAgICB0aGlzLm1fc0F5ID0gVmVjMi5jcm9zc1ZlYzJWZWMyKFZlYzIuYWRkKGQyLCByQTIpLCB0aGlzLm1fYXkpO1xuICAgICAgICAgIHRoaXMubV9zQnkgPSBWZWMyLmNyb3NzVmVjMlZlYzIockIyLCB0aGlzLm1fYXkpO1xuICAgICAgICAgIHRoaXMubV9tYXNzID0gbUEgKyBtQiArIGlBICogdGhpcy5tX3NBeSAqIHRoaXMubV9zQXkgKyBpQiAqIHRoaXMubV9zQnkgKiB0aGlzLm1fc0J5O1xuICAgICAgICAgIGlmICh0aGlzLm1fbWFzcyA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubV9tYXNzID0gMSAvIHRoaXMubV9tYXNzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fc3ByaW5nTWFzcyA9IDA7XG4gICAgICAgIHRoaXMubV9iaWFzID0gMDtcbiAgICAgICAgdGhpcy5tX2dhbW1hID0gMDtcbiAgICAgICAgaWYgKHRoaXMubV9mcmVxdWVuY3lIeiA+IDApIHtcbiAgICAgICAgICB0aGlzLm1fYXggPSBSb3QubXVsVmVjMihxQSwgdGhpcy5tX2xvY2FsWEF4aXNBKTtcbiAgICAgICAgICB0aGlzLm1fc0F4ID0gVmVjMi5jcm9zc1ZlYzJWZWMyKFZlYzIuYWRkKGQyLCByQTIpLCB0aGlzLm1fYXgpO1xuICAgICAgICAgIHRoaXMubV9zQnggPSBWZWMyLmNyb3NzVmVjMlZlYzIockIyLCB0aGlzLm1fYXgpO1xuICAgICAgICAgIHZhciBpbnZNYXNzID0gbUEgKyBtQiArIGlBICogdGhpcy5tX3NBeCAqIHRoaXMubV9zQXggKyBpQiAqIHRoaXMubV9zQnggKiB0aGlzLm1fc0J4O1xuICAgICAgICAgIGlmIChpbnZNYXNzID4gMCkge1xuICAgICAgICAgICAgdGhpcy5tX3NwcmluZ01hc3MgPSAxIC8gaW52TWFzcztcbiAgICAgICAgICAgIHZhciBDID0gVmVjMi5kb3QoZDIsIHRoaXMubV9heCk7XG4gICAgICAgICAgICB2YXIgb21lZ2EgPSAyICogbWF0aF9QSSAqIHRoaXMubV9mcmVxdWVuY3lIejtcbiAgICAgICAgICAgIHZhciBkYW1wID0gMiAqIHRoaXMubV9zcHJpbmdNYXNzICogdGhpcy5tX2RhbXBpbmdSYXRpbyAqIG9tZWdhO1xuICAgICAgICAgICAgdmFyIGsgPSB0aGlzLm1fc3ByaW5nTWFzcyAqIG9tZWdhICogb21lZ2E7XG4gICAgICAgICAgICB2YXIgaCA9IHN0ZXAuZHQ7XG4gICAgICAgICAgICB0aGlzLm1fZ2FtbWEgPSBoICogKGRhbXAgKyBoICogayk7XG4gICAgICAgICAgICBpZiAodGhpcy5tX2dhbW1hID4gMCkge1xuICAgICAgICAgICAgICB0aGlzLm1fZ2FtbWEgPSAxIC8gdGhpcy5tX2dhbW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tX2JpYXMgPSBDICogaCAqIGsgKiB0aGlzLm1fZ2FtbWE7XG4gICAgICAgICAgICB0aGlzLm1fc3ByaW5nTWFzcyA9IGludk1hc3MgKyB0aGlzLm1fZ2FtbWE7XG4gICAgICAgICAgICBpZiAodGhpcy5tX3NwcmluZ01hc3MgPiAwKSB7XG4gICAgICAgICAgICAgIHRoaXMubV9zcHJpbmdNYXNzID0gMSAvIHRoaXMubV9zcHJpbmdNYXNzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fc3ByaW5nSW1wdWxzZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubV9lbmFibGVNb3Rvcikge1xuICAgICAgICAgIHRoaXMubV9tb3Rvck1hc3MgPSBpQSArIGlCO1xuICAgICAgICAgIGlmICh0aGlzLm1fbW90b3JNYXNzID4gMCkge1xuICAgICAgICAgICAgdGhpcy5tX21vdG9yTWFzcyA9IDEgLyB0aGlzLm1fbW90b3JNYXNzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fbW90b3JNYXNzID0gMDtcbiAgICAgICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICAgICAgdGhpcy5tX3NwcmluZ0ltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgICAgIHZhciBQMyA9IFZlYzIuY29tYmluZSh0aGlzLm1faW1wdWxzZSwgdGhpcy5tX2F5LCB0aGlzLm1fc3ByaW5nSW1wdWxzZSwgdGhpcy5tX2F4KTtcbiAgICAgICAgICB2YXIgTEEgPSB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9zQXkgKyB0aGlzLm1fc3ByaW5nSW1wdWxzZSAqIHRoaXMubV9zQXggKyB0aGlzLm1fbW90b3JJbXB1bHNlO1xuICAgICAgICAgIHZhciBMQiA9IHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3NCeSArIHRoaXMubV9zcHJpbmdJbXB1bHNlICogdGhpcy5tX3NCeCArIHRoaXMubV9tb3RvckltcHVsc2U7XG4gICAgICAgICAgdkEyLnN1Yk11bCh0aGlzLm1faW52TWFzc0EsIFAzKTtcbiAgICAgICAgICB3QSAtPSB0aGlzLm1faW52SUEgKiBMQTtcbiAgICAgICAgICB2QjIuYWRkTXVsKHRoaXMubV9pbnZNYXNzQiwgUDMpO1xuICAgICAgICAgIHdCICs9IHRoaXMubV9pbnZJQiAqIExCO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlID0gMDtcbiAgICAgICAgICB0aGlzLm1fc3ByaW5nSW1wdWxzZSA9IDA7XG4gICAgICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudi5zZXRWZWMyKHZBMik7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3ZlbG9jaXR5LncgPSB3QTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudi5zZXRWZWMyKHZCMik7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3ZlbG9jaXR5LncgPSB3QjtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5wcm90b3R5cGUuc29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgICAgICB2YXIgbUEgPSB0aGlzLm1faW52TWFzc0E7XG4gICAgICAgIHZhciBtQiA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICAgICAgdmFyIGlBID0gdGhpcy5tX2ludklBO1xuICAgICAgICB2YXIgaUIgPSB0aGlzLm1faW52SUI7XG4gICAgICAgIHZhciB2QTIgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52O1xuICAgICAgICB2YXIgd0EgPSB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS53O1xuICAgICAgICB2YXIgdkIyID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudjtcbiAgICAgICAgdmFyIHdCID0gdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudztcbiAgICAgICAge1xuICAgICAgICAgIHZhciBDZG90ID0gVmVjMi5kb3QodGhpcy5tX2F4LCB2QjIpIC0gVmVjMi5kb3QodGhpcy5tX2F4LCB2QTIpICsgdGhpcy5tX3NCeCAqIHdCIC0gdGhpcy5tX3NBeCAqIHdBO1xuICAgICAgICAgIHZhciBpbXB1bHNlID0gLXRoaXMubV9zcHJpbmdNYXNzICogKENkb3QgKyB0aGlzLm1fYmlhcyArIHRoaXMubV9nYW1tYSAqIHRoaXMubV9zcHJpbmdJbXB1bHNlKTtcbiAgICAgICAgICB0aGlzLm1fc3ByaW5nSW1wdWxzZSArPSBpbXB1bHNlO1xuICAgICAgICAgIHZhciBQMyA9IFZlYzIubXVsTnVtVmVjMihpbXB1bHNlLCB0aGlzLm1fYXgpO1xuICAgICAgICAgIHZhciBMQSA9IGltcHVsc2UgKiB0aGlzLm1fc0F4O1xuICAgICAgICAgIHZhciBMQiA9IGltcHVsc2UgKiB0aGlzLm1fc0J4O1xuICAgICAgICAgIHZBMi5zdWJNdWwobUEsIFAzKTtcbiAgICAgICAgICB3QSAtPSBpQSAqIExBO1xuICAgICAgICAgIHZCMi5hZGRNdWwobUIsIFAzKTtcbiAgICAgICAgICB3QiArPSBpQiAqIExCO1xuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgQ2RvdCA9IHdCIC0gd0EgLSB0aGlzLm1fbW90b3JTcGVlZDtcbiAgICAgICAgICB2YXIgaW1wdWxzZSA9IC10aGlzLm1fbW90b3JNYXNzICogQ2RvdDtcbiAgICAgICAgICB2YXIgb2xkSW1wdWxzZSA9IHRoaXMubV9tb3RvckltcHVsc2U7XG4gICAgICAgICAgdmFyIG1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heE1vdG9yVG9ycXVlO1xuICAgICAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSBjbGFtcCh0aGlzLm1fbW90b3JJbXB1bHNlICsgaW1wdWxzZSwgLW1heEltcHVsc2UsIG1heEltcHVsc2UpO1xuICAgICAgICAgIGltcHVsc2UgPSB0aGlzLm1fbW90b3JJbXB1bHNlIC0gb2xkSW1wdWxzZTtcbiAgICAgICAgICB3QSAtPSBpQSAqIGltcHVsc2U7XG4gICAgICAgICAgd0IgKz0gaUIgKiBpbXB1bHNlO1xuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgQ2RvdCA9IFZlYzIuZG90KHRoaXMubV9heSwgdkIyKSAtIFZlYzIuZG90KHRoaXMubV9heSwgdkEyKSArIHRoaXMubV9zQnkgKiB3QiAtIHRoaXMubV9zQXkgKiB3QTtcbiAgICAgICAgICB2YXIgaW1wdWxzZSA9IC10aGlzLm1fbWFzcyAqIENkb3Q7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UgKz0gaW1wdWxzZTtcbiAgICAgICAgICB2YXIgUDMgPSBWZWMyLm11bE51bVZlYzIoaW1wdWxzZSwgdGhpcy5tX2F5KTtcbiAgICAgICAgICB2YXIgTEEgPSBpbXB1bHNlICogdGhpcy5tX3NBeTtcbiAgICAgICAgICB2YXIgTEIgPSBpbXB1bHNlICogdGhpcy5tX3NCeTtcbiAgICAgICAgICB2QTIuc3ViTXVsKG1BLCBQMyk7XG4gICAgICAgICAgd0EgLT0gaUEgKiBMQTtcbiAgICAgICAgICB2QjIuYWRkTXVsKG1CLCBQMyk7XG4gICAgICAgICAgd0IgKz0gaUIgKiBMQjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fYm9keUEuY192ZWxvY2l0eS52LnNldFZlYzIodkEyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfdmVsb2NpdHkudyA9IHdBO1xuICAgICAgICB0aGlzLm1fYm9keUIuY192ZWxvY2l0eS52LnNldFZlYzIodkIyKTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfdmVsb2NpdHkudyA9IHdCO1xuICAgICAgfTtcbiAgICAgIFdoZWVsSm9pbnQyLnByb3RvdHlwZS5zb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgICAgIHZhciBjQTIgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5jO1xuICAgICAgICB2YXIgYUEgPSB0aGlzLm1fYm9keUEuY19wb3NpdGlvbi5hO1xuICAgICAgICB2YXIgY0IyID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYztcbiAgICAgICAgdmFyIGFCID0gdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYTtcbiAgICAgICAgdmFyIHFBID0gUm90Lm5lbyhhQSk7XG4gICAgICAgIHZhciBxQiA9IFJvdC5uZW8oYUIpO1xuICAgICAgICB2YXIgckEyID0gUm90Lm11bFZlYzIocUEsIFZlYzIuc3ViKHRoaXMubV9sb2NhbEFuY2hvckEsIHRoaXMubV9sb2NhbENlbnRlckEpKTtcbiAgICAgICAgdmFyIHJCMiA9IFJvdC5tdWxWZWMyKHFCLCBWZWMyLnN1Yih0aGlzLm1fbG9jYWxBbmNob3JCLCB0aGlzLm1fbG9jYWxDZW50ZXJCKSk7XG4gICAgICAgIHZhciBkMiA9IFZlYzIuemVybygpO1xuICAgICAgICBkMi5hZGRDb21iaW5lKDEsIGNCMiwgMSwgckIyKTtcbiAgICAgICAgZDIuc3ViQ29tYmluZSgxLCBjQTIsIDEsIHJBMik7XG4gICAgICAgIHZhciBheSA9IFJvdC5tdWxWZWMyKHFBLCB0aGlzLm1fbG9jYWxZQXhpc0EpO1xuICAgICAgICB2YXIgc0F5ID0gVmVjMi5jcm9zc1ZlYzJWZWMyKFZlYzIuYWRkKGQyLCByQTIpLCBheSk7XG4gICAgICAgIHZhciBzQnkgPSBWZWMyLmNyb3NzVmVjMlZlYzIockIyLCBheSk7XG4gICAgICAgIHZhciBDID0gVmVjMi5kb3QoZDIsIGF5KTtcbiAgICAgICAgdmFyIGsgPSB0aGlzLm1faW52TWFzc0EgKyB0aGlzLm1faW52TWFzc0IgKyB0aGlzLm1faW52SUEgKiB0aGlzLm1fc0F5ICogdGhpcy5tX3NBeSArIHRoaXMubV9pbnZJQiAqIHRoaXMubV9zQnkgKiB0aGlzLm1fc0J5O1xuICAgICAgICB2YXIgaW1wdWxzZSA9IGsgIT0gMCA/IC1DIC8gayA6IDA7XG4gICAgICAgIHZhciBQMyA9IFZlYzIubXVsTnVtVmVjMihpbXB1bHNlLCBheSk7XG4gICAgICAgIHZhciBMQSA9IGltcHVsc2UgKiBzQXk7XG4gICAgICAgIHZhciBMQiA9IGltcHVsc2UgKiBzQnk7XG4gICAgICAgIGNBMi5zdWJNdWwodGhpcy5tX2ludk1hc3NBLCBQMyk7XG4gICAgICAgIGFBIC09IHRoaXMubV9pbnZJQSAqIExBO1xuICAgICAgICBjQjIuYWRkTXVsKHRoaXMubV9pbnZNYXNzQiwgUDMpO1xuICAgICAgICBhQiArPSB0aGlzLm1faW52SUIgKiBMQjtcbiAgICAgICAgdGhpcy5tX2JvZHlBLmNfcG9zaXRpb24uYy5zZXRWZWMyKGNBMik7XG4gICAgICAgIHRoaXMubV9ib2R5QS5jX3Bvc2l0aW9uLmEgPSBhQTtcbiAgICAgICAgdGhpcy5tX2JvZHlCLmNfcG9zaXRpb24uYy5zZXRWZWMyKGNCMik7XG4gICAgICAgIHRoaXMubV9ib2R5Qi5jX3Bvc2l0aW9uLmEgPSBhQjtcbiAgICAgICAgcmV0dXJuIG1hdGhfYWJzKEMpIDw9IFNldHRpbmdzSW50ZXJuYWwubGluZWFyU2xvcDtcbiAgICAgIH07XG4gICAgICBXaGVlbEpvaW50Mi5UWVBFID0gXCJ3aGVlbC1qb2ludFwiO1xuICAgICAgcmV0dXJuIFdoZWVsSm9pbnQyO1xuICAgIH0oSm9pbnQpXG4gICk7XG4gIHZhciBfYTtcbiAgdmFyIFNJRCA9IDA7XG4gIHZhciBTRVJJQUxJWkVfUkVGX1RZUEVTID0ge1xuICAgIFwiV29ybGRcIjogV29ybGQsXG4gICAgXCJCb2R5XCI6IEJvZHksXG4gICAgXCJKb2ludFwiOiBKb2ludCxcbiAgICBcIkZpeHR1cmVcIjogRml4dHVyZSxcbiAgICBcIlNoYXBlXCI6IFNoYXBlXG4gIH07XG4gIHZhciBERVNFUklBTElaRV9CWV9SRUZfVFlQRSA9IHtcbiAgICBcIlZlYzJcIjogVmVjMixcbiAgICBcIlZlYzNcIjogVmVjMyxcbiAgICBcIldvcmxkXCI6IFdvcmxkLFxuICAgIFwiQm9keVwiOiBCb2R5LFxuICAgIFwiSm9pbnRcIjogSm9pbnQsXG4gICAgXCJGaXh0dXJlXCI6IEZpeHR1cmUsXG4gICAgXCJTaGFwZVwiOiBTaGFwZVxuICB9O1xuICB2YXIgREVTRVJJQUxJWkVfQllfVFlQRV9GSUVMRCA9IChfYSA9IHt9LCBfYVtCb2R5LlNUQVRJQ10gPSBCb2R5LCBfYVtCb2R5LkRZTkFNSUNdID0gQm9keSwgX2FbQm9keS5LSU5FTUFUSUNdID0gQm9keSwgX2FbQ2hhaW5TaGFwZS5UWVBFXSA9IENoYWluU2hhcGUsIC8vIFtCb3hTaGFwZS5UWVBFXTogQm94U2hhcGUsXG4gIF9hW1BvbHlnb25TaGFwZS5UWVBFXSA9IFBvbHlnb25TaGFwZSwgX2FbRWRnZVNoYXBlLlRZUEVdID0gRWRnZVNoYXBlLCBfYVtDaXJjbGVTaGFwZS5UWVBFXSA9IENpcmNsZVNoYXBlLCBfYVtEaXN0YW5jZUpvaW50LlRZUEVdID0gRGlzdGFuY2VKb2ludCwgX2FbRnJpY3Rpb25Kb2ludC5UWVBFXSA9IEZyaWN0aW9uSm9pbnQsIF9hW0dlYXJKb2ludC5UWVBFXSA9IEdlYXJKb2ludCwgX2FbTW90b3JKb2ludC5UWVBFXSA9IE1vdG9ySm9pbnQsIF9hW01vdXNlSm9pbnQuVFlQRV0gPSBNb3VzZUpvaW50LCBfYVtQcmlzbWF0aWNKb2ludC5UWVBFXSA9IFByaXNtYXRpY0pvaW50LCBfYVtQdWxsZXlKb2ludC5UWVBFXSA9IFB1bGxleUpvaW50LCBfYVtSZXZvbHV0ZUpvaW50LlRZUEVdID0gUmV2b2x1dGVKb2ludCwgX2FbUm9wZUpvaW50LlRZUEVdID0gUm9wZUpvaW50LCBfYVtXZWxkSm9pbnQuVFlQRV0gPSBXZWxkSm9pbnQsIF9hW1doZWVsSm9pbnQuVFlQRV0gPSBXaGVlbEpvaW50LCBfYSk7XG4gIHZhciBERUZBVUxUX09QVElPTlMgPSB7XG4gICAgcm9vdENsYXNzOiBXb3JsZCxcbiAgICBwcmVTZXJpYWxpemU6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIHBvc3RTZXJpYWxpemU6IGZ1bmN0aW9uKGRhdGEsIG9iaikge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICBwcmVEZXNlcmlhbGl6ZTogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICBwb3N0RGVzZXJpYWxpemU6IGZ1bmN0aW9uKG9iaiwgZGF0YSkge1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gIH07XG4gIHZhciBTZXJpYWxpemVyID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBTZXJpYWxpemVyMihvcHRpb25zMikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRvSnNvbiA9IGZ1bmN0aW9uKHJvb3QpIHtcbiAgICAgICAgICB2YXIgcHJlU2VyaWFsaXplID0gX3RoaXMub3B0aW9ucy5wcmVTZXJpYWxpemU7XG4gICAgICAgICAgdmFyIHBvc3RTZXJpYWxpemUgPSBfdGhpcy5vcHRpb25zLnBvc3RTZXJpYWxpemU7XG4gICAgICAgICAgdmFyIGpzb24gPSBbXTtcbiAgICAgICAgICB2YXIgcmVmUXVldWUgPSBbcm9vdF07XG4gICAgICAgICAgdmFyIHJlZk1lbW9CeUlkID0ge307XG4gICAgICAgICAgZnVuY3Rpb24gYWRkVG9SZWZRdWV1ZSh2YWx1ZSwgdHlwZU5hbWUpIHtcbiAgICAgICAgICAgIHZhbHVlLl9fc2lkID0gdmFsdWUuX19zaWQgfHwgKytTSUQ7XG4gICAgICAgICAgICBpZiAoIXJlZk1lbW9CeUlkW3ZhbHVlLl9fc2lkXSkge1xuICAgICAgICAgICAgICByZWZRdWV1ZS5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgdmFyIGluZGV4ID0ganNvbi5sZW5ndGggKyByZWZRdWV1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgIHZhciByZWYgPSB7XG4gICAgICAgICAgICAgICAgcmVmSW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHJlZlR5cGU6IHR5cGVOYW1lXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHJlZk1lbW9CeUlkW3ZhbHVlLl9fc2lkXSA9IHJlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWZNZW1vQnlJZFt2YWx1ZS5fX3NpZF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZVdpdGhIb29rcyhvYmoyKSB7XG4gICAgICAgICAgICBvYmoyID0gcHJlU2VyaWFsaXplKG9iajIpO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBvYmoyLl9zZXJpYWxpemUoKTtcbiAgICAgICAgICAgIGRhdGEgPSBwb3N0U2VyaWFsaXplKGRhdGEsIG9iajIpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZ1bmN0aW9uIHRyYXZlcnNlKHZhbHVlLCBub1JlZlR5cGUpIHtcbiAgICAgICAgICAgIGlmIChub1JlZlR5cGUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICBub1JlZlR5cGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5fc2VyaWFsaXplID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgaWYgKCFub1JlZlR5cGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0eXBlTmFtZSBpbiBTRVJJQUxJWkVfUkVGX1RZUEVTKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTRVJJQUxJWkVfUkVGX1RZUEVTW3R5cGVOYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkVG9SZWZRdWV1ZSh2YWx1ZSwgdHlwZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2YWx1ZSA9IHNlcmlhbGl6ZVdpdGhIb29rcyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gW107XG4gICAgICAgICAgICAgIGZvciAodmFyIGtleSA9IDA7IGtleSA8IHZhbHVlLmxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZVtrZXldID0gdHJhdmVyc2UodmFsdWVba2V5XSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgbmV3VmFsdWVba2V5XSA9IHRyYXZlcnNlKHZhbHVlW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3aGlsZSAocmVmUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0gcmVmUXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgIHZhciBzdHIgPSB0cmF2ZXJzZShvYmosIHRydWUpO1xuICAgICAgICAgICAganNvbi5wdXNoKHN0cik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBqc29uO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZyb21Kc29uID0gZnVuY3Rpb24oanNvbikge1xuICAgICAgICAgIHZhciBwcmVEZXNlcmlhbGl6ZSA9IF90aGlzLm9wdGlvbnMucHJlRGVzZXJpYWxpemU7XG4gICAgICAgICAgdmFyIHBvc3REZXNlcmlhbGl6ZSA9IF90aGlzLm9wdGlvbnMucG9zdERlc2VyaWFsaXplO1xuICAgICAgICAgIHZhciByb290Q2xhc3MgPSBfdGhpcy5vcHRpb25zLnJvb3RDbGFzcztcbiAgICAgICAgICB2YXIgZGVzZXJpYWxpemVkUmVmTWVtb0J5SW5kZXggPSB7fTtcbiAgICAgICAgICBmdW5jdGlvbiBkZXNlcmlhbGl6ZVdpdGhIb29rcyhjbGFzc0hpbnQsIGRhdGEsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICghY2xhc3NIaW50IHx8ICFjbGFzc0hpbnQuX2Rlc2VyaWFsaXplKSB7XG4gICAgICAgICAgICAgIGNsYXNzSGludCA9IERFU0VSSUFMSVpFX0JZX1RZUEVfRklFTERbZGF0YS50eXBlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZXNlcmlhbGl6ZXIgPSBjbGFzc0hpbnQgJiYgY2xhc3NIaW50Ll9kZXNlcmlhbGl6ZTtcbiAgICAgICAgICAgIGlmICghZGVzZXJpYWxpemVyKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEgPSBwcmVEZXNlcmlhbGl6ZShkYXRhKTtcbiAgICAgICAgICAgIHZhciBjbGFzc0Rlc2VyaWFsaXplRm4gPSBjbGFzc0hpbnQuX2Rlc2VyaWFsaXplO1xuICAgICAgICAgICAgdmFyIG9iaiA9IGNsYXNzRGVzZXJpYWxpemVGbihkYXRhLCBjb250ZXh0LCBkZXNlcmlhbGl6ZUNoaWxkKTtcbiAgICAgICAgICAgIG9iaiA9IHBvc3REZXNlcmlhbGl6ZShvYmosIGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICB9XG4gICAgICAgICAgZnVuY3Rpb24gZGVzZXJpYWxpemVDaGlsZChjbGFzc0hpbnQsIGRhdGFPclJlZiwgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGlzUmVmT2JqZWN0ID0gZGF0YU9yUmVmLnJlZkluZGV4ICYmIGRhdGFPclJlZi5yZWZUeXBlO1xuICAgICAgICAgICAgaWYgKCFpc1JlZk9iamVjdCkge1xuICAgICAgICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVXaXRoSG9va3MoY2xhc3NIaW50LCBkYXRhT3JSZWYsIGNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlZiA9IGRhdGFPclJlZjtcbiAgICAgICAgICAgIGlmIChERVNFUklBTElaRV9CWV9SRUZfVFlQRVtyZWYucmVmVHlwZV0pIHtcbiAgICAgICAgICAgICAgY2xhc3NIaW50ID0gREVTRVJJQUxJWkVfQllfUkVGX1RZUEVbcmVmLnJlZlR5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlZkluZGV4ID0gcmVmLnJlZkluZGV4O1xuICAgICAgICAgICAgaWYgKCFkZXNlcmlhbGl6ZWRSZWZNZW1vQnlJbmRleFtyZWZJbmRleF0pIHtcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSBqc29uW3JlZkluZGV4XTtcbiAgICAgICAgICAgICAgdmFyIG9iaiA9IGRlc2VyaWFsaXplV2l0aEhvb2tzKGNsYXNzSGludCwgZGF0YSwgY29udGV4dCk7XG4gICAgICAgICAgICAgIGRlc2VyaWFsaXplZFJlZk1lbW9CeUluZGV4W3JlZkluZGV4XSA9IG9iajtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZWRSZWZNZW1vQnlJbmRleFtyZWZJbmRleF07XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciByb290ID0gZGVzZXJpYWxpemVXaXRoSG9va3Mocm9vdENsYXNzLCBqc29uWzBdLCBudWxsKTtcbiAgICAgICAgICByZXR1cm4gcm9vdDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIERFRkFVTFRfT1BUSU9OUyksIG9wdGlvbnMyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBTZXJpYWxpemVyMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIHdvcmxkU2VyaWFsaXplciA9IG5ldyBTZXJpYWxpemVyKHtcbiAgICByb290Q2xhc3M6IFdvcmxkXG4gIH0pO1xuICBTZXJpYWxpemVyLmZyb21Kc29uID0gd29ybGRTZXJpYWxpemVyLmZyb21Kc29uO1xuICBTZXJpYWxpemVyLnRvSnNvbiA9IHdvcmxkU2VyaWFsaXplci50b0pzb247XG4gIHZhciBUZXN0YmVkID0gKFxuICAgIC8qKiBAY2xhc3MgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFRlc3RiZWQyKCkge1xuICAgICAgfVxuICAgICAgVGVzdGJlZDIubW91bnQgPSBmdW5jdGlvbihvcHRpb25zMikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gICAgICB9O1xuICAgICAgVGVzdGJlZDIuc3RhcnQgPSBmdW5jdGlvbih3b3JsZCkge1xuICAgICAgICB2YXIgdGVzdGJlZDIgPSBUZXN0YmVkMi5tb3VudCgpO1xuICAgICAgICB0ZXN0YmVkMi5zdGFydCh3b3JsZCk7XG4gICAgICAgIHJldHVybiB0ZXN0YmVkMjtcbiAgICAgIH07XG4gICAgICByZXR1cm4gVGVzdGJlZDI7XG4gICAgfSgpXG4gICk7XG4gIGZ1bmN0aW9uIHRlc3RiZWQoYTIsIGIyKSB7XG4gICAgdmFyIGNhbGxiYWNrO1xuICAgIHZhciBvcHRpb25zMjtcbiAgICBpZiAodHlwZW9mIGEyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNhbGxiYWNrID0gYTI7XG4gICAgICBvcHRpb25zMiA9IGIyO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGIyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNhbGxiYWNrID0gYjI7XG4gICAgICBvcHRpb25zMiA9IGEyO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zMiA9IGEyICE9PSBudWxsICYmIGEyICE9PSB2b2lkIDAgPyBhMiA6IGIyO1xuICAgIH1cbiAgICB2YXIgdGVzdGJlZDIgPSBUZXN0YmVkLm1vdW50KG9wdGlvbnMyKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciB3b3JsZCA9IGNhbGxiYWNrKHRlc3RiZWQyKSB8fCB0ZXN0YmVkMi53b3JsZDtcbiAgICAgIHRlc3RiZWQyLnN0YXJ0KHdvcmxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRlc3RiZWQyO1xuICAgIH1cbiAgfVxuICB2YXIgQm94U2hhcGUgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKF9zdXBlcikge1xuICAgICAgX19leHRlbmRzKEJveFNoYXBlMiwgX3N1cGVyKTtcbiAgICAgIGZ1bmN0aW9uIEJveFNoYXBlMihoYWxmV2lkdGgsIGhhbGZIZWlnaHQsIGNlbnRlcjIsIGFuZ2xlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghKF90aGlzIGluc3RhbmNlb2YgQm94U2hhcGUyKSkge1xuICAgICAgICAgIHJldHVybiBuZXcgQm94U2hhcGUyKGhhbGZXaWR0aCwgaGFsZkhlaWdodCwgY2VudGVyMiwgYW5nbGUpO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3NldEFzQm94KGhhbGZXaWR0aCwgaGFsZkhlaWdodCwgY2VudGVyMiwgYW5nbGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9XG4gICAgICBCb3hTaGFwZTIuVFlQRSA9IFwicG9seWdvblwiO1xuICAgICAgcmV0dXJuIEJveFNoYXBlMjtcbiAgICB9KFBvbHlnb25TaGFwZSlcbiAgKTtcbiAgQ29udGFjdC5hZGRUeXBlKENpcmNsZVNoYXBlLlRZUEUsIENpcmNsZVNoYXBlLlRZUEUsIENpcmNsZUNpcmNsZUNvbnRhY3QpO1xuICBmdW5jdGlvbiBDaXJjbGVDaXJjbGVDb250YWN0KG1hbmlmb2xkLCB4ZkEyLCBmaXh0dXJlQSwgaW5kZXhBLCB4ZkIyLCBmaXh0dXJlQiwgaW5kZXhCKSB7XG4gICAgQ29sbGlkZUNpcmNsZXMobWFuaWZvbGQsIGZpeHR1cmVBLmdldFNoYXBlKCksIHhmQTIsIGZpeHR1cmVCLmdldFNoYXBlKCksIHhmQjIpO1xuICB9XG4gIHZhciBwQSA9IHZlYzIoMCwgMCk7XG4gIHZhciBwQiA9IHZlYzIoMCwgMCk7XG4gIHZhciBDb2xsaWRlQ2lyY2xlcyA9IGZ1bmN0aW9uKG1hbmlmb2xkLCBjaXJjbGVBLCB4ZkEyLCBjaXJjbGVCLCB4ZkIyKSB7XG4gICAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDA7XG4gICAgdHJhbnNmb3JtVmVjMihwQSwgeGZBMiwgY2lyY2xlQS5tX3ApO1xuICAgIHRyYW5zZm9ybVZlYzIocEIsIHhmQjIsIGNpcmNsZUIubV9wKTtcbiAgICB2YXIgZGlzdFNxciA9IGRpc3RTcXJWZWMyKHBCLCBwQSk7XG4gICAgdmFyIHJBMiA9IGNpcmNsZUEubV9yYWRpdXM7XG4gICAgdmFyIHJCMiA9IGNpcmNsZUIubV9yYWRpdXM7XG4gICAgdmFyIHJhZGl1cyA9IHJBMiArIHJCMjtcbiAgICBpZiAoZGlzdFNxciA+IHJhZGl1cyAqIHJhZGl1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtYW5pZm9sZC50eXBlID0gZXhwb3J0czIuTWFuaWZvbGRUeXBlLmVfY2lyY2xlcztcbiAgICBjb3B5VmVjMihtYW5pZm9sZC5sb2NhbFBvaW50LCBjaXJjbGVBLm1fcCk7XG4gICAgemVyb1ZlYzIobWFuaWZvbGQubG9jYWxOb3JtYWwpO1xuICAgIG1hbmlmb2xkLnBvaW50Q291bnQgPSAxO1xuICAgIGNvcHlWZWMyKG1hbmlmb2xkLnBvaW50c1swXS5sb2NhbFBvaW50LCBjaXJjbGVCLm1fcCk7XG4gICAgbWFuaWZvbGQucG9pbnRzWzBdLmlkLnNldEZlYXR1cmVzKDAsIGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX3ZlcnRleCwgMCwgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4KTtcbiAgfTtcbiAgQ29udGFjdC5hZGRUeXBlKEVkZ2VTaGFwZS5UWVBFLCBDaXJjbGVTaGFwZS5UWVBFLCBFZGdlQ2lyY2xlQ29udGFjdCk7XG4gIENvbnRhY3QuYWRkVHlwZShDaGFpblNoYXBlLlRZUEUsIENpcmNsZVNoYXBlLlRZUEUsIENoYWluQ2lyY2xlQ29udGFjdCk7XG4gIGZ1bmN0aW9uIEVkZ2VDaXJjbGVDb250YWN0KG1hbmlmb2xkLCB4ZkEyLCBmaXh0dXJlQSwgaW5kZXhBLCB4ZkIyLCBmaXh0dXJlQiwgaW5kZXhCKSB7XG4gICAgdmFyIHNoYXBlQSA9IGZpeHR1cmVBLmdldFNoYXBlKCk7XG4gICAgdmFyIHNoYXBlQiA9IGZpeHR1cmVCLmdldFNoYXBlKCk7XG4gICAgQ29sbGlkZUVkZ2VDaXJjbGUobWFuaWZvbGQsIHNoYXBlQSwgeGZBMiwgc2hhcGVCLCB4ZkIyKTtcbiAgfVxuICBmdW5jdGlvbiBDaGFpbkNpcmNsZUNvbnRhY3QobWFuaWZvbGQsIHhmQTIsIGZpeHR1cmVBLCBpbmRleEEsIHhmQjIsIGZpeHR1cmVCLCBpbmRleEIpIHtcbiAgICB2YXIgY2hhaW4gPSBmaXh0dXJlQS5nZXRTaGFwZSgpO1xuICAgIHZhciBlZGdlID0gbmV3IEVkZ2VTaGFwZSgpO1xuICAgIGNoYWluLmdldENoaWxkRWRnZShlZGdlLCBpbmRleEEpO1xuICAgIHZhciBzaGFwZUEgPSBlZGdlO1xuICAgIHZhciBzaGFwZUIgPSBmaXh0dXJlQi5nZXRTaGFwZSgpO1xuICAgIENvbGxpZGVFZGdlQ2lyY2xlKG1hbmlmb2xkLCBzaGFwZUEsIHhmQTIsIHNoYXBlQiwgeGZCMik7XG4gIH1cbiAgdmFyIGUgPSB2ZWMyKDAsIDApO1xuICB2YXIgZTEgPSB2ZWMyKDAsIDApO1xuICB2YXIgZTIgPSB2ZWMyKDAsIDApO1xuICB2YXIgUSA9IHZlYzIoMCwgMCk7XG4gIHZhciBQID0gdmVjMigwLCAwKTtcbiAgdmFyIG4kMiA9IHZlYzIoMCwgMCk7XG4gIHZhciBDb2xsaWRlRWRnZUNpcmNsZSA9IGZ1bmN0aW9uKG1hbmlmb2xkLCBlZGdlQSwgeGZBMiwgY2lyY2xlQiwgeGZCMikge1xuICAgIG1hbmlmb2xkLnBvaW50Q291bnQgPSAwO1xuICAgIHJldHJhbnNmb3JtVmVjMihRLCB4ZkIyLCB4ZkEyLCBjaXJjbGVCLm1fcCk7XG4gICAgdmFyIEEgPSBlZGdlQS5tX3ZlcnRleDE7XG4gICAgdmFyIEIgPSBlZGdlQS5tX3ZlcnRleDI7XG4gICAgc3ViVmVjMihlLCBCLCBBKTtcbiAgICB2YXIgdSA9IGRvdFZlYzIoZSwgQikgLSBkb3RWZWMyKGUsIFEpO1xuICAgIHZhciB2MyA9IGRvdFZlYzIoZSwgUSkgLSBkb3RWZWMyKGUsIEEpO1xuICAgIHZhciByYWRpdXMgPSBlZGdlQS5tX3JhZGl1cyArIGNpcmNsZUIubV9yYWRpdXM7XG4gICAgaWYgKHYzIDw9IDApIHtcbiAgICAgIGNvcHlWZWMyKFAsIEEpO1xuICAgICAgdmFyIGRkXzEgPSBkaXN0U3FyVmVjMihRLCBBKTtcbiAgICAgIGlmIChkZF8xID4gcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChlZGdlQS5tX2hhc1ZlcnRleDApIHtcbiAgICAgICAgdmFyIEExID0gZWRnZUEubV92ZXJ0ZXgwO1xuICAgICAgICB2YXIgQjEgPSBBO1xuICAgICAgICBzdWJWZWMyKGUxLCBCMSwgQTEpO1xuICAgICAgICB2YXIgdTEgPSBkb3RWZWMyKGUxLCBCMSkgLSBkb3RWZWMyKGUxLCBRKTtcbiAgICAgICAgaWYgKHUxID4gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbWFuaWZvbGQudHlwZSA9IGV4cG9ydHMyLk1hbmlmb2xkVHlwZS5lX2NpcmNsZXM7XG4gICAgICB6ZXJvVmVjMihtYW5pZm9sZC5sb2NhbE5vcm1hbCk7XG4gICAgICBjb3B5VmVjMihtYW5pZm9sZC5sb2NhbFBvaW50LCBQKTtcbiAgICAgIG1hbmlmb2xkLnBvaW50Q291bnQgPSAxO1xuICAgICAgY29weVZlYzIobWFuaWZvbGQucG9pbnRzWzBdLmxvY2FsUG9pbnQsIGNpcmNsZUIubV9wKTtcbiAgICAgIG1hbmlmb2xkLnBvaW50c1swXS5pZC5zZXRGZWF0dXJlcygwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgsIDAsIGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX3ZlcnRleCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh1IDw9IDApIHtcbiAgICAgIGNvcHlWZWMyKFAsIEIpO1xuICAgICAgdmFyIGRkXzIgPSBkaXN0U3FyVmVjMihRLCBQKTtcbiAgICAgIGlmIChkZF8yID4gcmFkaXVzICogcmFkaXVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChlZGdlQS5tX2hhc1ZlcnRleDMpIHtcbiAgICAgICAgdmFyIEIyID0gZWRnZUEubV92ZXJ0ZXgzO1xuICAgICAgICB2YXIgQTIgPSBCO1xuICAgICAgICBzdWJWZWMyKGUyLCBCMiwgQTIpO1xuICAgICAgICB2YXIgdjIyID0gZG90VmVjMihlMiwgUSkgLSBkb3RWZWMyKGUyLCBBMik7XG4gICAgICAgIGlmICh2MjIgPiAwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBtYW5pZm9sZC50eXBlID0gZXhwb3J0czIuTWFuaWZvbGRUeXBlLmVfY2lyY2xlcztcbiAgICAgIHplcm9WZWMyKG1hbmlmb2xkLmxvY2FsTm9ybWFsKTtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLmxvY2FsUG9pbnQsIFApO1xuICAgICAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDE7XG4gICAgICBjb3B5VmVjMihtYW5pZm9sZC5wb2ludHNbMF0ubG9jYWxQb2ludCwgY2lyY2xlQi5tX3ApO1xuICAgICAgbWFuaWZvbGQucG9pbnRzWzBdLmlkLnNldEZlYXR1cmVzKDEsIGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX3ZlcnRleCwgMCwgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGRlbiA9IGxlbmd0aFNxclZlYzIoZSk7XG4gICAgY29tYmluZTJWZWMyKFAsIHUgLyBkZW4sIEEsIHYzIC8gZGVuLCBCKTtcbiAgICB2YXIgZGQgPSBkaXN0U3FyVmVjMihRLCBQKTtcbiAgICBpZiAoZGQgPiByYWRpdXMgKiByYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY3Jvc3NOdW1WZWMyKG4kMiwgMSwgZSk7XG4gICAgaWYgKGRvdFZlYzIobiQyLCBRKSAtIGRvdFZlYzIobiQyLCBBKSA8IDApIHtcbiAgICAgIG5lZ1ZlYzIobiQyKTtcbiAgICB9XG4gICAgbm9ybWFsaXplVmVjMihuJDIpO1xuICAgIG1hbmlmb2xkLnR5cGUgPSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV9mYWNlQTtcbiAgICBjb3B5VmVjMihtYW5pZm9sZC5sb2NhbE5vcm1hbCwgbiQyKTtcbiAgICBjb3B5VmVjMihtYW5pZm9sZC5sb2NhbFBvaW50LCBBKTtcbiAgICBtYW5pZm9sZC5wb2ludENvdW50ID0gMTtcbiAgICBjb3B5VmVjMihtYW5pZm9sZC5wb2ludHNbMF0ubG9jYWxQb2ludCwgY2lyY2xlQi5tX3ApO1xuICAgIG1hbmlmb2xkLnBvaW50c1swXS5pZC5zZXRGZWF0dXJlcygwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV9mYWNlLCAwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgpO1xuICB9O1xuICB2YXIgaW5jaWRlbnRFZGdlID0gW25ldyBDbGlwVmVydGV4KCksIG5ldyBDbGlwVmVydGV4KCldO1xuICB2YXIgY2xpcFBvaW50czEkMSA9IFtuZXcgQ2xpcFZlcnRleCgpLCBuZXcgQ2xpcFZlcnRleCgpXTtcbiAgdmFyIGNsaXBQb2ludHMyJDEgPSBbbmV3IENsaXBWZXJ0ZXgoKSwgbmV3IENsaXBWZXJ0ZXgoKV07XG4gIHZhciBjbGlwU2VnbWVudFRvTGluZU5vcm1hbCA9IHZlYzIoMCwgMCk7XG4gIHZhciB2MSA9IHZlYzIoMCwgMCk7XG4gIHZhciBuJDEgPSB2ZWMyKDAsIDApO1xuICB2YXIgeGYkMSA9IHRyYW5zZm9ybSgwLCAwLCAwKTtcbiAgdmFyIHYxMSA9IHZlYzIoMCwgMCk7XG4gIHZhciB2MTIgPSB2ZWMyKDAsIDApO1xuICB2YXIgbG9jYWxUYW5nZW50ID0gdmVjMigwLCAwKTtcbiAgdmFyIGxvY2FsTm9ybWFsID0gdmVjMigwLCAwKTtcbiAgdmFyIHBsYW5lUG9pbnQgPSB2ZWMyKDAsIDApO1xuICB2YXIgdGFuZ2VudCA9IHZlYzIoMCwgMCk7XG4gIHZhciBub3JtYWwkMSA9IHZlYzIoMCwgMCk7XG4gIHZhciBub3JtYWwxJDEgPSB2ZWMyKDAsIDApO1xuICBDb250YWN0LmFkZFR5cGUoUG9seWdvblNoYXBlLlRZUEUsIFBvbHlnb25TaGFwZS5UWVBFLCBQb2x5Z29uQ29udGFjdCk7XG4gIGZ1bmN0aW9uIFBvbHlnb25Db250YWN0KG1hbmlmb2xkLCB4ZkEyLCBmaXh0dXJlQSwgaW5kZXhBLCB4ZkIyLCBmaXh0dXJlQiwgaW5kZXhCKSB7XG4gICAgQ29sbGlkZVBvbHlnb25zKG1hbmlmb2xkLCBmaXh0dXJlQS5nZXRTaGFwZSgpLCB4ZkEyLCBmaXh0dXJlQi5nZXRTaGFwZSgpLCB4ZkIyKTtcbiAgfVxuICBmdW5jdGlvbiBmaW5kTWF4U2VwYXJhdGlvbihwb2x5MSwgeGYxLCBwb2x5MiwgeGYyLCBvdXRwdXQyKSB7XG4gICAgdmFyIGNvdW50MSA9IHBvbHkxLm1fY291bnQ7XG4gICAgdmFyIGNvdW50MiA9IHBvbHkyLm1fY291bnQ7XG4gICAgdmFyIG4xcyA9IHBvbHkxLm1fbm9ybWFscztcbiAgICB2YXIgdjFzID0gcG9seTEubV92ZXJ0aWNlcztcbiAgICB2YXIgdjJzID0gcG9seTIubV92ZXJ0aWNlcztcbiAgICBkZXRyYW5zZm9ybVRyYW5zZm9ybSh4ZiQxLCB4ZjIsIHhmMSk7XG4gICAgdmFyIGJlc3RJbmRleCA9IDA7XG4gICAgdmFyIG1heFNlcGFyYXRpb24yID0gLUluZmluaXR5O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQxOyArK2kpIHtcbiAgICAgIHJvdFZlYzIobiQxLCB4ZiQxLnEsIG4xc1tpXSk7XG4gICAgICB0cmFuc2Zvcm1WZWMyKHYxLCB4ZiQxLCB2MXNbaV0pO1xuICAgICAgdmFyIHNpID0gSW5maW5pdHk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvdW50MjsgKytqKSB7XG4gICAgICAgIHZhciBzaWogPSBkb3RWZWMyKG4kMSwgdjJzW2pdKSAtIGRvdFZlYzIobiQxLCB2MSk7XG4gICAgICAgIGlmIChzaWogPCBzaSkge1xuICAgICAgICAgIHNpID0gc2lqO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2kgPiBtYXhTZXBhcmF0aW9uMikge1xuICAgICAgICBtYXhTZXBhcmF0aW9uMiA9IHNpO1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgfVxuICAgIH1cbiAgICBvdXRwdXQyLm1heFNlcGFyYXRpb24gPSBtYXhTZXBhcmF0aW9uMjtcbiAgICBvdXRwdXQyLmJlc3RJbmRleCA9IGJlc3RJbmRleDtcbiAgfVxuICBmdW5jdGlvbiBmaW5kSW5jaWRlbnRFZGdlKGNsaXBWZXJ0ZXgsIHBvbHkxLCB4ZjEsIGVkZ2UxMiwgcG9seTIsIHhmMikge1xuICAgIHZhciBub3JtYWxzMSA9IHBvbHkxLm1fbm9ybWFscztcbiAgICB2YXIgY291bnQyID0gcG9seTIubV9jb3VudDtcbiAgICB2YXIgdmVydGljZXMyID0gcG9seTIubV92ZXJ0aWNlcztcbiAgICB2YXIgbm9ybWFsczIgPSBwb2x5Mi5tX25vcm1hbHM7XG4gICAgcmVyb3RWZWMyKG5vcm1hbDEkMSwgeGYyLnEsIHhmMS5xLCBub3JtYWxzMVtlZGdlMTJdKTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBtaW5Eb3QgPSBJbmZpbml0eTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50MjsgKytpKSB7XG4gICAgICB2YXIgZG90ID0gZG90VmVjMihub3JtYWwxJDEsIG5vcm1hbHMyW2ldKTtcbiAgICAgIGlmIChkb3QgPCBtaW5Eb3QpIHtcbiAgICAgICAgbWluRG90ID0gZG90O1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBpMSA9IGluZGV4O1xuICAgIHZhciBpMiA9IGkxICsgMSA8IGNvdW50MiA/IGkxICsgMSA6IDA7XG4gICAgdHJhbnNmb3JtVmVjMihjbGlwVmVydGV4WzBdLnYsIHhmMiwgdmVydGljZXMyW2kxXSk7XG4gICAgY2xpcFZlcnRleFswXS5pZC5zZXRGZWF0dXJlcyhlZGdlMTIsIGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX2ZhY2UsIGkxLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgpO1xuICAgIHRyYW5zZm9ybVZlYzIoY2xpcFZlcnRleFsxXS52LCB4ZjIsIHZlcnRpY2VzMltpMl0pO1xuICAgIGNsaXBWZXJ0ZXhbMV0uaWQuc2V0RmVhdHVyZXMoZWRnZTEyLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV9mYWNlLCBpMiwgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4KTtcbiAgfVxuICB2YXIgbWF4U2VwYXJhdGlvbiA9IHtcbiAgICBtYXhTZXBhcmF0aW9uOiAwLFxuICAgIGJlc3RJbmRleDogMFxuICB9O1xuICB2YXIgQ29sbGlkZVBvbHlnb25zID0gZnVuY3Rpb24obWFuaWZvbGQsIHBvbHlBLCB4ZkEyLCBwb2x5QiwgeGZCMikge1xuICAgIG1hbmlmb2xkLnBvaW50Q291bnQgPSAwO1xuICAgIHZhciB0b3RhbFJhZGl1cyA9IHBvbHlBLm1fcmFkaXVzICsgcG9seUIubV9yYWRpdXM7XG4gICAgZmluZE1heFNlcGFyYXRpb24ocG9seUEsIHhmQTIsIHBvbHlCLCB4ZkIyLCBtYXhTZXBhcmF0aW9uKTtcbiAgICB2YXIgZWRnZUEgPSBtYXhTZXBhcmF0aW9uLmJlc3RJbmRleDtcbiAgICB2YXIgc2VwYXJhdGlvbkEgPSBtYXhTZXBhcmF0aW9uLm1heFNlcGFyYXRpb247XG4gICAgaWYgKHNlcGFyYXRpb25BID4gdG90YWxSYWRpdXMpXG4gICAgICByZXR1cm47XG4gICAgZmluZE1heFNlcGFyYXRpb24ocG9seUIsIHhmQjIsIHBvbHlBLCB4ZkEyLCBtYXhTZXBhcmF0aW9uKTtcbiAgICB2YXIgZWRnZUIgPSBtYXhTZXBhcmF0aW9uLmJlc3RJbmRleDtcbiAgICB2YXIgc2VwYXJhdGlvbkIgPSBtYXhTZXBhcmF0aW9uLm1heFNlcGFyYXRpb247XG4gICAgaWYgKHNlcGFyYXRpb25CID4gdG90YWxSYWRpdXMpXG4gICAgICByZXR1cm47XG4gICAgdmFyIHBvbHkxO1xuICAgIHZhciBwb2x5MjtcbiAgICB2YXIgeGYxO1xuICAgIHZhciB4ZjI7XG4gICAgdmFyIGVkZ2UxMjtcbiAgICB2YXIgZmxpcDtcbiAgICB2YXIga190b2wgPSAwLjEgKiBTZXR0aW5nc0ludGVybmFsLmxpbmVhclNsb3A7XG4gICAgaWYgKHNlcGFyYXRpb25CID4gc2VwYXJhdGlvbkEgKyBrX3RvbCkge1xuICAgICAgcG9seTEgPSBwb2x5QjtcbiAgICAgIHBvbHkyID0gcG9seUE7XG4gICAgICB4ZjEgPSB4ZkIyO1xuICAgICAgeGYyID0geGZBMjtcbiAgICAgIGVkZ2UxMiA9IGVkZ2VCO1xuICAgICAgbWFuaWZvbGQudHlwZSA9IGV4cG9ydHMyLk1hbmlmb2xkVHlwZS5lX2ZhY2VCO1xuICAgICAgZmxpcCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvbHkxID0gcG9seUE7XG4gICAgICBwb2x5MiA9IHBvbHlCO1xuICAgICAgeGYxID0geGZBMjtcbiAgICAgIHhmMiA9IHhmQjI7XG4gICAgICBlZGdlMTIgPSBlZGdlQTtcbiAgICAgIG1hbmlmb2xkLnR5cGUgPSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV9mYWNlQTtcbiAgICAgIGZsaXAgPSBmYWxzZTtcbiAgICB9XG4gICAgaW5jaWRlbnRFZGdlWzBdLnJlY3ljbGUoKTtcbiAgICBpbmNpZGVudEVkZ2VbMV0ucmVjeWNsZSgpO1xuICAgIGZpbmRJbmNpZGVudEVkZ2UoaW5jaWRlbnRFZGdlLCBwb2x5MSwgeGYxLCBlZGdlMTIsIHBvbHkyLCB4ZjIpO1xuICAgIHZhciBjb3VudDEgPSBwb2x5MS5tX2NvdW50O1xuICAgIHZhciB2ZXJ0aWNlczEgPSBwb2x5MS5tX3ZlcnRpY2VzO1xuICAgIHZhciBpdjEgPSBlZGdlMTI7XG4gICAgdmFyIGl2MiA9IGVkZ2UxMiArIDEgPCBjb3VudDEgPyBlZGdlMTIgKyAxIDogMDtcbiAgICBjb3B5VmVjMih2MTEsIHZlcnRpY2VzMVtpdjFdKTtcbiAgICBjb3B5VmVjMih2MTIsIHZlcnRpY2VzMVtpdjJdKTtcbiAgICBzdWJWZWMyKGxvY2FsVGFuZ2VudCwgdjEyLCB2MTEpO1xuICAgIG5vcm1hbGl6ZVZlYzIobG9jYWxUYW5nZW50KTtcbiAgICBjcm9zc1ZlYzJOdW0obG9jYWxOb3JtYWwsIGxvY2FsVGFuZ2VudCwgMSk7XG4gICAgY29tYmluZTJWZWMyKHBsYW5lUG9pbnQsIDAuNSwgdjExLCAwLjUsIHYxMik7XG4gICAgcm90VmVjMih0YW5nZW50LCB4ZjEucSwgbG9jYWxUYW5nZW50KTtcbiAgICBjcm9zc1ZlYzJOdW0obm9ybWFsJDEsIHRhbmdlbnQsIDEpO1xuICAgIHRyYW5zZm9ybVZlYzIodjExLCB4ZjEsIHYxMSk7XG4gICAgdHJhbnNmb3JtVmVjMih2MTIsIHhmMSwgdjEyKTtcbiAgICB2YXIgZnJvbnRPZmZzZXQgPSBkb3RWZWMyKG5vcm1hbCQxLCB2MTEpO1xuICAgIHZhciBzaWRlT2Zmc2V0MSA9IC1kb3RWZWMyKHRhbmdlbnQsIHYxMSkgKyB0b3RhbFJhZGl1cztcbiAgICB2YXIgc2lkZU9mZnNldDIgPSBkb3RWZWMyKHRhbmdlbnQsIHYxMikgKyB0b3RhbFJhZGl1cztcbiAgICBjbGlwUG9pbnRzMSQxWzBdLnJlY3ljbGUoKTtcbiAgICBjbGlwUG9pbnRzMSQxWzFdLnJlY3ljbGUoKTtcbiAgICBjbGlwUG9pbnRzMiQxWzBdLnJlY3ljbGUoKTtcbiAgICBjbGlwUG9pbnRzMiQxWzFdLnJlY3ljbGUoKTtcbiAgICBzZXRWZWMyKGNsaXBTZWdtZW50VG9MaW5lTm9ybWFsLCAtdGFuZ2VudC54LCAtdGFuZ2VudC55KTtcbiAgICB2YXIgbnAxID0gY2xpcFNlZ21lbnRUb0xpbmUoY2xpcFBvaW50czEkMSwgaW5jaWRlbnRFZGdlLCBjbGlwU2VnbWVudFRvTGluZU5vcm1hbCwgc2lkZU9mZnNldDEsIGl2MSk7XG4gICAgaWYgKG5wMSA8IDIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0VmVjMihjbGlwU2VnbWVudFRvTGluZU5vcm1hbCwgdGFuZ2VudC54LCB0YW5nZW50LnkpO1xuICAgIHZhciBucDIgPSBjbGlwU2VnbWVudFRvTGluZShjbGlwUG9pbnRzMiQxLCBjbGlwUG9pbnRzMSQxLCBjbGlwU2VnbWVudFRvTGluZU5vcm1hbCwgc2lkZU9mZnNldDIsIGl2Mik7XG4gICAgaWYgKG5wMiA8IDIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29weVZlYzIobWFuaWZvbGQubG9jYWxOb3JtYWwsIGxvY2FsTm9ybWFsKTtcbiAgICBjb3B5VmVjMihtYW5pZm9sZC5sb2NhbFBvaW50LCBwbGFuZVBvaW50KTtcbiAgICB2YXIgcG9pbnRDb3VudCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGlwUG9pbnRzMiQxLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc2VwYXJhdGlvbiA9IGRvdFZlYzIobm9ybWFsJDEsIGNsaXBQb2ludHMyJDFbaV0udikgLSBmcm9udE9mZnNldDtcbiAgICAgIGlmIChzZXBhcmF0aW9uIDw9IHRvdGFsUmFkaXVzKSB7XG4gICAgICAgIHZhciBjcCA9IG1hbmlmb2xkLnBvaW50c1twb2ludENvdW50XTtcbiAgICAgICAgZGV0cmFuc2Zvcm1WZWMyKGNwLmxvY2FsUG9pbnQsIHhmMiwgY2xpcFBvaW50czIkMVtpXS52KTtcbiAgICAgICAgY3AuaWQuc2V0KGNsaXBQb2ludHMyJDFbaV0uaWQpO1xuICAgICAgICBpZiAoZmxpcCkge1xuICAgICAgICAgIGNwLmlkLnN3YXBGZWF0dXJlcygpO1xuICAgICAgICB9XG4gICAgICAgICsrcG9pbnRDb3VudDtcbiAgICAgIH1cbiAgICB9XG4gICAgbWFuaWZvbGQucG9pbnRDb3VudCA9IHBvaW50Q291bnQ7XG4gIH07XG4gIENvbnRhY3QuYWRkVHlwZShQb2x5Z29uU2hhcGUuVFlQRSwgQ2lyY2xlU2hhcGUuVFlQRSwgUG9seWdvbkNpcmNsZUNvbnRhY3QpO1xuICBmdW5jdGlvbiBQb2x5Z29uQ2lyY2xlQ29udGFjdChtYW5pZm9sZCwgeGZBMiwgZml4dHVyZUEsIGluZGV4QSwgeGZCMiwgZml4dHVyZUIsIGluZGV4Qikge1xuICAgIENvbGxpZGVQb2x5Z29uQ2lyY2xlKG1hbmlmb2xkLCBmaXh0dXJlQS5nZXRTaGFwZSgpLCB4ZkEyLCBmaXh0dXJlQi5nZXRTaGFwZSgpLCB4ZkIyKTtcbiAgfVxuICB2YXIgY0xvY2FsID0gdmVjMigwLCAwKTtcbiAgdmFyIGZhY2VDZW50ZXIgPSB2ZWMyKDAsIDApO1xuICB2YXIgQ29sbGlkZVBvbHlnb25DaXJjbGUgPSBmdW5jdGlvbihtYW5pZm9sZCwgcG9seWdvbkEsIHhmQTIsIGNpcmNsZUIsIHhmQjIpIHtcbiAgICBtYW5pZm9sZC5wb2ludENvdW50ID0gMDtcbiAgICByZXRyYW5zZm9ybVZlYzIoY0xvY2FsLCB4ZkIyLCB4ZkEyLCBjaXJjbGVCLm1fcCk7XG4gICAgdmFyIG5vcm1hbEluZGV4ID0gMDtcbiAgICB2YXIgc2VwYXJhdGlvbiA9IC1JbmZpbml0eTtcbiAgICB2YXIgcmFkaXVzID0gcG9seWdvbkEubV9yYWRpdXMgKyBjaXJjbGVCLm1fcmFkaXVzO1xuICAgIHZhciB2ZXJ0ZXhDb3VudCA9IHBvbHlnb25BLm1fY291bnQ7XG4gICAgdmFyIHZlcnRpY2VzID0gcG9seWdvbkEubV92ZXJ0aWNlcztcbiAgICB2YXIgbm9ybWFscyA9IHBvbHlnb25BLm1fbm9ybWFscztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRleENvdW50OyArK2kpIHtcbiAgICAgIHZhciBzMiA9IGRvdFZlYzIobm9ybWFsc1tpXSwgY0xvY2FsKSAtIGRvdFZlYzIobm9ybWFsc1tpXSwgdmVydGljZXNbaV0pO1xuICAgICAgaWYgKHMyID4gcmFkaXVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzMiA+IHNlcGFyYXRpb24pIHtcbiAgICAgICAgc2VwYXJhdGlvbiA9IHMyO1xuICAgICAgICBub3JtYWxJbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciB2ZXJ0SW5kZXgxID0gbm9ybWFsSW5kZXg7XG4gICAgdmFyIHZlcnRJbmRleDIgPSB2ZXJ0SW5kZXgxICsgMSA8IHZlcnRleENvdW50ID8gdmVydEluZGV4MSArIDEgOiAwO1xuICAgIHZhciB2MTMgPSB2ZXJ0aWNlc1t2ZXJ0SW5kZXgxXTtcbiAgICB2YXIgdjIyID0gdmVydGljZXNbdmVydEluZGV4Ml07XG4gICAgaWYgKHNlcGFyYXRpb24gPCBFUFNJTE9OKSB7XG4gICAgICBtYW5pZm9sZC5wb2ludENvdW50ID0gMTtcbiAgICAgIG1hbmlmb2xkLnR5cGUgPSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV9mYWNlQTtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLmxvY2FsTm9ybWFsLCBub3JtYWxzW25vcm1hbEluZGV4XSk7XG4gICAgICBjb21iaW5lMlZlYzIobWFuaWZvbGQubG9jYWxQb2ludCwgMC41LCB2MTMsIDAuNSwgdjIyKTtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLnBvaW50c1swXS5sb2NhbFBvaW50LCBjaXJjbGVCLm1fcCk7XG4gICAgICBtYW5pZm9sZC5wb2ludHNbMF0uaWQuc2V0RmVhdHVyZXMoMCwgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4LCAwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdTEgPSBkb3RWZWMyKGNMb2NhbCwgdjIyKSAtIGRvdFZlYzIoY0xvY2FsLCB2MTMpIC0gZG90VmVjMih2MTMsIHYyMikgKyBkb3RWZWMyKHYxMywgdjEzKTtcbiAgICB2YXIgdTIgPSBkb3RWZWMyKGNMb2NhbCwgdjEzKSAtIGRvdFZlYzIoY0xvY2FsLCB2MjIpIC0gZG90VmVjMih2MjIsIHYxMykgKyBkb3RWZWMyKHYyMiwgdjIyKTtcbiAgICBpZiAodTEgPD0gMCkge1xuICAgICAgaWYgKGRpc3RTcXJWZWMyKGNMb2NhbCwgdjEzKSA+IHJhZGl1cyAqIHJhZGl1cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBtYW5pZm9sZC5wb2ludENvdW50ID0gMTtcbiAgICAgIG1hbmlmb2xkLnR5cGUgPSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV9mYWNlQTtcbiAgICAgIHN1YlZlYzIobWFuaWZvbGQubG9jYWxOb3JtYWwsIGNMb2NhbCwgdjEzKTtcbiAgICAgIG5vcm1hbGl6ZVZlYzIobWFuaWZvbGQubG9jYWxOb3JtYWwpO1xuICAgICAgY29weVZlYzIobWFuaWZvbGQubG9jYWxQb2ludCwgdjEzKTtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLnBvaW50c1swXS5sb2NhbFBvaW50LCBjaXJjbGVCLm1fcCk7XG4gICAgICBtYW5pZm9sZC5wb2ludHNbMF0uaWQuc2V0RmVhdHVyZXMoMCwgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4LCAwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgpO1xuICAgIH0gZWxzZSBpZiAodTIgPD0gMCkge1xuICAgICAgaWYgKGRpc3RTcXJWZWMyKGNMb2NhbCwgdjIyKSA+IHJhZGl1cyAqIHJhZGl1cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBtYW5pZm9sZC5wb2ludENvdW50ID0gMTtcbiAgICAgIG1hbmlmb2xkLnR5cGUgPSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV9mYWNlQTtcbiAgICAgIHN1YlZlYzIobWFuaWZvbGQubG9jYWxOb3JtYWwsIGNMb2NhbCwgdjIyKTtcbiAgICAgIG5vcm1hbGl6ZVZlYzIobWFuaWZvbGQubG9jYWxOb3JtYWwpO1xuICAgICAgY29weVZlYzIobWFuaWZvbGQubG9jYWxQb2ludCwgdjIyKTtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLnBvaW50c1swXS5sb2NhbFBvaW50LCBjaXJjbGVCLm1fcCk7XG4gICAgICBtYW5pZm9sZC5wb2ludHNbMF0uaWQuc2V0RmVhdHVyZXMoMCwgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlLmVfdmVydGV4LCAwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb21iaW5lMlZlYzIoZmFjZUNlbnRlciwgMC41LCB2MTMsIDAuNSwgdjIyKTtcbiAgICAgIHZhciBzZXBhcmF0aW9uXzEgPSBkb3RWZWMyKGNMb2NhbCwgbm9ybWFsc1t2ZXJ0SW5kZXgxXSkgLSBkb3RWZWMyKGZhY2VDZW50ZXIsIG5vcm1hbHNbdmVydEluZGV4MV0pO1xuICAgICAgaWYgKHNlcGFyYXRpb25fMSA+IHJhZGl1cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBtYW5pZm9sZC5wb2ludENvdW50ID0gMTtcbiAgICAgIG1hbmlmb2xkLnR5cGUgPSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV9mYWNlQTtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLmxvY2FsTm9ybWFsLCBub3JtYWxzW3ZlcnRJbmRleDFdKTtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLmxvY2FsUG9pbnQsIGZhY2VDZW50ZXIpO1xuICAgICAgY29weVZlYzIobWFuaWZvbGQucG9pbnRzWzBdLmxvY2FsUG9pbnQsIGNpcmNsZUIubV9wKTtcbiAgICAgIG1hbmlmb2xkLnBvaW50c1swXS5pZC5zZXRGZWF0dXJlcygwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgsIDAsIGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX3ZlcnRleCk7XG4gICAgfVxuICB9O1xuICB2YXIgbWF0aF9taW4gPSBNYXRoLm1pbjtcbiAgQ29udGFjdC5hZGRUeXBlKEVkZ2VTaGFwZS5UWVBFLCBQb2x5Z29uU2hhcGUuVFlQRSwgRWRnZVBvbHlnb25Db250YWN0KTtcbiAgQ29udGFjdC5hZGRUeXBlKENoYWluU2hhcGUuVFlQRSwgUG9seWdvblNoYXBlLlRZUEUsIENoYWluUG9seWdvbkNvbnRhY3QpO1xuICBmdW5jdGlvbiBFZGdlUG9seWdvbkNvbnRhY3QobWFuaWZvbGQsIHhmQTIsIGZBLCBpbmRleEEsIHhmQjIsIGZCLCBpbmRleEIpIHtcbiAgICBDb2xsaWRlRWRnZVBvbHlnb24obWFuaWZvbGQsIGZBLmdldFNoYXBlKCksIHhmQTIsIGZCLmdldFNoYXBlKCksIHhmQjIpO1xuICB9XG4gIHZhciBlZGdlX3JldXNlID0gbmV3IEVkZ2VTaGFwZSgpO1xuICBmdW5jdGlvbiBDaGFpblBvbHlnb25Db250YWN0KG1hbmlmb2xkLCB4ZkEyLCBmQSwgaW5kZXhBLCB4ZkIyLCBmQiwgaW5kZXhCKSB7XG4gICAgdmFyIGNoYWluID0gZkEuZ2V0U2hhcGUoKTtcbiAgICBjaGFpbi5nZXRDaGlsZEVkZ2UoZWRnZV9yZXVzZSwgaW5kZXhBKTtcbiAgICBDb2xsaWRlRWRnZVBvbHlnb24obWFuaWZvbGQsIGVkZ2VfcmV1c2UsIHhmQTIsIGZCLmdldFNoYXBlKCksIHhmQjIpO1xuICB9XG4gIHZhciBFUEF4aXNUeXBlO1xuICAoZnVuY3Rpb24oRVBBeGlzVHlwZTIpIHtcbiAgICBFUEF4aXNUeXBlMltFUEF4aXNUeXBlMltcImVfdW5rbm93blwiXSA9IC0xXSA9IFwiZV91bmtub3duXCI7XG4gICAgRVBBeGlzVHlwZTJbRVBBeGlzVHlwZTJbXCJlX2VkZ2VBXCJdID0gMV0gPSBcImVfZWRnZUFcIjtcbiAgICBFUEF4aXNUeXBlMltFUEF4aXNUeXBlMltcImVfZWRnZUJcIl0gPSAyXSA9IFwiZV9lZGdlQlwiO1xuICB9KShFUEF4aXNUeXBlIHx8IChFUEF4aXNUeXBlID0ge30pKTtcbiAgdmFyIFZlcnRleFR5cGU7XG4gIChmdW5jdGlvbihWZXJ0ZXhUeXBlMikge1xuICAgIFZlcnRleFR5cGUyW1ZlcnRleFR5cGUyW1wiZV9pc29sYXRlZFwiXSA9IDBdID0gXCJlX2lzb2xhdGVkXCI7XG4gICAgVmVydGV4VHlwZTJbVmVydGV4VHlwZTJbXCJlX2NvbmNhdmVcIl0gPSAxXSA9IFwiZV9jb25jYXZlXCI7XG4gICAgVmVydGV4VHlwZTJbVmVydGV4VHlwZTJbXCJlX2NvbnZleFwiXSA9IDJdID0gXCJlX2NvbnZleFwiO1xuICB9KShWZXJ0ZXhUeXBlIHx8IChWZXJ0ZXhUeXBlID0ge30pKTtcbiAgdmFyIEVQQXhpcyA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gRVBBeGlzMigpIHtcbiAgICAgIH1cbiAgICAgIHJldHVybiBFUEF4aXMyO1xuICAgIH0oKVxuICApO1xuICB2YXIgVGVtcFBvbHlnb24gPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHtcbiAgICAgIGZ1bmN0aW9uIFRlbXBQb2x5Z29uMigpIHtcbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IFtdO1xuICAgICAgICB0aGlzLm5vcm1hbHMgPSBbXTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU2V0dGluZ3NJbnRlcm5hbC5tYXhQb2x5Z29uVmVydGljZXM7IGkrKykge1xuICAgICAgICAgIHRoaXMudmVydGljZXMucHVzaCh2ZWMyKDAsIDApKTtcbiAgICAgICAgICB0aGlzLm5vcm1hbHMucHVzaCh2ZWMyKDAsIDApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFRlbXBQb2x5Z29uMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIFJlZmVyZW5jZUZhY2UgPSAoXG4gICAgLyoqIEBjbGFzcyAqL1xuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgZnVuY3Rpb24gUmVmZXJlbmNlRmFjZTIoKSB7XG4gICAgICAgIHRoaXMudjEgPSB2ZWMyKDAsIDApO1xuICAgICAgICB0aGlzLnYyID0gdmVjMigwLCAwKTtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSB2ZWMyKDAsIDApO1xuICAgICAgICB0aGlzLnNpZGVOb3JtYWwxID0gdmVjMigwLCAwKTtcbiAgICAgICAgdGhpcy5zaWRlTm9ybWFsMiA9IHZlYzIoMCwgMCk7XG4gICAgICB9XG4gICAgICBSZWZlcmVuY2VGYWNlMi5wcm90b3R5cGUucmVjeWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB6ZXJvVmVjMih0aGlzLnYxKTtcbiAgICAgICAgemVyb1ZlYzIodGhpcy52Mik7XG4gICAgICAgIHplcm9WZWMyKHRoaXMubm9ybWFsKTtcbiAgICAgICAgemVyb1ZlYzIodGhpcy5zaWRlTm9ybWFsMSk7XG4gICAgICAgIHplcm9WZWMyKHRoaXMuc2lkZU5vcm1hbDIpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBSZWZlcmVuY2VGYWNlMjtcbiAgICB9KClcbiAgKTtcbiAgdmFyIGNsaXBQb2ludHMxID0gW25ldyBDbGlwVmVydGV4KCksIG5ldyBDbGlwVmVydGV4KCldO1xuICB2YXIgY2xpcFBvaW50czIgPSBbbmV3IENsaXBWZXJ0ZXgoKSwgbmV3IENsaXBWZXJ0ZXgoKV07XG4gIHZhciBpZSA9IFtuZXcgQ2xpcFZlcnRleCgpLCBuZXcgQ2xpcFZlcnRleCgpXTtcbiAgdmFyIGVkZ2VBeGlzID0gbmV3IEVQQXhpcygpO1xuICB2YXIgcG9seWdvbkF4aXMgPSBuZXcgRVBBeGlzKCk7XG4gIHZhciBwb2x5Z29uQkEgPSBuZXcgVGVtcFBvbHlnb24oKTtcbiAgdmFyIHJmID0gbmV3IFJlZmVyZW5jZUZhY2UoKTtcbiAgdmFyIGNlbnRyb2lkQiA9IHZlYzIoMCwgMCk7XG4gIHZhciBlZGdlMCA9IHZlYzIoMCwgMCk7XG4gIHZhciBlZGdlMSA9IHZlYzIoMCwgMCk7XG4gIHZhciBlZGdlMiA9IHZlYzIoMCwgMCk7XG4gIHZhciB4ZiA9IHRyYW5zZm9ybSgwLCAwLCAwKTtcbiAgdmFyIG5vcm1hbCA9IHZlYzIoMCwgMCk7XG4gIHZhciBub3JtYWwwID0gdmVjMigwLCAwKTtcbiAgdmFyIG5vcm1hbDEgPSB2ZWMyKDAsIDApO1xuICB2YXIgbm9ybWFsMiA9IHZlYzIoMCwgMCk7XG4gIHZhciBsb3dlckxpbWl0ID0gdmVjMigwLCAwKTtcbiAgdmFyIHVwcGVyTGltaXQgPSB2ZWMyKDAsIDApO1xuICB2YXIgcGVycCA9IHZlYzIoMCwgMCk7XG4gIHZhciBuID0gdmVjMigwLCAwKTtcbiAgdmFyIENvbGxpZGVFZGdlUG9seWdvbiA9IGZ1bmN0aW9uKG1hbmlmb2xkLCBlZGdlQSwgeGZBMiwgcG9seWdvbkIsIHhmQjIpIHtcbiAgICBkZXRyYW5zZm9ybVRyYW5zZm9ybSh4ZiwgeGZBMiwgeGZCMik7XG4gICAgdHJhbnNmb3JtVmVjMihjZW50cm9pZEIsIHhmLCBwb2x5Z29uQi5tX2NlbnRyb2lkKTtcbiAgICB2YXIgdjAgPSBlZGdlQS5tX3ZlcnRleDA7XG4gICAgdmFyIHYxMyA9IGVkZ2VBLm1fdmVydGV4MTtcbiAgICB2YXIgdjIyID0gZWRnZUEubV92ZXJ0ZXgyO1xuICAgIHZhciB2MyA9IGVkZ2VBLm1fdmVydGV4MztcbiAgICB2YXIgaGFzVmVydGV4MCA9IGVkZ2VBLm1faGFzVmVydGV4MDtcbiAgICB2YXIgaGFzVmVydGV4MyA9IGVkZ2VBLm1faGFzVmVydGV4MztcbiAgICBzdWJWZWMyKGVkZ2UxLCB2MjIsIHYxMyk7XG4gICAgbm9ybWFsaXplVmVjMihlZGdlMSk7XG4gICAgc2V0VmVjMihub3JtYWwxLCBlZGdlMS55LCAtZWRnZTEueCk7XG4gICAgdmFyIG9mZnNldDEgPSBkb3RWZWMyKG5vcm1hbDEsIGNlbnRyb2lkQikgLSBkb3RWZWMyKG5vcm1hbDEsIHYxMyk7XG4gICAgdmFyIG9mZnNldDAgPSAwO1xuICAgIHZhciBvZmZzZXQyID0gMDtcbiAgICB2YXIgY29udmV4MSA9IGZhbHNlO1xuICAgIHZhciBjb252ZXgyID0gZmFsc2U7XG4gICAgemVyb1ZlYzIobm9ybWFsMCk7XG4gICAgemVyb1ZlYzIobm9ybWFsMik7XG4gICAgaWYgKGhhc1ZlcnRleDApIHtcbiAgICAgIHN1YlZlYzIoZWRnZTAsIHYxMywgdjApO1xuICAgICAgbm9ybWFsaXplVmVjMihlZGdlMCk7XG4gICAgICBzZXRWZWMyKG5vcm1hbDAsIGVkZ2UwLnksIC1lZGdlMC54KTtcbiAgICAgIGNvbnZleDEgPSBjcm9zc1ZlYzJWZWMyKGVkZ2UwLCBlZGdlMSkgPj0gMDtcbiAgICAgIG9mZnNldDAgPSBWZWMyLmRvdChub3JtYWwwLCBjZW50cm9pZEIpIC0gVmVjMi5kb3Qobm9ybWFsMCwgdjApO1xuICAgIH1cbiAgICBpZiAoaGFzVmVydGV4Mykge1xuICAgICAgc3ViVmVjMihlZGdlMiwgdjMsIHYyMik7XG4gICAgICBub3JtYWxpemVWZWMyKGVkZ2UyKTtcbiAgICAgIHNldFZlYzIobm9ybWFsMiwgZWRnZTIueSwgLWVkZ2UyLngpO1xuICAgICAgY29udmV4MiA9IFZlYzIuY3Jvc3NWZWMyVmVjMihlZGdlMSwgZWRnZTIpID4gMDtcbiAgICAgIG9mZnNldDIgPSBWZWMyLmRvdChub3JtYWwyLCBjZW50cm9pZEIpIC0gVmVjMi5kb3Qobm9ybWFsMiwgdjIyKTtcbiAgICB9XG4gICAgdmFyIGZyb250O1xuICAgIHplcm9WZWMyKG5vcm1hbCk7XG4gICAgemVyb1ZlYzIobG93ZXJMaW1pdCk7XG4gICAgemVyb1ZlYzIodXBwZXJMaW1pdCk7XG4gICAgaWYgKGhhc1ZlcnRleDAgJiYgaGFzVmVydGV4Mykge1xuICAgICAgaWYgKGNvbnZleDEgJiYgY29udmV4Mikge1xuICAgICAgICBmcm9udCA9IG9mZnNldDAgPj0gMCB8fCBvZmZzZXQxID49IDAgfHwgb2Zmc2V0MiA+PSAwO1xuICAgICAgICBpZiAoZnJvbnQpIHtcbiAgICAgICAgICBjb3B5VmVjMihub3JtYWwsIG5vcm1hbDEpO1xuICAgICAgICAgIGNvcHlWZWMyKGxvd2VyTGltaXQsIG5vcm1hbDApO1xuICAgICAgICAgIGNvcHlWZWMyKHVwcGVyTGltaXQsIG5vcm1hbDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjYWxlVmVjMihub3JtYWwsIC0xLCBub3JtYWwxKTtcbiAgICAgICAgICBzY2FsZVZlYzIobG93ZXJMaW1pdCwgLTEsIG5vcm1hbDEpO1xuICAgICAgICAgIHNjYWxlVmVjMih1cHBlckxpbWl0LCAtMSwgbm9ybWFsMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29udmV4MSkge1xuICAgICAgICBmcm9udCA9IG9mZnNldDAgPj0gMCB8fCBvZmZzZXQxID49IDAgJiYgb2Zmc2V0MiA+PSAwO1xuICAgICAgICBpZiAoZnJvbnQpIHtcbiAgICAgICAgICBjb3B5VmVjMihub3JtYWwsIG5vcm1hbDEpO1xuICAgICAgICAgIGNvcHlWZWMyKGxvd2VyTGltaXQsIG5vcm1hbDApO1xuICAgICAgICAgIGNvcHlWZWMyKHVwcGVyTGltaXQsIG5vcm1hbDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjYWxlVmVjMihub3JtYWwsIC0xLCBub3JtYWwxKTtcbiAgICAgICAgICBzY2FsZVZlYzIobG93ZXJMaW1pdCwgLTEsIG5vcm1hbDIpO1xuICAgICAgICAgIHNjYWxlVmVjMih1cHBlckxpbWl0LCAtMSwgbm9ybWFsMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29udmV4Mikge1xuICAgICAgICBmcm9udCA9IG9mZnNldDIgPj0gMCB8fCBvZmZzZXQwID49IDAgJiYgb2Zmc2V0MSA+PSAwO1xuICAgICAgICBpZiAoZnJvbnQpIHtcbiAgICAgICAgICBjb3B5VmVjMihub3JtYWwsIG5vcm1hbDEpO1xuICAgICAgICAgIGNvcHlWZWMyKGxvd2VyTGltaXQsIG5vcm1hbDEpO1xuICAgICAgICAgIGNvcHlWZWMyKHVwcGVyTGltaXQsIG5vcm1hbDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjYWxlVmVjMihub3JtYWwsIC0xLCBub3JtYWwxKTtcbiAgICAgICAgICBzY2FsZVZlYzIobG93ZXJMaW1pdCwgLTEsIG5vcm1hbDEpO1xuICAgICAgICAgIHNjYWxlVmVjMih1cHBlckxpbWl0LCAtMSwgbm9ybWFsMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyb250ID0gb2Zmc2V0MCA+PSAwICYmIG9mZnNldDEgPj0gMCAmJiBvZmZzZXQyID49IDA7XG4gICAgICAgIGlmIChmcm9udCkge1xuICAgICAgICAgIGNvcHlWZWMyKG5vcm1hbCwgbm9ybWFsMSk7XG4gICAgICAgICAgY29weVZlYzIobG93ZXJMaW1pdCwgbm9ybWFsMSk7XG4gICAgICAgICAgY29weVZlYzIodXBwZXJMaW1pdCwgbm9ybWFsMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2NhbGVWZWMyKG5vcm1hbCwgLTEsIG5vcm1hbDEpO1xuICAgICAgICAgIHNjYWxlVmVjMihsb3dlckxpbWl0LCAtMSwgbm9ybWFsMik7XG4gICAgICAgICAgc2NhbGVWZWMyKHVwcGVyTGltaXQsIC0xLCBub3JtYWwwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFzVmVydGV4MCkge1xuICAgICAgaWYgKGNvbnZleDEpIHtcbiAgICAgICAgZnJvbnQgPSBvZmZzZXQwID49IDAgfHwgb2Zmc2V0MSA+PSAwO1xuICAgICAgICBpZiAoZnJvbnQpIHtcbiAgICAgICAgICBjb3B5VmVjMihub3JtYWwsIG5vcm1hbDEpO1xuICAgICAgICAgIGNvcHlWZWMyKGxvd2VyTGltaXQsIG5vcm1hbDApO1xuICAgICAgICAgIHNjYWxlVmVjMih1cHBlckxpbWl0LCAtMSwgbm9ybWFsMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2NhbGVWZWMyKG5vcm1hbCwgLTEsIG5vcm1hbDEpO1xuICAgICAgICAgIGNvcHlWZWMyKGxvd2VyTGltaXQsIG5vcm1hbDEpO1xuICAgICAgICAgIHNjYWxlVmVjMih1cHBlckxpbWl0LCAtMSwgbm9ybWFsMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyb250ID0gb2Zmc2V0MCA+PSAwICYmIG9mZnNldDEgPj0gMDtcbiAgICAgICAgaWYgKGZyb250KSB7XG4gICAgICAgICAgY29weVZlYzIobm9ybWFsLCBub3JtYWwxKTtcbiAgICAgICAgICBjb3B5VmVjMihsb3dlckxpbWl0LCBub3JtYWwxKTtcbiAgICAgICAgICBzY2FsZVZlYzIodXBwZXJMaW1pdCwgLTEsIG5vcm1hbDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNjYWxlVmVjMihub3JtYWwsIC0xLCBub3JtYWwxKTtcbiAgICAgICAgICBjb3B5VmVjMihsb3dlckxpbWl0LCBub3JtYWwxKTtcbiAgICAgICAgICBzY2FsZVZlYzIodXBwZXJMaW1pdCwgLTEsIG5vcm1hbDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChoYXNWZXJ0ZXgzKSB7XG4gICAgICBpZiAoY29udmV4Mikge1xuICAgICAgICBmcm9udCA9IG9mZnNldDEgPj0gMCB8fCBvZmZzZXQyID49IDA7XG4gICAgICAgIGlmIChmcm9udCkge1xuICAgICAgICAgIGNvcHlWZWMyKG5vcm1hbCwgbm9ybWFsMSk7XG4gICAgICAgICAgc2NhbGVWZWMyKGxvd2VyTGltaXQsIC0xLCBub3JtYWwxKTtcbiAgICAgICAgICBjb3B5VmVjMih1cHBlckxpbWl0LCBub3JtYWwyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzY2FsZVZlYzIobm9ybWFsLCAtMSwgbm9ybWFsMSk7XG4gICAgICAgICAgc2NhbGVWZWMyKGxvd2VyTGltaXQsIC0xLCBub3JtYWwxKTtcbiAgICAgICAgICBjb3B5VmVjMih1cHBlckxpbWl0LCBub3JtYWwxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnJvbnQgPSBvZmZzZXQxID49IDAgJiYgb2Zmc2V0MiA+PSAwO1xuICAgICAgICBpZiAoZnJvbnQpIHtcbiAgICAgICAgICBjb3B5VmVjMihub3JtYWwsIG5vcm1hbDEpO1xuICAgICAgICAgIHNjYWxlVmVjMihsb3dlckxpbWl0LCAtMSwgbm9ybWFsMSk7XG4gICAgICAgICAgY29weVZlYzIodXBwZXJMaW1pdCwgbm9ybWFsMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2NhbGVWZWMyKG5vcm1hbCwgLTEsIG5vcm1hbDEpO1xuICAgICAgICAgIHNjYWxlVmVjMihsb3dlckxpbWl0LCAtMSwgbm9ybWFsMik7XG4gICAgICAgICAgY29weVZlYzIodXBwZXJMaW1pdCwgbm9ybWFsMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZnJvbnQgPSBvZmZzZXQxID49IDA7XG4gICAgICBpZiAoZnJvbnQpIHtcbiAgICAgICAgY29weVZlYzIobm9ybWFsLCBub3JtYWwxKTtcbiAgICAgICAgc2NhbGVWZWMyKGxvd2VyTGltaXQsIC0xLCBub3JtYWwxKTtcbiAgICAgICAgc2NhbGVWZWMyKHVwcGVyTGltaXQsIC0xLCBub3JtYWwxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjYWxlVmVjMihub3JtYWwsIC0xLCBub3JtYWwxKTtcbiAgICAgICAgY29weVZlYzIobG93ZXJMaW1pdCwgbm9ybWFsMSk7XG4gICAgICAgIGNvcHlWZWMyKHVwcGVyTGltaXQsIG5vcm1hbDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBwb2x5Z29uQkEuY291bnQgPSBwb2x5Z29uQi5tX2NvdW50O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9seWdvbkIubV9jb3VudDsgKytpKSB7XG4gICAgICB0cmFuc2Zvcm1WZWMyKHBvbHlnb25CQS52ZXJ0aWNlc1tpXSwgeGYsIHBvbHlnb25CLm1fdmVydGljZXNbaV0pO1xuICAgICAgcm90VmVjMihwb2x5Z29uQkEubm9ybWFsc1tpXSwgeGYucSwgcG9seWdvbkIubV9ub3JtYWxzW2ldKTtcbiAgICB9XG4gICAgdmFyIHJhZGl1cyA9IHBvbHlnb25CLm1fcmFkaXVzICsgZWRnZUEubV9yYWRpdXM7XG4gICAgbWFuaWZvbGQucG9pbnRDb3VudCA9IDA7XG4gICAge1xuICAgICAgZWRnZUF4aXMudHlwZSA9IEVQQXhpc1R5cGUuZV9lZGdlQTtcbiAgICAgIGVkZ2VBeGlzLmluZGV4ID0gZnJvbnQgPyAwIDogMTtcbiAgICAgIGVkZ2VBeGlzLnNlcGFyYXRpb24gPSBJbmZpbml0eTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9seWdvbkJBLmNvdW50OyArK2kpIHtcbiAgICAgICAgdmFyIHY0ID0gcG9seWdvbkJBLnZlcnRpY2VzW2ldO1xuICAgICAgICB2YXIgczIgPSBkb3RWZWMyKG5vcm1hbCwgdjQpIC0gZG90VmVjMihub3JtYWwsIHYxMyk7XG4gICAgICAgIGlmIChzMiA8IGVkZ2VBeGlzLnNlcGFyYXRpb24pIHtcbiAgICAgICAgICBlZGdlQXhpcy5zZXBhcmF0aW9uID0gczI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVkZ2VBeGlzLnR5cGUgPT0gRVBBeGlzVHlwZS5lX3Vua25vd24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGVkZ2VBeGlzLnNlcGFyYXRpb24gPiByYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAge1xuICAgICAgcG9seWdvbkF4aXMudHlwZSA9IEVQQXhpc1R5cGUuZV91bmtub3duO1xuICAgICAgcG9seWdvbkF4aXMuaW5kZXggPSAtMTtcbiAgICAgIHBvbHlnb25BeGlzLnNlcGFyYXRpb24gPSAtSW5maW5pdHk7XG4gICAgICBzZXRWZWMyKHBlcnAsIC1ub3JtYWwueSwgbm9ybWFsLngpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2x5Z29uQkEuY291bnQ7ICsraSkge1xuICAgICAgICBzY2FsZVZlYzIobiwgLTEsIHBvbHlnb25CQS5ub3JtYWxzW2ldKTtcbiAgICAgICAgdmFyIHMxID0gZG90VmVjMihuLCBwb2x5Z29uQkEudmVydGljZXNbaV0pIC0gZG90VmVjMihuLCB2MTMpO1xuICAgICAgICB2YXIgczIyID0gZG90VmVjMihuLCBwb2x5Z29uQkEudmVydGljZXNbaV0pIC0gZG90VmVjMihuLCB2MjIpO1xuICAgICAgICB2YXIgczIgPSBtYXRoX21pbihzMSwgczIyKTtcbiAgICAgICAgaWYgKHMyID4gcmFkaXVzKSB7XG4gICAgICAgICAgcG9seWdvbkF4aXMudHlwZSA9IEVQQXhpc1R5cGUuZV9lZGdlQjtcbiAgICAgICAgICBwb2x5Z29uQXhpcy5pbmRleCA9IGk7XG4gICAgICAgICAgcG9seWdvbkF4aXMuc2VwYXJhdGlvbiA9IHMyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb3RWZWMyKG4sIHBlcnApID49IDApIHtcbiAgICAgICAgICBpZiAoZG90VmVjMihuLCBub3JtYWwpIC0gZG90VmVjMih1cHBlckxpbWl0LCBub3JtYWwpIDwgLVNldHRpbmdzSW50ZXJuYWwuYW5ndWxhclNsb3ApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZG90VmVjMihuLCBub3JtYWwpIC0gZG90VmVjMihsb3dlckxpbWl0LCBub3JtYWwpIDwgLVNldHRpbmdzSW50ZXJuYWwuYW5ndWxhclNsb3ApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoczIgPiBwb2x5Z29uQXhpcy5zZXBhcmF0aW9uKSB7XG4gICAgICAgICAgcG9seWdvbkF4aXMudHlwZSA9IEVQQXhpc1R5cGUuZV9lZGdlQjtcbiAgICAgICAgICBwb2x5Z29uQXhpcy5pbmRleCA9IGk7XG4gICAgICAgICAgcG9seWdvbkF4aXMuc2VwYXJhdGlvbiA9IHMyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwb2x5Z29uQXhpcy50eXBlICE9IEVQQXhpc1R5cGUuZV91bmtub3duICYmIHBvbHlnb25BeGlzLnNlcGFyYXRpb24gPiByYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGtfcmVsYXRpdmVUb2wgPSAwLjk4O1xuICAgIHZhciBrX2Fic29sdXRlVG9sID0gMWUtMztcbiAgICB2YXIgcHJpbWFyeUF4aXM7XG4gICAgaWYgKHBvbHlnb25BeGlzLnR5cGUgPT0gRVBBeGlzVHlwZS5lX3Vua25vd24pIHtcbiAgICAgIHByaW1hcnlBeGlzID0gZWRnZUF4aXM7XG4gICAgfSBlbHNlIGlmIChwb2x5Z29uQXhpcy5zZXBhcmF0aW9uID4ga19yZWxhdGl2ZVRvbCAqIGVkZ2VBeGlzLnNlcGFyYXRpb24gKyBrX2Fic29sdXRlVG9sKSB7XG4gICAgICBwcmltYXJ5QXhpcyA9IHBvbHlnb25BeGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmltYXJ5QXhpcyA9IGVkZ2VBeGlzO1xuICAgIH1cbiAgICBpZVswXS5yZWN5Y2xlKCk7XG4gICAgaWVbMV0ucmVjeWNsZSgpO1xuICAgIGlmIChwcmltYXJ5QXhpcy50eXBlID09IEVQQXhpc1R5cGUuZV9lZGdlQSkge1xuICAgICAgbWFuaWZvbGQudHlwZSA9IGV4cG9ydHMyLk1hbmlmb2xkVHlwZS5lX2ZhY2VBO1xuICAgICAgdmFyIGJlc3RJbmRleCA9IDA7XG4gICAgICB2YXIgYmVzdFZhbHVlID0gZG90VmVjMihub3JtYWwsIHBvbHlnb25CQS5ub3JtYWxzWzBdKTtcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcG9seWdvbkJBLmNvdW50OyArK2kpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gZG90VmVjMihub3JtYWwsIHBvbHlnb25CQS5ub3JtYWxzW2ldKTtcbiAgICAgICAgaWYgKHZhbHVlIDwgYmVzdFZhbHVlKSB7XG4gICAgICAgICAgYmVzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgYmVzdEluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGkxID0gYmVzdEluZGV4O1xuICAgICAgdmFyIGkyID0gaTEgKyAxIDwgcG9seWdvbkJBLmNvdW50ID8gaTEgKyAxIDogMDtcbiAgICAgIGNvcHlWZWMyKGllWzBdLnYsIHBvbHlnb25CQS52ZXJ0aWNlc1tpMV0pO1xuICAgICAgaWVbMF0uaWQuc2V0RmVhdHVyZXMoMCwgZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlLmVfZmFjZSwgaTEsIGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX3ZlcnRleCk7XG4gICAgICBjb3B5VmVjMihpZVsxXS52LCBwb2x5Z29uQkEudmVydGljZXNbaTJdKTtcbiAgICAgIGllWzFdLmlkLnNldEZlYXR1cmVzKDAsIGV4cG9ydHMyLkNvbnRhY3RGZWF0dXJlVHlwZS5lX2ZhY2UsIGkyLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgpO1xuICAgICAgaWYgKGZyb250KSB7XG4gICAgICAgIHJmLmkxID0gMDtcbiAgICAgICAgcmYuaTIgPSAxO1xuICAgICAgICBjb3B5VmVjMihyZi52MSwgdjEzKTtcbiAgICAgICAgY29weVZlYzIocmYudjIsIHYyMik7XG4gICAgICAgIGNvcHlWZWMyKHJmLm5vcm1hbCwgbm9ybWFsMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZi5pMSA9IDE7XG4gICAgICAgIHJmLmkyID0gMDtcbiAgICAgICAgY29weVZlYzIocmYudjEsIHYyMik7XG4gICAgICAgIGNvcHlWZWMyKHJmLnYyLCB2MTMpO1xuICAgICAgICBzY2FsZVZlYzIocmYubm9ybWFsLCAtMSwgbm9ybWFsMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hbmlmb2xkLnR5cGUgPSBleHBvcnRzMi5NYW5pZm9sZFR5cGUuZV9mYWNlQjtcbiAgICAgIGNvcHlWZWMyKGllWzBdLnYsIHYxMyk7XG4gICAgICBpZVswXS5pZC5zZXRGZWF0dXJlcygwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgsIHByaW1hcnlBeGlzLmluZGV4LCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV9mYWNlKTtcbiAgICAgIGNvcHlWZWMyKGllWzFdLnYsIHYyMik7XG4gICAgICBpZVsxXS5pZC5zZXRGZWF0dXJlcygwLCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV92ZXJ0ZXgsIHByaW1hcnlBeGlzLmluZGV4LCBleHBvcnRzMi5Db250YWN0RmVhdHVyZVR5cGUuZV9mYWNlKTtcbiAgICAgIHJmLmkxID0gcHJpbWFyeUF4aXMuaW5kZXg7XG4gICAgICByZi5pMiA9IHJmLmkxICsgMSA8IHBvbHlnb25CQS5jb3VudCA/IHJmLmkxICsgMSA6IDA7XG4gICAgICBjb3B5VmVjMihyZi52MSwgcG9seWdvbkJBLnZlcnRpY2VzW3JmLmkxXSk7XG4gICAgICBjb3B5VmVjMihyZi52MiwgcG9seWdvbkJBLnZlcnRpY2VzW3JmLmkyXSk7XG4gICAgICBjb3B5VmVjMihyZi5ub3JtYWwsIHBvbHlnb25CQS5ub3JtYWxzW3JmLmkxXSk7XG4gICAgfVxuICAgIHNldFZlYzIocmYuc2lkZU5vcm1hbDEsIHJmLm5vcm1hbC55LCAtcmYubm9ybWFsLngpO1xuICAgIHNldFZlYzIocmYuc2lkZU5vcm1hbDIsIC1yZi5zaWRlTm9ybWFsMS54LCAtcmYuc2lkZU5vcm1hbDEueSk7XG4gICAgcmYuc2lkZU9mZnNldDEgPSBkb3RWZWMyKHJmLnNpZGVOb3JtYWwxLCByZi52MSk7XG4gICAgcmYuc2lkZU9mZnNldDIgPSBkb3RWZWMyKHJmLnNpZGVOb3JtYWwyLCByZi52Mik7XG4gICAgY2xpcFBvaW50czFbMF0ucmVjeWNsZSgpO1xuICAgIGNsaXBQb2ludHMxWzFdLnJlY3ljbGUoKTtcbiAgICBjbGlwUG9pbnRzMlswXS5yZWN5Y2xlKCk7XG4gICAgY2xpcFBvaW50czJbMV0ucmVjeWNsZSgpO1xuICAgIHZhciBucDEgPSBjbGlwU2VnbWVudFRvTGluZShjbGlwUG9pbnRzMSwgaWUsIHJmLnNpZGVOb3JtYWwxLCByZi5zaWRlT2Zmc2V0MSwgcmYuaTEpO1xuICAgIGlmIChucDEgPCBTZXR0aW5nc0ludGVybmFsLm1heE1hbmlmb2xkUG9pbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBucDIgPSBjbGlwU2VnbWVudFRvTGluZShjbGlwUG9pbnRzMiwgY2xpcFBvaW50czEsIHJmLnNpZGVOb3JtYWwyLCByZi5zaWRlT2Zmc2V0MiwgcmYuaTIpO1xuICAgIGlmIChucDIgPCBTZXR0aW5nc0ludGVybmFsLm1heE1hbmlmb2xkUG9pbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwcmltYXJ5QXhpcy50eXBlID09IEVQQXhpc1R5cGUuZV9lZGdlQSkge1xuICAgICAgY29weVZlYzIobWFuaWZvbGQubG9jYWxOb3JtYWwsIHJmLm5vcm1hbCk7XG4gICAgICBjb3B5VmVjMihtYW5pZm9sZC5sb2NhbFBvaW50LCByZi52MSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLmxvY2FsTm9ybWFsLCBwb2x5Z29uQi5tX25vcm1hbHNbcmYuaTFdKTtcbiAgICAgIGNvcHlWZWMyKG1hbmlmb2xkLmxvY2FsUG9pbnQsIHBvbHlnb25CLm1fdmVydGljZXNbcmYuaTFdKTtcbiAgICB9XG4gICAgdmFyIHBvaW50Q291bnQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU2V0dGluZ3NJbnRlcm5hbC5tYXhNYW5pZm9sZFBvaW50czsgKytpKSB7XG4gICAgICB2YXIgc2VwYXJhdGlvbiA9IGRvdFZlYzIocmYubm9ybWFsLCBjbGlwUG9pbnRzMltpXS52KSAtIGRvdFZlYzIocmYubm9ybWFsLCByZi52MSk7XG4gICAgICBpZiAoc2VwYXJhdGlvbiA8PSByYWRpdXMpIHtcbiAgICAgICAgdmFyIGNwID0gbWFuaWZvbGQucG9pbnRzW3BvaW50Q291bnRdO1xuICAgICAgICBpZiAocHJpbWFyeUF4aXMudHlwZSA9PSBFUEF4aXNUeXBlLmVfZWRnZUEpIHtcbiAgICAgICAgICBkZXRyYW5zZm9ybVZlYzIoY3AubG9jYWxQb2ludCwgeGYsIGNsaXBQb2ludHMyW2ldLnYpO1xuICAgICAgICAgIGNwLmlkLnNldChjbGlwUG9pbnRzMltpXS5pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29weVZlYzIoY3AubG9jYWxQb2ludCwgY2xpcFBvaW50czJbaV0udik7XG4gICAgICAgICAgY3AuaWQuc2V0KGNsaXBQb2ludHMyW2ldLmlkKTtcbiAgICAgICAgICBjcC5pZC5zd2FwRmVhdHVyZXMoKTtcbiAgICAgICAgfVxuICAgICAgICArK3BvaW50Q291bnQ7XG4gICAgICB9XG4gICAgfVxuICAgIG1hbmlmb2xkLnBvaW50Q291bnQgPSBwb2ludENvdW50O1xuICB9O1xuICB2YXIgaW50ZXJuYWwgPSB7XG4gICAgQ29sbGlkZVBvbHlnb25zLFxuICAgIFNldHRpbmdzLFxuICAgIFN3ZWVwLFxuICAgIE1hbmlmb2xkLFxuICAgIERpc3RhbmNlLFxuICAgIFRpbWVPZkltcGFjdCxcbiAgICBEeW5hbWljVHJlZSxcbiAgICBzdGF0c1xuICB9O1xuICB2YXIgRGF0YURyaXZlciA9IChcbiAgICAvKiogQGNsYXNzICovXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBEYXRhRHJpdmVyMihrZXksIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuX3JlZk1hcCA9IHt9O1xuICAgICAgICB0aGlzLl9tYXAgPSB7fTtcbiAgICAgICAgdGhpcy5feG1hcCA9IHt9O1xuICAgICAgICB0aGlzLl9kYXRhID0gW107XG4gICAgICAgIHRoaXMuX2VudGVyZWQgPSBbXTtcbiAgICAgICAgdGhpcy5fZXhpdGVkID0gW107XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICAgIH1cbiAgICAgIERhdGFEcml2ZXIyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSlcbiAgICAgICAgICB0aHJvdyBcIkludmFsaWQgZGF0YTogXCIgKyBkYXRhO1xuICAgICAgICB0aGlzLl9lbnRlcmVkLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2V4aXRlZC5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9kYXRhLmxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbaV0gIT09IFwib2JqZWN0XCIgfHwgZGF0YVtpXSA9PT0gbnVsbClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIHZhciBkMiA9IGRhdGFbaV07XG4gICAgICAgICAgdmFyIGlkID0gdGhpcy5fa2V5KGQyKTtcbiAgICAgICAgICBpZiAoIXRoaXMuX21hcFtpZF0pIHtcbiAgICAgICAgICAgIHRoaXMuX2VudGVyZWQucHVzaChkMik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9tYXBbaWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9kYXRhW2ldID0gZDI7XG4gICAgICAgICAgdGhpcy5feG1hcFtpZF0gPSBkMjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLl9tYXApIHtcbiAgICAgICAgICB0aGlzLl9leGl0ZWQucHVzaCh0aGlzLl9tYXBbaWRdKTtcbiAgICAgICAgICBkZWxldGUgdGhpcy5fbWFwW2lkXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGVtcDMgPSB0aGlzLl9tYXA7XG4gICAgICAgIHRoaXMuX21hcCA9IHRoaXMuX3htYXA7XG4gICAgICAgIHRoaXMuX3htYXAgPSB0ZW1wMztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9leGl0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgZDIgPSB0aGlzLl9leGl0ZWRbaV07XG4gICAgICAgICAgdmFyIGtleSA9IHRoaXMuX2tleShkMik7XG4gICAgICAgICAgdmFyIHJlZiA9IHRoaXMuX3JlZk1hcFtrZXldO1xuICAgICAgICAgIHRoaXMuX2xpc3RlbmVyLmV4aXQoZDIsIHJlZik7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX3JlZk1hcFtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZW50ZXJlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBkMiA9IHRoaXMuX2VudGVyZWRbaV07XG4gICAgICAgICAgdmFyIGtleSA9IHRoaXMuX2tleShkMik7XG4gICAgICAgICAgdmFyIHJlZiA9IHRoaXMuX2xpc3RlbmVyLmVudGVyKGQyKTtcbiAgICAgICAgICBpZiAocmVmKSB7XG4gICAgICAgICAgICB0aGlzLl9yZWZNYXBba2V5XSA9IHJlZjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2ldICE9PSBcIm9iamVjdFwiIHx8IGRhdGFbaV0gPT09IG51bGwpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB2YXIgZDIgPSB0aGlzLl9kYXRhW2ldO1xuICAgICAgICAgIHZhciBrZXkgPSB0aGlzLl9rZXkoZDIpO1xuICAgICAgICAgIHZhciByZWYgPSB0aGlzLl9yZWZNYXBba2V5XTtcbiAgICAgICAgICB0aGlzLl9saXN0ZW5lci51cGRhdGUoZDIsIHJlZik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZW50ZXJlZC5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9leGl0ZWQubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fZGF0YS5sZW5ndGggPSAwO1xuICAgICAgfTtcbiAgICAgIERhdGFEcml2ZXIyLnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbihkMikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmTWFwW3RoaXMuX2tleShkMildO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBEYXRhRHJpdmVyMjtcbiAgICB9KClcbiAgKTtcbiAgY29uc3QgcGxhbmNrID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIEFBQkIsXG4gICAgQm9keSxcbiAgICBCb3g6IEJveFNoYXBlLFxuICAgIEJveFNoYXBlLFxuICAgIEJyb2FkUGhhc2UsXG4gICAgQ2hhaW46IENoYWluU2hhcGUsXG4gICAgQ2hhaW5TaGFwZSxcbiAgICBDaXJjbGU6IENpcmNsZVNoYXBlLFxuICAgIENpcmNsZVNoYXBlLFxuICAgIENsaXBWZXJ0ZXgsXG4gICAgQ29sbGlkZUNpcmNsZXMsXG4gICAgQ29sbGlkZUVkZ2VDaXJjbGUsXG4gICAgQ29sbGlkZUVkZ2VQb2x5Z29uLFxuICAgIENvbGxpZGVQb2x5Z29uQ2lyY2xlLFxuICAgIENvbGxpZGVQb2x5Z29ucyxcbiAgICBDb250YWN0LFxuICAgIENvbnRhY3RFZGdlLFxuICAgIGdldCBDb250YWN0RmVhdHVyZVR5cGUoKSB7XG4gICAgICByZXR1cm4gZXhwb3J0czIuQ29udGFjdEZlYXR1cmVUeXBlO1xuICAgIH0sXG4gICAgQ29udGFjdElELFxuICAgIENvbnRhY3RJbXB1bHNlLFxuICAgIERhdGFEcml2ZXIsXG4gICAgRGlzdGFuY2UsXG4gICAgRGlzdGFuY2VJbnB1dCxcbiAgICBEaXN0YW5jZUpvaW50LFxuICAgIERpc3RhbmNlT3V0cHV0LFxuICAgIERpc3RhbmNlUHJveHksXG4gICAgRHluYW1pY1RyZWUsXG4gICAgRWRnZTogRWRnZVNoYXBlLFxuICAgIEVkZ2VTaGFwZSxcbiAgICBGaXh0dXJlLFxuICAgIEZpeHR1cmVQcm94eSxcbiAgICBGcmljdGlvbkpvaW50LFxuICAgIEdlYXJKb2ludCxcbiAgICBKb2ludCxcbiAgICBKb2ludEVkZ2UsXG4gICAgTWFuaWZvbGQsXG4gICAgTWFuaWZvbGRQb2ludCxcbiAgICBnZXQgTWFuaWZvbGRUeXBlKCkge1xuICAgICAgcmV0dXJuIGV4cG9ydHMyLk1hbmlmb2xkVHlwZTtcbiAgICB9LFxuICAgIE1hdDIyLFxuICAgIE1hdDMzLFxuICAgIE1hdGg6IG1hdGgsXG4gICAgTW90b3JKb2ludCxcbiAgICBNb3VzZUpvaW50LFxuICAgIGdldCBQb2ludFN0YXRlKCkge1xuICAgICAgcmV0dXJuIGV4cG9ydHMyLlBvaW50U3RhdGU7XG4gICAgfSxcbiAgICBQb2x5Z29uOiBQb2x5Z29uU2hhcGUsXG4gICAgUG9seWdvblNoYXBlLFxuICAgIFByaXNtYXRpY0pvaW50LFxuICAgIFB1bGxleUpvaW50LFxuICAgIFJldm9sdXRlSm9pbnQsXG4gICAgUm9wZUpvaW50LFxuICAgIFJvdCxcbiAgICBTZXJpYWxpemVyLFxuICAgIFNldHRpbmdzLFxuICAgIFNldHRpbmdzSW50ZXJuYWwsXG4gICAgU2hhcGUsXG4gICAgU2hhcGVDYXN0LFxuICAgIFNoYXBlQ2FzdElucHV0LFxuICAgIFNoYXBlQ2FzdE91dHB1dCxcbiAgICBTaW1wbGV4Q2FjaGUsXG4gICAgU29sdmVyLFxuICAgIFN3ZWVwLFxuICAgIFRPSUlucHV0LFxuICAgIFRPSU91dHB1dCxcbiAgICBnZXQgVE9JT3V0cHV0U3RhdGUoKSB7XG4gICAgICByZXR1cm4gZXhwb3J0czIuVE9JT3V0cHV0U3RhdGU7XG4gICAgfSxcbiAgICBUZXN0YmVkLFxuICAgIFRpbWVPZkltcGFjdCxcbiAgICBUaW1lU3RlcCxcbiAgICBUcmFuc2Zvcm0sXG4gICAgVHJlZU5vZGUsXG4gICAgVmVjMixcbiAgICBWZWMzLFxuICAgIFZlbG9jaXR5Q29uc3RyYWludFBvaW50LFxuICAgIFdlbGRKb2ludCxcbiAgICBXaGVlbEpvaW50LFxuICAgIFdvcmxkLFxuICAgIFdvcmxkTWFuaWZvbGQsXG4gICAgY2xpcFNlZ21lbnRUb0xpbmUsXG4gICAgZ2V0UG9pbnRTdGF0ZXMsXG4gICAgaW50ZXJuYWwsXG4gICAgbWl4RnJpY3Rpb24sXG4gICAgbWl4UmVzdGl0dXRpb24sXG4gICAgc3RhdHMsXG4gICAgdGVzdE92ZXJsYXAsXG4gICAgdGVzdGJlZFxuICB9LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSkpO1xuICBleHBvcnRzMi5BQUJCID0gQUFCQjtcbiAgZXhwb3J0czIuQm9keSA9IEJvZHk7XG4gIGV4cG9ydHMyLkJveCA9IEJveFNoYXBlO1xuICBleHBvcnRzMi5Cb3hTaGFwZSA9IEJveFNoYXBlO1xuICBleHBvcnRzMi5Ccm9hZFBoYXNlID0gQnJvYWRQaGFzZTtcbiAgZXhwb3J0czIuQ2hhaW4gPSBDaGFpblNoYXBlO1xuICBleHBvcnRzMi5DaGFpblNoYXBlID0gQ2hhaW5TaGFwZTtcbiAgZXhwb3J0czIuQ2lyY2xlID0gQ2lyY2xlU2hhcGU7XG4gIGV4cG9ydHMyLkNpcmNsZVNoYXBlID0gQ2lyY2xlU2hhcGU7XG4gIGV4cG9ydHMyLkNsaXBWZXJ0ZXggPSBDbGlwVmVydGV4O1xuICBleHBvcnRzMi5Db2xsaWRlQ2lyY2xlcyA9IENvbGxpZGVDaXJjbGVzO1xuICBleHBvcnRzMi5Db2xsaWRlRWRnZUNpcmNsZSA9IENvbGxpZGVFZGdlQ2lyY2xlO1xuICBleHBvcnRzMi5Db2xsaWRlRWRnZVBvbHlnb24gPSBDb2xsaWRlRWRnZVBvbHlnb247XG4gIGV4cG9ydHMyLkNvbGxpZGVQb2x5Z29uQ2lyY2xlID0gQ29sbGlkZVBvbHlnb25DaXJjbGU7XG4gIGV4cG9ydHMyLkNvbGxpZGVQb2x5Z29ucyA9IENvbGxpZGVQb2x5Z29ucztcbiAgZXhwb3J0czIuQ29udGFjdCA9IENvbnRhY3Q7XG4gIGV4cG9ydHMyLkNvbnRhY3RFZGdlID0gQ29udGFjdEVkZ2U7XG4gIGV4cG9ydHMyLkNvbnRhY3RJRCA9IENvbnRhY3RJRDtcbiAgZXhwb3J0czIuQ29udGFjdEltcHVsc2UgPSBDb250YWN0SW1wdWxzZTtcbiAgZXhwb3J0czIuRGF0YURyaXZlciA9IERhdGFEcml2ZXI7XG4gIGV4cG9ydHMyLkRpc3RhbmNlID0gRGlzdGFuY2U7XG4gIGV4cG9ydHMyLkRpc3RhbmNlSW5wdXQgPSBEaXN0YW5jZUlucHV0O1xuICBleHBvcnRzMi5EaXN0YW5jZUpvaW50ID0gRGlzdGFuY2VKb2ludDtcbiAgZXhwb3J0czIuRGlzdGFuY2VPdXRwdXQgPSBEaXN0YW5jZU91dHB1dDtcbiAgZXhwb3J0czIuRGlzdGFuY2VQcm94eSA9IERpc3RhbmNlUHJveHk7XG4gIGV4cG9ydHMyLkR5bmFtaWNUcmVlID0gRHluYW1pY1RyZWU7XG4gIGV4cG9ydHMyLkVkZ2UgPSBFZGdlU2hhcGU7XG4gIGV4cG9ydHMyLkVkZ2VTaGFwZSA9IEVkZ2VTaGFwZTtcbiAgZXhwb3J0czIuRml4dHVyZSA9IEZpeHR1cmU7XG4gIGV4cG9ydHMyLkZpeHR1cmVQcm94eSA9IEZpeHR1cmVQcm94eTtcbiAgZXhwb3J0czIuRnJpY3Rpb25Kb2ludCA9IEZyaWN0aW9uSm9pbnQ7XG4gIGV4cG9ydHMyLkdlYXJKb2ludCA9IEdlYXJKb2ludDtcbiAgZXhwb3J0czIuSm9pbnQgPSBKb2ludDtcbiAgZXhwb3J0czIuSm9pbnRFZGdlID0gSm9pbnRFZGdlO1xuICBleHBvcnRzMi5NYW5pZm9sZCA9IE1hbmlmb2xkO1xuICBleHBvcnRzMi5NYW5pZm9sZFBvaW50ID0gTWFuaWZvbGRQb2ludDtcbiAgZXhwb3J0czIuTWF0MjIgPSBNYXQyMjtcbiAgZXhwb3J0czIuTWF0MzMgPSBNYXQzMztcbiAgZXhwb3J0czIuTWF0aCA9IG1hdGg7XG4gIGV4cG9ydHMyLk1vdG9ySm9pbnQgPSBNb3RvckpvaW50O1xuICBleHBvcnRzMi5Nb3VzZUpvaW50ID0gTW91c2VKb2ludDtcbiAgZXhwb3J0czIuUG9seWdvbiA9IFBvbHlnb25TaGFwZTtcbiAgZXhwb3J0czIuUG9seWdvblNoYXBlID0gUG9seWdvblNoYXBlO1xuICBleHBvcnRzMi5QcmlzbWF0aWNKb2ludCA9IFByaXNtYXRpY0pvaW50O1xuICBleHBvcnRzMi5QdWxsZXlKb2ludCA9IFB1bGxleUpvaW50O1xuICBleHBvcnRzMi5SZXZvbHV0ZUpvaW50ID0gUmV2b2x1dGVKb2ludDtcbiAgZXhwb3J0czIuUm9wZUpvaW50ID0gUm9wZUpvaW50O1xuICBleHBvcnRzMi5Sb3QgPSBSb3Q7XG4gIGV4cG9ydHMyLlNlcmlhbGl6ZXIgPSBTZXJpYWxpemVyO1xuICBleHBvcnRzMi5TZXR0aW5ncyA9IFNldHRpbmdzO1xuICBleHBvcnRzMi5TZXR0aW5nc0ludGVybmFsID0gU2V0dGluZ3NJbnRlcm5hbDtcbiAgZXhwb3J0czIuU2hhcGUgPSBTaGFwZTtcbiAgZXhwb3J0czIuU2hhcGVDYXN0ID0gU2hhcGVDYXN0O1xuICBleHBvcnRzMi5TaGFwZUNhc3RJbnB1dCA9IFNoYXBlQ2FzdElucHV0O1xuICBleHBvcnRzMi5TaGFwZUNhc3RPdXRwdXQgPSBTaGFwZUNhc3RPdXRwdXQ7XG4gIGV4cG9ydHMyLlNpbXBsZXhDYWNoZSA9IFNpbXBsZXhDYWNoZTtcbiAgZXhwb3J0czIuU29sdmVyID0gU29sdmVyO1xuICBleHBvcnRzMi5Td2VlcCA9IFN3ZWVwO1xuICBleHBvcnRzMi5UT0lJbnB1dCA9IFRPSUlucHV0O1xuICBleHBvcnRzMi5UT0lPdXRwdXQgPSBUT0lPdXRwdXQ7XG4gIGV4cG9ydHMyLlRlc3RiZWQgPSBUZXN0YmVkO1xuICBleHBvcnRzMi5UaW1lT2ZJbXBhY3QgPSBUaW1lT2ZJbXBhY3Q7XG4gIGV4cG9ydHMyLlRpbWVTdGVwID0gVGltZVN0ZXA7XG4gIGV4cG9ydHMyLlRyYW5zZm9ybSA9IFRyYW5zZm9ybTtcbiAgZXhwb3J0czIuVHJlZU5vZGUgPSBUcmVlTm9kZTtcbiAgZXhwb3J0czIuVmVjMiA9IFZlYzI7XG4gIGV4cG9ydHMyLlZlYzMgPSBWZWMzO1xuICBleHBvcnRzMi5WZWxvY2l0eUNvbnN0cmFpbnRQb2ludCA9IFZlbG9jaXR5Q29uc3RyYWludFBvaW50O1xuICBleHBvcnRzMi5XZWxkSm9pbnQgPSBXZWxkSm9pbnQ7XG4gIGV4cG9ydHMyLldoZWVsSm9pbnQgPSBXaGVlbEpvaW50O1xuICBleHBvcnRzMi5Xb3JsZCA9IFdvcmxkO1xuICBleHBvcnRzMi5Xb3JsZE1hbmlmb2xkID0gV29ybGRNYW5pZm9sZDtcbiAgZXhwb3J0czIuY2xpcFNlZ21lbnRUb0xpbmUgPSBjbGlwU2VnbWVudFRvTGluZTtcbiAgZXhwb3J0czIuZGVmYXVsdCA9IHBsYW5jaztcbiAgZXhwb3J0czIuZ2V0UG9pbnRTdGF0ZXMgPSBnZXRQb2ludFN0YXRlcztcbiAgZXhwb3J0czIuaW50ZXJuYWwgPSBpbnRlcm5hbDtcbiAgZXhwb3J0czIubWl4RnJpY3Rpb24gPSBtaXhGcmljdGlvbjtcbiAgZXhwb3J0czIubWl4UmVzdGl0dXRpb24gPSBtaXhSZXN0aXR1dGlvbjtcbiAgZXhwb3J0czIuc3RhdHMgPSBzdGF0cztcbiAgZXhwb3J0czIudGVzdE92ZXJsYXAgPSB0ZXN0T3ZlcmxhcDtcbiAgZXhwb3J0czIudGVzdGJlZCA9IHRlc3RiZWQ7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGV4cG9ydHMyLCB7IF9fZXNNb2R1bGU6IHsgdmFsdWU6IHRydWUgfSwgW1N5bWJvbC50b1N0cmluZ1RhZ106IHsgdmFsdWU6IFwiTW9kdWxlXCIgfSB9KTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGxhbmNrLmpzLm1hcFxuIiwiaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi9saWJyYXJ5L3V0aWxzJztcbmltcG9ydCB7IFJlbmRlck1hbmFnZXIgfSBmcm9tICcuL21haW4vcmVuZGVyLW1hbmFnZXInO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tICcuL21haW4vc2NlbmUnO1xuaW1wb3J0IHsgRW5naW5lIH0gZnJvbSAnLi9tYWluL2VuZ2luZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICcuL21haW4vZXZlbnQtc3lzdGVtJztcbmltcG9ydCB7IENsaWVudEV2ZW50cyB9IGZyb20gJy4vbGlicmFyeS9jbGllbnQtZXZlbnRzJztcbmltcG9ydCB7IEFzc2V0TG9hZGVyIH0gZnJvbSAnLi9tYWluL2Fzc2V0LWxvYWRlcic7XG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0IHsgTG9naWMgfSBmcm9tICcuL21haW4vbG9naWMnO1xuaW1wb3J0IHsgZGVmYXVsdFJlbmRlck9wdGlvbnMsIHNldHVwTW94aSB9IGZyb20gJy4vbGlicmFyeS9zZXR1cCc7XG5pbXBvcnQgeyBsb2FkRm9udHMgfSBmcm9tICcuL2xpYnJhcnkvZm9udC1sb2FkZXInO1xuaW1wb3J0IHsgYXNFbnRpdHksIE1veGlFbnRpdHkgfSBmcm9tICcuL21haW4vbW94aS1lbnRpdHknO1xuaW1wb3J0IHsgQ2FtZXJhLCBDYW1lcmFMb2dpYyB9IGZyb20gJy4vbWFpbi9jYW1lcmEnO1xuaW1wb3J0IHsgYXNUZXh0dXJlRnJhbWVzIH0gZnJvbSAnLi9saWJyYXJ5L3RleHR1cmUtZnJhbWVzJztcbmltcG9ydCB7IGFzQml0bWFwVGV4dCwgYXNTcHJpdGUsIGFzVGV4dCwgYXNHcmFwaGljcywgYXNDb250YWluZXIsIFBpeGlQcm9wcyB9IGZyb20gJy4vbGlicmFyeS9hcy1waXhpJztcbmltcG9ydCB7IFRleHR1cmVGcmFtZVNlcXVlbmNlcywgU2VxdWVuY2VJbmZvIH0gZnJvbSAnLi9saWJyYXJ5L3RleHR1cmUtZnJhbWUtc2VxdWVuY2VzJztcbmltcG9ydCB7IGNyZWF0ZVJlc2l6ZUhhbmRsZXIsIHNldHVwUmVzcG9uc2l2ZUNhbnZhcywgUmVzaXplSGFuZGxlck9wdGlvbnMgfSBmcm9tICcuL2xpYnJhcnkvcmVzaXplLWhhbmRsZXInO1xuaW1wb3J0IHsgRWRnZUluc2V0cyB9IGZyb20gJy4vdWkvY29yZS9lZGdlLWluc2V0cyc7XG5pbXBvcnQgeyBVSUNvbXBvbmVudCB9IGZyb20gJy4vdWkvY29yZS91aS1jb21wb25lbnQnO1xuaW1wb3J0IHsgVUlGb2N1c01hbmFnZXIgfSBmcm9tICcuL3VpL2NvcmUvdWktZm9jdXMtbWFuYWdlcic7XG5pbXBvcnQgeyBGbGV4Q29udGFpbmVyLCBGbGV4RGlyZWN0aW9uLCBGbGV4SnVzdGlmeSwgRmxleEFsaWduIH0gZnJvbSAnLi91aS9sYXlvdXQvZmxleC1jb250YWluZXInO1xuaW1wb3J0IHsgVUlCb3ggfSBmcm9tICcuL3VpL2NvbXBvbmVudHMvdWktYm94JztcbmltcG9ydCB7IFVJTGFiZWwgfSBmcm9tICcuL3VpL2NvbXBvbmVudHMvdWktbGFiZWwnO1xuaW1wb3J0IHsgVUlQYW5lbCB9IGZyb20gJy4vdWkvY29tcG9uZW50cy91aS1wYW5lbCc7XG5pbXBvcnQgeyBVSUJ1dHRvbiwgQnV0dG9uU3RhdGUgfSBmcm9tICcuL3VpL2NvbXBvbmVudHMvdWktYnV0dG9uJztcbmltcG9ydCB7IFVJU2VsZWN0LCBTZWxlY3RPcHRpb24gfSBmcm9tICcuL3VpL2NvbXBvbmVudHMvdWktc2VsZWN0JztcbmltcG9ydCB7IFVJVGV4dElucHV0IH0gZnJvbSAnLi91aS9jb21wb25lbnRzL3VpLXRleHQtaW5wdXQnO1xuaW1wb3J0IHsgVUlUZXh0QXJlYSB9IGZyb20gJy4vdWkvY29tcG9uZW50cy91aS10ZXh0YXJlYSc7XG5pbXBvcnQgeyBVSVNjcm9sbENvbnRhaW5lciB9IGZyb20gJy4vdWkvY29tcG9uZW50cy91aS1zY3JvbGwtY29udGFpbmVyJztcbmltcG9ydCB7IFVJVGFicywgVGFiSXRlbSB9IGZyb20gJy4vdWkvY29tcG9uZW50cy91aS10YWJzJztcbmltcG9ydCB7IFVJTGF5ZXIgfSBmcm9tICcuL3VpL1VJTGF5ZXInO1xuaW1wb3J0IHsgVUlTY2FsZU1vZGUgfSBmcm9tICcuL3VpL1VJU2NhbGVNb2RlJztcbmltcG9ydCB7IFN0YXRlTWFjaGluZSB9IGZyb20gJy4vbGlicmFyeS9zdGF0ZS1tYWNoaW5lJztcbmltcG9ydCB7IFN0YXRlTG9naWMgfSBmcm9tICcuL2xpYnJhcnkvc3RhdGUtbG9naWMnO1xuaW1wb3J0IHsgY3JlYXRlVGlsZUdyaWQsIGdldFRleHR1cmVSYW5nZSB9IGZyb20gJy4vbGlicmFyeS9ncmlkLWdlbmVyYXRvcic7XG5pbXBvcnQgeyBzdmdUb1RleHR1cmUgfSBmcm9tICcuL2xpYnJhcnkvc3ZnLXV0aWxzL3N2Zy10by10ZXh0dXJlJztcbmltcG9ydCB7IFBpeGVsR3JpZCwgcHgsIHVuaXRzLCBHUklELCBCT1JERVIsIGNyZWF0ZUJvcmRlckNvbmZpZyB9IGZyb20gJy4vdWkvcGl4ZWwtZ3JpZCc7XG5pbXBvcnQgeyBQYXJhbGxheEJhY2tncm91bmQsIFBhcmFsbGF4QmFja2dyb3VuZExvZ2ljIH0gZnJvbSAnLi9saWJyYXJ5L3BhcmFsbGF4LWJhY2tncm91bmQnO1xuaW1wb3J0IHsgUGFyYWxsYXhMYXllciwgVGlsaW5nUGFyYWxsYXhMYXllciB9IGZyb20gJy4vbGlicmFyeS9wYXJhbGxheC1sYXllcic7XG5pbXBvcnQgeyBMb2FkaW5nU2NlbmUsIEZhbGxpbmdTcXVhcmVzQW5pbWF0aW9uIH0gZnJvbSAnLi9saWJyYXJ5L2xvYWRpbmctc2NlbmUnO1xuaW1wb3J0IHsgQWN0aW9uTWFuYWdlciwgT25BY3Rpb24gfSBmcm9tICcuL2xpYnJhcnkvYWN0aW9uLW1hbmFnZXInO1xuaW1wb3J0IHtcbiAgUGh5c2ljc1dvcmxkLFxuICBQaHlzaWNzQm9keUxvZ2ljLFxuICBQaHlzaWNzRGVidWdSZW5kZXJlcixcbiAgQ29sbGlzaW9uUmVnaXN0cnksXG4gIENvbGxpc2lvbk1hbmFnZXIsXG4gIGFzUGh5c2ljc0VudGl0eSxcbiAgaGFzUGh5c2ljcyxcbiAgZ2V0UGh5c2ljc0JvZHksXG4gIGNyZWF0ZVNoYXBlRnJvbVNwcml0ZSxcbiAgUGh5c2ljc01hdGVyaWFscyxcbiAgYXBwbHlNYXRlcmlhbFxufSBmcm9tICcuL2xpYnJhcnkvcGh5c2ljcyc7XG5cbmV4cG9ydCB0eXBlIHsgU3RhdGVDaGFuZ2VFdmVudCB9IGZyb20gJy4vbGlicmFyeS9zdGF0ZS1tYWNoaW5lJztcbmV4cG9ydCB0eXBlIHsgQXNFbnRpdHksIE1veGlMb2dpYyB9IGZyb20gJy4vbWFpbi9tb3hpLWVudGl0eSc7XG5leHBvcnQgdHlwZSB7IEFzVGV4dHVyZUZyYW1lc09wdGlvbnMgfSBmcm9tICcuL2xpYnJhcnkvdGV4dHVyZS1mcmFtZXMnO1xuZXhwb3J0IHR5cGUgeyBHcmlkT3B0aW9ucywgQ2VsbFBvc2l0aW9uIH0gZnJvbSAnLi9saWJyYXJ5L2dyaWQtZ2VuZXJhdG9yJztcbmV4cG9ydCB0eXBlIHsgUGFyYWxsYXhCYWNrZ3JvdW5kT3B0aW9ucyB9IGZyb20gJy4vbGlicmFyeS9wYXJhbGxheC1iYWNrZ3JvdW5kJztcbmV4cG9ydCB0eXBlIHsgUGFyYWxsYXhMYXllck9wdGlvbnMsIFRpbGluZ1BhcmFsbGF4TGF5ZXJPcHRpb25zIH0gZnJvbSAnLi9saWJyYXJ5L3BhcmFsbGF4LWxheWVyJztcbmV4cG9ydCB0eXBlIHsgTG9hZGluZ1NjZW5lT3B0aW9ucywgTG9hZGluZ0FuaW1hdGlvbiwgTG9hZGluZ0FuaW1hdGlvbkNvbnRleHQsIEZhbGxpbmdTcXVhcmVzT3B0aW9ucyB9IGZyb20gJy4vbGlicmFyeS9sb2FkaW5nLXNjZW5lJztcbmV4cG9ydCB0eXBlIHsgT25BY3Rpb24gfSBmcm9tICcuL2xpYnJhcnkvYWN0aW9uLW1hbmFnZXInO1xuZXhwb3J0IHR5cGUge1xuICBCb2R5VHlwZSxcbiAgU3luY01vZGUsXG4gIFNoYXBlVHlwZSxcbiAgQ29sbGlzaW9uVGFnLFxuICBTaGFwZUNvbmZpZyxcbiAgUGh5c2ljc1dvcmxkT3B0aW9ucyxcbiAgUGh5c2ljc0JvZHlPcHRpb25zLFxuICBQaHlzaWNzRGVidWdPcHRpb25zLFxuICBDb2xsaXNpb25FdmVudCxcbiAgUmF5Y2FzdENhbGxiYWNrXG59IGZyb20gJy4vbGlicmFyeS9waHlzaWNzJztcbmV4cG9ydCB0eXBlIHsgQm94TW9kZWwsIENvbXB1dGVkTGF5b3V0LCBNZWFzdXJlZFNpemUsIFNpemVDb25zdHJhaW50IH0gZnJvbSAnLi91aS9jb3JlL2JveC1tb2RlbCc7XG5leHBvcnQgdHlwZSB7IEZsZXhDb250YWluZXJQcm9wcyB9IGZyb20gJy4vdWkvbGF5b3V0L2ZsZXgtY29udGFpbmVyJztcbmV4cG9ydCB0eXBlIHsgVUlCb3hQcm9wcyB9IGZyb20gJy4vdWkvY29tcG9uZW50cy91aS1ib3gnO1xuZXhwb3J0IHR5cGUgeyBVSUxhYmVsUHJvcHMsIFRleHRBbGlnbiB9IGZyb20gJy4vdWkvY29tcG9uZW50cy91aS1sYWJlbCc7XG5leHBvcnQgdHlwZSB7IFVJUGFuZWxQcm9wcywgTmluZVNsaWNlQ29uZmlnIH0gZnJvbSAnLi91aS9jb21wb25lbnRzL3VpLXBhbmVsJztcbmV4cG9ydCB0eXBlIHsgVUlCdXR0b25Qcm9wcywgU3ByaXRlQmFja2dyb3VuZENvbmZpZyB9IGZyb20gJy4vdWkvY29tcG9uZW50cy91aS1idXR0b24nO1xuZXhwb3J0IHR5cGUgeyBVSVNlbGVjdFByb3BzLCBTZWxlY3RPcHRpb24gfSBmcm9tICcuL3VpL2NvbXBvbmVudHMvdWktc2VsZWN0JztcbmV4cG9ydCB0eXBlIHsgVUlUZXh0SW5wdXRQcm9wcyB9IGZyb20gJy4vdWkvY29tcG9uZW50cy91aS10ZXh0LWlucHV0JztcbmV4cG9ydCB0eXBlIHsgVUlUYWJzUHJvcHMsIFRhYkl0ZW0gfSBmcm9tICcuL3VpL2NvbXBvbmVudHMvdWktdGFicyc7XG5leHBvcnQgdHlwZSB7IFVJTGF5ZXJPcHRpb25zIH0gZnJvbSAnLi91aS9VSUxheWVyJztcbmV4cG9ydCB0eXBlIHsgUGl4ZWxHcmlkQ29uZmlnLCBCb3JkZXJDb25maWcgfSBmcm9tICcuL3VpL3BpeGVsLWdyaWQnO1xuZXhwb3J0IHR5cGUgeyBTVkdUb1RleHR1cmVPcHRpb25zIH0gZnJvbSAnLi9saWJyYXJ5L3N2Zy11dGlscy9zdmctdG8tdGV4dHVyZSc7XG5cbmV4cG9ydCB0eXBlIEFzc2V0ID0geyBzcmM6IHN0cmluZywgYWxpYXM/OiBzdHJpbmcgfTtcblxuZXhwb3J0IGludGVyZmFjZSBPbkV2ZW50IHtcbiAgZXZlbnQ6IEV2ZW50O1xuICBldmVudFR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbGllbnRFdmVudHNBcmdzIHtcbiAgaW5pdFdoZWVsT2Zmc2V0PzogUG9pbnQ7XG4gIG9uQW55RXZlbnQ/OiAoZXY6IE9uRXZlbnQpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIENsaWVudEV2ZW50c1R5cGUgPSB7XG4gIGtleURvd25FdmVudD86IEtleWJvYXJkRXZlbnQ7XG4gIGtleVVwRXZlbnQ/OiBLZXlib2FyZEV2ZW50O1xuICBrZXlkb3duPzogUmVjb3JkPHN0cmluZywgS2V5Ym9hcmRFdmVudD47XG4gIG1vdXNlRG93bkV2ZW50PzogTW91c2VFdmVudDtcbiAgbW91c2VVcEV2ZW50PzogTW91c2VFdmVudDtcbiAgbGFzdE1vdXNlRG93bj86IE1vdXNlRXZlbnQ7XG4gIGxhc3RNb3VzZVVwPzogTW91c2VFdmVudDtcbiAgd2hlZWxFdmVudD86IFdoZWVsRXZlbnQ7XG4gIHdoZWVsRGVsdGE/OiB7IHlWYWx1ZTogMCB8IG51bWJlciwgeFZhbHVlOiAwIHwgbnVtYmVyLCB4TGFzdDogbnVtYmVyLCB5TGFzdDogbnVtYmVyIH1cbn1cblxuLy8gUmUtZXhwb3J0IHR5cGVzXG5leHBvcnQgeyBcbiAgU2VxdWVuY2VJbmZvLCBcbiAgUmVzaXplSGFuZGxlck9wdGlvbnNcbn07XG5cbmNvbnN0IGV4cG9ydGVkT2JqZWN0cyA9IHtcbiAgQXNzZXRMb2FkZXIsXG4gIGFzRW50aXR5LFxuICBhc1RleHR1cmVGcmFtZXMsXG4gIGFzQml0bWFwVGV4dCxcbiAgYXNTcHJpdGUsXG4gIGFzVGV4dCxcbiAgYXNHcmFwaGljcyxcbiAgYXNDb250YWluZXIsXG4gIExvZ2ljLFxuICBDYW1lcmEsXG4gIENhbWVyYUxvZ2ljLFxuICBDbGllbnRFdmVudHMsXG4gIGNyZWF0ZVJlc2l6ZUhhbmRsZXIsXG4gIGNyZWF0ZVRpbGVHcmlkLFxuICBkZWZhdWx0UmVuZGVyT3B0aW9ucyxcbiAgRW5naW5lLFxuICBFdmVudEVtaXR0ZXIsXG4gIGdldFRleHR1cmVSYW5nZSxcbiAgbG9hZEZvbnRzLFxuICBNb3hpRW50aXR5LFxuICBQYXJhbGxheEJhY2tncm91bmQsXG4gIFBhcmFsbGF4QmFja2dyb3VuZExvZ2ljLFxuICBQYXJhbGxheExheWVyLFxuICBMb2FkaW5nU2NlbmUsXG4gIEZhbGxpbmdTcXVhcmVzQW5pbWF0aW9uLFxuICBzZXR1cE1veGksXG4gIFJlbmRlck1hbmFnZXIsXG4gIFNjZW5lLFxuICBzZXR1cFJlc3BvbnNpdmVDYW52YXMsXG4gIFRleHR1cmVGcmFtZVNlcXVlbmNlcyxcbiAgVGlsaW5nUGFyYWxsYXhMYXllcixcbiAgdXRpbHMsXG4gIFN0YXRlTWFjaGluZSxcbiAgU3RhdGVMb2dpYyxcbiAgUGh5c2ljc1dvcmxkLFxuICBQaHlzaWNzQm9keUxvZ2ljLFxuICBQaHlzaWNzRGVidWdSZW5kZXJlcixcbiAgQ29sbGlzaW9uUmVnaXN0cnksXG4gIENvbGxpc2lvbk1hbmFnZXIsXG4gIGFzUGh5c2ljc0VudGl0eSxcbiAgaGFzUGh5c2ljcyxcbiAgZ2V0UGh5c2ljc0JvZHksXG4gIGNyZWF0ZVNoYXBlRnJvbVNwcml0ZSxcbiAgUGh5c2ljc01hdGVyaWFscyxcbiAgYXBwbHlNYXRlcmlhbCxcbiAgRWRnZUluc2V0cyxcbiAgVUlDb21wb25lbnQsXG4gIFVJRm9jdXNNYW5hZ2VyLFxuICBGbGV4Q29udGFpbmVyLFxuICBGbGV4RGlyZWN0aW9uLFxuICBGbGV4SnVzdGlmeSxcbiAgRmxleEFsaWduLFxuICBVSUJveCxcbiAgVUlMYWJlbCxcbiAgVUlQYW5lbCxcbiAgVUlCdXR0b24sXG4gIEJ1dHRvblN0YXRlLFxuICBVSVNlbGVjdCxcbiAgVUlUZXh0SW5wdXQsXG4gIFVJVGV4dEFyZWEsXG4gIFVJU2Nyb2xsQ29udGFpbmVyLFxuICBVSVRhYnMsXG4gIFVJTGF5ZXIsXG4gIFVJU2NhbGVNb2RlLFxuICBzdmdUb1RleHR1cmUsXG4gIFBpeGVsR3JpZCxcbiAgcHgsXG4gIHVuaXRzLFxuICBHUklELFxuICBCT1JERVIsXG4gIGNyZWF0ZUJvcmRlckNvbmZpZyxcbiAgQWN0aW9uTWFuYWdlclxufTtcblxuZXhwb3J0IGRlZmF1bHQgZXhwb3J0ZWRPYmplY3RzO1xuXG5leHBvcnQge1xuICBBc3NldExvYWRlcixcbiAgYXNFbnRpdHksXG4gIGFzVGV4dHVyZUZyYW1lcyxcbiAgYXNCaXRtYXBUZXh0LFxuICBhc1Nwcml0ZSxcbiAgYXNUZXh0LFxuICBhc0dyYXBoaWNzLFxuICBhc0NvbnRhaW5lcixcbiAgUGl4aVByb3BzLFxuICBMb2dpYyxcbiAgQ2FtZXJhLFxuICBDYW1lcmFMb2dpYyxcbiAgQ2xpZW50RXZlbnRzLFxuICBjcmVhdGVSZXNpemVIYW5kbGVyLFxuICBjcmVhdGVUaWxlR3JpZCxcbiAgZGVmYXVsdFJlbmRlck9wdGlvbnMsXG4gIEVuZ2luZSxcbiAgRXZlbnRFbWl0dGVyLFxuICBnZXRUZXh0dXJlUmFuZ2UsXG4gIGxvYWRGb250cyxcbiAgTW94aUVudGl0eSxcbiAgUGFyYWxsYXhCYWNrZ3JvdW5kLFxuICBQYXJhbGxheEJhY2tncm91bmRMb2dpYyxcbiAgUGFyYWxsYXhMYXllcixcbiAgTG9hZGluZ1NjZW5lLFxuICBGYWxsaW5nU3F1YXJlc0FuaW1hdGlvbixcbiAgc2V0dXBNb3hpLFxuICBSZW5kZXJNYW5hZ2VyLFxuICBTY2VuZSxcbiAgc2V0dXBSZXNwb25zaXZlQ2FudmFzLFxuICBUZXh0dXJlRnJhbWVTZXF1ZW5jZXMsXG4gIFRpbGluZ1BhcmFsbGF4TGF5ZXIsXG4gIHV0aWxzLFxuICBTdGF0ZU1hY2hpbmUsXG4gIFN0YXRlTG9naWMsXG4gIFBoeXNpY3NXb3JsZCxcbiAgUGh5c2ljc0JvZHlMb2dpYyxcbiAgUGh5c2ljc0RlYnVnUmVuZGVyZXIsXG4gIENvbGxpc2lvblJlZ2lzdHJ5LFxuICBDb2xsaXNpb25NYW5hZ2VyLFxuICBhc1BoeXNpY3NFbnRpdHksXG4gIGhhc1BoeXNpY3MsXG4gIGdldFBoeXNpY3NCb2R5LFxuICBjcmVhdGVTaGFwZUZyb21TcHJpdGUsXG4gIFBoeXNpY3NNYXRlcmlhbHMsXG4gIGFwcGx5TWF0ZXJpYWwsXG4gIEVkZ2VJbnNldHMsXG4gIFVJQ29tcG9uZW50LFxuICBVSUZvY3VzTWFuYWdlcixcbiAgRmxleENvbnRhaW5lcixcbiAgRmxleERpcmVjdGlvbixcbiAgRmxleEp1c3RpZnksXG4gIEZsZXhBbGlnbixcbiAgVUlCb3gsXG4gIFVJTGFiZWwsXG4gIFVJUGFuZWwsXG4gIFVJQnV0dG9uLFxuICBCdXR0b25TdGF0ZSxcbiAgVUlTZWxlY3QsXG4gIFVJVGV4dElucHV0LFxuICBVSVRleHRBcmVhLFxuICBVSVNjcm9sbENvbnRhaW5lcixcbiAgVUlUYWJzLFxuICBVSUxheWVyLFxuICBVSVNjYWxlTW9kZSxcbiAgc3ZnVG9UZXh0dXJlLFxuICBQaXhlbEdyaWQsXG4gIHB4LFxuICB1bml0cyxcbiAgR1JJRCxcbiAgQk9SREVSLFxuICBjcmVhdGVCb3JkZXJDb25maWcsXG4gIEFjdGlvbk1hbmFnZXJcbn07XG5cbiIsIi8qKlxuICogQWN0aW9uTWFuYWdlciAtIENlbnRyYWxpemVkIGV2ZW50IGxpc3RlbmVyIG1hbmFnZW1lbnQgdXRpbGl0eVxuICpcbiAqIFByZXZlbnRzIG1lbW9yeSBsZWFrcyBieSB0cmFja2luZyBhbGwgcmVnaXN0ZXJlZCBldmVudCBsaXN0ZW5lcnMgYW5kIHByb3ZpZGluZ1xuICogYmF0Y2ggY2xlYW51cCBmdW5jdGlvbmFsaXR5LiBQYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBMb2dpYyBjb21wb25lbnRzIHRoYXQgbmVlZCB0b1xuICogcmVnaXN0ZXIgbXVsdGlwbGUgd2luZG93L2RvY3VtZW50IGxpc3RlbmVycyBhbmQgY2xlYW4gdGhlbSB1cCBvbiBkZXN0cm95LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY2xhc3MgRHJhZ0xvZ2ljIGV4dGVuZHMgTG9naWM8Q29udGFpbmVyPiB7XG4gKiAgIHByaXZhdGUgYWN0aW9ucyA9IG5ldyBBY3Rpb25NYW5hZ2VyKCk7XG4gKlxuICogICBpbml0KGVudGl0eTogQ29udGFpbmVyKSB7XG4gKiAgICAgdGhpcy5hY3Rpb25zLmFkZCh3aW5kb3csICdwb2ludGVybW92ZScsIHRoaXMub25Nb3ZlLmJpbmQodGhpcykpO1xuICogICAgIHRoaXMuYWN0aW9ucy5hZGQod2luZG93LCAncG9pbnRlcnVwJywgdGhpcy5vblVwLmJpbmQodGhpcykpO1xuICogICB9XG4gKlxuICogICBkZXN0cm95KCkge1xuICogICAgIHRoaXMuYWN0aW9ucy5yZW1vdmVBbGwoKTtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBPbkFjdGlvbiB7XG4gIHRhcmdldDogRXZlbnRUYXJnZXQ7XG4gIHR5cGU6IHN0cmluZztcbiAgaGFuZGxlcjogRXZlbnRMaXN0ZW5lcjtcbiAgb3B0aW9ucz86IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zO1xufVxuXG4vKipcbiAqIE1hbmFnZXMgZXZlbnQgbGlzdGVuZXIgbGlmZWN5Y2xlIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXG4gKi9cbmV4cG9ydCBjbGFzcyBBY3Rpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBhY3Rpb25zOiBTZXQ8T25BY3Rpb24+ID0gbmV3IFNldCgpO1xuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgYW5kIHRyYWNrIGl0IGZvciBsYXRlciBjbGVhbnVwXG4gICAqXG4gICAqIEBwYXJhbSB0YXJnZXQgRXZlbnQgdGFyZ2V0ICh3aW5kb3csIGRvY3VtZW50LCBlbGVtZW50LCBldGMuKVxuICAgKiBAcGFyYW0gdHlwZSBFdmVudCB0eXBlICgnY2xpY2snLCAnd2hlZWwnLCAnbW91c2Vtb3ZlJywgZXRjLilcbiAgICogQHBhcmFtIGhhbmRsZXIgRXZlbnQgaGFuZGxlciBmdW5jdGlvblxuICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbCBldmVudCBsaXN0ZW5lciBvcHRpb25zXG4gICAqIEByZXR1cm5zIEFjdGlvbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZW1vdmUgdGhpcyBzcGVjaWZpYyBsaXN0ZW5lclxuICAgKi9cbiAgYWRkKFxuICAgIHRhcmdldDogRXZlbnRUYXJnZXQsXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIGhhbmRsZXI6IEV2ZW50TGlzdGVuZXIsXG4gICAgb3B0aW9ucz86IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zXG4gICk6IE9uQWN0aW9uIHtcbiAgICBjb25zdCBhY3Rpb246IE9uQWN0aW9uID0geyB0YXJnZXQsIHR5cGUsIGhhbmRsZXIsIG9wdGlvbnMgfTtcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICB0aGlzLmFjdGlvbnMuYWRkKGFjdGlvbik7XG4gICAgcmV0dXJuIGFjdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBzcGVjaWZpYyBldmVudCBsaXN0ZW5lclxuICAgKlxuICAgKiBAcGFyYW0gYWN0aW9uIFRoZSBhY3Rpb24gb2JqZWN0IHJldHVybmVkIGZyb20gYWRkKClcbiAgICovXG4gIHJlbW92ZShhY3Rpb246IE9uQWN0aW9uKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWN0aW9ucy5oYXMoYWN0aW9uKSkge1xuICAgICAgYWN0aW9uLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICBhY3Rpb24udHlwZSxcbiAgICAgICAgYWN0aW9uLmhhbmRsZXIsXG4gICAgICAgIGFjdGlvbi5vcHRpb25zXG4gICAgICApO1xuICAgICAgdGhpcy5hY3Rpb25zLmRlbGV0ZShhY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGV2ZW50IGxpc3RlbmVycyBtYW5hZ2VkIGJ5IHRoaXMgQWN0aW9uTWFuYWdlclxuICAgKlxuICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBkZXN0cm95ZWQgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICovXG4gIHJlbW92ZUFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4ge1xuICAgICAgYWN0aW9uLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGFjdGlvbi50eXBlLCBhY3Rpb24uaGFuZGxlciwgYWN0aW9uLm9wdGlvbnMpO1xuICAgIH0pO1xuICAgIHRoaXMuYWN0aW9ucy5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY291bnQgb2YgYWN0aXZlIGFjdGlvbnNcbiAgICpcbiAgICogVXNlZnVsIGZvciBkZWJ1Z2dpbmcgYW5kIHRlc3RpbmdcbiAgICovXG4gIGdldENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aW9ucy5zaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgc3BlY2lmaWMgYWN0aW9uIGlzIGN1cnJlbnRseSBhY3RpdmVcbiAgICpcbiAgICogQHBhcmFtIGFjdGlvbiBUaGUgYWN0aW9uIHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGFjdGlvbiBpcyBhY3RpdmVcbiAgICovXG4gIGhhc0FjdGlvbihhY3Rpb246IE9uQWN0aW9uKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aW9ucy5oYXMoYWN0aW9uKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBJWEkgZnJvbSAncGl4aS5qcyc7XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgY3JlYXRpbmcgYSBCaXRtYXBUZXh0IGluc3RhbmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQml0bWFwVGV4dE9wdGlvbnMge1xuICB0ZXh0Pzogc3RyaW5nIHwgbnVtYmVyIHwgeyB0b1N0cmluZzogKCkgPT4gc3RyaW5nIH07XG4gIHN0eWxlPzoge1xuICAgIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gICAgZm9udFNpemU/OiBudW1iZXI7XG4gICAgZm9udFN0eWxlPzogc3RyaW5nO1xuICAgIGZpbGw/OiBudW1iZXIgfCBzdHJpbmc7XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xuICB9O1xuICBwaXhlbFBlcmZlY3Q/OiBib29sZWFuOyAvLyBFbmFibGUgcGl4ZWwtcGVyZmVjdCByZW5kZXJpbmcgKHJvdW5kUGl4ZWxzKVxuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgY3JlYXRpbmcgYSBTcHJpdGUgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTcHJpdGVPcHRpb25zIHtcbiAgdGV4dHVyZT86IFBJWEkuVGV4dHVyZSB8IFBJWEkuVGV4dHVyZVNvdXJjZTtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG4vKipcbiAqIE9wdGlvbnMgZm9yIGNyZWF0aW5nIGEgVGV4dCBpbnN0YW5jZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRleHRPcHRpb25zIHtcbiAgdGV4dD86IHN0cmluZyB8IG51bWJlciB8IHsgdG9TdHJpbmc6ICgpID0+IHN0cmluZyB9O1xuICBzdHlsZT86IHtcbiAgICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAgIGZvbnRTaXplPzogbnVtYmVyO1xuICAgIGZvbnRTdHlsZT86IHN0cmluZztcbiAgICBmaWxsPzogbnVtYmVyIHwgc3RyaW5nO1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgfTtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG4vKipcbiAqIENvbW1vbiBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG8gUElYSSBkaXNwbGF5IG9iamVjdHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaXhpUHJvcHMge1xuICB4PzogbnVtYmVyO1xuICB5PzogbnVtYmVyO1xuICBhbmNob3I/OiB7IHg/OiBudW1iZXI7IHk/OiBudW1iZXIgfSB8IG51bWJlcjtcbiAgc2NhbGU/OiB7IHg/OiBudW1iZXI7IHk/OiBudW1iZXIgfSB8IG51bWJlcjtcbiAgcm90YXRpb24/OiBudW1iZXI7XG4gIHRpbnQ/OiBudW1iZXI7XG4gIGFscGhhPzogbnVtYmVyO1xuICB2aXNpYmxlPzogYm9vbGVhbjtcbiAgZXZlbnRNb2RlPzogJ25vbmUnIHwgJ3Bhc3NpdmUnIHwgJ2F1dG8nIHwgJ3N0YXRpYycgfCAnZHluYW1pYyc7XG4gIHBpdm90PzogeyB4PzogbnVtYmVyOyB5PzogbnVtYmVyIH0gfCBudW1iZXI7XG59XG5cbi8qKlxuICogQXBwbGllcyBjb21tb24gcHJvcGVydGllcyB0byBhIFBJWEkgZGlzcGxheSBvYmplY3RcbiAqL1xuZnVuY3Rpb24gYXBwbHlQcm9wczxUIGV4dGVuZHMgUElYSS5Db250YWluZXI+KG9iajogVCwgcHJvcHM/OiBQaXhpUHJvcHMpOiBUIHtcbiAgaWYgKCFwcm9wcykgcmV0dXJuIG9iajtcblxuICBpZiAocHJvcHMueCAhPT0gdW5kZWZpbmVkKSBvYmoueCA9IHByb3BzLng7XG4gIGlmIChwcm9wcy55ICE9PSB1bmRlZmluZWQpIG9iai55ID0gcHJvcHMueTtcbiAgXG4gIGlmIChwcm9wcy5hbmNob3IgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2YgcHJvcHMuYW5jaG9yID09PSAnbnVtYmVyJykge1xuICAgICAgaWYgKCdhbmNob3InIGluIG9iaiAmJiB0eXBlb2Ygb2JqLmFuY2hvciA9PT0gJ29iamVjdCcgJiYgb2JqLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgICAob2JqLmFuY2hvciBhcyBQSVhJLk9ic2VydmFibGVQb2ludCkuc2V0KHByb3BzLmFuY2hvcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgnYW5jaG9yJyBpbiBvYmogJiYgdHlwZW9mIG9iai5hbmNob3IgPT09ICdvYmplY3QnICYmIG9iai5hbmNob3IgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgYW5jaG9yID0gb2JqLmFuY2hvciBhcyBQSVhJLk9ic2VydmFibGVQb2ludDtcbiAgICAgICAgaWYgKHByb3BzLmFuY2hvci54ICE9PSB1bmRlZmluZWQpIGFuY2hvci54ID0gcHJvcHMuYW5jaG9yLng7XG4gICAgICAgIGlmIChwcm9wcy5hbmNob3IueSAhPT0gdW5kZWZpbmVkKSBhbmNob3IueSA9IHByb3BzLmFuY2hvci55O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChwcm9wcy5zY2FsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9wcy5zY2FsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGlmICgnc2NhbGUnIGluIG9iaiAmJiB0eXBlb2Ygb2JqLnNjYWxlID09PSAnb2JqZWN0JyAmJiBvYmouc2NhbGUgIT09IG51bGwpIHtcbiAgICAgICAgKG9iai5zY2FsZSBhcyBQSVhJLk9ic2VydmFibGVQb2ludCkuc2V0KHByb3BzLnNjYWxlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCdzY2FsZScgaW4gb2JqICYmIHR5cGVvZiBvYmouc2NhbGUgPT09ICdvYmplY3QnICYmIG9iai5zY2FsZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBzY2FsZSA9IG9iai5zY2FsZSBhcyBQSVhJLk9ic2VydmFibGVQb2ludDtcbiAgICAgICAgaWYgKHByb3BzLnNjYWxlLnggIT09IHVuZGVmaW5lZCkgc2NhbGUueCA9IHByb3BzLnNjYWxlLng7XG4gICAgICAgIGlmIChwcm9wcy5zY2FsZS55ICE9PSB1bmRlZmluZWQpIHNjYWxlLnkgPSBwcm9wcy5zY2FsZS55O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChwcm9wcy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSBvYmoucm90YXRpb24gPSBwcm9wcy5yb3RhdGlvbjtcbiAgaWYgKHByb3BzLnRpbnQgIT09IHVuZGVmaW5lZCAmJiAndGludCcgaW4gb2JqKSAob2JqIGFzIGFueSkudGludCA9IHByb3BzLnRpbnQ7XG4gIGlmIChwcm9wcy5hbHBoYSAhPT0gdW5kZWZpbmVkKSBvYmouYWxwaGEgPSBwcm9wcy5hbHBoYTtcbiAgaWYgKHByb3BzLnZpc2libGUgIT09IHVuZGVmaW5lZCkgb2JqLnZpc2libGUgPSBwcm9wcy52aXNpYmxlO1xuICBpZiAocHJvcHMuZXZlbnRNb2RlICE9PSB1bmRlZmluZWQgJiYgJ2V2ZW50TW9kZScgaW4gb2JqKSBvYmouZXZlbnRNb2RlID0gcHJvcHMuZXZlbnRNb2RlO1xuXG4gIGlmIChwcm9wcy5waXZvdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9wcy5waXZvdCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGlmICgncGl2b3QnIGluIG9iaiAmJiB0eXBlb2Ygb2JqLnBpdm90ID09PSAnb2JqZWN0JyAmJiBvYmoucGl2b3QgIT09IG51bGwpIHtcbiAgICAgICAgKG9iai5waXZvdCBhcyBQSVhJLk9ic2VydmFibGVQb2ludCkuc2V0KHByb3BzLnBpdm90KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCdwaXZvdCcgaW4gb2JqICYmIHR5cGVvZiBvYmoucGl2b3QgPT09ICdvYmplY3QnICYmIG9iai5waXZvdCAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBwaXZvdCA9IG9iai5waXZvdCBhcyBQSVhJLk9ic2VydmFibGVQb2ludDtcbiAgICAgICAgaWYgKHByb3BzLnBpdm90LnggIT09IHVuZGVmaW5lZCkgcGl2b3QueCA9IHByb3BzLnBpdm90Lng7XG4gICAgICAgIGlmIChwcm9wcy5waXZvdC55ICE9PSB1bmRlZmluZWQpIHBpdm90LnkgPSBwcm9wcy5waXZvdC55O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIEJpdG1hcFRleHQgaW5zdGFuY2Ugd2l0aCBjb25zdHJ1Y3RvciBhcmdzIGFuZCBvcHRpb25hbCBwcm9wZXJ0aWVzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGxhYmVsID0gYXNCaXRtYXBUZXh0KFxuICogICB7IHRleHQ6ICdIZWxsbycsIHN0eWxlOiB7IGZvbnRGYW1pbHk6ICdBcmlhbCcsIGZvbnRTaXplOiAyNCB9LCBwaXhlbFBlcmZlY3Q6IHRydWUgfSxcbiAqICAgeyB4OiAxMDAsIHk6IDUwLCBhbmNob3I6IDAuNSB9XG4gKiApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc0JpdG1hcFRleHQoXG4gIGNvbnN0cnVjdG9yQXJnczogQml0bWFwVGV4dE9wdGlvbnMsXG4gIHByb3BzPzogUGl4aVByb3BzXG4pOiBQSVhJLkJpdG1hcFRleHQge1xuICBjb25zdCB7IHBpeGVsUGVyZmVjdCwgLi4udGV4dEFyZ3MgfSA9IGNvbnN0cnVjdG9yQXJncztcbiAgY29uc3QgdGV4dCA9IG5ldyBQSVhJLkJpdG1hcFRleHQodGV4dEFyZ3MgYXMgYW55KTtcblxuICAvLyBBcHBseSBwaXhlbC1wZXJmZWN0IHJlbmRlcmluZyBpZiByZXF1ZXN0ZWRcbiAgaWYgKHBpeGVsUGVyZmVjdCkge1xuICAgIHRleHQucm91bmRQaXhlbHMgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGFwcGx5UHJvcHModGV4dCwgcHJvcHMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBTcHJpdGUgaW5zdGFuY2Ugd2l0aCBjb25zdHJ1Y3RvciBhcmdzIGFuZCBvcHRpb25hbCBwcm9wZXJ0aWVzXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBzcHJpdGUgPSBhc1Nwcml0ZShcbiAqICAgeyB0ZXh0dXJlIH0sXG4gKiAgIHsgeDogMTAwLCB5OiAxMDAsIGFuY2hvcjogMC41IH1cbiAqICk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzU3ByaXRlKFxuICBjb25zdHJ1Y3RvckFyZ3M6IFNwcml0ZU9wdGlvbnMsXG4gIHByb3BzPzogUGl4aVByb3BzXG4pOiBQSVhJLlNwcml0ZSB7XG4gIGNvbnN0IHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZShjb25zdHJ1Y3RvckFyZ3MgYXMgYW55KTtcbiAgcmV0dXJuIGFwcGx5UHJvcHMoc3ByaXRlLCBwcm9wcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIFRleHQgaW5zdGFuY2Ugd2l0aCBjb25zdHJ1Y3RvciBhcmdzIGFuZCBvcHRpb25hbCBwcm9wZXJ0aWVzXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCB0ZXh0ID0gYXNUZXh0KFxuICogICB7IHRleHQ6ICdIZWxsbycsIHN0eWxlOiB7IGZvbnRGYW1pbHk6ICdBcmlhbCcsIGZvbnRTaXplOiAyNCB9IH0sXG4gKiAgIHsgeDogMTAwLCB5OiA1MCB9XG4gKiApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc1RleHQoXG4gIGNvbnN0cnVjdG9yQXJnczogVGV4dE9wdGlvbnMsXG4gIHByb3BzPzogUGl4aVByb3BzXG4pOiBQSVhJLlRleHQge1xuICBjb25zdCB0ZXh0ID0gbmV3IFBJWEkuVGV4dChjb25zdHJ1Y3RvckFyZ3MgYXMgYW55KTtcbiAgcmV0dXJuIGFwcGx5UHJvcHModGV4dCwgcHJvcHMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBHcmFwaGljcyBpbnN0YW5jZSB3aXRoIG9wdGlvbmFsIHByb3BlcnRpZXNcbiAqIFxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGdyYXBoaWNzID0gYXNHcmFwaGljcyh7IHg6IDEwMCwgeTogMTAwIH0pO1xuICogZ3JhcGhpY3MucmVjdCgwLCAwLCA1MCwgNTApLmZpbGwoMHhmZjAwMDApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc0dyYXBoaWNzKHByb3BzPzogUGl4aVByb3BzKTogUElYSS5HcmFwaGljcyB7XG4gIGNvbnN0IGdyYXBoaWNzID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcbiAgcmV0dXJuIGFwcGx5UHJvcHMoZ3JhcGhpY3MsIHByb3BzKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgQ29udGFpbmVyIGluc3RhbmNlIHdpdGggb3B0aW9uYWwgcHJvcGVydGllc1xuICogXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgY29udGFpbmVyID0gYXNDb250YWluZXIoeyB4OiAxMDAsIHk6IDEwMCB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNDb250YWluZXIocHJvcHM/OiBQaXhpUHJvcHMpOiBQSVhJLkNvbnRhaW5lciB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xuICByZXR1cm4gYXBwbHlQcm9wcyhjb250YWluZXIsIHByb3BzKTtcbn1cblxuIiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IE9uRXZlbnQsIENsaWVudEV2ZW50c0FyZ3MgfSBmcm9tICcuLic7XG5cbi8qKlxuICogU2luZ2xldG9uIGlucHV0IG1hbmFnZXIgZm9yIGtleWJvYXJkLCBtb3VzZSwgYW5kIHdoZWVsIGV2ZW50cy5cbiAqIFRyYWNrcyBjdXJyZW50IGlucHV0IHN0YXRlIGZvciBwb2xsaW5nLWJhc2VkIGlucHV0IGhhbmRsaW5nLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgaW5wdXQgPSBDbGllbnRFdmVudHMuZ2V0SW5zdGFuY2UoKTtcbiAqXG4gKiAvLyBJbiB1cGRhdGUgbG9vcCAtIGNoZWNrIGtleSBzdGF0ZVxuICogaWYgKGlucHV0LmlzS2V5RG93bignQXJyb3dSaWdodCcpKSBwbGF5ZXIubW92ZVJpZ2h0KCk7XG4gKiBpZiAoaW5wdXQuaXNLZXlEb3duKCdTcGFjZScpKSBwbGF5ZXIuanVtcCgpO1xuICpcbiAqIC8vIE1vdXNlIHBvc2l0aW9uIGFuZCBtb3ZlbWVudFxuICogY29uc3QgbW91c2VQb3MgPSBpbnB1dC5tb3ZlUG9zaXRpb247XG4gKiBjb25zdCBkZWx0YSA9IGlucHV0Lm1vdmVEZWx0YTtcbiAqXG4gKiAvLyBXaGVlbCBzY3JvbGxpbmdcbiAqIGNvbnN0IHNjcm9sbCA9IGlucHV0LndoZWVsT2Zmc2V0cztcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ2xpZW50RXZlbnRzIHtcbiAgLyoqIEN1cnJlbnQgd2hlZWwgc2Nyb2xsIGRlbHRhLiAqL1xuICB3aGVlbERlbHRhOiB7IHlWYWx1ZTogbnVtYmVyOyB4VmFsdWU6IG51bWJlcjsgfTtcbiAgLyoqIE1vc3QgcmVjZW50IG1vdXNldXAgZXZlbnQuICovXG4gIG1vdXNlVXBFdmVudDogTW91c2VFdmVudDtcbiAgLyoqIE1vc3QgcmVjZW50IG1vdXNlZG93biBldmVudC4gKi9cbiAgbW91c2VEb3duRXZlbnQ6IE1vdXNlRXZlbnQ7XG4gIC8qKiBMYXN0IG1vdXNlZG93biBldmVudC4gKi9cbiAgbGFzdE1vdXNlRG93bjogTW91c2VFdmVudDtcbiAgLyoqIExhc3QgbW91c2V1cCBldmVudC4gKi9cbiAgbGFzdE1vdXNlVXA6IE1vdXNlRXZlbnQ7XG4gIC8qKiBNb3N0IHJlY2VudCBrZXlkb3duIGV2ZW50LiAqL1xuICBrZXlEb3duRXZlbnQ6IEtleWJvYXJkRXZlbnQ7XG4gIC8qKiBNb3N0IHJlY2VudCBrZXl1cCBldmVudC4gKi9cbiAga2V5VXBFdmVudDogS2V5Ym9hcmRFdmVudDtcbiAgLyoqIEBpbnRlcm5hbCBDdXJyZW50bHkgcHJlc3NlZCBrZXlzLiAqL1xuICBrZXlkb3duOiBSZWNvcmQ8c3RyaW5nLCBLZXlib2FyZEV2ZW50PjtcbiAgLyoqIEFjY3VtdWxhdGVkIHdoZWVsIG9mZnNldHMuICovXG4gIHdoZWVsT2Zmc2V0czogUG9pbnQ7XG4gIC8qKiBDdXJyZW50IG1vdXNlIHBvc2l0aW9uLiAqL1xuICBtb3ZlUG9zaXRpb246IFBvaW50O1xuICAvKiogUHJldmlvdXMgbW91c2UgcG9zaXRpb24uICovXG4gIGxhc3RNb3ZlUG9zaXRpb246IFBvaW50O1xuICAvKiogTW91c2UgbW92ZW1lbnQgZGVsdGEuICovXG4gIG1vdmVEZWx0YTogUG9pbnQ7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQ2xpZW50RXZlbnRzIHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqIEdldCBzaW5nbGV0b24gaW5zdGFuY2UuICovXG4gIHN0YXRpYyBnZXRJbnN0YW5jZShvcHRpb25zOiBDbGllbnRFdmVudHNBcmdzID0ge30pOiBDbGllbnRFdmVudHMge1xuICAgIGlmICghQ2xpZW50RXZlbnRzLmluc3RhbmNlKSB7XG4gICAgICBDbGllbnRFdmVudHMuaW5zdGFuY2UgPSBuZXcgQ2xpZW50RXZlbnRzKG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gQ2xpZW50RXZlbnRzLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCBVc2UgZ2V0SW5zdGFuY2UoKSBpbnN0ZWFkLiAqL1xuICBjb25zdHJ1Y3Rvcih7IGluaXRXaGVlbE9mZnNldCA9IG5ldyBQb2ludCgpLCBvbkFueUV2ZW50ID0gKGV2OiBPbkV2ZW50KSA9PiB7fSB9OiBDbGllbnRFdmVudHNBcmdzID0ge30pIHtcbiAgICAvLyBSZXR1cm4gZXhpc3RpbmcgaW5zdGFuY2UgaWYgb25lIGV4aXN0cyAoc2luZ2xldG9uIHBhdHRlcm4pXG4gICAgaWYgKENsaWVudEV2ZW50cy5pbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIENsaWVudEV2ZW50cy5pbnN0YW5jZTtcbiAgICB9XG4gICAgdGhpcy53aGVlbE9mZnNldHMgPSBpbml0V2hlZWxPZmZzZXQ7XG4gICAgdGhpcy5rZXlkb3duID0ge30gYXMgUmVjb3JkPHN0cmluZywgS2V5Ym9hcmRFdmVudD47XG4gICAgdGhpcy5tb3ZlUG9zaXRpb24gPSBuZXcgUG9pbnQoKTtcblxuICAgIGNvbnN0IGFueUV2ZW50ID0gKGV2OiBPbkV2ZW50KSA9PiB7XG4gICAgICBvbkFueUV2ZW50KGV2KTtcbiAgICB9O1xuXG4gICAgLy8gUmVnaXN0ZXIgd2hlZWwgZXZlbnQgbGlzdGVuZXJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIChldmVudCkgPT4ge1xuICAgICAgY29uc3Qgd2hlZWxEZWx0YSA9IHRoaXMud2hlZWxPZmZzZXRzIHx8IG5ldyBQb2ludCgpO1xuICAgICAgY29uc3QgeFZhbHVlID0gd2hlZWxEZWx0YS54ICsgZXZlbnQuZGVsdGFYO1xuICAgICAgY29uc3QgeVZhbHVlID0gd2hlZWxEZWx0YS55ICsgZXZlbnQuZGVsdGFZO1xuICAgICAgdGhpcy53aGVlbE9mZnNldHMgPSBuZXcgUG9pbnQoeFZhbHVlLCB5VmFsdWUpO1xuICAgICAgYW55RXZlbnQoeyBldmVudFR5cGU6ICd3aGVlbCcsIGV2ZW50IH0pO1xuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0ZXIgbW91c2UgbW92ZSBldmVudCBsaXN0ZW5lclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5sYXN0TW92ZVBvc2l0aW9uID0gdGhpcy5tb3ZlUG9zaXRpb247XG4gICAgICB0aGlzLm1vdmVQb3NpdGlvbiA9IG5ldyBQb2ludChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICAgIHRoaXMubW92ZURlbHRhID0gbmV3IFBvaW50KFxuICAgICAgICB0aGlzLm1vdmVQb3NpdGlvbi54IC0gdGhpcy5sYXN0TW92ZVBvc2l0aW9uLngsXG4gICAgICAgIHRoaXMubW92ZVBvc2l0aW9uLnkgLSB0aGlzLmxhc3RNb3ZlUG9zaXRpb24ueVxuICAgICAgKTtcbiAgICAgIGFueUV2ZW50KHsgZXZlbnRUeXBlOiAnbW91c2Vtb3ZlJywgZXZlbnQgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciBtb3VzZSBkb3duIGV2ZW50IGxpc3RlbmVyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLm1vdXNlRG93bkV2ZW50ID0gZXZlbnQ7XG4gICAgICB0aGlzLmxhc3RNb3VzZURvd24gPSBldmVudDtcbiAgICAgIHRoaXMubW91c2VVcEV2ZW50ID0gbnVsbDtcbiAgICAgIGFueUV2ZW50KHsgZXZlbnRUeXBlOiAnbW91c2Vkb3duJywgZXZlbnQgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciBtb3VzZSB1cCBldmVudCBsaXN0ZW5lclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMubW91c2VVcEV2ZW50ID0gZXZlbnQ7XG4gICAgICB0aGlzLmxhc3RNb3VzZVVwID0gZXZlbnQ7XG4gICAgICB0aGlzLm1vdXNlRG93bkV2ZW50ID0gbnVsbDtcbiAgICAgIGFueUV2ZW50KHsgZXZlbnRUeXBlOiAnbW91c2V1cCcsIGV2ZW50IH0pO1xuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0ZXIga2V5IGRvd24gZXZlbnQgbGlzdGVuZXJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XG4gICAgICB0aGlzLmtleURvd25FdmVudCA9IGV2ZW50O1xuICAgICAgdGhpcy5rZXlVcEV2ZW50ID0gbnVsbDtcbiAgICAgIHRoaXMua2V5ZG93bltrZXldID0gZXZlbnQ7XG4gICAgICBhbnlFdmVudCh7IGV2ZW50VHlwZTogJ2tleWRvd24nLCBldmVudCB9KTtcbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdGVyIGtleSB1cCBldmVudCBsaXN0ZW5lclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XG4gICAgICB0aGlzLmtleVVwRXZlbnQgPSBldmVudDtcbiAgICAgIHRoaXMua2V5RG93bkV2ZW50ID0gbnVsbDtcbiAgICAgIGRlbGV0ZSB0aGlzLmtleWRvd25ba2V5XTtcbiAgICAgIGFueUV2ZW50KHsgZXZlbnRUeXBlOiAna2V5dXAnLCBldmVudCB9KTtcbiAgICB9KTtcblxuICAgIENsaWVudEV2ZW50cy5pbnN0YW5jZSA9IHRoaXM7XG4gIH1cblxuICAvKiogVHJ1ZSBpZiBrZXkgaXMgY3VycmVudGx5IHByZXNzZWQuICovXG4gIGlzS2V5RG93bihrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMua2V5ZG93bltrZXldKTtcbiAgfVxuXG4gIC8qKiBUcnVlIGlmIGtleSBpcyBub3QgcHJlc3NlZC4gKi9cbiAgaXNLZXlVcChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5rZXlkb3duW2tleV07XG4gIH1cbn1cblxuXG5cbiIsImltcG9ydCB7IENvbnRhaW5lciwgR3JhcGhpY3MsIFRleHQgfSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB0eXBlIHsgTG9hZGluZ0FuaW1hdGlvbiwgTG9hZGluZ0FuaW1hdGlvbkNvbnRleHQgfSBmcm9tICcuL2xvYWRpbmctc2NlbmUnO1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIHRoZSBkZWZhdWx0IGZhbGxpbmcgc3F1YXJlcyBhbmltYXRpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmFsbGluZ1NxdWFyZXNPcHRpb25zIHtcbiAgLyoqIFNpemUgb2Ygc3F1YXJlcyBpbiBwaXhlbHMgKGRlZmF1bHQ6IDIwKSAqL1xuICBzcXVhcmVTaXplPzogbnVtYmVyO1xuICAvKiogTWF4aW11bSBudW1iZXIgb2YgcGFydGljbGVzIChkZWZhdWx0OiAzMCkgKi9cbiAgbWF4UGFydGljbGVzPzogbnVtYmVyO1xuICAvKiogQ29sb3IgcGFsZXR0ZSAtIGFycmF5IG9mIGhleCBjb2xvcnMgKGRlZmF1bHQ6IHBhc3RlbCBwaXhlbCBhcnQgcGFsZXR0ZSkgKi9cbiAgcGFsZXR0ZT86IG51bWJlcltdO1xuICAvKiogU3Bhd24gcmF0ZSAtIGxvd2VyIGlzIGZhc3RlciAoZGVmYXVsdDogMC41KSAqL1xuICBzcGF3bkludGVydmFsPzogbnVtYmVyO1xufVxuXG4vKiogRGVmYXVsdCBwYXN0ZWwgcGl4ZWwgYXJ0IGNvbG9yIHBhbGV0dGUgKi9cbmNvbnN0IERFRkFVTFRfUEFMRVRURSA9IFsweGYwZGFiMSwgMHhlMzlhYWMsIDB4YzQ1ZDlmLCAweDYzNGI3ZCwgMHg2NDYxYzIsIDB4MmJhOWI0LCAweDkzZDRiNSwgMHhmMGY2ZThdO1xuXG5pbnRlcmZhY2UgUGFydGljbGUge1xuICBzcHJpdGU6IEdyYXBoaWNzO1xuICBzcGF3blRpbWU6IG51bWJlcjtcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgc3BpblJhdGU6IG51bWJlcjtcbiAgc3RhcnRYOiBudW1iZXI7XG4gIHN0YXJ0WTogbnVtYmVyO1xuICBlbmRZOiBudW1iZXI7XG59XG5cbi8qKlxuICogRGVmYXVsdCBsb2FkaW5nIGFuaW1hdGlvbiAtIGNvbG9yZnVsIHNxdWFyZXMgZmFsbGluZyBhYm92ZSB0aGUgbG9hZGluZyB0ZXh0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogLy8gVXNlIHdpdGggY3VzdG9tIG9wdGlvbnNcbiAqIGNvbnN0IGFuaW1hdGlvbiA9IG5ldyBGYWxsaW5nU3F1YXJlc0FuaW1hdGlvbih7XG4gKiAgIHNxdWFyZVNpemU6IDE2LFxuICogICBtYXhQYXJ0aWNsZXM6IDUwLFxuICogICBwYWxldHRlOiBbMHhmZjAwMDAsIDB4MDBmZjAwLCAweDAwMDBmZl1cbiAqIH0pO1xuICpcbiAqIGNvbnN0IHsgbG9hZGluZ1NjZW5lIH0gPSBhd2FpdCBzZXR1cE1veGkoe1xuICogICBzaG93TG9hZGluZ1NjZW5lOiB0cnVlLFxuICogICBsb2FkaW5nU2NlbmVPcHRpb25zOiB7IGFuaW1hdGlvbiB9XG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgRmFsbGluZ1NxdWFyZXNBbmltYXRpb24gaW1wbGVtZW50cyBMb2FkaW5nQW5pbWF0aW9uIHtcbiAgcHJpdmF0ZSBwYXJ0aWNsZXM6IFBhcnRpY2xlW10gPSBbXTtcbiAgcHJpdmF0ZSBjb250YWluZXI6IENvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG5leHRTcGF3bjogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSB0aW1lOiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgc3F1YXJlU2l6ZTogbnVtYmVyO1xuICBwcml2YXRlIG1heFBhcnRpY2xlczogbnVtYmVyO1xuICBwcml2YXRlIHBhbGV0dGU6IG51bWJlcltdO1xuICBwcml2YXRlIHNwYXduSW50ZXJ2YWw6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBGYWxsaW5nU3F1YXJlc09wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuc3F1YXJlU2l6ZSA9IG9wdGlvbnMuc3F1YXJlU2l6ZSA/PyAyMDtcbiAgICB0aGlzLm1heFBhcnRpY2xlcyA9IG9wdGlvbnMubWF4UGFydGljbGVzID8/IDMwO1xuICAgIHRoaXMucGFsZXR0ZSA9IG9wdGlvbnMucGFsZXR0ZSA/PyBERUZBVUxUX1BBTEVUVEU7XG4gICAgdGhpcy5zcGF3bkludGVydmFsID0gb3B0aW9ucy5zcGF3bkludGVydmFsID8/IDAuNTtcbiAgfVxuXG4gIGluaXQoY29udGFpbmVyOiBDb250YWluZXIpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgfVxuXG4gIHVwZGF0ZShjb250ZXh0OiBMb2FkaW5nQW5pbWF0aW9uQ29udGV4dCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcblxuICAgIHRoaXMudGltZSA9IGNvbnRleHQudGltZTtcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIHRleHRFbGVtZW50IH0gPSBjb250ZXh0O1xuXG4gICAgLy8gU3Bhd24gbmV3IHBhcnRpY2xlc1xuICAgIHRoaXMuc3Bhd25QYXJ0aWNsZSh3aWR0aCwgaGVpZ2h0LCB0ZXh0RWxlbWVudCk7XG5cbiAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcGFydGljbGVzXG4gICAgdGhpcy5wYXJ0aWNsZXMgPSB0aGlzLnBhcnRpY2xlcy5maWx0ZXIocCA9PiB7XG4gICAgICBjb25zdCBlbGFwc2VkID0gdGhpcy50aW1lIC0gcC5zcGF3blRpbWU7XG4gICAgICBjb25zdCBwcm9ncmVzcyA9IGVsYXBzZWQgLyBwLmR1cmF0aW9uO1xuXG4gICAgICBpZiAocHJvZ3Jlc3MgPCAwIHx8IHByb2dyZXNzID4gMSkge1xuICAgICAgICBwLnNwcml0ZS5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcC5zcHJpdGUueCA9IHAuc3RhcnRYO1xuICAgICAgcC5zcHJpdGUueSA9IHAuc3RhcnRZICsgKHAuZW5kWSAtIHAuc3RhcnRZKSAqIHByb2dyZXNzO1xuICAgICAgcC5zcHJpdGUucm90YXRpb24gPSB0aGlzLnRpbWUgKiBwLnNwaW5SYXRlICogTWF0aC5QSSAqIDI7XG4gICAgICBwLnNwcml0ZS5hbHBoYSA9IHByb2dyZXNzIDwgMC4xID8gcHJvZ3Jlc3MgLyAwLjEgOiBwcm9ncmVzcyA+IDAuODUgPyAoMSAtIHByb2dyZXNzKSAvIDAuMTUgOiAxO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNwYXduUGFydGljbGUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHRleHRFbGVtZW50OiBUZXh0KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuICAgIGlmICh0aGlzLnBhcnRpY2xlcy5sZW5ndGggPj0gdGhpcy5tYXhQYXJ0aWNsZXMgfHwgdGhpcy50aW1lIDwgdGhpcy5uZXh0U3Bhd24pIHJldHVybjtcblxuICAgIGNvbnN0IHNpemUgPSB0aGlzLnNxdWFyZVNpemUgKiAoMC43ICsgTWF0aC5yYW5kb20oKSAqIDAuNik7XG4gICAgY29uc3Qgc3ByaXRlID0gbmV3IEdyYXBoaWNzKCk7XG4gICAgc3ByaXRlLnJlY3QoMCwgMCwgc2l6ZSwgc2l6ZSk7XG4gICAgc3ByaXRlLmZpbGwoeyBjb2xvcjogdGhpcy5wYWxldHRlW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMucGFsZXR0ZS5sZW5ndGgpXSB9KTtcbiAgICBzcHJpdGUucGl2b3Quc2V0KHNpemUgLyAyLCBzaXplIC8gMik7XG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcblxuICAgIGNvbnN0IHRleHRZID0gdGV4dEVsZW1lbnQueTtcbiAgICBjb25zdCB0ZXh0V2lkdGggPSB0ZXh0RWxlbWVudC53aWR0aCB8fCAyMDA7XG4gICAgY29uc3QgdGV4dENlbnRlclggPSB3aWR0aCAvIDI7XG5cbiAgICB0aGlzLnBhcnRpY2xlcy5wdXNoKHtcbiAgICAgIHNwcml0ZSxcbiAgICAgIHNwYXduVGltZTogdGhpcy50aW1lLFxuICAgICAgZHVyYXRpb246IDEgKyBNYXRoLnJhbmRvbSgpICogMi41LFxuICAgICAgc3BpblJhdGU6ICgwLjA1ICsgTWF0aC5yYW5kb20oKSAqIDEuMDc1KSAqIChNYXRoLnJhbmRvbSgpIDwgMC41ID8gMSA6IC0xKSxcbiAgICAgIHN0YXJ0WDogdGV4dENlbnRlclggLSB0ZXh0V2lkdGggLyAyICsgTWF0aC5yYW5kb20oKSAqIHRleHRXaWR0aCAtIDQsXG4gICAgICBzdGFydFk6IHRleHRZIC0gMTAwLFxuICAgICAgZW5kWTogdGV4dFkgLSA0MCxcbiAgICB9KTtcblxuICAgIHRoaXMubmV4dFNwYXduID0gdGhpcy50aW1lICsgTWF0aC5yYW5kb20oKSAqIHRoaXMuc3Bhd25JbnRlcnZhbDtcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMudGltZSA9IDA7XG4gICAgdGhpcy5uZXh0U3Bhd24gPSAwO1xuICAgIHRoaXMucGFydGljbGVzLmZvckVhY2gocCA9PiBwLnNwcml0ZS5kZXN0cm95KCkpO1xuICAgIHRoaXMucGFydGljbGVzID0gW107XG4gIH1cblxuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMucGFydGljbGVzLmZvckVhY2gocCA9PiBwLnNwcml0ZS5kZXN0cm95KCkpO1xuICAgIHRoaXMucGFydGljbGVzID0gW107XG4gICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICB9XG59XG4iLCJpbXBvcnQgRm9udEZhY2VPYnNlcnZlciBmcm9tICdmb250ZmFjZW9ic2VydmVyJztcbmltcG9ydCB7IEJpdG1hcEZvbnQgfSBmcm9tICdwaXhpLmpzJztcblxuZXhwb3J0IGNvbnN0IGxvYWRGb250cyA9IGFzeW5jICgpID0+IHtcbiAgLy8gbm90ZSB0aGF0IHRoaXMgcmVmZXJlbmNlcyB0aGUgZm9udC1mYWNlIHNwZWNpZmllZCBpbiB0aGUgSFRNTCBzdHlsZSBzZWN0aW9uXG4gIC8vIDxzdHlsZT5cbiAgLy8gQGZvbnQtZmFjZSB7XG4gIC8vICAgZm9udC1mYW1pbHk6ICdrZW5mdXR1cmUtdGhpbic7XG4gIC8vICAgc3JjOiB1cmwoJy4vYXNzZXRzL2ZvbnRzL2tlbnZlY3Rvcl9mdXR1cmVfdGhpbi50dGYnKTtcbiAgLy8gfVxuICAvLyA8L3N0eWxlPlxuXG4gIC8vIHVzaW5nIGZvbnRmYWNlb2JzZXJ2ZXIgYWxsb3dzIHVzIGVuc3VyZSB0aGUgZm9udCBpcyBsb2FkZWQgYmVmb3JlIHVzaW5nIGNvbmZpZ3VyYXRpb24gZm9yIGJpdG1hcCBmb250cy5cbiAgY29uc3QgZm9udEtlbmZ1dHVyZVRoaW4gPSBuZXcgRm9udEZhY2VPYnNlcnZlcigna2VuZnV0dXJlLXRoaW4nKTtcblxuICAvLyBQSVhJLkJpdG1hcEZvbnQuaW5zdGFsbCB3aWxsIGNyZWF0ZSBhIGJpdG1hcCBmb250IGZyb20gYSBmb250LWZhY2UgYW5kIFRleHRTdHlsZSBjb25maWd1cmF0aW9uXG4gIC8vIFVzaW5nIGEgQml0bWFwZm9udCBhbGxvd3MgZm9yIGJldHRlciBwZXJmb3JtYW5jZSB3aGVuIHJhcGlkbHkgY2hhbmdpbmcgcmVuZGVyZWQgdGV4dC5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgZm9udEtlbmZ1dHVyZVRoaW4ubG9hZCgpLnRoZW4oKCkgPT4ge1xuICAgICAgQml0bWFwRm9udC5pbnN0YWxsKHtcbiAgICAgICAgbmFtZTogJ2tlbmZ1dHVyZS10aGluJyxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBmb250RmFtaWx5OiAna2VuZnV0dXJlLXRoaW4nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmVzb2x2ZSh7IGZvbnRLZW5mdXR1cmVUaGluIH0pO1xuICAgIH0pO1xuICB9KTtcbn07IiwiaW1wb3J0IFBJWEkgZnJvbSAncGl4aS5qcyc7XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBncmlkIGdlbmVyYXRpb25cbiAqIEBjYXRlZ29yeSBMaWJyYXJ5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR3JpZE9wdGlvbnMge1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgY2VsbFdpZHRoOiBudW1iZXI7XG4gIGNlbGxIZWlnaHQ6IG51bWJlcjtcbiAgY2VudGVyZWQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIENlbGwgcG9zaXRpb24gaW5mb3JtYXRpb24gcGFzc2VkIHRvIGNhbGxiYWNrIGZ1bmN0aW9uc1xuICogQGNhdGVnb3J5IExpYnJhcnlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDZWxsUG9zaXRpb24ge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgcGl4ZWxYOiBudW1iZXI7XG4gIHBpeGVsWTogbnVtYmVyO1xuICBpbmRleDogbnVtYmVyO1xuICB0b3RhbDogbnVtYmVyO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBncmlkIG9mIHRpbGVzIHVzaW5nIGEgc2V0IG9mIHRleHR1cmVzXG4gKiBcbiAqIEBjYXRlZ29yeSBMaWJyYXJ5XG4gKiBAcGFyYW0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIGdyaWRcbiAqIEBwYXJhbSB0ZXh0dXJlcyAtIEFycmF5IG9mIHRleHR1cmVzIHRvIHVzZSBmb3IgdGhlIHRpbGVzXG4gKiBAcGFyYW0gc2VsZWN0b3IgLSBPcHRpb25hbCBmdW5jdGlvbiB0byBzZWxlY3Qgd2hpY2ggdGV4dHVyZSB0byB1c2UgZm9yIGVhY2ggY2VsbFxuICogQHJldHVybnMgQSBQSVhJIENvbnRhaW5lciB3aXRoIHRoZSBnZW5lcmF0ZWQgdGlsZSBncmlkXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBDcmVhdGUgYSByYW5kb20gZ3Jhc3MgZmllbGRcbiAqIGNvbnN0IGdyYXNzRmllbGQgPSBjcmVhdGVUaWxlR3JpZCh7XG4gKiAgIHdpZHRoOiA2NCxcbiAqICAgaGVpZ2h0OiA2NCxcbiAqICAgY2VsbFdpZHRoOiAxNixcbiAqICAgY2VsbEhlaWdodDogMTYsXG4gKiAgIGNlbnRlcmVkOiB0cnVlXG4gKiB9LCBncmFzc1RleHR1cmVzKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGlsZUdyaWQoXG4gIG9wdGlvbnM6IEdyaWRPcHRpb25zLFxuICB0ZXh0dXJlczogUElYSS5UZXh0dXJlW10sXG4gIHNlbGVjdG9yPzogKHBvc2l0aW9uOiBDZWxsUG9zaXRpb24pID0+IG51bWJlclxuKTogUElYSS5Db250YWluZXIge1xuICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIGNlbGxXaWR0aCwgY2VsbEhlaWdodCwgY2VudGVyZWQgPSBmYWxzZSB9ID0gb3B0aW9ucztcbiAgXG4gIC8vIERlZmF1bHQgc2VsZWN0b3IgcmFuZG9tbHkgY2hvb3NlcyB0ZXh0dXJlc1xuICBjb25zdCBkZWZhdWx0U2VsZWN0b3IgPSAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZXh0dXJlcy5sZW5ndGgpO1xuICBjb25zdCBnZXRUZXh0dXJlSW5kZXggPSBzZWxlY3RvciB8fCBkZWZhdWx0U2VsZWN0b3I7XG4gIFxuICAvLyBDcmVhdGUgY29udGFpbmVyIGZvciB0aGUgZ3JpZFxuICBjb25zdCBjb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcbiAgXG4gIC8vIENhbGN1bGF0ZSB0b3RhbCBudW1iZXIgb2YgY2VsbHNcbiAgY29uc3QgdG90YWxDZWxscyA9IHdpZHRoICogaGVpZ2h0O1xuICBcbiAgLy8gR2VuZXJhdGUgZWFjaCBjZWxsIGluIHRoZSBncmlkXG4gIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgIC8vIENhbGN1bGF0ZSBwaXhlbCBjb29yZGluYXRlc1xuICAgICAgY29uc3QgcGl4ZWxYID0geCAqIGNlbGxXaWR0aDtcbiAgICAgIGNvbnN0IHBpeGVsWSA9IHkgKiBjZWxsSGVpZ2h0O1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgaW5kZXhcbiAgICAgIGNvbnN0IGluZGV4ID0geSAqIHdpZHRoICsgeDtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGNlbGwgcG9zaXRpb24gaW5mb1xuICAgICAgY29uc3QgcG9zaXRpb246IENlbGxQb3NpdGlvbiA9IHtcbiAgICAgICAgeCwgeSwgcGl4ZWxYLCBwaXhlbFksIGluZGV4LCB0b3RhbDogdG90YWxDZWxsc1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gR2V0IHRleHR1cmUgaW5kZXggZm9yIHRoaXMgcG9zaXRpb25cbiAgICAgIGNvbnN0IHRleHR1cmVJbmRleCA9IGdldFRleHR1cmVJbmRleChwb3NpdGlvbik7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBzcHJpdGUgd2l0aCB0aGUgc2VsZWN0ZWQgdGV4dHVyZVxuICAgICAgY29uc3QgY2VsbCA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlc1t0ZXh0dXJlSW5kZXhdKTtcbiAgICAgIGNlbGwucG9zaXRpb24uc2V0KHBpeGVsWCwgcGl4ZWxZKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIHRvIGNvbnRhaW5lclxuICAgICAgY29udGFpbmVyLmFkZENoaWxkKGNlbGwpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gQ2VudGVyIHRoZSBncmlkIGlmIHJlcXVlc3RlZFxuICBpZiAoY2VudGVyZWQpIHtcbiAgICBjb25zdCBncmlkV2lkdGggPSB3aWR0aCAqIGNlbGxXaWR0aDtcbiAgICBjb25zdCBncmlkSGVpZ2h0ID0gaGVpZ2h0ICogY2VsbEhlaWdodDtcbiAgICBjb250YWluZXIucG9zaXRpb24uc2V0KC1ncmlkV2lkdGggLyAyLCAtZ3JpZEhlaWdodCAvIDIpO1xuICB9XG4gIFxuICByZXR1cm4gY29udGFpbmVyO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgYSByYW5nZSBvZiB0ZXh0dXJlc1xuICogXG4gKiBAY2F0ZWdvcnkgTGlicmFyeVxuICogQHBhcmFtIHRleHR1cmVzIC0gRnVsbCBhcnJheSBvZiB0ZXh0dXJlc1xuICogQHBhcmFtIHN0YXJ0SW5kZXggLSBTdGFydGluZyBpbmRleCAoZnJvbSAwKVxuICogQHBhcmFtIGNvdW50IC0gTnVtYmVyIG9mIHRleHR1cmVzIHRvIGluY2x1ZGVcbiAqIEByZXR1cm5zIFN1YnNldCBvZiB0ZXh0dXJlc1xuICogXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogLy8gR2V0IHRoZSBsYXN0IDEyIGZyYW1lcyBmcm9tIGEgc3ByaXRlc2hlZXRcbiAqIGNvbnN0IHRpbGVWYXJpYXRpb25zID0gZ2V0VGV4dHVyZVJhbmdlKGdyYXNzRnJhbWVzLCBncmFzc0ZyYW1lcy5sZW5ndGggLSAxMiwgMTIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0dXJlUmFuZ2UoXG4gIHRleHR1cmVzOiBQSVhJLlRleHR1cmVbXSxcbiAgc3RhcnRJbmRleDogbnVtYmVyLFxuICBjb3VudDogbnVtYmVyXG4pOiBQSVhJLlRleHR1cmVbXSB7XG4gIHJldHVybiB0ZXh0dXJlcy5zbGljZShzdGFydEluZGV4LCBzdGFydEluZGV4ICsgY291bnQpO1xufVxuXG4iLCJpbXBvcnQgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IENvbnRhaW5lciwgR3JhcGhpY3MsIFRleHQgfSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IEZhbGxpbmdTcXVhcmVzQW5pbWF0aW9uLCBGYWxsaW5nU3F1YXJlc09wdGlvbnMgfSBmcm9tICcuL2ZhbGxpbmctc3F1YXJlcy1hbmltYXRpb24nO1xuXG4vLyBSZS1leHBvcnQgZm9yIGNvbnZlbmllbmNlXG5leHBvcnQgeyBGYWxsaW5nU3F1YXJlc0FuaW1hdGlvbiB9O1xuZXhwb3J0IHR5cGUgeyBGYWxsaW5nU3F1YXJlc09wdGlvbnMgfTtcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGN1c3RvbSBsb2FkaW5nIGFuaW1hdGlvbnMuXG4gKiBJbXBsZW1lbnQgdGhpcyB0byBjcmVhdGUgeW91ciBvd24gbG9hZGluZyBhbmltYXRpb24gcGx1Z2luLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY2xhc3MgU3Bpbm5lckFuaW1hdGlvbiBpbXBsZW1lbnRzIExvYWRpbmdBbmltYXRpb24ge1xuICogICBwcml2YXRlIHNwaW5uZXI6IEdyYXBoaWNzO1xuICogICBwcml2YXRlIHJvdGF0aW9uID0gMDtcbiAqXG4gKiAgIGluaXQoY29udGFpbmVyOiBDb250YWluZXIpIHtcbiAqICAgICB0aGlzLnNwaW5uZXIgPSBuZXcgR3JhcGhpY3MoKTtcbiAqICAgICB0aGlzLnNwaW5uZXIuYXJjKDAsIDAsIDMwLCAwLCBNYXRoLlBJICogMS41KTtcbiAqICAgICB0aGlzLnNwaW5uZXIuc3Ryb2tlKHsgd2lkdGg6IDQsIGNvbG9yOiAweGZmZmZmZiB9KTtcbiAqICAgICBjb250YWluZXIuYWRkQ2hpbGQodGhpcy5zcGlubmVyKTtcbiAqICAgfVxuICpcbiAqICAgdXBkYXRlKGNvbnRleHQ6IExvYWRpbmdBbmltYXRpb25Db250ZXh0KSB7XG4gKiAgICAgdGhpcy5yb3RhdGlvbiArPSBjb250ZXh0LmRlbHRhVGltZSAqIDU7XG4gKiAgICAgdGhpcy5zcGlubmVyLnJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbjtcbiAqICAgICB0aGlzLnNwaW5uZXIueCA9IGNvbnRleHQud2lkdGggLyAyO1xuICogICAgIHRoaXMuc3Bpbm5lci55ID0gY29udGV4dC5oZWlnaHQgLyAyIC0gMjA7XG4gKiAgIH1cbiAqXG4gKiAgIHJlc2V0KCkgeyB0aGlzLnJvdGF0aW9uID0gMDsgfVxuICogICBkZXN0cm95KCkgeyB0aGlzLnNwaW5uZXI/LmRlc3Ryb3koKTsgfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9hZGluZ0FuaW1hdGlvbiB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBhbmltYXRpb24uIEFkZCB5b3VyIGRpc3BsYXkgb2JqZWN0cyB0byB0aGUgY29udGFpbmVyLlxuICAgKiBAcGFyYW0gY29udGFpbmVyIC0gUGFyZW50IGNvbnRhaW5lciB0byBhZGQgYW5pbWF0aW9uIGVsZW1lbnRzIHRvXG4gICAqL1xuICBpbml0KGNvbnRhaW5lcjogQ29udGFpbmVyKTogdm9pZDtcblxuICAvKipcbiAgICogVXBkYXRlIGFuaW1hdGlvbiBlYWNoIGZyYW1lLlxuICAgKiBAcGFyYW0gY29udGV4dCAtIEN1cnJlbnQgYW5pbWF0aW9uIGNvbnRleHQgd2l0aCB0aW1pbmcgYW5kIGRpbWVuc2lvbnNcbiAgICovXG4gIHVwZGF0ZShjb250ZXh0OiBMb2FkaW5nQW5pbWF0aW9uQ29udGV4dCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFJlc2V0IGFuaW1hdGlvbiBzdGF0ZSB3aGVuIGxvYWRpbmcgc3RhcnRzLlxuICAgKi9cbiAgcmVzZXQoKTogdm9pZDtcblxuICAvKipcbiAgICogQ2xlYW4gdXAgYW5pbWF0aW9uIHJlc291cmNlcy5cbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZDtcbn1cblxuLyoqXG4gKiBDb250ZXh0IHBhc3NlZCB0byBMb2FkaW5nQW5pbWF0aW9uLnVwZGF0ZSgpIGVhY2ggZnJhbWUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9hZGluZ0FuaW1hdGlvbkNvbnRleHQge1xuICAvKiogVG90YWwgZWxhcHNlZCB0aW1lIGluIHNlY29uZHMgc2luY2UgbG9hZGluZyBzdGFydGVkICovXG4gIHRpbWU6IG51bWJlcjtcbiAgLyoqIERlbHRhIHRpbWUgaW4gc2Vjb25kcyBzaW5jZSBsYXN0IGZyYW1lICovXG4gIGRlbHRhVGltZTogbnVtYmVyO1xuICAvKiogU2NyZWVuIHdpZHRoIGluIHBpeGVscyAqL1xuICB3aWR0aDogbnVtYmVyO1xuICAvKiogU2NyZWVuIGhlaWdodCBpbiBwaXhlbHMgKi9cbiAgaGVpZ2h0OiBudW1iZXI7XG4gIC8qKiBMb2FkaW5nIHRleHQgZWxlbWVudCAoZm9yIHBvc2l0aW9uaW5nIHJlbGF0aXZlIHRvIHRleHQpICovXG4gIHRleHRFbGVtZW50OiBUZXh0O1xufVxuXG4vKipcbiAqIExvYWRpbmcgc2NlbmUgb3B0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2FkaW5nU2NlbmVPcHRpb25zIHtcbiAgLyoqIEJhY2tncm91bmQgY29sb3IgKGRlZmF1bHQ6IDB4MWExYTFhKSAqL1xuICBiYWNrZ3JvdW5kQ29sb3I/OiBudW1iZXI7XG4gIC8qKiBMb2FkaW5nIHRleHQgKGRlZmF1bHQ6ICdMT0FESU5HLi4uJykgKi9cbiAgdGV4dD86IHN0cmluZztcbiAgLyoqIFRleHQgc3R5bGUgb3ZlcnJpZGVzICovXG4gIHRleHRTdHlsZT86IFBhcnRpYWw8UElYSS5UZXh0U3R5bGU+O1xuICAvKipcbiAgICogQ3VzdG9tIGxvYWRpbmcgYW5pbWF0aW9uIHBsdWdpbi5cbiAgICogSWYgbm90IHByb3ZpZGVkLCB1c2VzIEZhbGxpbmdTcXVhcmVzQW5pbWF0aW9uLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiAvLyBDdXN0b20gYW5pbWF0aW9uXG4gICAqIGNvbnN0IG9wdGlvbnM6IExvYWRpbmdTY2VuZU9wdGlvbnMgPSB7XG4gICAqICAgYW5pbWF0aW9uOiBuZXcgTXlDdXN0b21BbmltYXRpb24oKVxuICAgKiB9O1xuICAgKlxuICAgKiAvLyBPciBjdXN0b21pemUgdGhlIGRlZmF1bHRcbiAgICogY29uc3Qgb3B0aW9uczogTG9hZGluZ1NjZW5lT3B0aW9ucyA9IHtcbiAgICogICBhbmltYXRpb246IG5ldyBGYWxsaW5nU3F1YXJlc0FuaW1hdGlvbih7XG4gICAqICAgICBzcXVhcmVTaXplOiAxNixcbiAgICogICAgIHBhbGV0dGU6IFsweGZmMDAwMCwgMHgwMGZmMDBdXG4gICAqICAgfSlcbiAgICogfTtcbiAgICogYGBgXG4gICAqL1xuICBhbmltYXRpb24/OiBMb2FkaW5nQW5pbWF0aW9uO1xuICAvKiogT3B0aW9ucyBmb3IgZGVmYXVsdCBGYWxsaW5nU3F1YXJlc0FuaW1hdGlvbiAoaWdub3JlZCBpZiBjdXN0b20gYW5pbWF0aW9uIHByb3ZpZGVkKSAqL1xuICBmYWxsaW5nU3F1YXJlc09wdGlvbnM/OiBGYWxsaW5nU3F1YXJlc09wdGlvbnM7XG59XG5cbi8qKlxuICogTG9hZGluZyBzY2VuZSBjb21wb25lbnQgZm9yIE1veGkuXG4gKiBTaG93cyBhbiBhbmltYXRlZCBsb2FkaW5nIHNjcmVlbiBkdXJpbmcgYXNzZXQgbG9hZGluZy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIC8vIFZpYSBzZXR1cE1veGkgKHJlY29tbWVuZGVkKVxuICogY29uc3QgeyBsb2FkaW5nU2NlbmUgfSA9IGF3YWl0IHNldHVwTW94aSh7XG4gKiAgIHNob3dMb2FkaW5nU2NlbmU6IHRydWUsXG4gKiAgIGxvYWRpbmdTY2VuZU9wdGlvbnM6IHtcbiAqICAgICBiYWNrZ3JvdW5kQ29sb3I6IDB4MjIyMjIyLFxuICogICAgIHRleHQ6ICdQbGVhc2Ugd2FpdC4uLicsXG4gKiAgICAgYW5pbWF0aW9uOiBuZXcgRmFsbGluZ1NxdWFyZXNBbmltYXRpb24oeyBzcXVhcmVTaXplOiAxNiB9KVxuICogICB9XG4gKiB9KTtcbiAqXG4gKiAvLyBNYW51YWwgY29udHJvbFxuICogbG9hZGluZ1NjZW5lLnNob3coKTtcbiAqIGF3YWl0IGxvYWRBc3NldHMoWy4uLl0pO1xuICogbG9hZGluZ1NjZW5lLmhpZGUoKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTG9hZGluZ1NjZW5lIGV4dGVuZHMgQ29udGFpbmVyIHtcbiAgcHJpdmF0ZSB0ZXh0OiBUZXh0O1xuICBwcml2YXRlIGJhY2tncm91bmQ6IEdyYXBoaWNzO1xuICBwcml2YXRlIGFuaW1hdGlvbkNvbnRhaW5lcjogQ29udGFpbmVyO1xuICBwcml2YXRlIGFuaW1hdGlvbjogTG9hZGluZ0FuaW1hdGlvbjtcbiAgcHJpdmF0ZSB0aWNrZXI6IFBJWEkuVGlja2VyO1xuICBwcml2YXRlIHJlbmRlcmVyOiBQSVhJLlJlbmRlcmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBiYWNrZ3JvdW5kQ29sb3I6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBMb2FkaW5nU2NlbmVPcHRpb25zID0ge30pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3Qge1xuICAgICAgYmFja2dyb3VuZENvbG9yID0gMHgxYTFhMWEsXG4gICAgICB0ZXh0ID0gJ0xPQURJTkcuLi4nLFxuICAgICAgdGV4dFN0eWxlID0ge30sXG4gICAgICBhbmltYXRpb24sXG4gICAgICBmYWxsaW5nU3F1YXJlc09wdGlvbnNcbiAgICB9ID0gb3B0aW9ucztcblxuICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuXG4gICAgLy8gVXNlIHByb3ZpZGVkIGFuaW1hdGlvbiBvciBjcmVhdGUgZGVmYXVsdFxuICAgIHRoaXMuYW5pbWF0aW9uID0gYW5pbWF0aW9uID8/IG5ldyBGYWxsaW5nU3F1YXJlc0FuaW1hdGlvbihmYWxsaW5nU3F1YXJlc09wdGlvbnMpO1xuXG4gICAgLy8gQmFja2dyb3VuZFxuICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBHcmFwaGljcygpO1xuICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5iYWNrZ3JvdW5kKTtcblxuICAgIC8vIEFuaW1hdGlvbiBjb250YWluZXIgKGJldHdlZW4gYmFja2dyb3VuZCBhbmQgdGV4dClcbiAgICB0aGlzLmFuaW1hdGlvbkNvbnRhaW5lciA9IG5ldyBDb250YWluZXIoKTtcbiAgICB0aGlzLmFkZENoaWxkKHRoaXMuYW5pbWF0aW9uQ29udGFpbmVyKTtcblxuICAgIC8vIFRleHRcbiAgICB0aGlzLnRleHQgPSBuZXcgVGV4dCh7XG4gICAgICB0ZXh0LFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgZm9udEZhbWlseTogJ0NvdXJpZXIgTmV3LCBtb25vc3BhY2UnLFxuICAgICAgICBmb250U2l6ZTogMTYsXG4gICAgICAgIGZpbGw6IDB4ZmZmZmZmLFxuICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gICAgICAgIC4uLnRleHRTdHlsZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudGV4dC5hbmNob3Iuc2V0KDAuNSk7XG4gICAgdGhpcy5hZGRDaGlsZCh0aGlzLnRleHQpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhbmltYXRpb25cbiAgICB0aGlzLmFuaW1hdGlvbi5pbml0KHRoaXMuYW5pbWF0aW9uQ29udGFpbmVyKTtcblxuICAgIC8vIFRpY2tlclxuICAgIHRoaXMudGlja2VyID0gbmV3IFBJWEkuVGlja2VyKCk7XG4gICAgdGhpcy50aWNrZXIuYXV0b1N0YXJ0ID0gZmFsc2U7XG4gICAgdGhpcy50aWNrZXIuYWRkKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLnZpc2libGUgJiYgdGhpcy5yZW5kZXJlcikge1xuICAgICAgICBjb25zdCBkZWx0YVRpbWUgPSB0aGlzLnRpY2tlci5kZWx0YVRpbWUgLyA2MDtcbiAgICAgICAgdGhpcy50aW1lICs9IGRlbHRhVGltZTtcbiAgICAgICAgdGhpcy51cGRhdGUodGhpcy5yZW5kZXJlci53aWR0aCwgdGhpcy5yZW5kZXJlci5oZWlnaHQsIGRlbHRhVGltZSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGRlbHRhVGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gQmFja2dyb3VuZFxuICAgIHRoaXMuYmFja2dyb3VuZC5jbGVhcigpO1xuICAgIHRoaXMuYmFja2dyb3VuZC5yZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIHRoaXMuYmFja2dyb3VuZC5maWxsKHsgY29sb3I6IHRoaXMuYmFja2dyb3VuZENvbG9yIH0pO1xuXG4gICAgLy8gVGV4dCBwb3NpdGlvblxuICAgIHRoaXMudGV4dC54ID0gd2lkdGggLyAyIC0gNDtcbiAgICB0aGlzLnRleHQueSA9IGhlaWdodCAvIDIgKyA2MDtcblxuICAgIC8vIFVwZGF0ZSBhbmltYXRpb25cbiAgICB0aGlzLmFuaW1hdGlvbi51cGRhdGUoe1xuICAgICAgdGltZTogdGhpcy50aW1lLFxuICAgICAgZGVsdGFUaW1lLFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICB0ZXh0RWxlbWVudDogdGhpcy50ZXh0XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB3aXRoIHJlbmRlcmVyIHJlZmVyZW5jZS5cbiAgICogQHBhcmFtIHJlbmRlcmVyIC0gUElYSSByZW5kZXJlclxuICAgKi9cbiAgaW5pdChyZW5kZXJlcjogUElYSS5SZW5kZXJlcik6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBsb2FkaW5nIHNjZW5lIGFuZCBzdGFydCBhbmltYXRpb24uXG4gICAqL1xuICBzaG93KCk6IHZvaWQge1xuICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgdGhpcy50aW1lID0gMDtcbiAgICB0aGlzLmFuaW1hdGlvbi5yZXNldCgpO1xuICAgIGlmICghdGhpcy50aWNrZXIuc3RhcnRlZCkge1xuICAgICAgdGhpcy50aWNrZXIuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGlkZSB0aGUgbG9hZGluZyBzY2VuZSBhbmQgc3RvcCBhbmltYXRpb24uXG4gICAqL1xuICBoaWRlKCk6IHZvaWQge1xuICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnRpY2tlci5zdGFydGVkKSB7XG4gICAgICB0aGlzLnRpY2tlci5zdG9wKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwIHJlc291cmNlcy5cbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGlja2VyLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMudGlja2VyLnN0b3AoKTtcbiAgICB9XG4gICAgdGhpcy50aWNrZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuYW5pbWF0aW9uLmRlc3Ryb3koKTtcbiAgICBzdXBlci5kZXN0cm95KCk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBNb3hpRW50aXR5LCBBc0VudGl0eSwgYXNFbnRpdHkgfSBmcm9tICcuLi9tYWluL21veGktZW50aXR5JztcbmltcG9ydCB7IExvZ2ljIH0gZnJvbSAnLi4vbWFpbi9sb2dpYyc7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tICcuLi9tYWluL2NhbWVyYSc7XG5pbXBvcnQgeyBQYXJhbGxheExheWVyIH0gZnJvbSAnLi9wYXJhbGxheC1sYXllcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyYWxsYXhCYWNrZ3JvdW5kT3B0aW9ucyB7XG4gIGNhbWVyYT86IENhbWVyYTsgICAgICAgICAgICAgICAgICAgIC8vIFJlZmVyZW5jZSB0byBjYW1lcmEgKGF1dG8tZGV0ZWN0ZWQgaWYgbm90IHByb3ZpZGVkKVxuICBzY3JvbGxPZmZzZXQ/OiBQSVhJLlBvaW50OyAgICAgICAgICAvLyBCYXNlIHNjcm9sbCBvZmZzZXRcbiAgc2Nyb2xsQmFzZVNjYWxlPzogUElYSS5Qb2ludDsgICAgICAgLy8gQmFzZSBzY2FsZSBtdWx0aXBsaWVyXG4gIHNjcm9sbElnbm9yZUNhbWVyYVpvb20/OiBib29sZWFuOyAgIC8vIERpc2FibGUgem9vbSBhZmZlY3RpbmcgcGFyYWxsYXhcbiAgYXV0b3Njcm9sbD86IFBJWEkuUG9pbnQ7ICAgICAgICAgICAgLy8gQXV0b21hdGljIHNjcm9sbGluZyBpbmRlcGVuZGVudCBvZiBjYW1lcmFcbn1cblxuLyoqXG4gKiBDb250YWluZXIgZm9yIGFsbCBwYXJhbGxheCBsYXllcnMgdGhhdCBtYW5hZ2VzIGdsb2JhbCBwYXJhbGxheCBiZWhhdmlvclxuICogYW5kIGNvb3JkaW5hdGVzIHdpdGggdGhlIENhbWVyYSBzeXN0ZW0uXG4gKlxuICogSW5zcGlyZWQgYnkgR29kb3QncyBQYXJhbGxheEJhY2tncm91bmQgbm9kZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcGFyYWxsYXggPSBuZXcgUGFyYWxsYXhCYWNrZ3JvdW5kKCk7XG4gKiBjb25zdCBza3lMYXllciA9IG5ldyBUaWxpbmdQYXJhbGxheExheWVyKHtcbiAqICAgdGV4dHVyZTogc2t5VGV4dHVyZSxcbiAqICAgc2Nyb2xsU2NhbGU6IG5ldyBQSVhJLlBvaW50KDAuMiwgMC4yKVxuICogfSk7XG4gKiBwYXJhbGxheC5hZGRMYXllcihza3lMYXllcik7XG4gKiBzY2VuZS5hZGRDaGlsZChwYXJhbGxheCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFBhcmFsbGF4QmFja2dyb3VuZCBleHRlbmRzIFBJWEkuQ29udGFpbmVyIGltcGxlbWVudHMgQXNFbnRpdHk8UElYSS5Db250YWluZXI+IHtcbiAgcHVibGljIG1veGlFbnRpdHk6IE1veGlFbnRpdHk8UElYSS5Db250YWluZXI+O1xuICBwdWJsaWMgY2FtZXJhOiBDYW1lcmEgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIHNjcm9sbE9mZnNldDogUElYSS5Qb2ludCA9IG5ldyBQSVhJLlBvaW50KDAsIDApO1xuICBwdWJsaWMgc2Nyb2xsQmFzZVNjYWxlOiBQSVhJLlBvaW50ID0gbmV3IFBJWEkuUG9pbnQoMSwgMSk7XG4gIHB1YmxpYyBzY3JvbGxJZ25vcmVDYW1lcmFab29tOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBhdXRvc2Nyb2xsOiBQSVhJLlBvaW50ID0gbmV3IFBJWEkuUG9pbnQoMCwgMCk7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogUGFyYWxsYXhCYWNrZ3JvdW5kT3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8vIEFwcGx5IG9wdGlvbnNcbiAgICB0aGlzLmNhbWVyYSA9IG9wdGlvbnMuY2FtZXJhID8/IG51bGw7XG4gICAgdGhpcy5zY3JvbGxPZmZzZXQgPSBvcHRpb25zLnNjcm9sbE9mZnNldCA/PyBuZXcgUElYSS5Qb2ludCgwLCAwKTtcbiAgICB0aGlzLnNjcm9sbEJhc2VTY2FsZSA9IG9wdGlvbnMuc2Nyb2xsQmFzZVNjYWxlID8/IG5ldyBQSVhJLlBvaW50KDEsIDEpO1xuICAgIHRoaXMuc2Nyb2xsSWdub3JlQ2FtZXJhWm9vbSA9IG9wdGlvbnMuc2Nyb2xsSWdub3JlQ2FtZXJhWm9vbSA/PyBmYWxzZTtcbiAgICB0aGlzLmF1dG9zY3JvbGwgPSBvcHRpb25zLmF1dG9zY3JvbGwgPz8gbmV3IFBJWEkuUG9pbnQoMCwgMCk7XG5cbiAgICAvLyBDb252ZXJ0IHRvIE1veGkgZW50aXR5IHdpdGggUGFyYWxsYXhCYWNrZ3JvdW5kTG9naWNcbiAgICBjb25zdCBlbnRpdHkgPSBhc0VudGl0eSh0aGlzKTtcbiAgICBlbnRpdHkubW94aUVudGl0eS5hZGRMb2dpYyhuZXcgUGFyYWxsYXhCYWNrZ3JvdW5kTG9naWMoKSk7XG4gICAgdGhpcy5tb3hpRW50aXR5ID0gZW50aXR5Lm1veGlFbnRpdHk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIFBhcmFsbGF4TGF5ZXIgdG8gdGhlIGJhY2tncm91bmRcbiAgICovXG4gIGFkZExheWVyKGxheWVyOiBQYXJhbGxheExheWVyKTogdm9pZCB7XG4gICAgdGhpcy5hZGRDaGlsZChsYXllcik7XG4gIH1cblxuICAvKipcbiAgICogQXV0by1kZXRlY3QgY2FtZXJhIGZyb20gc2NlbmUgaGllcmFyY2h5XG4gICAqL1xuICBwcml2YXRlIGRldGVjdENhbWVyYSgpOiBDYW1lcmEgfCBudWxsIHtcbiAgICBsZXQgY3VycmVudCA9IHRoaXMucGFyZW50O1xuICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICBpZiAoY3VycmVudCBpbnN0YW5jZW9mIENhbWVyYSkge1xuICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBlZmZlY3RpdmUgY2FtZXJhIHBvc2l0aW9uIGZvciBwYXJhbGxheCBjYWxjdWxhdGlvblxuICAgKi9cbiAgZ2V0Q2FtZXJhUG9zaXRpb24oKTogUElYSS5Qb2ludCB7XG4gICAgY29uc3QgY2FtZXJhID0gdGhpcy5jYW1lcmEgPz8gdGhpcy5kZXRlY3RDYW1lcmEoKTtcbiAgICBpZiAoIWNhbWVyYSkge1xuICAgICAgcmV0dXJuIG5ldyBQSVhJLlBvaW50KDAsIDApO1xuICAgIH1cblxuICAgIC8vIEluIE1PWEkncyBjYW1lcmEgc3lzdGVtLCBjYW1lcmEucG9zaXRpb24gcmVwcmVzZW50cyB3aGVyZSB0aGUgY2FtZXJhIGlzIGxvb2tpbmdcbiAgICAvLyBUaGUgc2NlbmUgaXMgcG9zaXRpb25lZCBhdCAtY2FtZXJhLnBvc2l0aW9uIHRvIGNyZWF0ZSB0aGUgY2FtZXJhIGVmZmVjdFxuICAgIHJldHVybiBuZXcgUElYSS5Qb2ludChcbiAgICAgIGNhbWVyYS5wb3NpdGlvbi54LFxuICAgICAgY2FtZXJhLnBvc2l0aW9uLnlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZWZmZWN0aXZlIGNhbWVyYSBzY2FsZS96b29tIGZvciBwYXJhbGxheCBjYWxjdWxhdGlvblxuICAgKi9cbiAgZ2V0Q2FtZXJhU2NhbGUoKTogUElYSS5Qb2ludCB7XG4gICAgaWYgKHRoaXMuc2Nyb2xsSWdub3JlQ2FtZXJhWm9vbSkge1xuICAgICAgcmV0dXJuIG5ldyBQSVhJLlBvaW50KDEsIDEpO1xuICAgIH1cblxuICAgIGNvbnN0IGNhbWVyYSA9IHRoaXMuY2FtZXJhID8/IHRoaXMuZGV0ZWN0Q2FtZXJhKCk7XG4gICAgaWYgKCFjYW1lcmEpIHtcbiAgICAgIHJldHVybiBuZXcgUElYSS5Qb2ludCgxLCAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFBJWEkuUG9pbnQoY2FtZXJhLnNjYWxlLngsIGNhbWVyYS5zY2FsZS55KTtcbiAgfVxufVxuXG4vKipcbiAqIExvZ2ljIGNvbXBvbmVudCB0aGF0IHVwZGF0ZXMgdGhlIHBhcmFsbGF4IGJhY2tncm91bmQgYmFzZWQgb24gY2FtZXJhIG1vdmVtZW50IGFuZCBhdXRvc2Nyb2xsLlxuICovXG5leHBvcnQgY2xhc3MgUGFyYWxsYXhCYWNrZ3JvdW5kTG9naWMgZXh0ZW5kcyBMb2dpYzxQYXJhbGxheEJhY2tncm91bmQ+IHtcbiAgbmFtZSA9ICdQYXJhbGxheEJhY2tncm91bmRMb2dpYyc7XG5cbiAgdXBkYXRlKGVudGl0eTogUGFyYWxsYXhCYWNrZ3JvdW5kLCBkZWx0YVRpbWU6IG51bWJlcikge1xuICAgIC8vIEFwcGx5IGF1dG9zY3JvbGxcbiAgICBpZiAoZW50aXR5LmF1dG9zY3JvbGwueCAhPT0gMCB8fCBlbnRpdHkuYXV0b3Njcm9sbC55ICE9PSAwKSB7XG4gICAgICBlbnRpdHkuc2Nyb2xsT2Zmc2V0LnggKz0gZW50aXR5LmF1dG9zY3JvbGwueCAqIGRlbHRhVGltZTtcbiAgICAgIGVudGl0eS5zY3JvbGxPZmZzZXQueSArPSBlbnRpdHkuYXV0b3Njcm9sbC55ICogZGVsdGFUaW1lO1xuICAgIH1cblxuICAgIC8vIEdldCBjYW1lcmEgcG9zaXRpb24gZm9yIGNoaWxkIGxheWVycyB0byByZWZlcmVuY2VcbiAgICBjb25zdCBjYW1lcmFQb3MgPSBlbnRpdHkuZ2V0Q2FtZXJhUG9zaXRpb24oKTtcbiAgICBjb25zdCBjYW1lcmFTY2FsZSA9IGVudGl0eS5nZXRDYW1lcmFTY2FsZSgpO1xuXG4gICAgLy8gUG9zaXRpb24gdGhlIFBhcmFsbGF4QmFja2dyb3VuZCB0byBzdGF5IHNjcmVlbi1hbGlnbmVkXG4gICAgLy8gU2luY2UgUGFyYWxsYXhCYWNrZ3JvdW5kIGlzIGEgY2hpbGQgb2Ygc2NlbmUgd2l0aCBwaXZvdCBhdCB2aWV3cG9ydCBjZW50ZXIsXG4gICAgLy8gd2UgbmVlZCB0byBjb3VudGVyLXNjYWxlIHRvIGtlZXAgbGF5ZXJzIGF0IDE6MSBzY3JlZW4gc2NhbGVcbiAgICBjb25zdCBzY2VuZSA9IGVudGl0eS5wYXJlbnQ7XG4gICAgaWYgKHNjZW5lKSB7XG4gICAgICAvLyBQb3NpdGlvbiB0byBzdGF5IGNlbnRlcmVkIG9uIHZpZXdwb3J0IGRlc3BpdGUgY2FtZXJhIG1vdmVtZW50XG4gICAgICAvLyBBY2NvdW50IGZvciBzY2VuZSBzY2FsZSBzaW5jZSBzY2VuZS5wb3NpdGlvbiBpcyBzY2FsZWRcbiAgICAgIGVudGl0eS5wb3NpdGlvbi54ID0gY2FtZXJhUG9zLnggLyBzY2VuZS5zY2FsZS54O1xuICAgICAgZW50aXR5LnBvc2l0aW9uLnkgPSBjYW1lcmFQb3MueSAvIHNjZW5lLnNjYWxlLnk7XG5cbiAgICAgIC8vIENvdW50ZXItc2NhbGUgdG8gY2FuY2VsIGluaGVyaXRlZCBzY2VuZSBzY2FsZVxuICAgICAgLy8gVGhpcyBrZWVwcyBUaWxpbmdTcHJpdGUgc2l6aW5nIGluIHNjcmVlbi1zcGFjZSBjb29yZGluYXRlc1xuICAgICAgZW50aXR5LnNjYWxlLnggPSAxIC8gc2NlbmUuc2NhbGUueDtcbiAgICAgIGVudGl0eS5zY2FsZS55ID0gMSAvIHNjZW5lLnNjYWxlLnk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGl0eS5wb3NpdGlvbi54ID0gY2FtZXJhUG9zLng7XG4gICAgICBlbnRpdHkucG9zaXRpb24ueSA9IGNhbWVyYVBvcy55O1xuICAgICAgZW50aXR5LnNjYWxlLnNldCgxLCAxKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgYWxsIGNoaWxkIFBhcmFsbGF4TGF5ZXJzXG4gICAgZW50aXR5LmNoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBhbnkpID0+IHtcbiAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFBhcmFsbGF4TGF5ZXIpIHtcbiAgICAgICAgY2hpbGQudXBkYXRlUGFyYWxsYXgoY2FtZXJhUG9zLCBjYW1lcmFTY2FsZSwgZW50aXR5LnNjcm9sbE9mZnNldCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBNb3hpRW50aXR5LCBBc0VudGl0eSwgYXNFbnRpdHkgfSBmcm9tICcuLi9tYWluL21veGktZW50aXR5JztcblxuZXhwb3J0IGludGVyZmFjZSBQYXJhbGxheExheWVyT3B0aW9ucyB7XG4gIHNjcm9sbFNjYWxlPzogUElYSS5Qb2ludDsgICAgICAvLyBNb3Rpb24gbXVsdGlwbGllciAoMC41ID0gaGFsZiBzcGVlZCwgbGlrZSBHb2RvdCdzIG1vdGlvbl9zY2FsZSlcbiAgc2Nyb2xsT2Zmc2V0PzogUElYSS5Qb2ludDsgICAgIC8vIExheWVyIG9mZnNldCBmb3IgcG9zaXRpb25pbmcgKGxpa2UgR29kb3QncyBtb3Rpb25fb2Zmc2V0KVxuICByZXBlYXRTaXplPzogUElYSS5Qb2ludDsgICAgICAgLy8gTWlycm9yaW5nL3JlcGVhdCBpbnRlcnZhbCAoMCA9IG5vIHJlcGVhdCwgbGlrZSBHb2RvdCdzIG1vdGlvbl9taXJyb3JpbmcpXG4gIG1pcnJvcmluZz86IGJvb2xlYW47ICAgICAgICAgICAvLyBFbmFibGUgYXV0b21hdGljIG1pcnJvcmluZyAocmVxdWlyZXMgcmVwZWF0U2l6ZSlcbn1cblxuLyoqXG4gKiBJbmRpdmlkdWFsIHBhcmFsbGF4IGxheWVyIHRoYXQgc2Nyb2xscyBhdCBhIGRpZmZlcmVudCBzcGVlZCBiYXNlZCBvbiBzY3JvbGxTY2FsZS5cbiAqXG4gKiBJbnNwaXJlZCBieSBHb2RvdCdzIFBhcmFsbGF4TGF5ZXIgbm9kZS5cbiAqXG4gKiBUaGUgc2Nyb2xsU2NhbGUgcHJvcGVydHkgY29udHJvbHMgaG93IGZhc3QgdGhlIGxheWVyIG1vdmVzIHJlbGF0aXZlIHRvIHRoZSBjYW1lcmE6XG4gKiAtIDAuMCA9IFN0YXRpYyAoZG9lc24ndCBtb3ZlIHdpdGggY2FtZXJhLCBnb29kIGZvciBVSS9IVUQpXG4gKiAtIDAuMiA9IFNsb3cgKGFwcGVhcnMgZmFyIGF3YXksIGxpa2Ugc2t5KVxuICogLSAwLjUgPSBNZWRpdW0gKG1pZC1ncm91bmQgZWxlbWVudHMpXG4gKiAtIDAuOSA9IEZhc3QgKGZvcmVncm91bmQgZWxlbWVudHMpXG4gKiAtIDEuMCA9IE1vdmVzIHdpdGggY2FtZXJhIChnYW1lIGVudGl0aWVzKVxuICogLSA+MS4wID0gRmFzdGVyIHRoYW4gY2FtZXJhIChyZXZlcnNlIHBhcmFsbGF4IGVmZmVjdClcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbGF5ZXIgPSBuZXcgUGFyYWxsYXhMYXllcih7XG4gKiAgIHNjcm9sbFNjYWxlOiBuZXcgUElYSS5Qb2ludCgwLjUsIDAuNSksIC8vIEhhbGYgY2FtZXJhIHNwZWVkXG4gKiAgIHNjcm9sbE9mZnNldDogbmV3IFBJWEkuUG9pbnQoMCwgMClcbiAqIH0pO1xuICpcbiAqIC8vIEFkZCBzcHJpdGVzIHRvIHRoZSBsYXllclxuICogY29uc3Qgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xuICogbGF5ZXIuYWRkQ2hpbGQoc3ByaXRlKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUGFyYWxsYXhMYXllciBleHRlbmRzIFBJWEkuQ29udGFpbmVyIGltcGxlbWVudHMgQXNFbnRpdHk8UElYSS5Db250YWluZXI+IHtcbiAgcHVibGljIG1veGlFbnRpdHk6IE1veGlFbnRpdHk8UElYSS5Db250YWluZXI+O1xuICBwdWJsaWMgc2Nyb2xsU2NhbGU6IFBJWEkuUG9pbnQgPSBuZXcgUElYSS5Qb2ludCgxLCAxKTtcbiAgcHVibGljIHNjcm9sbE9mZnNldDogUElYSS5Qb2ludCA9IG5ldyBQSVhJLlBvaW50KDAsIDApO1xuICBwdWJsaWMgcmVwZWF0U2l6ZTogUElYSS5Qb2ludCA9IG5ldyBQSVhJLlBvaW50KDAsIDApO1xuICBwdWJsaWMgbWlycm9yaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLy8gSW50ZXJuYWwgc3RhdGVcbiAgcHJpdmF0ZSBfbGFzdENhbWVyYVBvczogUElYSS5Qb2ludCA9IG5ldyBQSVhJLlBvaW50KDAsIDApO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBhcmFsbGF4TGF5ZXJPcHRpb25zID0ge30pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5zY3JvbGxTY2FsZSA9IG9wdGlvbnMuc2Nyb2xsU2NhbGUgPz8gbmV3IFBJWEkuUG9pbnQoMSwgMSk7XG4gICAgdGhpcy5zY3JvbGxPZmZzZXQgPSBvcHRpb25zLnNjcm9sbE9mZnNldCA/PyBuZXcgUElYSS5Qb2ludCgwLCAwKTtcbiAgICB0aGlzLnJlcGVhdFNpemUgPSBvcHRpb25zLnJlcGVhdFNpemUgPz8gbmV3IFBJWEkuUG9pbnQoMCwgMCk7XG4gICAgdGhpcy5taXJyb3JpbmcgPSBvcHRpb25zLm1pcnJvcmluZyA/PyBmYWxzZTtcblxuICAgIC8vIENvbnZlcnQgdG8gTW94aSBlbnRpdHlcbiAgICBjb25zdCBlbnRpdHkgPSBhc0VudGl0eSh0aGlzKTtcbiAgICB0aGlzLm1veGlFbnRpdHkgPSBlbnRpdHkubW94aUVudGl0eTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgbGF5ZXIgcG9zaXRpb24gYmFzZWQgb24gY2FtZXJhIG1vdmVtZW50LlxuICAgKiBDYWxsZWQgYnkgUGFyYWxsYXhCYWNrZ3JvdW5kTG9naWMgZWFjaCBmcmFtZS5cbiAgICpcbiAgICogQHBhcmFtIGNhbWVyYVBvcyAtIEN1cnJlbnQgY2FtZXJhIHBvc2l0aW9uIGluIHdvcmxkIHNwYWNlXG4gICAqIEBwYXJhbSBjYW1lcmFTY2FsZSAtIEN1cnJlbnQgY2FtZXJhIHNjYWxlL3pvb21cbiAgICogQHBhcmFtIGJhY2tncm91bmRPZmZzZXQgLSBHbG9iYWwgYmFja2dyb3VuZCBzY3JvbGwgb2Zmc2V0XG4gICAqL1xuICB1cGRhdGVQYXJhbGxheChcbiAgICBjYW1lcmFQb3M6IFBJWEkuUG9pbnQsXG4gICAgY2FtZXJhU2NhbGU6IFBJWEkuUG9pbnQsXG4gICAgYmFja2dyb3VuZE9mZnNldDogUElYSS5Qb2ludFxuICApOiB2b2lkIHtcbiAgICAvLyBDYWxjdWxhdGUgZWZmZWN0aXZlIHNjcm9sbCBvZmZzZXRcbiAgICBjb25zdCBzY3JvbGxYID0gKGNhbWVyYVBvcy54ICsgYmFja2dyb3VuZE9mZnNldC54KSAqIHRoaXMuc2Nyb2xsU2NhbGUueDtcbiAgICBjb25zdCBzY3JvbGxZID0gKGNhbWVyYVBvcy55ICsgYmFja2dyb3VuZE9mZnNldC55KSAqIHRoaXMuc2Nyb2xsU2NhbGUueTtcblxuICAgIC8vIEFwcGx5IHRvIGxheWVyIHBvc2l0aW9uXG4gICAgdGhpcy5wb3NpdGlvbi54ID0gLXNjcm9sbFggKyB0aGlzLnNjcm9sbE9mZnNldC54O1xuICAgIHRoaXMucG9zaXRpb24ueSA9IC1zY3JvbGxZICsgdGhpcy5zY3JvbGxPZmZzZXQueTtcblxuICAgIC8vIEhhbmRsZSBtaXJyb3Jpbmcvd3JhcHBpbmcgaWYgZW5hYmxlZFxuICAgIGlmICh0aGlzLm1pcnJvcmluZykge1xuICAgICAgaWYgKHRoaXMucmVwZWF0U2l6ZS54ID4gMCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uLnggPSB0aGlzLnBvc2l0aW9uLnggJSB0aGlzLnJlcGVhdFNpemUueDtcbiAgICAgICAgaWYgKHRoaXMucG9zaXRpb24ueCA+IDApIHRoaXMucG9zaXRpb24ueCAtPSB0aGlzLnJlcGVhdFNpemUueDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJlcGVhdFNpemUueSA+IDApIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gdGhpcy5wb3NpdGlvbi55ICUgdGhpcy5yZXBlYXRTaXplLnk7XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLnkgPiAwKSB0aGlzLnBvc2l0aW9uLnkgLT0gdGhpcy5yZXBlYXRTaXplLnk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbGFzdENhbWVyYVBvcy5jb3B5RnJvbShjYW1lcmFQb3MpO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGlsaW5nUGFyYWxsYXhMYXllck9wdGlvbnMgZXh0ZW5kcyBQYXJhbGxheExheWVyT3B0aW9ucyB7XG4gIHRleHR1cmU6IFBJWEkuVGV4dHVyZTtcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBTcGVjaWFsaXplZCBwYXJhbGxheCBsYXllciB1c2luZyBQSVhJLlRpbGluZ1Nwcml0ZSBmb3IgZWZmaWNpZW50IGluZmluaXRlIHNjcm9sbGluZy5cbiAqXG4gKiBUaGlzIGlzIHRoZSByZWNvbW1lbmRlZCBhcHByb2FjaCBmb3IgbGFyZ2UsIHJlcGVhdGluZyBiYWNrZ3JvdW5kcyBsaWtlIHNreSwgY2xvdWRzLFxuICogb3IgZ3JvdW5kIHRleHR1cmVzLiBUaWxpbmdTcHJpdGUgaXMgb3B0aW1pemVkIGZvciByZXBlYXRpbmcgcGF0dGVybnMgYW5kIHVzZXNcbiAqIHRpbGVQb3NpdGlvbiBmb3Igc2VhbWxlc3Mgc2Nyb2xsaW5nIHdpdGhvdXQgcmVwb3NpdGlvbmluZyB0aGUgY29udGFpbmVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBza3lMYXllciA9IG5ldyBUaWxpbmdQYXJhbGxheExheWVyKHtcbiAqICAgdGV4dHVyZTogc2t5VGV4dHVyZSxcbiAqICAgc2Nyb2xsU2NhbGU6IG5ldyBQSVhJLlBvaW50KDAuMiwgMC4yKVxuICogICAvLyB3aWR0aC9oZWlnaHQgYXV0by1kZXRlY3RlZCBmcm9tIHJlbmRlcmVyXG4gKiB9KTtcbiAqIHBhcmFsbGF4QmFja2dyb3VuZC5hZGRMYXllcihza3lMYXllcik7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFRpbGluZ1BhcmFsbGF4TGF5ZXIgZXh0ZW5kcyBQYXJhbGxheExheWVyIHtcbiAgcHVibGljIHRpbGluZ1Nwcml0ZTogUElYSS5UaWxpbmdTcHJpdGU7XG4gIHByaXZhdGUgX2F1dG9TaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFRpbGluZ1BhcmFsbGF4TGF5ZXJPcHRpb25zKSB7XG4gICAgc3VwZXIob3B0aW9ucyk7XG5cbiAgICAvLyBFbnN1cmUgdGV4dHVyZSB3cmFwcyBmb3Igc2VhbWxlc3MgdGlsaW5nXG4gICAgb3B0aW9ucy50ZXh0dXJlLnNvdXJjZS5zdHlsZS5hZGRyZXNzTW9kZSA9ICdyZXBlYXQnO1xuXG4gICAgLy8gSWYgZGltZW5zaW9ucyBub3QgcHJvdmlkZWQsIHVzZSB0ZW1wb3JhcnkgdmFsdWVzIGFuZCBhdXRvLWRldGVjdCBvbiBmaXJzdCB1cGRhdGVcbiAgICBjb25zdCB3aWR0aCA9IG9wdGlvbnMud2lkdGggPz8gMTtcbiAgICBjb25zdCBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCA/PyAxO1xuXG4gICAgLy8gQ3JlYXRlIFRpbGluZ1Nwcml0ZSBhcyBjaGlsZFxuICAgIHRoaXMudGlsaW5nU3ByaXRlID0gbmV3IFBJWEkuVGlsaW5nU3ByaXRlKHtcbiAgICAgIHRleHR1cmU6IG9wdGlvbnMudGV4dHVyZSxcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIH0pO1xuXG4gICAgLy8gUG9zaXRpb24gVGlsaW5nU3ByaXRlIHRvIHN0YXJ0IGZyb20gb3JpZ2luICgwLCAwKSB0byBjb3ZlciB0aGUgdmlld3BvcnRcbiAgICB0aGlzLnRpbGluZ1Nwcml0ZS5wb3NpdGlvbi5zZXQoMCwgMCk7XG5cbiAgICB0aGlzLmFkZENoaWxkKHRoaXMudGlsaW5nU3ByaXRlKTtcblxuICAgIC8vIE1hcmsgaWYgd2UgbmVlZCB0byBhdXRvLWRldGVjdCBkaW1lbnNpb25zXG4gICAgdGhpcy5fYXV0b1NpemVkID0gIW9wdGlvbnMud2lkdGggJiYgIW9wdGlvbnMuaGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIEF1dG8tZGV0ZWN0IHJlbmRlcmVyIGRpbWVuc2lvbnMgZnJvbSB0aGUgc2NlbmUgaGllcmFyY2h5XG4gICAqL1xuICBwcml2YXRlIGF1dG9EZXRlY3REaW1lbnNpb25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYXV0b1NpemVkKSByZXR1cm47XG5cbiAgICAvLyBXYWxrIHVwIHBhcmVudCBjaGFpbiB0byBmaW5kIGEgbm9kZSB3aXRoIGEgcmVuZGVyZXJcbiAgICBsZXQgY3VycmVudDogYW55ID0gdGhpcy5wYXJlbnQ7XG4gICAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICAgIGlmIChjdXJyZW50LnJlbmRlcmVyKSB7XG4gICAgICAgIC8vIEZvdW5kIGEgcmVuZGVyZXIgKHVzdWFsbHkgb24gU2NlbmUpXG4gICAgICAgIHRoaXMucmVzaXplKGN1cnJlbnQucmVuZGVyZXIud2lkdGgsIGN1cnJlbnQucmVuZGVyZXIuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5fYXV0b1NpemVkID0gZmFsc2U7IC8vIE9ubHkgbmVlZCB0byBkbyB0aGlzIG9uY2VcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB1cGRhdGVQYXJhbGxheCB0byB1c2UgdGlsZVBvc2l0aW9uIGluc3RlYWQgb2YgY29udGFpbmVyIHBvc2l0aW9uLlxuICAgKiBUaGlzIHByb3ZpZGVzIHNlYW1sZXNzIGluZmluaXRlIHNjcm9sbGluZyB3aXRob3V0IHZpc2libGUgc2VhbXMuXG4gICAqXG4gICAqIFNpbmNlIHRoZSBQYXJhbGxheEJhY2tncm91bmQgY29udGFpbmVyIG5vdyBmb2xsb3dzIHRoZSBjYW1lcmEsIGxheWVycyBpbnNpZGVcbiAgICogc3RheSBhdCAoMCwwKSBhbmQgb25seSB1c2UgdGlsZVBvc2l0aW9uIGZvciB0aGUgcGFyYWxsYXggc2Nyb2xsaW5nIGVmZmVjdC5cbiAgICpcbiAgICogQ2FtZXJhIHNjYWxlIGlzIHVzZWQgdG8gcmVzaXplIHRoZSBUaWxpbmdTcHJpdGUgdG8gY292ZXIgdGhlIHZpZXdwb3J0IGF0IGRpZmZlcmVudCB6b29tIGxldmVscy5cbiAgICovXG4gIHVwZGF0ZVBhcmFsbGF4KFxuICAgIGNhbWVyYVBvczogUElYSS5Qb2ludCxcbiAgICBjYW1lcmFTY2FsZTogUElYSS5Qb2ludCxcbiAgICBiYWNrZ3JvdW5kT2Zmc2V0OiBQSVhJLlBvaW50XG4gICk6IHZvaWQge1xuICAgIC8vIEF1dG8tZGV0ZWN0IGRpbWVuc2lvbnMgb24gZmlyc3QgdXBkYXRlIGlmIG5vdCBtYW51YWxseSBzcGVjaWZpZWRcbiAgICB0aGlzLmF1dG9EZXRlY3REaW1lbnNpb25zKCk7XG4gICAgLy8gY29uc29sZS5sb2coJ3VwZGF0ZVBhcmFsbGF4JywgY2FtZXJhU2NhbGUpO1xuXG4gICAgLy8gR2V0IHJlbmRlcmVyIGRpbWVuc2lvbnMgdG8gdXNlIGFzIGJhc2Ugc2l6ZVxuICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5wYXJlbnQ/LnBhcmVudCBhcyBhbnk7IC8vIEdldCByZW5kZXJlciBmcm9tIHNjZW5lXG4gICAgaWYgKHJlbmRlcmVyPy5yZW5kZXJlcikge1xuICAgICAgY29uc3QgYmFzZVdpZHRoID0gcmVuZGVyZXIucmVuZGVyZXIud2lkdGg7XG4gICAgICBjb25zdCBiYXNlSGVpZ2h0ID0gcmVuZGVyZXIucmVuZGVyZXIuaGVpZ2h0O1xuXG4gICAgICAvLyBQYXJhbGxheEJhY2tncm91bmQgY291bnRlci1zY2FsZXMsIHNvIHdlJ3JlIGluIHNjcmVlbi1zcGFjZVxuICAgICAgLy8gSnVzdCBzZXQgdG8gcmVuZGVyZXIgc2l6ZSAtIG5vIHpvb20gYWRqdXN0bWVudCBuZWVkZWRcbiAgICAgIHRoaXMudGlsaW5nU3ByaXRlLndpZHRoID0gYmFzZVdpZHRoO1xuICAgICAgdGhpcy50aWxpbmdTcHJpdGUuaGVpZ2h0ID0gYmFzZUhlaWdodDtcblxuICAgICAgLy8gS2VlcCBzcHJpdGUgYXQgb3JpZ2luXG4gICAgICB0aGlzLnRpbGluZ1Nwcml0ZS5waXZvdC5zZXQoMCwgMCk7XG4gICAgICB0aGlzLnRpbGluZ1Nwcml0ZS5wb3NpdGlvbi5zZXQoMCwgMCk7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIGVmZmVjdGl2ZSBzY3JvbGwgb2Zmc2V0IGZvciB0aWxlUG9zaXRpb25cbiAgICBjb25zdCBzY3JvbGxYID0gKGNhbWVyYVBvcy54ICsgYmFja2dyb3VuZE9mZnNldC54KSAqIHRoaXMuc2Nyb2xsU2NhbGUueDtcbiAgICBjb25zdCBzY3JvbGxZID0gKGNhbWVyYVBvcy55ICsgYmFja2dyb3VuZE9mZnNldC55KSAqIHRoaXMuc2Nyb2xsU2NhbGUueTtcblxuICAgIC8vIEFwcGx5IHRvIHRpbGVQb3NpdGlvbiAod2l0aCBsYXllcidzIG93biBzY3JvbGxPZmZzZXQgZm9yIHBvc2l0aW9uaW5nKVxuICAgIHRoaXMudGlsaW5nU3ByaXRlLnRpbGVQb3NpdGlvbi54ID0gLXNjcm9sbFggKyB0aGlzLnNjcm9sbE9mZnNldC54O1xuICAgIHRoaXMudGlsaW5nU3ByaXRlLnRpbGVQb3NpdGlvbi55ID0gLXNjcm9sbFkgKyB0aGlzLnNjcm9sbE9mZnNldC55O1xuXG4gICAgLy8gTGF5ZXIgY29udGFpbmVyIHN0YXlzIGF0IG9yaWdpbiAtIHNjZW5lIHBpdm90IGhhbmRsZXMgem9vbSBhbmNob3JpbmdcbiAgICB0aGlzLnBvc2l0aW9uLnNldCgwLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgVGlsaW5nU3ByaXRlIGRpbWVuc2lvbnMgKGUuZy4sIG9uIHdpbmRvdyByZXNpemUpXG4gICAqL1xuICByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnRpbGluZ1Nwcml0ZS53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMudGlsaW5nU3ByaXRlLmhlaWdodCA9IGhlaWdodDtcbiAgfVxufVxuIiwiLyoqXG4gKiBQaHlzaWNzIG1vZHVsZSAtIFBsYW5jay5qcyBpbnRlZ3JhdGlvbiBmb3IgTU9YSVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbi8vIENvcmUgY2xhc3Nlc1xuZXhwb3J0IHsgUGh5c2ljc1dvcmxkIH0gZnJvbSAnLi9waHlzaWNzLXdvcmxkJztcbmV4cG9ydCB7IFBoeXNpY3NCb2R5TG9naWMgfSBmcm9tICcuL3BoeXNpY3MtYm9keS1sb2dpYyc7XG5leHBvcnQgeyBDb2xsaXNpb25SZWdpc3RyeSwgQ29sbGlzaW9uTWFuYWdlciB9IGZyb20gJy4vcGh5c2ljcy1jb2xsaXNpb24nO1xuZXhwb3J0IHsgUGh5c2ljc0RlYnVnUmVuZGVyZXIgfSBmcm9tICcuL3BoeXNpY3MtZGVidWctcmVuZGVyZXInO1xuXG4vLyBVdGlsaXRpZXNcbmV4cG9ydCB7XG4gIGFzUGh5c2ljc0VudGl0eSxcbiAgaGFzUGh5c2ljcyxcbiAgZ2V0UGh5c2ljc0JvZHksXG4gIGNyZWF0ZVNoYXBlRnJvbVNwcml0ZVxufSBmcm9tICcuL3BoeXNpY3MtdXRpbHMnO1xuXG4vLyBNYXRlcmlhbHNcbmV4cG9ydCB7IFBoeXNpY3NNYXRlcmlhbHMsIGFwcGx5TWF0ZXJpYWwgfSBmcm9tICcuL3BoeXNpY3MtbWF0ZXJpYWxzJztcblxuLy8gVHlwZXNcbmV4cG9ydCB0eXBlIHtcbiAgQm9keVR5cGUsXG4gIFN5bmNNb2RlLFxuICBTaGFwZVR5cGUsXG4gIENvbGxpc2lvblRhZyxcbiAgU2hhcGVDb25maWcsXG4gIFBoeXNpY3NXb3JsZE9wdGlvbnMsXG4gIFBoeXNpY3NCb2R5T3B0aW9ucyxcbiAgUGh5c2ljc0RlYnVnT3B0aW9ucyxcbiAgQ29sbGlzaW9uRXZlbnQsXG4gIFJheWNhc3RDYWxsYmFja1xufSBmcm9tICcuL3BoeXNpY3MtdHlwZXMnO1xuIiwiaW1wb3J0ICogYXMgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCAqIGFzIHBsYW5jayBmcm9tICdwbGFuY2snO1xuaW1wb3J0IHsgTG9naWMgfSBmcm9tICcuLi8uLi9tYWluL2xvZ2ljJztcbmltcG9ydCB0eXBlIHsgUGh5c2ljc1dvcmxkIH0gZnJvbSAnLi9waHlzaWNzLXdvcmxkJztcbmltcG9ydCB0eXBlIHsgUGh5c2ljc0JvZHlPcHRpb25zLCBCb2R5VHlwZSwgU2hhcGVUeXBlIH0gZnJvbSAnLi9waHlzaWNzLXR5cGVzJztcbmltcG9ydCB7IHBhcnNlR3JhcGhpY3NTaGFwZSB9IGZyb20gJy4vcGh5c2ljcy1ncmFwaGljcy1wYXJzZXInO1xuXG4vKipcbiAqIExvZ2ljIGNvbXBvbmVudCB0aGF0IHN5bmNzIGEgUElYSSBlbnRpdHkgd2l0aCBhIFBsYW5jay5qcyBwaHlzaWNzIGJvZHkuXG4gKiBIYW5kbGVzIHBvc2l0aW9uL3JvdGF0aW9uIHN5bmMsIGNvbGxpc2lvbiBmaWx0ZXJpbmcsIGFuZCBmb3JjZSBhcHBsaWNhdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIC8vIENyZWF0ZSBwaHlzaWNzIGJvZHkgZm9yIGEgc3ByaXRlXG4gKiBjb25zdCBzcHJpdGUgPSBhc0VudGl0eShuZXcgUElYSS5TcHJpdGUodGV4dHVyZSkpO1xuICogY29uc3QgYm9keSA9IG5ldyBQaHlzaWNzQm9keUxvZ2ljKHBoeXNpY3NXb3JsZCwge1xuICogICB0eXBlOiAnZHluYW1pYycsXG4gKiAgIGNvbGxpc2lvblRhZ3M6IFsncGxheWVyJ10sXG4gKiAgIGNvbGxpZGVzV2l0aDogWyd0ZXJyYWluJywgJ2VuZW15J10sXG4gKiAgIGRlbnNpdHk6IDEuMCxcbiAqICAgZnJpY3Rpb246IDAuM1xuICogfSk7XG4gKiBzcHJpdGUubW94aUVudGl0eS5hZGRMb2dpYyhib2R5KTtcbiAqXG4gKiAvLyBBcHBseSBmb3JjZXMgaW4gdXBkYXRlIGxvb3BcbiAqIGJvZHkuYXBwbHlJbXB1bHNlKG5ldyBQSVhJLlBvaW50KDEwMCwgMCkpO1xuICogYm9keS5zZXRWZWxvY2l0eShuZXcgUElYSS5Qb2ludCgwLCAtMjAwKSk7XG4gKlxuICogLy8gQ29sbGlzaW9uIGNhbGxiYWNrc1xuICogYm9keS5vbkNvbGxpc2lvbkJlZ2luID0gKG90aGVyLCBjb250YWN0KSA9PiBjb25zb2xlLmxvZygnaGl0IScpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBQaHlzaWNzQm9keUxvZ2ljIGV4dGVuZHMgTG9naWM8UElYSS5Db250YWluZXI+IHtcbiAgbmFtZSA9ICdQaHlzaWNzQm9keUxvZ2ljJztcblxuICAvKiogUGxhbmNrLmpzIGJvZHkgaW5zdGFuY2UuICovXG4gIHB1YmxpYyBib2R5ITogcGxhbmNrLkJvZHk7XG5cbiAgLyoqIFBhcmVudCBwaHlzaWNzIHdvcmxkLiAqL1xuICBwdWJsaWMgd29ybGQ6IFBoeXNpY3NXb3JsZDtcblxuICAvKiogQm9keSBjb25maWd1cmF0aW9uLiAqL1xuICBwdWJsaWMgb3B0aW9uczogUGh5c2ljc0JvZHlPcHRpb25zO1xuXG4gIC8qKiBDYWxsZWQgd2hlbiBjb2xsaXNpb24gYmVnaW5zLiAqL1xuICBwdWJsaWMgb25Db2xsaXNpb25CZWdpbj86IChvdGhlcjogUGh5c2ljc0JvZHlMb2dpYywgY29udGFjdDogcGxhbmNrLkNvbnRhY3QpID0+IHZvaWQ7XG5cbiAgLyoqIENhbGxlZCB3aGVuIGNvbGxpc2lvbiBlbmRzLiAqL1xuICBwdWJsaWMgb25Db2xsaXNpb25FbmQ/OiAob3RoZXI6IFBoeXNpY3NCb2R5TG9naWMsIGNvbnRhY3Q6IHBsYW5jay5Db250YWN0KSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKHdvcmxkOiBQaHlzaWNzV29ybGQsIG9wdGlvbnM6IFBoeXNpY3NCb2R5T3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgdHlwZTogJ2R5bmFtaWMnLFxuICAgICAgc3luY01vZGU6ICdwaHlzaWNzLWRyaXZlbicsXG4gICAgICBzeW5jUG9zaXRpb246IHRydWUsXG4gICAgICBzeW5jUm90YXRpb246IHRydWUsXG4gICAgICBkZW5zaXR5OiAxLjAsXG4gICAgICBmcmljdGlvbjogMC4zLFxuICAgICAgcmVzdGl0dXRpb246IDAuMCxcbiAgICAgIGZpeGVkUm90YXRpb246IGZhbHNlLFxuICAgICAgaXNTZW5zb3I6IGZhbHNlLFxuICAgICAgYnVsbGV0OiBmYWxzZSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCBDcmVhdGVzIHBoeXNpY3MgYm9keSBhbmQgcmVnaXN0ZXJzIHdpdGggd29ybGQuICovXG4gIGluaXQoZW50aXR5OiBQSVhJLkNvbnRhaW5lciwgcmVuZGVyZXI/OiBQSVhJLlJlbmRlcmVyKTogdm9pZCB7XG4gICAgLy8gQ3JlYXRlIHRoZSBwaHlzaWNzIGJvZHlcbiAgICB0aGlzLmNyZWF0ZVBoeXNpY3NCb2R5KGVudGl0eSk7XG5cbiAgICAvLyBTZXQgdXNlciBkYXRhIHRvIHJlZmVyZW5jZSB0aGlzIGxvZ2ljIGNvbXBvbmVudFxuICAgIHRoaXMuYm9keS5zZXRVc2VyRGF0YSh0aGlzKTtcblxuICAgIC8vIFJlZ2lzdGVyIHdpdGggcGh5c2ljcyB3b3JsZFxuICAgIHRoaXMud29ybGQucmVnaXN0ZXJCb2R5KHRoaXMuYm9keSwgdGhpcyk7XG4gIH1cblxuICAvKiogQGludGVybmFsIFN5bmNzIHBoeXNpY3Mg4oaUIHNwcml0ZSBiYXNlZCBvbiBzeW5jTW9kZS4gKi9cbiAgdXBkYXRlKGVudGl0eTogUElYSS5Db250YWluZXIsIGRlbHRhVGltZT86IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5ib2R5KSByZXR1cm47XG5cbiAgICAvLyBTeW5jIGJhc2VkIG9uIG1vZGVcbiAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucy5zeW5jTW9kZSkge1xuICAgICAgY2FzZSAncGh5c2ljcy1kcml2ZW4nOlxuICAgICAgICB0aGlzLnN5bmNGcm9tUGh5c2ljcyhlbnRpdHkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Nwcml0ZS1kcml2ZW4nOlxuICAgICAgICB0aGlzLnN5bmNUb1BoeXNpY3MoZW50aXR5KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdtYW51YWwnOlxuICAgICAgICAvLyBVc2VyIGhhbmRsZXMgc3luYyBtYW51YWxseVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvKiogUmVtb3ZlcyBib2R5IGZyb20gcGh5c2ljcyB3b3JsZC4gKi9cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5ib2R5KSB7XG4gICAgICB0aGlzLndvcmxkLmRlc3Ryb3lCb2R5KHRoaXMuYm9keSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCBVcGRhdGVzIHNwcml0ZSBwb3NpdGlvbi9yb3RhdGlvbiBmcm9tIHBoeXNpY3MuICovXG4gIHByaXZhdGUgc3luY0Zyb21QaHlzaWNzKGVudGl0eTogUElYSS5Db250YWluZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuYm9keSkgcmV0dXJuO1xuXG4gICAgY29uc3QgcG9zID0gdGhpcy5ib2R5LmdldFBvc2l0aW9uKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnN5bmNQb3NpdGlvbikge1xuICAgICAgZW50aXR5LnggPSB0aGlzLndvcmxkLnRvUGl4ZWxzKHBvcy54KTtcbiAgICAgIGVudGl0eS55ID0gdGhpcy53b3JsZC50b1BpeGVscyhwb3MueSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zeW5jUm90YXRpb24pIHtcbiAgICAgIGVudGl0eS5yb3RhdGlvbiA9IHRoaXMuYm9keS5nZXRBbmdsZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBVcGRhdGVzIHBoeXNpY3MgYm9keSBmcm9tIHNwcml0ZSBwb3NpdGlvbi9yb3RhdGlvbi4gKi9cbiAgc3luY1RvUGh5c2ljcyhlbnRpdHk6IFBJWEkuQ29udGFpbmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJvZHkpIHJldHVybjtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc3luY1Bvc2l0aW9uKSB7XG4gICAgICBjb25zdCB4ID0gdGhpcy53b3JsZC50b1BoeXNpY3MoZW50aXR5LngpO1xuICAgICAgY29uc3QgeSA9IHRoaXMud29ybGQudG9QaHlzaWNzKGVudGl0eS55KTtcbiAgICAgIHRoaXMuYm9keS5zZXRQb3NpdGlvbihwbGFuY2suVmVjMih4LCB5KSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zeW5jUm90YXRpb24pIHtcbiAgICAgIHRoaXMuYm9keS5zZXRBbmdsZShlbnRpdHkucm90YXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBjcmVhdGVQaHlzaWNzQm9keShlbnRpdHk6IFBJWEkuQ29udGFpbmVyKTogdm9pZCB7XG4gICAgLy8gRGV0ZXJtaW5lIGJvZHkgdHlwZVxuICAgIGxldCBib2R5VHlwZTogcGxhbmNrLkJvZHlUeXBlO1xuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3N0YXRpYyc6XG4gICAgICAgIGJvZHlUeXBlID0gJ3N0YXRpYyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAna2luZW1hdGljJzpcbiAgICAgICAgYm9keVR5cGUgPSAna2luZW1hdGljJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkeW5hbWljJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJvZHlUeXBlID0gJ2R5bmFtaWMnO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYm9keSBkZWZpbml0aW9uXG4gICAgY29uc3QgYm9keURlZjogcGxhbmNrLkJvZHlEZWYgPSB7XG4gICAgICB0eXBlOiBib2R5VHlwZSxcbiAgICAgIHBvc2l0aW9uOiB0aGlzLm9wdGlvbnMucG9zaXRpb25cbiAgICAgICAgPyB0aGlzLndvcmxkLnRvUGh5c2ljc1BvaW50KHRoaXMub3B0aW9ucy5wb3NpdGlvbilcbiAgICAgICAgOiBwbGFuY2suVmVjMih0aGlzLndvcmxkLnRvUGh5c2ljcyhlbnRpdHkueCksIHRoaXMud29ybGQudG9QaHlzaWNzKGVudGl0eS55KSksXG4gICAgICBhbmdsZTogdGhpcy5vcHRpb25zLnJvdGF0aW9uID8/IGVudGl0eS5yb3RhdGlvbixcbiAgICAgIGxpbmVhclZlbG9jaXR5OiB0aGlzLm9wdGlvbnMubGluZWFyVmVsb2NpdHlcbiAgICAgICAgPyB0aGlzLndvcmxkLnRvUGh5c2ljc1BvaW50KHRoaXMub3B0aW9ucy5saW5lYXJWZWxvY2l0eSlcbiAgICAgICAgOiBwbGFuY2suVmVjMigwLCAwKSxcbiAgICAgIGFuZ3VsYXJWZWxvY2l0eTogdGhpcy5vcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSA/PyAwLFxuICAgICAgZml4ZWRSb3RhdGlvbjogdGhpcy5vcHRpb25zLmZpeGVkUm90YXRpb24gPz8gZmFsc2UsXG4gICAgICBidWxsZXQ6IHRoaXMub3B0aW9ucy5idWxsZXQgPz8gZmFsc2VcbiAgICB9O1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBib2R5XG4gICAgdGhpcy5ib2R5ID0gdGhpcy53b3JsZC5jcmVhdGVCb2R5KGJvZHlEZWYpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBzaGFwZSBhbmQgZml4dHVyZVxuICAgIHRoaXMuY3JlYXRlRml4dHVyZShlbnRpdHkpO1xuXG4gICAgLy8gU2V0IGluaXRpYWwgdmVsb2NpdGllcyBpZiBwcm92aWRlZFxuICAgIGlmICh0aGlzLm9wdGlvbnMubGluZWFyVmVsb2NpdHkpIHtcbiAgICAgIHRoaXMuc2V0VmVsb2NpdHkodGhpcy5vcHRpb25zLmxpbmVhclZlbG9jaXR5KTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpIHtcbiAgICAgIHRoaXMuc2V0QW5ndWxhclZlbG9jaXR5KHRoaXMub3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBjcmVhdGVGaXh0dXJlKGVudGl0eTogUElYSS5Db250YWluZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzaGFwZSA9IHRoaXMuY3JlYXRlU2hhcGUoZW50aXR5KTtcblxuICAgIC8vIFNldHVwIGNvbGxpc2lvbiBmaWx0ZXJpbmdcbiAgICBjb25zdCBjYXRlZ29yeUJpdHMgPSB0aGlzLm9wdGlvbnMuY29sbGlzaW9uVGFnc1xuICAgICAgPyB0aGlzLndvcmxkLmNvbGxpc2lvblJlZ2lzdHJ5LnRhZ3NUb0JpdHModGhpcy5vcHRpb25zLmNvbGxpc2lvblRhZ3MpXG4gICAgICA6IHRoaXMud29ybGQuY29sbGlzaW9uUmVnaXN0cnkuZ2V0Qml0KCdkZWZhdWx0Jyk7XG5cbiAgICBjb25zdCBtYXNrQml0cyA9IHRoaXMub3B0aW9ucy5jb2xsaWRlc1dpdGhcbiAgICAgID8gdGhpcy53b3JsZC5jb2xsaXNpb25SZWdpc3RyeS50YWdzVG9CaXRzKHRoaXMub3B0aW9ucy5jb2xsaWRlc1dpdGgpXG4gICAgICA6IDB4RkZGRjsgLy8gQ29sbGlkZSB3aXRoIGV2ZXJ5dGhpbmcgYnkgZGVmYXVsdFxuXG4gICAgY29uc3QgZ3JvdXBJbmRleCA9IHRoaXMub3B0aW9ucy5jb2xsaXNpb25Hcm91cCA/PyAwO1xuXG4gICAgLy8gQ3JlYXRlIGZpeHR1cmVcbiAgICB0aGlzLmJvZHkuY3JlYXRlRml4dHVyZSh7XG4gICAgICBzaGFwZTogc2hhcGUsXG4gICAgICBkZW5zaXR5OiB0aGlzLm9wdGlvbnMuZGVuc2l0eSA/PyAxLjAsXG4gICAgICBmcmljdGlvbjogdGhpcy5vcHRpb25zLmZyaWN0aW9uID8/IDAuMyxcbiAgICAgIHJlc3RpdHV0aW9uOiB0aGlzLm9wdGlvbnMucmVzdGl0dXRpb24gPz8gMC4wLFxuICAgICAgaXNTZW5zb3I6IHRoaXMub3B0aW9ucy5pc1NlbnNvciA/PyBmYWxzZSxcbiAgICAgIGZpbHRlckNhdGVnb3J5Qml0czogY2F0ZWdvcnlCaXRzLFxuICAgICAgZmlsdGVyTWFza0JpdHM6IG1hc2tCaXRzLFxuICAgICAgZmlsdGVyR3JvdXBJbmRleDogZ3JvdXBJbmRleFxuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCBFeHRyYWN0cyBzaGFwZSBmcm9tIEdyYXBoaWNzLCBjb2xsaXNpb25TaGFwZSwgb3IgbGVnYWN5IG9wdGlvbnMuICovXG4gIHByaXZhdGUgY3JlYXRlU2hhcGUoZW50aXR5OiBQSVhJLkNvbnRhaW5lcik6IHBsYW5jay5TaGFwZSB7XG4gICAgLy8gUHJpb3JpdHkgMTogRXhwbGljaXQgY29sbGlzaW9uIHNoYXBlIHByb3ZpZGVkXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb2xsaXNpb25TaGFwZSkge1xuICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VHcmFwaGljc1NoYXBlKHRoaXMub3B0aW9ucy5jb2xsaXNpb25TaGFwZSwgdGhpcy53b3JsZCk7XG4gICAgICByZXR1cm4gcGFyc2VkLnNoYXBlO1xuICAgIH1cblxuICAgIC8vIFByaW9yaXR5IDI6IEVudGl0eSBpdHNlbGYgaXMgR3JhcGhpY3Mg4oaSIGV4dHJhY3QgZnJvbSBpdFxuICAgIGlmIChlbnRpdHkgaW5zdGFuY2VvZiBQSVhJLkdyYXBoaWNzKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUdyYXBoaWNzU2hhcGUoZW50aXR5LCB0aGlzLndvcmxkKTtcbiAgICAgIHJldHVybiBwYXJzZWQuc2hhcGU7XG4gICAgfVxuXG4gICAgLy8gUHJpb3JpdHkgMzogTGVnYWN5IHNoYXBlIHByb3BlcnRpZXMgKGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zaGFwZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU2hhcGVGcm9tVHlwZSh0aGlzLm9wdGlvbnMuc2hhcGUpO1xuICAgIH1cblxuICAgIC8vIE5vIGNvbGxpc2lvbiBzaGFwZSBkZWZpbmVkIC0gZXJyb3IgZm9yIG5vbi1HcmFwaGljcyBlbnRpdGllc1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdDb2xsaXNpb24gc2hhcGUgcmVxdWlyZWQgZm9yIG5vbi1HcmFwaGljcyBlbnRpdGllcy4gJyArXG4gICAgICAnRWl0aGVyIHByb3ZpZGUgYSBHcmFwaGljcyBlbnRpdHksIG9yIHNwZWNpZnkgb3B0aW9ucy5jb2xsaXNpb25TaGFwZSwgJyArXG4gICAgICAnb3IgdXNlIGxlZ2FjeSBvcHRpb25zLnNoYXBlIHdpdGggZGltZW5zaW9ucy4nXG4gICAgKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBjcmVhdGVTaGFwZUZyb21UeXBlKHNoYXBlVHlwZTogU2hhcGVUeXBlKTogcGxhbmNrLlNoYXBlIHtcbiAgICBzd2l0Y2ggKHNoYXBlVHlwZSkge1xuICAgICAgY2FzZSAnY2lyY2xlJzpcbiAgICAgICAgY29uc3QgcmFkaXVzID0gdGhpcy5vcHRpb25zLnJhZGl1cyA/PyAyNTtcbiAgICAgICAgcmV0dXJuIHBsYW5jay5DaXJjbGUodGhpcy53b3JsZC50b1BoeXNpY3MocmFkaXVzKSk7XG5cbiAgICAgIGNhc2UgJ3JlY3RhbmdsZSc6XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5vcHRpb25zLndpZHRoID8/IDUwO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0ID8/IDUwO1xuICAgICAgICByZXR1cm4gcGxhbmNrLkJveChcbiAgICAgICAgICB0aGlzLndvcmxkLnRvUGh5c2ljcyh3aWR0aCAvIDIpLFxuICAgICAgICAgIHRoaXMud29ybGQudG9QaHlzaWNzKGhlaWdodCAvIDIpXG4gICAgICAgICk7XG5cbiAgICAgIGNhc2UgJ3BvbHlnb24nOlxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy52ZXJ0aWNlcyB8fCB0aGlzLm9wdGlvbnMudmVydGljZXMubGVuZ3RoIDwgMykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUG9seWdvbiBzaGFwZSByZXF1aXJlcyBhdCBsZWFzdCAzIHZlcnRpY2VzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLm9wdGlvbnMudmVydGljZXMubWFwKHYgPT5cbiAgICAgICAgICBwbGFuY2suVmVjMih0aGlzLndvcmxkLnRvUGh5c2ljcyh2LngpLCB0aGlzLndvcmxkLnRvUGh5c2ljcyh2LnkpKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcGxhbmNrLlBvbHlnb24odmVydGljZXMpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc2hhcGUgdHlwZTogJHtzaGFwZVR5cGV9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCBGYWxsYmFjazogY3JlYXRlcyBib3ggZnJvbSBlbnRpdHkgYm91bmRzLiAqL1xuICBwcml2YXRlIGF1dG9EZXRlY3RTaGFwZShlbnRpdHk6IFBJWEkuQ29udGFpbmVyKTogcGxhbmNrLlNoYXBlIHtcbiAgICAvLyBGb3Igc3ByaXRlcywgdXNlIHRleHR1cmUgYm91bmRzXG4gICAgY29uc3QgYm91bmRzID0gZW50aXR5LmdldExvY2FsQm91bmRzKCk7XG5cbiAgICAvLyBEZWZhdWx0IHRvIHJlY3RhbmdsZVxuICAgIHJldHVybiBwbGFuY2suQm94KFxuICAgICAgdGhpcy53b3JsZC50b1BoeXNpY3MoYm91bmRzLndpZHRoIC8gMiksXG4gICAgICB0aGlzLndvcmxkLnRvUGh5c2ljcyhib3VuZHMuaGVpZ2h0IC8gMilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGNvbnRpbnVvdXMgZm9yY2UgYXQgYSBwb2ludC4gRm9yY2UgaXMgaW4gcGl4ZWxzL3NlY8KyLlxuICAgKiBAcGFyYW0gZm9yY2UgLSBGb3JjZSB2ZWN0b3IgaW4gcGl4ZWxzXG4gICAqIEBwYXJhbSBwb2ludCAtIEFwcGxpY2F0aW9uIHBvaW50IChkZWZhdWx0cyB0byBjZW50ZXIgb2YgbWFzcylcbiAgICovXG4gIGFwcGx5Rm9yY2UoZm9yY2U6IFBJWEkuUG9pbnQsIHBvaW50PzogUElYSS5Qb2ludCk6IHZvaWQge1xuICAgIGNvbnN0IGZvcmNlVmVjID0gdGhpcy53b3JsZC50b1BoeXNpY3NQb2ludChmb3JjZSk7XG4gICAgY29uc3QgcG9pbnRWZWMgPSBwb2ludFxuICAgICAgPyB0aGlzLndvcmxkLnRvUGh5c2ljc1BvaW50KHBvaW50KVxuICAgICAgOiB0aGlzLmJvZHkuZ2V0V29ybGRDZW50ZXIoKTtcbiAgICB0aGlzLmJvZHkuYXBwbHlGb3JjZShmb3JjZVZlYywgcG9pbnRWZWMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGluc3RhbnQgaW1wdWxzZSBhdCBhIHBvaW50LiBHb29kIGZvciBqdW1wcywgZXhwbG9zaW9ucy5cbiAgICogQHBhcmFtIGltcHVsc2UgLSBJbXB1bHNlIHZlY3RvciBpbiBwaXhlbHNcbiAgICogQHBhcmFtIHBvaW50IC0gQXBwbGljYXRpb24gcG9pbnQgKGRlZmF1bHRzIHRvIGNlbnRlciBvZiBtYXNzKVxuICAgKi9cbiAgYXBwbHlJbXB1bHNlKGltcHVsc2U6IFBJWEkuUG9pbnQsIHBvaW50PzogUElYSS5Qb2ludCk6IHZvaWQge1xuICAgIGNvbnN0IGltcHVsc2VWZWMgPSB0aGlzLndvcmxkLnRvUGh5c2ljc1BvaW50KGltcHVsc2UpO1xuICAgIGNvbnN0IHBvaW50VmVjID0gcG9pbnRcbiAgICAgID8gdGhpcy53b3JsZC50b1BoeXNpY3NQb2ludChwb2ludClcbiAgICAgIDogdGhpcy5ib2R5LmdldFdvcmxkQ2VudGVyKCk7XG4gICAgdGhpcy5ib2R5LmFwcGx5TGluZWFySW1wdWxzZShpbXB1bHNlVmVjLCBwb2ludFZlYyk7XG4gIH1cblxuICAvKiogQXBwbHkgcm90YXRpb25hbCB0b3JxdWUuICovXG4gIGFwcGx5VG9ycXVlKHRvcnF1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5ib2R5LmFwcGx5VG9ycXVlKHRvcnF1ZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGxpbmVhciB2ZWxvY2l0eSBkaXJlY3RseS5cbiAgICogQHBhcmFtIHZlbG9jaXR5IC0gVmVsb2NpdHkgaW4gcGl4ZWxzL3NlY1xuICAgKi9cbiAgc2V0VmVsb2NpdHkodmVsb2NpdHk6IFBJWEkuUG9pbnQpOiB2b2lkIHtcbiAgICBjb25zdCB2ZWxvY2l0eVZlYyA9IHRoaXMud29ybGQudG9QaHlzaWNzUG9pbnQodmVsb2NpdHkpO1xuICAgIHRoaXMuYm9keS5zZXRMaW5lYXJWZWxvY2l0eSh2ZWxvY2l0eVZlYyk7XG4gIH1cblxuICAvKiogU2V0IHJvdGF0aW9uIHNwZWVkIChyYWRpYW5zL3NlYykuICovXG4gIHNldEFuZ3VsYXJWZWxvY2l0eShvbWVnYTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5ib2R5LnNldEFuZ3VsYXJWZWxvY2l0eShvbWVnYSk7XG4gIH1cblxuICAvKiogR2V0IGN1cnJlbnQgdmVsb2NpdHkgKHBpeGVscy9zZWMpLiAqL1xuICBnZXRWZWxvY2l0eSgpOiBQSVhJLlBvaW50IHtcbiAgICBjb25zdCB2ZWwgPSB0aGlzLmJvZHkuZ2V0TGluZWFyVmVsb2NpdHkoKTtcbiAgICByZXR1cm4gdGhpcy53b3JsZC50b1BpeGVsc1BvaW50KHZlbCk7XG4gIH1cblxuICAvKiogR2V0IHJvdGF0aW9uIHNwZWVkIChyYWRpYW5zL3NlYykuICovXG4gIGdldEFuZ3VsYXJWZWxvY2l0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmJvZHkuZ2V0QW5ndWxhclZlbG9jaXR5KCk7XG4gIH1cblxuICAvKiogR2V0IGJvZHkgbWFzcyAoa2cgaW4gcGh5c2ljcyB1bml0cykuICovXG4gIGdldE1hc3MoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5ib2R5LmdldE1hc3MoKTtcbiAgfVxuXG4gIC8qKiBUcnVlIGlmIGJvZHkgaXMgYWN0aXZlIChub3Qgc2xlZXBpbmcpLiAqL1xuICBpc0F3YWtlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmJvZHkuaXNBd2FrZSgpO1xuICB9XG5cbiAgLyoqIFRydWUgaWYgYm9keSBpcyBzbGVlcGluZyAoaW5hY3RpdmUpLiAqL1xuICBpc1NsZWVwaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5ib2R5LmlzQXdha2UoKTtcbiAgfVxuXG4gIC8qKiBXYWtlIHVwIG9yIHB1dCBib2R5IHRvIHNsZWVwLiAqL1xuICBzZXRBd2FrZShhd2FrZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuYm9keS5zZXRBd2FrZShhd2FrZSk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgKiBhcyBwbGFuY2sgZnJvbSAncGxhbmNrJztcbmltcG9ydCB0eXBlIHsgQ29sbGlzaW9uVGFnLCBDb2xsaXNpb25FdmVudCB9IGZyb20gJy4vcGh5c2ljcy10eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFBoeXNpY3NXb3JsZCB9IGZyb20gJy4vcGh5c2ljcy13b3JsZCc7XG5cbi8qKlxuICogVGFnLXRvLWJpdG1hc2sgY29udmVydGVyIGZvciBjb2xsaXNpb24gZmlsdGVyaW5nLlxuICogQXV0by1yZWdpc3RlcnMgdGFncyBvbiBmaXJzdCB1c2UuIE1heCAxNiB1bmlxdWUgdGFncy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIC8vIFRhZ3MgYXJlIGF1dG8tcmVnaXN0ZXJlZCwgbm8gY29uZmlnIG5lZWRlZFxuICogY29uc3QgYml0cyA9IHJlZ2lzdHJ5LnRhZ3NUb0JpdHMoWydwbGF5ZXInLCAnZW5lbXknXSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENvbGxpc2lvblJlZ2lzdHJ5IHtcbiAgcHJpdmF0ZSB0YWdUb0JpdDogTWFwPENvbGxpc2lvblRhZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBiaXRUb1RhZzogTWFwPG51bWJlciwgQ29sbGlzaW9uVGFnPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBuZXh0Qml0OiBudW1iZXIgPSAxO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFByZS1yZWdpc3RlciAnZGVmYXVsdCcgdGFnXG4gICAgdGhpcy5yZWdpc3RlcignZGVmYXVsdCcpO1xuICB9XG5cbiAgLyoqIFJlZ2lzdGVyIHRhZyBtYW51YWxseS4gQ2FsbGVkIGF1dG9tYXRpY2FsbHkgYnkgZ2V0Qml0KCkuICovXG4gIHJlZ2lzdGVyKHRhZzogQ29sbGlzaW9uVGFnKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGFnVG9CaXQuaGFzKHRhZykpIHJldHVybjtcblxuICAgIGlmICh0aGlzLm5leHRCaXQgPiAweDgwMDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWF4aW11bSBjb2xsaXNpb24gdGFncyByZWFjaGVkICgxNiB0YWdzKScpO1xuICAgIH1cblxuICAgIHRoaXMudGFnVG9CaXQuc2V0KHRhZywgdGhpcy5uZXh0Qml0KTtcbiAgICB0aGlzLmJpdFRvVGFnLnNldCh0aGlzLm5leHRCaXQsIHRhZyk7XG4gICAgdGhpcy5uZXh0Qml0IDw8PSAxO1xuICB9XG5cbiAgLyoqIEdldCBiaXRtYXNrIGZvciB0YWcuIEF1dG8tcmVnaXN0ZXJzIG5ldyB0YWdzLiAqL1xuICBnZXRCaXQodGFnOiBDb2xsaXNpb25UYWcpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy50YWdUb0JpdC5oYXModGFnKSkge1xuICAgICAgdGhpcy5yZWdpc3Rlcih0YWcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50YWdUb0JpdC5nZXQodGFnKSE7XG4gIH1cblxuICAvKiogUmV2ZXJzZSBsb29rdXA6IGJpdCDihpIgdGFnLiAqL1xuICBnZXRUYWcoYml0OiBudW1iZXIpOiBDb2xsaXNpb25UYWcgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmJpdFRvVGFnLmdldChiaXQpO1xuICB9XG5cbiAgLyoqIENvbnZlcnQgWydwbGF5ZXInLCAnZW5lbXknXSDihpIgY29tYmluZWQgYml0bWFzay4gKi9cbiAgdGFnc1RvQml0cyh0YWdzOiBDb2xsaXNpb25UYWdbXSk6IG51bWJlciB7XG4gICAgaWYgKCF0YWdzIHx8IHRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRCaXQoJ2RlZmF1bHQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhZ3MucmVkdWNlKChiaXRzLCB0YWcpID0+IGJpdHMgfCB0aGlzLmdldEJpdCh0YWcpLCAwKTtcbiAgfVxuXG4gIC8qKiBDb252ZXJ0IGJpdG1hc2sg4oaSIHRhZyBhcnJheS4gKi9cbiAgYml0c1RvVGFncyhiaXRzOiBudW1iZXIpOiBDb2xsaXNpb25UYWdbXSB7XG4gICAgY29uc3QgdGFnczogQ29sbGlzaW9uVGFnW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtiaXQsIHRhZ10gb2YgdGhpcy5iaXRUb1RhZykge1xuICAgICAgaWYgKGJpdHMgJiBiaXQpIHtcbiAgICAgICAgdGFncy5wdXNoKHRhZyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YWdzO1xuICB9XG59XG5cbi8qKiBAaW50ZXJuYWwgUGh5c2ljcyBib2R5IHVzZXIgZGF0YSBzdHJ1Y3R1cmUuICovXG5pbnRlcmZhY2UgUGh5c2ljc0JvZHlVc2VyRGF0YSB7XG4gIG9wdGlvbnM6IHtcbiAgICBjb2xsaXNpb25UYWdzPzogQ29sbGlzaW9uVGFnW107XG4gIH07XG4gIG9uQ29sbGlzaW9uQmVnaW4/OiAob3RoZXI6IFBoeXNpY3NCb2R5VXNlckRhdGEsIGNvbnRhY3Q6IHBsYW5jay5Db250YWN0KSA9PiB2b2lkO1xuICBvbkNvbGxpc2lvbkVuZD86IChvdGhlcjogUGh5c2ljc0JvZHlVc2VyRGF0YSwgY29udGFjdDogcGxhbmNrLkNvbnRhY3QpID0+IHZvaWQ7XG59XG5cbi8qKiBAaW50ZXJuYWwgVHlwZSBndWFyZCBmb3IgYm9keSB1c2VyIGRhdGEuICovXG5mdW5jdGlvbiBpc1BoeXNpY3NCb2R5VXNlckRhdGEob2JqOiB1bmtub3duKTogb2JqIGlzIFBoeXNpY3NCb2R5VXNlckRhdGEge1xuICByZXR1cm4gKFxuICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXG4gICAgJ29wdGlvbnMnIGluIG9iaiAmJlxuICAgIHR5cGVvZiAob2JqIGFzIGFueSkub3B0aW9ucyA9PT0gJ29iamVjdCdcbiAgKTtcbn1cblxuLyoqXG4gKiBNYW5hZ2VzIHRhZy1iYXNlZCBjb2xsaXNpb24gY2FsbGJhY2tzIGJldHdlZW4gcGh5c2ljcyBib2RpZXMuXG4gKiBSZWdpc3RlciBjYWxsYmFja3MgZm9yIHNwZWNpZmljIHRhZyBwYWlycyB0byBoYW5kbGUgY29sbGlzaW9ucy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIC8vIFJlZ2lzdGVyIGNvbGxpc2lvbiBoYW5kbGVyXG4gKiBwaHlzaWNzV29ybGQuY29sbGlzaW9uTWFuYWdlci5vbkNvbGxpc2lvbigncGxheWVyJywgJ2VuZW15JywgKGV2ZW50KSA9PiB7XG4gKiAgIGNvbnNvbGUubG9nKCdQbGF5ZXIgaGl0IGVuZW15IScpO1xuICogICBjb25zdCBwbGF5ZXJCb2R5ID0gZXZlbnQuYm9keUE7XG4gKiAgIGNvbnN0IGVuZW15Qm9keSA9IGV2ZW50LmJvZHlCO1xuICogfSk7XG4gKlxuICogLy8gTXVsdGlwbGUgdGFnIGNvbWJpbmF0aW9uc1xuICogcGh5c2ljc1dvcmxkLmNvbGxpc2lvbk1hbmFnZXIub25Db2xsaXNpb24oJ3Byb2plY3RpbGUnLCAnZW5lbXknLCAoZSkgPT4ge1xuICogICBlLmJvZHlCLmRlc3Ryb3koKTsgLy8gRGVzdHJveSBlbmVteVxuICogfSk7XG4gKlxuICogLy8gUmVtb3ZlIGNhbGxiYWNrXG4gKiBwaHlzaWNzV29ybGQuY29sbGlzaW9uTWFuYWdlci5vZmZDb2xsaXNpb24oJ3BsYXllcicsICdlbmVteScsIGhhbmRsZXIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDb2xsaXNpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSB3b3JsZDogUGh5c2ljc1dvcmxkO1xuICBwcml2YXRlIHJlZ2lzdHJ5OiBDb2xsaXNpb25SZWdpc3RyeTtcbiAgcHJpdmF0ZSBjYWxsYmFja3M6IE1hcDxzdHJpbmcsIFNldDwoZXZlbnQ6IENvbGxpc2lvbkV2ZW50KSA9PiB2b2lkPj4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3Iod29ybGQ6IFBoeXNpY3NXb3JsZCwgcmVnaXN0cnk6IENvbGxpc2lvblJlZ2lzdHJ5KSB7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICAgIHRoaXMucmVnaXN0cnkgPSByZWdpc3RyeTtcbiAgICB0aGlzLnNldHVwTGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIHRoaXMud29ybGQud29ybGQub24oJ2JlZ2luLWNvbnRhY3QnLCAoY29udGFjdDogcGxhbmNrLkNvbnRhY3QpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlQmVnaW5Db250YWN0KGNvbnRhY3QpO1xuICAgIH0pO1xuXG4gICAgdGhpcy53b3JsZC53b3JsZC5vbignZW5kLWNvbnRhY3QnLCAoY29udGFjdDogcGxhbmNrLkNvbnRhY3QpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlRW5kQ29udGFjdChjb250YWN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBSZWdpc3RlciBjYWxsYmFjayBmb3IgY29sbGlzaW9ucyBiZXR3ZWVuIHR3byB0YWdzLiAqL1xuICBvbkNvbGxpc2lvbihcbiAgICB0YWdBOiBDb2xsaXNpb25UYWcsXG4gICAgdGFnQjogQ29sbGlzaW9uVGFnLFxuICAgIGNhbGxiYWNrOiAoZXZlbnQ6IENvbGxpc2lvbkV2ZW50KSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGtleSA9IHRoaXMubWFrZUtleSh0YWdBLCB0YWdCKTtcbiAgICBpZiAoIXRoaXMuY2FsbGJhY2tzLmhhcyhrZXkpKSB7XG4gICAgICB0aGlzLmNhbGxiYWNrcy5zZXQoa2V5LCBuZXcgU2V0KCkpO1xuICAgIH1cbiAgICB0aGlzLmNhbGxiYWNrcy5nZXQoa2V5KSEuYWRkKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBSZW1vdmUgY29sbGlzaW9uIGNhbGxiYWNrLiAqL1xuICBvZmZDb2xsaXNpb24oXG4gICAgdGFnQTogQ29sbGlzaW9uVGFnLFxuICAgIHRhZ0I6IENvbGxpc2lvblRhZyxcbiAgICBjYWxsYmFjazogKGV2ZW50OiBDb2xsaXNpb25FdmVudCkgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBrZXkgPSB0aGlzLm1ha2VLZXkodGFnQSwgdGFnQik7XG4gICAgdGhpcy5jYWxsYmFja3MuZ2V0KGtleSk/LmRlbGV0ZShjYWxsYmFjayk7XG4gIH1cblxuICBwcml2YXRlIG1ha2VLZXkodGFnQTogQ29sbGlzaW9uVGFnLCB0YWdCOiBDb2xsaXNpb25UYWcpOiBzdHJpbmcge1xuICAgIC8vIFNvcnQgdGFncyB0byBlbnN1cmUgY29uc2lzdGVudCBrZXkgcmVnYXJkbGVzcyBvZiBvcmRlclxuICAgIHJldHVybiB0YWdBIDwgdGFnQiA/IGAke3RhZ0F9OiR7dGFnQn1gIDogYCR7dGFnQn06JHt0YWdBfWA7XG4gIH1cblxuICAvLyBUcmlnZ2VyIGNhbGxiYWNrc1xuICBwcml2YXRlIGhhbmRsZUJlZ2luQ29udGFjdChjb250YWN0OiBwbGFuY2suQ29udGFjdCk6IHZvaWQge1xuICAgIGNvbnN0IGJvZHlBID0gY29udGFjdC5nZXRGaXh0dXJlQSgpLmdldEJvZHkoKS5nZXRVc2VyRGF0YSgpO1xuICAgIGNvbnN0IGJvZHlCID0gY29udGFjdC5nZXRGaXh0dXJlQigpLmdldEJvZHkoKS5nZXRVc2VyRGF0YSgpO1xuXG4gICAgaWYgKCFpc1BoeXNpY3NCb2R5VXNlckRhdGEoYm9keUEpIHx8ICFpc1BoeXNpY3NCb2R5VXNlckRhdGEoYm9keUIpKSByZXR1cm47XG5cbiAgICAvLyBDYWxsIGVudGl0eS1sZXZlbCBjYWxsYmFja3NcbiAgICBib2R5QS5vbkNvbGxpc2lvbkJlZ2luPy4oYm9keUIsIGNvbnRhY3QpO1xuICAgIGJvZHlCLm9uQ29sbGlzaW9uQmVnaW4/Lihib2R5QSwgY29udGFjdCk7XG5cbiAgICAvLyBDYWxsIGdsb2JhbCB0YWctYmFzZWQgY2FsbGJhY2tzXG4gICAgdGhpcy50cmlnZ2VyVGFnQ2FsbGJhY2tzKGJvZHlBLCBib2R5QiwgY29udGFjdCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUVuZENvbnRhY3QoY29udGFjdDogcGxhbmNrLkNvbnRhY3QpOiB2b2lkIHtcbiAgICBjb25zdCBib2R5QSA9IGNvbnRhY3QuZ2V0Rml4dHVyZUEoKS5nZXRCb2R5KCkuZ2V0VXNlckRhdGEoKTtcbiAgICBjb25zdCBib2R5QiA9IGNvbnRhY3QuZ2V0Rml4dHVyZUIoKS5nZXRCb2R5KCkuZ2V0VXNlckRhdGEoKTtcblxuICAgIGlmICghaXNQaHlzaWNzQm9keVVzZXJEYXRhKGJvZHlBKSB8fCAhaXNQaHlzaWNzQm9keVVzZXJEYXRhKGJvZHlCKSkgcmV0dXJuO1xuXG4gICAgYm9keUEub25Db2xsaXNpb25FbmQ/Lihib2R5QiwgY29udGFjdCk7XG4gICAgYm9keUIub25Db2xsaXNpb25FbmQ/Lihib2R5QSwgY29udGFjdCk7XG4gIH1cblxuICBwcml2YXRlIHRyaWdnZXJUYWdDYWxsYmFja3MoXG4gICAgYm9keUE6IFBoeXNpY3NCb2R5VXNlckRhdGEsXG4gICAgYm9keUI6IFBoeXNpY3NCb2R5VXNlckRhdGEsXG4gICAgY29udGFjdDogcGxhbmNrLkNvbnRhY3RcbiAgKTogdm9pZCB7XG4gICAgLy8gR2V0IHRhZ3MgZnJvbSBib3RoIGJvZGllc1xuICAgIGNvbnN0IHRhZ3NBID0gYm9keUEub3B0aW9ucy5jb2xsaXNpb25UYWdzIHx8IFtdO1xuICAgIGNvbnN0IHRhZ3NCID0gYm9keUIub3B0aW9ucy5jb2xsaXNpb25UYWdzIHx8IFtdO1xuXG4gICAgLy8gQ2hlY2sgYWxsIHRhZyBjb21iaW5hdGlvbnNcbiAgICBmb3IgKGNvbnN0IHRhZ0Egb2YgdGFnc0EpIHtcbiAgICAgIGZvciAoY29uc3QgdGFnQiBvZiB0YWdzQikge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLm1ha2VLZXkodGFnQSwgdGFnQik7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMuY2FsbGJhY2tzLmdldChrZXkpO1xuXG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICBjb25zdCBldmVudDogQ29sbGlzaW9uRXZlbnQgPSB7XG4gICAgICAgICAgICBib2R5QSxcbiAgICAgICAgICAgIGJvZHlCLFxuICAgICAgICAgICAgY29udGFjdCxcbiAgICAgICAgICAgIG5vcm1hbDogbmV3IFBJWEkuUG9pbnQoMCwgMCksIC8vIFRPRE86IEV4dHJhY3QgZnJvbSBjb250YWN0XG4gICAgICAgICAgICBpbXB1bHNlOiAwIC8vIFRPRE86IEV4dHJhY3QgZnJvbSBjb250YWN0XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGNiID0+IGNiKGV2ZW50KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgKiBhcyBwbGFuY2sgZnJvbSAncGxhbmNrJztcbmltcG9ydCB7IExvZ2ljIH0gZnJvbSAnLi4vLi4vbWFpbi9sb2dpYyc7XG5pbXBvcnQgdHlwZSB7IFBoeXNpY3NXb3JsZCB9IGZyb20gJy4vcGh5c2ljcy13b3JsZCc7XG5pbXBvcnQgdHlwZSB7IFBoeXNpY3NEZWJ1Z09wdGlvbnMgfSBmcm9tICcuL3BoeXNpY3MtdHlwZXMnO1xuXG4vKipcbiAqIFJlbmRlcnMgcGh5c2ljcyBjb2xsaXNpb24gc2hhcGVzLCB2ZWxvY2l0aWVzLCBBQUJCcyBmb3IgZGVidWdnaW5nLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgZGVidWcgPSBwaHlzaWNzV29ybGQuZW5hYmxlRGVidWdSZW5kZXJlcihzY2VuZSk7XG4gKiBkZWJ1Zy50b2dnbGUoKTsgLy8gVG9nZ2xlIHZpc2liaWxpdHlcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUGh5c2ljc0RlYnVnUmVuZGVyZXIgZXh0ZW5kcyBMb2dpYzxQSVhJLkdyYXBoaWNzPiB7XG4gIG5hbWUgPSAnUGh5c2ljc0RlYnVnUmVuZGVyZXInO1xuXG4gIHByaXZhdGUgd29ybGQ6IFBoeXNpY3NXb3JsZDtcbiAgcHJpdmF0ZSBncmFwaGljcyE6IFBJWEkuR3JhcGhpY3M7XG4gIHByaXZhdGUgb3B0aW9uczogUmVxdWlyZWQ8UGh5c2ljc0RlYnVnT3B0aW9ucz47XG4gIHByaXZhdGUgaXNWaXNpYmxlOiBib29sZWFuID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcih3b3JsZDogUGh5c2ljc1dvcmxkLCBvcHRpb25zOiBQaHlzaWNzRGVidWdPcHRpb25zID0ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMud29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICBzaG93U2hhcGVzOiBvcHRpb25zLnNob3dTaGFwZXMgPz8gdHJ1ZSxcbiAgICAgIHNob3dWZWxvY2l0aWVzOiBvcHRpb25zLnNob3dWZWxvY2l0aWVzID8/IGZhbHNlLFxuICAgICAgc2hvd0FBQkJzOiBvcHRpb25zLnNob3dBQUJCcyA/PyBmYWxzZSxcbiAgICAgIHNob3dDZW50ZXJPZk1hc3M6IG9wdGlvbnMuc2hvd0NlbnRlck9mTWFzcyA/PyBmYWxzZSxcbiAgICAgIHNob3dDb250YWN0UG9pbnRzOiBvcHRpb25zLnNob3dDb250YWN0UG9pbnRzID8/IGZhbHNlLFxuICAgICAgc2hvd0pvaW50czogb3B0aW9ucy5zaG93Sm9pbnRzID8/IGZhbHNlLFxuICAgICAgY29sb3JTdGF0aWM6IG9wdGlvbnMuY29sb3JTdGF0aWMgPz8gMHgwMEZGMDAsXG4gICAgICBjb2xvckR5bmFtaWM6IG9wdGlvbnMuY29sb3JEeW5hbWljID8/IDB4RkYwMDAwLFxuICAgICAgY29sb3JLaW5lbWF0aWM6IG9wdGlvbnMuY29sb3JLaW5lbWF0aWMgPz8gMHgwMDAwRkYsXG4gICAgICBjb2xvclNsZWVwaW5nOiBvcHRpb25zLmNvbG9yU2xlZXBpbmcgPz8gMHhBQUFBQUEsXG4gICAgICBjb2xvclNlbnNvcjogb3B0aW9ucy5jb2xvclNlbnNvciA/PyAweEZGRkYwMCxcbiAgICAgIGFscGhhOiBvcHRpb25zLmFscGhhID8/IDAuNSxcbiAgICAgIGxpbmVXaWR0aDogb3B0aW9ucy5saW5lV2lkdGggPz8gMlxuICAgIH07XG4gIH1cblxuICBpbml0KGVudGl0eTogUElYSS5HcmFwaGljcywgcmVuZGVyZXI/OiBQSVhJLlJlbmRlcmVyKTogdm9pZCB7XG4gICAgdGhpcy5ncmFwaGljcyA9IGVudGl0eTtcbiAgfVxuXG4gIHVwZGF0ZShlbnRpdHk6IFBJWEkuR3JhcGhpY3MsIGRlbHRhVGltZT86IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc1Zpc2libGUpIHtcbiAgICAgIHRoaXMuZ3JhcGhpY3MuY2xlYXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmdyYXBoaWNzLmNsZWFyKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNob3dTaGFwZXMpIHtcbiAgICAgIC8vIEl0ZXJhdGUgYWxsIGJvZGllcyBpbiBwaHlzaWNzIHdvcmxkXG4gICAgICBmb3IgKGxldCBib2R5ID0gdGhpcy53b3JsZC53b3JsZC5nZXRCb2R5TGlzdCgpOyBib2R5OyBib2R5ID0gYm9keS5nZXROZXh0KCkpIHtcbiAgICAgICAgdGhpcy5kcmF3Qm9keShib2R5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDb250YWN0UG9pbnRzKSB7XG4gICAgICB0aGlzLmRyYXdDb250YWN0cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZHJhd0JvZHkoYm9keTogcGxhbmNrLkJvZHkpOiB2b2lkIHtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBib2R5LmdldFRyYW5zZm9ybSgpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGNvbG9yIGJhc2VkIG9uIGJvZHkgdHlwZSBhbmQgc3RhdGVcbiAgICBsZXQgY29sb3I6IG51bWJlcjtcblxuICAgIGlmICghYm9keS5pc0F3YWtlKCkgJiYgYm9keS5pc0R5bmFtaWMoKSkge1xuICAgICAgY29sb3IgPSB0aGlzLm9wdGlvbnMuY29sb3JTbGVlcGluZztcbiAgICB9IGVsc2UgaWYgKGJvZHkuaXNTdGF0aWMoKSkge1xuICAgICAgY29sb3IgPSB0aGlzLm9wdGlvbnMuY29sb3JTdGF0aWM7XG4gICAgfSBlbHNlIGlmIChib2R5LmlzS2luZW1hdGljKCkpIHtcbiAgICAgIGNvbG9yID0gdGhpcy5vcHRpb25zLmNvbG9yS2luZW1hdGljO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb2xvciA9IHRoaXMub3B0aW9ucy5jb2xvckR5bmFtaWM7XG4gICAgfVxuXG4gICAgLy8gRHJhdyBlYWNoIGZpeHR1cmVcbiAgICBmb3IgKGxldCBmaXh0dXJlID0gYm9keS5nZXRGaXh0dXJlTGlzdCgpOyBmaXh0dXJlOyBmaXh0dXJlID0gZml4dHVyZS5nZXROZXh0KCkpIHtcbiAgICAgIGNvbnN0IHNoYXBlID0gZml4dHVyZS5nZXRTaGFwZSgpO1xuXG4gICAgICAvLyBVc2UgeWVsbG93IHNlbWktdHJhbnNwYXJlbnQgZm9yIHNlbnNvcnNcbiAgICAgIGNvbnN0IGZpeHR1cmVDb2xvciA9IGZpeHR1cmUuaXNTZW5zb3IoKSA/IHRoaXMub3B0aW9ucy5jb2xvclNlbnNvciA6IGNvbG9yO1xuICAgICAgY29uc3QgYWxwaGEgPSBmaXh0dXJlLmlzU2Vuc29yKCkgPyB0aGlzLm9wdGlvbnMuYWxwaGEgKiAwLjUgOiB0aGlzLm9wdGlvbnMuYWxwaGE7XG5cbiAgICAgIHRoaXMuZHJhd1NoYXBlKHNoYXBlLCB0cmFuc2Zvcm0sIGZpeHR1cmVDb2xvciwgYWxwaGEpO1xuICAgIH1cblxuICAgIC8vIERyYXcgdmVsb2NpdHkgdmVjdG9yIGlmIGVuYWJsZWRcbiAgICBpZiAodGhpcy5vcHRpb25zLnNob3dWZWxvY2l0aWVzICYmIGJvZHkuaXNEeW5hbWljKCkpIHtcbiAgICAgIHRoaXMuZHJhd1ZlbG9jaXR5KGJvZHkpO1xuICAgIH1cblxuICAgIC8vIERyYXcgQUFCQiBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zaG93QUFCQnMpIHtcbiAgICAgIHRoaXMuZHJhd0FBQkIoYm9keSk7XG4gICAgfVxuXG4gICAgLy8gRHJhdyBjZW50ZXIgb2YgbWFzcyBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zaG93Q2VudGVyT2ZNYXNzKSB7XG4gICAgICB0aGlzLmRyYXdDZW50ZXJPZk1hc3MoYm9keSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkcmF3U2hhcGUoc2hhcGU6IHBsYW5jay5TaGFwZSwgdHJhbnNmb3JtOiBwbGFuY2suVHJhbnNmb3JtLCBjb2xvcjogbnVtYmVyLCBhbHBoYTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5ncmFwaGljcy5zdHJva2Uoe1xuICAgICAgd2lkdGg6IHRoaXMub3B0aW9ucy5saW5lV2lkdGgsXG4gICAgICBjb2xvcjogY29sb3IsXG4gICAgICBhbHBoYTogYWxwaGFcbiAgICB9KTtcblxuICAgIGNvbnN0IHNoYXBlVHlwZSA9IHNoYXBlLmdldFR5cGUoKTtcblxuICAgIGlmIChzaGFwZVR5cGUgPT09ICdjaXJjbGUnKSB7XG4gICAgICBjb25zdCBjaXJjbGUgPSBzaGFwZSBhcyBwbGFuY2suQ2lyY2xlU2hhcGU7XG4gICAgICBjb25zdCBjZW50ZXIgPSBwbGFuY2suVmVjMi5hZGQodHJhbnNmb3JtLnAsIHBsYW5jay5Sb3QubXVsVmVjMih0cmFuc2Zvcm0ucSwgY2lyY2xlLmdldENlbnRlcigpKSk7XG4gICAgICBjb25zdCByYWRpdXMgPSBjaXJjbGUuZ2V0UmFkaXVzKCk7XG5cbiAgICAgIGNvbnN0IHBpeGVsQ2VudGVyID0gdGhpcy53b3JsZC50b1BpeGVsc1BvaW50KGNlbnRlcik7XG4gICAgICBjb25zdCBwaXhlbFJhZGl1cyA9IHRoaXMud29ybGQudG9QaXhlbHMocmFkaXVzKTtcblxuICAgICAgdGhpcy5ncmFwaGljcy5jaXJjbGUocGl4ZWxDZW50ZXIueCwgcGl4ZWxDZW50ZXIueSwgcGl4ZWxSYWRpdXMpO1xuICAgICAgdGhpcy5ncmFwaGljcy5zdHJva2UoKTtcblxuICAgICAgLy8gRHJhdyByYWRpdXMgbGluZSB0byBzaG93IHJvdGF0aW9uXG4gICAgICBjb25zdCBhbmdsZSA9IHRyYW5zZm9ybS5xLmdldEFuZ2xlKCk7XG4gICAgICBjb25zdCBlbmRYID0gcGl4ZWxDZW50ZXIueCArIE1hdGguY29zKGFuZ2xlKSAqIHBpeGVsUmFkaXVzO1xuICAgICAgY29uc3QgZW5kWSA9IHBpeGVsQ2VudGVyLnkgKyBNYXRoLnNpbihhbmdsZSkgKiBwaXhlbFJhZGl1cztcbiAgICAgIHRoaXMuZ3JhcGhpY3MubW92ZVRvKHBpeGVsQ2VudGVyLngsIHBpeGVsQ2VudGVyLnkpO1xuICAgICAgdGhpcy5ncmFwaGljcy5saW5lVG8oZW5kWCwgZW5kWSk7XG4gICAgICB0aGlzLmdyYXBoaWNzLnN0cm9rZSgpO1xuICAgIH0gZWxzZSBpZiAoc2hhcGVUeXBlID09PSAncG9seWdvbicpIHtcbiAgICAgIGNvbnN0IHBvbHkgPSBzaGFwZSBhcyBwbGFuY2suUG9seWdvblNoYXBlO1xuICAgICAgY29uc3QgdmVydGljZXMgPSBwb2x5Lm1fdmVydGljZXM7XG5cbiAgICAgIGlmICh2ZXJ0aWNlcyAmJiB2ZXJ0aWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFRyYW5zZm9ybSBmaXJzdCB2ZXJ0ZXhcbiAgICAgICAgY29uc3QgZmlyc3RWZXJ0ZXggPSBwbGFuY2suVmVjMi5hZGQodHJhbnNmb3JtLnAsIHBsYW5jay5Sb3QubXVsVmVjMih0cmFuc2Zvcm0ucSwgdmVydGljZXNbMF0pKTtcbiAgICAgICAgY29uc3QgcGl4ZWxGaXJzdCA9IHRoaXMud29ybGQudG9QaXhlbHNQb2ludChmaXJzdFZlcnRleCk7XG5cbiAgICAgICAgdGhpcy5ncmFwaGljcy5tb3ZlVG8ocGl4ZWxGaXJzdC54LCBwaXhlbEZpcnN0LnkpO1xuXG4gICAgICAgIC8vIFRyYW5zZm9ybSBhbmQgZHJhdyByZW1haW5pbmcgdmVydGljZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHZlcnRleCA9IHBsYW5jay5WZWMyLmFkZCh0cmFuc2Zvcm0ucCwgcGxhbmNrLlJvdC5tdWxWZWMyKHRyYW5zZm9ybS5xLCB2ZXJ0aWNlc1tpXSkpO1xuICAgICAgICAgIGNvbnN0IHBpeGVsVmVydGV4ID0gdGhpcy53b3JsZC50b1BpeGVsc1BvaW50KHZlcnRleCk7XG4gICAgICAgICAgdGhpcy5ncmFwaGljcy5saW5lVG8ocGl4ZWxWZXJ0ZXgueCwgcGl4ZWxWZXJ0ZXgueSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbG9zZSB0aGUgcG9seWdvblxuICAgICAgICB0aGlzLmdyYXBoaWNzLmxpbmVUbyhwaXhlbEZpcnN0LngsIHBpeGVsRmlyc3QueSk7XG4gICAgICAgIHRoaXMuZ3JhcGhpY3Muc3Ryb2tlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzaGFwZVR5cGUgPT09ICdlZGdlJykge1xuICAgICAgY29uc3QgZWRnZSA9IHNoYXBlIGFzIHBsYW5jay5FZGdlU2hhcGU7XG4gICAgICBjb25zdCB2MSA9IHBsYW5jay5WZWMyLmFkZCh0cmFuc2Zvcm0ucCwgcGxhbmNrLlJvdC5tdWxWZWMyKHRyYW5zZm9ybS5xLCBlZGdlLm1fdmVydGV4MSkpO1xuICAgICAgY29uc3QgdjIgPSBwbGFuY2suVmVjMi5hZGQodHJhbnNmb3JtLnAsIHBsYW5jay5Sb3QubXVsVmVjMih0cmFuc2Zvcm0ucSwgZWRnZS5tX3ZlcnRleDIpKTtcblxuICAgICAgY29uc3QgcDEgPSB0aGlzLndvcmxkLnRvUGl4ZWxzUG9pbnQodjEpO1xuICAgICAgY29uc3QgcDIgPSB0aGlzLndvcmxkLnRvUGl4ZWxzUG9pbnQodjIpO1xuXG4gICAgICB0aGlzLmdyYXBoaWNzLm1vdmVUbyhwMS54LCBwMS55KTtcbiAgICAgIHRoaXMuZ3JhcGhpY3MubGluZVRvKHAyLngsIHAyLnkpO1xuICAgICAgdGhpcy5ncmFwaGljcy5zdHJva2UoKTtcbiAgICB9IGVsc2UgaWYgKHNoYXBlVHlwZSA9PT0gJ2NoYWluJykge1xuICAgICAgY29uc3QgY2hhaW4gPSBzaGFwZSBhcyBwbGFuY2suQ2hhaW5TaGFwZTtcbiAgICAgIGNvbnN0IHZlcnRpY2VzID0gY2hhaW4ubV92ZXJ0aWNlcztcblxuICAgICAgaWYgKHZlcnRpY2VzICYmIHZlcnRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZmlyc3RWZXJ0ZXggPSBwbGFuY2suVmVjMi5hZGQodHJhbnNmb3JtLnAsIHBsYW5jay5Sb3QubXVsVmVjMih0cmFuc2Zvcm0ucSwgdmVydGljZXNbMF0pKTtcbiAgICAgICAgY29uc3QgcGl4ZWxGaXJzdCA9IHRoaXMud29ybGQudG9QaXhlbHNQb2ludChmaXJzdFZlcnRleCk7XG4gICAgICAgIHRoaXMuZ3JhcGhpY3MubW92ZVRvKHBpeGVsRmlyc3QueCwgcGl4ZWxGaXJzdC55KTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgdmVydGV4ID0gcGxhbmNrLlZlYzIuYWRkKHRyYW5zZm9ybS5wLCBwbGFuY2suUm90Lm11bFZlYzIodHJhbnNmb3JtLnEsIHZlcnRpY2VzW2ldKSk7XG4gICAgICAgICAgY29uc3QgcGl4ZWxWZXJ0ZXggPSB0aGlzLndvcmxkLnRvUGl4ZWxzUG9pbnQodmVydGV4KTtcbiAgICAgICAgICB0aGlzLmdyYXBoaWNzLmxpbmVUbyhwaXhlbFZlcnRleC54LCBwaXhlbFZlcnRleC55KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ3JhcGhpY3Muc3Ryb2tlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkcmF3VmVsb2NpdHkoYm9keTogcGxhbmNrLkJvZHkpOiB2b2lkIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IGJvZHkuZ2V0UG9zaXRpb24oKTtcbiAgICBjb25zdCB2ZWxvY2l0eSA9IGJvZHkuZ2V0TGluZWFyVmVsb2NpdHkoKTtcblxuICAgIC8vIFNjYWxlIHZlbG9jaXR5IGZvciB2aXNpYmlsaXR5XG4gICAgY29uc3Qgc2NhbGUgPSAwLjU7XG4gICAgY29uc3QgZW5kUG9pbnQgPSBwbGFuY2suVmVjMi5hZGQocG9zaXRpb24sIHBsYW5jay5WZWMyLm11bCh2ZWxvY2l0eSwgc2NhbGUpKTtcblxuICAgIGNvbnN0IHBpeGVsU3RhcnQgPSB0aGlzLndvcmxkLnRvUGl4ZWxzUG9pbnQocG9zaXRpb24pO1xuICAgIGNvbnN0IHBpeGVsRW5kID0gdGhpcy53b3JsZC50b1BpeGVsc1BvaW50KGVuZFBvaW50KTtcblxuICAgIHRoaXMuZ3JhcGhpY3Muc3Ryb2tlKHtcbiAgICAgIHdpZHRoOiAyLFxuICAgICAgY29sb3I6IDB4MDBGRkZGLFxuICAgICAgYWxwaGE6IDAuOFxuICAgIH0pO1xuXG4gICAgdGhpcy5ncmFwaGljcy5tb3ZlVG8ocGl4ZWxTdGFydC54LCBwaXhlbFN0YXJ0LnkpO1xuICAgIHRoaXMuZ3JhcGhpY3MubGluZVRvKHBpeGVsRW5kLngsIHBpeGVsRW5kLnkpO1xuICAgIHRoaXMuZ3JhcGhpY3Muc3Ryb2tlKCk7XG5cbiAgICAvLyBEcmF3IGFycm93IGhlYWRcbiAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIocGl4ZWxFbmQueSAtIHBpeGVsU3RhcnQueSwgcGl4ZWxFbmQueCAtIHBpeGVsU3RhcnQueCk7XG4gICAgY29uc3QgYXJyb3dTaXplID0gNTtcbiAgICBjb25zdCBhbmdsZTEgPSBhbmdsZSArIE1hdGguUEkgKiAwLjg7XG4gICAgY29uc3QgYW5nbGUyID0gYW5nbGUgLSBNYXRoLlBJICogMC44O1xuXG4gICAgdGhpcy5ncmFwaGljcy5tb3ZlVG8ocGl4ZWxFbmQueCwgcGl4ZWxFbmQueSk7XG4gICAgdGhpcy5ncmFwaGljcy5saW5lVG8oXG4gICAgICBwaXhlbEVuZC54ICsgTWF0aC5jb3MoYW5nbGUxKSAqIGFycm93U2l6ZSxcbiAgICAgIHBpeGVsRW5kLnkgKyBNYXRoLnNpbihhbmdsZTEpICogYXJyb3dTaXplXG4gICAgKTtcbiAgICB0aGlzLmdyYXBoaWNzLm1vdmVUbyhwaXhlbEVuZC54LCBwaXhlbEVuZC55KTtcbiAgICB0aGlzLmdyYXBoaWNzLmxpbmVUbyhcbiAgICAgIHBpeGVsRW5kLnggKyBNYXRoLmNvcyhhbmdsZTIpICogYXJyb3dTaXplLFxuICAgICAgcGl4ZWxFbmQueSArIE1hdGguc2luKGFuZ2xlMikgKiBhcnJvd1NpemVcbiAgICApO1xuICAgIHRoaXMuZ3JhcGhpY3Muc3Ryb2tlKCk7XG4gIH1cblxuICBwcml2YXRlIGRyYXdBQUJCKGJvZHk6IHBsYW5jay5Cb2R5KTogdm9pZCB7XG4gICAgZm9yIChsZXQgZml4dHVyZSA9IGJvZHkuZ2V0Rml4dHVyZUxpc3QoKTsgZml4dHVyZTsgZml4dHVyZSA9IGZpeHR1cmUuZ2V0TmV4dCgpKSB7XG4gICAgICBjb25zdCBhYWJiID0gZml4dHVyZS5nZXRBQUJCKDApO1xuXG4gICAgICBjb25zdCBsb3dlckJvdW5kID0gdGhpcy53b3JsZC50b1BpeGVsc1BvaW50KGFhYmIubG93ZXJCb3VuZCk7XG4gICAgICBjb25zdCB1cHBlckJvdW5kID0gdGhpcy53b3JsZC50b1BpeGVsc1BvaW50KGFhYmIudXBwZXJCb3VuZCk7XG5cbiAgICAgIHRoaXMuZ3JhcGhpY3Muc3Ryb2tlKHtcbiAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgIGNvbG9yOiAweEZGMDBGRixcbiAgICAgICAgYWxwaGE6IDAuM1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuZ3JhcGhpY3MucmVjdChcbiAgICAgICAgbG93ZXJCb3VuZC54LFxuICAgICAgICBsb3dlckJvdW5kLnksXG4gICAgICAgIHVwcGVyQm91bmQueCAtIGxvd2VyQm91bmQueCxcbiAgICAgICAgdXBwZXJCb3VuZC55IC0gbG93ZXJCb3VuZC55XG4gICAgICApO1xuICAgICAgdGhpcy5ncmFwaGljcy5zdHJva2UoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRyYXdDZW50ZXJPZk1hc3MoYm9keTogcGxhbmNrLkJvZHkpOiB2b2lkIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IGJvZHkuZ2V0V29ybGRDZW50ZXIoKTtcbiAgICBjb25zdCBwaXhlbFBvcyA9IHRoaXMud29ybGQudG9QaXhlbHNQb2ludChwb3NpdGlvbik7XG5cbiAgICB0aGlzLmdyYXBoaWNzLnN0cm9rZSh7XG4gICAgICB3aWR0aDogMSxcbiAgICAgIGNvbG9yOiAweEZGRkZGRixcbiAgICAgIGFscGhhOiAxXG4gICAgfSk7XG5cbiAgICBjb25zdCBzaXplID0gNTtcbiAgICB0aGlzLmdyYXBoaWNzLm1vdmVUbyhwaXhlbFBvcy54IC0gc2l6ZSwgcGl4ZWxQb3MueSk7XG4gICAgdGhpcy5ncmFwaGljcy5saW5lVG8ocGl4ZWxQb3MueCArIHNpemUsIHBpeGVsUG9zLnkpO1xuICAgIHRoaXMuZ3JhcGhpY3MubW92ZVRvKHBpeGVsUG9zLngsIHBpeGVsUG9zLnkgLSBzaXplKTtcbiAgICB0aGlzLmdyYXBoaWNzLmxpbmVUbyhwaXhlbFBvcy54LCBwaXhlbFBvcy55ICsgc2l6ZSk7XG4gICAgdGhpcy5ncmFwaGljcy5zdHJva2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd0NvbnRhY3RzKCk6IHZvaWQge1xuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBhbGwgY29udGFjdHMgaW4gdGhlIHdvcmxkXG4gICAgZm9yIChsZXQgY29udGFjdCA9IHRoaXMud29ybGQud29ybGQuZ2V0Q29udGFjdExpc3QoKTsgY29udGFjdDsgY29udGFjdCA9IGNvbnRhY3QuZ2V0TmV4dCgpKSB7XG4gICAgICBpZiAoIWNvbnRhY3QuaXNUb3VjaGluZygpKSBjb250aW51ZTtcblxuICAgICAgY29uc3QgbWFuaWZvbGQgPSBjb250YWN0LmdldE1hbmlmb2xkKCk7XG4gICAgICBpZiAoIW1hbmlmb2xkKSBjb250aW51ZTtcblxuICAgICAgY29uc3Qgd29ybGRNYW5pZm9sZCA9IGNvbnRhY3QuZ2V0V29ybGRNYW5pZm9sZChudWxsKTtcbiAgICAgIGlmICghd29ybGRNYW5pZm9sZCkgY29udGludWU7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFuaWZvbGQucG9pbnRDb3VudDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBvaW50ID0gd29ybGRNYW5pZm9sZC5wb2ludHNbaV07XG4gICAgICAgIGlmICghcG9pbnQpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBwaXhlbFBvaW50ID0gdGhpcy53b3JsZC50b1BpeGVsc1BvaW50KHBsYW5jay5WZWMyKHBvaW50LngsIHBvaW50LnkpKTtcblxuICAgICAgICB0aGlzLmdyYXBoaWNzLmNpcmNsZShwaXhlbFBvaW50LngsIHBpeGVsUG9pbnQueSwgMyk7XG4gICAgICAgIHRoaXMuZ3JhcGhpY3MuZmlsbCh7IGNvbG9yOiAweEZGMDAwMCwgYWxwaGE6IDAuOCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiogU2hvdyBvciBoaWRlIGRlYnVnIHZpc3VhbGl6YXRpb24uICovXG4gIHNldFZpc2libGUodmlzaWJsZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuaXNWaXNpYmxlID0gdmlzaWJsZTtcbiAgICBpZiAoIXZpc2libGUpIHtcbiAgICAgIHRoaXMuZ3JhcGhpY3MuY2xlYXIoKTtcbiAgICB9XG4gIH1cblxuICAvKiogVG9nZ2xlIHZpc2liaWxpdHkuICovXG4gIHRvZ2dsZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNldFZpc2libGUoIXRoaXMuaXNWaXNpYmxlKTtcbiAgfVxuXG4gIC8qKiBDaGVjayBjdXJyZW50IHZpc2liaWxpdHkuICovXG4gIGdldFZpc2libGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNWaXNpYmxlO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBQSVhJIGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0ICogYXMgcGxhbmNrIGZyb20gJ3BsYW5jayc7XG5pbXBvcnQgdHlwZSB7IFBoeXNpY3NXb3JsZCB9IGZyb20gJy4vcGh5c2ljcy13b3JsZCc7XG5cbi8qKiBSZXN1bHQgZnJvbSBwYXJzZUdyYXBoaWNzU2hhcGUoKS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkU2hhcGUge1xuICB0eXBlOiAnY2lyY2xlJyB8ICdyZWN0YW5nbGUnIHwgJ3BvbHlnb24nO1xuICBzaGFwZTogcGxhbmNrLlNoYXBlO1xufVxuXG4vKiogQGludGVybmFsIE1ldGFkYXRhIHN0b3JlZCBvbiBHcmFwaGljcyBmb3IgcGh5c2ljcyBleHRyYWN0aW9uLiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaHlzaWNzU2hhcGVNZXRhZGF0YSB7XG4gIHR5cGU6ICdjaXJjbGUnIHwgJ3JlY3RhbmdsZScgfCAncG9seWdvbic7XG4gIHJhZGl1cz86IG51bWJlcjtcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlcjtcbiAgdmVydGljZXM/OiBudW1iZXJbXTtcbn1cblxuY29uc3QgUEhZU0lDU19TSEFQRV9LRVkgPSAnX19waHlzaWNzU2hhcGVfXyc7XG5cbi8qKiBAaW50ZXJuYWwgQXR0YWNoIHNoYXBlIG1ldGFkYXRhIHRvIEdyYXBoaWNzLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEdyYXBoaWNzUGh5c2ljc1NoYXBlKGdyYXBoaWNzOiBQSVhJLkdyYXBoaWNzLCBtZXRhZGF0YTogUGh5c2ljc1NoYXBlTWV0YWRhdGEpOiB2b2lkIHtcbiAgKGdyYXBoaWNzIGFzIGFueSlbUEhZU0lDU19TSEFQRV9LRVldID0gbWV0YWRhdGE7XG59XG5cbi8qKiBAaW50ZXJuYWwgUGF0Y2hlcyBQSVhJLkdyYXBoaWNzLnJlY3QvY2lyY2xlL3BvbHkgdG8gYXV0by10cmFjayBzaGFwZXMuIENhbGxlZCBvbmNlIGJ5IFBoeXNpY3NXb3JsZC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0R3JhcGhpY3NQaHlzaWNzVHJhY2tpbmcoKTogdm9pZCB7XG4gIC8vIFNhdmUgb3JpZ2luYWwgbWV0aG9kc1xuICBjb25zdCBvcmlnaW5hbFJlY3QgPSBQSVhJLkdyYXBoaWNzLnByb3RvdHlwZS5yZWN0O1xuICBjb25zdCBvcmlnaW5hbENpcmNsZSA9IFBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmNpcmNsZTtcbiAgY29uc3Qgb3JpZ2luYWxQb2x5ID0gUElYSS5HcmFwaGljcy5wcm90b3R5cGUucG9seTtcblxuICAvLyBQYXRjaCByZWN0KCkgdG8gc3RvcmUgbWV0YWRhdGFcbiAgUElYSS5HcmFwaGljcy5wcm90b3R5cGUucmVjdCA9IGZ1bmN0aW9uICh4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIpIHtcbiAgICBzZXRHcmFwaGljc1BoeXNpY3NTaGFwZSh0aGlzLCB7XG4gICAgICB0eXBlOiAncmVjdGFuZ2xlJyxcbiAgICAgIHdpZHRoOiB3LFxuICAgICAgaGVpZ2h0OiBoXG4gICAgfSk7XG4gICAgcmV0dXJuIG9yaWdpbmFsUmVjdC5jYWxsKHRoaXMsIHgsIHksIHcsIGgpO1xuICB9O1xuXG4gIC8vIFBhdGNoIGNpcmNsZSgpIHRvIHN0b3JlIG1ldGFkYXRhXG4gIFBJWEkuR3JhcGhpY3MucHJvdG90eXBlLmNpcmNsZSA9IGZ1bmN0aW9uICh4OiBudW1iZXIsIHk6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpIHtcbiAgICBzZXRHcmFwaGljc1BoeXNpY3NTaGFwZSh0aGlzLCB7XG4gICAgICB0eXBlOiAnY2lyY2xlJyxcbiAgICAgIHJhZGl1czogcmFkaXVzXG4gICAgfSk7XG4gICAgcmV0dXJuIG9yaWdpbmFsQ2lyY2xlLmNhbGwodGhpcywgeCwgeSwgcmFkaXVzKTtcbiAgfTtcblxuICAvLyBQYXRjaCBwb2x5KCkgdG8gc3RvcmUgbWV0YWRhdGFcbiAgUElYSS5HcmFwaGljcy5wcm90b3R5cGUucG9seSA9IGZ1bmN0aW9uIChwb2ludHM6IFBJWEkuUG9pbnREYXRhW10gfCBudW1iZXJbXSkge1xuICAgIGNvbnN0IGZsYXRQb2ludHMgPSBBcnJheS5pc0FycmF5KHBvaW50c1swXSkgPyBwb2ludHMuZmxhdCgpIDogcG9pbnRzO1xuICAgIHNldEdyYXBoaWNzUGh5c2ljc1NoYXBlKHRoaXMsIHtcbiAgICAgIHR5cGU6ICdwb2x5Z29uJyxcbiAgICAgIHZlcnRpY2VzOiBmbGF0UG9pbnRzIGFzIG51bWJlcltdXG4gICAgfSk7XG4gICAgcmV0dXJuIG9yaWdpbmFsUG9seS5jYWxsKHRoaXMsIHBvaW50cyBhcyBhbnkpO1xuICB9O1xufVxuXG4vKiogRXh0cmFjdCBQbGFuY2sgc2hhcGUgZnJvbSBQSVhJLkdyYXBoaWNzLiBVc2VzIHN0b3JlZCBtZXRhZGF0YSBvciBmYWxscyBiYWNrIHRvIGJvdW5kcy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUdyYXBoaWNzU2hhcGUoZ3JhcGhpY3M6IFBJWEkuR3JhcGhpY3MsIHdvcmxkOiBQaHlzaWNzV29ybGQpOiBQYXJzZWRTaGFwZSB7XG4gIC8vIENoZWNrIGlmIHNoYXBlIG1ldGFkYXRhIHdhcyBzdG9yZWRcbiAgY29uc3QgbWV0YWRhdGEgPSAoZ3JhcGhpY3MgYXMgYW55KVtQSFlTSUNTX1NIQVBFX0tFWV0gYXMgUGh5c2ljc1NoYXBlTWV0YWRhdGEgfCB1bmRlZmluZWQ7XG5cbiAgaWYgKG1ldGFkYXRhKSB7XG4gICAgLy8gVXNlIHN0b3JlZCBtZXRhZGF0YVxuICAgIHN3aXRjaCAobWV0YWRhdGEudHlwZSkge1xuICAgICAgY2FzZSAnY2lyY2xlJzpcbiAgICAgICAgaWYgKCFtZXRhZGF0YS5yYWRpdXMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NpcmNsZSBtZXRhZGF0YSBtaXNzaW5nIHJhZGl1cycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ2NpcmNsZScsXG4gICAgICAgICAgc2hhcGU6IHBsYW5jay5DaXJjbGUod29ybGQudG9QaHlzaWNzKG1ldGFkYXRhLnJhZGl1cykpXG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgJ3JlY3RhbmdsZSc6XG4gICAgICAgIGlmICghbWV0YWRhdGEud2lkdGggfHwgIW1ldGFkYXRhLmhlaWdodCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVjdGFuZ2xlIG1ldGFkYXRhIG1pc3Npbmcgd2lkdGgvaGVpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiAncmVjdGFuZ2xlJyxcbiAgICAgICAgICBzaGFwZTogcGxhbmNrLkJveChcbiAgICAgICAgICAgIHdvcmxkLnRvUGh5c2ljcyhtZXRhZGF0YS53aWR0aCAvIDIpLFxuICAgICAgICAgICAgd29ybGQudG9QaHlzaWNzKG1ldGFkYXRhLmhlaWdodCAvIDIpXG4gICAgICAgICAgKVxuICAgICAgICB9O1xuXG4gICAgICBjYXNlICdwb2x5Z29uJzpcbiAgICAgICAgaWYgKCFtZXRhZGF0YS52ZXJ0aWNlcyB8fCBtZXRhZGF0YS52ZXJ0aWNlcy5sZW5ndGggPCA2KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb2x5Z29uIG1ldGFkYXRhIG1pc3NpbmcgdmVydGljZXMgKG5lZWQgYXQgbGVhc3QgMyBwb2ludHMgPSA2IHZhbHVlcyknKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2ZXJ0aWNlczogcGxhbmNrLlZlYzJbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1ldGFkYXRhLnZlcnRpY2VzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgdmVydGljZXMucHVzaChcbiAgICAgICAgICAgIHBsYW5jay5WZWMyKFxuICAgICAgICAgICAgICB3b3JsZC50b1BoeXNpY3MobWV0YWRhdGEudmVydGljZXNbaV0pLFxuICAgICAgICAgICAgICB3b3JsZC50b1BoeXNpY3MobWV0YWRhdGEudmVydGljZXNbaSArIDFdKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiAncG9seWdvbicsXG4gICAgICAgICAgc2hhcGU6IHBsYW5jay5Qb2x5Z29uKHZlcnRpY2VzKVxuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEZhbGxiYWNrOiBVc2UgYm91bmRpbmcgYm94IGFzIHJlY3RhbmdsZVxuICBjb25zdCBib3VuZHMgPSBncmFwaGljcy5nZXRMb2NhbEJvdW5kcygpO1xuXG4gIGlmIChib3VuZHMud2lkdGggPT09IDAgfHwgYm91bmRzLmhlaWdodCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdHcmFwaGljcyBoYXMgbm8gZGltZW5zaW9ucy4gRWl0aGVyIGRyYXcgc2hhcGVzIHVzaW5nIHJlY3QoKSwgY2lyY2xlKCksIG9yIHBvbHkoKSwgJyArXG4gICAgICAnb3IgcHJvdmlkZSBhbiBleHBsaWNpdCBjb2xsaXNpb25TaGFwZSBvcHRpb24uJ1xuICAgICk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHR5cGU6ICdyZWN0YW5nbGUnLFxuICAgIHNoYXBlOiBwbGFuY2suQm94KFxuICAgICAgd29ybGQudG9QaHlzaWNzKGJvdW5kcy53aWR0aCAvIDIpLFxuICAgICAgd29ybGQudG9QaHlzaWNzKGJvdW5kcy5oZWlnaHQgLyAyKVxuICAgIClcbiAgfTtcbn1cbiIsImltcG9ydCB0eXBlIHsgUGh5c2ljc0JvZHlPcHRpb25zIH0gZnJvbSAnLi9waHlzaWNzLXR5cGVzJztcblxuLyoqXG4gKiBQcmVkZWZpbmVkIG1hdGVyaWFsIHByZXNldHMgZm9yIGNvbW1vbiBwaHlzaWNzIGJlaGF2aW9yc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBiYWxsID0gYXNQaHlzaWNzRW50aXR5KHNwcml0ZSwgd29ybGQsIHtcbiAqICAgdHlwZTogJ2R5bmFtaWMnLFxuICogICAuLi5QaHlzaWNzTWF0ZXJpYWxzLmJvdW5jeVxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IFBoeXNpY3NNYXRlcmlhbHMgPSB7XG4gIC8qKlxuICAgKiBCb3VuY3kgYmFsbCAtIGhpZ2ggcmVzdGl0dXRpb24sIGxvdyBmcmljdGlvblxuICAgKi9cbiAgYm91bmN5OiB7XG4gICAgZGVuc2l0eTogMC41LFxuICAgIGZyaWN0aW9uOiAwLjEsXG4gICAgcmVzdGl0dXRpb246IDAuOVxuICB9LFxuXG4gIC8qKlxuICAgKiBXb29kZW4gYm94IC0gbWVkaXVtIGRlbnNpdHksIG1lZGl1bSBmcmljdGlvblxuICAgKi9cbiAgd29vZDoge1xuICAgIGRlbnNpdHk6IDAuNyxcbiAgICBmcmljdGlvbjogMC40LFxuICAgIHJlc3RpdHV0aW9uOiAwLjJcbiAgfSxcblxuICAvKipcbiAgICogTWV0YWwgb2JqZWN0IC0gaGlnaCBkZW5zaXR5LCBsb3cgcmVzdGl0dXRpb25cbiAgICovXG4gIG1ldGFsOiB7XG4gICAgZGVuc2l0eTogMS41LFxuICAgIGZyaWN0aW9uOiAwLjMsXG4gICAgcmVzdGl0dXRpb246IDAuMVxuICB9LFxuXG4gIC8qKlxuICAgKiBJY2UgLSB2ZXJ5IGxvdyBmcmljdGlvbiwgbG93IHJlc3RpdHV0aW9uXG4gICAqL1xuICBpY2U6IHtcbiAgICBkZW5zaXR5OiAwLjksXG4gICAgZnJpY3Rpb246IDAuMDIsXG4gICAgcmVzdGl0dXRpb246IDAuMDVcbiAgfSxcblxuICAvKipcbiAgICogUnViYmVyIC0gaGlnaCBmcmljdGlvbiwgaGlnaCByZXN0aXR1dGlvblxuICAgKi9cbiAgcnViYmVyOiB7XG4gICAgZGVuc2l0eTogMS4wLFxuICAgIGZyaWN0aW9uOiAwLjksXG4gICAgcmVzdGl0dXRpb246IDAuN1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGFyYWN0ZXIgLSBubyByb3RhdGlvbiwgbWVkaXVtIGZyaWN0aW9uXG4gICAqL1xuICBjaGFyYWN0ZXI6IHtcbiAgICBkZW5zaXR5OiAxLjAsXG4gICAgZnJpY3Rpb246IDAuNSxcbiAgICByZXN0aXR1dGlvbjogMC4wLFxuICAgIGZpeGVkUm90YXRpb246IHRydWVcbiAgfSxcblxuICAvKipcbiAgICogU3RhdGljIHRlcnJhaW4gLSBubyBkZW5zaXR5IChpbW1vdmFibGUpLCBoaWdoIGZyaWN0aW9uXG4gICAqL1xuICB0ZXJyYWluOiB7XG4gICAgZGVuc2l0eTogMCxcbiAgICBmcmljdGlvbjogMC42LFxuICAgIHJlc3RpdHV0aW9uOiAwLjBcbiAgfVxufSBhcyBjb25zdDtcblxuLyoqXG4gKiBBcHBseSBtYXRlcmlhbCBwcmVzZXQgdG8gb3B0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlNYXRlcmlhbChcbiAgb3B0aW9uczogUGh5c2ljc0JvZHlPcHRpb25zLFxuICBtYXRlcmlhbDoga2V5b2YgdHlwZW9mIFBoeXNpY3NNYXRlcmlhbHNcbik6IFBoeXNpY3NCb2R5T3B0aW9ucyB7XG4gIHJldHVybiB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICAuLi5QaHlzaWNzTWF0ZXJpYWxzW21hdGVyaWFsXVxuICB9O1xufVxuIiwiaW1wb3J0ICogYXMgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IGFzRW50aXR5LCBBc0VudGl0eSB9IGZyb20gJy4uLy4uL21haW4vbW94aS1lbnRpdHknO1xuaW1wb3J0IHR5cGUgeyBQaHlzaWNzV29ybGQgfSBmcm9tICcuL3BoeXNpY3Mtd29ybGQnO1xuaW1wb3J0IHsgUGh5c2ljc0JvZHlMb2dpYyB9IGZyb20gJy4vcGh5c2ljcy1ib2R5LWxvZ2ljJztcbmltcG9ydCB0eXBlIHsgUGh5c2ljc0JvZHlPcHRpb25zLCBTaGFwZUNvbmZpZyB9IGZyb20gJy4vcGh5c2ljcy10eXBlcyc7XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIHBoeXNpY3MtZW5hYmxlZCBlbnRpdHlcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3Qgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xuICogY29uc3QgcGh5c2ljc0VudGl0eSA9IGFzUGh5c2ljc0VudGl0eShzcHJpdGUsIHBoeXNpY3NXb3JsZCwge1xuICogICB0eXBlOiAnZHluYW1pYycsXG4gKiAgIHNoYXBlOiAnY2lyY2xlJyxcbiAqICAgcmFkaXVzOiAyNVxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzUGh5c2ljc0VudGl0eTxUIGV4dGVuZHMgUElYSS5Db250YWluZXI+KFxuICBwaXhpT2JqZWN0OiBULFxuICB3b3JsZDogUGh5c2ljc1dvcmxkLFxuICBvcHRpb25zOiBQaHlzaWNzQm9keU9wdGlvbnMgPSB7fVxuKTogQXNFbnRpdHk8VD4ge1xuICBjb25zdCBlbnRpdHkgPSBhc0VudGl0eShwaXhpT2JqZWN0KTtcbiAgY29uc3QgcGh5c2ljc0xvZ2ljID0gbmV3IFBoeXNpY3NCb2R5TG9naWMod29ybGQsIG9wdGlvbnMpO1xuICBlbnRpdHkubW94aUVudGl0eS5hZGRMb2dpYyhwaHlzaWNzTG9naWMpO1xuICByZXR1cm4gZW50aXR5IGFzIEFzRW50aXR5PFQ+O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGVudGl0eSBoYXMgcGh5c2ljcyBib2R5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNQaHlzaWNzKGVudGl0eTogYW55KTogYm9vbGVhbiB7XG4gIGlmICghZW50aXR5Lm1veGlFbnRpdHkpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGVudGl0eS5tb3hpRW50aXR5LmdldExvZ2ljKCdQaHlzaWNzQm9keUxvZ2ljJykgIT09IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBHZXQgcGh5c2ljcyBib2R5IGxvZ2ljIGZyb20gZW50aXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQaHlzaWNzQm9keShlbnRpdHk6IGFueSk6IFBoeXNpY3NCb2R5TG9naWMgfCB1bmRlZmluZWQge1xuICBpZiAoIWVudGl0eS5tb3hpRW50aXR5KSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4gZW50aXR5Lm1veGlFbnRpdHkuZ2V0TG9naWMoJ1BoeXNpY3NCb2R5TG9naWMnKSBhcyBQaHlzaWNzQm9keUxvZ2ljIHwgdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFNoYXBlIGNyZWF0aW9uIGZyb20gc3ByaXRlIGJvdW5kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2hhcGVGcm9tU3ByaXRlKFxuICBzcHJpdGU6IFBJWEkuU3ByaXRlLFxuICB0eXBlOiAncmVjdGFuZ2xlJyB8ICdjaXJjbGUnIHwgJ2F1dG8nID0gJ2F1dG8nXG4pOiBTaGFwZUNvbmZpZyB7XG4gIGNvbnN0IGJvdW5kcyA9IHNwcml0ZS5nZXRMb2NhbEJvdW5kcygpO1xuXG4gIGlmICh0eXBlID09PSAnYXV0bycpIHtcbiAgICAvLyBDaGVjayBpZiByb3VnaGx5IHNxdWFyZSAtPiBjaXJjbGUsIGVsc2UgcmVjdGFuZ2xlXG4gICAgY29uc3QgcmF0aW8gPSBib3VuZHMud2lkdGggLyBib3VuZHMuaGVpZ2h0O1xuICAgIHR5cGUgPSAocmF0aW8gPiAwLjggJiYgcmF0aW8gPCAxLjIpID8gJ2NpcmNsZScgOiAncmVjdGFuZ2xlJztcbiAgfVxuXG4gIGlmICh0eXBlID09PSAnY2lyY2xlJykge1xuICAgIHJldHVybiB7XG4gICAgICBzaGFwZTogJ2NpcmNsZScsXG4gICAgICByYWRpdXM6IE1hdGgubWF4KGJvdW5kcy53aWR0aCwgYm91bmRzLmhlaWdodCkgLyAyXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2hhcGU6ICdyZWN0YW5nbGUnLFxuICAgICAgd2lkdGg6IGJvdW5kcy53aWR0aCxcbiAgICAgIGhlaWdodDogYm91bmRzLmhlaWdodFxuICAgIH07XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgKiBhcyBwbGFuY2sgZnJvbSAncGxhbmNrJztcbmltcG9ydCB0eXBlIHsgUGh5c2ljc1dvcmxkT3B0aW9ucywgUmF5Y2FzdENhbGxiYWNrLCBQaHlzaWNzRGVidWdPcHRpb25zIH0gZnJvbSAnLi9waHlzaWNzLXR5cGVzJztcbmltcG9ydCB7IENvbGxpc2lvblJlZ2lzdHJ5LCBDb2xsaXNpb25NYW5hZ2VyIH0gZnJvbSAnLi9waHlzaWNzLWNvbGxpc2lvbic7XG5pbXBvcnQgdHlwZSB7IFBoeXNpY3NCb2R5TG9naWMgfSBmcm9tICcuL3BoeXNpY3MtYm9keS1sb2dpYyc7XG5pbXBvcnQgeyBQaHlzaWNzRGVidWdSZW5kZXJlciB9IGZyb20gJy4vcGh5c2ljcy1kZWJ1Zy1yZW5kZXJlcic7XG5pbXBvcnQgeyBhc0VudGl0eSB9IGZyb20gJy4uLy4uL21haW4vbW94aS1lbnRpdHknO1xuaW1wb3J0IHsgaW5pdEdyYXBoaWNzUGh5c2ljc1RyYWNraW5nIH0gZnJvbSAnLi9waHlzaWNzLWdyYXBoaWNzLXBhcnNlcic7XG5cbi8qKlxuICogUGxhbmNrLmpzIHBoeXNpY3Mgc2ltdWxhdGlvbiBtYW5hZ2VyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogLy8gVmlhIHNldHVwTW94aSAocmVjb21tZW5kZWQpXG4gKiBjb25zdCB7IHBoeXNpY3NXb3JsZCB9ID0gYXdhaXQgc2V0dXBNb3hpKHsgcGh5c2ljczogdHJ1ZSB9KTtcbiAqXG4gKiAvLyBPciBtYW51YWxseVxuICogY29uc3QgcGh5c2ljc1dvcmxkID0gbmV3IFBoeXNpY3NXb3JsZCh7IGdyYXZpdHk6IHsgeDogMCwgeTogOS44IH0gfSk7XG4gKiBlbmdpbmUuYWRkUGh5c2ljc1dvcmxkKHBoeXNpY3NXb3JsZCk7XG4gKlxuICogLy8gQ29sbGlzaW9uIGNhbGxiYWNrc1xuICogcGh5c2ljc1dvcmxkLm9uQ29sbGlzaW9uKCdwbGF5ZXInLCAnZW5lbXknLCAoZSkgPT4gY29uc29sZS5sb2coJ2hpdCEnKSk7XG4gKlxuICogLy8gRGVidWcgdmlzdWFsaXphdGlvblxuICogcGh5c2ljc1dvcmxkLmVuYWJsZURlYnVnUmVuZGVyZXIoc2NlbmUpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBQaHlzaWNzV29ybGQge1xuICAvKiogUGxhbmNrLmpzIHdvcmxkLiAqL1xuICBwdWJsaWMgd29ybGQ6IHBsYW5jay5Xb3JsZDtcblxuICAvKiogQ29udmVyc2lvbiBmYWN0b3IuIERlZmF1bHQgMzAuICovXG4gIHB1YmxpYyBwaXhlbHNQZXJNZXRlcjogbnVtYmVyID0gMzA7XG5cbiAgLyoqIEZpeGVkIHRpbWVzdGVwIChzZWNvbmRzKS4gRGVmYXVsdCAxLzYwLiAqL1xuICBwdWJsaWMgdGltZXN0ZXA6IG51bWJlciA9IDEvNjA7XG5cbiAgLyoqIENvbGxpc2lvbiB0YWcgcmVnaXN0cnkgZm9yIHRhZy10by1iaXRtYXNrIGNvbnZlcnNpb24uICovXG4gIHB1YmxpYyBjb2xsaXNpb25SZWdpc3RyeTogQ29sbGlzaW9uUmVnaXN0cnk7XG5cbiAgLyoqIEhhbmRsZXMgY29sbGlzaW9uIGNhbGxiYWNrcyBiZXR3ZWVuIHRhZ3MuICovXG4gIHB1YmxpYyBjb2xsaXNpb25NYW5hZ2VyOiBDb2xsaXNpb25NYW5hZ2VyO1xuXG4gIHByaXZhdGUgdmVsb2NpdHlJdGVyYXRpb25zOiBudW1iZXIgPSA4O1xuICBwcml2YXRlIHBvc2l0aW9uSXRlcmF0aW9uczogbnVtYmVyID0gMztcbiAgcHJpdmF0ZSBhY2N1bXVsYXRvcjogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBib2RpZXM6IE1hcDxwbGFuY2suQm9keSwgUGh5c2ljc0JvZHlMb2dpYz4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZGVidWdSZW5kZXJlcj86IFBoeXNpY3NEZWJ1Z1JlbmRlcmVyO1xuICBwcml2YXRlIGRlYnVnR3JhcGhpY3M/OiBQSVhJLkdyYXBoaWNzO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBoeXNpY3NXb3JsZE9wdGlvbnMgPSB7fSkge1xuICAgIC8vIEluaXRpYWxpemUgR3JhcGhpY3MgcGh5c2ljcyB0cmFja2luZyAocGF0Y2hlcyBQSVhJLkdyYXBoaWNzIG1ldGhvZHMpXG4gICAgaW5pdEdyYXBoaWNzUGh5c2ljc1RyYWNraW5nKCk7XG5cbiAgICBjb25zdCB7XG4gICAgICBncmF2aXR5ID0geyB4OiAwLCB5OiA5LjggfSxcbiAgICAgIHBpeGVsc1Blck1ldGVyID0gMzAsXG4gICAgICB2ZWxvY2l0eUl0ZXJhdGlvbnMgPSA4LFxuICAgICAgcG9zaXRpb25JdGVyYXRpb25zID0gMyxcbiAgICAgIGVuYWJsZVNsZWVwaW5nID0gdHJ1ZSxcbiAgICAgIHRpbWVzdGVwID0gMS82MFxuICAgIH0gPSBvcHRpb25zO1xuXG4gICAgdGhpcy5waXhlbHNQZXJNZXRlciA9IHBpeGVsc1Blck1ldGVyO1xuICAgIHRoaXMudmVsb2NpdHlJdGVyYXRpb25zID0gdmVsb2NpdHlJdGVyYXRpb25zO1xuICAgIHRoaXMucG9zaXRpb25JdGVyYXRpb25zID0gcG9zaXRpb25JdGVyYXRpb25zO1xuICAgIHRoaXMudGltZXN0ZXAgPSB0aW1lc3RlcDtcblxuICAgIC8vIENyZWF0ZSBQbGFuY2sgd29ybGRcbiAgICB0aGlzLndvcmxkID0gcGxhbmNrLldvcmxkKHtcbiAgICAgIGdyYXZpdHk6IHBsYW5jay5WZWMyKGdyYXZpdHkueCwgZ3Jhdml0eS55KVxuICAgIH0pO1xuXG4gICAgLy8gQ29uZmlndXJlIHNsZWVwaW5nXG4gICAgdGhpcy53b3JsZC5zZXRBbGxvd1NsZWVwaW5nKGVuYWJsZVNsZWVwaW5nKTtcblxuICAgIC8vIEluaXRpYWxpemUgY29sbGlzaW9uIHN5c3RlbVxuICAgIHRoaXMuY29sbGlzaW9uUmVnaXN0cnkgPSBuZXcgQ29sbGlzaW9uUmVnaXN0cnkoKTtcbiAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIgPSBuZXcgQ29sbGlzaW9uTWFuYWdlcih0aGlzLCB0aGlzLmNvbGxpc2lvblJlZ2lzdHJ5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGVwIHRoZSBwaHlzaWNzIHNpbXVsYXRpb24gKGNhbGxlZCBieSBFbmdpbmUgdXBkYXRlIGxvb3ApXG4gICAqIFVzZXMgZml4ZWQgdGltZXN0ZXAgZm9yIGRldGVybWluaXN0aWMgcGh5c2ljc1xuICAgKi9cbiAgc3RlcChkZWx0YVRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gZGVsdGFUaW1lO1xuXG4gICAgLy8gRml4ZWQgdGltZXN0ZXAgdXBkYXRlc1xuICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdG9yID49IHRoaXMudGltZXN0ZXApIHtcbiAgICAgIHRoaXMud29ybGQuc3RlcCh0aGlzLnRpbWVzdGVwLCB0aGlzLnZlbG9jaXR5SXRlcmF0aW9ucywgdGhpcy5wb3NpdGlvbkl0ZXJhdGlvbnMpO1xuICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSB0aGlzLnRpbWVzdGVwO1xuICAgIH1cblxuICAgIC8vIE5vdGU6IEludGVycG9sYXRpb24gZm9yIHJlbmRlcmluZyBzbW9vdGhuZXNzIGNvdWxkIGJlIGFkZGVkIGhlcmVcbiAgICAvLyBjb25zdCBhbHBoYSA9IHRoaXMuYWNjdW11bGF0b3IgLyB0aGlzLnRpbWVzdGVwO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHBoeXNpY3MgYm9keVxuICAgKi9cbiAgY3JlYXRlQm9keShkZWY6IHBsYW5jay5Cb2R5RGVmKTogcGxhbmNrLkJvZHkge1xuICAgIHJldHVybiB0aGlzLndvcmxkLmNyZWF0ZUJvZHkoZGVmKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IGEgcGh5c2ljcyBib2R5XG4gICAqL1xuICBkZXN0cm95Qm9keShib2R5OiBwbGFuY2suQm9keSk6IHZvaWQge1xuICAgIHRoaXMuYm9kaWVzLmRlbGV0ZShib2R5KTtcbiAgICB0aGlzLndvcmxkLmRlc3Ryb3lCb2R5KGJvZHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgcGh5c2ljcyBib2R5IGxvZ2ljIGNvbXBvbmVudFxuICAgKi9cbiAgcmVnaXN0ZXJCb2R5KGJvZHk6IHBsYW5jay5Cb2R5LCBsb2dpYzogUGh5c2ljc0JvZHlMb2dpYyk6IHZvaWQge1xuICAgIHRoaXMuYm9kaWVzLnNldChib2R5LCBsb2dpYyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBoeXNpY3MgYm9keSBsb2dpYyBmcm9tIFBsYW5jayBib2R5XG4gICAqL1xuICBnZXRCb2R5TG9naWMoYm9keTogcGxhbmNrLkJvZHkpOiBQaHlzaWNzQm9keUxvZ2ljIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5ib2RpZXMuZ2V0KGJvZHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJheWNhc3QgZnJvbSBvbmUgcG9pbnQgdG8gYW5vdGhlclxuICAgKi9cbiAgcmF5Y2FzdChmcm9tOiBQSVhJLlBvaW50LCB0bzogUElYSS5Qb2ludCwgY2FsbGJhY2s6IFJheWNhc3RDYWxsYmFjayk6IHZvaWQge1xuICAgIGNvbnN0IHAxID0gdGhpcy50b1BoeXNpY3NQb2ludChmcm9tKTtcbiAgICBjb25zdCBwMiA9IHRoaXMudG9QaHlzaWNzUG9pbnQodG8pO1xuXG4gICAgdGhpcy53b3JsZC5yYXlDYXN0KHAxLCBwMiwgKGZpeHR1cmUsIHBvaW50LCBub3JtYWwsIGZyYWN0aW9uKSA9PiB7XG4gICAgICBjb25zdCBwaXhlbFBvaW50ID0gdGhpcy50b1BpeGVsc1BvaW50KHBvaW50KTtcbiAgICAgIGNvbnN0IHBpeGVsTm9ybWFsID0gbmV3IFBJWEkuUG9pbnQobm9ybWFsLngsIG5vcm1hbC55KTtcbiAgICAgIHJldHVybiBjYWxsYmFjayhmaXh0dXJlLCBwaXhlbFBvaW50LCBwaXhlbE5vcm1hbCwgZnJhY3Rpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXJ5IEFBQkIgKGF4aXMtYWxpZ25lZCBib3VuZGluZyBib3gpXG4gICAqL1xuICBxdWVyeUFBQkIoYm91bmRzOiBQSVhJLlJlY3RhbmdsZSwgY2FsbGJhY2s6IChib2R5OiBwbGFuY2suQm9keSkgPT4gYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IGxvd2VyQm91bmQgPSB0aGlzLnRvUGh5c2ljc1BvaW50KG5ldyBQSVhJLlBvaW50KGJvdW5kcy54LCBib3VuZHMueSkpO1xuICAgIGNvbnN0IHVwcGVyQm91bmQgPSB0aGlzLnRvUGh5c2ljc1BvaW50KG5ldyBQSVhJLlBvaW50KGJvdW5kcy54ICsgYm91bmRzLndpZHRoLCBib3VuZHMueSArIGJvdW5kcy5oZWlnaHQpKTtcblxuICAgIHRoaXMud29ybGQucXVlcnlBQUJCKHBsYW5jay5BQUJCKGxvd2VyQm91bmQsIHVwcGVyQm91bmQpLCAoZml4dHVyZSkgPT4ge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKGZpeHR1cmUuZ2V0Qm9keSgpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWVyeSBwb2ludFxuICAgKi9cbiAgcXVlcnlQb2ludChwb2ludDogUElYSS5Qb2ludCwgY2FsbGJhY2s6IChmaXh0dXJlOiBwbGFuY2suRml4dHVyZSkgPT4gYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IHBoeXNpY3NQb2ludCA9IHRoaXMudG9QaHlzaWNzUG9pbnQocG9pbnQpO1xuXG4gICAgdGhpcy53b3JsZC5xdWVyeUFBQkIoXG4gICAgICBwbGFuY2suQUFCQihcbiAgICAgICAgcGxhbmNrLlZlYzIocGh5c2ljc1BvaW50LnggLSAwLjAwMSwgcGh5c2ljc1BvaW50LnkgLSAwLjAwMSksXG4gICAgICAgIHBsYW5jay5WZWMyKHBoeXNpY3NQb2ludC54ICsgMC4wMDEsIHBoeXNpY3NQb2ludC55ICsgMC4wMDEpXG4gICAgICApLFxuICAgICAgKGZpeHR1cmUpID0+IHtcbiAgICAgICAgaWYgKGZpeHR1cmUudGVzdFBvaW50KHBoeXNpY3NQb2ludCkpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZml4dHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHBpeGVscyB0byBtZXRlcnNcbiAgICovXG4gIHRvUGh5c2ljcyhwaXhlbHM6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHBpeGVscyAvIHRoaXMucGl4ZWxzUGVyTWV0ZXI7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBtZXRlcnMgdG8gcGl4ZWxzXG4gICAqL1xuICB0b1BpeGVscyhtZXRlcnM6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIG1ldGVycyAqIHRoaXMucGl4ZWxzUGVyTWV0ZXI7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBQSVhJIFBvaW50IChwaXhlbHMpIHRvIFBsYW5jayBWZWMyIChtZXRlcnMpXG4gICAqL1xuICB0b1BoeXNpY3NQb2ludChwb2ludDogUElYSS5Qb2ludCk6IHBsYW5jay5WZWMyIHtcbiAgICByZXR1cm4gcGxhbmNrLlZlYzIodGhpcy50b1BoeXNpY3MocG9pbnQueCksIHRoaXMudG9QaHlzaWNzKHBvaW50LnkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IFBsYW5jayBWZWMyIChtZXRlcnMpIHRvIFBJWEkgUG9pbnQgKHBpeGVscylcbiAgICovXG4gIHRvUGl4ZWxzUG9pbnQodmVjOiBwbGFuY2suVmVjMik6IFBJWEkuUG9pbnQge1xuICAgIHJldHVybiBuZXcgUElYSS5Qb2ludCh0aGlzLnRvUGl4ZWxzKHZlYy54KSwgdGhpcy50b1BpeGVscyh2ZWMueSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBkZWJ1ZyByZW5kZXJlclxuICAgKi9cbiAgZW5hYmxlRGVidWdSZW5kZXJlcihzY2VuZTogUElYSS5Db250YWluZXIsIG9wdGlvbnM6IFBoeXNpY3NEZWJ1Z09wdGlvbnMgPSB7fSk6IFBoeXNpY3NEZWJ1Z1JlbmRlcmVyIHtcbiAgICAvLyBDbGVhbiB1cCBleGlzdGluZyBkZWJ1ZyByZW5kZXJlciBpZiBhbnlcbiAgICBpZiAodGhpcy5kZWJ1Z1JlbmRlcmVyKSB7XG4gICAgICB0aGlzLmRpc2FibGVEZWJ1Z1JlbmRlcmVyKCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGRlYnVnIGdyYXBoaWNzXG4gICAgdGhpcy5kZWJ1Z0dyYXBoaWNzID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcblxuICAgIC8vIENyZWF0ZSBkZWJ1ZyByZW5kZXJlciBsb2dpY1xuICAgIHRoaXMuZGVidWdSZW5kZXJlciA9IG5ldyBQaHlzaWNzRGVidWdSZW5kZXJlcih0aGlzLCBvcHRpb25zKTtcblxuICAgIC8vIE1ha2UgaXQgYW4gZW50aXR5IGFuZCBhZGQgdG8gc2NlbmVcbiAgICBjb25zdCBkZWJ1Z0VudGl0eSA9IGFzRW50aXR5KHRoaXMuZGVidWdHcmFwaGljcyk7XG4gICAgZGVidWdFbnRpdHkubW94aUVudGl0eS5hZGRMb2dpYyh0aGlzLmRlYnVnUmVuZGVyZXIpO1xuXG4gICAgLy8gU2V0IGhpZ2hlc3Qgei1pbmRleCBzbyBpdCByZW5kZXJzIG9uIHRvcCBvZiBldmVyeXRoaW5nXG4gICAgZGVidWdFbnRpdHkuekluZGV4ID0gMTAwMDA7XG5cbiAgICAvLyBFbmFibGUgc29ydGFibGUgY2hpbGRyZW4gb24gc2NlbmUgc28gekluZGV4IHdvcmtzXG4gICAgc2NlbmUuc29ydGFibGVDaGlsZHJlbiA9IHRydWU7XG5cbiAgICAvLyBBZGQgdG8gc2NlbmUgYXQgaGlnaGVzdCB6LWluZGV4IHNvIGl0IHJlbmRlcnMgb24gdG9wXG4gICAgc2NlbmUuYWRkQ2hpbGQoZGVidWdFbnRpdHkpO1xuXG4gICAgY29uc29sZS5sb2coJ1BoeXNpY3MgZGVidWcgcmVuZGVyZXIgZW5hYmxlZC4gUHJlc3MgXCJQXCIgdG8gdG9nZ2xlIHZpc2liaWxpdHkuJyk7XG5cbiAgICByZXR1cm4gdGhpcy5kZWJ1Z1JlbmRlcmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGUgZGVidWcgcmVuZGVyZXJcbiAgICovXG4gIGRpc2FibGVEZWJ1Z1JlbmRlcmVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRlYnVnUmVuZGVyZXIgJiYgdGhpcy5kZWJ1Z0dyYXBoaWNzKSB7XG4gICAgICAvLyBSZW1vdmUgZnJvbSBzY2VuZVxuICAgICAgaWYgKHRoaXMuZGVidWdHcmFwaGljcy5wYXJlbnQpIHtcbiAgICAgICAgdGhpcy5kZWJ1Z0dyYXBoaWNzLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLmRlYnVnR3JhcGhpY3MpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbiB1cFxuICAgICAgdGhpcy5kZWJ1Z0dyYXBoaWNzLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuZGVidWdHcmFwaGljcyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZGVidWdSZW5kZXJlciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRlYnVnIHJlbmRlcmVyIGlmIGVuYWJsZWRcbiAgICovXG4gIGdldERlYnVnUmVuZGVyZXIoKTogUGh5c2ljc0RlYnVnUmVuZGVyZXIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmRlYnVnUmVuZGVyZXI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBib2RpZXMgaW4gdGhlIHdvcmxkXG4gICAqL1xuICBnZXRCb2RpZXMoKTogcGxhbmNrLkJvZHlbXSB7XG4gICAgY29uc3QgYm9kaWVzOiBwbGFuY2suQm9keVtdID0gW107XG4gICAgZm9yIChsZXQgYm9keSA9IHRoaXMud29ybGQuZ2V0Qm9keUxpc3QoKTsgYm9keTsgYm9keSA9IGJvZHkuZ2V0TmV4dCgpKSB7XG4gICAgICBib2RpZXMucHVzaChib2R5KTtcbiAgICB9XG4gICAgcmV0dXJuIGJvZGllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCBhbmQgZGVzdHJveSB0aGUgcGh5c2ljcyB3b3JsZFxuICAgKi9cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAvLyBEZXN0cm95IGFsbCBib2RpZXNcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmdldEJvZGllcygpO1xuICAgIGJvZGllcy5mb3JFYWNoKGJvZHkgPT4gdGhpcy53b3JsZC5kZXN0cm95Qm9keShib2R5KSk7XG5cbiAgICB0aGlzLmJvZGllcy5jbGVhcigpO1xuICAgIHRoaXMuZGVidWdSZW5kZXJlciA9IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBPcHRpb25zIGZvciBjb25maWd1cmluZyB0aGUgcmVzaXplIGhhbmRsZXJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNpemVIYW5kbGVyT3B0aW9ucyB7XG4gIC8qKiBSb290IGVsZW1lbnQgY29udGFpbmluZyB0aGUgY2FudmFzICovXG4gIHJvb3RFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgLyoqIFRoZSBkZXNpcmVkIHdpZHRoIG9mIHRoZSBnYW1lIHZpZXdwb3J0ICovXG4gIHdpZHRoOiBudW1iZXI7XG4gIC8qKiBUaGUgZGVzaXJlZCBoZWlnaHQgb2YgdGhlIGdhbWUgdmlld3BvcnQgKi9cbiAgaGVpZ2h0OiBudW1iZXI7XG4gIC8qKiBPcHRpb25hbCBDU1MgcHJvcGVydGllcyB0byBhcHBseSB0byB0aGUgcm9vdCBlbGVtZW50ICovXG4gIHJvb3RTdHlsZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAvKiogT3B0aW9uYWwgQ1NTIHByb3BlcnRpZXMgdG8gYXBwbHkgdG8gdGhlIGNhbnZhcyBlbGVtZW50ICovXG4gIGNhbnZhc1N0eWxlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIC8qKiBXaGV0aGVyIHRvIHVzZSBwaXhlbCBhcnQgb3B0aW1pemVkIHJlbmRlcmluZyAqL1xuICBwaXhlbEFydE1vZGU/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIERlZmF1bHQgc3R5bGVzIGFwcGxpZWQgdG8gdGhlIHJvb3QgZWxlbWVudFxuICovXG5jb25zdCBERUZBVUxUX1JPT1RfU1RZTEVTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBkaXNwbGF5OiAnZmxleCcsXG4gIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIG92ZXJmbG93OiAnaGlkZGVuJ1xufTtcblxuLyoqXG4gKiBEZWZhdWx0IHN0eWxlcyBhcHBsaWVkIHRvIHRoZSBjYW52YXMgZWxlbWVudCBpbiBwaXhlbCBhcnQgbW9kZVxuICovXG5jb25zdCBQSVhFTF9BUlRfQ0FOVkFTX1NUWUxFUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgaW1hZ2VSZW5kZXJpbmc6ICdwaXhlbGF0ZWQnXG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSByZXNpemUgaGFuZGxlciBmdW5jdGlvbiB0aGF0IG1haW50YWlucyB0aGUgYXNwZWN0IHJhdGlvIG9mIGEgY2FudmFzXG4gKiBhbmQgY2VudGVycyBpdCB3aXRoaW4gaXRzIHBhcmVudCBlbGVtZW50LlxuICogXG4gKiBAcGFyYW0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIHJlc2l6ZSBoYW5kbGVyXG4gKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCB0byBoYW5kbGUgcmVzaXplIGV2ZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzaXplSGFuZGxlcihvcHRpb25zOiBSZXNpemVIYW5kbGVyT3B0aW9ucyk6ICgpID0+IHZvaWQge1xuICBjb25zdCB7XG4gICAgcm9vdEVsZW1lbnQsXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIHJvb3RTdHlsZXMgPSBERUZBVUxUX1JPT1RfU1RZTEVTLFxuICAgIGNhbnZhc1N0eWxlcyA9IHt9LFxuICAgIHBpeGVsQXJ0TW9kZSA9IGZhbHNlXG4gIH0gPSBvcHRpb25zO1xuXG4gIC8vIEFwcGx5IHJvb3QgZWxlbWVudCBzdHlsZXNcbiAgT2JqZWN0LmVudHJpZXMocm9vdFN0eWxlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgcm9vdEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSk7XG4gIH0pO1xuXG4gIC8vIENvbWJpbmUgZGVmYXVsdCBjYW52YXMgc3R5bGVzIHdpdGggdXNlci1wcm92aWRlZCBvbmVzXG4gIGNvbnN0IGZpbmFsQ2FudmFzU3R5bGVzID0gcGl4ZWxBcnRNb2RlXG4gICAgPyB7IC4uLlBJWEVMX0FSVF9DQU5WQVNfU1RZTEVTLCAuLi5jYW52YXNTdHlsZXMgfVxuICAgIDogY2FudmFzU3R5bGVzO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgLy8gR2V0IHRoZSBwYXJlbnQgZGltZW5zaW9uc1xuICAgIGNvbnN0IHBhcmVudFdpZHRoID0gcm9vdEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgY29uc3QgcGFyZW50SGVpZ2h0ID0gcm9vdEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuXG4gICAgLy8gTWFpbnRhaW4gYXNwZWN0IHJhdGlvXG4gICAgY29uc3QgcmF0aW8gPSBNYXRoLm1pbihcbiAgICAgIHBhcmVudFdpZHRoIC8gd2lkdGgsXG4gICAgICBwYXJlbnRIZWlnaHQgLyBoZWlnaHRcbiAgICApO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBjYW52YXMgZWxlbWVudCBpZiBpdCBleGlzdHNcbiAgICBpZiAocm9vdEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgY29uc3QgY2FudmFzID0gcm9vdEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICBcbiAgICAgIC8vIFNldCBkaW1lbnNpb25zIHdoaWxlIG1haW50YWluaW5nIGFzcGVjdCByYXRpb1xuICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gYCR7TWF0aC5yb3VuZCh3aWR0aCAqIHJhdGlvKX1weGA7XG4gICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7TWF0aC5yb3VuZChoZWlnaHQgKiByYXRpbyl9cHhgO1xuICAgICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgXG4gICAgICAvLyBBcHBseSBjdXN0b20gY2FudmFzIHN0eWxlc1xuICAgICAgT2JqZWN0LmVudHJpZXMoZmluYWxDYW52YXNTdHlsZXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBjYW52YXMuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogU2V0cyB1cCByZXNwb25zaXZlIHJlc2l6aW5nIGZvciBhIFBJWEkgY2FudmFzIGFwcGxpY2F0aW9uXG4gKiBcbiAqIEBwYXJhbSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgcmVzaXplIGhhbmRsZXJcbiAqIEByZXR1cm5zIEEgY2xlYW51cCBmdW5jdGlvbiB0byByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFJlc3BvbnNpdmVDYW52YXMob3B0aW9uczogUmVzaXplSGFuZGxlck9wdGlvbnMpOiAoKSA9PiB2b2lkIHtcbiAgY29uc3QgcmVzaXplSGFuZGxlciA9IGNyZWF0ZVJlc2l6ZUhhbmRsZXIob3B0aW9ucyk7XG4gIFxuICAvLyBJbml0aWFsIHJlc2l6ZVxuICByZXNpemVIYW5kbGVyKCk7XG4gIFxuICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUhhbmRsZXIpO1xuICBcbiAgLy8gUmV0dXJuIGNsZWFudXAgZnVuY3Rpb25cbiAgcmV0dXJuICgpID0+IHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplSGFuZGxlcik7XG4gIH07XG59ICIsImltcG9ydCBQSVhJIGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0IHsgQXNzZXRMb2FkZXIgfSBmcm9tICcuLi9tYWluL2Fzc2V0LWxvYWRlcic7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tICcuLi9tYWluL2NhbWVyYSc7XG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi9tYWluL2VuZ2luZSc7XG5pbXBvcnQgeyBSZW5kZXJNYW5hZ2VyIH0gZnJvbSAnLi4vbWFpbi9yZW5kZXItbWFuYWdlcic7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJy4uL21haW4vc2NlbmUnO1xuaW1wb3J0IHsgUGh5c2ljc1dvcmxkLCB0eXBlIFBoeXNpY3NXb3JsZE9wdGlvbnMgfSBmcm9tICcuL3BoeXNpY3MnO1xuaW1wb3J0IHsgTG9hZGluZ1NjZW5lLCB0eXBlIExvYWRpbmdTY2VuZU9wdGlvbnMgfSBmcm9tICcuL2xvYWRpbmctc2NlbmUnO1xuXG4vKiogT3B0aW9ucyBmb3IgcGl4ZWwtcGVyZmVjdCByZW5kZXJpbmcgKHBpeGVsIGFydCBnYW1lcykuICovXG5leHBvcnQgaW50ZXJmYWNlIFBpeGVsUGVyZmVjdE9wdGlvbnMge1xuICAvKiogRW5hYmxlIHJlc29sdXRpb246MSwgYW50aWFsaWFzOmZhbHNlLCByb3VuZFBpeGVsczp0cnVlLiBEZWZhdWx0IHRydWUuICovXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xuICAvKiogQXBwbHkgQ1NTIGltYWdlUmVuZGVyaW5nOnBpeGVsYXRlZCB0byBjYW52YXMuIERlZmF1bHQgdHJ1ZS4gKi9cbiAgaW1hZ2VSZW5kZXJpbmc/OiBib29sZWFuO1xufVxuXG4vKiogQ29uZmlndXJhdGlvbiBmb3Igc2V0dXBNb3hpKCkuICovXG5leHBvcnQgaW50ZXJmYWNlIFNldHVwTW94aUFyZ3Mge1xuICAvKiogQ29udGFpbmVyIGVsZW1lbnQgdG8gYXR0YWNoIHRoZSBjYW52YXMuICovXG4gIGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgLyoqIFBJWEkgcmVuZGVyIG9wdGlvbnMgKHdpZHRoLCBoZWlnaHQsIGJhY2tncm91bmRDb2xvciwgZXRjKS4gKi9cbiAgcmVuZGVyT3B0aW9ucz86IFBhcnRpYWw8UElYSS5BdXRvRGV0ZWN0T3B0aW9ucz47XG4gIC8qKiBCYWNrZ3JvdW5kIGNvbG9yIChoZXggbnVtYmVyIGxpa2UgMHgxYTFhMmUpLiBDb252ZW5pZW5jZSBvcHRpb24uICovXG4gIGJhY2tncm91bmRDb2xvcj86IG51bWJlcjtcbiAgLyoqIEVuYWJsZSBwaHlzaWNzLiBQYXNzIHRydWUgZm9yIGRlZmF1bHRzIG9yIFBoeXNpY3NXb3JsZE9wdGlvbnMuICovXG4gIHBoeXNpY3M/OiBQaHlzaWNzV29ybGRPcHRpb25zIHwgYm9vbGVhbjtcbiAgLyoqIFNob3cgbG9hZGluZyBvdmVybGF5IGR1cmluZyBhc3NldCBsb2FkaW5nLiAqL1xuICBzaG93TG9hZGluZ1NjZW5lPzogYm9vbGVhbjtcbiAgLyoqIEN1c3RvbWl6ZSBsb2FkaW5nIHNjZW5lIGFwcGVhcmFuY2UuICovXG4gIGxvYWRpbmdTY2VuZU9wdGlvbnM/OiBMb2FkaW5nU2NlbmVPcHRpb25zO1xuICAvKiogRW5hYmxlIHBpeGVsLXBlcmZlY3QgcmVuZGVyaW5nLiBQYXNzIHRydWUgZm9yIGRlZmF1bHRzLiAqL1xuICBwaXhlbFBlcmZlY3Q/OiBib29sZWFuIHwgUGl4ZWxQZXJmZWN0T3B0aW9ucztcbn1cblxuLyoqIFJldHVybiB2YWx1ZSBmcm9tIHNldHVwTW94aSgpLiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXR1cE1veGlSZXN1bHQge1xuICBzY2VuZTogU2NlbmU7XG4gIGVuZ2luZTogRW5naW5lO1xuICBQSVhJQXNzZXRzOiBBc3NldExvYWRlclsnUElYSUFzc2V0cyddO1xuICByZW5kZXJlcjogUElYSS5SZW5kZXJlcjtcbiAgbG9hZEFzc2V0czogQXNzZXRMb2FkZXJbJ2xvYWRBc3NldHMnXTtcbiAgY2FtZXJhOiBDYW1lcmE7XG4gIHBoeXNpY3NXb3JsZD86IFBoeXNpY3NXb3JsZDtcbiAgbG9hZGluZ1NjZW5lPzogTG9hZGluZ1NjZW5lO1xufVxuXG4vKiogRGVmYXVsdCBQSVhJIHJlbmRlciBvcHRpb25zLiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRSZW5kZXJPcHRpb25zID0ge1xuICB3aWR0aDogMTI4MCxcbiAgaGVpZ2h0OiA3MjAsXG4gIGJhY2tncm91bmRDb2xvcjogMHgxMDk5YmIsXG4gIHJlc29sdXRpb246IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEsXG4gIGF1dG9EZW5zaXR5OiB0cnVlLFxuICBhbnRpYWxpYXM6IHRydWVcbn0gYXMgUGFydGlhbDxQSVhJLkF1dG9EZXRlY3RPcHRpb25zPjtcblxuLyoqXG4gKiBJbml0aWFsaXplIE1veGkuIE1haW4gZW50cnkgcG9pbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCB7IHNjZW5lLCBlbmdpbmUsIGxvYWRBc3NldHMsIGNhbWVyYSB9ID0gYXdhaXQgc2V0dXBNb3hpKHtcbiAqICAgaG9zdEVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKSxcbiAqICAgcmVuZGVyT3B0aW9uczogeyB3aWR0aDogMTI4MCwgaGVpZ2h0OiA3MjAgfSxcbiAqICAgcGh5c2ljczogdHJ1ZSxcbiAqICAgcGl4ZWxQZXJmZWN0OiB0cnVlXG4gKiB9KTtcbiAqXG4gKiBhd2FpdCBsb2FkQXNzZXRzKFt7IHNyYzogJy4vc3ByaXRlLnBuZycsIGFsaWFzOiAnc3ByaXRlJyB9XSk7XG4gKiBzY2VuZS5hZGRDaGlsZChhc0VudGl0eShuZXcgUElYSS5TcHJpdGUoUElYSUFzc2V0cy5nZXQoJ3Nwcml0ZScpKSkpO1xuICogc2NlbmUuaW5pdCgpO1xuICogZW5naW5lLnN0YXJ0KCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldHVwTW94aSh7XG4gIGhvc3RFbGVtZW50LFxuICByZW5kZXJPcHRpb25zID0gZGVmYXVsdFJlbmRlck9wdGlvbnMsXG4gIGJhY2tncm91bmRDb2xvcixcbiAgcGh5c2ljcyxcbiAgc2hvd0xvYWRpbmdTY2VuZSA9IGZhbHNlLFxuICBsb2FkaW5nU2NlbmVPcHRpb25zID0ge30sXG4gIHBpeGVsUGVyZmVjdFxufSA9IHt9IGFzIFNldHVwTW94aUFyZ3MpIHtcbiAgLy8gUHJvY2VzcyBwaXhlbC1wZXJmZWN0IG9wdGlvbnNcbiAgbGV0IGZpbmFsUmVuZGVyT3B0aW9ucyA9IHsgLi4ucmVuZGVyT3B0aW9ucyB9O1xuICBsZXQgYXBwbHlJbWFnZVJlbmRlcmluZyA9IGZhbHNlO1xuXG4gIGlmIChwaXhlbFBlcmZlY3QpIHtcbiAgICBjb25zdCBwcE9wdGlvbnMgPSB0eXBlb2YgcGl4ZWxQZXJmZWN0ID09PSAnYm9vbGVhbidcbiAgICAgID8geyBlbmFibGVkOiB0cnVlLCBpbWFnZVJlbmRlcmluZzogdHJ1ZSB9XG4gICAgICA6IHBpeGVsUGVyZmVjdDtcblxuICAgIGlmIChwcE9wdGlvbnMuZW5hYmxlZCAhPT0gZmFsc2UpIHtcbiAgICAgIC8vIEFwcGx5IHBpeGVsLXBlcmZlY3QgcmVuZGVyIHNldHRpbmdzXG4gICAgICBmaW5hbFJlbmRlck9wdGlvbnMgPSB7XG4gICAgICAgIC4uLmZpbmFsUmVuZGVyT3B0aW9ucyxcbiAgICAgICAgcmVzb2x1dGlvbjogMSxcbiAgICAgICAgYW50aWFsaWFzOiBmYWxzZSxcbiAgICAgICAgcm91bmRQaXhlbHM6IHRydWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgYXBwbHlJbWFnZVJlbmRlcmluZyA9IHBwT3B0aW9ucy5pbWFnZVJlbmRlcmluZyAhPT0gZmFsc2U7XG4gIH1cblxuICBjb25zdCB7IHJlbmRlcmVyIH0gPSBhd2FpdCBSZW5kZXJNYW5hZ2VyLmNyZWF0ZShob3N0RWxlbWVudCwgZmluYWxSZW5kZXJPcHRpb25zKTtcblxuICAvLyBBcHBseSBiYWNrZ3JvdW5kIGNvbG9yIGlmIHNwZWNpZmllZFxuICBpZiAoYmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICByZW5kZXJlci5iYWNrZ3JvdW5kLmNvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuICB9XG5cbiAgLy8gQXBwbHkgY2FudmFzIENTUyBmb3IgcGl4ZWwtcGVyZmVjdCBzY2FsaW5nIGlmIHJlcXVlc3RlZFxuICBpZiAoYXBwbHlJbWFnZVJlbmRlcmluZykge1xuICAgIGNvbnN0IGNhbnZhcyA9IHJlbmRlcmVyLmNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBjYW52YXMuc3R5bGUuaW1hZ2VSZW5kZXJpbmcgPSAncGl4ZWxhdGVkJztcbiAgICBjYW52YXMuc3R5bGUuaW1hZ2VSZW5kZXJpbmcgPSAnLW1vei1jcmlzcC1lZGdlcyc7XG4gICAgY2FudmFzLnN0eWxlLmltYWdlUmVuZGVyaW5nID0gJ2NyaXNwLWVkZ2VzJztcbiAgfVxuXG4gIGNvbnN0IHNjZW5lID0gbmV3IFNjZW5lKHJlbmRlcmVyKTtcbiAgY29uc3QgZW5naW5lID0gbmV3IEVuZ2luZShzY2VuZSk7XG5cbiAgLy8gR2V0IHRoZSBBc3NldExvYWRlciBpbnN0YW5jZVxuICBjb25zdCBhc3NldExvYWRlciA9IG5ldyBBc3NldExvYWRlcigpO1xuICBjb25zdCB7IFBJWElBc3NldHMsIGxvYWRBc3NldHMgfSA9IGFzc2V0TG9hZGVyO1xuXG4gIGNvbnN0IGNhbWVyYSA9IG5ldyBDYW1lcmEoc2NlbmUsIHJlbmRlcmVyKTtcblxuICAvLyBTZXR1cCBwaHlzaWNzIGlmIHJlcXVlc3RlZFxuICBsZXQgcGh5c2ljc1dvcmxkOiBQaHlzaWNzV29ybGQgfCB1bmRlZmluZWQ7XG5cbiAgaWYgKHBoeXNpY3MpIHtcbiAgICBjb25zdCBwaHlzaWNzT3B0aW9ucyA9IHR5cGVvZiBwaHlzaWNzID09PSAnYm9vbGVhbidcbiAgICAgID8ge31cbiAgICAgIDogcGh5c2ljcztcblxuICAgIHBoeXNpY3NXb3JsZCA9IG5ldyBQaHlzaWNzV29ybGQocGh5c2ljc09wdGlvbnMpO1xuICAgIGVuZ2luZS5hZGRQaHlzaWNzV29ybGQocGh5c2ljc1dvcmxkKTtcbiAgfVxuXG4gIC8vIFNldHVwIGxvYWRpbmcgc2NlbmUgaWYgcmVxdWVzdGVkXG4gIGxldCBsb2FkaW5nU2NlbmU6IExvYWRpbmdTY2VuZSB8IHVuZGVmaW5lZDtcbiAgaWYgKHNob3dMb2FkaW5nU2NlbmUpIHtcbiAgICBsb2FkaW5nU2NlbmUgPSBuZXcgTG9hZGluZ1NjZW5lKGxvYWRpbmdTY2VuZU9wdGlvbnMpO1xuICAgIGxvYWRpbmdTY2VuZS56SW5kZXggPSAxMDAwMDsgLy8gRW5zdXJlIGl0J3Mgb24gdG9wXG4gICAgbG9hZGluZ1NjZW5lLmluaXQocmVuZGVyZXIpO1xuICAgIHNjZW5lLmFkZENoaWxkKGxvYWRpbmdTY2VuZSk7XG4gICAgbG9hZGluZ1NjZW5lLmhpZGUoKTtcblxuICAgIC8vIEhvb2sgaW50byBhc3NldCBsb2FkaW5nIGV2ZW50c1xuICAgIGFzc2V0TG9hZGVyLm9uKCdsb2FkaW5nOnN0YXJ0JywgKCkgPT4ge1xuICAgICAgaWYgKGxvYWRpbmdTY2VuZSkge1xuICAgICAgICBsb2FkaW5nU2NlbmUuc2hvdygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYXNzZXRMb2FkZXIub24oJ2xvYWRpbmc6ZW5kJywgKCkgPT4ge1xuICAgICAgaWYgKGxvYWRpbmdTY2VuZSkge1xuICAgICAgICBsb2FkaW5nU2NlbmUuaGlkZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzY2VuZSxcbiAgICBlbmdpbmUsXG4gICAgUElYSUFzc2V0cyxcbiAgICByZW5kZXJlcixcbiAgICBsb2FkQXNzZXRzLFxuICAgIGNhbWVyYSxcbiAgICBwaHlzaWNzV29ybGQsXG4gICAgbG9hZGluZ1NjZW5lXG4gIH07XG59XG5cbiIsImltcG9ydCB7IExvZ2ljIH0gZnJvbSAnLi4vbWFpbi9sb2dpYyc7XG5pbXBvcnQgeyBDb250YWluZXIsIFJlbmRlcmVyIH0gZnJvbSAncGl4aS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZUxvZ2ljIGV4dGVuZHMgTG9naWM8Q29udGFpbmVyPiB7XG4gIHByaXZhdGUgX2VudGl0eTogQ29udGFpbmVyO1xuXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuXG4gIGdldCBlbnRpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0eTtcbiAgfVxuXG4gIGluaXQoZW50aXR5OiBDb250YWluZXIsIHJlbmRlcmVyOiBSZW5kZXJlcikge1xuICAgIHRoaXMuX2VudGl0eSA9IGVudGl0eTtcbiAgICBzdXBlci5pbml0KGVudGl0eSwgcmVuZGVyZXIpO1xuICB9XG5cbiAgb25FbnRlcihzdGF0ZTogc3RyaW5nKSB7XG4gIH1cblxuICBvbkV4aXQoc3RhdGU6IHN0cmluZykge1xuICB9XG5cbiAgdXBkYXRlKGVudGl0eTogQ29udGFpbmVyLCBkZWx0YVRpbWU6IG51bWJlcikge1xuICB9XG4gIFxufVxuXG4iLCJpbXBvcnQgeyBTdGF0ZUxvZ2ljIH0gZnJvbSAnLi9zdGF0ZS1sb2dpYyc7XG5cbi8qKiBFbWl0dGVkIG9uIHN0YXRlIHRyYW5zaXRpb25zLiAqL1xuZXhwb3J0IHR5cGUgU3RhdGVDaGFuZ2VFdmVudCA9IHtcbiAgcHJldlN0YXRlOiBzdHJpbmcgfCBudWxsO1xuICBuZXdTdGF0ZTogc3RyaW5nO1xufTtcblxudHlwZSBTdGF0ZUNoYW5nZUV2ZW50TGlzdGVuZXIgPSAoZXZlbnQ6IFN0YXRlQ2hhbmdlRXZlbnQpID0+IHZvaWQ7XG50eXBlIFN0YXRlTG9naWNSZWNvcmRzID0gUmVjb3JkPHN0cmluZywgU3RhdGVMb2dpYz47XG5cbi8qKlxuICogRmluaXRlIFN0YXRlIE1hY2hpbmUgZm9yIG1hbmFnaW5nIGVudGl0eSBzdGF0ZXMuXG4gKiBTdGF0ZXMgYXJlIFN0YXRlTG9naWMgaW5zdGFuY2VzIHdpdGggb25FbnRlci9vbkV4aXQvdXBkYXRlIG1ldGhvZHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiAvLyBDcmVhdGUgc3RhdGVzXG4gKiBjbGFzcyBJZGxlU3RhdGUgZXh0ZW5kcyBTdGF0ZUxvZ2ljIHsgLi4uIH1cbiAqIGNsYXNzIFJ1blN0YXRlIGV4dGVuZHMgU3RhdGVMb2dpYyB7IC4uLiB9XG4gKlxuICogLy8gQ3JlYXRlIEZTTSB3aXRoIHN0YXRlc1xuICogY29uc3QgZnNtID0gbmV3IFN0YXRlTWFjaGluZSh7XG4gKiAgIGlkbGU6IG5ldyBJZGxlU3RhdGUoKSxcbiAqICAgcnVuOiBuZXcgUnVuU3RhdGUoKVxuICogfSk7XG4gKlxuICogLy8gQ2hhbmdlIHN0YXRlXG4gKiBmc20uc2V0U3RhdGUoJ2lkbGUnKTtcbiAqIGZzbS5zZXRTdGF0ZSgncnVuJyk7XG4gKlxuICogLy8gTGlzdGVuIGZvciBzdGF0ZSBjaGFuZ2VzXG4gKiBmc20uYWRkRXZlbnRMaXN0ZW5lcignc3RhdGVDaGFuZ2UnLCAoZSkgPT4ge1xuICogICBjb25zb2xlLmxvZyhgJHtlLmRldGFpbC5wcmV2U3RhdGV9IC0+ICR7ZS5kZXRhaWwubmV3U3RhdGV9YCk7XG4gKiB9KTtcbiAqXG4gKiAvLyBDYWxsIGluIHVwZGF0ZSBsb29wXG4gKiBmc20udXBkYXRlKGRlbHRhVGltZSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXRlTWFjaGluZSBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgcHJpdmF0ZSBfc3RhdGVzOiBTdGF0ZUxvZ2ljUmVjb3JkcyA9IHt9O1xuICBwcml2YXRlIF9jdXJyZW50U3RhdGU6IFN0YXRlTG9naWMgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfY3VycmVudFN0YXRlTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3Ioc3RhdGVzOiBTdGF0ZUxvZ2ljUmVjb3JkcyA9IHt9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9zdGF0ZXMgPSBzdGF0ZXM7XG4gIH1cblxuICB1cGRhdGUoZGVsdGFUaW1lOiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFN0YXRlKSB7XG4gICAgICB0aGlzLl9jdXJyZW50U3RhdGUudXBkYXRlKHRoaXMuX2N1cnJlbnRTdGF0ZS5lbnRpdHksIGRlbHRhVGltZSk7XG4gICAgfVxuICB9XG4gIFxuICBzZXRTdGF0ZShzdGF0ZU5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IG5leHRTdGF0ZSA9IHRoaXMuX3N0YXRlc1tzdGF0ZU5hbWVdO1xuICAgIGlmKCFuZXh0U3RhdGUpIHJldHVybjtcblxuICAgIGNvbnN0IHByZXZTdGF0ZU5hbWUgPSB0aGlzLl9jdXJyZW50U3RhdGVOYW1lO1xuICAgIFxuICAgIGlmICh0aGlzLl9jdXJyZW50U3RhdGUpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRTdGF0ZS5vbkV4aXQoc3RhdGVOYW1lKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50U3RhdGUgPSB0aGlzLl9zdGF0ZXNbc3RhdGVOYW1lXTtcbiAgICB0aGlzLl9jdXJyZW50U3RhdGVOYW1lID0gc3RhdGVOYW1lO1xuICAgIHRoaXMuX2N1cnJlbnRTdGF0ZS5vbkVudGVyKHN0YXRlTmFtZSk7XG4gICAgXG4gICAgLy8gRGlzcGF0Y2ggdGhlIHN0YXRlIGNoYW5nZSBldmVudFxuICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50PFN0YXRlQ2hhbmdlRXZlbnQ+KCdzdGF0ZUNoYW5nZScsIHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICBwcmV2U3RhdGU6IHByZXZTdGF0ZU5hbWUsXG4gICAgICAgIG5ld1N0YXRlOiBzdGF0ZU5hbWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgYWRkU3RhdGUoc3RhdGU6IFN0YXRlTG9naWMpIHtcbiAgICB0aGlzLl9zdGF0ZXNbc3RhdGUubmFtZV0gPSBzdGF0ZTtcbiAgfVxuICBcbiAgZ2V0IGN1cnJlbnRTdGF0ZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFN0YXRlTmFtZTtcbiAgfVxufVxuXG4iLCIvKipcbiAqIFV0aWxpdHkgdG8gY29udmVydCBTVkcgdG8gUElYSSB0ZXh0dXJlXG4gKi9cbmltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU1ZHVG9UZXh0dXJlT3B0aW9ucyB7XG4gIHN2Z1N0cmluZzogc3RyaW5nO1xuICB3aWR0aDogbnVtYmVyOyAgLy8gRGVzaXJlZCB3aWR0aCBpbiBhY3R1YWwgcGl4ZWxzXG4gIGhlaWdodDogbnVtYmVyOyAvLyBEZXNpcmVkIGhlaWdodCBpbiBhY3R1YWwgcGl4ZWxzXG4gIGNvbG9yPzogbnVtYmVyOyAvLyBDb2xvciB0byByZXBsYWNlIFwiY3VycmVudENvbG9yXCIgd2l0aFxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIFNWRyBzdHJpbmcgdG8gYSBQSVhJIHRleHR1cmVcbiAqIEFjY291bnRzIGZvciBwcm9wZXIgc2NhbGluZyBhbmQgcmVuZGVycyBhdCB0aGUgZXhhY3QgcGl4ZWwgZGltZW5zaW9ucyBuZWVkZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN2Z1RvVGV4dHVyZShvcHRpb25zOiBTVkdUb1RleHR1cmVPcHRpb25zKTogUHJvbWlzZTxQSVhJLlRleHR1cmU+IHtcbiAgY29uc3QgeyBzdmdTdHJpbmcsIHdpZHRoLCBoZWlnaHQsIGNvbG9yID0gMHgwMDAwMDAgfSA9IG9wdGlvbnM7XG5cbiAgLy8gUmVwbGFjZSBjdXJyZW50Q29sb3Igd2l0aCBhY3R1YWwgY29sb3JcbiAgY29uc3QgY29sb3JIZXggPSAnIycgKyBjb2xvci50b1N0cmluZygxNikucGFkU3RhcnQoNiwgJzAnKTtcbiAgY29uc3QgcHJvY2Vzc2VkU1ZHID0gc3ZnU3RyaW5nLnJlcGxhY2UoL2N1cnJlbnRDb2xvci9nLCBjb2xvckhleCk7XG5cbiAgLy8gQ3JlYXRlIGEgYmxvYiBmcm9tIHRoZSBTVkcgc3RyaW5nXG4gIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbcHJvY2Vzc2VkU1ZHXSwgeyB0eXBlOiAnaW1hZ2Uvc3ZnK3htbCcgfSk7XG4gIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cbiAgLy8gTG9hZCBhcyBpbWFnZVxuICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgaW1nLndpZHRoID0gd2lkdGg7XG4gIGltZy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKCk7XG4gICAgaW1nLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgaW1nLnNyYyA9IHVybDtcbiAgfSk7XG5cbiAgLy8gQ3JlYXRlIGNhbnZhcyBhbmQgZHJhdyB0aGUgaW1hZ2UgYXQgdGhlIGV4YWN0IHNpemVcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICBpZiAoIWN0eCkge1xuICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgY2FudmFzIGNvbnRleHQnKTtcbiAgfVxuXG4gIC8vIERyYXcgdGhlIGltYWdlXG4gIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAvLyBDbGVhbiB1cFxuICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG5cbiAgLy8gQ3JlYXRlIHRleHR1cmUgZnJvbSBjYW52YXNcbiAgY29uc3QgdGV4dHVyZSA9IFBJWEkuVGV4dHVyZS5mcm9tKGNhbnZhcyk7XG4gIHRleHR1cmUuc291cmNlLnNjYWxlTW9kZSA9ICdsaW5lYXInOyAvLyBTbW9vdGggc2NhbGluZyBmb3IgU1ZHXG5cbiAgcmV0dXJuIHRleHR1cmU7XG59XG4iLCJpbXBvcnQgUElYSSBmcm9tICdwaXhpLmpzJztcblxuLyoqXG4gKiBTZXF1ZW5jZSBpbmZvcm1hdGlvbiBmb3IgYW4gYW5pbWF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VxdWVuY2VJbmZvIHtcbiAgLyoqIEFycmF5IG9mIGZyYW1lIGluZGljZXMgZnJvbSB0aGUgdGV4dHVyZSBhdGxhcyAqL1xuICBmcmFtZXM6IG51bWJlcltdO1xuICAvKiogU3BlZWQgb2YgYW5pbWF0aW9uIChmcmFtZXMgcGVyIG1zKSAqL1xuICBhbmltYXRpb25TcGVlZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIE1hbmFnZXMgZnJhbWUgc2VxdWVuY2VzIGZvciBhbmltYXRlZCBzcHJpdGVzXG4gKiBQcm92aWRlcyB1dGlsaXR5IGZ1bmN0aW9ucyBmb3Igd29ya2luZyB3aXRoIHNwcml0ZSBzaGVldCBhbmltYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0dXJlRnJhbWVTZXF1ZW5jZXMge1xuICBwcml2YXRlIGZyYW1lczogUElYSS5UZXh0dXJlW10gPSBbXTtcbiAgcHJpdmF0ZSBzZXF1ZW5jZXM6IFJlY29yZDxzdHJpbmcsIFNlcXVlbmNlSW5mbz4gPSB7fTtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFRleHR1cmVGcmFtZVNlcXVlbmNlc1xuICAgKiBAcGFyYW0gZnJhbWVzIC0gQXJyYXkgb2YgdGV4dHVyZXMgZnJvbSBhIHNwcml0ZXNoZWV0XG4gICAqIEBwYXJhbSBzZXF1ZW5jZXMgLSBOYW1lZCBzZXF1ZW5jZXMgd2l0aCBmcmFtZSBpbmRpY2VzIGFuZCBhbmltYXRpb24gc3BlZWRcbiAgICovXG4gIGNvbnN0cnVjdG9yKGZyYW1lczogUElYSS5UZXh0dXJlW10sIHNlcXVlbmNlczogUmVjb3JkPHN0cmluZywgU2VxdWVuY2VJbmZvPiA9IHt9KSB7XG4gICAgdGhpcy5mcmFtZXMgPSBmcmFtZXM7XG4gICAgdGhpcy5zZXF1ZW5jZXMgPSBzZXF1ZW5jZXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbmV3IGFuaW1hdGlvbiBzZXF1ZW5jZVxuICAgKiBAcGFyYW0gbmFtZSAtIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc2VxdWVuY2VcbiAgICogQHBhcmFtIGZyYW1lSW5kaWNlcyAtIEFycmF5IG9mIGZyYW1lIGluZGljZXMgZnJvbSB0aGUgdGV4dHVyZSBhdGxhc1xuICAgKiBAcGFyYW0gYW5pbWF0aW9uU3BlZWQgLSBTcGVlZCBvZiBhbmltYXRpb24gKGZyYW1lcyBwZXIgbXMpXG4gICAqL1xuICBhZGRTZXF1ZW5jZShuYW1lOiBzdHJpbmcsIGZyYW1lSW5kaWNlczogbnVtYmVyW10sIGFuaW1hdGlvblNwZWVkOiBudW1iZXIgPSAxKSB7XG4gICAgdGhpcy5zZXF1ZW5jZXNbbmFtZV0gPSB7XG4gICAgICBmcmFtZXM6IGZyYW1lSW5kaWNlcyxcbiAgICAgIGFuaW1hdGlvblNwZWVkXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBzZXF1ZW5jZSBieSBuYW1lXG4gICAqL1xuICBnZXRTZXF1ZW5jZShuYW1lOiBzdHJpbmcpOiBTZXF1ZW5jZUluZm8gfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5zZXF1ZW5jZXNbbmFtZV0gfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBzcGVjaWZpYyBmcmFtZSBieSBpbmRleFxuICAgKi9cbiAgZ2V0RnJhbWUoaW5kZXg6IG51bWJlcik6IFBJWEkuVGV4dHVyZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmZyYW1lc1tpbmRleF0gfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBzcGVjaWZpYyBmcmFtZSBmcm9tIGEgc2VxdWVuY2UgYnkgaW5kZXhcbiAgICovXG4gIGdldEZyYW1lRnJvbVNlcXVlbmNlKHNlcXVlbmNlTmFtZTogc3RyaW5nLCBmcmFtZUluZGV4OiBudW1iZXIpOiBQSVhJLlRleHR1cmUgfCBudWxsIHtcbiAgICBjb25zdCBzZXF1ZW5jZSA9IHRoaXMuZ2V0U2VxdWVuY2Uoc2VxdWVuY2VOYW1lKTtcbiAgICBpZiAoIXNlcXVlbmNlKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAvLyBHZXQgdGhlIGFwcHJvcHJpYXRlIGZyYW1lIGluZGV4IGZyb20gdGhlIHNlcXVlbmNlXG4gICAgY29uc3Qgc2VxdWVuY2VGcmFtZUluZGV4ID0gc2VxdWVuY2UuZnJhbWVzW2ZyYW1lSW5kZXggJSBzZXF1ZW5jZS5mcmFtZXMubGVuZ3RoXTtcbiAgICBcbiAgICAvLyBSZXR1cm4gdGhlIHRleHR1cmVcbiAgICByZXR1cm4gdGhpcy5mcmFtZXNbc2VxdWVuY2VGcmFtZUluZGV4XSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgZnJhbWVzIGZvciBhIHNlcXVlbmNlXG4gICAqL1xuICBnZXRGcmFtZVNlcXVlbmNlKG5hbWU6IHN0cmluZyk6IFBJWEkuVGV4dHVyZVtdIHtcbiAgICBjb25zdCBzZXF1ZW5jZSA9IHRoaXMuZ2V0U2VxdWVuY2UobmFtZSk7XG4gICAgaWYgKCFzZXF1ZW5jZSkgcmV0dXJuIFtdO1xuICAgIFxuICAgIHJldHVybiBzZXF1ZW5jZS5mcmFtZXMubWFwKGluZGV4ID0+IHRoaXMuZnJhbWVzW2luZGV4XSkuZmlsdGVyKEJvb2xlYW4pO1xuICB9XG59ICIsImltcG9ydCBQSVhJIGZyb20gJ3BpeGkuanMnO1xuXG5cbi8qKlxuICogT3B0aW9ucyBmb3IgY3JlYXRpbmcgdGV4dHVyZSBmcmFtZXMgZnJvbSBhIHNwcml0ZXNoZWV0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXNUZXh0dXJlRnJhbWVzT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBXaWR0aCBvZiBlYWNoIGZyYW1lIGluIHBpeGVsc1xuICAgKi9cbiAgZnJhbWVXaWR0aDogbnVtYmVyO1xuICBcbiAgLyoqXG4gICAqIEhlaWdodCBvZiBlYWNoIGZyYW1lIGluIHBpeGVsc1xuICAgKi9cbiAgZnJhbWVIZWlnaHQ6IG51bWJlcjtcbiAgXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgc3ByaXRlc2hlZXRcbiAgICovXG4gIGNvbHVtbnM6IG51bWJlcjtcbiAgXG4gIC8qKlxuICAgKiBOdW1iZXIgb2Ygcm93cyBpbiB0aGUgc3ByaXRlc2hlZXRcbiAgICovXG4gIHJvd3M6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBEZWZhdWx0IHRleHR1cmUgZnJhbWUgb3B0aW9uc1xuICovXG5jb25zdCBkZWZhdWx0T3B0aW9uczogQXNUZXh0dXJlRnJhbWVzT3B0aW9ucyA9IHsgXG4gIGZyYW1lV2lkdGg6IDQ4LCBcbiAgZnJhbWVIZWlnaHQ6IDQ4LCBcbiAgY29sdW1uczogNCwgXG4gIHJvd3M6IDQgXG59O1xuXG4vKipcbiAqIFNwbGl0cyBhIHRleHR1cmUgc291cmNlIGludG8gaW5kaXZpZHVhbCB0ZXh0dXJlIGZyYW1lcyBiYXNlZCBvbiBhIGdyaWQgbGF5b3V0XG4gKiBcbiAqIEBwYXJhbSB0ZXh0dXJlU291cmNlIC0gVGhlIHNvdXJjZSB0ZXh0dXJlIHRvIHNwbGl0IGludG8gZnJhbWVzXG4gKiBAcGFyYW0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgZnJhbWUgZXh0cmFjdGlvblxuICogQHJldHVybnMgQXJyYXkgb2YgaW5kaXZpZHVhbCB0ZXh0dXJlIGZyYW1lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXNUZXh0dXJlRnJhbWVzKFxuICBQSVhJLFxuICB0ZXh0dXJlU291cmNlOiBQSVhJLlRleHR1cmVTb3VyY2UsIFxuICBvcHRpb25zOiBBc1RleHR1cmVGcmFtZXNPcHRpb25zID0gZGVmYXVsdE9wdGlvbnMsXG4pOiBQSVhJLlRleHR1cmU8UElYSS5UZXh0dXJlU291cmNlPGFueT4+W10ge1xuICBjb25zdCB7IGZyYW1lV2lkdGgsIGZyYW1lSGVpZ2h0LCBjb2x1bW5zLCByb3dzIH0gPSBvcHRpb25zO1xuICBjb25zdCBmcmFtZXM6IFBJWEkuVGV4dHVyZTxQSVhJLlRleHR1cmVTb3VyY2U8YW55Pj5bXSA9IFtdO1xuXG4gIC8vIEVuc3VyZSB3ZSdyZSB3b3JraW5nIHdpdGggYSB2YWxpZGF0ZWQgdGV4dHVyZSBzb3VyY2VcbiAgaWYgKCF0ZXh0dXJlU291cmNlKSB7XG4gICAgY29uc29sZS5lcnJvcignSW52YWxpZCB0ZXh0dXJlIHNvdXJjZSBwcm92aWRlZCB0byBhc1RleHR1cmVGcmFtZXMnKTtcbiAgICByZXR1cm4gZnJhbWVzO1xuICB9XG5cbiAgLy8gQ3JlYXRlIHRleHR1cmVzIGZyb20gdGhlIHRleHR1cmUgc291cmNlIC0ga2VlcGluZyBpbXBsZW1lbnRhdGlvbiBpZGVudGljYWwgdG8gd29ya2luZyB2ZXJzaW9uXG4gIGZvciAobGV0IHkgPSAwOyB5IDwgcm93czsgeSsrKSB7XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBjb2x1bW5zOyB4KyspIHtcbiAgICAgIGNvbnN0IGZyYW1lID0gbmV3IFBJWEkuUmVjdGFuZ2xlKHggKiBmcmFtZVdpZHRoLCB5ICogZnJhbWVIZWlnaHQsIGZyYW1lV2lkdGgsIGZyYW1lSGVpZ2h0KTtcbiAgICAgIFxuICAgICAgLy8gS2VlcCB0aGUgZXhhY3Qgc2FtZSBpbXBsZW1lbnRhdGlvbiBhcyB0aGUgd29ya2luZyBleGFtcGxlXG4gICAgICBjb25zdCBmcmFtZXRleHR1cmUgPSBuZXcgUElYSS5UZXh0dXJlKHtcbiAgICAgICAgc291cmNlOiB0ZXh0dXJlU291cmNlLFxuICAgICAgICBmcmFtZTogZnJhbWUsXG4gICAgICB9KSBhcyBQSVhJLlRleHR1cmU8UElYSS5UZXh0dXJlU291cmNlPGFueT4+O1xuICAgICAgXG4gICAgICBmcmFtZXMucHVzaChmcmFtZXRleHR1cmUpO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGZyYW1lcyBhcyBQSVhJLlRleHR1cmU8UElYSS5UZXh0dXJlU291cmNlPGFueT4+W107XG59XG4iLCJpbXBvcnQgeyBQb2ludCB9IGZyb20gJ3BpeGkuanMnO1xuXG4vKipcbiAqIENvbW1vbmx5IHVzZWQgUG9pbnQgZmFjdG9yeSBmdW5jdGlvbnNcbiAqIFRoZXNlIHJlZHVjZSBvYmplY3QgYWxsb2NhdGlvbnMgYW5kIGNsYXJpZnkgaW50ZW50XG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVQb2ludCA9ICh4ID0gMCwgeSA9IDApOiBQb2ludCA9PiBuZXcgUG9pbnQoeCwgeSk7XG5leHBvcnQgY29uc3QgWkVST19QT0lOVCA9ICgpOiBQb2ludCA9PiBuZXcgUG9pbnQoMCwgMCk7XG5leHBvcnQgY29uc3QgT05FX1BPSU5UID0gKCk6IFBvaW50ID0+IG5ldyBQb2ludCgxLCAxKTtcblxuZXhwb3J0IGNvbnN0IHVjID0gKHMgPSAnJykgPT4gcy50b1VwcGVyQ2FzZSgpO1xuZXhwb3J0IGNvbnN0IGxjID0gKHMgPSAnJykgPT4gcy50b0xvd2VyQ2FzZSgpO1xuXG5leHBvcnQgY29uc3QgcGFkUmlnaHQgPSAodmFsID0gJycsIGxlbmd0aCA9IDAsIHBhZFdpdGggPSAnICcpID0+IHtcbiAgbGV0IHJlc3VsdCA9IHZhbCsnJztcbiAgd2hpbGUocmVzdWx0Lmxlbmd0aCA8IGxlbmd0aCl7XG4gICAgcmVzdWx0ICs9IHBhZFdpdGg7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBwciA9IHBhZFJpZ2h0O1xuXG4vKipcbiAqIEdlbmVyYXRlIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gbWluIGFuZCBtYXggKGluY2x1c2l2ZSlcbiAqIEBwYXJhbSBtaW4gLSBNaW5pbXVtIHZhbHVlIChpbmNsdXNpdmUpXG4gKiBAcGFyYW0gbWF4IC0gTWF4aW11bSB2YWx1ZSAoaW5jbHVzaXZlKVxuICogQHJldHVybnMgUmFuZG9tIGludGVnZXIgaW4gcmFuZ2UgW21pbiwgbWF4XVxuICovXG5leHBvcnQgY29uc3QgZ2V0UmFuZG9tSW50ID0gKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciA9PiAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCArIDEgLSBtaW4pKSArIG1pbik7XG5cbmV4cG9ydCBjb25zdCByb3VuZFRvID0gKHBsYWNlcywgdmFsdWUpID0+IChNYXRoLnJvdW5kKHZhbHVlICogTWF0aC5wb3coMTAsIHBsYWNlcykpIC8gTWF0aC5wb3coMTAsIHBsYWNlcykpO1xuXG5leHBvcnQgY29uc3QgbGVycCA9IChiZWdpbiwgZW5kLCBtYWcpID0+ICgoMSAtIG1hZykgKiBiZWdpbiArIG1hZyAqIGVuZCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXRlcnNUb1BpeGVscyhtOiBudW1iZXIpOiBudW1iZXIgeyByZXR1cm4gbSAqIDIwOyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBwaXhlbHNUb01ldGVycyhwOiBudW1iZXIpOiBudW1iZXIgeyByZXR1cm4gcCAqIDAuMDU7IH1cblxuZXhwb3J0IGNvbnN0IGZldGNoWG1sID0gYXN5bmMgKHVybDogc3RyaW5nKSA9PiAoYXdhaXQgKGF3YWl0IGZldGNoKHVybCkpLnRleHQoKSk7XG5cbmV4cG9ydCBjb25zdCByYWQyZGVnID0gKHJhZDogbnVtYmVyKSA9PiByYWQgKiAoMTgwIC8gTWF0aC5QSSk7XG5leHBvcnQgY29uc3QgZGVnMnJhZCA9IChkZWc6IG51bWJlcikgPT4gZGVnICogKE1hdGguUEkgLyAxODApO1xuICAiLCJpbXBvcnQgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IEFzc2V0IH0gZnJvbSAnLi4nO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnLi9ldmVudC1zeXN0ZW0nO1xuXG4vKiogRXZlbnRzIGVtaXR0ZWQgYnkgQXNzZXRMb2FkZXIuICovXG5leHBvcnQgaW50ZXJmYWNlIEFzc2V0TG9hZGVyRXZlbnRzIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkPiB7XG4gICdsb2FkaW5nOnN0YXJ0JzogKCkgPT4gdm9pZDtcbiAgJ2xvYWRpbmc6ZW5kJzogKCkgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBXcmFwcGVyIGFyb3VuZCBQSVhJLkFzc2V0cyB3aXRoIGxvYWRpbmcgZXZlbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgeyBsb2FkQXNzZXRzLCBQSVhJQXNzZXRzIH0gPSBhd2FpdCBzZXR1cE1veGkoey4uLn0pO1xuICpcbiAqIGF3YWl0IGxvYWRBc3NldHMoW1xuICogICB7IHNyYzogJy4vcGxheWVyLnBuZycsIGFsaWFzOiAncGxheWVyJyB9LFxuICogICB7IHNyYzogJy4vZW5lbXkucG5nJywgYWxpYXM6ICdlbmVteScgfVxuICogXSk7XG4gKlxuICogY29uc3QgdGV4dHVyZSA9IFBJWElBc3NldHMuZ2V0KCdwbGF5ZXInKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQXNzZXRMb2FkZXIge1xuICAvKiogUElYSS5Bc3NldHMgaW5zdGFuY2UuIFVzZSAuZ2V0KGFsaWFzKSB0byByZXRyaWV2ZSBsb2FkZWQgdGV4dHVyZXMuICovXG4gIFBJWElBc3NldHM6IFBJWEkuQXNzZXRzQ2xhc3MgPSBQSVhJLkFzc2V0cztcblxuICAvKiogQWxsIGxvYWRlZCB0ZXh0dXJlcy4gKi9cbiAgdGV4dHVyZXM6IFBJWEkuVGV4dHVyZVtdID0gW107XG5cbiAgLyoqIFRydWUgd2hpbGUgbG9hZGluZyBpbiBwcm9ncmVzcy4gKi9cbiAgaXNMb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBldmVudHM6IEV2ZW50RW1pdHRlcjxBc3NldExvYWRlckV2ZW50cz4gPSBuZXcgRXZlbnRFbWl0dGVyPEFzc2V0TG9hZGVyRXZlbnRzPigpO1xuXG4gIC8qKiBTdWJzY3JpYmUgdG8gJ2xvYWRpbmc6c3RhcnQnIG9yICdsb2FkaW5nOmVuZCcgZXZlbnRzLiAqL1xuICBvbjxLIGV4dGVuZHMga2V5b2YgQXNzZXRMb2FkZXJFdmVudHM+KGV2ZW50OiBLLCBsaXN0ZW5lcjogQXNzZXRMb2FkZXJFdmVudHNbS10pOiB2b2lkIHtcbiAgICB0aGlzLmV2ZW50cy5vbihldmVudCwgbGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqIFVuc3Vic2NyaWJlIGZyb20gZXZlbnRzLiAqL1xuICBvZmY8SyBleHRlbmRzIGtleW9mIEFzc2V0TG9hZGVyRXZlbnRzPihldmVudDogSywgbGlzdGVuZXI6IEFzc2V0TG9hZGVyRXZlbnRzW0tdKTogdm9pZCB7XG4gICAgdGhpcy5ldmVudHMub2ZmKGV2ZW50LCBsaXN0ZW5lcik7XG4gIH1cblxuICBsb2FkQXNzZXRzID0gYXN5bmMgKGFzc2V0czogQXNzZXRbXSkgPT4ge1xuICAgIGNvbnN0IHsgUElYSUFzc2V0cyB9ID0gdGhpcztcbiAgICBjb25zdCBmYWlsZWRBc3NldHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBFbWl0IGxvYWRpbmcgc3RhcnQgZXZlbnRcbiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XG4gICAgdGhpcy5ldmVudHMuZW1pdCgnbG9hZGluZzpzdGFydCcpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXNzZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHsgc3JjLCBhbGlhcyB9ID0gYXNzZXRzW2ldO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGFsaWFzKSB7XG4gICAgICAgICAgICBpZiAoIVBJWElBc3NldHMuY2FjaGUuaGFzKGFsaWFzKSkge1xuICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gYXdhaXQgUElYSUFzc2V0cy5sb2FkKHsgYWxpYXMsIHNyYyB9KTtcbiAgICAgICAgICAgICAgdGhpcy50ZXh0dXJlcy5wdXNoKHRleHR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gYXdhaXQgUElYSUFzc2V0cy5sb2FkKHNyYyk7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmVzLnB1c2godGV4dHVyZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGFzc2V0OiAke3NyY31gLCBlcnJvcik7XG4gICAgICAgICAgZmFpbGVkQXNzZXRzLnB1c2goc3JjKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmFpbGVkQXNzZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKGAke2ZhaWxlZEFzc2V0cy5sZW5ndGh9IGFzc2V0KHMpIGZhaWxlZCB0byBsb2FkOmAsIGZhaWxlZEFzc2V0cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBFbWl0IGxvYWRpbmcgZW5kIGV2ZW50XG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5ldmVudHMuZW1pdCgnbG9hZGluZzplbmQnKTtcbiAgICB9XG4gIH07XG59IiwiaW1wb3J0IFBJWEksIHsgUG9pbnQgfSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IExvZ2ljIH0gZnJvbSAnLi9sb2dpYyc7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJy4vc2NlbmUnO1xuaW1wb3J0IHsgQXNFbnRpdHksIE1veGlMb2dpYywgTW94aUVudGl0eSB9IGZyb20gJy4vbW94aS1lbnRpdHknO1xuaW1wb3J0IHsgbGVycCB9IGZyb20gJy4uL2xpYnJhcnkvdXRpbHMnO1xuXG4vKipcbiAqIExvZ2ljIGhhbmRsaW5nIGNhbWVyYSBmb2xsb3dpbmcgYW5kIHNtb290aCB0cmFuc2l0aW9ucy5cbiAqIEF0dGFjaGVkIGF1dG9tYXRpY2FsbHkgdG8gQ2FtZXJhLiBBY2Nlc3MgdmlhIGNhbWVyYS5tb3hpRW50aXR5LmdldExvZ2ljKCdDYW1lcmFMb2dpYycpLlxuICovXG5leHBvcnQgY2xhc3MgQ2FtZXJhTG9naWMgZXh0ZW5kcyBMb2dpYzxQSVhJLkNvbnRhaW5lcj4ge1xuICBuYW1lID0gJ0NhbWVyYUxvZ2ljJztcblxuICAvKiogSW50ZXJwb2xhdGlvbiBzcGVlZCAoMC0xKS4gSGlnaGVyID0gc25hcHBpZXIuICovXG4gIHB1YmxpYyBzcGVlZDogbnVtYmVyID0gMC4xO1xuXG4gIC8qKiBFbnRpdHkgdG8gZm9sbG93LiBTZXQgdG8gZW5hYmxlIHRyYWNraW5nLiAqL1xuICBwdWJsaWMgdGFyZ2V0OiBQSVhJLkNvbnRhaW5lciA9IG51bGw7XG5cbiAgZW50aXR5OiBQSVhJLkNvbnRhaW5lcjxQSVhJLkNvbnRhaW5lckNoaWxkPjtcbiAgcmVuZGVyZXI6IFBJWEkuUmVuZGVyZXI8SFRNTENhbnZhc0VsZW1lbnQ+O1xuXG4gIGluaXQoZW50aXR5OiBQSVhJLkNvbnRhaW5lciwgcmVuZGVyZXI6IFBJWEkuUmVuZGVyZXIpIHtcbiAgICB0aGlzLmVudGl0eSA9IGVudGl0eTtcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cblxuICAvKiogQGludGVybmFsIFNtb290aGx5IHVwZGF0ZXMgY2FtZXJhIHBvc2l0aW9uL3NjYWxlIGVhY2ggZnJhbWUuICovXG4gIHVwZGF0ZShlbnRpdHk6IENhbWVyYSwgZGVsdGFUaW1lOiBudW1iZXIpIHtcbiAgICBjb25zdCB7IHNwZWVkIH0gPSB0aGlzO1xuICAgIGNvbnN0IGRlbHRhU3BlZWQgPSBNYXRoLm1pbihkZWx0YVRpbWUgKiBzcGVlZCwgMSk7XG5cbiAgICAvLyBUcmFjayBpZiBzY2FsZSBpcyBhY3RpdmVseSBjaGFuZ2luZyAoem9vbWluZylcbiAgICBjb25zdCBpc1pvb21pbmcgPSBNYXRoLmFicyhlbnRpdHkuc2NhbGUueCAtIGVudGl0eS5kZXNpcmVkU2NhbGUueCkgPiAwLjAxIHx8XG4gICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZW50aXR5LnNjYWxlLnkgLSBlbnRpdHkuZGVzaXJlZFNjYWxlLnkpID4gMC4wMTtcblxuICAgIC8vIEludGVycG9sYXRlIHNjYWxlIHZhbHVlcyBmaXJzdFxuICAgIGlmIChlbnRpdHkuZGVzaXJlZFNjYWxlICE9PSBlbnRpdHkuc2NhbGUpIHtcbiAgICAgIGVudGl0eS5zY2FsZS54ID0gbGVycChlbnRpdHkuc2NhbGUueCwgZW50aXR5LmRlc2lyZWRTY2FsZS54LCBkZWx0YVNwZWVkKTtcbiAgICAgIGVudGl0eS5zY2FsZS55ID0gbGVycChlbnRpdHkuc2NhbGUueSwgZW50aXR5LmRlc2lyZWRTY2FsZS55LCBkZWx0YVNwZWVkKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgZGVzaXJlZCBwb3NpdGlvbiBpZiBjYW1lcmEgaGFzIGEgdGFyZ2V0XG4gICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAvLyBJbiBhIFBJWEkuanMgY2FtZXJhIHN5c3RlbSwgd2UgbmVlZCB0byBwb3NpdGlvbiB0aGUgY2FtZXJhIChzY2VuZSlcbiAgICAgIC8vIHNvIHRoYXQgdGhlIHRhcmdldCBhcHBlYXJzIGNlbnRlcmVkIGluIHRoZSB2aWV3cG9ydFxuXG4gICAgICAvLyBHZXQgdGhlIGNlbnRlciBvZiB0aGUgdmlld3BvcnQgaW4gc2NyZWVuIGNvb3JkaW5hdGVzXG4gICAgICBjb25zdCBzY3JlZW5DZW50ZXJYID0gdGhpcy5yZW5kZXJlci53aWR0aCAvIDI7XG4gICAgICBjb25zdCBzY3JlZW5DZW50ZXJZID0gdGhpcy5yZW5kZXJlci5oZWlnaHQgLyAyO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgd2hlcmUgdGhlIHNjZW5lIHNob3VsZCBiZSBwb3NpdGlvbmVkXG4gICAgICAvLyBUaGUgZm9ybXVsYSBpczogLSh0YXJnZXRQb3NpdGlvbiAqIHNjYWxlKSArIHNjcmVlbkNlbnRlclxuICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSB0YXJnZXQgaXMgYXQgdGhlIGNlbnRlciBvZiB0aGUgc2NyZWVuXG4gICAgICBjb25zdCBkZXNpcmVkWCA9IC0odGhpcy50YXJnZXQucG9zaXRpb24ueCAqIGVudGl0eS5zY2FsZS54KSArIHNjcmVlbkNlbnRlclg7XG4gICAgICBjb25zdCBkZXNpcmVkWSA9IC0odGhpcy50YXJnZXQucG9zaXRpb24ueSAqIGVudGl0eS5zY2FsZS55KSArIHNjcmVlbkNlbnRlclk7XG5cbiAgICAgIC8vIFNldCBkZXNpcmVkIHBvc2l0aW9uIGZvciB0aGUgc2NlbmUgKHVzaW5nIG5lZ2F0aXZlIHZhbHVlcyBmb3IgY2FtZXJhIGNvb3JkaW5hdGVzKVxuICAgICAgZW50aXR5LmRlc2lyZWRQb3NpdGlvbi5zZXQoLWRlc2lyZWRYLCAtZGVzaXJlZFkpO1xuICAgIH1cblxuICAgIC8vIEludGVycG9sYXRlIHBvc2l0aW9uIHZhbHVlc1xuICAgIC8vIFdoZW4gYWN0aXZlbHkgem9vbWluZywgdXBkYXRlIHBvc2l0aW9uIGluc3RhbnRseSB0byBrZWVwIHRhcmdldCBjZW50ZXJlZFxuICAgIC8vIE90aGVyd2lzZSwgaW50ZXJwb2xhdGUgc21vb3RobHkgZm9yIGNhbWVyYSBmb2xsb3dpbmdcbiAgICBpZiAoZW50aXR5LmRlc2lyZWRQb3NpdGlvbiAhPT0gZW50aXR5LnBvc2l0aW9uKSB7XG4gICAgICBpZiAoaXNab29taW5nKSB7XG4gICAgICAgIC8vIEluc3RhbnQgcG9zaXRpb24gdXBkYXRlIGR1cmluZyB6b29tIHRvIHByZXZlbnQgdGFyZ2V0IGRyaWZ0XG4gICAgICAgIGVudGl0eS5wb3NpdGlvbi5jb3B5RnJvbShlbnRpdHkuZGVzaXJlZFBvc2l0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNtb290aCBpbnRlcnBvbGF0aW9uIGZvciBub3JtYWwgY2FtZXJhIGZvbGxvd2luZ1xuICAgICAgICBlbnRpdHkucG9zaXRpb24ueCA9IGxlcnAoZW50aXR5LnBvc2l0aW9uLngsIGVudGl0eS5kZXNpcmVkUG9zaXRpb24ueCwgZGVsdGFTcGVlZCk7XG4gICAgICAgIGVudGl0eS5wb3NpdGlvbi55ID0gbGVycChlbnRpdHkucG9zaXRpb24ueSwgZW50aXR5LmRlc2lyZWRQb3NpdGlvbi55LCBkZWx0YVNwZWVkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQXBwbHkgY2FtZXJhIHRyYW5zZm9ybWF0aW9ucyB0byB0aGUgc2NlbmVcbiAgICAvLyBJbiBQSVhJLCB0aGUgXCJjYW1lcmFcIiBlZmZlY3QgaXMgY3JlYXRlZCBieSB0cmFuc2Zvcm1pbmcgdGhlIHNjZW5lIGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb25cbiAgICBlbnRpdHkuc2NlbmUuc2NhbGUuc2V0KGVudGl0eS5zY2FsZS54LCBlbnRpdHkuc2NhbGUueSk7XG5cbiAgICAvLyBQb3NpdGlvbiB0aGUgc2NlbmUgYXQgdGhlIG5lZ2F0aXZlIG9mIHRoZSBjYW1lcmEgcG9zaXRpb24gdG8gY3JlYXRlIGNhbWVyYSBtb3ZlbWVudCBlZmZlY3RcbiAgICBlbnRpdHkuc2NlbmUucG9zaXRpb24uc2V0KC1lbnRpdHkucG9zaXRpb24ueCwgLWVudGl0eS5wb3NpdGlvbi55KTtcbiAgfVxufVxuXG4vKipcbiAqIFZpZXdwb3J0IGNhbWVyYSB3aXRoIHNtb290aCBmb2xsb3dpbmcgYW5kIHpvb20uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCB7IGNhbWVyYSB9ID0gYXdhaXQgc2V0dXBNb3hpKHsuLi59KTtcbiAqXG4gKiAvLyBGb2xsb3cgYSB0YXJnZXRcbiAqIGNhbWVyYS5tb3hpRW50aXR5LmdldExvZ2ljPENhbWVyYUxvZ2ljPignQ2FtZXJhTG9naWMnKS50YXJnZXQgPSBwbGF5ZXI7XG4gKlxuICogLy8gWm9vbSB0byAyeFxuICogY2FtZXJhLmRlc2lyZWRTY2FsZS5zZXQoMiwgMik7XG4gKlxuICogLy8gUGFuIHRvIHBvc2l0aW9uXG4gKiBjYW1lcmEuZGVzaXJlZFBvc2l0aW9uLnNldCg1MDAsIDMwMCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENhbWVyYSBleHRlbmRzIFBJWEkuQ29udGFpbmVyIGltcGxlbWVudHMgQXNFbnRpdHk8UElYSS5Db250YWluZXI+IHtcbiAgLyoqIFNjZW5lIGJlaW5nIHZpZXdlZC4gKi9cbiAgcHVibGljIHNjZW5lOiBTY2VuZTtcblxuICAvKiogUmVuZGVyZXIgcmVmZXJlbmNlLiAqL1xuICBwdWJsaWMgcmVuZGVyZXI6IFBJWEkuUmVuZGVyZXI7XG5cbiAgLyoqIFRyYW5zaXRpb24gc3BlZWQgKDAtMSkuICovXG4gIHB1YmxpYyBzcGVlZDogbnVtYmVyID0gMC4xO1xuXG4gIC8qKiBNb3hpRW50aXR5IGZvciBhdHRhY2hpbmcgbG9naWMuICovXG4gIHB1YmxpYyBtb3hpRW50aXR5OiBNb3hpRW50aXR5PFBJWEkuQ29udGFpbmVyPjtcblxuICAvKiogVGFyZ2V0IHpvb20gbGV2ZWwuIFNldCB0byBhbmltYXRlIHpvb20uICovXG4gIHB1YmxpYyBkZXNpcmVkU2NhbGU6IFBvaW50ID0gbmV3IFBvaW50KDEsIDEpO1xuXG4gIC8qKiBUYXJnZXQgcG9zaXRpb24uIFNldCB0byBhbmltYXRlIHBhbi4gKi9cbiAgcHVibGljIGRlc2lyZWRQb3NpdGlvbjogUG9pbnQgPSBuZXcgUG9pbnQoMCwgMCk7XG5cbiAgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lLCByZW5kZXJlcjogUElYSS5SZW5kZXJlciwgbG9naWM6IE1veGlMb2dpYzxQSVhJLkNvbnRhaW5lcj4gPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcblxuICAgIC8vIEluaXRpYWxpemUgYW5kIGF0dGFjaCB0aGUgY2FtZXJhIGxvZ2ljXG4gICAgY29uc3QgY2FtZXJhTG9naWMgPSBuZXcgQ2FtZXJhTG9naWMoKTtcbiAgICBjYW1lcmFMb2dpYy5pbml0KHRoaXMsIHJlbmRlcmVyKTtcbiAgICB0aGlzLm1veGlFbnRpdHkgPSBuZXcgTW94aUVudGl0eTxQSVhJLkNvbnRhaW5lcj4odGhpcywgbG9naWMpO1xuICAgIHRoaXMubW94aUVudGl0eS5hZGRMb2dpYyhjYW1lcmFMb2dpYyk7XG4gICAgdGhpcy5zY2VuZS5hZGRDaGlsZCh0aGlzKTtcbiAgfVxufSAgXG5cbiIsImltcG9ydCBQSVhJIGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tICcuL3NjZW5lJztcbmltcG9ydCB0eXBlIHsgUGh5c2ljc1dvcmxkIH0gZnJvbSAnLi4vbGlicmFyeS9waHlzaWNzJztcblxuLyoqXG4gKiBHYW1lIGxvb3AgbWFuYWdlci4gRHJpdmVzIHNjZW5lIHVwZGF0ZXMgYW5kIHJlbmRlcmluZyB2aWEgUElYSS5UaWNrZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBlbmdpbmUgPSBuZXcgRW5naW5lKHNjZW5lKTtcbiAqIGVuZ2luZS5zdGFydCgpOyAgLy8gQmVnaW4gZ2FtZSBsb29wXG4gKiBlbmdpbmUuc3RvcCgpOyAgIC8vIFBhdXNlIGdhbWUgbG9vcFxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBFbmdpbmUge1xuICAvKiogUElYSS5UaWNrZXIgZHJpdmluZyB0aGUgZ2FtZSBsb29wLiAqL1xuICB0aWNrZXI6IFBJWEkuVGlja2VyO1xuXG4gIC8qKiBBY3RpdmUgc2NlbmUgYmVpbmcgdXBkYXRlZC9yZW5kZXJlZC4gKi9cbiAgcm9vdDogU2NlbmU7XG5cbiAgLyoqIFBoeXNpY3Mgd29ybGQgKGlmIGVuYWJsZWQgdmlhIHNldHVwTW94aSkuICovXG4gIHBoeXNpY3NXb3JsZD86IFBoeXNpY3NXb3JsZDtcblxuICAvKiogQGludGVybmFsICovXG4gIGxvZ2dlcjogKG1zZzogc3RyaW5nKSA9PiB2b2lkO1xuICAvKiogQGludGVybmFsICovXG4gIGxvZ2dlckZyZXF1ZW5jeU1zOiBudW1iZXI7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbmV4dExvZ1RpbWU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihzdGFnZTogU2NlbmUgPSBudWxsKSB7XG4gICAgdGhpcy5yb290ID0gc3RhZ2U7XG5cbiAgICBjb25zdCB0aWNrZXIgPSBQSVhJLlRpY2tlci5zaGFyZWQ7XG4gICAgdGlja2VyLmF1dG9TdGFydCA9IGZhbHNlO1xuICAgIHRpY2tlci5hZGQodGhpcy5nYW1lTG9vcCk7XG4gICAgdGhpcy50aWNrZXIgPSB0aWNrZXI7XG5cbiAgICB0aGlzLmxvZ2dlckZyZXF1ZW5jeU1zID0gNTAwO1xuICAgIHRoaXMubmV4dExvZ1RpbWUgPSAwO1xuICAgIHRoaXMubG9nZ2VyID0gKG1zZykgPT4gbnVsbDtcbiAgfVxuXG4gIC8qKiBTdGFydCB0aGUgZ2FtZSBsb29wLiAqL1xuICBzdGFydCgpIHtcbiAgICB0aGlzLnRpY2tlci5zdGFydCgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIFN0b3AvcGF1c2UgdGhlIGdhbWUgbG9vcC4gKi9cbiAgc3RvcCgpIHtcbiAgICB0aGlzLnRpY2tlci5zdG9wKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQXR0YWNoIHBoeXNpY3Mgd29ybGQuIENhbGxlZCBhdXRvbWF0aWNhbGx5IGJ5IHNldHVwTW94aSBpZiBwaHlzaWNzIGVuYWJsZWQuICovXG4gIGFkZFBoeXNpY3NXb3JsZChwaHlzaWNzV29ybGQ6IFBoeXNpY3NXb3JsZCkge1xuICAgIHRoaXMucGh5c2ljc1dvcmxkID0gcGh5c2ljc1dvcmxkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCBNYWluIGxvb3A6IHBoeXNpY3Mgc3RlcCAtPiBzY2VuZSB1cGRhdGUgLT4gcmVuZGVyLiAqL1xuICBnYW1lTG9vcCA9ICh0aWtlclRpbWU6IFBJWEkuVGlja2VyKSA9PiB7XG4gICAgaWYgKHRoaXMucm9vdCkge1xuICAgICAgY29uc3QgeyBkZWx0YVRpbWUsIGRlbHRhTVMgfSA9IHRpa2VyVGltZTtcblxuICAgICAgaWYgKHRoaXMucGh5c2ljc1dvcmxkKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhU2Vjb25kcyA9IGRlbHRhTVMgLyAxMDAwO1xuICAgICAgICB0aGlzLnBoeXNpY3NXb3JsZC5zdGVwKGRlbHRhU2Vjb25kcyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucm9vdC51cGRhdGUoZGVsdGFUaW1lKTtcbiAgICAgIHRoaXMucm9vdC5kcmF3KGRlbHRhVGltZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBTd2l0Y2ggdG8gYSBkaWZmZXJlbnQgc2NlbmUuICovXG4gIGxvYWRTdGFnZShzdGFnZTogU2NlbmUpIHtcbiAgICB0aGlzLnJvb3QgPSBzdGFnZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuIiwidHlwZSBNb3hpRXZlbnRzPFQgZXh0ZW5kcyBzdHJpbmcgfCBzeW1ib2wgPSBzdHJpbmcsIEEgPSBhbnk+ID0ge1xuICBbZXZlbnQgaW4gVF06ICguLi5hcmdzOiBBIGV4dGVuZHMgYW55W10gPyBBIDogW0FdKSA9PiB2b2lkO1xufTtcblxuLyoqXG4gKiBUeXBlLXNhZmUgZXZlbnQgZW1pdHRlciBmb3IgcHViL3N1YiBjb21tdW5pY2F0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogLy8gRGVmaW5lIGV2ZW50IHR5cGVzXG4gKiB0eXBlIEdhbWVFdmVudHMgPSB7XG4gKiAgICdwbGF5ZXI6aGl0JzogKGRhbWFnZTogbnVtYmVyKSA9PiB2b2lkO1xuICogICAnZ2FtZTpvdmVyJzogKCkgPT4gdm9pZDtcbiAqICAgJ3Njb3JlOmNoYW5nZSc6IChzY29yZTogbnVtYmVyLCBjb21ibzogbnVtYmVyKSA9PiB2b2lkO1xuICogfTtcbiAqXG4gKiBjb25zdCBldmVudHMgPSBuZXcgRXZlbnRFbWl0dGVyPEdhbWVFdmVudHM+KCk7XG4gKlxuICogLy8gU3Vic2NyaWJlXG4gKiBldmVudHMub24oJ3BsYXllcjpoaXQnLCAoZG1nKSA9PiBjb25zb2xlLmxvZyhgSGl0IGZvciAke2RtZ31gKSk7XG4gKiBldmVudHMub25jZSgnZ2FtZTpvdmVyJywgKCkgPT4gc2hvd0dhbWVPdmVyKCkpO1xuICpcbiAqIC8vIEVtaXRcbiAqIGV2ZW50cy5lbWl0KCdwbGF5ZXI6aGl0JywgMTApO1xuICogZXZlbnRzLmVtaXQoJ3Njb3JlOmNoYW5nZScsIDEwMCwgMyk7XG4gKlxuICogLy8gVW5zdWJzY3JpYmVcbiAqIGV2ZW50cy5vZmYoJ3BsYXllcjpoaXQnLCBoYW5kbGVyKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgRXZlbnRFbWl0dGVyPFQgZXh0ZW5kcyBNb3hpRXZlbnRzID0gTW94aUV2ZW50cz4ge1xuICBwcml2YXRlIGxpc3RlbmVyczogeyBbSyBpbiBrZXlvZiBUXT86IFRbS11bXSB9ID0ge307XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEV2ZW50RW1pdHRlcjxNb3hpRXZlbnRzPiB8IG51bGwgPSBudWxsO1xuXG4gIC8qKiBTdWJzY3JpYmUgdG8gZXZlbnQuICovXG4gIG9uPEsgZXh0ZW5kcyBrZXlvZiBUPihldmVudDogSywgbGlzdGVuZXI6IFRbS10pOiB2b2lkIHtcbiAgICAodGhpcy5saXN0ZW5lcnNbZXZlbnRdIHx8ICh0aGlzLmxpc3RlbmVyc1tldmVudF0gPSBbXSkpLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqIFVuc3Vic2NyaWJlIGZyb20gZXZlbnQuICovXG4gIG9mZjxLIGV4dGVuZHMga2V5b2YgVD4oZXZlbnQ6IEssIGxpc3RlbmVyOiBUW0tdKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudF07XG4gICAgaWYgKGV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSBldmVudExpc3RlbmVycy5maWx0ZXIobCA9PiBsICE9PSBsaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiAgLyoqIEVtaXQgZXZlbnQgdG8gYWxsIGxpc3RlbmVycy4gKi9cbiAgZW1pdDxLIGV4dGVuZHMga2V5b2YgVD4oZXZlbnQ6IEssIC4uLmFyZ3M6IFBhcmFtZXRlcnM8VFtLXT4pOiB2b2lkIHtcbiAgICAodGhpcy5saXN0ZW5lcnNbZXZlbnRdIHx8IFtdKS5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKC4uLmFyZ3MpKTtcbiAgfVxuXG4gIC8qKiBTdWJzY3JpYmUgb25jZSwgYXV0by11bnN1YnNjcmliZSBhZnRlciBmaXJzdCBlbWl0LiAqL1xuICBvbmNlPEsgZXh0ZW5kcyBrZXlvZiBUPihldmVudDogSywgbGlzdGVuZXI6IFRbS10pOiB2b2lkIHtcbiAgICBjb25zdCBvbmNlTGlzdGVuZXIgPSAoLi4uYXJnczogUGFyYW1ldGVyczxUW0tdPikgPT4ge1xuICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgICB0aGlzLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgIH07XG4gICAgdGhpcy5vbihldmVudCwgb25jZUxpc3RlbmVyIGFzIFRbS10pO1xuICB9XG5cbiAgLyoqIEdldCBzaW5nbGV0b24gaW5zdGFuY2UuICovXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2U8VCBleHRlbmRzIE1veGlFdmVudHMgPSBNb3hpRXZlbnRzPigpOiBFdmVudEVtaXR0ZXI8VD4ge1xuICAgIGlmICghRXZlbnRFbWl0dGVyLmluc3RhbmNlKSB7XG4gICAgICBFdmVudEVtaXR0ZXIuaW5zdGFuY2UgPSBuZXcgRXZlbnRFbWl0dGVyPE1veGlFdmVudHM+KCk7XG4gICAgfVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuaW5zdGFuY2UgYXMgRXZlbnRFbWl0dGVyPFQ+O1xuICB9XG59XG5cbiIsImltcG9ydCBQSVhJIGZyb20gJ3BpeGkuanMnO1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGVudGl0eSBiZWhhdmlvci4gRXh0ZW5kIHRvIGFkZCBjdXN0b20gbG9naWMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjbGFzcyBNb3ZlUmlnaHQgZXh0ZW5kcyBMb2dpYzxQSVhJLlNwcml0ZT4ge1xuICogICBzcGVlZCA9IDEwMDtcbiAqICAgdXBkYXRlKGVudGl0eSwgZHQpIHsgZW50aXR5LnggKz0gdGhpcy5zcGVlZCAqIGR0OyB9XG4gKiB9XG4gKlxuICogc3ByaXRlLm1veGlFbnRpdHkuYWRkTG9naWMobmV3IE1vdmVSaWdodCgpKTtcbiAqIGBgYFxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTG9naWM8VD4ge1xuICAvKiogSWRlbnRpZmllciBmb3IgZ2V0TG9naWMoKS4gRGVmYXVsdHMgdG8gY2xhc3MgbmFtZS4gKi9cbiAgbmFtZT86IHN0cmluZztcblxuICAvKiogU2V0IGZhbHNlIHRvIHNraXAgdXBkYXRlKCkgY2FsbHMuICovXG4gIGFjdGl2ZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgLyoqXG4gICAqIENhbGxlZCBvbmNlIHdoZW4gc2NlbmUuaW5pdCgpIGlzIGludm9rZWQuIE92ZXJyaWRlIGZvciBzZXR1cC5cbiAgICogQHBhcmFtIGVudGl0eSAtIFRoZSBQSVhJIG9iamVjdCB0aGlzIGxvZ2ljIGlzIGF0dGFjaGVkIHRvXG4gICAqIEBwYXJhbSByZW5kZXJlciAtIFRoZSBQSVhJIHJlbmRlcmVyXG4gICAqIEBwYXJhbSBhcmdzIC0gQWRkaXRpb25hbCBhcmd1bWVudHMgcGFzc2VkIHRvIHNjZW5lLmluaXQoKVxuICAgKi9cbiAgaW5pdChlbnRpdHk/OiBULCByZW5kZXJlcj86IFBJWEkuUmVuZGVyZXI8SFRNTENhbnZhc0VsZW1lbnQ+LCAuLi5hcmdzOiBhbnlbXSkge31cblxuICAvKipcbiAgICogQ2FsbGVkIGV2ZXJ5IGZyYW1lIHdoaWxlIGFjdGl2ZS4gT3ZlcnJpZGUgZm9yIGJlaGF2aW9yLlxuICAgKiBAcGFyYW0gZW50aXR5IC0gVGhlIFBJWEkgb2JqZWN0IHRoaXMgbG9naWMgaXMgYXR0YWNoZWQgdG9cbiAgICogQHBhcmFtIGRlbHRhVGltZSAtIFRpbWUgc2luY2UgbGFzdCBmcmFtZSBpbiBmcmFtZXMgKDEgPSAxLzYwcyBhdCA2MGZwcylcbiAgICovXG4gIHVwZGF0ZShlbnRpdHk/OiBULCBkZWx0YVRpbWU/OiBudW1iZXIpIHt9XG59XG5cbi8qKlxuICogU2FtZSBhcyBMb2dpYyBidXQgc2VtYW50aWNhbGx5IGluZGljYXRlcyBtdWx0aXBsZSBpbnN0YW5jZXMgZXhwZWN0ZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjbGFzcyBPcmJpdCBleHRlbmRzIEluc3RhbmNlZExvZ2ljPFBJWEkuU3ByaXRlPiB7XG4gKiAgIGNvbnN0cnVjdG9yKHB1YmxpYyByYWRpdXM6IG51bWJlciwgcHVibGljIHNwZWVkOiBudW1iZXIpIHsgc3VwZXIoKTsgfVxuICogICB1cGRhdGUoZW50aXR5LCBkdCkgeyAvKiBvcmJpdCBsb2dpYyAqXFwvIH1cbiAqIH1cbiAqXG4gKiBzcHJpdGUxLm1veGlFbnRpdHkuYWRkTG9naWMobmV3IE9yYml0KDUwLCAxKSk7XG4gKiBzcHJpdGUyLm1veGlFbnRpdHkuYWRkTG9naWMobmV3IE9yYml0KDEwMCwgMC41KSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEluc3RhbmNlZExvZ2ljPFQ+IGV4dGVuZHMgTG9naWM8VD4ge31cblxuIiwiaW1wb3J0IFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBMb2dpYyB9IGZyb20gJy4vbG9naWMnO1xuXG4vKiogQGludGVybmFsICovXG5pbnRlcmZhY2UgTW94aUVudGl0eUNsYXNzPFQ+IHtcbiAgbG9naWM6IE1veGlMb2dpYzxUPjtcbiAgdXBkYXRlOiAoZGVsdGE6IG51bWJlciwgZW50aXR5OiBUKSA9PiB2b2lkO1xuICBpbml0OiAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG4gIGFkZExvZ2ljOiAobG9naWM6IExvZ2ljPFQ+KSA9PiB2b2lkO1xuICBnZXRMb2dpYzogKG5hbWU6IHN0cmluZykgPT4gTG9naWM8VD4gfCB1bmRlZmluZWQ7XG59XG5cbi8qKiBQSVhJLkNvbnRhaW5lciB3aXRoIGF0dGFjaGVkIE1veGlFbnRpdHkgZm9yIGxvZ2ljIG1hbmFnZW1lbnQuICovXG5leHBvcnQgdHlwZSBBc0VudGl0eTxUPiA9IFBJWEkuQ29udGFpbmVyICYge1xuICBtb3hpRW50aXR5OiBNb3hpRW50aXR5PFQ+O1xufTtcblxuLyoqIE1hcCBvZiBsb2dpYyBjb21wb25lbnRzIGJ5IG5hbWUuICovXG5leHBvcnQgdHlwZSBNb3hpTG9naWM8VD4gPSBSZWNvcmQ8c3RyaW5nLCBMb2dpYzxUPj47XG5cbi8qKlxuICogTWFuYWdlcyBsb2dpYyBjb21wb25lbnRzIGF0dGFjaGVkIHRvIGEgUElYSSBvYmplY3QuXG4gKiBVc3VhbGx5IGFjY2Vzc2VkIHZpYSBgZW50aXR5Lm1veGlFbnRpdHlgIGFmdGVyIGNhbGxpbmcgYGFzRW50aXR5KClgLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3Qgc3ByaXRlID0gYXNFbnRpdHkobmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpKTtcbiAqIHNwcml0ZS5tb3hpRW50aXR5LmFkZExvZ2ljKG5ldyBNeUxvZ2ljKCkpO1xuICogc3ByaXRlLm1veGlFbnRpdHkuZ2V0TG9naWM8TXlMb2dpYz4oJ015TG9naWMnKS5zcGVlZCA9IDEwO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBNb3hpRW50aXR5PFQ+IGltcGxlbWVudHMgTW94aUVudGl0eUNsYXNzPFQ+IHtcbiAgLyoqIEF0dGFjaGVkIGxvZ2ljIGNvbXBvbmVudHMga2V5ZWQgYnkgbmFtZS4gKi9cbiAgbG9naWM6IE1veGlMb2dpYzxUPiA9IHt9O1xuXG4gIC8qKiBUaGUgUElYSSBvYmplY3QgdGhpcyBlbnRpdHkgd3JhcHMuICovXG4gIGVudGl0eTogVDtcblxuICAvKipcbiAgICogQHBhcmFtIGVudGl0eSAtIFRoZSBQSVhJIG9iamVjdCB0byB3cmFwXG4gICAqIEBwYXJhbSBsb2dpYyAtIE9wdGlvbmFsIGluaXRpYWwgbG9naWMgY29tcG9uZW50c1xuICAgKi9cbiAgY29uc3RydWN0b3IoZW50aXR5OiBULCBsb2dpYzogTW94aUxvZ2ljPFQ+ID0ge30pIHtcbiAgICB0aGlzLmxvZ2ljID0gbG9naWM7XG4gICAgdGhpcy5lbnRpdHkgPSBlbnRpdHk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgdXBkYXRlKCkgb24gYWxsIGFjdGl2ZSBsb2dpYyBjb21wb25lbnRzLlxuICAgKiBDYWxsZWQgYXV0b21hdGljYWxseSBieSBTY2VuZSBlYWNoIGZyYW1lLlxuICAgKiBAcGFyYW0gZGVsdGFUaW1lIC0gVGltZSBzaW5jZSBsYXN0IGZyYW1lIGluIGZyYW1lcyAoMSA9IDEvNjBzIGF0IDYwZnBzKVxuICAgKi9cbiAgdXBkYXRlKGRlbHRhVGltZTogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLmVudGl0eSkgcmV0dXJuO1xuXG4gICAgZm9yIChjb25zdCBjbGFzc05hbWUgaW4gdGhpcy5sb2dpYykge1xuICAgICAgY29uc3QgbG9naWNDb21wb25lbnQgPSB0aGlzLmxvZ2ljW2NsYXNzTmFtZV07XG4gICAgICBpZiAobG9naWNDb21wb25lbnQgJiYgbG9naWNDb21wb25lbnQuYWN0aXZlICYmIGxvZ2ljQ29tcG9uZW50LnVwZGF0ZSkge1xuICAgICAgICBsb2dpY0NvbXBvbmVudC51cGRhdGUodGhpcy5lbnRpdHksIGRlbHRhVGltZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxzIGluaXQoKSBvbiBhbGwgbG9naWMgY29tcG9uZW50cy5cbiAgICogQ2FsbGVkIGF1dG9tYXRpY2FsbHkgd2hlbiBzY2VuZS5pbml0KCkgaXMgaW52b2tlZC5cbiAgICogQHBhcmFtIHJlbmRlcmVyIC0gVGhlIFBJWEkgcmVuZGVyZXJcbiAgICogQHBhcmFtIGFyZ3MgLSBBZGRpdGlvbmFsIGFyZ3VtZW50cyBwYXNzZWQgdGhyb3VnaCB0byBsb2dpYy5pbml0KClcbiAgICovXG4gIGluaXQocmVuZGVyZXI6IFBJWEkuUmVuZGVyZXI8SFRNTENhbnZhc0VsZW1lbnQ+LCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmICghdGhpcy5lbnRpdHkpIHJldHVybjtcblxuICAgIGZvciAoY29uc3QgY2xhc3NOYW1lIGluIHRoaXMubG9naWMpIHtcbiAgICAgIGNvbnN0IGxvZ2ljQ29tcG9uZW50ID0gdGhpcy5sb2dpY1tjbGFzc05hbWVdO1xuICAgICAgaWYgKGxvZ2ljQ29tcG9uZW50ICYmIGxvZ2ljQ29tcG9uZW50LmluaXQpIHtcbiAgICAgICAgbG9naWNDb21wb25lbnQuaW5pdCh0aGlzLmVudGl0eSwgcmVuZGVyZXIsIC4uLmFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2ggYSBsb2dpYyBjb21wb25lbnQgdG8gdGhpcyBlbnRpdHkuXG4gICAqIEBwYXJhbSBsb2dpYyAtIFRoZSBsb2dpYyBjb21wb25lbnQgdG8gYXR0YWNoLiBVc2VzIGxvZ2ljLm5hbWUgb3IgY2xhc3MgbmFtZSBhcyBrZXkuXG4gICAqL1xuICBhZGRMb2dpYyhsb2dpYzogTG9naWM8VD4pIHtcbiAgICBjb25zdCBsb2dpY05hbWUgPSBsb2dpYy5uYW1lIHx8IGxvZ2ljLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgdGhpcy5sb2dpY1tsb2dpY05hbWVdID0gbG9naWM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbG9naWMgY29tcG9uZW50IGJ5IG5hbWUuXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGxvZ2ljIGNvbXBvbmVudCAoY2xhc3MgbmFtZSBvciBjdXN0b20gbmFtZSlcbiAgICogQHJldHVybnMgVGhlIGxvZ2ljIGNvbXBvbmVudCwgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZFxuICAgKi9cbiAgZ2V0TG9naWM8TCBleHRlbmRzIExvZ2ljPFQ+PihuYW1lOiBzdHJpbmcpOiBMIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5sb2dpY1tuYW1lXSBhcyBMIHwgdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBhIFBJWEkuQ29udGFpbmVyIHRvIGFuIGVudGl0eSB3aXRoIGxvZ2ljIHN1cHBvcnQuXG4gKiBUaGlzIGlzIHRoZSBtYWluIHdheSB0byBhZGQgTW94aSBmdW5jdGlvbmFsaXR5IHRvIFBJWEkgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0gZW50aXR5IC0gQW55IFBJWEkuQ29udGFpbmVyIChTcHJpdGUsIEdyYXBoaWNzLCBDb250YWluZXIsIGV0Yy4pXG4gKiBAcGFyYW0gbG9naWMgLSBPcHRpb25hbCBpbml0aWFsIGxvZ2ljIGNvbXBvbmVudHMgdG8gYXR0YWNoXG4gKiBAcmV0dXJucyBUaGUgc2FtZSBlbnRpdHkgd2l0aCBtb3hpRW50aXR5IHByb3BlcnR5IGF0dGFjaGVkXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBwbGF5ZXIgPSBhc0VudGl0eShuZXcgUElYSS5TcHJpdGUodGV4dHVyZSkpO1xuICogcGxheWVyLm1veGlFbnRpdHkuYWRkTG9naWMobmV3IFBsYXllckNvbnRyb2xsZXIoKSk7XG4gKiBzY2VuZS5hZGRDaGlsZChwbGF5ZXIpO1xuICpcbiAqIC8vIFdpdGggaW5pdGlhbCBsb2dpY1xuICogY29uc3QgZW5lbXkgPSBhc0VudGl0eShuZXcgUElYSS5TcHJpdGUodGV4dHVyZSksIHtcbiAqICAgJ0VuZW15QUknOiBuZXcgRW5lbXlBSSgpXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNFbnRpdHk8VCBleHRlbmRzIFBJWEkuQ29udGFpbmVyPihlbnRpdHk6IFQsIGxvZ2ljOiBNb3hpTG9naWM8VD4gPSB7fSk6IEFzRW50aXR5PFQ+IHtcbiAgY29uc3QgdGFyZ2V0ID0gZW50aXR5O1xuICBcbiAgLy8gcGl4aSBwYXRjaDogaXQncyB0aHJvd2luZyBhbiBlcnJvciBvbiBpbnRlcmFjdGl2ZSBldmVudHMgaWYgaXNJbnRlcmFjdGl2ZSgpIGRvZXNuJ3QgZXhpc3QuXG4gIHRhcmdldC5pc0ludGVyYWN0aXZlID0gKCkgPT4gZmFsc2U7IFxuXG4gICh0YXJnZXQgYXMgdW5rbm93biBhcyBBc0VudGl0eTxUPikubW94aUVudGl0eSA9IG5ldyBNb3hpRW50aXR5PFQ+KHRhcmdldCwgbG9naWMpO1xuICByZXR1cm4gZW50aXR5IGFzIHVua25vd24gYXMgQXNFbnRpdHk8VD47XG59XG5cbiIsImltcG9ydCBQSVhJIGZyb20gJ3BpeGkuanMnO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyTWFuYWdlciB7XG4gIHN0YXRpYyBnZXRSZW5kZXJlcjogKFxuICAgIG9wdGlvbnM6IFBhcnRpYWw8UElYSS5BdXRvRGV0ZWN0T3B0aW9ucz5cbiAgKSA9PiBQcm9taXNlPFBJWEkuUmVuZGVyZXI+O1xuXG4gIHN0YXRpYyBjcmVhdGU6IChcbiAgICAgIGh0bWxSb290OiBIVE1MRWxlbWVudCwgXG4gICAgICBvcHRpb25zOiBQYXJ0aWFsPFBJWEkuQXV0b0RldGVjdE9wdGlvbnM+KSA9PiBQcm9taXNlPFJlbmRlck1hbmFnZXI+O1xuXG4gIGh0bWxSb290OiBIVE1MRWxlbWVudDtcbiAgcmVuZGVyZXI6IFBJWEkuUmVuZGVyZXI7XG4gIGZpdFRvV2luZG93ID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoaHRtbFJvb3Q6IEhUTUxFbGVtZW50LCByZW5kZXJlcjogUElYSS5SZW5kZXJlcikge1xuICAgIHRoaXMuaHRtbFJvb3QgPSBodG1sUm9vdDtcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG5cbiAgICBodG1sUm9vdC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmNhbnZhcyk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHRoaXMub25SZXNpemUoKSk7XG4gICAgdGhpcy5vblJlc2l6ZSgpO1xuICB9XG5cbiAgcmVuZGVyKHN0YWdlOiBQSVhJLkNvbnRhaW5lcikge1xuICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHN0YWdlKTtcbiAgfVxuXG4gIG9uUmVzaXplID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVuZGVyZXIsIGh0bWxSb290OiByb290IH0gPSB0aGlzO1xuICAgIGNvbnN0IGNhbnZhcyA9IHJlbmRlcmVyLmNhbnZhcztcbiAgICBcbiAgICAvLyBHZXQgdGhlIHBhcmVudCBkaW1lbnNpb25zXG4gICAgY29uc3QgcGFyZW50V2lkdGggPSByb290LmNsaWVudFdpZHRoO1xuICAgIGNvbnN0IHBhcmVudEhlaWdodCA9IHJvb3QuY2xpZW50SGVpZ2h0O1xuICAgIFxuICAgIC8vIEdldCB0aGUgY2FudmFzJ3MgaW50ZW5kZWQgZGltZW5zaW9uc1xuICAgIGNvbnN0IGNhbnZhc1dpZHRoID0gcmVuZGVyZXIud2lkdGg7XG4gICAgY29uc3QgY2FudmFzSGVpZ2h0ID0gcmVuZGVyZXIuaGVpZ2h0O1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGUgdG8gZml0IHdoaWxlIG1haW50YWluaW5nIGFzcGVjdCByYXRpb1xuICAgIGNvbnN0IHNjYWxlID0gTWF0aC5taW4oXG4gICAgICBwYXJlbnRXaWR0aCAvIGNhbnZhc1dpZHRoLFxuICAgICAgcGFyZW50SGVpZ2h0IC8gY2FudmFzSGVpZ2h0XG4gICAgKTtcbiAgICBcbiAgICAvLyBTZXQgQ1NTIGRpbWVuc2lvbnMgdG8gc2NhbGUgdGhlIGNhbnZhc1xuICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IGAke01hdGguZmxvb3IoY2FudmFzV2lkdGggKiBzY2FsZSl9cHhgO1xuICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBgJHtNYXRoLmZsb29yKGNhbnZhc0hlaWdodCAqIHNjYWxlKX1weGA7XG4gIH07XG59XG5cblJlbmRlck1hbmFnZXIuZ2V0UmVuZGVyZXIgPSBhc3luYyAob3B0aW9uczogUGFydGlhbDxQSVhJLkF1dG9EZXRlY3RPcHRpb25zPikgPT4gKFxuICBhd2FpdCBQSVhJLmF1dG9EZXRlY3RSZW5kZXJlcihvcHRpb25zKVxuKTtcblxuUmVuZGVyTWFuYWdlci5jcmVhdGUgPSBhc3luYyAoaHRtbFJvb3Q6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBQYXJ0aWFsPFBJWEkuQXV0b0RldGVjdE9wdGlvbnM+KSA9PiAoXG4gIG5ldyBSZW5kZXJNYW5hZ2VyKGh0bWxSb290LCBhd2FpdCBSZW5kZXJNYW5hZ2VyLmdldFJlbmRlcmVyKG9wdGlvbnMpKVxuKTtcbiIsImltcG9ydCBQSVhJIGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0IHsgQXNFbnRpdHkgfSBmcm9tICcuL21veGktZW50aXR5JztcblxuZnVuY3Rpb24gaXNNb3hpRW50aXR5PFQgZXh0ZW5kcyBQSVhJLkNvbnRhaW5lcj4oZW50aXR5OiB1bmtub3duKTogZW50aXR5IGlzIEFzRW50aXR5PFQ+IHtcbiAgcmV0dXJuIGVudGl0eSAhPSBudWxsICYmIHR5cGVvZiBlbnRpdHkgPT09ICdvYmplY3QnICYmICdtb3hpRW50aXR5JyBpbiBlbnRpdHk7XG59XG5cbi8qKlxuICogUm9vdCBjb250YWluZXIgZm9yIGdhbWUgb2JqZWN0cy4gRXh0ZW5kcyBQSVhJLkNvbnRhaW5lci5cbiAqIEF1dG9tYXRpY2FsbHkgY2FsbHMgaW5pdC91cGRhdGUgb24gY2hpbGQgZW50aXRpZXMgY3JlYXRlZCB3aXRoIGFzRW50aXR5KCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBzY2VuZSA9IG5ldyBTY2VuZShyZW5kZXJlcik7XG4gKiBzY2VuZS5hZGRDaGlsZChhc0VudGl0eShzcHJpdGUpKTtcbiAqIHNjZW5lLmluaXQoKTsgIC8vIENhbGxzIGluaXQoKSBvbiBhbGwgZW50aXR5IGxvZ2ljXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFNjZW5lIGV4dGVuZHMgUElYSS5Db250YWluZXIge1xuICByZW5kZXJlcjogUElYSS5SZW5kZXJlcjxIVE1MQ2FudmFzRWxlbWVudD47XG5cbiAgY29uc3RydWN0b3IocmVuZGVyZXI6IFBJWEkuUmVuZGVyZXI8SFRNTENhbnZhc0VsZW1lbnQ+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cblxuICAvKiogSW5pdGlhbGl6ZSBhbGwgZW50aXR5IGxvZ2ljLiBDYWxsIG9uY2UgYWZ0ZXIgYWRkaW5nIGVudGl0aWVzLiAqL1xuICBpbml0KCkge1xuICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIGlmIChpc01veGlFbnRpdHkoY2hpbGQpKSB7XG4gICAgICAgIGNoaWxkLm1veGlFbnRpdHkuaW5pdCh0aGlzLnJlbmRlcmVyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBVcGRhdGUgYWxsIGVudGl0eSBsb2dpYy4gQ2FsbGVkIGF1dG9tYXRpY2FsbHkgYnkgRW5naW5lIGVhY2ggZnJhbWUuICovXG4gIHVwZGF0ZShkZWx0YVRpbWU6IG51bWJlcikge1xuICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIGlmIChpc01veGlFbnRpdHkoY2hpbGQpKSB7XG4gICAgICAgIGNoaWxkLm1veGlFbnRpdHkudXBkYXRlKGRlbHRhVGltZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiogUmVuZGVyIHRoZSBzY2VuZS4gQ2FsbGVkIGF1dG9tYXRpY2FsbHkgYnkgRW5naW5lIGVhY2ggZnJhbWUuICovXG4gIGRyYXcoZGVsdGFUaW1lOiBudW1iZXIpIHtcbiAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzKTtcbiAgfVxufSIsImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBVSVNjYWxlTW9kZSB9IGZyb20gJy4vVUlTY2FsZU1vZGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVJTGF5ZXJPcHRpb25zIHtcbiAgLyoqXG4gICAqIFNjYWxpbmcgbW9kZSBmb3IgdGhpcyBVSSBsYXllclxuICAgKiBAZGVmYXVsdCBVSVNjYWxlTW9kZS5Ob25lXG4gICAqL1xuICBzY2FsZU1vZGU/OiBVSVNjYWxlTW9kZTtcblxuICAvKipcbiAgICogVGFyZ2V0IHdpZHRoIGZvciB0aGUgVUkgbGF5ZXIgKHVzZWQgYXMgcmVmZXJlbmNlIGZvciBzY2FsaW5nKVxuICAgKiBJZiBub3QgcHJvdmlkZWQsIHVzZXMgdGhlIGZpcnN0IGNoaWxkJ3Mgd2lkdGhcbiAgICovXG4gIHRhcmdldFdpZHRoPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUYXJnZXQgaGVpZ2h0IGZvciB0aGUgVUkgbGF5ZXIgKHVzZWQgYXMgcmVmZXJlbmNlIGZvciBzY2FsaW5nKVxuICAgKiBJZiBub3QgcHJvdmlkZWQsIHVzZXMgdGhlIGZpcnN0IGNoaWxkJ3MgaGVpZ2h0XG4gICAqL1xuICB0YXJnZXRIZWlnaHQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogVUlMYXllciBpcyBhIGNvbnRhaW5lciB0aGF0IG1hbmFnZXMgc2NhbGluZyBiZWhhdmlvciBmb3IgYWxsIGl0cyBjaGlsZHJlblxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBodWRMYXllciA9IG5ldyBVSUxheWVyKHsgc2NhbGVNb2RlOiBVSVNjYWxlTW9kZS5TY2FsZVVJIH0pO1xuICogc2NlbmUuYWRkQ2hpbGQoaHVkTGF5ZXIpO1xuICogaHVkTGF5ZXIuYWRkQ2hpbGQodGFicy5jb250YWluZXIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBVSUxheWVyIGV4dGVuZHMgUElYSS5Db250YWluZXIge1xuICBwcml2YXRlIHNjYWxlTW9kZTogVUlTY2FsZU1vZGU7XG4gIHByaXZhdGUgdGFyZ2V0V2lkdGg/OiBudW1iZXI7XG4gIHByaXZhdGUgdGFyZ2V0SGVpZ2h0PzogbnVtYmVyO1xuICBwcml2YXRlIGluaXRpYWxCb3VuZHNSZWNvcmRlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFVJTGF5ZXJPcHRpb25zID0ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc2NhbGVNb2RlID0gb3B0aW9ucy5zY2FsZU1vZGUgPz8gVUlTY2FsZU1vZGUuTm9uZTtcbiAgICB0aGlzLnRhcmdldFdpZHRoID0gb3B0aW9ucy50YXJnZXRXaWR0aDtcbiAgICB0aGlzLnRhcmdldEhlaWdodCA9IG9wdGlvbnMudGFyZ2V0SGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgbGF5ZXIncyBzY2FsZSBiYXNlZCBvbiB0aGUgY3VycmVudCBjYW52YXMgc2l6ZVxuICAgKi9cbiAgdXBkYXRlU2NhbGUoY2FudmFzV2lkdGg6IG51bWJlciwgY2FudmFzSGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zY2FsZU1vZGUgPT09IFVJU2NhbGVNb2RlLk5vbmUpIHtcbiAgICAgIHRoaXMuc2NhbGUuc2V0KDEsIDEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlY29yZCBpbml0aWFsIGJvdW5kcyBmcm9tIGZpcnN0IGNoaWxkIGlmIG5vdCBleHBsaWNpdGx5IHNldFxuICAgIGlmICghdGhpcy5pbml0aWFsQm91bmRzUmVjb3JkZWQgJiYgdGhpcy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoIXRoaXMudGFyZ2V0V2lkdGggfHwgIXRoaXMudGFyZ2V0SGVpZ2h0KSB7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0TG9jYWxCb3VuZHMoKTtcbiAgICAgICAgdGhpcy50YXJnZXRXaWR0aCA9IHRoaXMudGFyZ2V0V2lkdGggPz8gYm91bmRzLndpZHRoO1xuICAgICAgICB0aGlzLnRhcmdldEhlaWdodCA9IHRoaXMudGFyZ2V0SGVpZ2h0ID8/IGJvdW5kcy5oZWlnaHQ7XG4gICAgICB9XG4gICAgICB0aGlzLmluaXRpYWxCb3VuZHNSZWNvcmRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnRhcmdldFdpZHRoIHx8ICF0aGlzLnRhcmdldEhlaWdodCkge1xuICAgICAgLy8gTm8gZGltZW5zaW9ucyB0byBzY2FsZSBmcm9tIHlldFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHNjYWxlWCA9IGNhbnZhc1dpZHRoIC8gdGhpcy50YXJnZXRXaWR0aDtcbiAgICBjb25zdCBzY2FsZVkgPSBjYW52YXNIZWlnaHQgLyB0aGlzLnRhcmdldEhlaWdodDtcblxuICAgIHN3aXRjaCAodGhpcy5zY2FsZU1vZGUpIHtcbiAgICAgIGNhc2UgVUlTY2FsZU1vZGUuU2NhbGVVSTpcbiAgICAgICAgLy8gU2NhbGUgdG8gZmlsbCwgc3RyZXRjaGluZyBpZiBuZWNlc3NhcnlcbiAgICAgICAgdGhpcy5zY2FsZS5zZXQoc2NhbGVYLCBzY2FsZVkpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBVSVNjYWxlTW9kZS5Mb2NrUmF0aW86XG4gICAgICAgIC8vIFNjYWxlIG1haW50YWluaW5nIGFzcGVjdCByYXRpb1xuICAgICAgICBjb25zdCBzY2FsZSA9IE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKTtcbiAgICAgICAgdGhpcy5zY2FsZS5zZXQoc2NhbGUsIHNjYWxlKTtcbiAgICAgICAgLy8gQ2VudGVyIHRoZSBjb250ZW50XG4gICAgICAgIHRoaXMucG9zaXRpb24uc2V0KFxuICAgICAgICAgIChjYW52YXNXaWR0aCAtIHRoaXMudGFyZ2V0V2lkdGggKiBzY2FsZSkgLyAyLFxuICAgICAgICAgIChjYW52YXNIZWlnaHQgLSB0aGlzLnRhcmdldEhlaWdodCAqIHNjYWxlKSAvIDJcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNoaWxkIGFuZCB0cmlnZ2VyIHNjYWxlIHVwZGF0ZSBpZiBuZWVkZWRcbiAgICovXG4gIG92ZXJyaWRlIGFkZENoaWxkPFQgZXh0ZW5kcyBQSVhJLkNvbnRhaW5lcltdPiguLi5jaGlsZHJlbjogVCk6IFRbMF0ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHN1cGVyLmFkZENoaWxkKC4uLmNoaWxkcmVuKTtcbiAgICB0aGlzLmluaXRpYWxCb3VuZHNSZWNvcmRlZCA9IGZhbHNlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cbiIsIi8qKlxuICogVUkgU2NhbGluZyBtb2RlcyBmb3IgVUlMYXllclxuICovXG5leHBvcnQgZW51bSBVSVNjYWxlTW9kZSB7XG4gIC8qKlxuICAgKiBObyBzY2FsaW5nIC0gMToxIHBpeGVsIG1hcHBpbmcsIG5vIG9mZnNldCBjYWxjdWxhdGlvbnNcbiAgICovXG4gIE5vbmUgPSAnbm9uZScsXG5cbiAgLyoqXG4gICAqIFNjYWxlIFVJIHByb3BvcnRpb25hbGx5IHRvIGZpbGwgdGhlIGF2YWlsYWJsZSBzcGFjZVxuICAgKi9cbiAgU2NhbGVVSSA9ICdzY2FsZVVJJyxcblxuICAvKipcbiAgICogU2NhbGUgd2hpbGUgbWFpbnRhaW5pbmcgYXNwZWN0IHJhdGlvIChtYXkgbGV0dGVyYm94L3BpbGxhcmJveClcbiAgICovXG4gIExvY2tSYXRpbyA9ICdsb2NrUmF0aW8nXG59XG4iLCJpbXBvcnQgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IEJ1dHRvblN0YXRlIH0gZnJvbSAnLi91aS1idXR0b24nO1xuaW1wb3J0IHsgVUlQYW5lbCB9IGZyb20gJy4vdWktcGFuZWwnO1xuXG4vKipcbiAqIFN0cmF0ZWd5IGludGVyZmFjZSBmb3IgYnV0dG9uIGJhY2tncm91bmQgcmVuZGVyaW5nXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQnV0dG9uQmFja2dyb3VuZFN0cmF0ZWd5IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5kIHJldHVybnMgdGhlIGJhY2tncm91bmQgY29udGFpbmVyXG4gICAqL1xuICBjcmVhdGUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBQSVhJLkNvbnRhaW5lcjtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgdmlzdWFsIHN0YXRlIG9mIHRoZSBiYWNrZ3JvdW5kXG4gICAqL1xuICB1cGRhdGVTdGF0ZShzdGF0ZTogQnV0dG9uU3RhdGUpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBhY3R1YWwgcmVuZGVyZWQgaGVpZ2h0IG9mIHRoZSBiYWNrZ3JvdW5kXG4gICAqL1xuICBnZXRBY3R1YWxIZWlnaHQoKTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgcmVzb3VyY2VzXG4gICAqL1xuICBkZXN0cm95KCk6IHZvaWQ7XG59XG5cbi8qKlxuICogU29saWQgY29sb3IgYmFja2dyb3VuZCBzdHJhdGVneSB1c2luZyBVSVBhbmVsXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBjbGFzcyBTb2xpZENvbG9yQmFja2dyb3VuZFN0cmF0ZWd5IGltcGxlbWVudHMgQnV0dG9uQmFja2dyb3VuZFN0cmF0ZWd5IHtcbiAgcHJpdmF0ZSBwYW5lbD86IFVJUGFuZWw7XG4gIHByaXZhdGUgbm9ybWFsQ29sb3I6IG51bWJlcjtcbiAgcHJpdmF0ZSBob3ZlckNvbG9yOiBudW1iZXI7XG4gIHByaXZhdGUgcHJlc3NlZENvbG9yOiBudW1iZXI7XG4gIHByaXZhdGUgZGlzYWJsZWRDb2xvcjogbnVtYmVyO1xuICBwcml2YXRlIHdpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgaGVpZ2h0OiBudW1iZXI7XG4gIHByaXZhdGUgYm9yZGVyUmFkaXVzOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYmFja2dyb3VuZENvbG9yOiBudW1iZXIsXG4gICAgd2lkdGg6IG51bWJlcixcbiAgICBoZWlnaHQ6IG51bWJlcixcbiAgICBib3JkZXJSYWRpdXM6IG51bWJlclxuICApIHtcbiAgICB0aGlzLm5vcm1hbENvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuICAgIHRoaXMuaG92ZXJDb2xvciA9IHRoaXMuZGFya2VuQ29sb3IoYmFja2dyb3VuZENvbG9yLCAwLjkpO1xuICAgIHRoaXMucHJlc3NlZENvbG9yID0gdGhpcy5kYXJrZW5Db2xvcihiYWNrZ3JvdW5kQ29sb3IsIDAuOCk7XG4gICAgdGhpcy5kaXNhYmxlZENvbG9yID0gMHg4ODg4ODg7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuYm9yZGVyUmFkaXVzID0gYm9yZGVyUmFkaXVzO1xuICB9XG5cbiAgY3JlYXRlKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogUElYSS5Db250YWluZXIge1xuICAgIHRoaXMucGFuZWwgPSBuZXcgVUlQYW5lbCh7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMubm9ybWFsQ29sb3IsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGJvcmRlclJhZGl1czogdGhpcy5ib3JkZXJSYWRpdXNcbiAgICB9KTtcblxuICAgIHRoaXMucGFuZWwubGF5b3V0KHdpZHRoLCBoZWlnaHQpO1xuICAgIHJldHVybiB0aGlzLnBhbmVsLmNvbnRhaW5lcjtcbiAgfVxuXG4gIHVwZGF0ZVN0YXRlKHN0YXRlOiBCdXR0b25TdGF0ZSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5wYW5lbCkgcmV0dXJuO1xuXG4gICAgbGV0IGNvbG9yOiBudW1iZXI7XG4gICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgY2FzZSBCdXR0b25TdGF0ZS5Ob3JtYWw6XG4gICAgICAgIGNvbG9yID0gdGhpcy5ub3JtYWxDb2xvcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJ1dHRvblN0YXRlLkhvdmVyOlxuICAgICAgICBjb2xvciA9IHRoaXMuaG92ZXJDb2xvcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJ1dHRvblN0YXRlLlByZXNzZWQ6XG4gICAgICAgIGNvbG9yID0gdGhpcy5wcmVzc2VkQ29sb3I7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBCdXR0b25TdGF0ZS5EaXNhYmxlZDpcbiAgICAgICAgY29sb3IgPSB0aGlzLmRpc2FibGVkQ29sb3I7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMucGFuZWwuc2V0QmFja2dyb3VuZENvbG9yKGNvbG9yKTtcbiAgfVxuXG4gIGdldEFjdHVhbEhlaWdodCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmhlaWdodDtcbiAgfVxuXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgLy8gVUlQYW5lbCBjbGVhbnVwIGhhbmRsZWQgYnkgY29udGFpbmVyXG4gIH1cblxuICBwcml2YXRlIGRhcmtlbkNvbG9yKGNvbG9yOiBudW1iZXIsIGZhY3RvcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCByID0gKChjb2xvciA+PiAxNikgJiAweGZmKSAqIGZhY3RvcjtcbiAgICBjb25zdCBnID0gKChjb2xvciA+PiA4KSAmIDB4ZmYpICogZmFjdG9yO1xuICAgIGNvbnN0IGIgPSAoY29sb3IgJiAweGZmKSAqIGZhY3RvcjtcbiAgICByZXR1cm4gKChyIDw8IDE2KSB8IChnIDw8IDgpIHwgYikgPj4+IDA7XG4gIH1cbn1cblxuLyoqXG4gKiBDb25maWd1cmF0aW9uIGZvciBpY29uIG92ZXJsYXlzXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSWNvbkNvbmZpZyB7XG4gIC8qKiBTcHJpdGVzaGVldCBjb250YWluaW5nIHRoZSBpY29uIHRleHR1cmUgKi9cbiAgc3ByaXRlc2hlZXQ6IFBJWEkuU3ByaXRlc2hlZXQ7XG4gIC8qKiBUZXh0dXJlIG5hbWUgaW4gdGhlIHNwcml0ZXNoZWV0ICovXG4gIHRleHR1cmVOYW1lOiBzdHJpbmc7XG4gIC8qKiBJY29uIHNjYWxlIChkZWZhdWx0OiAxLjApICovXG4gIHNjYWxlPzogbnVtYmVyO1xuICAvKiogVXNlIHBpeGVsLXBlcmZlY3QgcmVuZGVyaW5nICovXG4gIHBpeGVsUGVyZmVjdD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQ29uZmlndXJhdGlvbiBmb3Igc3ByaXRlLWJhc2VkIGJhY2tncm91bmRzXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3ByaXRlQmFja2dyb3VuZENvbmZpZyB7XG4gIC8qKiBTcHJpdGVzaGVldCBjb250YWluaW5nIHRoZSBidXR0b24gdGV4dHVyZXMgKi9cbiAgc3ByaXRlc2hlZXQ6IFBJWEkuU3ByaXRlc2hlZXQ7XG4gIC8qKiBUZXh0dXJlIG5hbWUgcGF0dGVybiAtIHVzZSB7Y29sb3J9IHBsYWNlaG9sZGVyLiBFeGFtcGxlOiBcImJhckhvcml6b250YWxfe2NvbG9yfV9sZWZ0LnBuZ1wiICovXG4gIHRleHR1cmVQYXR0ZXJuOiBzdHJpbmc7XG4gIC8qKiBDb2xvciB2YXJpYW50IHRvIHVzZSAoZS5nLiwgJ2JsdWUnLCAnZ3JlZW4nLCAncmVkJykgKi9cbiAgY29sb3I6IHN0cmluZztcbiAgLyoqIFVzZSBwaXhlbC1wZXJmZWN0IHJlbmRlcmluZyAobmVhcmVzdCBuZWlnaGJvcikgKi9cbiAgcGl4ZWxQZXJmZWN0PzogYm9vbGVhbjtcbiAgLyoqIFVzZSA5LXNsaWNlIHJlbmRlcmluZyBpbnN0ZWFkIG9mIHRocmVlLXBpZWNlIGhvcml6b250YWwgKi9cbiAgdXNlTmluZVNsaWNlPzogYm9vbGVhbjtcbiAgLyoqIDktc2xpY2UgYm9yZGVyIHdpZHRocyAobGVmdCwgdG9wLCByaWdodCwgYm90dG9tKSAtIHJlcXVpcmVkIGlmIHVzZU5pbmVTbGljZSBpcyB0cnVlICovXG4gIG5pbmVTbGljZUJvcmRlcnM/OiB7IGxlZnQ6IG51bWJlcjsgdG9wOiBudW1iZXI7IHJpZ2h0OiBudW1iZXI7IGJvdHRvbTogbnVtYmVyIH07XG4gIC8qKiBUZXh0dXJlIG5hbWUgZm9yIHByZXNzZWQvZG93biBzdGF0ZSAtIHVzZSB7Y29sb3J9IHBsYWNlaG9sZGVyIGlmIG5lZWRlZCAqL1xuICBwcmVzc2VkVGV4dHVyZVBhdHRlcm4/OiBzdHJpbmc7XG4gIC8qKiBJY29uIGNvbmZpZ3VyYXRpb24gZm9yIG92ZXJsYXkgKi9cbiAgaWNvbj86IEljb25Db25maWc7XG59XG5cbi8qKlxuICogU3ByaXRlLWJhc2VkIGJhY2tncm91bmQgc3RyYXRlZ3kgdXNpbmcgdGhyZWUtcGllY2UgaG9yaXpvbnRhbCB0ZXh0dXJlcyBvciA5LXNsaWNlXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBjbGFzcyBTcHJpdGVCYWNrZ3JvdW5kU3RyYXRlZ3kgaW1wbGVtZW50cyBCdXR0b25CYWNrZ3JvdW5kU3RyYXRlZ3kge1xuICBwcml2YXRlIGNvbnRhaW5lcj86IFBJWEkuQ29udGFpbmVyO1xuICBwcml2YXRlIHNwcml0ZUxlZnQ/OiBQSVhJLlNwcml0ZTtcbiAgcHJpdmF0ZSBzcHJpdGVNaWQ/OiBQSVhJLlNwcml0ZTtcbiAgcHJpdmF0ZSBzcHJpdGVSaWdodD86IFBJWEkuU3ByaXRlO1xuICBwcml2YXRlIG5pbmVTbGljZVNwcml0ZT86IFBJWEkuTmluZVNsaWNlU3ByaXRlO1xuICBwcml2YXRlIG5pbmVTbGljZVNwcml0ZVByZXNzZWQ/OiBQSVhJLk5pbmVTbGljZVNwcml0ZTtcbiAgcHJpdmF0ZSBpY29uU3ByaXRlPzogUElYSS5TcHJpdGU7XG4gIHByaXZhdGUgY29uZmlnOiBTcHJpdGVCYWNrZ3JvdW5kQ29uZmlnO1xuICBwcml2YXRlIHdpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgaGVpZ2h0OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBTcHJpdGVCYWNrZ3JvdW5kQ29uZmlnLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIGNyZWF0ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IFBJWEkuQ29udGFpbmVyIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xuICAgIGNvbnN0IHsgc3ByaXRlc2hlZXQsIHRleHR1cmVQYXR0ZXJuLCBjb2xvciwgcGl4ZWxQZXJmZWN0LCB1c2VOaW5lU2xpY2UsIG5pbmVTbGljZUJvcmRlcnMsIHByZXNzZWRUZXh0dXJlUGF0dGVybiwgaWNvbiB9ID0gdGhpcy5jb25maWc7XG5cbiAgICAvLyBTZXQgcGl4ZWwtcGVyZmVjdCByZW5kZXJpbmcgaWYgcmVxdWVzdGVkXG4gICAgaWYgKHBpeGVsUGVyZmVjdCAmJiBzcHJpdGVzaGVldC50ZXh0dXJlU291cmNlKSB7XG4gICAgICBzcHJpdGVzaGVldC50ZXh0dXJlU291cmNlLnNjYWxlTW9kZSA9ICduZWFyZXN0JztcbiAgICB9XG5cbiAgICBpZiAodXNlTmluZVNsaWNlICYmIG5pbmVTbGljZUJvcmRlcnMpIHtcbiAgICAgIC8vIFVzZSA5LXNsaWNlIHNwcml0ZVxuICAgICAgY29uc3QgdGV4dHVyZU5hbWUgPSB0ZXh0dXJlUGF0dGVybi5pbmNsdWRlcygne2NvbG9yfScpXG4gICAgICAgID8gdGV4dHVyZVBhdHRlcm4ucmVwbGFjZSgne2NvbG9yfScsIGNvbG9yKVxuICAgICAgICA6IHRleHR1cmVQYXR0ZXJuO1xuICAgICAgY29uc3QgdGV4dHVyZSA9IHNwcml0ZXNoZWV0LnRleHR1cmVzW3RleHR1cmVOYW1lXTtcblxuICAgICAgdGhpcy5uaW5lU2xpY2VTcHJpdGUgPSBuZXcgUElYSS5OaW5lU2xpY2VTcHJpdGUoe1xuICAgICAgICB0ZXh0dXJlLFxuICAgICAgICBsZWZ0V2lkdGg6IG5pbmVTbGljZUJvcmRlcnMubGVmdCxcbiAgICAgICAgdG9wSGVpZ2h0OiBuaW5lU2xpY2VCb3JkZXJzLnRvcCxcbiAgICAgICAgcmlnaHRXaWR0aDogbmluZVNsaWNlQm9yZGVycy5yaWdodCxcbiAgICAgICAgYm90dG9tSGVpZ2h0OiBuaW5lU2xpY2VCb3JkZXJzLmJvdHRvbSxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodFxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMubmluZVNsaWNlU3ByaXRlKTtcblxuICAgICAgLy8gQ3JlYXRlIHByZXNzZWQgc3RhdGUgc3ByaXRlIGlmIHByb3ZpZGVkXG4gICAgICBpZiAocHJlc3NlZFRleHR1cmVQYXR0ZXJuKSB7XG4gICAgICAgIGNvbnN0IHByZXNzZWRUZXh0dXJlTmFtZSA9IHByZXNzZWRUZXh0dXJlUGF0dGVybi5pbmNsdWRlcygne2NvbG9yfScpXG4gICAgICAgICAgPyBwcmVzc2VkVGV4dHVyZVBhdHRlcm4ucmVwbGFjZSgne2NvbG9yfScsIGNvbG9yKVxuICAgICAgICAgIDogcHJlc3NlZFRleHR1cmVQYXR0ZXJuO1xuICAgICAgICBjb25zdCBwcmVzc2VkVGV4dHVyZSA9IHNwcml0ZXNoZWV0LnRleHR1cmVzW3ByZXNzZWRUZXh0dXJlTmFtZV07XG5cbiAgICAgICAgdGhpcy5uaW5lU2xpY2VTcHJpdGVQcmVzc2VkID0gbmV3IFBJWEkuTmluZVNsaWNlU3ByaXRlKHtcbiAgICAgICAgICB0ZXh0dXJlOiBwcmVzc2VkVGV4dHVyZSxcbiAgICAgICAgICBsZWZ0V2lkdGg6IG5pbmVTbGljZUJvcmRlcnMubGVmdCxcbiAgICAgICAgICB0b3BIZWlnaHQ6IG5pbmVTbGljZUJvcmRlcnMudG9wLFxuICAgICAgICAgIHJpZ2h0V2lkdGg6IG5pbmVTbGljZUJvcmRlcnMucmlnaHQsXG4gICAgICAgICAgYm90dG9tSGVpZ2h0OiBuaW5lU2xpY2VCb3JkZXJzLmJvdHRvbSxcbiAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICBoZWlnaHRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gT2Zmc2V0IHByZXNzZWQgc3RhdGUgZG93biBieSA0IHBpeGVscyB0byBtYXRjaCB0aGUgYmV2ZWwgaGVpZ2h0XG4gICAgICAgIHRoaXMubmluZVNsaWNlU3ByaXRlUHJlc3NlZC55ID0gNDtcbiAgICAgICAgdGhpcy5uaW5lU2xpY2VTcHJpdGVQcmVzc2VkLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5uaW5lU2xpY2VTcHJpdGVQcmVzc2VkKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIHRocmVlLXBpZWNlIGhvcml6b250YWwgc3ByaXRlc1xuICAgICAgY29uc3QgbGVmdFRleHR1cmVOYW1lID0gdGhpcy5nZXRUZXh0dXJlTmFtZSh0ZXh0dXJlUGF0dGVybiwgY29sb3IsICdsZWZ0Jyk7XG4gICAgICBjb25zdCBtaWRUZXh0dXJlTmFtZSA9IHRoaXMuZ2V0VGV4dHVyZU5hbWUodGV4dHVyZVBhdHRlcm4sIGNvbG9yLCAnbWlkJyk7XG4gICAgICBjb25zdCByaWdodFRleHR1cmVOYW1lID0gdGhpcy5nZXRUZXh0dXJlTmFtZSh0ZXh0dXJlUGF0dGVybiwgY29sb3IsICdyaWdodCcpO1xuXG4gICAgICB0aGlzLnNwcml0ZUxlZnQgPSBuZXcgUElYSS5TcHJpdGUoc3ByaXRlc2hlZXQudGV4dHVyZXNbbGVmdFRleHR1cmVOYW1lXSk7XG4gICAgICB0aGlzLnNwcml0ZU1pZCA9IG5ldyBQSVhJLlNwcml0ZShzcHJpdGVzaGVldC50ZXh0dXJlc1ttaWRUZXh0dXJlTmFtZV0pO1xuICAgICAgdGhpcy5zcHJpdGVSaWdodCA9IG5ldyBQSVhJLlNwcml0ZShzcHJpdGVzaGVldC50ZXh0dXJlc1tyaWdodFRleHR1cmVOYW1lXSk7XG5cbiAgICAgIC8vIFNjYWxlIHRvIG1hdGNoIGJ1dHRvbiBoZWlnaHRcbiAgICAgIGNvbnN0IHNjYWxlWSA9IGhlaWdodCAvIHRoaXMuc3ByaXRlTGVmdC5oZWlnaHQ7XG4gICAgICB0aGlzLnNwcml0ZUxlZnQuc2NhbGUueSA9IHNjYWxlWTtcbiAgICAgIHRoaXMuc3ByaXRlTWlkLnNjYWxlLnkgPSBzY2FsZVk7XG4gICAgICB0aGlzLnNwcml0ZVJpZ2h0LnNjYWxlLnkgPSBzY2FsZVk7XG5cbiAgICAgIC8vIFBvc2l0aW9uIHNwcml0ZXMgaG9yaXpvbnRhbGx5XG4gICAgICB0aGlzLnNwcml0ZUxlZnQueCA9IDA7XG5cbiAgICAgIGNvbnN0IG1pZGRsZVdpZHRoID0gd2lkdGggLSB0aGlzLnNwcml0ZUxlZnQud2lkdGggLSB0aGlzLnNwcml0ZVJpZ2h0LndpZHRoO1xuICAgICAgdGhpcy5zcHJpdGVNaWQud2lkdGggPSBtaWRkbGVXaWR0aDtcbiAgICAgIHRoaXMuc3ByaXRlTWlkLnggPSB0aGlzLnNwcml0ZUxlZnQud2lkdGg7XG5cbiAgICAgIHRoaXMuc3ByaXRlUmlnaHQueCA9IHRoaXMuc3ByaXRlTGVmdC53aWR0aCArIG1pZGRsZVdpZHRoO1xuXG4gICAgICAvLyBBZGQgdG8gY29udGFpbmVyXG4gICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLnNwcml0ZUxlZnQpO1xuICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5zcHJpdGVNaWQpO1xuICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5zcHJpdGVSaWdodCk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGljb24gaWYgcHJvdmlkZWRcbiAgICBpZiAoaWNvbikge1xuICAgICAgY29uc3QgaWNvblRleHR1cmUgPSBpY29uLnNwcml0ZXNoZWV0LnRleHR1cmVzW2ljb24udGV4dHVyZU5hbWVdO1xuICAgICAgdGhpcy5pY29uU3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKGljb25UZXh0dXJlKTtcblxuICAgICAgaWYgKGljb24ucGl4ZWxQZXJmZWN0ICYmIGljb24uc3ByaXRlc2hlZXQudGV4dHVyZVNvdXJjZSkge1xuICAgICAgICBpY29uLnNwcml0ZXNoZWV0LnRleHR1cmVTb3VyY2Uuc2NhbGVNb2RlID0gJ25lYXJlc3QnO1xuICAgICAgfVxuXG4gICAgICBpZiAoaWNvbi5zY2FsZSkge1xuICAgICAgICB0aGlzLmljb25TcHJpdGUuc2NhbGUuc2V0KGljb24uc2NhbGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBDZW50ZXIgdGhlIGljb25cbiAgICAgIHRoaXMuaWNvblNwcml0ZS5hbmNob3Iuc2V0KDAuNSk7XG4gICAgICB0aGlzLmljb25TcHJpdGUueCA9IHdpZHRoIC8gMjtcbiAgICAgIHRoaXMuaWNvblNwcml0ZS55ID0gaGVpZ2h0IC8gMjtcblxuICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5pY29uU3ByaXRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICB1cGRhdGVTdGF0ZShzdGF0ZTogQnV0dG9uU3RhdGUpOiB2b2lkIHtcbiAgICAvLyBIYW5kbGUgdXAvZG93biBzdGF0ZSBzd2l0Y2hpbmcgZm9yIDktc2xpY2Ugc3ByaXRlc1xuICAgIGlmICh0aGlzLm5pbmVTbGljZVNwcml0ZSAmJiB0aGlzLm5pbmVTbGljZVNwcml0ZVByZXNzZWQpIHtcbiAgICAgIGNvbnN0IGlzUHJlc3NlZCA9IHN0YXRlID09PSBCdXR0b25TdGF0ZS5QcmVzc2VkO1xuICAgICAgdGhpcy5uaW5lU2xpY2VTcHJpdGUudmlzaWJsZSA9ICFpc1ByZXNzZWQ7XG4gICAgICB0aGlzLm5pbmVTbGljZVNwcml0ZVByZXNzZWQudmlzaWJsZSA9IGlzUHJlc3NlZDtcblxuICAgICAgLy8gT2Zmc2V0IGljb24gd2hlbiBwcmVzc2VkXG4gICAgICBpZiAodGhpcy5pY29uU3ByaXRlKSB7XG4gICAgICAgIHRoaXMuaWNvblNwcml0ZS55ID0gKHRoaXMuaGVpZ2h0IC8gMikgKyAoaXNQcmVzc2VkID8gNCA6IDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVc2UgdGludGluZyBmb3Igc3RhdGVzIHdoZW4gbm8gcHJlc3NlZCB0ZXh0dXJlIGlzIGF2YWlsYWJsZVxuICAgICAgbGV0IHRpbnQ6IG51bWJlcjtcbiAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgY2FzZSBCdXR0b25TdGF0ZS5Ob3JtYWw6XG4gICAgICAgICAgdGludCA9IDB4ZmZmZmZmO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEJ1dHRvblN0YXRlLkhvdmVyOlxuICAgICAgICAgIHRpbnQgPSAweGNjY2NjYztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCdXR0b25TdGF0ZS5QcmVzc2VkOlxuICAgICAgICAgIHRpbnQgPSAweDk5OTk5OTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCdXR0b25TdGF0ZS5EaXNhYmxlZDpcbiAgICAgICAgICB0aW50ID0gMHg4ODg4ODg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm5pbmVTbGljZVNwcml0ZSkge1xuICAgICAgICB0aGlzLm5pbmVTbGljZVNwcml0ZS50aW50ID0gdGludDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zcHJpdGVMZWZ0ICYmIHRoaXMuc3ByaXRlTWlkICYmIHRoaXMuc3ByaXRlUmlnaHQpIHtcbiAgICAgICAgdGhpcy5zcHJpdGVMZWZ0LnRpbnQgPSB0aW50O1xuICAgICAgICB0aGlzLnNwcml0ZU1pZC50aW50ID0gdGludDtcbiAgICAgICAgdGhpcy5zcHJpdGVSaWdodC50aW50ID0gdGludDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRBY3R1YWxIZWlnaHQoKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5uaW5lU2xpY2VTcHJpdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLm5pbmVTbGljZVNwcml0ZS5oZWlnaHQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNwcml0ZUxlZnQ/LmhlaWdodCA/PyB0aGlzLmhlaWdodDtcbiAgfVxuXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWluZXI/LmRlc3Ryb3koeyBjaGlsZHJlbjogdHJ1ZSB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGV4dHVyZU5hbWUocGF0dGVybjogc3RyaW5nLCBjb2xvcjogc3RyaW5nLCBwYXJ0OiAnbGVmdCcgfCAnbWlkJyB8ICdyaWdodCcpOiBzdHJpbmcge1xuICAgIC8vIFJlcGxhY2Uge2NvbG9yfSBwbGFjZWhvbGRlciBhbmQgZW5zdXJlIGNvcnJlY3QgcGFydFxuICAgIGxldCBuYW1lID0gcGF0dGVybi5yZXBsYWNlKCd7Y29sb3J9JywgY29sb3IpO1xuXG4gICAgLy8gUmVwbGFjZSBhbnkgZXhpc3RpbmcgcGFydCBzdWZmaXggd2l0aCB0aGUgZGVzaXJlZCBvbmVcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9fKD86bGVmdHxtaWR8cmlnaHQpXFwucG5nJC8sIGBfJHtwYXJ0fS5wbmdgKTtcblxuICAgIHJldHVybiBuYW1lO1xuICB9XG59XG4iLCJpbXBvcnQgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IFVJQ29tcG9uZW50IH0gZnJvbSAnLi4vY29yZS91aS1jb21wb25lbnQnO1xuaW1wb3J0IHsgQm94TW9kZWwsIE1lYXN1cmVkU2l6ZSB9IGZyb20gJy4uL2NvcmUvYm94LW1vZGVsJztcblxuLyoqXG4gKiBQcm9wcyBmb3IgY29uZmlndXJpbmcgYSBVSUJveFxuICpcbiAqIEBjYXRlZ29yeSBVSVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVJQm94UHJvcHMge1xuICAvKiogQmFja2dyb3VuZCBjb2xvciAoaGV4IG51bWJlciwgZS5nLiwgMHhmZjAwMDAgZm9yIHJlZCkgKi9cbiAgYmFja2dyb3VuZENvbG9yPzogbnVtYmVyO1xuICAvKiogQmFja2dyb3VuZCBhbHBoYS9vcGFjaXR5ICgwLTEpICovXG4gIGJhY2tncm91bmRBbHBoYT86IG51bWJlcjtcbiAgLyoqIEJvcmRlciBjb2xvciAqL1xuICBib3JkZXJDb2xvcj86IG51bWJlcjtcbiAgLyoqIEJvcmRlciB3aWR0aCBpbiBwaXhlbHMgKi9cbiAgYm9yZGVyV2lkdGg/OiBudW1iZXI7XG4gIC8qKiBCb3JkZXIgcmFkaXVzIGZvciByb3VuZGVkIGNvcm5lcnMgKi9cbiAgYm9yZGVyUmFkaXVzPzogbnVtYmVyO1xuICAvKiogRml4ZWQgd2lkdGggKi9cbiAgd2lkdGg/OiBudW1iZXI7XG4gIC8qKiBGaXhlZCBoZWlnaHQgKi9cbiAgaGVpZ2h0PzogbnVtYmVyO1xufVxuXG4vKipcbiAqIEEgc2ltcGxlIHJlY3Rhbmd1bGFyIGJveCBjb21wb25lbnQgd2l0aCBvcHRpb25hbCBiYWNrZ3JvdW5kIGFuZCBib3JkZXJcbiAqIEZvdW5kYXRpb24gZm9yIHBhbmVscywgYnV0dG9ucywgYW5kIG90aGVyIHZpc3VhbCBVSSBlbGVtZW50c1xuICpcbiAqIEBjYXRlZ29yeSBVSVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBib3ggPSBuZXcgVUlCb3goe1xuICogICBiYWNrZ3JvdW5kQ29sb3I6IDB4NGE5MGUyLFxuICogICB3aWR0aDogMjAwLFxuICogICBoZWlnaHQ6IDEwMCxcbiAqICAgYm9yZGVyUmFkaXVzOiA4XG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgVUlCb3ggZXh0ZW5kcyBVSUNvbXBvbmVudCB7XG4gIHByaXZhdGUgcHJvcHM6IFVJQm94UHJvcHM7XG4gIHByaXZhdGUgZ3JhcGhpY3M6IFBJWEkuR3JhcGhpY3M7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFVJQm94UHJvcHMgPSB7fSwgYm94TW9kZWw/OiBQYXJ0aWFsPEJveE1vZGVsPikge1xuICAgIHN1cGVyKGJveE1vZGVsKTtcbiAgICB0aGlzLnByb3BzID0ge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAweDAwMDAwMCxcbiAgICAgIGJhY2tncm91bmRBbHBoYTogMSxcbiAgICAgIGJvcmRlcldpZHRoOiAwLFxuICAgICAgYm9yZGVyUmFkaXVzOiAwLFxuICAgICAgLi4ucHJvcHNcbiAgICB9O1xuXG4gICAgLy8gQ3JlYXRlIGdyYXBoaWNzIG9iamVjdCBmb3IgcmVuZGVyaW5nXG4gICAgdGhpcy5ncmFwaGljcyA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5ncmFwaGljcyk7XG5cbiAgICAvLyBTZXQgYm94IG1vZGVsIGRpbWVuc2lvbnMgaWYgcHJvdmlkZWRcbiAgICBpZiAocHJvcHMud2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5ib3hNb2RlbC53aWR0aCA9IHByb3BzLndpZHRoO1xuICAgIH1cbiAgICBpZiAocHJvcHMuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuYm94TW9kZWwuaGVpZ2h0ID0gcHJvcHMuaGVpZ2h0O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZWFzdXJlcyB0aGUgc2l6ZSBuZWVkZWQgZm9yIHRoaXMgYm94XG4gICAqL1xuICBtZWFzdXJlKCk6IE1lYXN1cmVkU2l6ZSB7XG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMuYm94TW9kZWwucGFkZGluZztcbiAgICBjb25zdCBib3JkZXIgPSB0aGlzLmJveE1vZGVsLmJvcmRlcjtcblxuICAgIC8vIENhbGN1bGF0ZSBjb250ZW50IHNpemVcbiAgICBsZXQgY29udGVudFdpZHRoID0gMDtcbiAgICBsZXQgY29udGVudEhlaWdodCA9IDA7XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuYm94TW9kZWwud2lkdGggPT09ICdudW1iZXInKSB7XG4gICAgICBjb250ZW50V2lkdGggPSB0aGlzLmJveE1vZGVsLndpZHRoO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb250ZW50V2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5ib3hNb2RlbC5oZWlnaHQgPT09ICdudW1iZXInKSB7XG4gICAgICBjb250ZW50SGVpZ2h0ID0gdGhpcy5ib3hNb2RlbC5oZWlnaHQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb250ZW50SGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gQWRkIHBhZGRpbmcgYW5kIGJvcmRlclxuICAgIGNvbnN0IHRvdGFsV2lkdGggPSBjb250ZW50V2lkdGggKyBwYWRkaW5nLmhvcml6b250YWwgKyAoYm9yZGVyPy5ob3Jpem9udGFsID8/IDApO1xuICAgIGNvbnN0IHRvdGFsSGVpZ2h0ID0gY29udGVudEhlaWdodCArIHBhZGRpbmcudmVydGljYWwgKyAoYm9yZGVyPy52ZXJ0aWNhbCA/PyAwKTtcblxuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogTWF0aC5tYXgodG90YWxXaWR0aCwgdGhpcy5ib3hNb2RlbC5taW5XaWR0aCA/PyAwKSxcbiAgICAgIGhlaWdodDogTWF0aC5tYXgodG90YWxIZWlnaHQsIHRoaXMuYm94TW9kZWwubWluSGVpZ2h0ID8/IDApXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBsYXlvdXQgZm9yIHRoaXMgYm94XG4gICAqL1xuICBsYXlvdXQoYXZhaWxhYmxlV2lkdGg6IG51bWJlciwgYXZhaWxhYmxlSGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBtZWFzdXJlZCA9IHRoaXMubWVhc3VyZSgpO1xuICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLmJveE1vZGVsLnBhZGRpbmc7XG4gICAgY29uc3QgYm9yZGVyID0gdGhpcy5ib3hNb2RlbC5ib3JkZXIgPz8geyBob3Jpem9udGFsOiAwLCB2ZXJ0aWNhbDogMCwgdG9wOiAwLCByaWdodDogMCwgYm90dG9tOiAwLCBsZWZ0OiAwIH07XG5cbiAgICAvLyBDYWxjdWxhdGUgZmluYWwgZGltZW5zaW9uc1xuICAgIGxldCBmaW5hbFdpZHRoID0gbWVhc3VyZWQud2lkdGg7XG4gICAgbGV0IGZpbmFsSGVpZ2h0ID0gbWVhc3VyZWQuaGVpZ2h0O1xuXG4gICAgLy8gSGFuZGxlICdmaWxsJyBjb25zdHJhaW50XG4gICAgaWYgKHRoaXMuYm94TW9kZWwud2lkdGggPT09ICdmaWxsJykge1xuICAgICAgZmluYWxXaWR0aCA9IGF2YWlsYWJsZVdpZHRoO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib3hNb2RlbC5oZWlnaHQgPT09ICdmaWxsJykge1xuICAgICAgZmluYWxIZWlnaHQgPSBhdmFpbGFibGVIZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgbWF4IGNvbnN0cmFpbnRzXG4gICAgaWYgKHRoaXMuYm94TW9kZWwubWF4V2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgZmluYWxXaWR0aCA9IE1hdGgubWluKGZpbmFsV2lkdGgsIHRoaXMuYm94TW9kZWwubWF4V2lkdGgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib3hNb2RlbC5tYXhIZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZmluYWxIZWlnaHQgPSBNYXRoLm1pbihmaW5hbEhlaWdodCwgdGhpcy5ib3hNb2RlbC5tYXhIZWlnaHQpO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBjb21wdXRlZCBsYXlvdXRcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LndpZHRoID0gZmluYWxXaWR0aDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmhlaWdodCA9IGZpbmFsSGVpZ2h0O1xuXG4gICAgLy8gQ29udGVudCBhcmVhIChpbnNpZGUgcGFkZGluZyBhbmQgYm9yZGVyKVxuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQuY29udGVudFggPSBwYWRkaW5nLmxlZnQgKyBib3JkZXIubGVmdDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmNvbnRlbnRZID0gcGFkZGluZy50b3AgKyBib3JkZXIudG9wO1xuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQuY29udGVudFdpZHRoID0gZmluYWxXaWR0aCAtIHBhZGRpbmcuaG9yaXpvbnRhbCAtIGJvcmRlci5ob3Jpem9udGFsO1xuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQuY29udGVudEhlaWdodCA9IGZpbmFsSGVpZ2h0IC0gcGFkZGluZy52ZXJ0aWNhbCAtIGJvcmRlci52ZXJ0aWNhbDtcblxuICAgIHRoaXMubGF5b3V0RGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGJveCB2aXN1YWxzXG4gICAqL1xuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IHZvaWQge1xuICAgIHRoaXMuZ3JhcGhpY3MuY2xlYXIoKTtcblxuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5jb21wdXRlZExheW91dDtcbiAgICBjb25zdCB7IGJhY2tncm91bmRDb2xvciwgYmFja2dyb3VuZEFscGhhLCBib3JkZXJDb2xvciwgYm9yZGVyV2lkdGgsIGJvcmRlclJhZGl1cyB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIERyYXcgYm9yZGVyIGlmIHNwZWNpZmllZFxuICAgIGlmIChib3JkZXJXaWR0aCAmJiBib3JkZXJXaWR0aCA+IDAgJiYgYm9yZGVyQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5ncmFwaGljcy5yZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgdGhpcy5ncmFwaGljcy5zdHJva2UoeyBjb2xvcjogYm9yZGVyQ29sb3IsIHdpZHRoOiBib3JkZXJXaWR0aCB9KTtcbiAgICB9XG5cbiAgICAvLyBEcmF3IGJhY2tncm91bmRcbiAgICBpZiAoYmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChib3JkZXJSYWRpdXMgJiYgYm9yZGVyUmFkaXVzID4gMCkge1xuICAgICAgICB0aGlzLmdyYXBoaWNzLnJvdW5kUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0LCBib3JkZXJSYWRpdXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ncmFwaGljcy5yZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgdGhpcy5ncmFwaGljcy5maWxsKHsgY29sb3I6IGJhY2tncm91bmRDb2xvciwgYWxwaGE6IGJhY2tncm91bmRBbHBoYSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgYmFja2dyb3VuZCBjb2xvclxuICAgKi9cbiAgc2V0QmFja2dyb3VuZENvbG9yKGNvbG9yOiBudW1iZXIsIGFscGhhOiBudW1iZXIgPSAxKTogdm9pZCB7XG4gICAgdGhpcy5wcm9wcy5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLnByb3BzLmJhY2tncm91bmRBbHBoYSA9IGFscGhhO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgYm9yZGVyXG4gICAqL1xuICBzZXRCb3JkZXIoY29sb3I6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucHJvcHMuYm9yZGVyQ29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLnByb3BzLmJvcmRlcldpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBVSUNvbXBvbmVudCB9IGZyb20gJy4uL2NvcmUvdWktY29tcG9uZW50JztcbmltcG9ydCB7IEJveE1vZGVsLCBNZWFzdXJlZFNpemUgfSBmcm9tICcuLi9jb3JlL2JveC1tb2RlbCc7XG5pbXBvcnQgeyBVSUxhYmVsIH0gZnJvbSAnLi91aS1sYWJlbCc7XG5pbXBvcnQgeyBFZGdlSW5zZXRzIH0gZnJvbSAnLi4vY29yZS9lZGdlLWluc2V0cyc7XG5pbXBvcnQgeyBVSUZvY3VzTWFuYWdlciB9IGZyb20gJy4uL2NvcmUvdWktZm9jdXMtbWFuYWdlcic7XG5pbXBvcnQge1xuICBCdXR0b25CYWNrZ3JvdW5kU3RyYXRlZ3ksXG4gIFNvbGlkQ29sb3JCYWNrZ3JvdW5kU3RyYXRlZ3ksXG4gIFNwcml0ZUJhY2tncm91bmRTdHJhdGVneSxcbiAgU3ByaXRlQmFja2dyb3VuZENvbmZpZ1xufSBmcm9tICcuL2J1dHRvbi1iYWNrZ3JvdW5kLXN0cmF0ZWd5JztcblxuLyoqIEJ1dHRvbiB2aXN1YWwgc3RhdGVzLiAqL1xuZXhwb3J0IGVudW0gQnV0dG9uU3RhdGUge1xuICBOb3JtYWwgPSAnbm9ybWFsJyxcbiAgSG92ZXIgPSAnaG92ZXInLFxuICBQcmVzc2VkID0gJ3ByZXNzZWQnLFxuICBEaXNhYmxlZCA9ICdkaXNhYmxlZCdcbn1cblxuLy8gUmUtZXhwb3J0IFNwcml0ZUJhY2tncm91bmRDb25maWcgZm9yIGNvbnZlbmllbmNlXG5leHBvcnQgdHlwZSB7IFNwcml0ZUJhY2tncm91bmRDb25maWcgfSBmcm9tICcuL2J1dHRvbi1iYWNrZ3JvdW5kLXN0cmF0ZWd5JztcblxuLyoqIFVJQnV0dG9uIGNvbmZpZ3VyYXRpb24uICovXG5leHBvcnQgaW50ZXJmYWNlIFVJQnV0dG9uUHJvcHMge1xuICAvKiogQnV0dG9uIGxhYmVsIHRleHQgKi9cbiAgbGFiZWw/OiBzdHJpbmc7XG4gIC8qKiBCdXR0b24gd2lkdGggKi9cbiAgd2lkdGg/OiBudW1iZXI7XG4gIC8qKiBCdXR0b24gaGVpZ2h0ICovXG4gIGhlaWdodD86IG51bWJlcjtcbiAgLyoqIEJhY2tncm91bmQgY29sb3IgKG9ubHkgdXNlZCBpZiBzcHJpdGVCYWNrZ3JvdW5kIGlzIG5vdCBwcm92aWRlZCkgKi9cbiAgYmFja2dyb3VuZENvbG9yPzogbnVtYmVyO1xuICAvKiogU3ByaXRlLWJhc2VkIGJhY2tncm91bmQgY29uZmlndXJhdGlvbiAqL1xuICBzcHJpdGVCYWNrZ3JvdW5kPzogU3ByaXRlQmFja2dyb3VuZENvbmZpZztcbiAgLyoqIFRleHQgY29sb3IgKi9cbiAgdGV4dENvbG9yPzogbnVtYmVyO1xuICAvKiogRm9udCBzaXplICovXG4gIGZvbnRTaXplPzogbnVtYmVyO1xuICAvKiogQm9yZGVyIHJhZGl1cyAob25seSB1c2VkIHdpdGggYmFja2dyb3VuZENvbG9yKSAqL1xuICBib3JkZXJSYWRpdXM/OiBudW1iZXI7XG4gIC8qKiBQYWRkaW5nIGluc2lkZSBidXR0b24gKi9cbiAgcGFkZGluZz86IEVkZ2VJbnNldHM7XG4gIC8qKiBVc2UgQml0bWFwVGV4dCBpbnN0ZWFkIG9mIHJlZ3VsYXIgdGV4dCAqL1xuICB1c2VCaXRtYXBUZXh0PzogYm9vbGVhbjtcbiAgLyoqIEJpdG1hcFRleHQgZm9udCBmYW1pbHkgKHJlcXVpcmVkIGlmIHVzZUJpdG1hcFRleHQgaXMgdHJ1ZSkgKi9cbiAgYml0bWFwRm9udEZhbWlseT86IHN0cmluZztcbiAgLyoqIENsaWNrIGNhbGxiYWNrICovXG4gIG9uQ2xpY2s/OiAoKSA9PiB2b2lkO1xuICAvKiogSG92ZXIgY2FsbGJhY2sgKi9cbiAgb25Ib3Zlcj86ICgpID0+IHZvaWQ7XG4gIC8qKiBFbmFibGVkIHN0YXRlICovXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEludGVyYWN0aXZlIGJ1dHRvbiBjb21wb25lbnQgd2l0aCBob3ZlciwgcHJlc3MsIGFuZCBkaXNhYmxlZCBzdGF0ZXMuXG4gKiBTdXBwb3J0cyBzb2xpZCBjb2xvciBvciBzcHJpdGUtYmFzZWQgYmFja2dyb3VuZHMsIGJpdG1hcCB0ZXh0LCBhbmQga2V5Ym9hcmQgZm9jdXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiAvLyBCYXNpYyBidXR0b25cbiAqIGNvbnN0IGJ0biA9IG5ldyBVSUJ1dHRvbih7XG4gKiAgIGxhYmVsOiAnQ2xpY2sgTWUnLFxuICogICB3aWR0aDogMTUwLFxuICogICBoZWlnaHQ6IDQwLFxuICogICBiYWNrZ3JvdW5kQ29sb3I6IDB4NGE5MGUyLFxuICogICB0ZXh0Q29sb3I6IDB4ZmZmZmZmLFxuICogICBvbkNsaWNrOiAoKSA9PiBjb25zb2xlLmxvZygnY2xpY2tlZCcpXG4gKiB9KTtcbiAqXG4gKiAvLyBTcHJpdGUtYmFzZWQgYnV0dG9uXG4gKiBjb25zdCBzcHJpdGVCdG4gPSBuZXcgVUlCdXR0b24oe1xuICogICBsYWJlbDogJ1BsYXknLFxuICogICBzcHJpdGVCYWNrZ3JvdW5kOiB7XG4gKiAgICAgbm9ybWFsOiBub3JtYWxUZXh0dXJlLFxuICogICAgIGhvdmVyOiBob3ZlclRleHR1cmUsXG4gKiAgICAgcHJlc3NlZDogcHJlc3NlZFRleHR1cmVcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFVJQnV0dG9uIGV4dGVuZHMgVUlDb21wb25lbnQge1xuICBwcml2YXRlIHByb3BzOiBSZXF1aXJlZDxPbWl0PFVJQnV0dG9uUHJvcHMsICdvbkNsaWNrJyB8ICdvbkhvdmVyJyB8ICdzcHJpdGVCYWNrZ3JvdW5kJyB8ICd1c2VCaXRtYXBUZXh0JyB8ICdiaXRtYXBGb250RmFtaWx5Jz4+O1xuICBwcml2YXRlIHVzZUJpdG1hcFRleHQ6IGJvb2xlYW47XG4gIHByaXZhdGUgYml0bWFwRm9udEZhbWlseT86IHN0cmluZztcbiAgcHJpdmF0ZSBvbkNsaWNrPzogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBvbkhvdmVyPzogKCkgPT4gdm9pZDtcblxuICBwcml2YXRlIHN0YXRlOiBCdXR0b25TdGF0ZSA9IEJ1dHRvblN0YXRlLk5vcm1hbDtcbiAgcHJpdmF0ZSBiYWNrZ3JvdW5kU3RyYXRlZ3k6IEJ1dHRvbkJhY2tncm91bmRTdHJhdGVneTtcbiAgcHJpdmF0ZSBsYWJlbD86IFVJTGFiZWw7XG4gIHByaXZhdGUgYml0bWFwTGFiZWw/OiBQSVhJLkJpdG1hcFRleHQ7XG5cbiAgLy8gQ2FjaGVkIGxhYmVsIGNlbnRlciBwb3NpdGlvblxuICBwcml2YXRlIGxhYmVsQ2VudGVyWDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBsYWJlbENlbnRlclk6IG51bWJlciA9IDA7XG5cbiAgLy8gS2V5Ym9hcmQgaGFuZGxlciBmb3IgY2xlYW51cFxuICBwcml2YXRlIGtleWRvd25IYW5kbGVyPzogKGU6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFVJQnV0dG9uUHJvcHMgPSB7fSwgYm94TW9kZWw/OiBQYXJ0aWFsPEJveE1vZGVsPikge1xuICAgIHN1cGVyKGJveE1vZGVsKTtcblxuICAgIHRoaXMucHJvcHMgPSB7XG4gICAgICBsYWJlbDogcHJvcHMubGFiZWwgPz8gJycsXG4gICAgICB3aWR0aDogcHJvcHMud2lkdGggPz8gMTIwLFxuICAgICAgaGVpZ2h0OiBwcm9wcy5oZWlnaHQgPz8gNDAsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHByb3BzLmJhY2tncm91bmRDb2xvciA/PyAweDRhOTBlMixcbiAgICAgIHRleHRDb2xvcjogcHJvcHMudGV4dENvbG9yID8/IDB4ZmZmZmZmLFxuICAgICAgZm9udFNpemU6IHByb3BzLmZvbnRTaXplID8/IDE2LFxuICAgICAgYm9yZGVyUmFkaXVzOiBwcm9wcy5ib3JkZXJSYWRpdXMgPz8gNCxcbiAgICAgIHBhZGRpbmc6IHByb3BzLnBhZGRpbmcgPz8gRWRnZUluc2V0cy5zeW1tZXRyaWMoOCwgMTYpLFxuICAgICAgZW5hYmxlZDogcHJvcHMuZW5hYmxlZCA/PyB0cnVlXG4gICAgfTtcblxuICAgIHRoaXMudXNlQml0bWFwVGV4dCA9IHByb3BzLnVzZUJpdG1hcFRleHQgPz8gZmFsc2U7XG4gICAgdGhpcy5iaXRtYXBGb250RmFtaWx5ID0gcHJvcHMuYml0bWFwRm9udEZhbWlseTtcbiAgICB0aGlzLm9uQ2xpY2sgPSBwcm9wcy5vbkNsaWNrO1xuICAgIHRoaXMub25Ib3ZlciA9IHByb3BzLm9uSG92ZXI7XG5cbiAgICAvLyBTZXQgYm94IG1vZGVsIGRpbWVuc2lvbnNcbiAgICB0aGlzLmJveE1vZGVsLndpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcbiAgICB0aGlzLmJveE1vZGVsLmhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuXG4gICAgLy8gTWFrZSBidXR0b25zIGZvY3VzYWJsZSBieSBkZWZhdWx0XG4gICAgdGhpcy50YWJJbmRleCA9IDA7XG5cbiAgICAvLyBDcmVhdGUgYmFja2dyb3VuZCBzdHJhdGVneSBiYXNlZCBvbiBjb25maWd1cmF0aW9uXG4gICAgaWYgKHByb3BzLnNwcml0ZUJhY2tncm91bmQpIHtcbiAgICAgIHRoaXMuYmFja2dyb3VuZFN0cmF0ZWd5ID0gbmV3IFNwcml0ZUJhY2tncm91bmRTdHJhdGVneShcbiAgICAgICAgcHJvcHMuc3ByaXRlQmFja2dyb3VuZCxcbiAgICAgICAgdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgICAgdGhpcy5wcm9wcy5oZWlnaHRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFja2dyb3VuZFN0cmF0ZWd5ID0gbmV3IFNvbGlkQ29sb3JCYWNrZ3JvdW5kU3RyYXRlZ3koXG4gICAgICAgIHRoaXMucHJvcHMuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgICAgdGhpcy5wcm9wcy5ib3JkZXJSYWRpdXNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuZCBhZGQgYmFja2dyb3VuZFxuICAgIGNvbnN0IGJhY2tncm91bmRDb250YWluZXIgPSB0aGlzLmJhY2tncm91bmRTdHJhdGVneS5jcmVhdGUodGhpcy5wcm9wcy53aWR0aCwgdGhpcy5wcm9wcy5oZWlnaHQpO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKGJhY2tncm91bmRDb250YWluZXIpO1xuXG4gICAgLy8gQ3JlYXRlIGxhYmVsIGlmIHRleHQgcHJvdmlkZWRcbiAgICBpZiAodGhpcy5wcm9wcy5sYWJlbCkge1xuICAgICAgaWYgKHRoaXMudXNlQml0bWFwVGV4dCAmJiB0aGlzLmJpdG1hcEZvbnRGYW1pbHkpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVCaXRtYXBMYWJlbCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sYWJlbCA9IG5ldyBVSUxhYmVsKHtcbiAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLmxhYmVsLFxuICAgICAgICAgIGZvbnRTaXplOiB0aGlzLnByb3BzLmZvbnRTaXplLFxuICAgICAgICAgIGNvbG9yOiB0aGlzLnByb3BzLnRleHRDb2xvcixcbiAgICAgICAgICBhbGlnbjogJ2NlbnRlcidcbiAgICAgICAgfSwge1xuICAgICAgICAgIHBhZGRpbmc6IEVkZ2VJbnNldHMuemVybygpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmxhYmVsLmNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgaW50ZXJhY3Rpdml0eVxuICAgIHRoaXMuc2V0dXBJbnRlcmFjdGl2aXR5KCk7XG5cbiAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgaWYgKCF0aGlzLnByb3BzLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoQnV0dG9uU3RhdGUuRGlzYWJsZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBjcmVhdGVCaXRtYXBMYWJlbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuYml0bWFwRm9udEZhbWlseSkgcmV0dXJuO1xuXG4gICAgdGhpcy5iaXRtYXBMYWJlbCA9IG5ldyBQSVhJLkJpdG1hcFRleHQoe1xuICAgICAgdGV4dDogdGhpcy5wcm9wcy5sYWJlbCxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGZvbnRGYW1pbHk6IHRoaXMuYml0bWFwRm9udEZhbWlseSxcbiAgICAgICAgZm9udFNpemU6IHRoaXMucHJvcHMuZm9udFNpemUsXG4gICAgICAgIGZpbGw6IHRoaXMucHJvcHMudGV4dENvbG9yXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmJpdG1hcExhYmVsKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBzZXR1cEludGVyYWN0aXZpdHkoKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWluZXIuZXZlbnRNb2RlID0gJ3N0YXRpYyc7XG4gICAgdGhpcy5jb250YWluZXIuY3Vyc29yID0gJ3BvaW50ZXInO1xuXG4gICAgdGhpcy5jb250YWluZXIub24oJ3BvaW50ZXJvdmVyJywgdGhpcy5oYW5kbGVQb2ludGVyT3Zlci5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmNvbnRhaW5lci5vbigncG9pbnRlcm91dCcsIHRoaXMuaGFuZGxlUG9pbnRlck91dC5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmNvbnRhaW5lci5vbigncG9pbnRlcmRvd24nLCB0aGlzLmhhbmRsZVBvaW50ZXJEb3duLmJpbmQodGhpcykpO1xuICAgIHRoaXMuY29udGFpbmVyLm9uKCdwb2ludGVydXAnLCB0aGlzLmhhbmRsZVBvaW50ZXJVcC5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmNvbnRhaW5lci5vbigncG9pbnRlcnVwb3V0c2lkZScsIHRoaXMuaGFuZGxlUG9pbnRlclVwT3V0c2lkZS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIEhhbmRsZSBrZXlib2FyZCBpbnRlcmFjdGlvbiB3aGVuIGZvY3VzZWRcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQoKSAmJiB0aGlzLnByb3BzLmVuYWJsZWQpIHtcbiAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAvLyBTaG93IHByZXNzZWQgc3RhdGVcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoQnV0dG9uU3RhdGUuUHJlc3NlZCk7XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgY2xpY2tcbiAgICAgICAgICAgIHRoaXMub25DbGljaz8uKCk7XG5cbiAgICAgICAgICAgIC8vIFJldHVybiB0byBob3ZlciBzdGF0ZSBhZnRlciBhIHNob3J0IGRlbGF5IChzaW11bGF0aW5nIGJ1dHRvbiByZWxlYXNlKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKEJ1dHRvblN0YXRlLk5vcm1hbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25IYW5kbGVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVBvaW50ZXJPdmVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnByb3BzLmVuYWJsZWQgJiYgdGhpcy5zdGF0ZSA9PT0gQnV0dG9uU3RhdGUuTm9ybWFsKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKEJ1dHRvblN0YXRlLkhvdmVyKTtcbiAgICAgIHRoaXMub25Ib3Zlcj8uKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVQb2ludGVyT3V0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnByb3BzLmVuYWJsZWQgJiYgdGhpcy5zdGF0ZSAhPT0gQnV0dG9uU3RhdGUuUHJlc3NlZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZShCdXR0b25TdGF0ZS5Ob3JtYWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUG9pbnRlckRvd24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucHJvcHMuZW5hYmxlZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZShCdXR0b25TdGF0ZS5QcmVzc2VkKTtcblxuICAgICAgLy8gUmVxdWVzdCBmb2N1cyB0aHJvdWdoIHRoZSBmb2N1cyBtYW5hZ2VyXG4gICAgICBpZiAodGhpcy5jYW5Gb2N1cygpKSB7XG4gICAgICAgIGNvbnN0IGZvY3VzTWFuYWdlciA9IFVJRm9jdXNNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICAgIGlmIChmb2N1c01hbmFnZXIpIHtcbiAgICAgICAgICBmb2N1c01hbmFnZXIucmVxdWVzdEZvY3VzKHRoaXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZhbGxiYWNrIGlmIG5vIGZvY3VzIG1hbmFnZXJcbiAgICAgICAgICB0aGlzLm9uRm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUG9pbnRlclVwKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnByb3BzLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoQnV0dG9uU3RhdGUuSG92ZXIpO1xuICAgICAgdGhpcy5vbkNsaWNrPy4oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVBvaW50ZXJVcE91dHNpZGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucHJvcHMuZW5hYmxlZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZShCdXR0b25TdGF0ZS5Ob3JtYWwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBzZXRTdGF0ZShuZXdTdGF0ZTogQnV0dG9uU3RhdGUpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRlID0gbmV3U3RhdGU7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxzKCk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHByaXZhdGUgdXBkYXRlVmlzdWFscygpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgYmFja2dyb3VuZCB1c2luZyBzdHJhdGVneVxuICAgIHRoaXMuYmFja2dyb3VuZFN0cmF0ZWd5LnVwZGF0ZVN0YXRlKHRoaXMuc3RhdGUpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGRlcHRoIG9mZnNldCBmb3IgcHJlc3NlZCBzdGF0ZVxuICAgIGNvbnN0IHlPZmZzZXQgPSB0aGlzLnN0YXRlID09PSBCdXR0b25TdGF0ZS5QcmVzc2VkID8gMiA6IDA7XG5cbiAgICAvLyBVcGRhdGUgY3Vyc29yIGZvciBkaXNhYmxlZCBzdGF0ZVxuICAgIGlmICh0aGlzLnN0YXRlID09PSBCdXR0b25TdGF0ZS5EaXNhYmxlZCkge1xuICAgICAgdGhpcy5jb250YWluZXIuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgZGVwdGggb2Zmc2V0IHRvIGxhYmVsXG4gICAgaWYgKHRoaXMubGFiZWwpIHtcbiAgICAgIHRoaXMubGFiZWwuc2V0UG9zaXRpb24odGhpcy5sYWJlbENlbnRlclgsIHRoaXMubGFiZWxDZW50ZXJZICsgeU9mZnNldCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmJpdG1hcExhYmVsKSB7XG4gICAgICB0aGlzLmJpdG1hcExhYmVsLnggPSB0aGlzLmxhYmVsQ2VudGVyWDtcbiAgICAgIHRoaXMuYml0bWFwTGFiZWwueSA9IHRoaXMubGFiZWxDZW50ZXJZICsgeU9mZnNldDtcbiAgICB9XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIG1lYXN1cmUoKTogTWVhc3VyZWRTaXplIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHRoaXMucHJvcHMud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMucHJvcHMuaGVpZ2h0XG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbGF5b3V0KGF2YWlsYWJsZVdpZHRoOiBudW1iZXIsIGF2YWlsYWJsZUhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbWVhc3VyZWQgPSB0aGlzLm1lYXN1cmUoKTtcblxuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQud2lkdGggPSBtZWFzdXJlZC53aWR0aDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmhlaWdodCA9IG1lYXN1cmVkLmhlaWdodDtcblxuICAgIC8vIEdldCBhY3R1YWwgYmFja2dyb3VuZCBoZWlnaHQgZnJvbSBzdHJhdGVneVxuICAgIGNvbnN0IGFjdHVhbEhlaWdodCA9IHRoaXMuYmFja2dyb3VuZFN0cmF0ZWd5LmdldEFjdHVhbEhlaWdodCgpO1xuXG4gICAgLy8gTGF5b3V0IGFuZCBjZW50ZXIgbGFiZWxcbiAgICBpZiAodGhpcy5sYWJlbCkge1xuICAgICAgdGhpcy5sYWJlbC5sYXlvdXQobWVhc3VyZWQud2lkdGgsIG1lYXN1cmVkLmhlaWdodCk7XG5cbiAgICAgIC8vIENlbnRlciB0aGUgbGFiZWwgYW5kIGNhY2hlIHRoZSBwb3NpdGlvblxuICAgICAgY29uc3QgbGFiZWxMYXlvdXQgPSB0aGlzLmxhYmVsLmdldExheW91dCgpO1xuICAgICAgdGhpcy5sYWJlbENlbnRlclggPSAobWVhc3VyZWQud2lkdGggLSBsYWJlbExheW91dC53aWR0aCkgLyAyO1xuICAgICAgdGhpcy5sYWJlbENlbnRlclkgPSAoYWN0dWFsSGVpZ2h0IC0gbGFiZWxMYXlvdXQuaGVpZ2h0KSAvIDI7XG4gICAgICB0aGlzLmxhYmVsLnNldFBvc2l0aW9uKHRoaXMubGFiZWxDZW50ZXJYLCB0aGlzLmxhYmVsQ2VudGVyWSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmJpdG1hcExhYmVsKSB7XG4gICAgICAvLyBDZW50ZXIgdGhlIGJpdG1hcCB0ZXh0IHVzaW5nIGFjdHVhbCBiYWNrZ3JvdW5kIGhlaWdodFxuICAgICAgdGhpcy5sYWJlbENlbnRlclggPSAobWVhc3VyZWQud2lkdGggLSB0aGlzLmJpdG1hcExhYmVsLndpZHRoKSAvIDI7XG4gICAgICB0aGlzLmxhYmVsQ2VudGVyWSA9IChhY3R1YWxIZWlnaHQgLSB0aGlzLmJpdG1hcExhYmVsLmhlaWdodCkgLyAyO1xuICAgICAgdGhpcy5iaXRtYXBMYWJlbC54ID0gdGhpcy5sYWJlbENlbnRlclg7XG4gICAgICB0aGlzLmJpdG1hcExhYmVsLnkgPSB0aGlzLmxhYmVsQ2VudGVyWTtcbiAgICB9XG5cbiAgICB0aGlzLmxheW91dERpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiB2b2lkIHtcbiAgICAvLyBSZW5kZXJpbmcgaXMgaGFuZGxlZCBieSBiYWNrZ3JvdW5kIGFuZCBsYWJlbFxuICB9XG5cbiAgLyoqIFVwZGF0ZSBidXR0b24gdGV4dC4gKi9cbiAgc2V0TGFiZWwodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGFiZWwpIHtcbiAgICAgIHRoaXMubGFiZWwuc2V0VGV4dCh0ZXh0KTtcbiAgICAgIHRoaXMubWFya0xheW91dERpcnR5KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmJpdG1hcExhYmVsKSB7XG4gICAgICB0aGlzLmJpdG1hcExhYmVsLnRleHQgPSB0ZXh0O1xuICAgICAgdGhpcy5tYXJrTGF5b3V0RGlydHkoKTtcbiAgICB9XG4gIH1cblxuICAvKiogRW5hYmxlIG9yIGRpc2FibGUgdGhlIGJ1dHRvbi4gKi9cbiAgc2V0RW5hYmxlZChlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5wcm9wcy5lbmFibGVkID0gZW5hYmxlZDtcbiAgICB0aGlzLnNldFN0YXRlKGVuYWJsZWQgPyBCdXR0b25TdGF0ZS5Ob3JtYWwgOiBCdXR0b25TdGF0ZS5EaXNhYmxlZCk7XG4gIH1cblxuICAvKiogR2V0IGN1cnJlbnQgdmlzdWFsIHN0YXRlLiAqL1xuICBnZXRTdGF0ZSgpOiBCdXR0b25TdGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH1cblxuICAvKiogQ2xlYW4gdXAgZXZlbnQgbGlzdGVuZXJzLiAqL1xuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmtleWRvd25IYW5kbGVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xuICAgIH1cbiAgICBzdXBlci5kZXN0cm95KCk7XG4gIH1cblxufVxuIiwiaW1wb3J0IFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBVSUNvbXBvbmVudCB9IGZyb20gJy4uL2NvcmUvdWktY29tcG9uZW50JztcbmltcG9ydCB7IEJveE1vZGVsLCBNZWFzdXJlZFNpemUgfSBmcm9tICcuLi9jb3JlL2JveC1tb2RlbCc7XG5cbi8qKiBUZXh0IGFsaWdubWVudCBvcHRpb25zLiAqL1xuZXhwb3J0IHR5cGUgVGV4dEFsaWduID0gJ2xlZnQnIHwgJ2NlbnRlcicgfCAncmlnaHQnO1xuXG4vKiogVUlMYWJlbCBjb25maWd1cmF0aW9uLiAqL1xuZXhwb3J0IGludGVyZmFjZSBVSUxhYmVsUHJvcHMge1xuICAvKiogVGhlIHRleHQgdG8gZGlzcGxheSAqL1xuICB0ZXh0OiBzdHJpbmc7XG4gIC8qKiBGb250IHNpemUgaW4gcGl4ZWxzICovXG4gIGZvbnRTaXplPzogbnVtYmVyO1xuICAvKiogRm9udCBmYW1pbHkgbmFtZSAqL1xuICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAvKiogVGV4dCBjb2xvciAoaGV4IG51bWJlcikgKi9cbiAgY29sb3I/OiBudW1iZXI7XG4gIC8qKiBUZXh0IGFsaWdubWVudCAqL1xuICBhbGlnbj86IFRleHRBbGlnbjtcbiAgLyoqIEVuYWJsZSB3b3JkIHdyYXBwaW5nICovXG4gIHdvcmRXcmFwPzogYm9vbGVhbjtcbiAgLyoqIFdvcmQgd3JhcCB3aWR0aCAocmVxdWlyZWQgaWYgd29yZFdyYXAgaXMgdHJ1ZSkgKi9cbiAgd29yZFdyYXBXaWR0aD86IG51bWJlcjtcbiAgLyoqIEZvbnQgd2VpZ2h0ICovXG4gIGZvbnRXZWlnaHQ/OiBzdHJpbmc7XG4gIC8qKiBMaW5lIGhlaWdodCBtdWx0aXBsaWVyICovXG4gIGxpbmVIZWlnaHQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogVGV4dCBsYWJlbCBjb21wb25lbnQgd3JhcHBpbmcgUElYSS5UZXh0IHdpdGggbGF5b3V0IGludGVncmF0aW9uLlxuICogU3VwcG9ydHMgd29yZCB3cmFwcGluZywgY3VzdG9tIGZvbnRzLCBhbmQgYWxpZ25tZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgbGFiZWwgPSBuZXcgVUlMYWJlbCh7XG4gKiAgIHRleHQ6ICdIZWxsbyBXb3JsZCcsXG4gKiAgIGZvbnRTaXplOiAyNCxcbiAqICAgY29sb3I6IDB4ZmZmZmZmLFxuICogICBmb250RmFtaWx5OiAnQXJpYWwnLFxuICogICBhbGlnbjogJ2NlbnRlcidcbiAqIH0pO1xuICpcbiAqIC8vIFdpdGggd29yZCB3cmFwXG4gKiBjb25zdCBwYXJhZ3JhcGggPSBuZXcgVUlMYWJlbCh7XG4gKiAgIHRleHQ6ICdMb25nIHRleHQgdGhhdCBuZWVkcyB3cmFwcGluZy4uLicsXG4gKiAgIHdvcmRXcmFwOiB0cnVlLFxuICogICB3b3JkV3JhcFdpZHRoOiAyMDBcbiAqIH0pO1xuICpcbiAqIC8vIFVwZGF0ZSB0ZXh0IGR5bmFtaWNhbGx5XG4gKiBsYWJlbC5zZXRUZXh0KCdOZXcgdGV4dCcpO1xuICogbGFiZWwuc2V0Q29sb3IoMHhmZjAwMDApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBVSUxhYmVsIGV4dGVuZHMgVUlDb21wb25lbnQge1xuICBwcml2YXRlIHByb3BzOiBSZXF1aXJlZDxVSUxhYmVsUHJvcHM+O1xuICBwcml2YXRlIHRleHRPYmplY3Q6IFBJWEkuVGV4dDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVUlMYWJlbFByb3BzLCBib3hNb2RlbD86IFBhcnRpYWw8Qm94TW9kZWw+KSB7XG4gICAgc3VwZXIoYm94TW9kZWwpO1xuXG4gICAgdGhpcy5wcm9wcyA9IHtcbiAgICAgIHRleHQ6IHByb3BzLnRleHQsXG4gICAgICBmb250U2l6ZTogcHJvcHMuZm9udFNpemUgPz8gMTYsXG4gICAgICBmb250RmFtaWx5OiBwcm9wcy5mb250RmFtaWx5ID8/ICdBcmlhbCcsXG4gICAgICBjb2xvcjogcHJvcHMuY29sb3IgPz8gMHhmZmZmZmYsXG4gICAgICBhbGlnbjogcHJvcHMuYWxpZ24gPz8gJ2xlZnQnLFxuICAgICAgd29yZFdyYXA6IHByb3BzLndvcmRXcmFwID8/IGZhbHNlLFxuICAgICAgd29yZFdyYXBXaWR0aDogcHJvcHMud29yZFdyYXBXaWR0aCA/PyAwLFxuICAgICAgZm9udFdlaWdodDogcHJvcHMuZm9udFdlaWdodCA/PyAnbm9ybWFsJyxcbiAgICAgIGxpbmVIZWlnaHQ6IHByb3BzLmxpbmVIZWlnaHQgPz8gMS4yXG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBQSVhJLlRleHQgd2l0aCBpbml0aWFsIHN0eWxlXG4gICAgdGhpcy50ZXh0T2JqZWN0ID0gbmV3IFBJWEkuVGV4dCh7XG4gICAgICB0ZXh0OiB0aGlzLnByb3BzLnRleHQsXG4gICAgICBzdHlsZTogdGhpcy5nZXRUZXh0U3R5bGUoKSxcbiAgICAgIHJlc29sdXRpb246IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDIgLy8gTWF0Y2ggZGV2aWNlIHJlc29sdXRpb24gZm9yIGNyaXNwIHRleHRcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMudGV4dE9iamVjdCk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHByaXZhdGUgZ2V0VGV4dFN0eWxlKCk6IFBJWEkuVGV4dFN0eWxlIHtcbiAgICBjb25zdCBzdHlsZTogYW55ID0ge1xuICAgICAgZm9udEZhbWlseTogdGhpcy5wcm9wcy5mb250RmFtaWx5LFxuICAgICAgZm9udFNpemU6IHRoaXMucHJvcHMuZm9udFNpemUsXG4gICAgICBmaWxsOiB0aGlzLnByb3BzLmNvbG9yLFxuICAgICAgYWxpZ246IHRoaXMucHJvcHMuYWxpZ24sXG4gICAgICBmb250V2VpZ2h0OiB0aGlzLnByb3BzLmZvbnRXZWlnaHQsXG4gICAgICBsaW5lSGVpZ2h0OiB0aGlzLnByb3BzLmZvbnRTaXplICogdGhpcy5wcm9wcy5saW5lSGVpZ2h0XG4gICAgfTtcblxuICAgIGlmICh0aGlzLnByb3BzLndvcmRXcmFwKSB7XG4gICAgICBzdHlsZS53b3JkV3JhcCA9IHRydWU7XG4gICAgICBzdHlsZS53b3JkV3JhcFdpZHRoID0gdGhpcy5wcm9wcy53b3JkV3JhcFdpZHRoO1xuICAgIH1cblxuICAgIHJldHVybiBzdHlsZTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbWVhc3VyZSgpOiBNZWFzdXJlZFNpemUge1xuICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLmJveE1vZGVsLnBhZGRpbmc7XG4gICAgY29uc3QgbWV0cmljcyA9IHRoaXMudGV4dE9iamVjdDtcblxuICAgIC8vIEdldCB0ZXh0IGJvdW5kc1xuICAgIGNvbnN0IHRleHRXaWR0aCA9IG1ldHJpY3Mud2lkdGg7XG4gICAgY29uc3QgdGV4dEhlaWdodCA9IG1ldHJpY3MuaGVpZ2h0O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiB0ZXh0V2lkdGggKyBwYWRkaW5nLmhvcml6b250YWwsXG4gICAgICBoZWlnaHQ6IHRleHRIZWlnaHQgKyBwYWRkaW5nLnZlcnRpY2FsXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbGF5b3V0KGF2YWlsYWJsZVdpZHRoOiBudW1iZXIsIGF2YWlsYWJsZUhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMuYm94TW9kZWwucGFkZGluZztcblxuICAgIC8vIFVwZGF0ZSB3b3JkIHdyYXAgd2lkdGggaWYgbmVlZGVkXG4gICAgaWYgKHRoaXMucHJvcHMud29yZFdyYXAgJiYgdGhpcy5wcm9wcy53b3JkV3JhcFdpZHRoID09PSAwKSB7XG4gICAgICAvLyBVc2UgYXZhaWxhYmxlIHdpZHRoIG1pbnVzIHBhZGRpbmdcbiAgICAgIGNvbnN0IHdyYXBXaWR0aCA9IGF2YWlsYWJsZVdpZHRoIC0gcGFkZGluZy5ob3Jpem9udGFsO1xuICAgICAgdGhpcy5wcm9wcy53b3JkV3JhcFdpZHRoID0gd3JhcFdpZHRoO1xuICAgICAgdGhpcy50ZXh0T2JqZWN0LnN0eWxlID0gdGhpcy5nZXRUZXh0U3R5bGUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBtZWFzdXJlZCA9IHRoaXMubWVhc3VyZSgpO1xuXG4gICAgLy8gSGFuZGxlICdmaWxsJyBjb25zdHJhaW50c1xuICAgIGxldCBmaW5hbFdpZHRoID0gbWVhc3VyZWQud2lkdGg7XG4gICAgbGV0IGZpbmFsSGVpZ2h0ID0gbWVhc3VyZWQuaGVpZ2h0O1xuXG4gICAgaWYgKHRoaXMuYm94TW9kZWwud2lkdGggPT09ICdmaWxsJykge1xuICAgICAgZmluYWxXaWR0aCA9IGF2YWlsYWJsZVdpZHRoO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuYm94TW9kZWwud2lkdGggPT09ICdudW1iZXInKSB7XG4gICAgICBmaW5hbFdpZHRoID0gdGhpcy5ib3hNb2RlbC53aWR0aCArIHBhZGRpbmcuaG9yaXpvbnRhbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ib3hNb2RlbC5oZWlnaHQgPT09ICdmaWxsJykge1xuICAgICAgZmluYWxIZWlnaHQgPSBhdmFpbGFibGVIZWlnaHQ7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5ib3hNb2RlbC5oZWlnaHQgPT09ICdudW1iZXInKSB7XG4gICAgICBmaW5hbEhlaWdodCA9IHRoaXMuYm94TW9kZWwuaGVpZ2h0ICsgcGFkZGluZy52ZXJ0aWNhbDtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgY29tcHV0ZWQgbGF5b3V0XG4gICAgdGhpcy5jb21wdXRlZExheW91dC53aWR0aCA9IGZpbmFsV2lkdGg7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC5oZWlnaHQgPSBmaW5hbEhlaWdodDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmNvbnRlbnRYID0gcGFkZGluZy5sZWZ0O1xuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQuY29udGVudFkgPSBwYWRkaW5nLnRvcDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmNvbnRlbnRXaWR0aCA9IGZpbmFsV2lkdGggLSBwYWRkaW5nLmhvcml6b250YWw7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC5jb250ZW50SGVpZ2h0ID0gZmluYWxIZWlnaHQgLSBwYWRkaW5nLnZlcnRpY2FsO1xuXG4gICAgdGhpcy5sYXlvdXREaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHByb3RlY3RlZCByZW5kZXIoKTogdm9pZCB7XG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMuYm94TW9kZWwucGFkZGluZztcbiAgICB0aGlzLnRleHRPYmplY3QucG9zaXRpb24uc2V0KHBhZGRpbmcubGVmdCwgcGFkZGluZy50b3ApO1xuICB9XG5cbiAgLyoqIFVwZGF0ZSBkaXNwbGF5ZWQgdGV4dC4gKi9cbiAgc2V0VGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnByb3BzLnRleHQgPSB0ZXh0O1xuICAgIHRoaXMudGV4dE9iamVjdC50ZXh0ID0gdGV4dDtcbiAgICB0aGlzLm1hcmtMYXlvdXREaXJ0eSgpO1xuICB9XG5cbiAgLyoqIFVwZGF0ZSB0ZXh0IGNvbG9yLiAqL1xuICBzZXRDb2xvcihjb2xvcjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5wcm9wcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMudGV4dE9iamVjdC5zdHlsZS5maWxsID0gY29sb3I7XG4gIH1cblxuICAvKiogVXBkYXRlIGZvbnQgc2l6ZS4gKi9cbiAgc2V0Rm9udFNpemUoc2l6ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5wcm9wcy5mb250U2l6ZSA9IHNpemU7XG4gICAgdGhpcy50ZXh0T2JqZWN0LnN0eWxlLmZvbnRTaXplID0gc2l6ZTtcbiAgICB0aGlzLm1hcmtMYXlvdXREaXJ0eSgpO1xuICB9XG5cbiAgLyoqIEdldCBjdXJyZW50IHRleHQuICovXG4gIGdldFRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy50ZXh0O1xuICB9XG59XG4iLCJpbXBvcnQgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IFVJQ29tcG9uZW50IH0gZnJvbSAnLi4vY29yZS91aS1jb21wb25lbnQnO1xuaW1wb3J0IHsgQm94TW9kZWwsIE1lYXN1cmVkU2l6ZSB9IGZyb20gJy4uL2NvcmUvYm94LW1vZGVsJztcblxuLyoqIDktc2xpY2UgY29uZmlndXJhdGlvbiBmb3Igc2NhbGFibGUgc3ByaXRlcy4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTmluZVNsaWNlQ29uZmlnIHtcbiAgLyoqIFdpZHRoIG9mIGxlZnQgZWRnZSB0aGF0IGRvZXNuJ3Qgc2NhbGUgKi9cbiAgbGVmdFdpZHRoOiBudW1iZXI7XG4gIC8qKiBIZWlnaHQgb2YgdG9wIGVkZ2UgdGhhdCBkb2Vzbid0IHNjYWxlICovXG4gIHRvcEhlaWdodDogbnVtYmVyO1xuICAvKiogV2lkdGggb2YgcmlnaHQgZWRnZSB0aGF0IGRvZXNuJ3Qgc2NhbGUgKi9cbiAgcmlnaHRXaWR0aDogbnVtYmVyO1xuICAvKiogSGVpZ2h0IG9mIGJvdHRvbSBlZGdlIHRoYXQgZG9lc24ndCBzY2FsZSAqL1xuICBib3R0b21IZWlnaHQ6IG51bWJlcjtcbn1cblxuLyoqIFVJUGFuZWwgY29uZmlndXJhdGlvbi4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVUlQYW5lbFByb3BzIHtcbiAgLyoqIEJhY2tncm91bmQgdGV4dHVyZSAqL1xuICB0ZXh0dXJlPzogUElYSS5UZXh0dXJlO1xuICAvKiogQmFja2dyb3VuZCBjb2xvciAoaWYgbm8gdGV4dHVyZSkgKi9cbiAgYmFja2dyb3VuZENvbG9yPzogbnVtYmVyO1xuICAvKiogQmFja2dyb3VuZCBhbHBoYSAqL1xuICBiYWNrZ3JvdW5kQWxwaGE/OiBudW1iZXI7XG4gIC8qKiA5LXNsaWNlIGNvbmZpZ3VyYXRpb24gKGlmIHVzaW5nIHRleHR1cmUpICovXG4gIG5pbmVTbGljZT86IE5pbmVTbGljZUNvbmZpZztcbiAgLyoqIEZpeGVkIHdpZHRoICovXG4gIHdpZHRoPzogbnVtYmVyO1xuICAvKiogRml4ZWQgaGVpZ2h0ICovXG4gIGhlaWdodD86IG51bWJlcjtcbiAgLyoqIEJvcmRlciByYWRpdXMgKGlmIHVzaW5nIHNvbGlkIGNvbG9yKSAqL1xuICBib3JkZXJSYWRpdXM/OiBudW1iZXI7XG59XG5cbi8qKlxuICogUGFuZWwgY29tcG9uZW50IHdpdGggOS1zbGljZSBzcHJpdGUgb3Igc29saWQgY29sb3IgYmFja2dyb3VuZC5cbiAqIFVzZSBmb3IgY29udGFpbmVycywgd2luZG93cywgY2FyZHMsIGFuZCBvdGhlciBVSSBiYWNrZ3JvdW5kcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIC8vIDktc2xpY2Ugc3ByaXRlIGJhY2tncm91bmQgKHNjYWxlcyB3aXRob3V0IGRpc3RvcnRpbmcgY29ybmVycylcbiAqIGNvbnN0IHBhbmVsID0gbmV3IFVJUGFuZWwoe1xuICogICB0ZXh0dXJlOiBwYW5lbFRleHR1cmUsXG4gKiAgIG5pbmVTbGljZTogeyBsZWZ0V2lkdGg6IDE2LCB0b3BIZWlnaHQ6IDE2LCByaWdodFdpZHRoOiAxNiwgYm90dG9tSGVpZ2h0OiAxNiB9LFxuICogICB3aWR0aDogMzAwLFxuICogICBoZWlnaHQ6IDIwMFxuICogfSk7XG4gKlxuICogLy8gU29saWQgY29sb3IgYmFja2dyb3VuZFxuICogY29uc3QgY29sb3JQYW5lbCA9IG5ldyBVSVBhbmVsKHtcbiAqICAgYmFja2dyb3VuZENvbG9yOiAweDJjM2U1MCxcbiAqICAgYmFja2dyb3VuZEFscGhhOiAwLjksXG4gKiAgIHdpZHRoOiAzMDAsXG4gKiAgIGhlaWdodDogMjAwLFxuICogICBib3JkZXJSYWRpdXM6IDhcbiAqIH0pO1xuICpcbiAqIC8vIFVwZGF0ZSBhdCBydW50aW1lXG4gKiBwYW5lbC5zZXRCYWNrZ3JvdW5kQ29sb3IoMHhmZjAwMDApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBVSVBhbmVsIGV4dGVuZHMgVUlDb21wb25lbnQge1xuICBwcml2YXRlIHByb3BzOiBVSVBhbmVsUHJvcHM7XG4gIHByaXZhdGUgYmFja2dyb3VuZD86IFBJWEkuTmluZVNsaWNlU3ByaXRlIHwgUElYSS5HcmFwaGljcztcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVUlQYW5lbFByb3BzID0ge30sIGJveE1vZGVsPzogUGFydGlhbDxCb3hNb2RlbD4pIHtcbiAgICBzdXBlcihib3hNb2RlbCk7XG5cbiAgICB0aGlzLnByb3BzID0ge1xuICAgICAgYmFja2dyb3VuZEFscGhhOiBwcm9wcy5iYWNrZ3JvdW5kQWxwaGEgPz8gMSxcbiAgICAgIC4uLnByb3BzXG4gICAgfTtcblxuICAgIC8vIFNldCBib3ggbW9kZWwgZGltZW5zaW9ucyBpZiBwcm92aWRlZFxuICAgIGlmIChwcm9wcy53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmJveE1vZGVsLndpZHRoID0gcHJvcHMud2lkdGg7XG4gICAgfVxuICAgIGlmIChwcm9wcy5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5ib3hNb2RlbC5oZWlnaHQgPSBwcm9wcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGJhY2tncm91bmRcbiAgICB0aGlzLmNyZWF0ZUJhY2tncm91bmQoKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJpdmF0ZSBjcmVhdGVCYWNrZ3JvdW5kKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnByb3BzLnRleHR1cmUgJiYgdGhpcy5wcm9wcy5uaW5lU2xpY2UpIHtcbiAgICAgIC8vIFVzZSA5LXNsaWNlIHNwcml0ZVxuICAgICAgY29uc3QgeyBsZWZ0V2lkdGgsIHRvcEhlaWdodCwgcmlnaHRXaWR0aCwgYm90dG9tSGVpZ2h0IH0gPSB0aGlzLnByb3BzLm5pbmVTbGljZTtcbiAgICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBQSVhJLk5pbmVTbGljZVNwcml0ZSh7XG4gICAgICAgIHRleHR1cmU6IHRoaXMucHJvcHMudGV4dHVyZSxcbiAgICAgICAgbGVmdFdpZHRoLFxuICAgICAgICB0b3BIZWlnaHQsXG4gICAgICAgIHJpZ2h0V2lkdGgsXG4gICAgICAgIGJvdHRvbUhlaWdodFxuICAgICAgfSk7XG4gICAgICB0aGlzLmJhY2tncm91bmQuYWxwaGEgPSB0aGlzLnByb3BzLmJhY2tncm91bmRBbHBoYSA/PyAxO1xuICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5iYWNrZ3JvdW5kKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuYmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFVzZSBncmFwaGljcyBmb3Igc29saWQgY29sb3JcbiAgICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XG4gICAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmJhY2tncm91bmQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbWVhc3VyZSgpOiBNZWFzdXJlZFNpemUge1xuICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLmJveE1vZGVsLnBhZGRpbmc7XG5cbiAgICBsZXQgY29udGVudFdpZHRoID0gMDtcbiAgICBsZXQgY29udGVudEhlaWdodCA9IDA7XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuYm94TW9kZWwud2lkdGggPT09ICdudW1iZXInKSB7XG4gICAgICBjb250ZW50V2lkdGggPSB0aGlzLmJveE1vZGVsLndpZHRoO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb250ZW50V2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5ib3hNb2RlbC5oZWlnaHQgPT09ICdudW1iZXInKSB7XG4gICAgICBjb250ZW50SGVpZ2h0ID0gdGhpcy5ib3hNb2RlbC5oZWlnaHQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb250ZW50SGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiBjb250ZW50V2lkdGggKyBwYWRkaW5nLmhvcml6b250YWwsXG4gICAgICBoZWlnaHQ6IGNvbnRlbnRIZWlnaHQgKyBwYWRkaW5nLnZlcnRpY2FsXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbGF5b3V0KGF2YWlsYWJsZVdpZHRoOiBudW1iZXIsIGF2YWlsYWJsZUhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbWVhc3VyZWQgPSB0aGlzLm1lYXN1cmUoKTtcbiAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5ib3hNb2RlbC5wYWRkaW5nO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGZpbmFsIGRpbWVuc2lvbnNcbiAgICBsZXQgZmluYWxXaWR0aCA9IG1lYXN1cmVkLndpZHRoO1xuICAgIGxldCBmaW5hbEhlaWdodCA9IG1lYXN1cmVkLmhlaWdodDtcblxuICAgIGlmICh0aGlzLmJveE1vZGVsLndpZHRoID09PSAnZmlsbCcpIHtcbiAgICAgIGZpbmFsV2lkdGggPSBhdmFpbGFibGVXaWR0aDtcbiAgICB9XG4gICAgaWYgKHRoaXMuYm94TW9kZWwuaGVpZ2h0ID09PSAnZmlsbCcpIHtcbiAgICAgIGZpbmFsSGVpZ2h0ID0gYXZhaWxhYmxlSGVpZ2h0O1xuICAgIH1cblxuICAgIC8vIEFwcGx5IG1heCBjb25zdHJhaW50c1xuICAgIGlmICh0aGlzLmJveE1vZGVsLm1heFdpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpbmFsV2lkdGggPSBNYXRoLm1pbihmaW5hbFdpZHRoLCB0aGlzLmJveE1vZGVsLm1heFdpZHRoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuYm94TW9kZWwubWF4SGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpbmFsSGVpZ2h0ID0gTWF0aC5taW4oZmluYWxIZWlnaHQsIHRoaXMuYm94TW9kZWwubWF4SGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgY29tcHV0ZWQgbGF5b3V0XG4gICAgdGhpcy5jb21wdXRlZExheW91dC53aWR0aCA9IGZpbmFsV2lkdGg7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC5oZWlnaHQgPSBmaW5hbEhlaWdodDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmNvbnRlbnRYID0gcGFkZGluZy5sZWZ0O1xuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQuY29udGVudFkgPSBwYWRkaW5nLnRvcDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmNvbnRlbnRXaWR0aCA9IGZpbmFsV2lkdGggLSBwYWRkaW5nLmhvcml6b250YWw7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC5jb250ZW50SGVpZ2h0ID0gZmluYWxIZWlnaHQgLSBwYWRkaW5nLnZlcnRpY2FsO1xuXG4gICAgdGhpcy5sYXlvdXREaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHByb3RlY3RlZCByZW5kZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJhY2tncm91bmQpIHJldHVybjtcblxuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5jb21wdXRlZExheW91dDtcblxuICAgIGlmICh0aGlzLmJhY2tncm91bmQgaW5zdGFuY2VvZiBQSVhJLk5pbmVTbGljZVNwcml0ZSkge1xuICAgICAgLy8gVXBkYXRlIDktc2xpY2Ugc3ByaXRlIHNpemVcbiAgICAgIHRoaXMuYmFja2dyb3VuZC53aWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5iYWNrZ3JvdW5kLmhlaWdodCA9IGhlaWdodDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYmFja2dyb3VuZCBpbnN0YW5jZW9mIFBJWEkuR3JhcGhpY3MpIHtcbiAgICAgIC8vIFJlZHJhdyBncmFwaGljc1xuICAgICAgdGhpcy5iYWNrZ3JvdW5kLmNsZWFyKCk7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmJvcmRlclJhZGl1cyAmJiB0aGlzLnByb3BzLmJvcmRlclJhZGl1cyA+IDApIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLnJvdW5kUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0LCB0aGlzLnByb3BzLmJvcmRlclJhZGl1cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJhY2tncm91bmQucmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMuYmFja2dyb3VuZENvbG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLmZpbGwoe1xuICAgICAgICAgIGNvbG9yOiB0aGlzLnByb3BzLmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICBhbHBoYTogdGhpcy5wcm9wcy5iYWNrZ3JvdW5kQWxwaGFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIFVwZGF0ZSBiYWNrZ3JvdW5kIGNvbG9yIChzb2xpZCBjb2xvciBwYW5lbHMgb25seSkuICovXG4gIHNldEJhY2tncm91bmRDb2xvcihjb2xvcjogbnVtYmVyLCBhbHBoYTogbnVtYmVyID0gMSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmJhY2tncm91bmQgaW5zdGFuY2VvZiBQSVhJLkdyYXBoaWNzKSB7XG4gICAgICB0aGlzLnByb3BzLmJhY2tncm91bmRDb2xvciA9IGNvbG9yO1xuICAgICAgdGhpcy5wcm9wcy5iYWNrZ3JvdW5kQWxwaGEgPSBhbHBoYTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIFVwZGF0ZSB0ZXh0dXJlICh0ZXh0dXJlLWJhc2VkIHBhbmVscyBvbmx5KS4gKi9cbiAgc2V0VGV4dHVyZSh0ZXh0dXJlOiBQSVhJLlRleHR1cmUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5iYWNrZ3JvdW5kIGluc3RhbmNlb2YgUElYSS5OaW5lU2xpY2VTcHJpdGUpIHtcbiAgICAgIHRoaXMuYmFja2dyb3VuZC50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBQSVhJIGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0IHsgVUlDb21wb25lbnQgfSBmcm9tICcuLi9jb3JlL3VpLWNvbXBvbmVudCc7XG5pbXBvcnQgeyBCb3hNb2RlbCwgTWVhc3VyZWRTaXplIH0gZnJvbSAnLi4vY29yZS9ib3gtbW9kZWwnO1xuaW1wb3J0IHsgRWRnZUluc2V0cyB9IGZyb20gJy4uL2NvcmUvZWRnZS1pbnNldHMnO1xuXG4vKipcbiAqIFByb3BzIGZvciBjb25maWd1cmluZyBhIFVJU2Nyb2xsQ29udGFpbmVyXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVUlTY3JvbGxDb250YWluZXJQcm9wcyB7XG4gIC8qKiBXaWR0aCBvZiB0aGUgc2Nyb2xsIGNvbnRhaW5lciAqL1xuICB3aWR0aDogbnVtYmVyO1xuICAvKiogSGVpZ2h0IG9mIHRoZSBzY3JvbGwgY29udGFpbmVyICh2aWV3cG9ydCBoZWlnaHQpICovXG4gIGhlaWdodDogbnVtYmVyO1xuICAvKiogQmFja2dyb3VuZCBjb2xvciBvZiB0aGUgY29udGFpbmVyICovXG4gIGJhY2tncm91bmRDb2xvcj86IG51bWJlcjtcbiAgLyoqIEJvcmRlciByYWRpdXMgKi9cbiAgYm9yZGVyUmFkaXVzPzogbnVtYmVyO1xuICAvKiogU2Nyb2xsYmFyIHdpZHRoICovXG4gIHNjcm9sbGJhcldpZHRoPzogbnVtYmVyO1xuICAvKiogU2Nyb2xsYmFyIHRyYWNrIGNvbG9yICovXG4gIHNjcm9sbGJhclRyYWNrQ29sb3I/OiBudW1iZXI7XG4gIC8qKiBTY3JvbGxiYXIgdGh1bWIgY29sb3IgKi9cbiAgc2Nyb2xsYmFyVGh1bWJDb2xvcj86IG51bWJlcjtcbiAgLyoqIFNjcm9sbGJhciB0aHVtYiBob3ZlciBjb2xvciAqL1xuICBzY3JvbGxiYXJUaHVtYkhvdmVyQ29sb3I/OiBudW1iZXI7XG4gIC8qKiBXaGV0aGVyIHRvIHNob3cgc2Nyb2xsYmFyIG9ubHkgb24gaG92ZXIgKi9cbiAgc2Nyb2xsYmFyQXV0b0hpZGU/OiBib29sZWFuO1xuICAvKiogUGFkZGluZyBpbnNpZGUgdGhlIHNjcm9sbCBjb250YWluZXIgKi9cbiAgcGFkZGluZz86IEVkZ2VJbnNldHM7XG59XG5cbi8qKlxuICogQSBzY3JvbGxhYmxlIGNvbnRhaW5lciB3aXRoIGEgdmlzdWFsIHNjcm9sbGJhclxuICogU3VwcG9ydHMgbW91c2Ugd2hlZWwgc2Nyb2xsaW5nIGFuZCBkcmFnZ2FibGUgc2Nyb2xsYmFyIHRodW1iXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IG5ldyBVSVNjcm9sbENvbnRhaW5lcih7XG4gKiAgIHdpZHRoOiA0MDAsXG4gKiAgIGhlaWdodDogMzAwLFxuICogICBiYWNrZ3JvdW5kQ29sb3I6IDB4ZmZmZmZmXG4gKiB9KTtcbiAqXG4gKiAvLyBBZGQgY2hpbGRyZW4gdGhhdCBleGNlZWQgdGhlIHZpZXdwb3J0IGhlaWdodFxuICogc2Nyb2xsQ29udGFpbmVyLmFkZENoaWxkKHNvbWVVSUNvbXBvbmVudCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFVJU2Nyb2xsQ29udGFpbmVyIGV4dGVuZHMgVUlDb21wb25lbnQge1xuICBwcml2YXRlIHByb3BzOiBSZXF1aXJlZDxVSVNjcm9sbENvbnRhaW5lclByb3BzPjtcbiAgcHJpdmF0ZSBiYWNrZ3JvdW5kOiBQSVhJLkdyYXBoaWNzO1xuICBwcml2YXRlIGNvbnRlbnRDb250YWluZXI6IFBJWEkuQ29udGFpbmVyO1xuICBwcml2YXRlIGNvbnRlbnRNYXNrOiBQSVhJLkdyYXBoaWNzO1xuICBwcml2YXRlIHNjcm9sbGJhclRyYWNrOiBQSVhJLkdyYXBoaWNzO1xuICBwcml2YXRlIHNjcm9sbGJhclRodW1iOiBQSVhJLkdyYXBoaWNzO1xuXG4gIC8vIFB1YmxpYyBjaGlsZHJlbiBhcnJheSBmb3IgZm9jdXMgbWFuYWdlciBkaXNjb3ZlcnlcbiAgcHVibGljIGNoaWxkcmVuOiBVSUNvbXBvbmVudFtdID0gW107XG5cbiAgcHJpdmF0ZSBzY3JvbGxZOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIG1heFNjcm9sbFk6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgY29udGVudEhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBpc0RyYWdnaW5nOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgZHJhZ1N0YXJ0WTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBkcmFnU3RhcnRTY3JvbGxZOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGlzSG92ZXJpbmdUaHVtYjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8vIEJvdW5kIGhhbmRsZXJzIGZvciBwcm9wZXIgY2xlYW51cFxuICBwcml2YXRlIGJvdW5kR2xvYmFsUG9pbnRlck1vdmU6ICgoZTogUG9pbnRlckV2ZW50KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGJvdW5kR2xvYmFsUG9pbnRlclVwOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVUlTY3JvbGxDb250YWluZXJQcm9wcywgYm94TW9kZWw/OiBQYXJ0aWFsPEJveE1vZGVsPikge1xuICAgIHN1cGVyKGJveE1vZGVsKTtcblxuICAgIHRoaXMucHJvcHMgPSB7XG4gICAgICB3aWR0aDogcHJvcHMud2lkdGgsXG4gICAgICBoZWlnaHQ6IHByb3BzLmhlaWdodCxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogcHJvcHMuYmFja2dyb3VuZENvbG9yID8/IDB4ZmZmZmZmLFxuICAgICAgYm9yZGVyUmFkaXVzOiBwcm9wcy5ib3JkZXJSYWRpdXMgPz8gMCxcbiAgICAgIHNjcm9sbGJhcldpZHRoOiBwcm9wcy5zY3JvbGxiYXJXaWR0aCA/PyAxMixcbiAgICAgIHNjcm9sbGJhclRyYWNrQ29sb3I6IHByb3BzLnNjcm9sbGJhclRyYWNrQ29sb3IgPz8gMHhlMGUwZTAsXG4gICAgICBzY3JvbGxiYXJUaHVtYkNvbG9yOiBwcm9wcy5zY3JvbGxiYXJUaHVtYkNvbG9yID8/IDB4ODg4ODg4LFxuICAgICAgc2Nyb2xsYmFyVGh1bWJIb3ZlckNvbG9yOiBwcm9wcy5zY3JvbGxiYXJUaHVtYkhvdmVyQ29sb3IgPz8gMHg1NTU1NTUsXG4gICAgICBzY3JvbGxiYXJBdXRvSGlkZTogcHJvcHMuc2Nyb2xsYmFyQXV0b0hpZGUgPz8gZmFsc2UsXG4gICAgICBwYWRkaW5nOiBwcm9wcy5wYWRkaW5nID8/IEVkZ2VJbnNldHMuYWxsKDApXG4gICAgfTtcblxuICAgIC8vIFNldCBib3ggbW9kZWwgZGltZW5zaW9uc1xuICAgIHRoaXMuYm94TW9kZWwud2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuICAgIHRoaXMuYm94TW9kZWwuaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQ7XG5cbiAgICAvLyBDcmVhdGUgYmFja2dyb3VuZFxuICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XG4gICAgdGhpcy51cGRhdGVCYWNrZ3JvdW5kKCk7XG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5iYWNrZ3JvdW5kKTtcblxuICAgIC8vIENyZWF0ZSBjb250ZW50IGNvbnRhaW5lclxuICAgIHRoaXMuY29udGVudENvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xuICAgIHRoaXMuY29udGVudENvbnRhaW5lci54ID0gdGhpcy5wcm9wcy5wYWRkaW5nLmxlZnQ7XG4gICAgdGhpcy5jb250ZW50Q29udGFpbmVyLnkgPSB0aGlzLnByb3BzLnBhZGRpbmcudG9wO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuY29udGVudENvbnRhaW5lcik7XG5cbiAgICAvLyBDcmVhdGUgbWFzayBmb3IgY29udGVudFxuICAgIHRoaXMuY29udGVudE1hc2sgPSBuZXcgUElYSS5HcmFwaGljcygpO1xuICAgIHRoaXMudXBkYXRlTWFzaygpO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuY29udGVudE1hc2spO1xuICAgIHRoaXMuY29udGVudENvbnRhaW5lci5tYXNrID0gdGhpcy5jb250ZW50TWFzaztcblxuICAgIC8vIENyZWF0ZSBzY3JvbGxiYXIgdHJhY2tcbiAgICB0aGlzLnNjcm9sbGJhclRyYWNrID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcbiAgICB0aGlzLnNjcm9sbGJhclRyYWNrLmV2ZW50TW9kZSA9ICdzdGF0aWMnO1xuICAgIHRoaXMuc2Nyb2xsYmFyVHJhY2suY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuc2Nyb2xsYmFyVHJhY2spO1xuXG4gICAgLy8gQ3JlYXRlIHNjcm9sbGJhciB0aHVtYlxuICAgIHRoaXMuc2Nyb2xsYmFyVGh1bWIgPSBuZXcgUElYSS5HcmFwaGljcygpO1xuICAgIHRoaXMuc2Nyb2xsYmFyVGh1bWIuZXZlbnRNb2RlID0gJ3N0YXRpYyc7XG4gICAgdGhpcy5zY3JvbGxiYXJUaHVtYi5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5zY3JvbGxiYXJUaHVtYik7XG5cbiAgICAvLyBTZXR1cCBpbnRlcmFjdGl2aXR5XG4gICAgdGhpcy5zZXR1cEludGVyYWN0aXZpdHkoKTtcblxuICAgIC8vIEluaXRpYWwgc2Nyb2xsYmFyIHVwZGF0ZVxuICAgIHRoaXMudXBkYXRlU2Nyb2xsYmFyKCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgYmFja2dyb3VuZCBncmFwaGljc1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVCYWNrZ3JvdW5kKCk6IHZvaWQge1xuICAgIHRoaXMuYmFja2dyb3VuZC5jbGVhcigpO1xuICAgIHRoaXMuYmFja2dyb3VuZC5yb3VuZFJlY3QoXG4gICAgICAwLFxuICAgICAgMCxcbiAgICAgIHRoaXMucHJvcHMud2lkdGgsXG4gICAgICB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgIHRoaXMucHJvcHMuYm9yZGVyUmFkaXVzXG4gICAgKTtcbiAgICB0aGlzLmJhY2tncm91bmQuZmlsbCh7IGNvbG9yOiB0aGlzLnByb3BzLmJhY2tncm91bmRDb2xvciB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjb250ZW50IG1hc2tcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlTWFzaygpOiB2b2lkIHtcbiAgICBjb25zdCBjb250ZW50V2lkdGggPSB0aGlzLnByb3BzLndpZHRoIC0gdGhpcy5wcm9wcy5wYWRkaW5nLmxlZnQgLSB0aGlzLnByb3BzLnBhZGRpbmcucmlnaHQgLSB0aGlzLnByb3BzLnNjcm9sbGJhcldpZHRoO1xuICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSB0aGlzLnByb3BzLmhlaWdodCAtIHRoaXMucHJvcHMucGFkZGluZy50b3AgLSB0aGlzLnByb3BzLnBhZGRpbmcuYm90dG9tO1xuXG4gICAgdGhpcy5jb250ZW50TWFzay5jbGVhcigpO1xuICAgIHRoaXMuY29udGVudE1hc2sucmVjdChcbiAgICAgIHRoaXMucHJvcHMucGFkZGluZy5sZWZ0LFxuICAgICAgdGhpcy5wcm9wcy5wYWRkaW5nLnRvcCxcbiAgICAgIGNvbnRlbnRXaWR0aCxcbiAgICAgIGNvbnRlbnRIZWlnaHRcbiAgICApO1xuICAgIHRoaXMuY29udGVudE1hc2suZmlsbCh7IGNvbG9yOiAweGZmZmZmZiB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIG1vdXNlL3doZWVsIGV2ZW50IGhhbmRsZXJzXG4gICAqL1xuICBwcml2YXRlIHNldHVwSW50ZXJhY3Rpdml0eSgpOiB2b2lkIHtcbiAgICAvLyBNb3VzZSB3aGVlbCBzY3JvbGxpbmdcbiAgICB0aGlzLmNvbnRhaW5lci5ldmVudE1vZGUgPSAnc3RhdGljJztcbiAgICB0aGlzLmNvbnRhaW5lci5vbignd2hlZWwnLCB0aGlzLmhhbmRsZVdoZWVsLmJpbmQodGhpcykpO1xuXG4gICAgLy8gU2Nyb2xsYmFyIHRodW1iIGRyYWdnaW5nXG4gICAgdGhpcy5zY3JvbGxiYXJUaHVtYi5vbigncG9pbnRlcmRvd24nLCB0aGlzLmhhbmRsZVRodW1iUG9pbnRlckRvd24uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zY3JvbGxiYXJUaHVtYi5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7XG4gICAgICB0aGlzLmlzSG92ZXJpbmdUaHVtYiA9IHRydWU7XG4gICAgICB0aGlzLnVwZGF0ZVNjcm9sbGJhcigpO1xuICAgIH0pO1xuICAgIHRoaXMuc2Nyb2xsYmFyVGh1bWIub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykge1xuICAgICAgICB0aGlzLmlzSG92ZXJpbmdUaHVtYiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbGJhcigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVHJhY2sgY2xpY2sgZm9yIGp1bXBpbmdcbiAgICB0aGlzLnNjcm9sbGJhclRyYWNrLm9uKCdwb2ludGVyZG93bicsIHRoaXMuaGFuZGxlVHJhY2tQb2ludGVyRG93bi5iaW5kKHRoaXMpKTtcblxuICAgIC8vIEdsb2JhbCBwb2ludGVyIGV2ZW50cyBmb3IgZHJhZ2dpbmcgLSBzdG9yZSBib3VuZCByZWZlcmVuY2VzIGZvciBjbGVhbnVwXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmJvdW5kR2xvYmFsUG9pbnRlck1vdmUgPSB0aGlzLmhhbmRsZUdsb2JhbFBvaW50ZXJNb3ZlLmJpbmQodGhpcyk7XG4gICAgICB0aGlzLmJvdW5kR2xvYmFsUG9pbnRlclVwID0gdGhpcy5oYW5kbGVHbG9iYWxQb2ludGVyVXAuYmluZCh0aGlzKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIHRoaXMuYm91bmRHbG9iYWxQb2ludGVyTW92ZSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgdGhpcy5ib3VuZEdsb2JhbFBvaW50ZXJVcCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbW91c2Ugd2hlZWwgZXZlbnRzXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVdoZWVsKGU6IFBJWEkuRmVkZXJhdGVkV2hlZWxFdmVudCk6IHZvaWQge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGRlbHRhID0gZS5kZWx0YVk7XG4gICAgdGhpcy5zY3JvbGxZICs9IGRlbHRhO1xuICAgIHRoaXMuc2Nyb2xsWSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMubWF4U2Nyb2xsWSwgdGhpcy5zY3JvbGxZKSk7XG5cbiAgICB0aGlzLnVwZGF0ZUNvbnRlbnRQb3NpdGlvbigpO1xuICAgIHRoaXMudXBkYXRlU2Nyb2xsYmFyKCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBwb2ludGVyIGRvd24gb24gc2Nyb2xsYmFyIHRodW1iXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVRodW1iUG9pbnRlckRvd24oZTogUElYSS5GZWRlcmF0ZWRQb2ludGVyRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlO1xuICAgIHRoaXMuZHJhZ1N0YXJ0WSA9IGUuZ2xvYmFsWTtcbiAgICB0aGlzLmRyYWdTdGFydFNjcm9sbFkgPSB0aGlzLnNjcm9sbFk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHBvaW50ZXIgZG93biBvbiBzY3JvbGxiYXIgdHJhY2tcbiAgICovXG4gIHByaXZhdGUgaGFuZGxlVHJhY2tQb2ludGVyRG93bihlOiBQSVhJLkZlZGVyYXRlZFBvaW50ZXJFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGxvY2FsWSA9IGUuZ2xvYmFsWSAtIHRoaXMuY29udGFpbmVyLndvcmxkVHJhbnNmb3JtLnR5O1xuICAgIGNvbnN0IHRodW1iSGVpZ2h0ID0gdGhpcy5nZXRUaHVtYkhlaWdodCgpO1xuICAgIGNvbnN0IHRyYWNrVG9wID0gMDtcbiAgICBjb25zdCB0cmFja0JvdHRvbSA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRhcmdldCBzY3JvbGwgcG9zaXRpb25cbiAgICBjb25zdCBjbGlja1JhdGlvID0gKGxvY2FsWSAtIHRyYWNrVG9wKSAvICh0cmFja0JvdHRvbSAtIHRyYWNrVG9wKTtcbiAgICB0aGlzLnNjcm9sbFkgPSBjbGlja1JhdGlvICogdGhpcy5tYXhTY3JvbGxZO1xuICAgIHRoaXMuc2Nyb2xsWSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMubWF4U2Nyb2xsWSwgdGhpcy5zY3JvbGxZKSk7XG5cbiAgICB0aGlzLnVwZGF0ZUNvbnRlbnRQb3NpdGlvbigpO1xuICAgIHRoaXMudXBkYXRlU2Nyb2xsYmFyKCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBnbG9iYWwgcG9pbnRlciBtb3ZlIGZvciB0aHVtYiBkcmFnZ2luZ1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVHbG9iYWxQb2ludGVyTW92ZShlOiBQb2ludGVyRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZykgcmV0dXJuO1xuXG4gICAgY29uc3QgZGVsdGFZID0gZS5jbGllbnRZIC0gdGhpcy5kcmFnU3RhcnRZO1xuICAgIGNvbnN0IHRyYWNrSGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQ7XG4gICAgY29uc3QgdGh1bWJIZWlnaHQgPSB0aGlzLmdldFRodW1iSGVpZ2h0KCk7XG4gICAgY29uc3Qgc2Nyb2xsYWJsZVRyYWNrSGVpZ2h0ID0gdHJhY2tIZWlnaHQgLSB0aHVtYkhlaWdodDtcblxuICAgIGlmIChzY3JvbGxhYmxlVHJhY2tIZWlnaHQgPD0gMCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc2Nyb2xsRGVsdGEgPSAoZGVsdGFZIC8gc2Nyb2xsYWJsZVRyYWNrSGVpZ2h0KSAqIHRoaXMubWF4U2Nyb2xsWTtcbiAgICB0aGlzLnNjcm9sbFkgPSB0aGlzLmRyYWdTdGFydFNjcm9sbFkgKyBzY3JvbGxEZWx0YTtcbiAgICB0aGlzLnNjcm9sbFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLm1heFNjcm9sbFksIHRoaXMuc2Nyb2xsWSkpO1xuXG4gICAgdGhpcy51cGRhdGVDb250ZW50UG9zaXRpb24oKTtcbiAgICB0aGlzLnVwZGF0ZVNjcm9sbGJhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgZ2xvYmFsIHBvaW50ZXIgdXAgdG8gZW5kIGRyYWdnaW5nXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUdsb2JhbFBvaW50ZXJVcCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0RyYWdnaW5nKSB7XG4gICAgICB0aGlzLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgIGlmICghdGhpcy5pc0hvdmVyaW5nVGh1bWIpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxiYXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY29udGVudCBwb3NpdGlvbiBiYXNlZCBvbiBzY3JvbGxcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ29udGVudFBvc2l0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuY29udGVudENvbnRhaW5lci55ID0gdGhpcy5wcm9wcy5wYWRkaW5nLnRvcCAtIHRoaXMuc2Nyb2xsWTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSB0aHVtYiBoZWlnaHQgYmFzZWQgb24gY29udGVudCByYXRpb1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRUaHVtYkhlaWdodCgpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLmNvbnRlbnRIZWlnaHQgPD0gMCkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0IC0gdGhpcy5wcm9wcy5wYWRkaW5nLnRvcCAtIHRoaXMucHJvcHMucGFkZGluZy5ib3R0b207XG4gICAgY29uc3QgcmF0aW8gPSB2aWV3cG9ydEhlaWdodCAvIHRoaXMuY29udGVudEhlaWdodDtcbiAgICBjb25zdCB0aHVtYkhlaWdodCA9IE1hdGgubWF4KDMwLCB0aGlzLnByb3BzLmhlaWdodCAqIHJhdGlvKTtcblxuICAgIHJldHVybiBNYXRoLm1pbih0aHVtYkhlaWdodCwgdGhpcy5wcm9wcy5oZWlnaHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRodW1iIFkgcG9zaXRpb25cbiAgICovXG4gIHByaXZhdGUgZ2V0VGh1bWJZKCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMubWF4U2Nyb2xsWSA8PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IHRyYWNrSGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQ7XG4gICAgY29uc3QgdGh1bWJIZWlnaHQgPSB0aGlzLmdldFRodW1iSGVpZ2h0KCk7XG4gICAgY29uc3Qgc2Nyb2xsYWJsZVRyYWNrSGVpZ2h0ID0gdHJhY2tIZWlnaHQgLSB0aHVtYkhlaWdodDtcblxuICAgIGNvbnN0IHNjcm9sbFJhdGlvID0gdGhpcy5zY3JvbGxZIC8gdGhpcy5tYXhTY3JvbGxZO1xuICAgIHJldHVybiBzY3JvbGxSYXRpbyAqIHNjcm9sbGFibGVUcmFja0hlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBzY3JvbGxiYXIgYXBwZWFyYW5jZVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVTY3JvbGxiYXIoKTogdm9pZCB7XG4gICAgY29uc3QgdHJhY2tYID0gdGhpcy5wcm9wcy53aWR0aCAtIHRoaXMucHJvcHMuc2Nyb2xsYmFyV2lkdGg7XG4gICAgY29uc3QgdHJhY2tXaWR0aCA9IHRoaXMucHJvcHMuc2Nyb2xsYmFyV2lkdGg7XG4gICAgY29uc3QgdHJhY2tIZWlnaHQgPSB0aGlzLnByb3BzLmhlaWdodDtcblxuICAgIC8vIFVwZGF0ZSB0cmFja1xuICAgIHRoaXMuc2Nyb2xsYmFyVHJhY2suY2xlYXIoKTtcbiAgICB0aGlzLnNjcm9sbGJhclRyYWNrLnJlY3QodHJhY2tYLCAwLCB0cmFja1dpZHRoLCB0cmFja0hlaWdodCk7XG4gICAgdGhpcy5zY3JvbGxiYXJUcmFjay5maWxsKHsgY29sb3I6IHRoaXMucHJvcHMuc2Nyb2xsYmFyVHJhY2tDb2xvciB9KTtcblxuICAgIC8vIFVwZGF0ZSB0aHVtYlxuICAgIGNvbnN0IHRodW1iSGVpZ2h0ID0gdGhpcy5nZXRUaHVtYkhlaWdodCgpO1xuICAgIGNvbnN0IHRodW1iWSA9IHRoaXMuZ2V0VGh1bWJZKCk7XG4gICAgY29uc3QgdGh1bWJDb2xvciA9ICh0aGlzLmlzSG92ZXJpbmdUaHVtYiB8fCB0aGlzLmlzRHJhZ2dpbmcpXG4gICAgICA/IHRoaXMucHJvcHMuc2Nyb2xsYmFyVGh1bWJIb3ZlckNvbG9yXG4gICAgICA6IHRoaXMucHJvcHMuc2Nyb2xsYmFyVGh1bWJDb2xvcjtcblxuICAgIHRoaXMuc2Nyb2xsYmFyVGh1bWIuY2xlYXIoKTtcblxuICAgIC8vIE9ubHkgc2hvdyB0aHVtYiBpZiBjb250ZW50IGlzIHNjcm9sbGFibGVcbiAgICBpZiAodGhpcy5tYXhTY3JvbGxZID4gMCkge1xuICAgICAgdGhpcy5zY3JvbGxiYXJUaHVtYi5yb3VuZFJlY3QoXG4gICAgICAgIHRyYWNrWCArIDIsXG4gICAgICAgIHRodW1iWSArIDIsXG4gICAgICAgIHRyYWNrV2lkdGggLSA0LFxuICAgICAgICB0aHVtYkhlaWdodCAtIDQsXG4gICAgICAgIDRcbiAgICAgICk7XG4gICAgICB0aGlzLnNjcm9sbGJhclRodW1iLmZpbGwoeyBjb2xvcjogdGh1bWJDb2xvciB9KTtcbiAgICAgIHRoaXMuc2Nyb2xsYmFyVGh1bWIudmlzaWJsZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Nyb2xsYmFyVGh1bWIudmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBhdXRvLWhpZGVcbiAgICBpZiAodGhpcy5wcm9wcy5zY3JvbGxiYXJBdXRvSGlkZSAmJiAhdGhpcy5pc0RyYWdnaW5nICYmICF0aGlzLmlzSG92ZXJpbmdUaHVtYikge1xuICAgICAgdGhpcy5zY3JvbGxiYXJUcmFjay5hbHBoYSA9IDA7XG4gICAgICB0aGlzLnNjcm9sbGJhclRodW1iLmFscGhhID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zY3JvbGxiYXJUcmFjay5hbHBoYSA9IDE7XG4gICAgICB0aGlzLnNjcm9sbGJhclRodW1iLmFscGhhID0gMTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjYWxjdWxhdGVzIGNvbnRlbnQgaGVpZ2h0IGFuZCBtYXggc2Nyb2xsXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUNvbnRlbnRCb3VuZHMoKTogdm9pZCB7XG4gICAgLy8gQ2FsY3VsYXRlIGNvbnRlbnQgaGVpZ2h0IGZyb20gY2hpbGRyZW4ncyBjb21wdXRlZCBsYXlvdXRzXG4gICAgbGV0IG1heEhlaWdodCA9IDA7XG5cbiAgICB0aGlzLmNvbnRlbnRDb250YWluZXIuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IGFueSkgPT4ge1xuICAgICAgaWYgKGNoaWxkICYmIHR5cGVvZiBjaGlsZC55ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgY2hpbGQuaGVpZ2h0ID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25zdCBjaGlsZEJvdHRvbSA9IGNoaWxkLnkgKyBjaGlsZC5oZWlnaHQ7XG4gICAgICAgIGlmIChjaGlsZEJvdHRvbSA+IG1heEhlaWdodCkge1xuICAgICAgICAgIG1heEhlaWdodCA9IGNoaWxkQm90dG9tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSBtYXhIZWlnaHQ7XG5cbiAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0IC0gdGhpcy5wcm9wcy5wYWRkaW5nLnRvcCAtIHRoaXMucHJvcHMucGFkZGluZy5ib3R0b207XG4gICAgdGhpcy5tYXhTY3JvbGxZID0gTWF0aC5tYXgoMCwgdGhpcy5jb250ZW50SGVpZ2h0IC0gdmlld3BvcnRIZWlnaHQpO1xuXG4gICAgLy8gQ2xhbXAgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cbiAgICB0aGlzLnNjcm9sbFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLm1heFNjcm9sbFksIHRoaXMuc2Nyb2xsWSkpO1xuXG4gICAgdGhpcy51cGRhdGVDb250ZW50UG9zaXRpb24oKTtcbiAgICB0aGlzLnVwZGF0ZVNjcm9sbGJhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBjaGlsZCB0byB0aGUgc2Nyb2xsYWJsZSBjb250ZW50XG4gICAqL1xuICBhZGRDaGlsZChjaGlsZDogVUlDb21wb25lbnQpOiB2b2lkIHtcbiAgICAvLyBTZXQgcGFyZW50IHJlZmVyZW5jZSBmb3Igc2Nyb2xsLWludG8tdmlldyBzdXBwb3J0XG4gICAgY2hpbGQucGFyZW50ID0gdGhpcyBhcyBhbnk7XG5cbiAgICAvLyBUcmFjayBjaGlsZCBmb3IgZm9jdXMgbWFuYWdlciBkaXNjb3ZlcnlcbiAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuXG4gICAgdGhpcy5jb250ZW50Q29udGFpbmVyLmFkZENoaWxkKGNoaWxkLmNvbnRhaW5lcik7XG5cbiAgICAvLyBMYXlvdXQgdGhlIGNoaWxkIHdpdGggYXZhaWxhYmxlIGNvbnRlbnQgd2lkdGhcbiAgICBjb25zdCBjb250ZW50V2lkdGggPSB0aGlzLnByb3BzLndpZHRoIC0gdGhpcy5wcm9wcy5wYWRkaW5nLmxlZnQgLSB0aGlzLnByb3BzLnBhZGRpbmcucmlnaHQgLSB0aGlzLnByb3BzLnNjcm9sbGJhcldpZHRoO1xuICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSA5OTk5OTk7IC8vIEFsbG93IHVubGltaXRlZCBoZWlnaHQgZm9yIHNjcm9sbGluZ1xuICAgIGNoaWxkLmxheW91dChjb250ZW50V2lkdGgsIGNvbnRlbnRIZWlnaHQpO1xuXG4gICAgdGhpcy51cGRhdGVDb250ZW50Qm91bmRzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNoaWxkIGZyb20gdGhlIHNjcm9sbGFibGUgY29udGVudFxuICAgKi9cbiAgcmVtb3ZlQ2hpbGQoY2hpbGQ6IFVJQ29tcG9uZW50KTogdm9pZCB7XG4gICAgY2hpbGQucGFyZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gUmVtb3ZlIGZyb20gY2hpbGRyZW4gdHJhY2tpbmdcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2hpbGRyZW4uaW5kZXhPZihjaGlsZCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGVudENvbnRhaW5lci5yZW1vdmVDaGlsZChjaGlsZC5jb250YWluZXIpO1xuICAgIHRoaXMudXBkYXRlQ29udGVudEJvdW5kcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbHMgdG8gYSBzcGVjaWZpYyBZIHBvc2l0aW9uXG4gICAqL1xuICBzY3JvbGxUbyh5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbFkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLm1heFNjcm9sbFksIHkpKTtcbiAgICB0aGlzLnVwZGF0ZUNvbnRlbnRQb3NpdGlvbigpO1xuICAgIHRoaXMudXBkYXRlU2Nyb2xsYmFyKCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0byB0aGUgdG9wXG4gICAqL1xuICBzY3JvbGxUb1RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbFRvKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbHMgdG8gdGhlIGJvdHRvbVxuICAgKi9cbiAgc2Nyb2xsVG9Cb3R0b20oKTogdm9pZCB7XG4gICAgdGhpcy5zY3JvbGxUbyh0aGlzLm1heFNjcm9sbFkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXG4gICAqL1xuICBnZXRTY3JvbGxZKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuc2Nyb2xsWTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvblxuICAgKi9cbiAgZ2V0TWF4U2Nyb2xsWSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1heFNjcm9sbFk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0byBtYWtlIGEgY2hpbGQgY29tcG9uZW50IHZpc2libGVcbiAgICovXG4gIHNjcm9sbFRvQ29tcG9uZW50KGNvbXBvbmVudDogVUlDb21wb25lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb21wb25lbnRCb3VuZHMgPSBjb21wb25lbnQuZ2V0R2xvYmFsQm91bmRzKCk7XG4gICAgY29uc3QgY29udGFpbmVyQm91bmRzID0gdGhpcy5nZXRHbG9iYWxCb3VuZHMoKTtcblxuICAgIC8vIENhbGN1bGF0ZSBjb21wb25lbnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gc2Nyb2xsIGNvbnRhaW5lcidzIGNvbnRlbnQgYXJlYVxuICAgIGNvbnN0IHJlbGF0aXZlWSA9IGNvbXBvbmVudEJvdW5kcy55IC0gY29udGFpbmVyQm91bmRzLnkgLSB0aGlzLnByb3BzLnBhZGRpbmcudG9wICsgdGhpcy5zY3JvbGxZO1xuICAgIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQgLSB0aGlzLnByb3BzLnBhZGRpbmcudG9wIC0gdGhpcy5wcm9wcy5wYWRkaW5nLmJvdHRvbTtcblxuICAgIC8vIENoZWNrIGlmIGNvbXBvbmVudCBpcyBhYm92ZSB2aWV3cG9ydFxuICAgIGlmIChyZWxhdGl2ZVkgPCB0aGlzLnNjcm9sbFkpIHtcbiAgICAgIC8vIFNjcm9sbCB1cCB0byBzaG93IGNvbXBvbmVudCBhdCB0b3BcbiAgICAgIHRoaXMuc2Nyb2xsVG8ocmVsYXRpdmVZKTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgY29tcG9uZW50IGlzIGJlbG93IHZpZXdwb3J0XG4gICAgZWxzZSBpZiAocmVsYXRpdmVZICsgY29tcG9uZW50Qm91bmRzLmhlaWdodCA+IHRoaXMuc2Nyb2xsWSArIHZpZXdwb3J0SGVpZ2h0KSB7XG4gICAgICAvLyBTY3JvbGwgZG93biB0byBzaG93IGNvbXBvbmVudCBhdCBib3R0b21cbiAgICAgIGNvbnN0IHRhcmdldFNjcm9sbCA9IHJlbGF0aXZlWSArIGNvbXBvbmVudEJvdW5kcy5oZWlnaHQgLSB2aWV3cG9ydEhlaWdodDtcbiAgICAgIHRoaXMuc2Nyb2xsVG8odGFyZ2V0U2Nyb2xsKTtcbiAgICB9XG4gICAgLy8gQ29tcG9uZW50IGlzIGFscmVhZHkgdmlzaWJsZSwgbm8gbmVlZCB0byBzY3JvbGxcbiAgfVxuXG4gIC8qKlxuICAgKiBNZWFzdXJlcyB0aGUgc2l6ZSBuZWVkZWQgZm9yIHRoaXMgY29udGFpbmVyXG4gICAqL1xuICBtZWFzdXJlKCk6IE1lYXN1cmVkU2l6ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgbGF5b3V0IGZvciB0aGlzIGNvbnRhaW5lclxuICAgKi9cbiAgbGF5b3V0KGF2YWlsYWJsZVdpZHRoOiBudW1iZXIsIGF2YWlsYWJsZUhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbWVhc3VyZWQgPSB0aGlzLm1lYXN1cmUoKTtcblxuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQud2lkdGggPSBtZWFzdXJlZC53aWR0aDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmhlaWdodCA9IG1lYXN1cmVkLmhlaWdodDtcblxuICAgIHRoaXMudXBkYXRlQ29udGVudEJvdW5kcygpO1xuICAgIHRoaXMubGF5b3V0RGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGNvbnRhaW5lclxuICAgKi9cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiB2b2lkIHtcbiAgICAvLyBSZW5kZXJpbmcgaGFuZGxlZCBieSBiYWNrZ3JvdW5kLCBjb250ZW50LCBtYXNrLCBhbmQgc2Nyb2xsYmFyXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCB3aGVuIGRlc3Ryb3lpbmdcbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5ib3VuZEdsb2JhbFBvaW50ZXJNb3ZlKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIHRoaXMuYm91bmRHbG9iYWxQb2ludGVyTW92ZSk7XG4gICAgICAgIHRoaXMuYm91bmRHbG9iYWxQb2ludGVyTW92ZSA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5ib3VuZEdsb2JhbFBvaW50ZXJVcCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgdGhpcy5ib3VuZEdsb2JhbFBvaW50ZXJVcCk7XG4gICAgICAgIHRoaXMuYm91bmRHbG9iYWxQb2ludGVyVXAgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBzdXBlci5kZXN0cm95KCk7XG4gIH1cbn1cbiIsImltcG9ydCBQSVhJIGZyb20gJ3BpeGkuanMnO1xuaW1wb3J0IHsgVUlDb21wb25lbnQgfSBmcm9tICcuLi9jb3JlL3VpLWNvbXBvbmVudCc7XG5pbXBvcnQgeyBCb3hNb2RlbCwgTWVhc3VyZWRTaXplIH0gZnJvbSAnLi4vY29yZS9ib3gtbW9kZWwnO1xuaW1wb3J0IHsgVUlQYW5lbCB9IGZyb20gJy4vdWktcGFuZWwnO1xuaW1wb3J0IHsgVUlMYWJlbCB9IGZyb20gJy4vdWktbGFiZWwnO1xuaW1wb3J0IHsgRWRnZUluc2V0cyB9IGZyb20gJy4uL2NvcmUvZWRnZS1pbnNldHMnO1xuXG4vKipcbiAqIE9wdGlvbiBzdHJ1Y3R1cmUgZm9yIFNlbGVjdCBjb21wb25lbnRcbiAqXG4gKiBAY2F0ZWdvcnkgVUlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZWxlY3RPcHRpb24ge1xuICAvKiogRGlzcGxheSB0ZXh0IGZvciB0aGUgb3B0aW9uICovXG4gIGxhYmVsOiBzdHJpbmc7XG4gIC8qKiBUaGUgYWN0dWFsIHZhbHVlICovXG4gIHZhbHVlOiBhbnk7XG4gIC8qKiBXaGV0aGVyIHRoaXMgb3B0aW9uIGlzIGRpc2FibGVkICovXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBQcm9wcyBmb3IgY29uZmlndXJpbmcgYSBVSVNlbGVjdFxuICpcbiAqIEBjYXRlZ29yeSBVSVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVJU2VsZWN0UHJvcHMge1xuICAvKiogQXJyYXkgb2Ygb3B0aW9ucyAqL1xuICBvcHRpb25zOiBTZWxlY3RPcHRpb25bXTtcbiAgLyoqIEN1cnJlbnQgc2VsZWN0ZWQgdmFsdWUgKGNvbnRyb2xsZWQpICovXG4gIHZhbHVlPzogYW55O1xuICAvKiogRGVmYXVsdCBzZWxlY3RlZCB2YWx1ZSAodW5jb250cm9sbGVkKSAqL1xuICBkZWZhdWx0VmFsdWU/OiBhbnk7XG4gIC8qKiBDaGFuZ2UgY2FsbGJhY2sgKi9cbiAgb25DaGFuZ2U/OiAodmFsdWU6IGFueSkgPT4gdm9pZDtcbiAgLyoqIFdpZHRoIG9mIHRoZSBzZWxlY3QgKi9cbiAgd2lkdGg/OiBudW1iZXI7XG4gIC8qKiBIZWlnaHQgb2YgdGhlIHNlbGVjdCAqL1xuICBoZWlnaHQ/OiBudW1iZXI7XG4gIC8qKiBQbGFjZWhvbGRlciB0ZXh0IHdoZW4gbm90aGluZyBzZWxlY3RlZCAqL1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgLyoqIFdoZXRoZXIgdGhlIHNlbGVjdCBpcyBkaXNhYmxlZCAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIC8qKiBCYWNrZ3JvdW5kIGNvbG9yICovXG4gIGJhY2tncm91bmRDb2xvcj86IG51bWJlcjtcbiAgLyoqIFRleHQgY29sb3IgKi9cbiAgdGV4dENvbG9yPzogbnVtYmVyO1xuICAvKiogQm9yZGVyIHJhZGl1cyAqL1xuICBib3JkZXJSYWRpdXM/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQSBzZWxlY3QvZHJvcGRvd24gY29tcG9uZW50IHdpdGggb3B0aW9uc1xuICogRm9sbG93cyBBbnQgRGVzaWduJ3MgZGF0YS1kcml2ZW4gcGF0dGVyblxuICpcbiAqIEBjYXRlZ29yeSBVSVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBzZWxlY3QgPSBuZXcgVUlTZWxlY3Qoe1xuICogICBvcHRpb25zOiBbXG4gKiAgICAgeyBsYWJlbDogJ09wdGlvbiAxJywgdmFsdWU6IDEgfSxcbiAqICAgICB7IGxhYmVsOiAnT3B0aW9uIDInLCB2YWx1ZTogMiB9LFxuICogICAgIHsgbGFiZWw6ICdPcHRpb24gMycsIHZhbHVlOiAzIH1cbiAqICAgXSxcbiAqICAgcGxhY2Vob2xkZXI6ICdDaG9vc2UgYW4gb3B0aW9uJyxcbiAqICAgb25DaGFuZ2U6ICh2YWx1ZSkgPT4gY29uc29sZS5sb2coJ1NlbGVjdGVkOicsIHZhbHVlKVxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFVJU2VsZWN0IGV4dGVuZHMgVUlDb21wb25lbnQge1xuICBwcml2YXRlIHByb3BzOiBSZXF1aXJlZDxPbWl0PFVJU2VsZWN0UHJvcHMsICdvbkNoYW5nZScgfCAndmFsdWUnIHwgJ2RlZmF1bHRWYWx1ZSc+PjtcbiAgcHJpdmF0ZSBvbkNoYW5nZT86ICh2YWx1ZTogYW55KSA9PiB2b2lkO1xuXG4gIHByaXZhdGUgc2VsZWN0ZWRWYWx1ZTogYW55O1xuICBwcml2YXRlIGJhY2tncm91bmQ6IFVJUGFuZWw7XG4gIHByaXZhdGUgbGFiZWw6IFVJTGFiZWw7XG4gIHByaXZhdGUgZHJvcGRvd25Db250YWluZXI/OiBQSVhJLkNvbnRhaW5lcjtcbiAgcHJpdmF0ZSBkcm9wZG93blBhbmVsPzogVUlQYW5lbDtcbiAgcHJpdmF0ZSBvcHRpb25MYWJlbHM6IFVJTGFiZWxbXSA9IFtdO1xuICBwcml2YXRlIGlzT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgaG92ZXJDb2xvcjogbnVtYmVyO1xuICBwcml2YXRlIHNlbGVjdGVkQ29sb3I6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVUlTZWxlY3RQcm9wcywgYm94TW9kZWw/OiBQYXJ0aWFsPEJveE1vZGVsPikge1xuICAgIHN1cGVyKGJveE1vZGVsKTtcblxuICAgIHRoaXMucHJvcHMgPSB7XG4gICAgICBvcHRpb25zOiBwcm9wcy5vcHRpb25zID8/IFtdLFxuICAgICAgcGxhY2Vob2xkZXI6IHByb3BzLnBsYWNlaG9sZGVyID8/ICdTZWxlY3QuLi4nLFxuICAgICAgd2lkdGg6IHByb3BzLndpZHRoID8/IDIwMCxcbiAgICAgIGhlaWdodDogcHJvcHMuaGVpZ2h0ID8/IDM2LFxuICAgICAgZGlzYWJsZWQ6IHByb3BzLmRpc2FibGVkID8/IGZhbHNlLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiBwcm9wcy5iYWNrZ3JvdW5kQ29sb3IgPz8gMHhmZmZmZmYsXG4gICAgICB0ZXh0Q29sb3I6IHByb3BzLnRleHRDb2xvciA/PyAweDAwMDAwMCxcbiAgICAgIGJvcmRlclJhZGl1czogcHJvcHMuYm9yZGVyUmFkaXVzID8/IDRcbiAgICB9O1xuXG4gICAgdGhpcy5vbkNoYW5nZSA9IHByb3BzLm9uQ2hhbmdlO1xuICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IHByb3BzLnZhbHVlID8/IHByb3BzLmRlZmF1bHRWYWx1ZTtcblxuICAgIC8vIENhbGN1bGF0ZSBjb2xvcnNcbiAgICB0aGlzLmhvdmVyQ29sb3IgPSB0aGlzLmRhcmtlbkNvbG9yKHRoaXMucHJvcHMuYmFja2dyb3VuZENvbG9yLCAwLjk1KTtcbiAgICB0aGlzLnNlbGVjdGVkQ29sb3IgPSB0aGlzLmRhcmtlbkNvbG9yKHRoaXMucHJvcHMuYmFja2dyb3VuZENvbG9yLCAwLjkpO1xuXG4gICAgLy8gU2V0IGJveCBtb2RlbCBkaW1lbnNpb25zXG4gICAgdGhpcy5ib3hNb2RlbC53aWR0aCA9IHRoaXMucHJvcHMud2lkdGg7XG4gICAgdGhpcy5ib3hNb2RlbC5oZWlnaHQgPSB0aGlzLnByb3BzLmhlaWdodDtcblxuICAgIC8vIENyZWF0ZSBiYWNrZ3JvdW5kXG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gbmV3IFVJUGFuZWwoe1xuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLnByb3BzLmJhY2tncm91bmRDb2xvcixcbiAgICAgIHdpZHRoOiB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgIGJvcmRlclJhZGl1czogdGhpcy5wcm9wcy5ib3JkZXJSYWRpdXNcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmJhY2tncm91bmQuY29udGFpbmVyKTtcblxuICAgIC8vIENyZWF0ZSBsYWJlbCBmb3Igc2VsZWN0ZWQgdmFsdWVcbiAgICBjb25zdCBkaXNwbGF5VGV4dCA9IHRoaXMuZ2V0RGlzcGxheVRleHQoKTtcbiAgICB0aGlzLmxhYmVsID0gbmV3IFVJTGFiZWwoe1xuICAgICAgdGV4dDogZGlzcGxheVRleHQsXG4gICAgICBmb250U2l6ZTogMTQsXG4gICAgICBjb2xvcjogdGhpcy5zZWxlY3RlZFZhbHVlID8gdGhpcy5wcm9wcy50ZXh0Q29sb3IgOiAweDk5OTk5OSxcbiAgICAgIGFsaWduOiAnbGVmdCdcbiAgICB9LCB7XG4gICAgICBwYWRkaW5nOiBFZGdlSW5zZXRzLnN5bW1ldHJpYyg4LCAxMilcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmxhYmVsLmNvbnRhaW5lcik7XG5cbiAgICAvLyBTZXR1cCBpbnRlcmFjdGl2aXR5XG4gICAgdGhpcy5zZXR1cEludGVyYWN0aXZpdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkaXNwbGF5IHRleHQgYmFzZWQgb24gc2VsZWN0ZWQgdmFsdWVcbiAgICovXG4gIHByaXZhdGUgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMucGxhY2Vob2xkZXI7XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9uID0gdGhpcy5wcm9wcy5vcHRpb25zLmZpbmQob3B0ID0+IG9wdC52YWx1ZSA9PT0gdGhpcy5zZWxlY3RlZFZhbHVlKTtcbiAgICByZXR1cm4gb3B0aW9uID8gb3B0aW9uLmxhYmVsIDogdGhpcy5wcm9wcy5wbGFjZWhvbGRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIG1vdXNlL3RvdWNoIGV2ZW50IGhhbmRsZXJzXG4gICAqL1xuICBwcml2YXRlIHNldHVwSW50ZXJhY3Rpdml0eSgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRhaW5lci5ldmVudE1vZGUgPSAnc3RhdGljJztcbiAgICB0aGlzLmNvbnRhaW5lci5jdXJzb3IgPSAncG9pbnRlcic7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5vbigncG9pbnRlcmRvd24nLCB0aGlzLmhhbmRsZVBvaW50ZXJEb3duLmJpbmQodGhpcykpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVQb2ludGVyRG93bigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wcm9wcy5kaXNhYmxlZCkgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vcGVuRHJvcGRvd24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIGRyb3Bkb3duIG1lbnVcbiAgICovXG4gIHByaXZhdGUgb3BlbkRyb3Bkb3duKCk6IHZvaWQge1xuICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcblxuICAgIC8vIENyZWF0ZSBkcm9wZG93biBjb250YWluZXJcbiAgICB0aGlzLmRyb3Bkb3duQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gICAgdGhpcy5kcm9wZG93bkNvbnRhaW5lci5wb3NpdGlvbi5zZXQoMCwgdGhpcy5wcm9wcy5oZWlnaHQgKyA0KTtcblxuICAgIC8vIENyZWF0ZSBkcm9wZG93biBwYW5lbFxuICAgIGNvbnN0IGRyb3Bkb3duSGVpZ2h0ID0gTWF0aC5taW4odGhpcy5wcm9wcy5vcHRpb25zLmxlbmd0aCAqIDMyLCAyMDApO1xuICAgIHRoaXMuZHJvcGRvd25QYW5lbCA9IG5ldyBVSVBhbmVsKHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5wcm9wcy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgIGhlaWdodDogZHJvcGRvd25IZWlnaHQsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoaXMucHJvcHMuYm9yZGVyUmFkaXVzXG4gICAgfSk7XG4gICAgdGhpcy5kcm9wZG93bkNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmRyb3Bkb3duUGFuZWwuY29udGFpbmVyKTtcblxuICAgIC8vIENyZWF0ZSBvcHRpb24gbGFiZWxzXG4gICAgdGhpcy5vcHRpb25MYWJlbHMgPSBbXTtcbiAgICB0aGlzLnByb3BzLm9wdGlvbnMuZm9yRWFjaCgob3B0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gICAgICBvcHRpb25Db250YWluZXIucG9zaXRpb24uc2V0KDAsIGluZGV4ICogMzIpO1xuXG4gICAgICAvLyBPcHRpb24gYmFja2dyb3VuZFxuICAgICAgY29uc3Qgb3B0aW9uQmcgPSBuZXcgUElYSS5HcmFwaGljcygpO1xuICAgICAgb3B0aW9uQmcucmVjdCgwLCAwLCB0aGlzLnByb3BzLndpZHRoLCAzMik7XG4gICAgICBvcHRpb25CZy5maWxsKHsgY29sb3I6IHRoaXMucHJvcHMuYmFja2dyb3VuZENvbG9yLCBhbHBoYTogMCB9KTtcbiAgICAgIG9wdGlvbkNvbnRhaW5lci5hZGRDaGlsZChvcHRpb25CZyk7XG5cbiAgICAgIC8vIE9wdGlvbiBsYWJlbFxuICAgICAgY29uc3Qgb3B0aW9uTGFiZWwgPSBuZXcgVUlMYWJlbCh7XG4gICAgICAgIHRleHQ6IG9wdGlvbi5sYWJlbCxcbiAgICAgICAgZm9udFNpemU6IDE0LFxuICAgICAgICBjb2xvcjogb3B0aW9uLmRpc2FibGVkID8gMHg5OTk5OTkgOiB0aGlzLnByb3BzLnRleHRDb2xvcixcbiAgICAgICAgYWxpZ246ICdsZWZ0J1xuICAgICAgfSwge1xuICAgICAgICBwYWRkaW5nOiBFZGdlSW5zZXRzLnN5bW1ldHJpYyg4LCAxMilcbiAgICAgIH0pO1xuICAgICAgb3B0aW9uTGFiZWwubGF5b3V0KHRoaXMucHJvcHMud2lkdGgsIDMyKTtcbiAgICAgIG9wdGlvbkNvbnRhaW5lci5hZGRDaGlsZChvcHRpb25MYWJlbC5jb250YWluZXIpO1xuXG4gICAgICBpZiAoIW9wdGlvbi5kaXNhYmxlZCkge1xuICAgICAgICBvcHRpb25Db250YWluZXIuZXZlbnRNb2RlID0gJ3N0YXRpYyc7XG4gICAgICAgIG9wdGlvbkNvbnRhaW5lci5jdXJzb3IgPSAncG9pbnRlcic7XG5cbiAgICAgICAgLy8gSG92ZXIgZWZmZWN0XG4gICAgICAgIG9wdGlvbkNvbnRhaW5lci5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7XG4gICAgICAgICAgb3B0aW9uQmcuY2xlYXIoKTtcbiAgICAgICAgICBvcHRpb25CZy5yZWN0KDAsIDAsIHRoaXMucHJvcHMud2lkdGgsIDMyKTtcbiAgICAgICAgICBvcHRpb25CZy5maWxsKHsgY29sb3I6IHRoaXMuaG92ZXJDb2xvciB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3B0aW9uQ29udGFpbmVyLm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xuICAgICAgICAgIG9wdGlvbkJnLmNsZWFyKCk7XG4gICAgICAgICAgb3B0aW9uQmcucmVjdCgwLCAwLCB0aGlzLnByb3BzLndpZHRoLCAzMik7XG4gICAgICAgICAgb3B0aW9uQmcuZmlsbCh7IGNvbG9yOiB0aGlzLnByb3BzLmJhY2tncm91bmRDb2xvciwgYWxwaGE6IDAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENsaWNrIGhhbmRsZXJcbiAgICAgICAgb3B0aW9uQ29udGFpbmVyLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcbiAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihvcHRpb24udmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kcm9wZG93bkNvbnRhaW5lciEuYWRkQ2hpbGQob3B0aW9uQ29udGFpbmVyKTtcbiAgICAgIHRoaXMub3B0aW9uTGFiZWxzLnB1c2gob3B0aW9uTGFiZWwpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5kcm9wZG93bkNvbnRhaW5lcik7XG5cbiAgICAvLyBBZGQgY2xpY2sgb3V0c2lkZSBsaXN0ZW5lclxuICAgIHRoaXMuc2V0dXBDbGlja091dHNpZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIGRyb3Bkb3duIG1lbnVcbiAgICovXG4gIHByaXZhdGUgY2xvc2VEcm9wZG93bigpOiB2b2lkIHtcbiAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuZHJvcGRvd25Db250YWluZXIpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuZHJvcGRvd25Db250YWluZXIpO1xuICAgICAgdGhpcy5kcm9wZG93bkNvbnRhaW5lciA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZHJvcGRvd25QYW5lbCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMub3B0aW9uTGFiZWxzID0gW107XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGNsaWNrIG91dHNpZGUgbGlzdGVuZXJcbiAgICB0aGlzLnJlbW92ZUNsaWNrT3V0c2lkZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYW4gb3B0aW9uXG4gICAqL1xuICBwcml2YXRlIHNlbGVjdE9wdGlvbih2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZFZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5sYWJlbC5zZXRUZXh0KHRoaXMuZ2V0RGlzcGxheVRleHQoKSk7XG4gICAgdGhpcy5sYWJlbC5zZXRDb2xvcih0aGlzLnByb3BzLnRleHRDb2xvcik7XG5cbiAgICB0aGlzLm9uQ2hhbmdlPy4odmFsdWUpO1xuICAgIHRoaXMuY2xvc2VEcm9wZG93bigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGNsaWNrIG91dHNpZGUgZGV0ZWN0aW9uXG4gICAqL1xuICBwcml2YXRlIHNldHVwQ2xpY2tPdXRzaWRlKCk6IHZvaWQge1xuICAgIC8vIFNpbXBsZSBhcHByb2FjaDogY2xvc2Ugb24gYW55IG91dHNpZGUgY2xpY2tcbiAgICBjb25zdCBzdGFnZSA9IHRoaXMuY29udGFpbmVyLnBhcmVudDtcbiAgICBpZiAoc3RhZ2UpIHtcbiAgICAgIHN0YWdlLmV2ZW50TW9kZSA9ICdzdGF0aWMnO1xuICAgICAgc3RhZ2Uub25jZSgncG9pbnRlcmRvd24nLCAoZSkgPT4ge1xuICAgICAgICAvLyBDaGVjayBpZiBjbGljayBpcyBvdXRzaWRlXG4gICAgICAgIGNvbnN0IHBvaW50ID0gZS5nbG9iYWw7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuY29udGFpbmVyLmdldEJvdW5kcygpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHBvaW50IGlzIHdpdGhpbiBib3VuZHMgbWFudWFsbHlcbiAgICAgICAgaWYgKHBvaW50LnggPCBib3VuZHMueCB8fCBwb2ludC54ID4gYm91bmRzLnggKyBib3VuZHMud2lkdGggfHxcbiAgICAgICAgICAgIHBvaW50LnkgPCBib3VuZHMueSB8fCBwb2ludC55ID4gYm91bmRzLnkgKyBib3VuZHMuaGVpZ2h0KSB7XG4gICAgICAgICAgdGhpcy5jbG9zZURyb3Bkb3duKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY2xpY2sgb3V0c2lkZSBkZXRlY3Rpb25cbiAgICovXG4gIHByaXZhdGUgcmVtb3ZlQ2xpY2tPdXRzaWRlKCk6IHZvaWQge1xuICAgIC8vIEhhbmRsZWQgYnkgJ29uY2UnIGluIHNldHVwQ2xpY2tPdXRzaWRlXG4gIH1cblxuICAvKipcbiAgICogRGFya2VucyBhIGNvbG9yIGJ5IGEgZmFjdG9yXG4gICAqL1xuICBwcml2YXRlIGRhcmtlbkNvbG9yKGNvbG9yOiBudW1iZXIsIGZhY3RvcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCByID0gKChjb2xvciA+PiAxNikgJiAweGZmKSAqIGZhY3RvcjtcbiAgICBjb25zdCBnID0gKChjb2xvciA+PiA4KSAmIDB4ZmYpICogZmFjdG9yO1xuICAgIGNvbnN0IGIgPSAoY29sb3IgJiAweGZmKSAqIGZhY3RvcjtcbiAgICByZXR1cm4gKChyIDw8IDE2KSB8IChnIDw8IDgpIHwgYikgPj4+IDA7XG4gIH1cblxuICAvKipcbiAgICogTWVhc3VyZXMgdGhlIHNpemUgbmVlZGVkIGZvciB0aGlzIHNlbGVjdFxuICAgKi9cbiAgbWVhc3VyZSgpOiBNZWFzdXJlZFNpemUge1xuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGxheW91dCBmb3IgdGhpcyBzZWxlY3RcbiAgICovXG4gIGxheW91dChhdmFpbGFibGVXaWR0aDogbnVtYmVyLCBhdmFpbGFibGVIZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG1lYXN1cmVkID0gdGhpcy5tZWFzdXJlKCk7XG5cbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LndpZHRoID0gbWVhc3VyZWQud2lkdGg7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC5oZWlnaHQgPSBtZWFzdXJlZC5oZWlnaHQ7XG5cbiAgICAvLyBMYXlvdXQgYmFja2dyb3VuZFxuICAgIHRoaXMuYmFja2dyb3VuZC5sYXlvdXQobWVhc3VyZWQud2lkdGgsIG1lYXN1cmVkLmhlaWdodCk7XG5cbiAgICAvLyBMYXlvdXQgbGFiZWxcbiAgICB0aGlzLmxhYmVsLmxheW91dChtZWFzdXJlZC53aWR0aCwgbWVhc3VyZWQuaGVpZ2h0KTtcblxuICAgIHRoaXMubGF5b3V0RGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIHNlbGVjdFxuICAgKi9cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiB2b2lkIHtcbiAgICAvLyBSZW5kZXJpbmcgaGFuZGxlZCBieSBiYWNrZ3JvdW5kIGFuZCBsYWJlbFxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHNlbGVjdGVkIHZhbHVlIHByb2dyYW1tYXRpY2FsbHlcbiAgICovXG4gIHNldFZhbHVlKHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkVmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLmxhYmVsLnNldFRleHQodGhpcy5nZXREaXNwbGF5VGV4dCgpKTtcbiAgICB0aGlzLmxhYmVsLnNldENvbG9yKHRoaXMucHJvcHMudGV4dENvbG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHNlbGVjdGVkIHZhbHVlXG4gICAqL1xuICBnZXRWYWx1ZSgpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgb3B0aW9uc1xuICAgKi9cbiAgc2V0T3B0aW9ucyhvcHRpb25zOiBTZWxlY3RPcHRpb25bXSk6IHZvaWQge1xuICAgIHRoaXMucHJvcHMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBVSUNvbXBvbmVudCB9IGZyb20gJy4uL2NvcmUvdWktY29tcG9uZW50JztcbmltcG9ydCB7IEJveE1vZGVsLCBNZWFzdXJlZFNpemUgfSBmcm9tICcuLi9jb3JlL2JveC1tb2RlbCc7XG5pbXBvcnQgeyBVSUxhYmVsIH0gZnJvbSAnLi91aS1sYWJlbCc7XG5pbXBvcnQgeyBVSVBhbmVsIH0gZnJvbSAnLi91aS1wYW5lbCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFiSXRlbSB7XG4gIGtleTogc3RyaW5nO1xuICBsYWJlbDogc3RyaW5nO1xuICBjb250ZW50OiBVSUNvbXBvbmVudDtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVJVGFic1Byb3BzIHtcbiAgaXRlbXM6IFRhYkl0ZW1bXTtcbiAgYWN0aXZlS2V5Pzogc3RyaW5nO1xuICBkZWZhdWx0QWN0aXZlS2V5Pzogc3RyaW5nO1xuICBvbkNoYW5nZT86IChhY3RpdmVLZXk6IHN0cmluZykgPT4gdm9pZDtcbiAgdHlwZT86ICdsaW5lJyB8ICdjYXJkJztcbiAgdGFiUG9zaXRpb24/OiAndG9wJyB8ICdib3R0b20nO1xuICB3aWR0aD86IG51bWJlcjtcbiAgaGVpZ2h0PzogbnVtYmVyO1xuICB0YWJCYXJCYWNrZ3JvdW5kQ29sb3I/OiBudW1iZXI7XG4gIHRhYkJhckhlaWdodD86IG51bWJlcjtcbiAgYWN0aXZlVGFiQ29sb3I/OiBudW1iZXI7XG4gIGluYWN0aXZlVGFiQ29sb3I/OiBudW1iZXI7XG4gIHRleHRDb2xvcj86IG51bWJlcjtcbiAgYWN0aXZlVGV4dENvbG9yPzogbnVtYmVyO1xuICBoYXNoUHJlZml4Pzogc3RyaW5nOyAvLyBlLmcuLCBcInVpLXNob3djYXNlXCIgY3JlYXRlcyBVUkxzIGxpa2UgI3VpLXNob3djYXNlL2Jhc2ljc1xufVxuXG5leHBvcnQgY2xhc3MgVUlUYWJzIGV4dGVuZHMgVUlDb21wb25lbnQge1xuICBwcml2YXRlIGl0ZW1zOiBUYWJJdGVtW107XG4gIHByaXZhdGUgYWN0aXZlS2V5OiBzdHJpbmc7XG4gIHByaXZhdGUgb25DaGFuZ2U/OiAoYWN0aXZlS2V5OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHByaXZhdGUgdHlwZTogJ2xpbmUnIHwgJ2NhcmQnO1xuICBwcml2YXRlIHRhYlBvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nO1xuICBwcml2YXRlIHdpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgaGVpZ2h0OiBudW1iZXI7XG4gIHByaXZhdGUgdGFiQmFyQmFja2dyb3VuZENvbG9yOiBudW1iZXI7XG4gIHByaXZhdGUgdGFiQmFySGVpZ2h0OiBudW1iZXI7XG4gIHByaXZhdGUgYWN0aXZlVGFiQ29sb3I6IG51bWJlcjtcbiAgcHJpdmF0ZSBpbmFjdGl2ZVRhYkNvbG9yOiBudW1iZXI7XG4gIHByaXZhdGUgdGV4dENvbG9yOiBudW1iZXI7XG4gIHByaXZhdGUgYWN0aXZlVGV4dENvbG9yOiBudW1iZXI7XG4gIHByaXZhdGUgaGFzaFByZWZpeD86IHN0cmluZztcblxuICBwcml2YXRlIHRhYkJhcjogUElYSS5Db250YWluZXI7XG4gIHByaXZhdGUgY29udGVudEFyZWE6IFBJWEkuQ29udGFpbmVyO1xuICBwcml2YXRlIHRhYkJ1dHRvbnM6IE1hcDxzdHJpbmcsIHsgY29udGFpbmVyOiBQSVhJLkNvbnRhaW5lcjsgbGFiZWw6IFVJTGFiZWw7IGJnOiBQSVhJLkdyYXBoaWNzIH0+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGFjdGl2ZUluZGljYXRvcj86IFBJWEkuR3JhcGhpY3M7XG4gIHByaXZhdGUgaGFzaENoYW5nZUhhbmRsZXI/OiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBVSVRhYnNQcm9wcywgYm94TW9kZWw/OiBQYXJ0aWFsPEJveE1vZGVsPikge1xuICAgIHN1cGVyKGJveE1vZGVsKTtcblxuICAgIHRoaXMuaXRlbXMgPSBwcm9wcy5pdGVtcyB8fCBbXTtcbiAgICB0aGlzLm9uQ2hhbmdlID0gcHJvcHMub25DaGFuZ2U7XG4gICAgdGhpcy50eXBlID0gcHJvcHMudHlwZSB8fCAnbGluZSc7XG4gICAgdGhpcy50YWJQb3NpdGlvbiA9IHByb3BzLnRhYlBvc2l0aW9uIHx8ICd0b3AnO1xuICAgIHRoaXMudGFiQmFyQmFja2dyb3VuZENvbG9yID0gcHJvcHMudGFiQmFyQmFja2dyb3VuZENvbG9yID8/IDB4MmQyZDQ0O1xuICAgIHRoaXMudGFiQmFySGVpZ2h0ID0gcHJvcHMudGFiQmFySGVpZ2h0ID8/IDQ4O1xuICAgIHRoaXMuYWN0aXZlVGFiQ29sb3IgPSBwcm9wcy5hY3RpdmVUYWJDb2xvciA/PyAweDE4OTBmZjtcbiAgICB0aGlzLmluYWN0aXZlVGFiQ29sb3IgPSBwcm9wcy5pbmFjdGl2ZVRhYkNvbG9yID8/IDB4M2QzZDU0O1xuICAgIHRoaXMudGV4dENvbG9yID0gcHJvcHMudGV4dENvbG9yID8/IDB4YWFhYWFhO1xuICAgIHRoaXMuYWN0aXZlVGV4dENvbG9yID0gcHJvcHMuYWN0aXZlVGV4dENvbG9yID8/IDB4ZmZmZmZmO1xuICAgIHRoaXMuaGFzaFByZWZpeCA9IHByb3BzLmhhc2hQcmVmaXg7XG5cbiAgICAvLyBEZXRlcm1pbmUgYWN0aXZlIGtleSAtIGNoZWNrIFVSTCBoYXNoIGZpcnN0IGlmIGhhc2hQcmVmaXggaXMgcHJvdmlkZWRcbiAgICBsZXQgaW5pdGlhbEtleSA9IHByb3BzLmFjdGl2ZUtleSB8fCBwcm9wcy5kZWZhdWx0QWN0aXZlS2V5IHx8ICh0aGlzLml0ZW1zLmxlbmd0aCA+IDAgPyB0aGlzLml0ZW1zWzBdLmtleSA6ICcnKTtcbiAgICBpZiAodGhpcy5oYXNoUHJlZml4ICYmICFwcm9wcy5hY3RpdmVLZXkpIHtcbiAgICAgIGNvbnN0IGhhc2hLZXkgPSB0aGlzLmdldEtleUZyb21IYXNoKCk7XG4gICAgICBpZiAoaGFzaEtleSAmJiB0aGlzLml0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmtleSA9PT0gaGFzaEtleSkpIHtcbiAgICAgICAgaW5pdGlhbEtleSA9IGhhc2hLZXk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYWN0aXZlS2V5ID0gaW5pdGlhbEtleTtcblxuICAgIHRoaXMud2lkdGggPSBwcm9wcy53aWR0aCA/PyA4MDA7XG4gICAgdGhpcy5oZWlnaHQgPSBwcm9wcy5oZWlnaHQgPz8gNjAwO1xuXG4gICAgdGhpcy50YWJCYXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcbiAgICB0aGlzLmNvbnRlbnRBcmVhID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLnRhYkJhcik7XG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5jb250ZW50QXJlYSk7XG5cbiAgICB0aGlzLmJ1aWxkVGFicygpO1xuICAgIHRoaXMuc2hvd0FjdGl2ZVRhYigpO1xuXG4gICAgLy8gU2V0IHVwIGhhc2ggY2hhbmdlIGxpc3RlbmVyIGlmIGhhc2hQcmVmaXggaXMgcHJvdmlkZWRcbiAgICBpZiAodGhpcy5oYXNoUHJlZml4KSB7XG4gICAgICB0aGlzLnNldHVwSGFzaExpc3RlbmVyKCk7XG4gICAgICAvLyBVcGRhdGUgaGFzaCB0byBtYXRjaCBpbml0aWFsIGFjdGl2ZSBrZXlcbiAgICAgIHRoaXMudXBkYXRlSGFzaCh0aGlzLmFjdGl2ZUtleSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRLZXlGcm9tSGFzaCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuaGFzaFByZWZpeCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpOyAvLyBSZW1vdmUgI1xuICAgIGNvbnN0IHByZWZpeCA9IGAke3RoaXMuaGFzaFByZWZpeH0vYDtcbiAgICBpZiAoaGFzaC5zdGFydHNXaXRoKHByZWZpeCkpIHtcbiAgICAgIHJldHVybiBoYXNoLnNsaWNlKHByZWZpeC5sZW5ndGgpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlSGFzaChrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5oYXNoUHJlZml4KSByZXR1cm47XG4gICAgY29uc3QgbmV3SGFzaCA9IGAjJHt0aGlzLmhhc2hQcmVmaXh9LyR7a2V5fWA7XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoICE9PSBuZXdIYXNoKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IG5ld0hhc2g7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cEhhc2hMaXN0ZW5lcigpOiB2b2lkIHtcbiAgICB0aGlzLmhhc2hDaGFuZ2VIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgY29uc3QgaGFzaEtleSA9IHRoaXMuZ2V0S2V5RnJvbUhhc2goKTtcbiAgICAgIGlmIChoYXNoS2V5ICYmIGhhc2hLZXkgIT09IHRoaXMuYWN0aXZlS2V5KSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlS2V5KGhhc2hLZXksIGZhbHNlKTsgLy8gZmFsc2UgPSBkb24ndCB1cGRhdGUgaGFzaCAoYWxyZWFkeSBjaGFuZ2VkKVxuICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmhhc2hDaGFuZ2VIYW5kbGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmhhc2hDaGFuZ2VIYW5kbGVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuaGFzaENoYW5nZUhhbmRsZXIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRUYWJzKCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGV4aXN0aW5nIHRhYnNcbiAgICB0aGlzLnRhYkJhci5yZW1vdmVDaGlsZHJlbigpO1xuICAgIHRoaXMudGFiQnV0dG9ucy5jbGVhcigpO1xuXG4gICAgLy8gQ3JlYXRlIHRhYiBiYXIgYmFja2dyb3VuZFxuICAgIGNvbnN0IHRhYkJhckJnID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcbiAgICB0YWJCYXJCZy5yZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMudGFiQmFySGVpZ2h0KTtcbiAgICB0YWJCYXJCZy5maWxsKHsgY29sb3I6IHRoaXMudGFiQmFyQmFja2dyb3VuZENvbG9yIH0pO1xuICAgIHRoaXMudGFiQmFyLmFkZENoaWxkKHRhYkJhckJnKTtcblxuICAgIC8vIEFkZCBib3R0b20gYm9yZGVyIGxpbmUgZm9yIGxpbmUgdHlwZVxuICAgIGlmICh0aGlzLnR5cGUgPT09ICdsaW5lJykge1xuICAgICAgY29uc3QgYm9yZGVyTGluZSA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XG4gICAgICBib3JkZXJMaW5lLnJlY3QoMCwgdGhpcy50YWJCYXJIZWlnaHQgLSAyLCB0aGlzLndpZHRoLCAyKTtcbiAgICAgIGJvcmRlckxpbmUuZmlsbCh7IGNvbG9yOiAweDNkM2Q1NCwgYWxwaGE6IDAuNSB9KTtcbiAgICAgIHRoaXMudGFiQmFyLmFkZENoaWxkKGJvcmRlckxpbmUpO1xuICAgIH1cblxuICAgIC8vIFBvc2l0aW9uIHRhYiBiYXJcbiAgICBpZiAodGhpcy50YWJQb3NpdGlvbiA9PT0gJ2JvdHRvbScpIHtcbiAgICAgIHRoaXMudGFiQmFyLnkgPSB0aGlzLmhlaWdodCAtIHRoaXMudGFiQmFySGVpZ2h0O1xuICAgICAgdGhpcy5jb250ZW50QXJlYS55ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50YWJCYXIueSA9IDA7XG4gICAgICB0aGlzLmNvbnRlbnRBcmVhLnkgPSB0aGlzLnRhYkJhckhlaWdodDtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGFic1xuICAgIGxldCB4T2Zmc2V0ID0gODsgLy8gU3RhcnQgd2l0aCBzb21lIGxlZnQgcGFkZGluZ1xuICAgIGNvbnN0IHRhYlBhZGRpbmcgPSAyNDtcbiAgICBjb25zdCB0YWJHYXAgPSA4O1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChpdGVtLmRpc2FibGVkKSBjb250aW51ZTtcblxuICAgICAgY29uc3QgdGFiQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XG4gICAgICB0YWJDb250YWluZXIueCA9IHhPZmZzZXQ7XG5cbiAgICAgIC8vIFRhYiBsYWJlbFxuICAgICAgY29uc3QgaXNBY3RpdmUgPSB0aGlzLmFjdGl2ZUtleSA9PT0gaXRlbS5rZXk7XG4gICAgICBjb25zdCBsYWJlbCA9IG5ldyBVSUxhYmVsKHtcbiAgICAgICAgdGV4dDogaXRlbS5sYWJlbCxcbiAgICAgICAgZm9udFNpemU6IDE1LFxuICAgICAgICBmb250V2VpZ2h0OiBpc0FjdGl2ZSA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICBjb2xvcjogaXNBY3RpdmUgPyB0aGlzLmFjdGl2ZVRleHRDb2xvciA6IHRoaXMudGV4dENvbG9yXG4gICAgICB9KTtcblxuICAgICAgLy8gTWVhc3VyZSBsYWJlbCB0byBkZXRlcm1pbmUgdGFiIHdpZHRoXG4gICAgICBsYWJlbC5tZWFzdXJlKCk7XG4gICAgICBsYWJlbC5sYXlvdXQodGhpcy53aWR0aCwgdGhpcy50YWJCYXJIZWlnaHQpO1xuICAgICAgY29uc3QgbGFiZWxCb3VuZHMgPSBsYWJlbC5jb250YWluZXIuZ2V0TG9jYWxCb3VuZHMoKTtcbiAgICAgIGNvbnN0IHRhYldpZHRoID0gbGFiZWxCb3VuZHMud2lkdGggKyAodGFiUGFkZGluZyAqIDIpO1xuXG4gICAgICAvLyBUYWIgYmFja2dyb3VuZFxuICAgICAgbGV0IGJnOiBQSVhJLkdyYXBoaWNzO1xuICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2NhcmQnKSB7XG4gICAgICAgIGJnID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcbiAgICAgICAgYmcucm91bmRSZWN0KDAsIDAsIHRhYldpZHRoLCB0aGlzLnRhYkJhckhlaWdodCAtIDIsIDYpO1xuICAgICAgICBiZy5maWxsKHsgY29sb3I6IGlzQWN0aXZlID8gdGhpcy5hY3RpdmVUYWJDb2xvciA6IHRoaXMuaW5hY3RpdmVUYWJDb2xvciB9KTtcbiAgICAgICAgLy8gQWRkIGJvcmRlciBmb3IgY2FyZCB0eXBlXG4gICAgICAgIGJnLnJvdW5kUmVjdCgwLCAwLCB0YWJXaWR0aCwgdGhpcy50YWJCYXJIZWlnaHQgLSAyLCA2KTtcbiAgICAgICAgYmcuc3Ryb2tlKHsgY29sb3I6IGlzQWN0aXZlID8gdGhpcy5hY3RpdmVUYWJDb2xvciA6IDB4NGQ0ZDY0LCB3aWR0aDogMiB9KTtcbiAgICAgICAgdGFiQ29udGFpbmVyLmFkZENoaWxkKGJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBsaW5lIHR5cGUsIE5PIGJhY2tncm91bmQgb3IgYm9yZGVyIC0ganVzdCB0cmFuc3BhcmVudCBoaXQgYXJlYVxuICAgICAgICBiZyA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XG4gICAgICAgIGJnLnJlY3QoMCwgMCwgdGFiV2lkdGgsIHRoaXMudGFiQmFySGVpZ2h0KTtcbiAgICAgICAgYmcuZmlsbCh7IGNvbG9yOiAweDAwMDAwMCwgYWxwaGE6IDAgfSk7XG4gICAgICAgIHRhYkNvbnRhaW5lci5hZGRDaGlsZChiZyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBvc2l0aW9uIGxhYmVsIGNlbnRlcmVkIGluIHRhYlxuICAgICAgbGFiZWwuY29udGFpbmVyLnggPSB0YWJQYWRkaW5nO1xuICAgICAgbGFiZWwuY29udGFpbmVyLnkgPSAodGhpcy50YWJCYXJIZWlnaHQgLSBsYWJlbEJvdW5kcy5oZWlnaHQpIC8gMjtcbiAgICAgIHRhYkNvbnRhaW5lci5hZGRDaGlsZChsYWJlbC5jb250YWluZXIpO1xuXG4gICAgICAvLyBNYWtlIHRhYiBpbnRlcmFjdGl2ZVxuICAgICAgdGFiQ29udGFpbmVyLmV2ZW50TW9kZSA9ICdzdGF0aWMnO1xuICAgICAgdGFiQ29udGFpbmVyLmN1cnNvciA9ICdwb2ludGVyJztcblxuICAgICAgY29uc3QgdGFiS2V5ID0gaXRlbS5rZXk7XG4gICAgICB0YWJDb250YWluZXIub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnNldEFjdGl2ZUtleSh0YWJLZXkpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEhvdmVyIGVmZmVjdFxuICAgICAgdGFiQ29udGFpbmVyLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlS2V5ICE9PSB0YWJLZXkpIHtcbiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnY2FyZCcpIHtcbiAgICAgICAgICAgIGJnLmNsZWFyKCk7XG4gICAgICAgICAgICBiZy5yb3VuZFJlY3QoMCwgMCwgdGFiV2lkdGgsIHRoaXMudGFiQmFySGVpZ2h0IC0gMiwgNik7XG4gICAgICAgICAgICBiZy5maWxsKHsgY29sb3I6IHRoaXMuYWN0aXZlVGFiQ29sb3IsIGFscGhhOiAwLjUgfSk7XG4gICAgICAgICAgICBiZy5yb3VuZFJlY3QoMCwgMCwgdGFiV2lkdGgsIHRoaXMudGFiQmFySGVpZ2h0IC0gMiwgNik7XG4gICAgICAgICAgICBiZy5zdHJva2UoeyBjb2xvcjogdGhpcy5hY3RpdmVUYWJDb2xvciwgd2lkdGg6IDIgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBsaW5lIHR5cGUsIGp1c3QgY2hhbmdlIHRleHQgY29sb3Igb24gaG92ZXJcbiAgICAgICAgICAgIGxhYmVsLnNldENvbG9yKHRoaXMuYWN0aXZlVGV4dENvbG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0YWJDb250YWluZXIub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUtleSAhPT0gdGFiS2V5KSB7XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2NhcmQnKSB7XG4gICAgICAgICAgICBiZy5jbGVhcigpO1xuICAgICAgICAgICAgYmcucm91bmRSZWN0KDAsIDAsIHRhYldpZHRoLCB0aGlzLnRhYkJhckhlaWdodCAtIDIsIDYpO1xuICAgICAgICAgICAgYmcuZmlsbCh7IGNvbG9yOiB0aGlzLmluYWN0aXZlVGFiQ29sb3IgfSk7XG4gICAgICAgICAgICBiZy5yb3VuZFJlY3QoMCwgMCwgdGFiV2lkdGgsIHRoaXMudGFiQmFySGVpZ2h0IC0gMiwgNik7XG4gICAgICAgICAgICBiZy5zdHJva2UoeyBjb2xvcjogMHg0ZDRkNjQsIHdpZHRoOiAyIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZXN0b3JlIG11dGVkIHRleHQgY29sb3JcbiAgICAgICAgICAgIGxhYmVsLnNldENvbG9yKHRoaXMudGV4dENvbG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnRhYkJhci5hZGRDaGlsZCh0YWJDb250YWluZXIpO1xuICAgICAgdGhpcy50YWJCdXR0b25zLnNldChpdGVtLmtleSwgeyBjb250YWluZXI6IHRhYkNvbnRhaW5lciwgbGFiZWwsIGJnIH0pO1xuXG4gICAgICB4T2Zmc2V0ICs9IHRhYldpZHRoICsgdGFiR2FwO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhY3RpdmUgaW5kaWNhdG9yIGZvciBsaW5lIHR5cGVcbiAgICBpZiAodGhpcy50eXBlID09PSAnbGluZScpIHtcbiAgICAgIHRoaXMuYWN0aXZlSW5kaWNhdG9yID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcbiAgICAgIHRoaXMudGFiQmFyLmFkZENoaWxkKHRoaXMuYWN0aXZlSW5kaWNhdG9yKTtcbiAgICAgIHRoaXMudXBkYXRlQWN0aXZlSW5kaWNhdG9yKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVBY3RpdmVJbmRpY2F0b3IoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmFjdGl2ZUluZGljYXRvciB8fCB0aGlzLnR5cGUgIT09ICdsaW5lJykgcmV0dXJuO1xuXG4gICAgdGhpcy5hY3RpdmVJbmRpY2F0b3IuY2xlYXIoKTtcblxuICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRoaXMudGFiQnV0dG9ucy5nZXQodGhpcy5hY3RpdmVLZXkpO1xuICAgIGlmICghYWN0aXZlVGFiKSByZXR1cm47XG5cbiAgICBjb25zdCB0YWJYID0gYWN0aXZlVGFiLmNvbnRhaW5lci54O1xuICAgIGNvbnN0IHRhYkJvdW5kcyA9IGFjdGl2ZVRhYi5iZy5nZXRMb2NhbEJvdW5kcygpO1xuICAgIGNvbnN0IHRhYldpZHRoID0gdGFiQm91bmRzLndpZHRoO1xuICAgIGNvbnN0IGluZGljYXRvckhlaWdodCA9IDM7XG4gICAgY29uc3QgaW5kaWNhdG9yWSA9IHRoaXMudGFiQmFySGVpZ2h0IC0gaW5kaWNhdG9ySGVpZ2h0O1xuXG4gICAgLy8gRHJhdyBpbmRpY2F0b3IgYXQgdGhlIHZlcnkgYm90dG9tLCBzcGFubmluZyBtb3N0IG9mIHRoZSB0YWIgd2lkdGhcbiAgICB0aGlzLmFjdGl2ZUluZGljYXRvci5yb3VuZFJlY3QodGFiWCArIDgsIGluZGljYXRvclksIHRhYldpZHRoIC0gMTYsIGluZGljYXRvckhlaWdodCwgMS41KTtcbiAgICB0aGlzLmFjdGl2ZUluZGljYXRvci5maWxsKHsgY29sb3I6IHRoaXMuYWN0aXZlVGFiQ29sb3IgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dBY3RpdmVUYWIoKTogdm9pZCB7XG4gICAgLy8gQ2xlYXIgY29udGVudCBhcmVhXG4gICAgdGhpcy5jb250ZW50QXJlYS5yZW1vdmVDaGlsZHJlbigpO1xuXG4gICAgLy8gRmluZCBhY3RpdmUgaXRlbVxuICAgIGNvbnN0IGFjdGl2ZUl0ZW0gPSB0aGlzLml0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmtleSA9PT0gdGhpcy5hY3RpdmVLZXkpO1xuICAgIGlmICghYWN0aXZlSXRlbSkgcmV0dXJuO1xuXG4gICAgLy8gQWRkIGNvbnRlbnRcbiAgICBjb25zdCBjb250ZW50SGVpZ2h0ID0gdGhpcy5oZWlnaHQgLSB0aGlzLnRhYkJhckhlaWdodDtcbiAgICBhY3RpdmVJdGVtLmNvbnRlbnQubGF5b3V0KHRoaXMud2lkdGgsIGNvbnRlbnRIZWlnaHQpO1xuICAgIHRoaXMuY29udGVudEFyZWEuYWRkQ2hpbGQoYWN0aXZlSXRlbS5jb250ZW50LmNvbnRhaW5lcik7XG5cbiAgICAvLyBVcGRhdGUgdGFiIHN0eWxlc1xuICAgIHRoaXMudGFiQnV0dG9ucy5mb3JFYWNoKCh0YWIsIGtleSkgPT4ge1xuICAgICAgY29uc3QgaXNBY3RpdmUgPSBrZXkgPT09IHRoaXMuYWN0aXZlS2V5O1xuICAgICAgY29uc3QgdGFiQm91bmRzID0gdGFiLmJnLmdldExvY2FsQm91bmRzKCk7XG5cbiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdjYXJkJykge1xuICAgICAgICB0YWIuYmcuY2xlYXIoKTtcbiAgICAgICAgdGFiLmJnLnJvdW5kUmVjdCgwLCAwLCB0YWJCb3VuZHMud2lkdGgsIHRoaXMudGFiQmFySGVpZ2h0IC0gMiwgNik7XG4gICAgICAgIHRhYi5iZy5maWxsKHsgY29sb3I6IGlzQWN0aXZlID8gdGhpcy5hY3RpdmVUYWJDb2xvciA6IHRoaXMuaW5hY3RpdmVUYWJDb2xvciB9KTtcbiAgICAgICAgdGFiLmJnLnJvdW5kUmVjdCgwLCAwLCB0YWJCb3VuZHMud2lkdGgsIHRoaXMudGFiQmFySGVpZ2h0IC0gMiwgNik7XG4gICAgICAgIHRhYi5iZy5zdHJva2UoeyBjb2xvcjogaXNBY3RpdmUgPyB0aGlzLmFjdGl2ZVRhYkNvbG9yIDogMHg0ZDRkNjQsIHdpZHRoOiAyIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIGxpbmUgdHlwZSwga2VlcCB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kXG4gICAgICAgIHRhYi5iZy5jbGVhcigpO1xuICAgICAgICB0YWIuYmcucmVjdCgwLCAwLCB0YWJCb3VuZHMud2lkdGgsIHRoaXMudGFiQmFySGVpZ2h0KTtcbiAgICAgICAgdGFiLmJnLmZpbGwoeyBjb2xvcjogMHgwMDAwMDAsIGFscGhhOiAwIH0pO1xuICAgICAgfVxuXG4gICAgICB0YWIubGFiZWwuc2V0Q29sb3IoaXNBY3RpdmUgPyB0aGlzLmFjdGl2ZVRleHRDb2xvciA6IHRoaXMudGV4dENvbG9yKTtcbiAgICAgIHRhYi5sYWJlbC5jb250YWluZXIuYWxwaGEgPSAxO1xuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIGFjdGl2ZSBpbmRpY2F0b3JcbiAgICBpZiAodGhpcy50eXBlID09PSAnbGluZScpIHtcbiAgICAgIHRoaXMudXBkYXRlQWN0aXZlSW5kaWNhdG9yKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldEFjdGl2ZUtleShrZXk6IHN0cmluZywgdXBkYXRlSGFzaDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hY3RpdmVLZXkgPT09IGtleSkgcmV0dXJuO1xuXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IGl0ZW0ua2V5ID09PSBrZXkpO1xuICAgIGlmICghaXRlbSB8fCBpdGVtLmRpc2FibGVkKSByZXR1cm47XG5cbiAgICB0aGlzLmFjdGl2ZUtleSA9IGtleTtcbiAgICB0aGlzLnNob3dBY3RpdmVUYWIoKTtcblxuICAgIC8vIFVwZGF0ZSBVUkwgaGFzaCBpZiBlbmFibGVkXG4gICAgaWYgKHVwZGF0ZUhhc2ggJiYgdGhpcy5oYXNoUHJlZml4KSB7XG4gICAgICB0aGlzLnVwZGF0ZUhhc2goa2V5KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vbkNoYW5nZSkge1xuICAgICAgdGhpcy5vbkNoYW5nZShrZXkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRBY3RpdmVLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVLZXk7XG4gIH1cblxuICBwdWJsaWMgc2V0SXRlbXMoaXRlbXM6IFRhYkl0ZW1bXSk6IHZvaWQge1xuICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcblxuICAgIC8vIElmIGFjdGl2ZSBrZXkgbm8gbG9uZ2VyIGV4aXN0cywgc3dpdGNoIHRvIGZpcnN0IHRhYlxuICAgIGlmICghdGhpcy5pdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5rZXkgPT09IHRoaXMuYWN0aXZlS2V5KSkge1xuICAgICAgdGhpcy5hY3RpdmVLZXkgPSB0aGlzLml0ZW1zLmxlbmd0aCA+IDAgPyB0aGlzLml0ZW1zWzBdLmtleSA6ICcnO1xuICAgIH1cblxuICAgIHRoaXMuYnVpbGRUYWJzKCk7XG4gICAgdGhpcy5zaG93QWN0aXZlVGFiKCk7XG4gIH1cblxuICBtZWFzdXJlKCk6IE1lYXN1cmVkU2l6ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodFxuICAgIH07XG4gIH1cblxuICBsYXlvdXQod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAvLyBSZWJ1aWxkIHRhYnMgd2l0aCBuZXcgZGltZW5zaW9uc1xuICAgIHRoaXMuYnVpbGRUYWJzKCk7XG4gICAgdGhpcy5zaG93QWN0aXZlVGFiKCk7XG4gIH1cblxuICByZW5kZXIoKTogdm9pZCB7XG4gICAgLy8gUmVuZGVyaW5nIGlzIGhhbmRsZWQgYnkgY2hpbGQgY29tcG9uZW50c1xuICB9XG59XG4iLCJpbXBvcnQgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IFVJQ29tcG9uZW50IH0gZnJvbSAnLi4vY29yZS91aS1jb21wb25lbnQnO1xuaW1wb3J0IHsgQm94TW9kZWwsIE1lYXN1cmVkU2l6ZSB9IGZyb20gJy4uL2NvcmUvYm94LW1vZGVsJztcbmltcG9ydCB7IFVJUGFuZWwgfSBmcm9tICcuL3VpLXBhbmVsJztcbmltcG9ydCB7IEVkZ2VJbnNldHMgfSBmcm9tICcuLi9jb3JlL2VkZ2UtaW5zZXRzJztcbmltcG9ydCB7IFVJRm9jdXNNYW5hZ2VyIH0gZnJvbSAnLi4vY29yZS91aS1mb2N1cy1tYW5hZ2VyJztcblxuLyoqXG4gKiBQcm9wcyBmb3IgY29uZmlndXJpbmcgYSBVSVRleHRJbnB1dFxuICpcbiAqIEBjYXRlZ29yeSBVSVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVJVGV4dElucHV0UHJvcHMge1xuICAvKiogQ3VycmVudCB2YWx1ZSAoY29udHJvbGxlZCkgKi9cbiAgdmFsdWU/OiBzdHJpbmc7XG4gIC8qKiBEZWZhdWx0IHZhbHVlICh1bmNvbnRyb2xsZWQpICovXG4gIGRlZmF1bHRWYWx1ZT86IHN0cmluZztcbiAgLyoqIENoYW5nZSBjYWxsYmFjayAqL1xuICBvbkNoYW5nZT86ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICAvKiogUGxhY2Vob2xkZXIgdGV4dCB3aGVuIGVtcHR5ICovXG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAvKiogTWF4aW11bSBjaGFyYWN0ZXIgbGVuZ3RoICovXG4gIG1heExlbmd0aD86IG51bWJlcjtcbiAgLyoqIFdpZHRoIG9mIHRoZSBpbnB1dCAqL1xuICB3aWR0aD86IG51bWJlcjtcbiAgLyoqIEhlaWdodCBvZiB0aGUgaW5wdXQgKi9cbiAgaGVpZ2h0PzogbnVtYmVyO1xuICAvKiogV2hldGhlciB0aGUgaW5wdXQgaXMgZGlzYWJsZWQgKi9cbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAvKiogQmFja2dyb3VuZCBjb2xvciAqL1xuICBiYWNrZ3JvdW5kQ29sb3I/OiBudW1iZXI7XG4gIC8qKiBUZXh0IGNvbG9yICovXG4gIHRleHRDb2xvcj86IG51bWJlcjtcbiAgLyoqIFBsYWNlaG9sZGVyIHRleHQgY29sb3IgKi9cbiAgcGxhY2Vob2xkZXJDb2xvcj86IG51bWJlcjtcbiAgLyoqIEJvcmRlciByYWRpdXMgKi9cbiAgYm9yZGVyUmFkaXVzPzogbnVtYmVyO1xuICAvKiogRm9udCBzaXplICovXG4gIGZvbnRTaXplPzogbnVtYmVyO1xuICAvKiogSW5wdXQgdHlwZSBmb3IgdmFsaWRhdGlvbiAqL1xuICB0eXBlPzogJ3RleHQnIHwgJ251bWJlcic7XG59XG5cbi8qKlxuICogQSB0ZXh0IGlucHV0IGNvbXBvbmVudCBmb2xsb3dpbmcgQW50IERlc2lnbiBwYXR0ZXJuc1xuICogU3VwcG9ydHMgYm90aCBjb250cm9sbGVkIGFuZCB1bmNvbnRyb2xsZWQgbW9kZXNcbiAqXG4gKiBAY2F0ZWdvcnkgVUlcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgaW5wdXQgPSBuZXcgVUlUZXh0SW5wdXQoe1xuICogICBwbGFjZWhvbGRlcjogJ0VudGVyIHlvdXIgbmFtZS4uLicsXG4gKiAgIG9uQ2hhbmdlOiAodmFsdWUpID0+IGNvbnNvbGUubG9nKCdJbnB1dDonLCB2YWx1ZSksXG4gKiAgIG1heExlbmd0aDogNTBcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBVSVRleHRJbnB1dCBleHRlbmRzIFVJQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBwcm9wczogUmVxdWlyZWQ8T21pdDxVSVRleHRJbnB1dFByb3BzLCAnb25DaGFuZ2UnIHwgJ3ZhbHVlJyB8ICdkZWZhdWx0VmFsdWUnPj47XG4gIHByaXZhdGUgb25DaGFuZ2U/OiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcblxuICBwcml2YXRlIGN1cnJlbnRWYWx1ZTogc3RyaW5nO1xuICBwcml2YXRlIGJhY2tncm91bmQ6IFVJUGFuZWw7XG4gIHByaXZhdGUgdGV4dERpc3BsYXk6IFBJWEkuVGV4dDtcbiAgcHJpdmF0ZSBjdXJzb3I6IFBJWEkuR3JhcGhpY3M7XG4gIHByaXZhdGUgY3Vyc29yUG9zaXRpb246IG51bWJlciA9IDA7XG4gIHByaXZhdGUgY3Vyc29yQmxpbmtJbnRlcnZhbD86IG51bWJlcjtcbiAgcHJpdmF0ZSBjdXJzb3JWaXNpYmxlOiBib29sZWFuID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVUlUZXh0SW5wdXRQcm9wcywgYm94TW9kZWw/OiBQYXJ0aWFsPEJveE1vZGVsPikge1xuICAgIHN1cGVyKGJveE1vZGVsKTtcblxuICAgIHRoaXMucHJvcHMgPSB7XG4gICAgICBwbGFjZWhvbGRlcjogcHJvcHMucGxhY2Vob2xkZXIgPz8gJycsXG4gICAgICBtYXhMZW5ndGg6IHByb3BzLm1heExlbmd0aCA/PyAxMDAsXG4gICAgICB3aWR0aDogcHJvcHMud2lkdGggPz8gMjAwLFxuICAgICAgaGVpZ2h0OiBwcm9wcy5oZWlnaHQgPz8gMzYsXG4gICAgICBkaXNhYmxlZDogcHJvcHMuZGlzYWJsZWQgPz8gZmFsc2UsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHByb3BzLmJhY2tncm91bmRDb2xvciA/PyAweGZmZmZmZixcbiAgICAgIHRleHRDb2xvcjogcHJvcHMudGV4dENvbG9yID8/IDB4MDAwMDAwLFxuICAgICAgcGxhY2Vob2xkZXJDb2xvcjogcHJvcHMucGxhY2Vob2xkZXJDb2xvciA/PyAweDk5OTk5OSxcbiAgICAgIGJvcmRlclJhZGl1czogcHJvcHMuYm9yZGVyUmFkaXVzID8/IDQsXG4gICAgICBmb250U2l6ZTogcHJvcHMuZm9udFNpemUgPz8gMTQsXG4gICAgICB0eXBlOiBwcm9wcy50eXBlID8/ICd0ZXh0J1xuICAgIH07XG5cbiAgICB0aGlzLm9uQ2hhbmdlID0gcHJvcHMub25DaGFuZ2U7XG4gICAgdGhpcy5jdXJyZW50VmFsdWUgPSBwcm9wcy52YWx1ZSA/PyBwcm9wcy5kZWZhdWx0VmFsdWUgPz8gJyc7XG5cbiAgICAvLyBTZXQgYm94IG1vZGVsIGRpbWVuc2lvbnNcbiAgICB0aGlzLmJveE1vZGVsLndpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcbiAgICB0aGlzLmJveE1vZGVsLmhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuXG4gICAgLy8gQ3JlYXRlIGJhY2tncm91bmRcbiAgICB0aGlzLmJhY2tncm91bmQgPSBuZXcgVUlQYW5lbCh7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMucHJvcHMuYmFja2dyb3VuZENvbG9yLFxuICAgICAgd2lkdGg6IHRoaXMucHJvcHMud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMucHJvcHMuaGVpZ2h0LFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGlzLnByb3BzLmJvcmRlclJhZGl1c1xuICAgIH0pO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuYmFja2dyb3VuZC5jb250YWluZXIpO1xuXG4gICAgLy8gQ3JlYXRlIHRleHQgZGlzcGxheVxuICAgIHRoaXMudGV4dERpc3BsYXkgPSBuZXcgUElYSS5UZXh0KHtcbiAgICAgIHRleHQ6IHRoaXMuZ2V0RGlzcGxheVRleHQoKSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXG4gICAgICAgIGZvbnRTaXplOiB0aGlzLnByb3BzLmZvbnRTaXplLFxuICAgICAgICBmaWxsOiB0aGlzLmN1cnJlbnRWYWx1ZSA/IHRoaXMucHJvcHMudGV4dENvbG9yIDogdGhpcy5wcm9wcy5wbGFjZWhvbGRlckNvbG9yLFxuICAgICAgICBhbGlnbjogJ2xlZnQnXG4gICAgICB9LFxuICAgICAgcmVzb2x1dGlvbjogd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMlxuICAgIH0pO1xuICAgIHRoaXMudGV4dERpc3BsYXkucG9zaXRpb24uc2V0KDEyLCAodGhpcy5wcm9wcy5oZWlnaHQgLSB0aGlzLnByb3BzLmZvbnRTaXplKSAvIDIpO1xuICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMudGV4dERpc3BsYXkpO1xuXG4gICAgLy8gQ3JlYXRlIGN1cnNvclxuICAgIHRoaXMuY3Vyc29yID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcbiAgICB0aGlzLmN1cnNvci52aXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5jdXJzb3IpO1xuXG4gICAgLy8gU2V0dXAgaW50ZXJhY3Rpdml0eVxuICAgIHRoaXMuc2V0dXBJbnRlcmFjdGl2aXR5KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZGlzcGxheSB0ZXh0ICh2YWx1ZSBvciBwbGFjZWhvbGRlcilcbiAgICovXG4gIHByaXZhdGUgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5jdXJyZW50VmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHJvcHMucGxhY2Vob2xkZXI7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCBtb3VzZS9rZXlib2FyZCBldmVudCBoYW5kbGVyc1xuICAgKi9cbiAgcHJpdmF0ZSBzZXR1cEludGVyYWN0aXZpdHkoKTogdm9pZCB7XG4gICAgdGhpcy5jb250YWluZXIuZXZlbnRNb2RlID0gJ3N0YXRpYyc7XG4gICAgdGhpcy5jb250YWluZXIuY3Vyc29yID0gJ3RleHQnO1xuXG4gICAgLy8gQ2xpY2sgdG8gZm9jdXNcbiAgICB0aGlzLmNvbnRhaW5lci5vbigncG9pbnRlcmRvd24nLCB0aGlzLmhhbmRsZVBvaW50ZXJEb3duLmJpbmQodGhpcykpO1xuXG4gICAgLy8gTGlzdGVuIGZvciBnbG9iYWwgY2xpY2sgdG8gYmx1clxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVQb2ludGVyRG93bihlOiBQSVhJLkZlZGVyYXRlZFBvaW50ZXJFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVkKSByZXR1cm47XG5cbiAgICAvLyBSZXF1ZXN0IGZvY3VzIHRocm91Z2ggdGhlIGZvY3VzIG1hbmFnZXJcbiAgICBjb25zdCBmb2N1c01hbmFnZXIgPSBVSUZvY3VzTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgIGlmIChmb2N1c01hbmFnZXIpIHtcbiAgICAgIGZvY3VzTWFuYWdlci5yZXF1ZXN0Rm9jdXModGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIGlmIG5vIGZvY3VzIG1hbmFnZXJcbiAgICAgIHRoaXMub25Gb2N1cygpO1xuICAgIH1cbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGlucHV0IHJlY2VpdmVzIGZvY3VzIChvdmVycmlkZSBmcm9tIGJhc2UgY2xhc3MpXG4gICAqL1xuICBvdmVycmlkZSBvbkZvY3VzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmZvY3VzZWQpIHJldHVybjtcblxuICAgIHN1cGVyLm9uRm9jdXMoKTtcbiAgICB0aGlzLmN1cnNvclBvc2l0aW9uID0gdGhpcy5jdXJyZW50VmFsdWUubGVuZ3RoO1xuICAgIHRoaXMuY3Vyc29yLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMudXBkYXRlQ3Vyc29yKCk7XG4gICAgdGhpcy5zdGFydEN1cnNvckJsaW5rKCk7XG5cbiAgICAvLyBVcGRhdGUgYmFja2dyb3VuZCB0byBzaG93IGZvY3VzIHN0YXRlXG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gbmV3IFVJUGFuZWwoe1xuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmxpZ2h0ZW5Db2xvcih0aGlzLnByb3BzLmJhY2tncm91bmRDb2xvciwgMC45NSksXG4gICAgICB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoaXMucHJvcHMuYm9yZGVyUmFkaXVzXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gaW5wdXQgbG9zZXMgZm9jdXMgKG92ZXJyaWRlIGZyb20gYmFzZSBjbGFzcylcbiAgICovXG4gIG92ZXJyaWRlIG9uQmx1cigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZm9jdXNlZCkgcmV0dXJuO1xuXG4gICAgc3VwZXIub25CbHVyKCk7XG4gICAgdGhpcy5jdXJzb3IudmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuc3RvcEN1cnNvckJsaW5rKCk7XG5cbiAgICAvLyBSZXN0b3JlIG5vcm1hbCBiYWNrZ3JvdW5kXG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gbmV3IFVJUGFuZWwoe1xuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLnByb3BzLmJhY2tncm91bmRDb2xvcixcbiAgICAgIHdpZHRoOiB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgIGJvcmRlclJhZGl1czogdGhpcy5wcm9wcy5ib3JkZXJSYWRpdXNcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlS2V5RG93bihlOiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmZvY3VzZWQgfHwgdGhpcy5wcm9wcy5kaXNhYmxlZCkgcmV0dXJuO1xuXG4gICAgLy8gU3RvcCBldmVudCBmcm9tIHByb3BhZ2F0aW5nXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICBjb25zdCBrZXkgPSBlLmtleTtcblxuICAgIGlmIChrZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIHRoaXMub25CbHVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMub25CbHVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ0JhY2tzcGFjZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvclBvc2l0aW9uID4gMCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUuc3Vic3RyaW5nKDAsIHRoaXMuY3Vyc29yUG9zaXRpb24gLSAxKSArXG4gICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUuc3Vic3RyaW5nKHRoaXMuY3Vyc29yUG9zaXRpb24pO1xuICAgICAgICB0aGlzLmN1cnNvclBvc2l0aW9uLS07XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdEZWxldGUnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3JQb3NpdGlvbiA8IHRoaXMuY3VycmVudFZhbHVlLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUuc3Vic3RyaW5nKDAsIHRoaXMuY3Vyc29yUG9zaXRpb24pICtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZS5zdWJzdHJpbmcodGhpcy5jdXJzb3JQb3NpdGlvbiArIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZVRleHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yUG9zaXRpb24gPiAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yUG9zaXRpb24tLTtcbiAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvclBvc2l0aW9uIDwgdGhpcy5jdXJyZW50VmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yUG9zaXRpb24rKztcbiAgICAgICAgdGhpcy51cGRhdGVDdXJzb3IoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnSG9tZScpIHtcbiAgICAgIHRoaXMuY3Vyc29yUG9zaXRpb24gPSAwO1xuICAgICAgdGhpcy51cGRhdGVDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnRW5kJykge1xuICAgICAgdGhpcy5jdXJzb3JQb3NpdGlvbiA9IHRoaXMuY3VycmVudFZhbHVlLmxlbmd0aDtcbiAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNoYXJhY3RlciBpbnB1dFxuICAgIGlmIChrZXkubGVuZ3RoID09PSAxICYmICFlLmN0cmxLZXkgJiYgIWUubWV0YUtleSkge1xuICAgICAgLy8gVHlwZSB2YWxpZGF0aW9uXG4gICAgICBpZiAodGhpcy5wcm9wcy50eXBlID09PSAnbnVtYmVyJyAmJiAhL1swLTkuLV0vLnRlc3Qoa2V5KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIG1heCBsZW5ndGhcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRWYWx1ZS5sZW5ndGggPj0gdGhpcy5wcm9wcy5tYXhMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBJbnNlcnQgY2hhcmFjdGVyIGF0IGN1cnNvciBwb3NpdGlvblxuICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPVxuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZS5zdWJzdHJpbmcoMCwgdGhpcy5jdXJzb3JQb3NpdGlvbikgK1xuICAgICAgICBrZXkgK1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZS5zdWJzdHJpbmcodGhpcy5jdXJzb3JQb3NpdGlvbik7XG4gICAgICB0aGlzLmN1cnNvclBvc2l0aW9uKys7XG4gICAgICB0aGlzLnVwZGF0ZVRleHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgdGV4dCBkaXNwbGF5IGFuZCB0cmlnZ2VycyBvbkNoYW5nZVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVUZXh0KCk6IHZvaWQge1xuICAgIHRoaXMudGV4dERpc3BsYXkudGV4dCA9IHRoaXMuZ2V0RGlzcGxheVRleHQoKTtcbiAgICB0aGlzLnRleHREaXNwbGF5LnN0eWxlLmZpbGwgPSB0aGlzLmN1cnJlbnRWYWx1ZSA/IHRoaXMucHJvcHMudGV4dENvbG9yIDogdGhpcy5wcm9wcy5wbGFjZWhvbGRlckNvbG9yO1xuICAgIHRoaXMudXBkYXRlQ3Vyc29yKCk7XG4gICAgdGhpcy5vbkNoYW5nZT8uKHRoaXMuY3VycmVudFZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGN1cnNvciBwb3NpdGlvbiB2aXN1YWxseVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDdXJzb3IoKTogdm9pZCB7XG4gICAgLy8gTWVhc3VyZSB0ZXh0IHVwIHRvIGN1cnNvciBwb3NpdGlvbiBieSBjcmVhdGluZyBhIHRlbXBvcmFyeSB0ZXh0IG9iamVjdFxuICAgIGNvbnN0IHRleHRVcFRvQ3Vyc29yID0gdGhpcy5jdXJyZW50VmFsdWUuc3Vic3RyaW5nKDAsIHRoaXMuY3Vyc29yUG9zaXRpb24pO1xuICAgIGNvbnN0IHRlbXBUZXh0ID0gbmV3IFBJWEkuVGV4dCh7XG4gICAgICB0ZXh0OiB0ZXh0VXBUb0N1cnNvcixcbiAgICAgIHN0eWxlOiB0aGlzLnRleHREaXNwbGF5LnN0eWxlXG4gICAgfSk7XG5cbiAgICBjb25zdCBjdXJzb3JYID0gMTIgKyB0ZW1wVGV4dC53aWR0aDtcbiAgICBjb25zdCBjdXJzb3JZID0gKHRoaXMucHJvcHMuaGVpZ2h0IC0gdGhpcy5wcm9wcy5mb250U2l6ZSkgLyAyO1xuXG4gICAgdGhpcy5jdXJzb3IuY2xlYXIoKTtcbiAgICB0aGlzLmN1cnNvci5yZWN0KGN1cnNvclgsIGN1cnNvclksIDEsIHRoaXMucHJvcHMuZm9udFNpemUpO1xuICAgIHRoaXMuY3Vyc29yLmZpbGwoeyBjb2xvcjogdGhpcy5wcm9wcy50ZXh0Q29sb3IgfSk7XG5cbiAgICAvLyBDbGVhbiB1cCB0ZW1wIHRleHRcbiAgICB0ZW1wVGV4dC5kZXN0cm95KCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIGN1cnNvciBibGlua2luZyBhbmltYXRpb25cbiAgICovXG4gIHByaXZhdGUgc3RhcnRDdXJzb3JCbGluaygpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3BDdXJzb3JCbGluaygpO1xuICAgIHRoaXMuY3Vyc29yVmlzaWJsZSA9IHRydWU7XG5cbiAgICB0aGlzLmN1cnNvckJsaW5rSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5jdXJzb3JWaXNpYmxlID0gIXRoaXMuY3Vyc29yVmlzaWJsZTtcbiAgICAgIHRoaXMuY3Vyc29yLnZpc2libGUgPSB0aGlzLmN1cnNvclZpc2libGU7XG4gICAgfSwgNTMwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyBjdXJzb3IgYmxpbmtpbmcgYW5pbWF0aW9uXG4gICAqL1xuICBwcml2YXRlIHN0b3BDdXJzb3JCbGluaygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jdXJzb3JCbGlua0ludGVydmFsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmN1cnNvckJsaW5rSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5jdXJzb3JCbGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMaWdodGVucyBhIGNvbG9yIGJ5IGEgZmFjdG9yXG4gICAqL1xuICBwcml2YXRlIGxpZ2h0ZW5Db2xvcihjb2xvcjogbnVtYmVyLCBmYWN0b3I6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgciA9IE1hdGgubWluKDI1NSwgKChjb2xvciA+PiAxNikgJiAweGZmKSAvIGZhY3Rvcik7XG4gICAgY29uc3QgZyA9IE1hdGgubWluKDI1NSwgKChjb2xvciA+PiA4KSAmIDB4ZmYpIC8gZmFjdG9yKTtcbiAgICBjb25zdCBiID0gTWF0aC5taW4oMjU1LCAoY29sb3IgJiAweGZmKSAvIGZhY3Rvcik7XG4gICAgcmV0dXJuICgociA8PCAxNikgfCAoZyA8PCA4KSB8IGIpID4+PiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lYXN1cmVzIHRoZSBzaXplIG5lZWRlZCBmb3IgdGhpcyBpbnB1dFxuICAgKi9cbiAgbWVhc3VyZSgpOiBNZWFzdXJlZFNpemUge1xuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGxheW91dCBmb3IgdGhpcyBpbnB1dFxuICAgKi9cbiAgbGF5b3V0KGF2YWlsYWJsZVdpZHRoOiBudW1iZXIsIGF2YWlsYWJsZUhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbWVhc3VyZWQgPSB0aGlzLm1lYXN1cmUoKTtcblxuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQud2lkdGggPSBtZWFzdXJlZC53aWR0aDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmhlaWdodCA9IG1lYXN1cmVkLmhlaWdodDtcblxuICAgIC8vIExheW91dCBiYWNrZ3JvdW5kXG4gICAgdGhpcy5iYWNrZ3JvdW5kLmxheW91dChtZWFzdXJlZC53aWR0aCwgbWVhc3VyZWQuaGVpZ2h0KTtcblxuICAgIHRoaXMubGF5b3V0RGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgdGhlIGlucHV0XG4gICAqL1xuICBwcm90ZWN0ZWQgcmVuZGVyKCk6IHZvaWQge1xuICAgIC8vIFJlbmRlcmluZyBoYW5kbGVkIGJ5IGJhY2tncm91bmQsIHRleHQsIGFuZCBjdXJzb3JcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBwcm9ncmFtbWF0aWNhbGx5XG4gICAqL1xuICBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLmN1cnNvclBvc2l0aW9uID0gdmFsdWUubGVuZ3RoO1xuICAgIHRoaXMudXBkYXRlVGV4dCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgdmFsdWVcbiAgICovXG4gIGdldFZhbHVlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFudXAgd2hlbiBkZXN0cm95aW5nXG4gICAqL1xuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuc3RvcEN1cnNvckJsaW5rKCk7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICB9XG59XG4iLCJpbXBvcnQgUElYSSBmcm9tICdwaXhpLmpzJztcbmltcG9ydCB7IFVJQ29tcG9uZW50IH0gZnJvbSAnLi4vY29yZS91aS1jb21wb25lbnQnO1xuaW1wb3J0IHsgQm94TW9kZWwsIE1lYXN1cmVkU2l6ZSB9IGZyb20gJy4uL2NvcmUvYm94LW1vZGVsJztcbmltcG9ydCB7IFVJUGFuZWwgfSBmcm9tICcuL3VpLXBhbmVsJztcbmltcG9ydCB7IFVJRm9jdXNNYW5hZ2VyIH0gZnJvbSAnLi4vY29yZS91aS1mb2N1cy1tYW5hZ2VyJztcblxuLyoqXG4gKiBQcm9wcyBmb3IgY29uZmlndXJpbmcgYSBVSVRleHRBcmVhXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVUlUZXh0QXJlYVByb3BzIHtcbiAgLyoqIEN1cnJlbnQgdmFsdWUgKGNvbnRyb2xsZWQpICovXG4gIHZhbHVlPzogc3RyaW5nO1xuICAvKiogRGVmYXVsdCB2YWx1ZSAodW5jb250cm9sbGVkKSAqL1xuICBkZWZhdWx0VmFsdWU/OiBzdHJpbmc7XG4gIC8qKiBDaGFuZ2UgY2FsbGJhY2sgKi9cbiAgb25DaGFuZ2U/OiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgLyoqIFBsYWNlaG9sZGVyIHRleHQgd2hlbiBlbXB0eSAqL1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgLyoqIE1heGltdW0gY2hhcmFjdGVyIGxlbmd0aCAqL1xuICBtYXhMZW5ndGg/OiBudW1iZXI7XG4gIC8qKiBXaWR0aCBvZiB0aGUgdGV4dGFyZWEgKi9cbiAgd2lkdGg/OiBudW1iZXI7XG4gIC8qKiBIZWlnaHQgb2YgdGhlIHRleHRhcmVhICovXG4gIGhlaWdodD86IG51bWJlcjtcbiAgLyoqIFdoZXRoZXIgdGhlIHRleHRhcmVhIGlzIGRpc2FibGVkICovXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgLyoqIEJhY2tncm91bmQgY29sb3IgKi9cbiAgYmFja2dyb3VuZENvbG9yPzogbnVtYmVyO1xuICAvKiogVGV4dCBjb2xvciAqL1xuICB0ZXh0Q29sb3I/OiBudW1iZXI7XG4gIC8qKiBQbGFjZWhvbGRlciB0ZXh0IGNvbG9yICovXG4gIHBsYWNlaG9sZGVyQ29sb3I/OiBudW1iZXI7XG4gIC8qKiBCb3JkZXIgcmFkaXVzICovXG4gIGJvcmRlclJhZGl1cz86IG51bWJlcjtcbiAgLyoqIEZvbnQgc2l6ZSAqL1xuICBmb250U2l6ZT86IG51bWJlcjtcbiAgLyoqIExpbmUgaGVpZ2h0IG11bHRpcGxpZXIgKGUuZy4sIDEuNSBtZWFucyAxLjV4IHRoZSBmb250IHNpemUpICovXG4gIGxpbmVIZWlnaHQ/OiBudW1iZXI7XG4gIC8qKiBOdW1iZXIgb2YgdmlzaWJsZSByb3dzICovXG4gIHJvd3M/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQSBtdWx0aS1saW5lIHRleHQgYXJlYSBjb21wb25lbnRcbiAqIFN1cHBvcnRzIHdvcmQgd3JhcHBpbmcgYW5kIHNjcm9sbGluZ1xuICpcbiAqIEBjYXRlZ29yeSBVSVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCB0ZXh0YXJlYSA9IG5ldyBVSVRleHRBcmVhKHtcbiAqICAgcGxhY2Vob2xkZXI6ICdFbnRlciB5b3VyIG1lc3NhZ2UuLi4nLFxuICogICBvbkNoYW5nZTogKHZhbHVlKSA9PiBjb25zb2xlLmxvZygnTWVzc2FnZTonLCB2YWx1ZSksXG4gKiAgIHdpZHRoOiA0MDAsXG4gKiAgIGhlaWdodDogMTIwLFxuICogICByb3dzOiA0XG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgVUlUZXh0QXJlYSBleHRlbmRzIFVJQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBwcm9wczogUmVxdWlyZWQ8T21pdDxVSVRleHRBcmVhUHJvcHMsICdvbkNoYW5nZScgfCAndmFsdWUnIHwgJ2RlZmF1bHRWYWx1ZSc+PjtcbiAgcHJpdmF0ZSBvbkNoYW5nZT86ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuXG4gIHByaXZhdGUgY3VycmVudFZhbHVlOiBzdHJpbmc7XG4gIHByaXZhdGUgYmFja2dyb3VuZDogVUlQYW5lbDtcbiAgcHJpdmF0ZSB0ZXh0RGlzcGxheTogUElYSS5UZXh0O1xuICBwcml2YXRlIGN1cnNvcjogUElYSS5HcmFwaGljcztcbiAgcHJpdmF0ZSBjdXJzb3JQb3NpdGlvbjogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBjdXJzb3JCbGlua0ludGVydmFsPzogbnVtYmVyO1xuICBwcml2YXRlIGN1cnNvclZpc2libGU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBVSVRleHRBcmVhUHJvcHMsIGJveE1vZGVsPzogUGFydGlhbDxCb3hNb2RlbD4pIHtcbiAgICBzdXBlcihib3hNb2RlbCk7XG5cbiAgICBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gKHByb3BzLnJvd3MgPz8gNCkgKiAocHJvcHMuZm9udFNpemUgPz8gMTQpICogKHByb3BzLmxpbmVIZWlnaHQgPz8gMS41KSArIDI0O1xuXG4gICAgdGhpcy5wcm9wcyA9IHtcbiAgICAgIHBsYWNlaG9sZGVyOiBwcm9wcy5wbGFjZWhvbGRlciA/PyAnJyxcbiAgICAgIG1heExlbmd0aDogcHJvcHMubWF4TGVuZ3RoID8/IDEwMDAsXG4gICAgICB3aWR0aDogcHJvcHMud2lkdGggPz8gNDAwLFxuICAgICAgaGVpZ2h0OiBwcm9wcy5oZWlnaHQgPz8gZGVmYXVsdEhlaWdodCxcbiAgICAgIGRpc2FibGVkOiBwcm9wcy5kaXNhYmxlZCA/PyBmYWxzZSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogcHJvcHMuYmFja2dyb3VuZENvbG9yID8/IDB4ZmZmZmZmLFxuICAgICAgdGV4dENvbG9yOiBwcm9wcy50ZXh0Q29sb3IgPz8gMHgwMDAwMDAsXG4gICAgICBwbGFjZWhvbGRlckNvbG9yOiBwcm9wcy5wbGFjZWhvbGRlckNvbG9yID8/IDB4OTk5OTk5LFxuICAgICAgYm9yZGVyUmFkaXVzOiBwcm9wcy5ib3JkZXJSYWRpdXMgPz8gNCxcbiAgICAgIGZvbnRTaXplOiBwcm9wcy5mb250U2l6ZSA/PyAxNCxcbiAgICAgIGxpbmVIZWlnaHQ6IHByb3BzLmxpbmVIZWlnaHQgPz8gMS41LFxuICAgICAgcm93czogcHJvcHMucm93cyA/PyA0XG4gICAgfTtcblxuICAgIHRoaXMub25DaGFuZ2UgPSBwcm9wcy5vbkNoYW5nZTtcbiAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHByb3BzLnZhbHVlID8/IHByb3BzLmRlZmF1bHRWYWx1ZSA/PyAnJztcblxuICAgIC8vIFNldCBib3ggbW9kZWwgZGltZW5zaW9uc1xuICAgIHRoaXMuYm94TW9kZWwud2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuICAgIHRoaXMuYm94TW9kZWwuaGVpZ2h0ID0gdGhpcy5wcm9wcy5oZWlnaHQ7XG5cbiAgICAvLyBDcmVhdGUgYmFja2dyb3VuZFxuICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBVSVBhbmVsKHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5wcm9wcy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoaXMucHJvcHMuYm9yZGVyUmFkaXVzXG4gICAgfSk7XG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5iYWNrZ3JvdW5kLmNvbnRhaW5lcik7XG5cbiAgICAvLyBDcmVhdGUgdGV4dCBkaXNwbGF5IHdpdGggd29yZCB3cmFwcGluZ1xuICAgIHRoaXMudGV4dERpc3BsYXkgPSBuZXcgUElYSS5UZXh0KHtcbiAgICAgIHRleHQ6IHRoaXMuZ2V0RGlzcGxheVRleHQoKSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXG4gICAgICAgIGZvbnRTaXplOiB0aGlzLnByb3BzLmZvbnRTaXplLFxuICAgICAgICBmaWxsOiB0aGlzLmN1cnJlbnRWYWx1ZSA/IHRoaXMucHJvcHMudGV4dENvbG9yIDogdGhpcy5wcm9wcy5wbGFjZWhvbGRlckNvbG9yLFxuICAgICAgICBhbGlnbjogJ2xlZnQnLFxuICAgICAgICB3b3JkV3JhcDogdHJ1ZSxcbiAgICAgICAgd29yZFdyYXBXaWR0aDogdGhpcy5wcm9wcy53aWR0aCAtIDI0LFxuICAgICAgICBsaW5lSGVpZ2h0OiB0aGlzLnByb3BzLmZvbnRTaXplICogdGhpcy5wcm9wcy5saW5lSGVpZ2h0XG4gICAgICB9LFxuICAgICAgcmVzb2x1dGlvbjogd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMlxuICAgIH0pO1xuICAgIHRoaXMudGV4dERpc3BsYXkucG9zaXRpb24uc2V0KDEyLCAxMik7XG4gICAgdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy50ZXh0RGlzcGxheSk7XG5cbiAgICAvLyBDcmVhdGUgY3Vyc29yXG4gICAgdGhpcy5jdXJzb3IgPSBuZXcgUElYSS5HcmFwaGljcygpO1xuICAgIHRoaXMuY3Vyc29yLnZpc2libGUgPSBmYWxzZTtcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmN1cnNvcik7XG5cbiAgICAvLyBTZXR1cCBpbnRlcmFjdGl2aXR5XG4gICAgdGhpcy5zZXR1cEludGVyYWN0aXZpdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkaXNwbGF5IHRleHQgKHZhbHVlIG9yIHBsYWNlaG9sZGVyKVxuICAgKi9cbiAgcHJpdmF0ZSBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmN1cnJlbnRWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wcm9wcy5wbGFjZWhvbGRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIG1vdXNlL2tleWJvYXJkIGV2ZW50IGhhbmRsZXJzXG4gICAqL1xuICBwcml2YXRlIHNldHVwSW50ZXJhY3Rpdml0eSgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRhaW5lci5ldmVudE1vZGUgPSAnc3RhdGljJztcbiAgICB0aGlzLmNvbnRhaW5lci5jdXJzb3IgPSAndGV4dCc7XG5cbiAgICAvLyBDbGljayB0byBmb2N1c1xuICAgIHRoaXMuY29udGFpbmVyLm9uKCdwb2ludGVyZG93bicsIHRoaXMuaGFuZGxlUG9pbnRlckRvd24uYmluZCh0aGlzKSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIGdsb2JhbCBrZXlib2FyZCBldmVudHNcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUG9pbnRlckRvd24oZTogUElYSS5GZWRlcmF0ZWRQb2ludGVyRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wcm9wcy5kaXNhYmxlZCkgcmV0dXJuO1xuXG4gICAgLy8gUmVxdWVzdCBmb2N1cyB0aHJvdWdoIHRoZSBmb2N1cyBtYW5hZ2VyXG4gICAgY29uc3QgZm9jdXNNYW5hZ2VyID0gVUlGb2N1c01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICBpZiAoZm9jdXNNYW5hZ2VyKSB7XG4gICAgICBmb2N1c01hbmFnZXIucmVxdWVzdEZvY3VzKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayBpZiBubyBmb2N1cyBtYW5hZ2VyXG4gICAgICB0aGlzLm9uRm9jdXMoKTtcbiAgICB9XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0ZXh0YXJlYSByZWNlaXZlcyBmb2N1cyAob3ZlcnJpZGUgZnJvbSBiYXNlIGNsYXNzKVxuICAgKi9cbiAgb3ZlcnJpZGUgb25Gb2N1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5mb2N1c2VkKSByZXR1cm47XG5cbiAgICBzdXBlci5vbkZvY3VzKCk7XG4gICAgdGhpcy5jdXJzb3JQb3NpdGlvbiA9IHRoaXMuY3VycmVudFZhbHVlLmxlbmd0aDtcbiAgICB0aGlzLmN1cnNvci52aXNpYmxlID0gdHJ1ZTtcbiAgICB0aGlzLnVwZGF0ZUN1cnNvcigpO1xuICAgIHRoaXMuc3RhcnRDdXJzb3JCbGluaygpO1xuXG4gICAgLy8gVXBkYXRlIGJhY2tncm91bmQgdG8gc2hvdyBmb2N1cyBzdGF0ZVxuICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBVSVBhbmVsKHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5saWdodGVuQ29sb3IodGhpcy5wcm9wcy5iYWNrZ3JvdW5kQ29sb3IsIDAuOTUpLFxuICAgICAgd2lkdGg6IHRoaXMucHJvcHMud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMucHJvcHMuaGVpZ2h0LFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGlzLnByb3BzLmJvcmRlclJhZGl1c1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRleHRhcmVhIGxvc2VzIGZvY3VzIChvdmVycmlkZSBmcm9tIGJhc2UgY2xhc3MpXG4gICAqL1xuICBvdmVycmlkZSBvbkJsdXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmZvY3VzZWQpIHJldHVybjtcblxuICAgIHN1cGVyLm9uQmx1cigpO1xuICAgIHRoaXMuY3Vyc29yLnZpc2libGUgPSBmYWxzZTtcbiAgICB0aGlzLnN0b3BDdXJzb3JCbGluaygpO1xuXG4gICAgLy8gUmVzdG9yZSBub3JtYWwgYmFja2dyb3VuZFxuICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBVSVBhbmVsKHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5wcm9wcy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICB3aWR0aDogdGhpcy5wcm9wcy53aWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoaXMucHJvcHMuYm9yZGVyUmFkaXVzXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleURvd24oZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5mb2N1c2VkIHx8IHRoaXMucHJvcHMuZGlzYWJsZWQpIHJldHVybjtcblxuICAgIC8vIERvbid0IHByZXZlbnQgZGVmYXVsdCBmb3IgVGFiIChhbGxvdyB0YWIgbmF2aWdhdGlvbilcbiAgICBpZiAoZS5rZXkgIT09ICdUYWInKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIGNvbnN0IGtleSA9IGUua2V5O1xuXG4gICAgLy8gRW50ZXIgYWRkcyBuZXcgbGluZSBpbiB0ZXh0YXJlYVxuICAgIGlmIChrZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRWYWx1ZS5sZW5ndGggPCB0aGlzLnByb3BzLm1heExlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUuc3Vic3RyaW5nKDAsIHRoaXMuY3Vyc29yUG9zaXRpb24pICtcbiAgICAgICAgICAnXFxuJyArXG4gICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUuc3Vic3RyaW5nKHRoaXMuY3Vyc29yUG9zaXRpb24pO1xuICAgICAgICB0aGlzLmN1cnNvclBvc2l0aW9uKys7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLm9uQmx1cigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09ICdCYWNrc3BhY2UnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3JQb3NpdGlvbiA+IDApIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPVxuICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlLnN1YnN0cmluZygwLCB0aGlzLmN1cnNvclBvc2l0aW9uIC0gMSkgK1xuICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlLnN1YnN0cmluZyh0aGlzLmN1cnNvclBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5jdXJzb3JQb3NpdGlvbi0tO1xuICAgICAgICB0aGlzLnVwZGF0ZVRleHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnRGVsZXRlJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yUG9zaXRpb24gPCB0aGlzLmN1cnJlbnRWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPVxuICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlLnN1YnN0cmluZygwLCB0aGlzLmN1cnNvclBvc2l0aW9uKSArXG4gICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUuc3Vic3RyaW5nKHRoaXMuY3Vyc29yUG9zaXRpb24gKyAxKTtcbiAgICAgICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ0Fycm93TGVmdCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvclBvc2l0aW9uID4gMCkge1xuICAgICAgICB0aGlzLmN1cnNvclBvc2l0aW9uLS07XG4gICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ0Fycm93UmlnaHQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3JQb3NpdGlvbiA8IHRoaXMuY3VycmVudFZhbHVlLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvclBvc2l0aW9uKys7XG4gICAgICAgIHRoaXMudXBkYXRlQ3Vyc29yKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ0Fycm93VXAnKSB7XG4gICAgICAvLyBNb3ZlIGN1cnNvciB1cCBvbmUgbGluZVxuICAgICAgdGhpcy5tb3ZlQ3Vyc29yVmVydGljYWxseSgtMSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgIC8vIE1vdmUgY3Vyc29yIGRvd24gb25lIGxpbmVcbiAgICAgIHRoaXMubW92ZUN1cnNvclZlcnRpY2FsbHkoMSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gJ0hvbWUnKSB7XG4gICAgICAvLyBNb3ZlIHRvIHN0YXJ0IG9mIGN1cnJlbnQgbGluZVxuICAgICAgY29uc3QgbGluZVN0YXJ0ID0gdGhpcy5jdXJyZW50VmFsdWUubGFzdEluZGV4T2YoJ1xcbicsIHRoaXMuY3Vyc29yUG9zaXRpb24gLSAxKSArIDE7XG4gICAgICB0aGlzLmN1cnNvclBvc2l0aW9uID0gbGluZVN0YXJ0O1xuICAgICAgdGhpcy51cGRhdGVDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAnRW5kJykge1xuICAgICAgLy8gTW92ZSB0byBlbmQgb2YgY3VycmVudCBsaW5lXG4gICAgICBsZXQgbGluZUVuZCA9IHRoaXMuY3VycmVudFZhbHVlLmluZGV4T2YoJ1xcbicsIHRoaXMuY3Vyc29yUG9zaXRpb24pO1xuICAgICAgaWYgKGxpbmVFbmQgPT09IC0xKSBsaW5lRW5kID0gdGhpcy5jdXJyZW50VmFsdWUubGVuZ3RoO1xuICAgICAgdGhpcy5jdXJzb3JQb3NpdGlvbiA9IGxpbmVFbmQ7XG4gICAgICB0aGlzLnVwZGF0ZUN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjaGFyYWN0ZXIgaW5wdXRcbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSAmJiAhZS5jdHJsS2V5ICYmICFlLm1ldGFLZXkpIHtcbiAgICAgIC8vIENoZWNrIG1heCBsZW5ndGhcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRWYWx1ZS5sZW5ndGggPj0gdGhpcy5wcm9wcy5tYXhMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBJbnNlcnQgY2hhcmFjdGVyIGF0IGN1cnNvciBwb3NpdGlvblxuICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPVxuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZS5zdWJzdHJpbmcoMCwgdGhpcy5jdXJzb3JQb3NpdGlvbikgK1xuICAgICAgICBrZXkgK1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZS5zdWJzdHJpbmcodGhpcy5jdXJzb3JQb3NpdGlvbik7XG4gICAgICB0aGlzLmN1cnNvclBvc2l0aW9uKys7XG4gICAgICB0aGlzLnVwZGF0ZVRleHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTW92ZXMgY3Vyc29yIHZlcnRpY2FsbHkgYnkgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgbGluZXNcbiAgICovXG4gIHByaXZhdGUgbW92ZUN1cnNvclZlcnRpY2FsbHkoZGlyZWN0aW9uOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBsaW5lcyA9IHRoaXMuY3VycmVudFZhbHVlLnNwbGl0KCdcXG4nKTtcbiAgICBsZXQgY3VycmVudExpbmUgPSAwO1xuICAgIGxldCBwb3NpdGlvbkluTGluZSA9IDA7XG4gICAgbGV0IGNoYXJDb3VudCA9IDA7XG5cbiAgICAvLyBGaW5kIGN1cnJlbnQgbGluZSBhbmQgcG9zaXRpb25cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoY2hhckNvdW50ICsgbGluZXNbaV0ubGVuZ3RoID49IHRoaXMuY3Vyc29yUG9zaXRpb24pIHtcbiAgICAgICAgY3VycmVudExpbmUgPSBpO1xuICAgICAgICBwb3NpdGlvbkluTGluZSA9IHRoaXMuY3Vyc29yUG9zaXRpb24gLSBjaGFyQ291bnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2hhckNvdW50ICs9IGxpbmVzW2ldLmxlbmd0aCArIDE7IC8vICsxIGZvciBuZXdsaW5lXG4gICAgfVxuXG4gICAgLy8gTW92ZSB0byB0YXJnZXQgbGluZVxuICAgIGNvbnN0IHRhcmdldExpbmUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihsaW5lcy5sZW5ndGggLSAxLCBjdXJyZW50TGluZSArIGRpcmVjdGlvbikpO1xuICAgIGlmICh0YXJnZXRMaW5lID09PSBjdXJyZW50TGluZSkgcmV0dXJuO1xuXG4gICAgLy8gQ2FsY3VsYXRlIG5ldyBjdXJzb3IgcG9zaXRpb25cbiAgICBsZXQgbmV3UG9zaXRpb24gPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZ2V0TGluZTsgaSsrKSB7XG4gICAgICBuZXdQb3NpdGlvbiArPSBsaW5lc1tpXS5sZW5ndGggKyAxO1xuICAgIH1cbiAgICBuZXdQb3NpdGlvbiArPSBNYXRoLm1pbihwb3NpdGlvbkluTGluZSwgbGluZXNbdGFyZ2V0TGluZV0ubGVuZ3RoKTtcblxuICAgIHRoaXMuY3Vyc29yUG9zaXRpb24gPSBuZXdQb3NpdGlvbjtcbiAgICB0aGlzLnVwZGF0ZUN1cnNvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHRleHQgZGlzcGxheSBhbmQgdHJpZ2dlcnMgb25DaGFuZ2VcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlVGV4dCgpOiB2b2lkIHtcbiAgICB0aGlzLnRleHREaXNwbGF5LnRleHQgPSB0aGlzLmdldERpc3BsYXlUZXh0KCk7XG4gICAgdGhpcy50ZXh0RGlzcGxheS5zdHlsZS5maWxsID0gdGhpcy5jdXJyZW50VmFsdWUgPyB0aGlzLnByb3BzLnRleHRDb2xvciA6IHRoaXMucHJvcHMucGxhY2Vob2xkZXJDb2xvcjtcbiAgICB0aGlzLnVwZGF0ZUN1cnNvcigpO1xuICAgIHRoaXMub25DaGFuZ2U/Lih0aGlzLmN1cnJlbnRWYWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyBjdXJzb3IgcG9zaXRpb24gdmlzdWFsbHlcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ3Vyc29yKCk6IHZvaWQge1xuICAgIC8vIEdldCB0ZXh0IG1ldHJpY3MgdXAgdG8gY3Vyc29yIHBvc2l0aW9uXG4gICAgY29uc3QgdGV4dFVwVG9DdXJzb3IgPSB0aGlzLmN1cnJlbnRWYWx1ZS5zdWJzdHJpbmcoMCwgdGhpcy5jdXJzb3JQb3NpdGlvbik7XG5cbiAgICAvLyBDcmVhdGUgdGVtcG9yYXJ5IHRleHQgdG8gbWVhc3VyZVxuICAgIGNvbnN0IHRlbXBUZXh0ID0gbmV3IFBJWEkuVGV4dCh7XG4gICAgICB0ZXh0OiB0ZXh0VXBUb0N1cnNvcixcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIC4uLnRoaXMudGV4dERpc3BsYXkuc3R5bGUsXG4gICAgICAgIHdvcmRXcmFwOiB0cnVlLFxuICAgICAgICB3b3JkV3JhcFdpZHRoOiB0aGlzLnByb3BzLndpZHRoIC0gMjRcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEdldCB0aGUgYm91bmRzIHRvIGZpbmQgY3Vyc29yIHBvc2l0aW9uXG4gICAgY29uc3QgbWV0cmljcyA9IHRlbXBUZXh0LmdldExvY2FsQm91bmRzKCk7XG5cbiAgICAvLyBGb3IgbXVsdGktbGluZSwgd2UgbmVlZCB0byBmaW5kIHRoZSBsYXN0IGxpbmUgcG9zaXRpb25cbiAgICBjb25zdCBsaW5lcyA9IHRleHRVcFRvQ3Vyc29yLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBsYXN0TGluZSA9IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdO1xuXG4gICAgY29uc3QgbGFzdExpbmVUZXh0ID0gbmV3IFBJWEkuVGV4dCh7XG4gICAgICB0ZXh0OiBsYXN0TGluZSxcbiAgICAgIHN0eWxlOiB0aGlzLnRleHREaXNwbGF5LnN0eWxlXG4gICAgfSk7XG5cbiAgICBjb25zdCBjdXJzb3JYID0gMTIgKyBsYXN0TGluZVRleHQud2lkdGg7XG4gICAgY29uc3QgY3Vyc29yWSA9IDEyICsgKGxpbmVzLmxlbmd0aCAtIDEpICogKHRoaXMucHJvcHMuZm9udFNpemUgKiB0aGlzLnByb3BzLmxpbmVIZWlnaHQpO1xuXG4gICAgdGhpcy5jdXJzb3IuY2xlYXIoKTtcbiAgICB0aGlzLmN1cnNvci5yZWN0KGN1cnNvclgsIGN1cnNvclksIDEsIHRoaXMucHJvcHMuZm9udFNpemUpO1xuICAgIHRoaXMuY3Vyc29yLmZpbGwoeyBjb2xvcjogdGhpcy5wcm9wcy50ZXh0Q29sb3IgfSk7XG5cbiAgICAvLyBDbGVhbiB1cCB0ZW1wIG9iamVjdHNcbiAgICB0ZW1wVGV4dC5kZXN0cm95KCk7XG4gICAgbGFzdExpbmVUZXh0LmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgY3Vyc29yIGJsaW5raW5nIGFuaW1hdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBzdGFydEN1cnNvckJsaW5rKCk6IHZvaWQge1xuICAgIHRoaXMuc3RvcEN1cnNvckJsaW5rKCk7XG4gICAgdGhpcy5jdXJzb3JWaXNpYmxlID0gdHJ1ZTtcblxuICAgIHRoaXMuY3Vyc29yQmxpbmtJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmN1cnNvclZpc2libGUgPSAhdGhpcy5jdXJzb3JWaXNpYmxlO1xuICAgICAgdGhpcy5jdXJzb3IudmlzaWJsZSA9IHRoaXMuY3Vyc29yVmlzaWJsZTtcbiAgICB9LCA1MzApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3BzIGN1cnNvciBibGlua2luZyBhbmltYXRpb25cbiAgICovXG4gIHByaXZhdGUgc3RvcEN1cnNvckJsaW5rKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnNvckJsaW5rSW50ZXJ2YWwpIHtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuY3Vyc29yQmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLmN1cnNvckJsaW5rSW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExpZ2h0ZW5zIGEgY29sb3IgYnkgYSBmYWN0b3JcbiAgICovXG4gIHByaXZhdGUgbGlnaHRlbkNvbG9yKGNvbG9yOiBudW1iZXIsIGZhY3RvcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCByID0gTWF0aC5taW4oMjU1LCAoKGNvbG9yID4+IDE2KSAmIDB4ZmYpIC8gZmFjdG9yKTtcbiAgICBjb25zdCBnID0gTWF0aC5taW4oMjU1LCAoKGNvbG9yID4+IDgpICYgMHhmZikgLyBmYWN0b3IpO1xuICAgIGNvbnN0IGIgPSBNYXRoLm1pbigyNTUsIChjb2xvciAmIDB4ZmYpIC8gZmFjdG9yKTtcbiAgICByZXR1cm4gKChyIDw8IDE2KSB8IChnIDw8IDgpIHwgYikgPj4+IDA7XG4gIH1cblxuICAvKipcbiAgICogTWVhc3VyZXMgdGhlIHNpemUgbmVlZGVkIGZvciB0aGlzIHRleHRhcmVhXG4gICAqL1xuICBtZWFzdXJlKCk6IE1lYXN1cmVkU2l6ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLnByb3BzLmhlaWdodFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgbGF5b3V0IGZvciB0aGlzIHRleHRhcmVhXG4gICAqL1xuICBsYXlvdXQoYXZhaWxhYmxlV2lkdGg6IG51bWJlciwgYXZhaWxhYmxlSGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBtZWFzdXJlZCA9IHRoaXMubWVhc3VyZSgpO1xuXG4gICAgdGhpcy5jb21wdXRlZExheW91dC53aWR0aCA9IG1lYXN1cmVkLndpZHRoO1xuICAgIHRoaXMuY29tcHV0ZWRMYXlvdXQuaGVpZ2h0ID0gbWVhc3VyZWQuaGVpZ2h0O1xuXG4gICAgLy8gTGF5b3V0IGJhY2tncm91bmRcbiAgICB0aGlzLmJhY2tncm91bmQubGF5b3V0KG1lYXN1cmVkLndpZHRoLCBtZWFzdXJlZC5oZWlnaHQpO1xuXG4gICAgdGhpcy5sYXlvdXREaXJ0eSA9IGZhbHNlO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgdGV4dGFyZWFcbiAgICovXG4gIHByb3RlY3RlZCByZW5kZXIoKTogdm9pZCB7XG4gICAgLy8gUmVuZGVyaW5nIGhhbmRsZWQgYnkgYmFja2dyb3VuZCwgdGV4dCwgYW5kIGN1cnNvclxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIHByb2dyYW1tYXRpY2FsbHlcbiAgICovXG4gIHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuY3Vyc29yUG9zaXRpb24gPSB2YWx1ZS5sZW5ndGg7XG4gICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCB2YWx1ZVxuICAgKi9cbiAgZ2V0VmFsdWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50VmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCB3aGVuIGRlc3Ryb3lpbmdcbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5zdG9wQ3Vyc29yQmxpbmsoKTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBzdXBlci5kZXN0cm95KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEVkZ2VJbnNldHMgfSBmcm9tICcuL2VkZ2UtaW5zZXRzJztcblxuLyoqXG4gKiBTaXplIGNvbnN0cmFpbnQgdmFsdWVzIGZvciBVSSBjb21wb25lbnRzXG4gKiBDYW4gYmUgYSBmaXhlZCBudW1iZXIsICdhdXRvJyB0byBmaXQgY29udGVudCwgb3IgJ2ZpbGwnIHRvIGV4cGFuZFxuICpcbiAqIEBjYXRlZ29yeSBVSVxuICovXG5leHBvcnQgdHlwZSBTaXplQ29uc3RyYWludCA9IG51bWJlciB8ICdhdXRvJyB8ICdmaWxsJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBib3ggbW9kZWwgZm9yIGEgVUkgY29tcG9uZW50XG4gKiBTaW1pbGFyIHRvIENTUyBib3ggbW9kZWwgd2l0aCB3aWR0aCwgaGVpZ2h0LCBwYWRkaW5nLCBtYXJnaW4sIGFuZCBib3JkZXJcbiAqXG4gKiBAY2F0ZWdvcnkgVUlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCb3hNb2RlbCB7XG4gIC8vIENvbnRlbnQgYXJlYSBkaW1lbnNpb25zXG4gIHdpZHRoOiBTaXplQ29uc3RyYWludDtcbiAgaGVpZ2h0OiBTaXplQ29uc3RyYWludDtcblxuICAvLyBTaXplIGNvbnN0cmFpbnRzXG4gIG1pbldpZHRoPzogbnVtYmVyO1xuICBtaW5IZWlnaHQ/OiBudW1iZXI7XG4gIG1heFdpZHRoPzogbnVtYmVyO1xuICBtYXhIZWlnaHQ/OiBudW1iZXI7XG5cbiAgLy8gU3BhY2luZ1xuICBwYWRkaW5nOiBFZGdlSW5zZXRzO1xuICBtYXJnaW46IEVkZ2VJbnNldHM7XG5cbiAgLy8gQm9yZGVyICh2aXN1YWwgYm9yZGVyIHdpbGwgYmUgaW1wbGVtZW50ZWQgbGF0ZXIpXG4gIGJvcmRlcj86IEVkZ2VJbnNldHM7XG59XG5cbi8qKlxuICogVGhlIGNvbXB1dGVkL2FjdHVhbCBsYXlvdXQgb2YgYSBjb21wb25lbnQgYWZ0ZXIgbWVhc3VyZW1lbnRcbiAqIEFsbCB2YWx1ZXMgYXJlIGNvbmNyZXRlIHBpeGVsIHZhbHVlc1xuICpcbiAqIEBjYXRlZ29yeSBVSVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXB1dGVkTGF5b3V0IHtcbiAgLy8gUG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuXG4gIC8vIEZpbmFsIGRpbWVuc2lvbnNcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG5cbiAgLy8gQ29udGVudCBhcmVhIChpbnNpZGUgcGFkZGluZylcbiAgY29udGVudFg6IG51bWJlcjtcbiAgY29udGVudFk6IG51bWJlcjtcbiAgY29udGVudFdpZHRoOiBudW1iZXI7XG4gIGNvbnRlbnRIZWlnaHQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBSZXN1bHQgb2YgbWVhc3VyaW5nIGEgY29tcG9uZW50J3Mgc2l6ZVxuICpcbiAqIEBjYXRlZ29yeSBVSVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1lYXN1cmVkU2l6ZSB7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjcmVhdGUgYSBkZWZhdWx0IEJveE1vZGVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZWZhdWx0Qm94TW9kZWwob3ZlcnJpZGVzPzogUGFydGlhbDxCb3hNb2RlbD4pOiBCb3hNb2RlbCB7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6ICdhdXRvJyxcbiAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICBwYWRkaW5nOiBFZGdlSW5zZXRzLnplcm8oKSxcbiAgICBtYXJnaW46IEVkZ2VJbnNldHMuemVybygpLFxuICAgIC4uLm92ZXJyaWRlc1xuICB9O1xufVxuIiwiLyoqXG4gKiBSZXByZXNlbnRzIHNwYWNpbmcgdmFsdWVzIGZvciB0aGUgZWRnZXMgb2YgYSBib3ggKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCkuXG4gKiBTaW1pbGFyIHRvIENTUyBwYWRkaW5nL21hcmdpbiBzeW50YXguXG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBjbGFzcyBFZGdlSW5zZXRzIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gRWRnZUluc2V0cyB3aXRoIHNwZWNpZmljIHZhbHVlcyBmb3IgZWFjaCBlZGdlXG4gICAqXG4gICAqIEBwYXJhbSB0b3AgLSBUb3AgZWRnZSBzcGFjaW5nXG4gICAqIEBwYXJhbSByaWdodCAtIFJpZ2h0IGVkZ2Ugc3BhY2luZ1xuICAgKiBAcGFyYW0gYm90dG9tIC0gQm90dG9tIGVkZ2Ugc3BhY2luZ1xuICAgKiBAcGFyYW0gbGVmdCAtIExlZnQgZWRnZSBzcGFjaW5nXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgdG9wOiBudW1iZXIsXG4gICAgcHVibGljIHJpZ2h0OiBudW1iZXIsXG4gICAgcHVibGljIGJvdHRvbTogbnVtYmVyLFxuICAgIHB1YmxpYyBsZWZ0OiBudW1iZXJcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIEVkZ2VJbnNldHMgd2l0aCB0aGUgc2FtZSB2YWx1ZSBmb3IgYWxsIGVkZ2VzXG4gICAqIFNpbWlsYXIgdG8gQ1NTOiBwYWRkaW5nOiAxMHB4XG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBhcHBseSB0byBhbGwgZWRnZXNcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiBjb25zdCBwYWRkaW5nID0gRWRnZUluc2V0cy5hbGwoMjApOyAvLyAyMHB4IG9uIGFsbCBzaWRlc1xuICAgKiBgYGBcbiAgICovXG4gIHN0YXRpYyBhbGwodmFsdWU6IG51bWJlcik6IEVkZ2VJbnNldHMge1xuICAgIHJldHVybiBuZXcgRWRnZUluc2V0cyh2YWx1ZSwgdmFsdWUsIHZhbHVlLCB2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBFZGdlSW5zZXRzIHdpdGggc3ltbWV0cmljIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHZhbHVlc1xuICAgKiBTaW1pbGFyIHRvIENTUzogcGFkZGluZzogMTBweCAyMHB4XG4gICAqXG4gICAqIEBwYXJhbSB2ZXJ0aWNhbCAtIFZhbHVlIGZvciB0b3AgYW5kIGJvdHRvbSBlZGdlc1xuICAgKiBAcGFyYW0gaG9yaXpvbnRhbCAtIFZhbHVlIGZvciBsZWZ0IGFuZCByaWdodCBlZGdlc1xuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IHBhZGRpbmcgPSBFZGdlSW5zZXRzLnN5bW1ldHJpYygxMCwgMjApOyAvLyAxMHB4IHRvcC9ib3R0b20sIDIwcHggbGVmdC9yaWdodFxuICAgKiBgYGBcbiAgICovXG4gIHN0YXRpYyBzeW1tZXRyaWModmVydGljYWw6IG51bWJlciwgaG9yaXpvbnRhbDogbnVtYmVyKTogRWRnZUluc2V0cyB7XG4gICAgcmV0dXJuIG5ldyBFZGdlSW5zZXRzKHZlcnRpY2FsLCBob3Jpem9udGFsLCB2ZXJ0aWNhbCwgaG9yaXpvbnRhbCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBFZGdlSW5zZXRzIHdpdGggc3BlY2lmaWMgdmFsdWVzIGZvciBpbmRpdmlkdWFsIGVkZ2VzXG4gICAqIFNpbWlsYXIgdG8gQ1NTOiBwYWRkaW5nLXRvcCwgcGFkZGluZy1yaWdodCwgZXRjLlxuICAgKlxuICAgKiBAcGFyYW0gZWRnZXMgLSBPYmplY3Qgd2l0aCBvcHRpb25hbCB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQgdmFsdWVzIChkZWZhdWx0cyB0byAwKVxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IHBhZGRpbmcgPSBFZGdlSW5zZXRzLm9ubHkoeyB0b3A6IDEwLCBsZWZ0OiAyMCB9KTsgLy8gMTBweCB0b3AsIDIwcHggbGVmdCwgMHB4IHJpZ2h0L2JvdHRvbVxuICAgKiBgYGBcbiAgICovXG4gIHN0YXRpYyBvbmx5KGVkZ2VzOiB7IHRvcD86IG51bWJlcjsgcmlnaHQ/OiBudW1iZXI7IGJvdHRvbT86IG51bWJlcjsgbGVmdD86IG51bWJlciB9KTogRWRnZUluc2V0cyB7XG4gICAgcmV0dXJuIG5ldyBFZGdlSW5zZXRzKFxuICAgICAgZWRnZXMudG9wID8/IDAsXG4gICAgICBlZGdlcy5yaWdodCA/PyAwLFxuICAgICAgZWRnZXMuYm90dG9tID8/IDAsXG4gICAgICBlZGdlcy5sZWZ0ID8/IDBcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgRWRnZUluc2V0cyB3aXRoIHplcm8gc3BhY2luZyBvbiBhbGwgZWRnZXNcbiAgICogU2ltaWxhciB0byBDU1M6IHBhZGRpbmc6IDBcbiAgICovXG4gIHN0YXRpYyB6ZXJvKCk6IEVkZ2VJbnNldHMge1xuICAgIHJldHVybiBuZXcgRWRnZUluc2V0cygwLCAwLCAwLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0b3RhbCBob3Jpem9udGFsIHNwYWNpbmcgKGxlZnQgKyByaWdodClcbiAgICovXG4gIGdldCBob3Jpem9udGFsKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubGVmdCArIHRoaXMucmlnaHQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdG90YWwgdmVydGljYWwgc3BhY2luZyAodG9wICsgYm90dG9tKVxuICAgKi9cbiAgZ2V0IHZlcnRpY2FsKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudG9wICsgdGhpcy5ib3R0b207XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhlc2UgRWRnZUluc2V0c1xuICAgKi9cbiAgY2xvbmUoKTogRWRnZUluc2V0cyB7XG4gICAgcmV0dXJuIG5ldyBFZGdlSW5zZXRzKHRoaXMudG9wLCB0aGlzLnJpZ2h0LCB0aGlzLmJvdHRvbSwgdGhpcy5sZWZ0KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBCb3hNb2RlbCwgQ29tcHV0ZWRMYXlvdXQsIE1lYXN1cmVkU2l6ZSwgY3JlYXRlRGVmYXVsdEJveE1vZGVsIH0gZnJvbSAnLi9ib3gtbW9kZWwnO1xuXG4vKipcbiAqIEJhc2UgYWJzdHJhY3QgY2xhc3MgZm9yIGFsbCBVSSBjb21wb25lbnRzXG4gKiBQcm92aWRlcyBib3ggbW9kZWwsIGxheW91dCwgYW5kIHJlbmRlcmluZyBmdW5jdGlvbmFsaXR5XG4gKlxuICogQGNhdGVnb3J5IFVJXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBVSUNvbXBvbmVudCB7XG4gIC8qKlxuICAgKiBUaGUgUElYSSBjb250YWluZXIgdGhhdCBob2xkcyB0aGlzIGNvbXBvbmVudCdzIHZpc3VhbCByZXByZXNlbnRhdGlvblxuICAgKi9cbiAgcHVibGljIGNvbnRhaW5lcjogUElYSS5Db250YWluZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBib3ggbW9kZWwgZGVmaW5pbmcgdGhpcyBjb21wb25lbnQncyBzaXppbmcgYW5kIHNwYWNpbmdcbiAgICovXG4gIHByb3RlY3RlZCBib3hNb2RlbDogQm94TW9kZWw7XG5cbiAgLyoqXG4gICAqIEZvY3VzIHJpbmcgZm9yIHZpc3VhbCBmb2N1cyBpbmRpY2F0aW9uXG4gICAqL1xuICBwcm90ZWN0ZWQgZm9jdXNSaW5nPzogUElYSS5HcmFwaGljcztcblxuICAvKipcbiAgICogVGhlIGNvbXB1dGVkIGxheW91dCBhZnRlciBtZWFzdXJlbWVudCBhbmQgcG9zaXRpb25pbmdcbiAgICovXG4gIHByb3RlY3RlZCBjb21wdXRlZExheW91dDogQ29tcHV0ZWRMYXlvdXQ7XG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZSB0byBwYXJlbnQgY29tcG9uZW50IChpZiBhbnkpXG4gICAqL1xuICBwdWJsaWMgcGFyZW50PzogVUlDb21wb25lbnQ7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBjb21wb25lbnQgaXMgY3VycmVudGx5IHZpc2libGVcbiAgICovXG4gIHB1YmxpYyB2aXNpYmxlOiBib29sZWFuID0gdHJ1ZTtcblxuICAvKipcbiAgICogV2hldGhlciB0aGlzIGNvbXBvbmVudCBpcyBlbmFibGVkIGZvciBpbnRlcmFjdGlvblxuICAgKi9cbiAgcHVibGljIGVuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBGbGFnIGluZGljYXRpbmcgaWYgbGF5b3V0IG5lZWRzIHRvIGJlIHJlY2FsY3VsYXRlZFxuICAgKi9cbiAgcHJvdGVjdGVkIGxheW91dERpcnR5OiBib29sZWFuID0gdHJ1ZTtcblxuICAvKipcbiAgICogVGFiIGluZGV4IGZvciBmb2N1cyBvcmRlciAoLTEgbWVhbnMgbm90IGZvY3VzYWJsZSBieSB0YWIpXG4gICAqL1xuICBwdWJsaWMgdGFiSW5kZXg6IG51bWJlciA9IC0xO1xuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBmb2N1cyBzdGF0ZVxuICAgKi9cbiAgcHJvdGVjdGVkIGZvY3VzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihib3hNb2RlbD86IFBhcnRpYWw8Qm94TW9kZWw+KSB7XG4gICAgdGhpcy5jb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcbiAgICB0aGlzLmJveE1vZGVsID0gY3JlYXRlRGVmYXVsdEJveE1vZGVsKGJveE1vZGVsKTtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0ID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMCxcbiAgICAgIGNvbnRlbnRYOiAwLFxuICAgICAgY29udGVudFk6IDAsXG4gICAgICBjb250ZW50V2lkdGg6IDAsXG4gICAgICBjb250ZW50SGVpZ2h0OiAwXG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBmb2N1cyByaW5nIChpbml0aWFsbHkgaGlkZGVuKVxuICAgIHRoaXMuY3JlYXRlRm9jdXNSaW5nKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgZm9jdXMgcmluZyBncmFwaGljc1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVGb2N1c1JpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5mb2N1c1JpbmcgPSBuZXcgUElYSS5HcmFwaGljcygpO1xuICAgIHRoaXMuZm9jdXNSaW5nLnZpc2libGUgPSBmYWxzZTtcbiAgICAvLyBBZGQgYXMgZmlyc3QgY2hpbGQgc28gaXQgcmVuZGVycyBiZWhpbmQgY29udGVudFxuICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkQXQodGhpcy5mb2N1c1JpbmcsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGZvY3VzIHJpbmcgYXBwZWFyYW5jZSBiYXNlZCBvbiBjb21wb25lbnQgc2l6ZVxuICAgKi9cbiAgcHJvdGVjdGVkIHVwZGF0ZUZvY3VzUmluZygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZm9jdXNSaW5nKSByZXR1cm47XG5cbiAgICB0aGlzLmZvY3VzUmluZy5jbGVhcigpO1xuXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmNvbXB1dGVkTGF5b3V0LndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuY29tcHV0ZWRMYXlvdXQuaGVpZ2h0O1xuXG4gICAgaWYgKHdpZHRoIDw9IDAgfHwgaGVpZ2h0IDw9IDApIHJldHVybjtcblxuICAgIC8vIEFuaW1hdGVkIHB1bHNpbmcgZWZmZWN0IHdpdGggZGFzaGVkIG91dGxpbmVcbiAgICBjb25zdCBvZmZzZXQgPSA0O1xuICAgIGNvbnN0IHN0cm9rZVdpZHRoID0gMztcblxuICAgIC8vIERyYXcgb3V0ZXIgZ2xvd1xuICAgIHRoaXMuZm9jdXNSaW5nLnJvdW5kUmVjdChcbiAgICAgIC1vZmZzZXQgLSAyLFxuICAgICAgLW9mZnNldCAtIDIsXG4gICAgICB3aWR0aCArIChvZmZzZXQgKyAyKSAqIDIsXG4gICAgICBoZWlnaHQgKyAob2Zmc2V0ICsgMikgKiAyLFxuICAgICAgOFxuICAgICk7XG4gICAgdGhpcy5mb2N1c1Jpbmcuc3Ryb2tlKHtcbiAgICAgIGNvbG9yOiAweDAwZDlmZixcbiAgICAgIHdpZHRoOiBzdHJva2VXaWR0aCArIDIsXG4gICAgICBhbHBoYTogMC4zXG4gICAgfSk7XG5cbiAgICAvLyBEcmF3IG1haW4gZm9jdXMgcmluZ1xuICAgIHRoaXMuZm9jdXNSaW5nLnJvdW5kUmVjdChcbiAgICAgIC1vZmZzZXQsXG4gICAgICAtb2Zmc2V0LFxuICAgICAgd2lkdGggKyBvZmZzZXQgKiAyLFxuICAgICAgaGVpZ2h0ICsgb2Zmc2V0ICogMixcbiAgICAgIDhcbiAgICApO1xuICAgIHRoaXMuZm9jdXNSaW5nLnN0cm9rZSh7XG4gICAgICBjb2xvcjogMHgwMGQ5ZmYsXG4gICAgICB3aWR0aDogc3Ryb2tlV2lkdGhcbiAgICB9KTtcblxuICAgIC8vIERyYXcgaW5uZXIgaGlnaGxpZ2h0XG4gICAgdGhpcy5mb2N1c1Jpbmcucm91bmRSZWN0KFxuICAgICAgLW9mZnNldCArIHN0cm9rZVdpZHRoLFxuICAgICAgLW9mZnNldCArIHN0cm9rZVdpZHRoLFxuICAgICAgd2lkdGggKyAob2Zmc2V0IC0gc3Ryb2tlV2lkdGgpICogMixcbiAgICAgIGhlaWdodCArIChvZmZzZXQgLSBzdHJva2VXaWR0aCkgKiAyLFxuICAgICAgNlxuICAgICk7XG4gICAgdGhpcy5mb2N1c1Jpbmcuc3Ryb2tlKHtcbiAgICAgIGNvbG9yOiAweGZmZmZmZixcbiAgICAgIHdpZHRoOiAxLFxuICAgICAgYWxwaGE6IDAuNlxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lYXN1cmVzIHRoZSBzaXplIHRoaXMgY29tcG9uZW50IG5lZWRzXG4gICAqIE11c3QgYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3Nlc1xuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgbWVhc3VyZWQgd2lkdGggYW5kIGhlaWdodFxuICAgKi9cbiAgYWJzdHJhY3QgbWVhc3VyZSgpOiBNZWFzdXJlZFNpemU7XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGxheW91dCBmb3IgdGhpcyBjb21wb25lbnQgd2l0aGluIHRoZSBnaXZlbiBhdmFpbGFibGUgc3BhY2VcbiAgICogTXVzdCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzXG4gICAqXG4gICAqIEBwYXJhbSBhdmFpbGFibGVXaWR0aCAtIEF2YWlsYWJsZSB3aWR0aCBpbiBwaXhlbHNcbiAgICogQHBhcmFtIGF2YWlsYWJsZUhlaWdodCAtIEF2YWlsYWJsZSBoZWlnaHQgaW4gcGl4ZWxzXG4gICAqL1xuICBhYnN0cmFjdCBsYXlvdXQoYXZhaWxhYmxlV2lkdGg6IG51bWJlciwgYXZhaWxhYmxlSGVpZ2h0OiBudW1iZXIpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBjb21wb25lbnQncyB2aXN1YWxzXG4gICAqIENhbGxlZCBhZnRlciBsYXlvdXQgaXMgY29tcGxldGVcbiAgICovXG4gIHByb3RlY3RlZCBhYnN0cmFjdCByZW5kZXIoKTogdm9pZDtcblxuICAvKipcbiAgICogTWFya3MgdGhpcyBjb21wb25lbnQncyBsYXlvdXQgYXMgZGlydHksIHJlcXVpcmluZyByZWNhbGN1bGF0aW9uXG4gICAqL1xuICBwdWJsaWMgbWFya0xheW91dERpcnR5KCk6IHZvaWQge1xuICAgIHRoaXMubGF5b3V0RGlydHkgPSB0cnVlO1xuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgdGhpcy5wYXJlbnQubWFya0xheW91dERpcnR5KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNvbXB1dGVkIGxheW91dCBvZiB0aGlzIGNvbXBvbmVudFxuICAgKi9cbiAgcHVibGljIGdldExheW91dCgpOiBDb21wdXRlZExheW91dCB7XG4gICAgcmV0dXJuIHRoaXMuY29tcHV0ZWRMYXlvdXQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYm94IG1vZGVsIG9mIHRoaXMgY29tcG9uZW50XG4gICAqL1xuICBwdWJsaWMgZ2V0Qm94TW9kZWwoKTogQm94TW9kZWwge1xuICAgIHJldHVybiB0aGlzLmJveE1vZGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGdsb2JhbCBib3VuZHMgb2YgdGhpcyBjb21wb25lbnQgKHBvc2l0aW9uIHJlbGF0aXZlIHRvIHN0YWdlKVxuICAgKi9cbiAgcHVibGljIGdldEdsb2JhbEJvdW5kcygpOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9IHtcbiAgICBjb25zdCBnbG9iYWxQb3MgPSB0aGlzLmNvbnRhaW5lci5nZXRHbG9iYWxQb3NpdGlvbigpO1xuICAgIHJldHVybiB7XG4gICAgICB4OiBnbG9iYWxQb3MueCxcbiAgICAgIHk6IGdsb2JhbFBvcy55LFxuICAgICAgd2lkdGg6IHRoaXMuY29tcHV0ZWRMYXlvdXQud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMuY29tcHV0ZWRMYXlvdXQuaGVpZ2h0XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwb3NpdGlvbiBvZiB0aGlzIGNvbXBvbmVudFxuICAgKi9cbiAgcHVibGljIHNldFBvc2l0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC54ID0geDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LnkgPSB5O1xuICAgIHRoaXMuY29udGFpbmVyLnBvc2l0aW9uLnNldCh4LCB5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGlzIGNvbXBvbmVudFxuICAgKi9cbiAgcHVibGljIHNob3coKTogdm9pZCB7XG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICB0aGlzLmNvbnRhaW5lci52aXNpYmxlID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGlzIGNvbXBvbmVudFxuICAgKi9cbiAgcHVibGljIGhpZGUoKTogdm9pZCB7XG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5jb250YWluZXIudmlzaWJsZSA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBjb21wb25lbnQgY2FuIHJlY2VpdmUgZm9jdXNcbiAgICovXG4gIHB1YmxpYyBjYW5Gb2N1cygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5lbmFibGVkICYmIHRoaXMudmlzaWJsZSAmJiB0aGlzLnRhYkluZGV4ID49IDA7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGlzIGNvbXBvbmVudCBpcyBjdXJyZW50bHkgZm9jdXNlZFxuICAgKi9cbiAgcHVibGljIGlzRm9jdXNlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5mb2N1c2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGNvbXBvbmVudCByZWNlaXZlcyBmb2N1c1xuICAgKiBPdmVycmlkZSBpbiBzdWJjbGFzc2VzIHRvIGN1c3RvbWl6ZSBmb2N1cyBiZWhhdmlvclxuICAgKi9cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgdGhpcy5mb2N1c2VkID0gdHJ1ZTtcbiAgICB0aGlzLnNob3dGb2N1c1JpbmcoKTtcbiAgICB0aGlzLnNjcm9sbEludG9WaWV3KCk7XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIGZvY3VzIHJpbmdcbiAgICovXG4gIHByb3RlY3RlZCBzaG93Rm9jdXNSaW5nKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmZvY3VzUmluZykge1xuICAgICAgdGhpcy51cGRhdGVGb2N1c1JpbmcoKTtcbiAgICAgIHRoaXMuZm9jdXNSaW5nLnZpc2libGUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGxzIHRoaXMgY29tcG9uZW50IGludG8gdmlldyBpZiBpdCdzIGluc2lkZSBhIHNjcm9sbCBjb250YWluZXJcbiAgICovXG4gIHByaXZhdGUgc2Nyb2xsSW50b1ZpZXcoKTogdm9pZCB7XG4gICAgLy8gV2FsayB1cCB0aGUgcGFyZW50IGNoYWluIHRvIGZpbmQgYSBzY3JvbGwgY29udGFpbmVyXG4gICAgbGV0IGN1cnJlbnRQYXJlbnQgPSB0aGlzLnBhcmVudDtcbiAgICB3aGlsZSAoY3VycmVudFBhcmVudCkge1xuICAgICAgLy8gQ2hlY2sgaWYgcGFyZW50IGhhcyBzY3JvbGxUb0NvbXBvbmVudCBtZXRob2QgKGR1Y2sgdHlwaW5nIGZvciBVSVNjcm9sbENvbnRhaW5lcilcbiAgICAgIGlmICgnc2Nyb2xsVG9Db21wb25lbnQnIGluIGN1cnJlbnRQYXJlbnQgJiYgdHlwZW9mIChjdXJyZW50UGFyZW50IGFzIGFueSkuc2Nyb2xsVG9Db21wb25lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgKGN1cnJlbnRQYXJlbnQgYXMgYW55KS5zY3JvbGxUb0NvbXBvbmVudCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjdXJyZW50UGFyZW50ID0gY3VycmVudFBhcmVudC5wYXJlbnQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGNvbXBvbmVudCBsb3NlcyBmb2N1c1xuICAgKiBPdmVycmlkZSBpbiBzdWJjbGFzc2VzIHRvIGN1c3RvbWl6ZSBibHVyIGJlaGF2aW9yXG4gICAqL1xuICBwdWJsaWMgb25CbHVyKCk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuaGlkZUZvY3VzUmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGVzIHRoZSBmb2N1cyByaW5nXG4gICAqL1xuICBwcm90ZWN0ZWQgaGlkZUZvY3VzUmluZygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5mb2N1c1JpbmcpIHtcbiAgICAgIHRoaXMuZm9jdXNSaW5nLnZpc2libGUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveXMgdGhpcyBjb21wb25lbnQgYW5kIGNsZWFucyB1cCByZXNvdXJjZXNcbiAgICovXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuY29udGFpbmVyLmRlc3Ryb3koeyBjaGlsZHJlbjogdHJ1ZSB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgVUlDb21wb25lbnQgfSBmcm9tICcuL3VpLWNvbXBvbmVudCc7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBmb2N1c2FibGUgVUkgY29tcG9uZW50c1xuICpcbiAqIEBjYXRlZ29yeSBVSVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZvY3VzYWJsZSB7XG4gIC8qKiBXaGV0aGVyIHRoaXMgY29tcG9uZW50IGNhbiByZWNlaXZlIGZvY3VzICovXG4gIGNhbkZvY3VzKCk6IGJvb2xlYW47XG4gIC8qKiBDYWxsZWQgd2hlbiBjb21wb25lbnQgcmVjZWl2ZXMgZm9jdXMgKi9cbiAgb25Gb2N1cygpOiB2b2lkO1xuICAvKiogQ2FsbGVkIHdoZW4gY29tcG9uZW50IGxvc2VzIGZvY3VzICovXG4gIG9uQmx1cigpOiB2b2lkO1xuICAvKiogVGhlIHRhYiBpbmRleCBmb3IgZm9jdXMgb3JkZXIgKGxvd2VyIHZhbHVlcyBmb2N1c2VkIGZpcnN0KSAqL1xuICB0YWJJbmRleDogbnVtYmVyO1xuICAvKiogV2hldGhlciB0aGlzIGNvbXBvbmVudCBpcyBjdXJyZW50bHkgZm9jdXNlZCAqL1xuICBpc0ZvY3VzZWQoKTogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBNYW5hZ2VzIGtleWJvYXJkIGZvY3VzIGFuZCB0YWIgbmF2aWdhdGlvbiBmb3IgVUkgY29tcG9uZW50c1xuICpcbiAqIEBjYXRlZ29yeSBVSVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBmb2N1c01hbmFnZXIgPSBuZXcgVUlGb2N1c01hbmFnZXIoKTtcbiAqIGZvY3VzTWFuYWdlci5yZWdpc3RlcihidXR0b24xKTtcbiAqIGZvY3VzTWFuYWdlci5yZWdpc3Rlcih0ZXh0SW5wdXQxKTtcbiAqIGZvY3VzTWFuYWdlci5yZWdpc3RlcihidXR0b24yKTtcbiAqXG4gKiAvLyBGb2N1cyBmaXJzdCBjb21wb25lbnRcbiAqIGZvY3VzTWFuYWdlci5mb2N1c0ZpcnN0KCk7XG4gKlxuICogLy8gT3IgZm9jdXMgc3BlY2lmaWMgY29tcG9uZW50XG4gKiBmb2N1c01hbmFnZXIuZm9jdXModGV4dElucHV0MSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFVJRm9jdXNNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFVJRm9jdXNNYW5hZ2VyIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBmb2N1c2FibGVDb21wb25lbnRzOiAoVUlDb21wb25lbnQgJiBGb2N1c2FibGUpW10gPSBbXTtcbiAgcHJpdmF0ZSBjdXJyZW50Rm9jdXNJbmRleDogbnVtYmVyID0gLTE7XG4gIHByaXZhdGUga2V5ZG93bkhhbmRsZXI6ICgoZTogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNldHVwS2V5Ym9hcmRMaXN0ZW5lcnMoKTtcbiAgICAvLyBTZXQgYXMgc2luZ2xldG9uIGluc3RhbmNlXG4gICAgVUlGb2N1c01hbmFnZXIuaW5zdGFuY2UgPSB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgZ2xvYmFsIGZvY3VzIG1hbmFnZXIgaW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBVSUZvY3VzTWFuYWdlciB8IG51bGwge1xuICAgIHJldHVybiBVSUZvY3VzTWFuYWdlci5pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIGdsb2JhbCBrZXlib2FyZCBsaXN0ZW5lcnMgZm9yIHRhYiBuYXZpZ2F0aW9uXG4gICAqL1xuICBwcml2YXRlIHNldHVwS2V5Ym9hcmRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cbiAgICAvLyBSZW1vdmUgZXhpc3RpbmcgaGFuZGxlciBpZiBwcmVzZW50IHRvIHByZXZlbnQgZHVwbGljYXRlc1xuICAgIGlmICh0aGlzLmtleWRvd25IYW5kbGVyKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xuICAgIH1cblxuICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnVGFiJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzUHJldmlvdXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmZvY3VzTmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duSGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgZm9jdXNhYmxlIGNvbXBvbmVudFxuICAgKi9cbiAgcmVnaXN0ZXIoY29tcG9uZW50OiBVSUNvbXBvbmVudCAmIEZvY3VzYWJsZSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5mb2N1c2FibGVDb21wb25lbnRzLmluY2x1ZGVzKGNvbXBvbmVudCkpIHtcbiAgICAgIHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICB0aGlzLnNvcnRCeVRhYkluZGV4KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEF1dG9tYXRpY2FsbHkgZGlzY292ZXJzIGFuZCByZWdpc3RlcnMgYWxsIGZvY3VzYWJsZSBjb21wb25lbnRzIGluIGEgY29udGFpbmVyXG4gICAqIFdhbGtzIHRoZSBjb21wb25lbnQgdHJlZSBhbmQgZmluZHMgYWxsIGNvbXBvbmVudHMgd2l0aCB0YWJJbmRleCA+PSAwXG4gICAqL1xuICByZWdpc3RlckNvbnRhaW5lcihjb250YWluZXI6IFVJQ29tcG9uZW50KTogdm9pZCB7XG4gICAgdGhpcy5kaXNjb3ZlckZvY3VzYWJsZUNvbXBvbmVudHMoY29udGFpbmVyKTtcbiAgICB0aGlzLnNvcnRCeVRhYkluZGV4KCk7XG4gIH1cblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgZGlzY292ZXJzIGZvY3VzYWJsZSBjb21wb25lbnRzIGluIHRoZSB0cmVlXG4gICAqL1xuICBwcml2YXRlIGRpc2NvdmVyRm9jdXNhYmxlQ29tcG9uZW50cyhjb21wb25lbnQ6IFVJQ29tcG9uZW50KTogdm9pZCB7XG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBjb21wb25lbnQgaXMgZm9jdXNhYmxlXG4gICAgaWYgKHRoaXMuaXNGb2N1c2FibGVDb21wb25lbnQoY29tcG9uZW50KSkge1xuICAgICAgdGhpcy5yZWdpc3Rlcihjb21wb25lbnQgYXMgVUlDb21wb25lbnQgJiBGb2N1c2FibGUpO1xuICAgIH1cblxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNoZWNrIGNoaWxkcmVuIChpZiBpdCdzIGEgY29udGFpbmVyIHR5cGUpXG4gICAgaWYgKCdjaGlsZHJlbicgaW4gY29tcG9uZW50ICYmIEFycmF5LmlzQXJyYXkoKGNvbXBvbmVudCBhcyBhbnkpLmNoaWxkcmVuKSkge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSAoY29tcG9uZW50IGFzIGFueSkuY2hpbGRyZW4gYXMgVUlDb21wb25lbnRbXTtcbiAgICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gdGhpcy5kaXNjb3ZlckZvY3VzYWJsZUNvbXBvbmVudHMoY2hpbGQpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGEgY29tcG9uZW50IGltcGxlbWVudHMgdGhlIEZvY3VzYWJsZSBpbnRlcmZhY2VcbiAgICovXG4gIHByaXZhdGUgaXNGb2N1c2FibGVDb21wb25lbnQoY29tcG9uZW50OiBVSUNvbXBvbmVudCk6IGNvbXBvbmVudCBpcyBVSUNvbXBvbmVudCAmIEZvY3VzYWJsZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHR5cGVvZiBjb21wb25lbnQudGFiSW5kZXggPT09ICdudW1iZXInICYmXG4gICAgICBjb21wb25lbnQudGFiSW5kZXggPj0gMCAmJlxuICAgICAgdHlwZW9mIGNvbXBvbmVudC5jYW5Gb2N1cyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgdHlwZW9mIGNvbXBvbmVudC5vbkZvY3VzID09PSAnZnVuY3Rpb24nICYmXG4gICAgICB0eXBlb2YgY29tcG9uZW50Lm9uQmx1ciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgdHlwZW9mIGNvbXBvbmVudC5pc0ZvY3VzZWQgPT09ICdmdW5jdGlvbidcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXJzIGEgZm9jdXNhYmxlIGNvbXBvbmVudFxuICAgKi9cbiAgdW5yZWdpc3Rlcihjb21wb25lbnQ6IFVJQ29tcG9uZW50ICYgRm9jdXNhYmxlKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHMuaW5kZXhPZihjb21wb25lbnQpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5jdXJyZW50Rm9jdXNJbmRleCkge1xuICAgICAgICB0aGlzLmJsdXIoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgaWYgKHRoaXMuY3VycmVudEZvY3VzSW5kZXggPiBpbmRleCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRGb2N1c0luZGV4LS07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNvcnRzIGNvbXBvbmVudHMgYnkgdGFiIGluZGV4XG4gICAqL1xuICBwcml2YXRlIHNvcnRCeVRhYkluZGV4KCk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50cy5zb3J0KChhLCBiKSA9PiBhLnRhYkluZGV4IC0gYi50YWJJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogRm9jdXNlcyBhIHNwZWNpZmljIGNvbXBvbmVudFxuICAgKi9cbiAgZm9jdXMoY29tcG9uZW50OiBVSUNvbXBvbmVudCAmIEZvY3VzYWJsZSk6IHZvaWQge1xuICAgIGlmICghY29tcG9uZW50LmNhbkZvY3VzKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50cy5pbmRleE9mKGNvbXBvbmVudCk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEJsdXIgY3VycmVudCBmb2N1c1xuICAgIGlmICh0aGlzLmN1cnJlbnRGb2N1c0luZGV4ICE9PSAtMSAmJiB0aGlzLmN1cnJlbnRGb2N1c0luZGV4ICE9PSBpbmRleCkge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50c1t0aGlzLmN1cnJlbnRGb2N1c0luZGV4XTtcbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIGN1cnJlbnQub25CbHVyKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9jdXMgbmV3IGNvbXBvbmVudFxuICAgIHRoaXMuY3VycmVudEZvY3VzSW5kZXggPSBpbmRleDtcbiAgICBjb21wb25lbnQub25Gb2N1cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgZm9jdXMgZm9yIGEgY29tcG9uZW50IChjYWxsZWQgYnkgY29tcG9uZW50cyB3aGVuIGNsaWNrZWQpXG4gICAqIFRoaXMgaXMgYSBoZWxwZXIgdGhhdCBmaW5kcyB0aGUgY29tcG9uZW50IGFuZCBjYWxscyBmb2N1cygpXG4gICAqL1xuICByZXF1ZXN0Rm9jdXMoY29tcG9uZW50OiBVSUNvbXBvbmVudCAmIEZvY3VzYWJsZSk6IHZvaWQge1xuICAgIHRoaXMuZm9jdXMoY29tcG9uZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCbHVycyB0aGUgY3VycmVudGx5IGZvY3VzZWQgY29tcG9uZW50XG4gICAqL1xuICBibHVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRGb2N1c0luZGV4ICE9PSAtMSkge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50c1t0aGlzLmN1cnJlbnRGb2N1c0luZGV4XTtcbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIGN1cnJlbnQub25CbHVyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnJlbnRGb2N1c0luZGV4ID0gLTE7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvY3VzZXMgdGhlIG5leHQgY29tcG9uZW50IGluIHRhYiBvcmRlclxuICAgKi9cbiAgZm9jdXNOZXh0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBsZXQgbmV4dEluZGV4ID0gdGhpcy5jdXJyZW50Rm9jdXNJbmRleCArIDE7XG4gICAgbGV0IGF0dGVtcHRzID0gMDtcblxuICAgIC8vIEZpbmQgbmV4dCBmb2N1c2FibGUgY29tcG9uZW50XG4gICAgd2hpbGUgKGF0dGVtcHRzIDwgdGhpcy5mb2N1c2FibGVDb21wb25lbnRzLmxlbmd0aCkge1xuICAgICAgaWYgKG5leHRJbmRleCA+PSB0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAgIG5leHRJbmRleCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50c1tuZXh0SW5kZXhdO1xuICAgICAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQuY2FuRm9jdXMoKSkge1xuICAgICAgICB0aGlzLmZvY3VzKGNvbXBvbmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbmV4dEluZGV4Kys7XG4gICAgICBhdHRlbXB0cysrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1c2VzIHRoZSBwcmV2aW91cyBjb21wb25lbnQgaW4gdGFiIG9yZGVyXG4gICAqL1xuICBmb2N1c1ByZXZpb3VzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBsZXQgcHJldkluZGV4ID0gdGhpcy5jdXJyZW50Rm9jdXNJbmRleCAtIDE7XG4gICAgbGV0IGF0dGVtcHRzID0gMDtcblxuICAgIC8vIEZpbmQgcHJldmlvdXMgZm9jdXNhYmxlIGNvbXBvbmVudFxuICAgIHdoaWxlIChhdHRlbXB0cyA8IHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgIGlmIChwcmV2SW5kZXggPCAwKSB7XG4gICAgICAgIHByZXZJbmRleCA9IHRoaXMuZm9jdXNhYmxlQ29tcG9uZW50cy5sZW5ndGggLSAxO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHNbcHJldkluZGV4XTtcbiAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmNhbkZvY3VzKCkpIHtcbiAgICAgICAgdGhpcy5mb2N1cyhjb21wb25lbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHByZXZJbmRleC0tO1xuICAgICAgYXR0ZW1wdHMrKztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9jdXNlcyB0aGUgZmlyc3QgZm9jdXNhYmxlIGNvbXBvbmVudFxuICAgKi9cbiAgZm9jdXNGaXJzdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5mb2N1c2FibGVDb21wb25lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgdGhpcy5mb2N1c2FibGVDb21wb25lbnRzKSB7XG4gICAgICBpZiAoY29tcG9uZW50LmNhbkZvY3VzKCkpIHtcbiAgICAgICAgdGhpcy5mb2N1cyhjb21wb25lbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvY3VzZXMgdGhlIGxhc3QgZm9jdXNhYmxlIGNvbXBvbmVudFxuICAgKi9cbiAgZm9jdXNMYXN0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBmb3IgKGxldCBpID0gdGhpcy5mb2N1c2FibGVDb21wb25lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHNbaV07XG4gICAgICBpZiAoY29tcG9uZW50LmNhbkZvY3VzKCkpIHtcbiAgICAgICAgdGhpcy5mb2N1cyhjb21wb25lbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0Q3VycmVudEZvY3VzKCk6IChVSUNvbXBvbmVudCAmIEZvY3VzYWJsZSkgfCBudWxsIHtcbiAgICBpZiAodGhpcy5jdXJyZW50Rm9jdXNJbmRleCA9PT0gLTEpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHNbdGhpcy5jdXJyZW50Rm9jdXNJbmRleF0gfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFsbCByZWdpc3RlcmVkIGZvY3VzYWJsZSBjb21wb25lbnRzXG4gICAqL1xuICBnZXRGb2N1c2FibGVDb21wb25lbnRzKCk6IChVSUNvbXBvbmVudCAmIEZvY3VzYWJsZSlbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmZvY3VzYWJsZUNvbXBvbmVudHNdO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgcmVnaXN0ZXJlZCBjb21wb25lbnRzXG4gICAqL1xuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLmJsdXIoKTtcbiAgICB0aGlzLmZvY3VzYWJsZUNvbXBvbmVudHMgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRGb2N1c0luZGV4ID0gLTE7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCB3aGVuIGRlc3Ryb3lpbmcgdGhlIGZvY3VzIG1hbmFnZXJcbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHRoaXMua2V5ZG93bkhhbmRsZXIpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duSGFuZGxlcik7XG4gICAgfVxuICAgIHRoaXMuY2xlYXIoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBJWEkgZnJvbSAncGl4aS5qcyc7XG5pbXBvcnQgeyBVSUNvbXBvbmVudCB9IGZyb20gJy4uL2NvcmUvdWktY29tcG9uZW50JztcbmltcG9ydCB7IEJveE1vZGVsLCBNZWFzdXJlZFNpemUgfSBmcm9tICcuLi9jb3JlL2JveC1tb2RlbCc7XG5pbXBvcnQgeyBFZGdlSW5zZXRzIH0gZnJvbSAnLi4vY29yZS9lZGdlLWluc2V0cyc7XG5cbi8qKiBGbGV4Ym94IGRpcmVjdGlvbi4gKi9cbmV4cG9ydCBlbnVtIEZsZXhEaXJlY3Rpb24ge1xuICBSb3cgPSAncm93JywgICAgICAgICAgICAgIC8vIEhvcml6b250YWwsIGxlZnQgdG8gcmlnaHRcbiAgUm93UmV2ZXJzZSA9ICdyb3ctcmV2ZXJzZScsXG4gIENvbHVtbiA9ICdjb2x1bW4nLCAgICAgICAgLy8gVmVydGljYWwsIHRvcCB0byBib3R0b21cbiAgQ29sdW1uUmV2ZXJzZSA9ICdjb2x1bW4tcmV2ZXJzZSdcbn1cblxuLyoqIE1haW4gYXhpcyBhbGlnbm1lbnQuICovXG5leHBvcnQgZW51bSBGbGV4SnVzdGlmeSB7XG4gIFN0YXJ0ID0gJ3N0YXJ0JywgICAgICAgICAgLy8gUGFjayBpdGVtcyB0byBzdGFydFxuICBFbmQgPSAnZW5kJywgICAgICAgICAgICAgIC8vIFBhY2sgaXRlbXMgdG8gZW5kXG4gIENlbnRlciA9ICdjZW50ZXInLCAgICAgICAgLy8gQ2VudGVyIGl0ZW1zXG4gIFNwYWNlQmV0d2VlbiA9ICdzcGFjZS1iZXR3ZWVuJywgIC8vIFNwYWNlIGJldHdlZW4gaXRlbXNcbiAgU3BhY2VBcm91bmQgPSAnc3BhY2UtYXJvdW5kJywgICAgLy8gU3BhY2UgYXJvdW5kIGl0ZW1zXG4gIFNwYWNlRXZlbmx5ID0gJ3NwYWNlLWV2ZW5seScgICAgIC8vIEV2ZW4gc3BhY2UgYmV0d2VlbiBpdGVtc1xufVxuXG4vKiogQ3Jvc3MgYXhpcyBhbGlnbm1lbnQuICovXG5leHBvcnQgZW51bSBGbGV4QWxpZ24ge1xuICBTdGFydCA9ICdzdGFydCcsXG4gIEVuZCA9ICdlbmQnLFxuICBDZW50ZXIgPSAnY2VudGVyJyxcbiAgU3RyZXRjaCA9ICdzdHJldGNoJyAgICAgICAvLyBTdHJldGNoIHRvIGZpbGwgY3Jvc3MgYXhpc1xufVxuXG4vKiogRmxleENvbnRhaW5lciBjb25maWd1cmF0aW9uLiAqL1xuZXhwb3J0IGludGVyZmFjZSBGbGV4Q29udGFpbmVyUHJvcHMge1xuICBkaXJlY3Rpb24/OiBGbGV4RGlyZWN0aW9uO1xuICBqdXN0aWZ5PzogRmxleEp1c3RpZnk7XG4gIGFsaWduPzogRmxleEFsaWduO1xuICBnYXA/OiBudW1iZXI7ICAgICAgICAgICAgICAvLyBTcGFjZSBiZXR3ZWVuIGNoaWxkcmVuXG4gIHdyYXA/OiBib29sZWFuOyAgICAgICAgICAgIC8vIEFsbG93IHdyYXBwaW5nIChQaGFzZSAyKVxuICBwYWRkaW5nPzogRWRnZUluc2V0cztcbiAgd2lkdGg/OiBudW1iZXIgfCAnZmlsbCc7XG4gIGhlaWdodD86IG51bWJlciB8ICdmaWxsJztcbn1cblxuLyoqXG4gKiBGbGV4Ym94LXN0eWxlIGxheW91dCBjb250YWluZXIgZm9yIGFycmFuZ2luZyBVSSBjb21wb25lbnRzLlxuICogU3VwcG9ydHMgcm93L2NvbHVtbiBkaXJlY3Rpb24sIGFsaWdubWVudCwganVzdGlmeSwgYW5kIGdhcHMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiAvLyBIb3Jpem9udGFsIHJvdyB3aXRoIGNlbnRlcmVkIGl0ZW1zXG4gKiBjb25zdCB0b29sYmFyID0gbmV3IEZsZXhDb250YWluZXIoe1xuICogICBkaXJlY3Rpb246IEZsZXhEaXJlY3Rpb24uUm93LFxuICogICBqdXN0aWZ5OiBGbGV4SnVzdGlmeS5DZW50ZXIsXG4gKiAgIGFsaWduOiBGbGV4QWxpZ24uQ2VudGVyLFxuICogICBnYXA6IDEwLFxuICogICBwYWRkaW5nOiBFZGdlSW5zZXRzLmFsbCgyMClcbiAqIH0pO1xuICogdG9vbGJhci5hZGRDaGlsZChidXR0b24xKTtcbiAqIHRvb2xiYXIuYWRkQ2hpbGQoYnV0dG9uMik7XG4gKiB0b29sYmFyLmFkZENoaWxkKGJ1dHRvbjMpO1xuICpcbiAqIC8vIFZlcnRpY2FsIGNvbHVtbiB3aXRoIHNwYWNlIGJldHdlZW5cbiAqIGNvbnN0IHNpZGViYXIgPSBuZXcgRmxleENvbnRhaW5lcih7XG4gKiAgIGRpcmVjdGlvbjogRmxleERpcmVjdGlvbi5Db2x1bW4sXG4gKiAgIGp1c3RpZnk6IEZsZXhKdXN0aWZ5LlNwYWNlQmV0d2VlbixcbiAqICAgd2lkdGg6IDIwMCxcbiAqICAgaGVpZ2h0OiAnZmlsbCdcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBGbGV4Q29udGFpbmVyIGV4dGVuZHMgVUlDb21wb25lbnQge1xuICBwcml2YXRlIHByb3BzOiBSZXF1aXJlZDxPbWl0PEZsZXhDb250YWluZXJQcm9wcywgJ3BhZGRpbmcnIHwgJ3dpZHRoJyB8ICdoZWlnaHQnPj47XG4gIHB1YmxpYyBjaGlsZHJlbjogVUlDb21wb25lbnRbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBGbGV4Q29udGFpbmVyUHJvcHMgPSB7fSkge1xuICAgIGNvbnN0IGJveE1vZGVsOiBQYXJ0aWFsPEJveE1vZGVsPiA9IHtcbiAgICAgIHBhZGRpbmc6IHByb3BzLnBhZGRpbmcgPz8gRWRnZUluc2V0cy56ZXJvKCksXG4gICAgICB3aWR0aDogcHJvcHMud2lkdGggPz8gJ2F1dG8nLFxuICAgICAgaGVpZ2h0OiBwcm9wcy5oZWlnaHQgPz8gJ2F1dG8nXG4gICAgfTtcblxuICAgIHN1cGVyKGJveE1vZGVsKTtcblxuICAgIHRoaXMucHJvcHMgPSB7XG4gICAgICBkaXJlY3Rpb246IHByb3BzLmRpcmVjdGlvbiA/PyBGbGV4RGlyZWN0aW9uLlJvdyxcbiAgICAgIGp1c3RpZnk6IHByb3BzLmp1c3RpZnkgPz8gRmxleEp1c3RpZnkuU3RhcnQsXG4gICAgICBhbGlnbjogcHJvcHMuYWxpZ24gPz8gRmxleEFsaWduLlN0YXJ0LFxuICAgICAgZ2FwOiBwcm9wcy5nYXAgPz8gMCxcbiAgICAgIHdyYXA6IHByb3BzLndyYXAgPz8gZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgLyoqIEFkZCBjaGlsZCBjb21wb25lbnQuICovXG4gIGFkZENoaWxkKGNoaWxkOiBVSUNvbXBvbmVudCk6IHZvaWQge1xuICAgIGNoaWxkLnBhcmVudCA9IHRoaXM7XG4gICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDaGlsZChjaGlsZC5jb250YWluZXIpO1xuICAgIHRoaXMubWFya0xheW91dERpcnR5KCk7XG4gIH1cblxuICAvKiogUmVtb3ZlIGNoaWxkIGNvbXBvbmVudC4gKi9cbiAgcmVtb3ZlQ2hpbGQoY2hpbGQ6IFVJQ29tcG9uZW50KTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmNoaWxkcmVuLmluZGV4T2YoY2hpbGQpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKGNoaWxkLmNvbnRhaW5lcik7XG4gICAgICBjaGlsZC5wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLm1hcmtMYXlvdXREaXJ0eSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbWVhc3VyZSgpOiBNZWFzdXJlZFNpemUge1xuICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcGFkZGluZyA9IHRoaXMuYm94TW9kZWwucGFkZGluZztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoOiBwYWRkaW5nLmhvcml6b250YWwsXG4gICAgICAgIGhlaWdodDogcGFkZGluZy52ZXJ0aWNhbFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNZWFzdXJlIGFsbCBjaGlsZHJlblxuICAgIGNvbnN0IGNoaWxkU2l6ZXMgPSB0aGlzLmNoaWxkcmVuLm1hcChjaGlsZCA9PiBjaGlsZC5tZWFzdXJlKCkpO1xuICAgIGNvbnN0IHsgZGlyZWN0aW9uLCBnYXAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMuYm94TW9kZWwucGFkZGluZztcblxuICAgIGNvbnN0IGlzUm93ID0gZGlyZWN0aW9uID09PSBGbGV4RGlyZWN0aW9uLlJvdyB8fCBkaXJlY3Rpb24gPT09IEZsZXhEaXJlY3Rpb24uUm93UmV2ZXJzZTtcbiAgICBjb25zdCB0b3RhbEdhcCA9IGdhcCAqICh0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDEpO1xuXG4gICAgbGV0IG1lYXN1cmVkV2lkdGggPSAwO1xuICAgIGxldCBtZWFzdXJlZEhlaWdodCA9IDA7XG5cbiAgICBpZiAoaXNSb3cpIHtcbiAgICAgIC8vIFJvdzogc3VtIHdpZHRocywgbWF4IGhlaWdodFxuICAgICAgbWVhc3VyZWRXaWR0aCA9IGNoaWxkU2l6ZXMucmVkdWNlKChzdW0sIHNpemUpID0+IHN1bSArIHNpemUud2lkdGgsIDApICsgdG90YWxHYXA7XG4gICAgICBtZWFzdXJlZEhlaWdodCA9IE1hdGgubWF4KC4uLmNoaWxkU2l6ZXMubWFwKHNpemUgPT4gc2l6ZS5oZWlnaHQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ29sdW1uOiBtYXggd2lkdGgsIHN1bSBoZWlnaHRzXG4gICAgICBtZWFzdXJlZFdpZHRoID0gTWF0aC5tYXgoLi4uY2hpbGRTaXplcy5tYXAoc2l6ZSA9PiBzaXplLndpZHRoKSk7XG4gICAgICBtZWFzdXJlZEhlaWdodCA9IGNoaWxkU2l6ZXMucmVkdWNlKChzdW0sIHNpemUpID0+IHN1bSArIHNpemUuaGVpZ2h0LCAwKSArIHRvdGFsR2FwO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogbWVhc3VyZWRXaWR0aCArIHBhZGRpbmcuaG9yaXpvbnRhbCxcbiAgICAgIGhlaWdodDogbWVhc3VyZWRIZWlnaHQgKyBwYWRkaW5nLnZlcnRpY2FsXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgbGF5b3V0KGF2YWlsYWJsZVdpZHRoOiBudW1iZXIsIGF2YWlsYWJsZUhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMuYm94TW9kZWwucGFkZGluZztcbiAgICBjb25zdCB7IGRpcmVjdGlvbiwganVzdGlmeSwgYWxpZ24sIGdhcCB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIERldGVybWluZSBjb250YWluZXIgc2l6ZVxuICAgIGxldCBjb250YWluZXJXaWR0aDogbnVtYmVyO1xuICAgIGxldCBjb250YWluZXJIZWlnaHQ6IG51bWJlcjtcblxuICAgIGlmICh0aGlzLmJveE1vZGVsLndpZHRoID09PSAnZmlsbCcpIHtcbiAgICAgIGNvbnRhaW5lcldpZHRoID0gYXZhaWxhYmxlV2lkdGg7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5ib3hNb2RlbC53aWR0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGNvbnRhaW5lcldpZHRoID0gdGhpcy5ib3hNb2RlbC53aWR0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWVhc3VyZWQgPSB0aGlzLm1lYXN1cmUoKTtcbiAgICAgIGNvbnRhaW5lcldpZHRoID0gbWVhc3VyZWQud2lkdGg7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYm94TW9kZWwuaGVpZ2h0ID09PSAnZmlsbCcpIHtcbiAgICAgIGNvbnRhaW5lckhlaWdodCA9IGF2YWlsYWJsZUhlaWdodDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLmJveE1vZGVsLmhlaWdodCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGNvbnRhaW5lckhlaWdodCA9IHRoaXMuYm94TW9kZWwuaGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtZWFzdXJlZCA9IHRoaXMubWVhc3VyZSgpO1xuICAgICAgY29udGFpbmVySGVpZ2h0ID0gbWVhc3VyZWQuaGVpZ2h0O1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBjb21wdXRlZCBsYXlvdXRcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LndpZHRoID0gY29udGFpbmVyV2lkdGg7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC5oZWlnaHQgPSBjb250YWluZXJIZWlnaHQ7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC5jb250ZW50WCA9IHBhZGRpbmcubGVmdDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmNvbnRlbnRZID0gcGFkZGluZy50b3A7XG4gICAgdGhpcy5jb21wdXRlZExheW91dC5jb250ZW50V2lkdGggPSBjb250YWluZXJXaWR0aCAtIHBhZGRpbmcuaG9yaXpvbnRhbDtcbiAgICB0aGlzLmNvbXB1dGVkTGF5b3V0LmNvbnRlbnRIZWlnaHQgPSBjb250YWluZXJIZWlnaHQgLSBwYWRkaW5nLnZlcnRpY2FsO1xuXG4gICAgLy8gTGF5b3V0IGNoaWxkcmVuXG4gICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5sYXlvdXRDaGlsZHJlbigpO1xuICAgIH1cblxuICAgIHRoaXMubGF5b3V0RGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcml2YXRlIGxheW91dENoaWxkcmVuKCk6IHZvaWQge1xuICAgIGNvbnN0IHsgZGlyZWN0aW9uLCBqdXN0aWZ5LCBhbGlnbiwgZ2FwIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHBhZGRpbmcgPSB0aGlzLmJveE1vZGVsLnBhZGRpbmc7XG4gICAgY29uc3QgY29udGVudFdpZHRoID0gdGhpcy5jb21wdXRlZExheW91dC5jb250ZW50V2lkdGg7XG4gICAgY29uc3QgY29udGVudEhlaWdodCA9IHRoaXMuY29tcHV0ZWRMYXlvdXQuY29udGVudEhlaWdodDtcblxuICAgIGNvbnN0IGlzUm93ID0gZGlyZWN0aW9uID09PSBGbGV4RGlyZWN0aW9uLlJvdyB8fCBkaXJlY3Rpb24gPT09IEZsZXhEaXJlY3Rpb24uUm93UmV2ZXJzZTtcblxuICAgIC8vIE1lYXN1cmUgY2hpbGRyZW5cbiAgICBjb25zdCBjaGlsZFNpemVzID0gdGhpcy5jaGlsZHJlbi5tYXAoY2hpbGQgPT4gY2hpbGQubWVhc3VyZSgpKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBtYWluIGF4aXMgc2l6ZVxuICAgIGNvbnN0IHRvdGFsR2FwID0gZ2FwICogKHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMSk7XG4gICAgY29uc3QgdG90YWxDaGlsZFNpemUgPSBpc1Jvd1xuICAgICAgPyBjaGlsZFNpemVzLnJlZHVjZSgoc3VtLCBzaXplKSA9PiBzdW0gKyBzaXplLndpZHRoLCAwKVxuICAgICAgOiBjaGlsZFNpemVzLnJlZHVjZSgoc3VtLCBzaXplKSA9PiBzdW0gKyBzaXplLmhlaWdodCwgMCk7XG5cbiAgICBjb25zdCBtYWluQXhpc1NpemUgPSBpc1JvdyA/IGNvbnRlbnRXaWR0aCA6IGNvbnRlbnRIZWlnaHQ7XG4gICAgY29uc3QgY3Jvc3NBeGlzU2l6ZSA9IGlzUm93ID8gY29udGVudEhlaWdodCA6IGNvbnRlbnRXaWR0aDtcbiAgICBjb25zdCBmcmVlU3BhY2UgPSBtYWluQXhpc1NpemUgLSB0b3RhbENoaWxkU2l6ZSAtIHRvdGFsR2FwO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHN0YXJ0aW5nIHBvc2l0aW9uIGJhc2VkIG9uIGp1c3RpZnlcbiAgICBsZXQgbWFpbkF4aXNPZmZzZXQgPSAwO1xuICAgIGxldCBzcGFjZUJldHdlZW4gPSAwO1xuXG4gICAgc3dpdGNoIChqdXN0aWZ5KSB7XG4gICAgICBjYXNlIEZsZXhKdXN0aWZ5LlN0YXJ0OlxuICAgICAgICBtYWluQXhpc09mZnNldCA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBGbGV4SnVzdGlmeS5FbmQ6XG4gICAgICAgIG1haW5BeGlzT2Zmc2V0ID0gZnJlZVNwYWNlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRmxleEp1c3RpZnkuQ2VudGVyOlxuICAgICAgICBtYWluQXhpc09mZnNldCA9IGZyZWVTcGFjZSAvIDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBGbGV4SnVzdGlmeS5TcGFjZUJldHdlZW46XG4gICAgICAgIHNwYWNlQmV0d2VlbiA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoID4gMSA/IGZyZWVTcGFjZSAvICh0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDEpIDogMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEZsZXhKdXN0aWZ5LlNwYWNlQXJvdW5kOlxuICAgICAgICBzcGFjZUJldHdlZW4gPSBmcmVlU3BhY2UgLyB0aGlzLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgbWFpbkF4aXNPZmZzZXQgPSBzcGFjZUJldHdlZW4gLyAyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRmxleEp1c3RpZnkuU3BhY2VFdmVubHk6XG4gICAgICAgIHNwYWNlQmV0d2VlbiA9IGZyZWVTcGFjZSAvICh0aGlzLmNoaWxkcmVuLmxlbmd0aCArIDEpO1xuICAgICAgICBtYWluQXhpc09mZnNldCA9IHNwYWNlQmV0d2VlbjtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gUG9zaXRpb24gY2hpbGRyZW5cbiAgICBsZXQgY3VycmVudFBvc2l0aW9uID0gbWFpbkF4aXNPZmZzZXQ7XG5cbiAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY2hpbGRTaXplID0gY2hpbGRTaXplc1tpbmRleF07XG5cbiAgICAgIC8vIExheW91dCBjaGlsZFxuICAgICAgY2hpbGQubGF5b3V0KGNoaWxkU2l6ZS53aWR0aCwgY2hpbGRTaXplLmhlaWdodCk7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBjcm9zcyBheGlzIHBvc2l0aW9uIGJhc2VkIG9uIGFsaWduXG4gICAgICBsZXQgY3Jvc3NBeGlzUG9zaXRpb24gPSAwO1xuXG4gICAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICAgIGNhc2UgRmxleEFsaWduLlN0YXJ0OlxuICAgICAgICAgIGNyb3NzQXhpc1Bvc2l0aW9uID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBGbGV4QWxpZ24uRW5kOlxuICAgICAgICAgIGNyb3NzQXhpc1Bvc2l0aW9uID0gY3Jvc3NBeGlzU2l6ZSAtIChpc1JvdyA/IGNoaWxkU2l6ZS5oZWlnaHQgOiBjaGlsZFNpemUud2lkdGgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEZsZXhBbGlnbi5DZW50ZXI6XG4gICAgICAgICAgY3Jvc3NBeGlzUG9zaXRpb24gPSAoY3Jvc3NBeGlzU2l6ZSAtIChpc1JvdyA/IGNoaWxkU2l6ZS5oZWlnaHQgOiBjaGlsZFNpemUud2lkdGgpKSAvIDI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgRmxleEFsaWduLlN0cmV0Y2g6XG4gICAgICAgICAgLy8gU3RyZXRjaCBjaGlsZCB0byBmaWxsIGNyb3NzIGF4aXMgKGltcGxlbWVudCBsYXRlcilcbiAgICAgICAgICBjcm9zc0F4aXNQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldCBjaGlsZCBwb3NpdGlvblxuICAgICAgaWYgKGlzUm93KSB7XG4gICAgICAgIGNoaWxkLnNldFBvc2l0aW9uKFxuICAgICAgICAgIHBhZGRpbmcubGVmdCArIGN1cnJlbnRQb3NpdGlvbixcbiAgICAgICAgICBwYWRkaW5nLnRvcCArIGNyb3NzQXhpc1Bvc2l0aW9uXG4gICAgICAgICk7XG4gICAgICAgIGN1cnJlbnRQb3NpdGlvbiArPSBjaGlsZFNpemUud2lkdGggKyBnYXAgKyBzcGFjZUJldHdlZW47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGlsZC5zZXRQb3NpdGlvbihcbiAgICAgICAgICBwYWRkaW5nLmxlZnQgKyBjcm9zc0F4aXNQb3NpdGlvbixcbiAgICAgICAgICBwYWRkaW5nLnRvcCArIGN1cnJlbnRQb3NpdGlvblxuICAgICAgICApO1xuICAgICAgICBjdXJyZW50UG9zaXRpb24gKz0gY2hpbGRTaXplLmhlaWdodCArIGdhcCArIHNwYWNlQmV0d2VlbjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiB2b2lkIHtcbiAgICAvLyBGbGV4Q29udGFpbmVyIGl0c2VsZiBoYXMgbm8gdmlzdWFsIHJlcHJlc2VudGF0aW9uXG4gICAgLy8gQ291bGQgYWRkIGRlYnVnIGJvcmRlcnMgaGVyZSBpZiBuZWVkZWRcbiAgfVxufVxuIiwiLyoqXG4gKiBQaXhlbC1wZXJmZWN0IGdyaWQgc3lzdGVtIGZvciBjb25zaXN0ZW50IFVJIG1lYXN1cmVtZW50cy5cbiAqIEFsbCBtZWFzdXJlbWVudHMgYXJlIGluIGdyaWQgdW5pdHMgdGhhdCBzY2FsZSB0byBhY3R1YWwgcGl4ZWxzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogLy8gVXNlIGdsb2JhbCBoZWxwZXJzIChkZWZhdWx0IDR4IHNjYWxlKVxuICogY29uc3Qgd2lkdGggPSBweCgxMCk7ICAgICAgLy8gMTAgdW5pdHMgPSA0MHB4XG4gKiBjb25zdCBncmlkVW5pdHMgPSB1bml0cyg0MCk7IC8vIDQwcHggPSAxMCB1bml0c1xuICpcbiAqIC8vIEFjY2VzcyBncmlkIGNvbnN0YW50c1xuICogY29uc3QgcGFkZGluZyA9IHB4KEdSSUQucGFkZGluZyk7ICAvLyBEZWZhdWx0IHBhZGRpbmcgaW4gcGl4ZWxzXG4gKiBjb25zdCBnYXAgPSBweChHUklELmdhcCk7ICAgICAgICAgIC8vIERlZmF1bHQgZ2FwIGluIHBpeGVsc1xuICpcbiAqIC8vIENyZWF0ZSBjdXN0b20gZ3JpZCB3aXRoIGRpZmZlcmVudCBzY2FsZVxuICogY29uc3QgZ3JpZDJ4ID0gbmV3IFBpeGVsR3JpZCh7IHNjYWxlOiAyIH0pO1xuICogY29uc3Qgd2lkdGgyeCA9IGdyaWQyeC5weCgxMCk7ICAvLyAxMCB1bml0cyA9IDIwcHggYXQgMnhcbiAqIGBgYFxuICovXG5cbi8qKiBQaXhlbEdyaWQgY29uZmlndXJhdGlvbi4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGl4ZWxHcmlkQ29uZmlnIHtcbiAgLyoqIEJhc2UgcGl4ZWwgdW5pdCBhdCAxeCBzY2FsZSAoZGVmYXVsdDogMSkgKi9cbiAgdW5pdD86IG51bWJlcjtcbiAgLyoqIFNjYWxlIG11bHRpcGxpZXIgZm9yIGFsbCBtZWFzdXJlbWVudHMgKGRlZmF1bHQ6IDQpICovXG4gIHNjYWxlPzogbnVtYmVyO1xuICAvKiogQm9yZGVyIHdpZHRoIGluIGdyaWQgdW5pdHMgKGRlZmF1bHQ6IDEpICovXG4gIGJvcmRlcj86IG51bWJlcjtcbiAgLyoqIFN0YW5kYXJkIHBhZGRpbmcgaW4gZ3JpZCB1bml0cyAoZGVmYXVsdDogMSkgKi9cbiAgcGFkZGluZz86IG51bWJlcjtcbiAgLyoqIEdhcCBiZXR3ZWVuIGVsZW1lbnRzIGluIGdyaWQgdW5pdHMgKGRlZmF1bHQ6IDEpICovXG4gIGdhcD86IG51bWJlcjtcbiAgLyoqIE1hcmdpbi9zcGFjaW5nIGluIGdyaWQgdW5pdHMgKGRlZmF1bHQ6IDUsIGUuZy4sIDUgKiA0ID0gMjBweCkgKi9cbiAgbWFyZ2luPzogbnVtYmVyO1xuICAvKiogRm9udCBzY2FsZSBtdWx0aXBsaWVyIChkZWZhdWx0OiAwLjI1LCBlLmcuLCA2NHB4ICogMC4yNSA9IDE2cHgpICovXG4gIGZvbnRTY2FsZT86IG51bWJlcjtcbn1cblxuLyoqIE11bHRpLWxheWVyIGJvcmRlciBjb25maWd1cmF0aW9uLiAqL1xuZXhwb3J0IGludGVyZmFjZSBCb3JkZXJDb25maWcge1xuICAvKiogT3V0ZXIgYm9yZGVyIHdpZHRoIGluIGdyaWQgdW5pdHMgKGRlZmF1bHQ6IDEpICovXG4gIG91dGVyPzogbnVtYmVyO1xuICAvKiogTWlkZGxlIGJvcmRlciB3aWR0aCBpbiBncmlkIHVuaXRzIChkZWZhdWx0OiAxKSAqL1xuICBtaWRkbGU/OiBudW1iZXI7XG4gIC8qKiBJbm5lciBib3JkZXIgd2lkdGggaW4gZ3JpZCB1bml0cyAoZGVmYXVsdDogMSkgKi9cbiAgaW5uZXI/OiBudW1iZXI7XG4gIC8qKiBUb3RhbCBib3JkZXIgd2lkdGggKGNhbGN1bGF0ZWQgYXV0b21hdGljYWxseSkgKi9cbiAgdG90YWw/OiBudW1iZXI7XG59XG5cbi8qKiBHcmlkIHN5c3RlbSBjb252ZXJ0aW5nIHVuaXRzIHRvIHBpeGVscyBhdCBjb25zaXN0ZW50IHNjYWxlLiAqL1xuZXhwb3J0IGNsYXNzIFBpeGVsR3JpZCB7XG4gIHB1YmxpYyByZWFkb25seSB1bml0OiBudW1iZXI7XG4gIHB1YmxpYyByZWFkb25seSBzY2FsZTogbnVtYmVyO1xuICBwdWJsaWMgcmVhZG9ubHkgYm9yZGVyOiBudW1iZXI7XG4gIHB1YmxpYyByZWFkb25seSBwYWRkaW5nOiBudW1iZXI7XG4gIHB1YmxpYyByZWFkb25seSBnYXA6IG51bWJlcjtcbiAgcHVibGljIHJlYWRvbmx5IG1hcmdpbjogbnVtYmVyO1xuICBwdWJsaWMgcmVhZG9ubHkgZm9udFNjYWxlOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQaXhlbEdyaWRDb25maWcgPSB7fSkge1xuICAgIHRoaXMudW5pdCA9IGNvbmZpZy51bml0ID8/IDE7XG4gICAgdGhpcy5zY2FsZSA9IGNvbmZpZy5zY2FsZSA/PyA0O1xuICAgIHRoaXMuYm9yZGVyID0gY29uZmlnLmJvcmRlciA/PyAxO1xuICAgIHRoaXMucGFkZGluZyA9IGNvbmZpZy5wYWRkaW5nID8/IDE7XG4gICAgdGhpcy5nYXAgPSBjb25maWcuZ2FwID8/IDE7XG4gICAgdGhpcy5tYXJnaW4gPSBjb25maWcubWFyZ2luID8/IDU7IC8vIDUgdW5pdHMgKiA0IHNjYWxlID0gMjBweCBkZWZhdWx0XG4gICAgLy8gRm9udCBzY2FsZSBpcyBwcm9wb3J0aW9uYWwgdG8gR1JJRCBzY2FsZSAoMC4yNSBhdCA0eCBzY2FsZSlcbiAgICAvLyBBdCA0eDogNjRweCAqIDAuMjUgPSAxNnB4LCBBdCAzeDogNjRweCAqIDAuMTg3NSA9IDEycHgsIGV0Yy5cbiAgICB0aGlzLmZvbnRTY2FsZSA9IGNvbmZpZy5mb250U2NhbGUgPz8gKHRoaXMuc2NhbGUgLyAxNik7XG4gIH1cblxuICAvKiogQ29udmVydCBncmlkIHVuaXRzIOKGkiBwaXhlbHMuICovXG4gIHB4KHVuaXRzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB1bml0cyAqIHRoaXMudW5pdCAqIHRoaXMuc2NhbGU7XG4gIH1cblxuICAvKiogQ29udmVydCBwaXhlbHMg4oaSIGdyaWQgdW5pdHMgKHJvdW5kZWQpLiAqL1xuICB1bml0cyhwaXhlbHM6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQocGl4ZWxzIC8gKHRoaXMudW5pdCAqIHRoaXMuc2NhbGUpKTtcbiAgfVxufVxuXG4vKiogRGVmYXVsdCBncmlkOiA0eCBzY2FsZSwgMXB4IGJhc2UgdW5pdC4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX1BJWEVMX0dSSUQgPSAoKCkgPT4ge1xuICAvLyBURU1QT1JBUlk6IENoZWNrIGZvciBzY2FsZSBvdmVycmlkZSBpbiBsb2NhbFN0b3JhZ2VcbiAgY29uc3QgdGVtcFNjYWxlID0gdHlwZW9mIGxvY2FsU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0ZW1wLWdyaWQtc2NhbGUnKVxuICAgIDogbnVsbDtcblxuICBpZiAodGVtcFNjYWxlKSB7XG4gICAgY29uc3Qgc2NhbGUgPSBwYXJzZUludCh0ZW1wU2NhbGUsIDEwKTtcbiAgICBpZiAoIWlzTmFOKHNjYWxlKSAmJiBzY2FsZSA+PSAxICYmIHNjYWxlIDw9IDQpIHtcbiAgICAgIHJldHVybiBuZXcgUGl4ZWxHcmlkKHsgc2NhbGUgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBQaXhlbEdyaWQoKTtcbn0pKCk7XG5cbi8qKiBDb252ZXJ0IGdyaWQgdW5pdHMg4oaSIHBpeGVscyAoZGVmYXVsdCBncmlkKS4gKi9cbmV4cG9ydCBjb25zdCBweCA9ICh1bml0czogbnVtYmVyKTogbnVtYmVyID0+IERFRkFVTFRfUElYRUxfR1JJRC5weCh1bml0cyk7XG5cbi8qKiBDb252ZXJ0IHBpeGVscyDihpIgZ3JpZCB1bml0cyAoZGVmYXVsdCBncmlkKS4gKi9cbmV4cG9ydCBjb25zdCB1bml0cyA9IChwaXhlbHM6IG51bWJlcik6IG51bWJlciA9PiBERUZBVUxUX1BJWEVMX0dSSUQudW5pdHMocGl4ZWxzKTtcblxuLyoqIERlZmF1bHQgZ3JpZCBjb25zdGFudHMuICovXG5leHBvcnQgY29uc3QgR1JJRCA9IHtcbiAgdW5pdDogREVGQVVMVF9QSVhFTF9HUklELnVuaXQsXG4gIHNjYWxlOiBERUZBVUxUX1BJWEVMX0dSSUQuc2NhbGUsXG4gIGJvcmRlcjogREVGQVVMVF9QSVhFTF9HUklELmJvcmRlcixcbiAgcGFkZGluZzogREVGQVVMVF9QSVhFTF9HUklELnBhZGRpbmcsXG4gIGdhcDogREVGQVVMVF9QSVhFTF9HUklELmdhcCxcbiAgbWFyZ2luOiBERUZBVUxUX1BJWEVMX0dSSUQubWFyZ2luLFxuICBmb250U2NhbGU6IERFRkFVTFRfUElYRUxfR1JJRC5mb250U2NhbGVcbn0gYXMgY29uc3Q7XG5cbi8qKiBEZWZhdWx0IHRyaXBsZSBib3JkZXIgKG91dGVyL21pZGRsZS9pbm5lcikuICovXG5leHBvcnQgY29uc3QgQk9SREVSID0ge1xuICBvdXRlcjogMSwgICAvLyBPdXRlciBib3JkZXIgKDEgZ3JpZCB1bml0KVxuICBtaWRkbGU6IDEsICAvLyBNaWRkbGUgYm9yZGVyICgxIGdyaWQgdW5pdClcbiAgaW5uZXI6IDEsICAgLy8gSW5uZXIgYm9yZGVyICgxIGdyaWQgdW5pdClcbiAgdG90YWw6IDMgICAgLy8gVG90YWwgYm9yZGVyIHdpZHRoICgzIGdyaWQgdW5pdHMpXG59IGFzIGNvbnN0O1xuXG4vKiogQ3JlYXRlIGN1c3RvbSBib3JkZXIgY29uZmlnIHdpdGggY2FsY3VsYXRlZCB0b3RhbC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCb3JkZXJDb25maWcoY29uZmlnOiBCb3JkZXJDb25maWcgPSB7fSk6IFJlcXVpcmVkPEJvcmRlckNvbmZpZz4ge1xuICBjb25zdCBvdXRlciA9IGNvbmZpZy5vdXRlciA/PyAxO1xuICBjb25zdCBtaWRkbGUgPSBjb25maWcubWlkZGxlID8/IDE7XG4gIGNvbnN0IGlubmVyID0gY29uZmlnLmlubmVyID8/IDE7XG4gIGNvbnN0IHRvdGFsID0gb3V0ZXIgKyBtaWRkbGUgKyBpbm5lcjtcblxuICByZXR1cm4ge1xuICAgIG91dGVyLFxuICAgIG1pZGRsZSxcbiAgICBpbm5lcixcbiAgICB0b3RhbFxuICB9O1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX3BpeGlfanNfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXgudHNcIik7XG4iLCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=","module.exports = window[\"PIXI\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * Color palette definitions for sprite editor\n *\n * Consolidated: All palette data is loaded from config/palettes.json\n * This file provides typed access to the palette data.\n */\nimport palettesConfig from '../config/palettes.json';\n\n/**\n * Convert hex string array from JSON to number array\n */\nfunction parseColorArray(colors: Array<{ hex: string; name?: string }>): number[] {\n  return colors.map(c => parseInt(c.hex, 16));\n}\n\n// Pre-parsed palettes for performance\nconst parsedPalettes = {\n  pico8: parseColorArray(palettesConfig.palettes.pico8.colors),\n  tic80: parseColorArray(palettesConfig.palettes.tic80.colors),\n  cc29: parseColorArray(palettesConfig.palettes.cc29.colors),\n  aerugo: parseColorArray(palettesConfig.palettes.aerugo.colors),\n};\n\n/**\n * PICO-8 color palette (16 colors)\n * Standard palette used in PICO-8 fantasy console\n */\nexport const PICO8_PALETTE = parsedPalettes.pico8;\n\n/**\n * TIC-80 color palette (16 colors)\n * Standard palette used in TIC-80 fantasy console\n */\nexport const TIC80_PALETTE = parsedPalettes.tic80;\n\n/**\n * CC-29 color palette (29 colors)\n * From Lospec.com/palette-list\n */\nexport const CC29_PALETTE = parsedPalettes.cc29;\n\n/**\n * Aerugo color palette (32 colors)\n * The editor's UI palette\n * From https://lospec.com/palette-list/aerugo\n */\nexport const AERUGO_PALETTE = parsedPalettes.aerugo;\n\nexport type PaletteType = 'pico8' | 'tic80' | 'cc29' | 'aerugo';\n\n/**\n * Get a palette by type\n */\nexport function getPalette(type: PaletteType): number[] {\n  return parsedPalettes[type];\n}\n\n/**\n * Get palette metadata (name, description, source)\n */\nexport function getPaletteInfo(type: PaletteType): {\n  name: string;\n  description: string;\n  source?: string;\n  colorCount: number;\n} {\n  const data = palettesConfig.palettes[type];\n  return {\n    name: data.name,\n    description: data.description,\n    source: data.source,\n    colorCount: data.colors.length,\n  };\n}\n\n/**\n * Get all available palette types\n */\nexport function getAllPaletteTypes(): PaletteType[] {\n  return Object.keys(palettesConfig.palettes) as PaletteType[];\n}\n\n/**\n * Get color names for a palette (if available)\n */\nexport function getColorNames(type: PaletteType): (string | undefined)[] {\n  return palettesConfig.palettes[type].colors.map(c => c.name);\n}\n","/**\n * Simplified Theme System for Pikcell\n *\n * Themes are palette-based with 7 core properties for clean, consistent styling.\n * Theme definitions are data-driven, loaded from JSON config files.\n */\n\nimport { getPalette, PaletteType } from './palettes';\nimport cc29Themes from '../config/themes/cc29.json';\n\n/**\n * Theme Configuration - 7 core properties\n *\n * workspace      - Main canvas/viewport background\n * cardBackground - Card content area background\n * cardTitleBar   - Card title bar & header overlays\n * cardBorder     - Card borders (outer frame)\n * buttonBackground - Buttons, controls, interactive elements\n * accent         - Selection highlights, active states, focus\n * text           - All text content (titles, labels, body)\n */\nexport interface Theme {\n  workspace: number;\n  cardBackground: number;\n  cardTitleBar: number;\n  cardBorder: number;\n  buttonBackground: number;\n  accent: number;\n  text: number;\n}\n\n/**\n * Theme variant type\n */\nexport type ThemeVariant = 'dark' | 'light';\n\n/**\n * Theme metadata\n */\nexport interface ThemeInfo {\n  name: string;\n  palette: PaletteType;\n  variant: ThemeVariant;\n  theme: Theme;\n  description?: string;\n}\n\n/**\n * Raw theme data from JSON (hex strings)\n */\ninterface RawThemeData {\n  name: string;\n  variant: ThemeVariant;\n  description?: string;\n  workspace: string;\n  cardBackground: string;\n  cardTitleBar: string;\n  cardBorder: string;\n  buttonBackground: string;\n  accent: string;\n  text: string;\n}\n\n/**\n * Raw theme config from JSON\n */\ninterface RawThemeConfig {\n  palette: PaletteType;\n  paletteName: string;\n  description: string;\n  themes: {\n    [category: string]: RawThemeData[];\n  };\n}\n\n// \n// Theme Parsing (JSON -> Runtime)\n// \n\n/**\n * Parse hex string (e.g., \"0x2b2b2e\") to number\n */\nfunction parseHex(hex: string): number {\n  return parseInt(hex.replace('0x', ''), 16);\n}\n\n/**\n * Parse raw theme data from JSON to Theme\n */\nfunction parseTheme(raw: RawThemeData): Theme {\n  return {\n    workspace: parseHex(raw.workspace),\n    cardBackground: parseHex(raw.cardBackground),\n    cardTitleBar: parseHex(raw.cardTitleBar),\n    cardBorder: parseHex(raw.cardBorder),\n    buttonBackground: parseHex(raw.buttonBackground),\n    accent: parseHex(raw.accent),\n    text: parseHex(raw.text),\n  };\n}\n\n/**\n * Load themes from a theme config\n */\nfunction loadThemesFromConfig(config: RawThemeConfig): ThemeInfo[] {\n  const themes: ThemeInfo[] = [];\n\n  for (const category of Object.keys(config.themes)) {\n    for (const rawTheme of config.themes[category]) {\n      themes.push({\n        name: rawTheme.name,\n        palette: config.palette,\n        variant: rawTheme.variant,\n        description: rawTheme.description,\n        theme: parseTheme(rawTheme),\n      });\n    }\n  }\n\n  return themes;\n}\n\n// \n// Dynamic Theme Generation (from palettes)\n// \n\n/**\n * Calculate luminance of a color (0-255)\n */\nfunction getLuminance(color: number): number {\n  const r = (color >> 16) & 0xff;\n  const g = (color >> 8) & 0xff;\n  const b = color & 0xff;\n  return r * 0.299 + g * 0.587 + b * 0.114;\n}\n\n/**\n * Sort colors by luminance\n */\nfunction sortByLuminance(colors: number[]): number[] {\n  return [...colors].sort((a, b) => getLuminance(a) - getLuminance(b));\n}\n\n/**\n * Find the most saturated color in a palette (for accent)\n */\nfunction findAccentColor(colors: number[]): number {\n  return colors.reduce((best, color) => {\n    const r = (color >> 16) & 0xff;\n    const g = (color >> 8) & 0xff;\n    const b = color & 0xff;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    const sat = max === 0 ? 0 : (max - min) / max;\n\n    const bestR = (best >> 16) & 0xff;\n    const bestG = (best >> 8) & 0xff;\n    const bestB = best & 0xff;\n    const bestMax = Math.max(bestR, bestG, bestB);\n    const bestMin = Math.min(bestR, bestG, bestB);\n    const bestSat = bestMax === 0 ? 0 : (bestMax - bestMin) / bestMax;\n\n    return sat > bestSat ? color : best;\n  }, colors[0]);\n}\n\n/**\n * Generate a dark theme from a palette\n */\nexport function createDarkTheme(palette: number[]): Theme {\n  const sorted = sortByLuminance(palette);\n  const len = sorted.length;\n\n  return {\n    workspace: sorted[Math.floor(len * 0.1)],\n    cardBackground: sorted[Math.floor(len * 0.15)],\n    cardTitleBar: sorted[Math.floor(len * 0.25)],\n    cardBorder: sorted[0],\n    buttonBackground: sorted[Math.floor(len * 0.35)],\n    accent: findAccentColor(palette),\n    text: sorted[len - 1],\n  };\n}\n\n/**\n * Generate a light theme from a palette\n */\nexport function createLightTheme(palette: number[]): Theme {\n  const sorted = sortByLuminance(palette);\n  const len = sorted.length;\n\n  return {\n    workspace: sorted[Math.floor(len * 0.7)],\n    cardBackground: sorted[Math.floor(len * 0.85)],\n    cardTitleBar: sorted[Math.floor(len * 0.6)],\n    cardBorder: sorted[Math.floor(len * 0.15)],\n    buttonBackground: sorted[Math.floor(len * 0.75)],\n    accent: findAccentColor(palette),\n    text: sorted[0],\n  };\n}\n\n/**\n * Generate themes for a palette\n */\nexport function createThemesFromPalette(paletteType: PaletteType): { dark: ThemeInfo; light: ThemeInfo } {\n  const palette = getPalette(paletteType);\n  const paletteName = paletteType.toUpperCase();\n\n  return {\n    dark: {\n      name: `${paletteName} Dark`,\n      palette: paletteType,\n      variant: 'dark',\n      theme: createDarkTheme(palette),\n    },\n    light: {\n      name: `${paletteName} Light`,\n      palette: paletteType,\n      variant: 'light',\n      theme: createLightTheme(palette),\n    },\n  };\n}\n\n// \n// Theme Registry (data-driven from JSON)\n// \n\n// Load all themes from config files\nconst cc29ThemeList = loadThemesFromConfig(cc29Themes as RawThemeConfig);\n\n/** All available themes */\nexport const ALL_THEMES: ThemeInfo[] = [\n  ...cc29ThemeList,\n  // Add more palette themes here as they're created:\n  // ...pico8ThemeList,\n  // ...tic80ThemeList,\n];\n\n// Default theme references (first dark and light themes)\nconst defaultDarkTheme = ALL_THEMES.find(t => t.name === 'Dark') || ALL_THEMES[0];\nconst defaultLightTheme = ALL_THEMES.find(t => t.name === 'Light') || ALL_THEMES[1];\n\n/** Default dark theme */\nexport const DARK_THEME = defaultDarkTheme.theme;\n\n/** Default light theme */\nexport const LIGHT_THEME = defaultLightTheme.theme;\n\n// \n// Theme State Management\n// \n\nconst THEME_STORAGE_KEY = 'pikcell-theme';\n\nfunction saveThemeToStorage(themeName: string): void {\n  try {\n    localStorage.setItem(THEME_STORAGE_KEY, themeName);\n  } catch {\n    // localStorage might not be available\n  }\n}\n\nfunction loadThemeFromStorage(): string | null {\n  try {\n    return localStorage.getItem(THEME_STORAGE_KEY);\n  } catch {\n    return null;\n  }\n}\n\nfunction initializeTheme(): ThemeInfo {\n  const savedName = loadThemeFromStorage();\n  if (savedName) {\n    const found = ALL_THEMES.find(t => t.name === savedName);\n    if (found) return found;\n  }\n  return defaultDarkTheme;\n}\n\n// Current theme state\nlet currentThemeInfo: ThemeInfo = initializeTheme();\n\n/**\n * Get the current theme\n */\nexport function getTheme(): Theme {\n  return currentThemeInfo.theme;\n}\n\n/**\n * Get the current theme info (includes name, palette, variant)\n */\nexport function getThemeInfo(): ThemeInfo {\n  return currentThemeInfo;\n}\n\n/**\n * Get all available themes\n */\nexport function getAllThemes(): ThemeInfo[] {\n  return ALL_THEMES;\n}\n\n/**\n * Set the current theme by ThemeInfo\n */\nexport function setTheme(themeInfo: ThemeInfo): void {\n  currentThemeInfo = themeInfo;\n  saveThemeToStorage(themeInfo.name);\n}\n\n/**\n * Set the current theme by name\n */\nexport function setThemeByName(name: string): boolean {\n  const found = ALL_THEMES.find(t => t.name === name);\n  if (found) {\n    setTheme(found);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Reset to default theme\n */\nexport function resetTheme(): void {\n  setTheme(defaultDarkTheme);\n}\n","/**\n * CardDragHandler - Handles card dragging logic\n *\n * Extracted from PixelCard to follow Single Responsibility Principle.\n * Manages pointer capture, screen-to-canvas coordinate conversion, and drag state.\n */\nimport * as PIXI from 'pixi.js';\n\nexport interface DragState {\n  isDragging: boolean;\n  dragStartX: number;\n  dragStartY: number;\n  cardStartX: number;\n  cardStartY: number;\n}\n\nexport interface DragHandlerOptions {\n  renderer: PIXI.Renderer;\n  container: PIXI.Container;\n  onDragStart?: () => void;\n  onDragEnd?: () => void;\n}\n\n/**\n * Handles drag operations for a card container\n */\nexport class CardDragHandler {\n  private renderer: PIXI.Renderer;\n  private container: PIXI.Container;\n  private state: DragState;\n  private capturedPointerId: number | null = null;\n  private onDragStart?: () => void;\n  private onDragEnd?: () => void;\n\n  // Bound event handlers for cleanup\n  private boundHandleMove: (e: PointerEvent) => void;\n  private boundHandleUp: () => void;\n\n  constructor(options: DragHandlerOptions) {\n    this.renderer = options.renderer;\n    this.container = options.container;\n    this.onDragStart = options.onDragStart;\n    this.onDragEnd = options.onDragEnd;\n\n    this.state = {\n      isDragging: false,\n      dragStartX: 0,\n      dragStartY: 0,\n      cardStartX: 0,\n      cardStartY: 0,\n    };\n\n    // Bind handlers\n    this.boundHandleMove = this.handleMove.bind(this);\n    this.boundHandleUp = this.handleUp.bind(this);\n\n    // Setup global listeners\n    this.setupEventListeners();\n  }\n\n  /**\n   * Check if currently dragging\n   */\n  get isDragging(): boolean {\n    return this.state.isDragging;\n  }\n\n  /**\n   * Start a drag operation\n   * Call this from title bar pointerdown event\n   */\n  startDrag(event: PIXI.FederatedPointerEvent): void {\n    this.state.isDragging = true;\n    this.state.cardStartX = this.container.x;\n    this.state.cardStartY = this.container.y;\n    this.state.dragStartX = event.client.x;\n    this.state.dragStartY = event.client.y;\n\n    // Capture pointer\n    const canvas = this.renderer.canvas as HTMLCanvasElement;\n    if (canvas && event.pointerId !== undefined) {\n      canvas.setPointerCapture(event.pointerId);\n      this.capturedPointerId = event.pointerId;\n    }\n\n    if (this.onDragStart) {\n      this.onDragStart();\n    }\n  }\n\n  /**\n   * Handle pointer move during drag\n   */\n  private handleMove(e: PointerEvent): void {\n    if (!this.state.isDragging) return;\n\n    const canvas = this.renderer.canvas as HTMLCanvasElement;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n\n    const deltaScreenX = e.clientX - this.state.dragStartX;\n    const deltaScreenY = e.clientY - this.state.dragStartY;\n\n    const deltaX = deltaScreenX * scaleX;\n    const deltaY = deltaScreenY * scaleY;\n\n    this.container.x = this.state.cardStartX + deltaX;\n    this.container.y = this.state.cardStartY + deltaY;\n  }\n\n  /**\n   * Handle pointer up to end drag\n   */\n  private handleUp(): void {\n    if (!this.state.isDragging) return;\n\n    const wasDragging = this.state.isDragging;\n    this.state.isDragging = false;\n\n    // Release pointer capture\n    this.releasePointerCapture();\n\n    if (wasDragging && this.onDragEnd) {\n      this.onDragEnd();\n    }\n  }\n\n  /**\n   * Release pointer capture\n   */\n  private releasePointerCapture(): void {\n    if (this.capturedPointerId !== null) {\n      const canvas = this.renderer.canvas as HTMLCanvasElement;\n      if (canvas) {\n        try {\n          canvas.releasePointerCapture(this.capturedPointerId);\n        } catch {\n          // Ignore errors if pointer was already released\n        }\n      }\n      this.capturedPointerId = null;\n    }\n  }\n\n  /**\n   * Setup global event listeners\n   */\n  private setupEventListeners(): void {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('pointermove', this.boundHandleMove);\n      window.addEventListener('pointerup', this.boundHandleUp);\n    }\n  }\n\n  /**\n   * Get current card start position (for resize handlers that need this)\n   */\n  getCardStartPosition(): { x: number; y: number } {\n    return {\n      x: this.state.cardStartX,\n      y: this.state.cardStartY,\n    };\n  }\n\n  /**\n   * Update card start position (called when resize starts)\n   */\n  setCardStartPosition(x: number, y: number): void {\n    this.state.cardStartX = x;\n    this.state.cardStartY = y;\n  }\n\n  /**\n   * Cleanup event listeners\n   */\n  destroy(): void {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('pointermove', this.boundHandleMove);\n      window.removeEventListener('pointerup', this.boundHandleUp);\n    }\n    this.releasePointerCapture();\n  }\n}\n","/**\n * CardResizeHandler - Handles card resizing logic\n *\n * Extracted from PixelCard to follow Single Responsibility Principle.\n * Manages 8-direction resizing, minimum size constraints, and scale indicator.\n */\nimport * as PIXI from 'pixi.js';\nimport { getTheme } from '../theming/theme';\nimport { GRID, BORDER, px, asBitmapText } from '@moxijs/core';\n\nexport type ResizeDirection = 'e' | 'w' | 's' | 'n' | 'se' | 'sw' | 'ne' | 'nw';\n\nexport interface ResizeState {\n  isResizing: boolean;\n  resizeStartX: number;\n  resizeStartY: number;\n  resizeStartWidth: number;\n  resizeStartHeight: number;\n  resizeDirection: ResizeDirection | null;\n}\n\nexport interface ResizeConstraints {\n  minContentWidth: number;\n  minContentHeight: number;\n}\n\nexport interface ResizeHandlerOptions {\n  renderer: PIXI.Renderer;\n  container: PIXI.Container;\n  getContentSize: () => { width: number; height: number };\n  setContentSize: (width: number, height: number) => void;\n  getCardStartPosition: () => { x: number; y: number };\n  setCardStartPosition: (x: number, y: number) => void;\n  onResizeStart?: () => void;\n  onResizeEnd?: () => void;\n  onResize?: (width: number, height: number) => void;\n  redraw: () => void;\n}\n\n/**\n * Handles resize operations for a card container\n */\nexport class CardResizeHandler {\n  private renderer: PIXI.Renderer;\n  private container: PIXI.Container;\n  private state: ResizeState;\n  private constraints: ResizeConstraints;\n  private capturedPointerId: number | null = null;\n  private scaleIndicator: PIXI.Container | null = null;\n\n  // Callbacks\n  private getContentSize: () => { width: number; height: number };\n  private setContentSize: (width: number, height: number) => void;\n  private getCardStartPosition: () => { x: number; y: number };\n  private setCardStartPosition: (x: number, y: number) => void;\n  private onResizeStart?: () => void;\n  private onResizeEnd?: () => void;\n  private onResize?: (width: number, height: number) => void;\n  private redraw: () => void;\n\n  // Bound event handlers for cleanup\n  private boundHandleMove: (e: PointerEvent) => void;\n  private boundHandleUp: () => void;\n\n  constructor(options: ResizeHandlerOptions) {\n    this.renderer = options.renderer;\n    this.container = options.container;\n    this.getContentSize = options.getContentSize;\n    this.setContentSize = options.setContentSize;\n    this.getCardStartPosition = options.getCardStartPosition;\n    this.setCardStartPosition = options.setCardStartPosition;\n    this.onResizeStart = options.onResizeStart;\n    this.onResizeEnd = options.onResizeEnd;\n    this.onResize = options.onResize;\n    this.redraw = options.redraw;\n\n    this.state = {\n      isResizing: false,\n      resizeStartX: 0,\n      resizeStartY: 0,\n      resizeStartWidth: 0,\n      resizeStartHeight: 0,\n      resizeDirection: null,\n    };\n\n    this.constraints = {\n      minContentWidth: 10,\n      minContentHeight: 10,\n    };\n\n    // Bind handlers\n    this.boundHandleMove = this.handleMove.bind(this);\n    this.boundHandleUp = this.handleUp.bind(this);\n\n    // Setup global listeners\n    this.setupEventListeners();\n  }\n\n  /**\n   * Check if currently resizing\n   */\n  get isResizing(): boolean {\n    return this.state.isResizing;\n  }\n\n  /**\n   * Set minimum content size constraints\n   */\n  setConstraints(minWidth: number, minHeight: number): void {\n    this.constraints.minContentWidth = minWidth;\n    this.constraints.minContentHeight = minHeight;\n  }\n\n  /**\n   * Start a resize operation\n   * Call this from resize handle pointerdown event\n   */\n  startResize(event: PIXI.FederatedPointerEvent, direction: ResizeDirection): void {\n    const contentSize = this.getContentSize();\n\n    this.state.isResizing = true;\n    this.state.resizeDirection = direction;\n    this.state.resizeStartX = event.client.x;\n    this.state.resizeStartY = event.client.y;\n    this.state.resizeStartWidth = contentSize.width;\n    this.state.resizeStartHeight = contentSize.height;\n\n    // Store card start position for west/north resizing\n    this.setCardStartPosition(this.container.x, this.container.y);\n\n    // Capture pointer\n    const canvas = this.renderer.canvas as HTMLCanvasElement;\n    if (canvas && event.pointerId !== undefined) {\n      canvas.setPointerCapture(event.pointerId);\n      this.capturedPointerId = event.pointerId;\n    }\n\n    if (this.onResizeStart) {\n      this.onResizeStart();\n    }\n  }\n\n  /**\n   * Handle pointer move during resize\n   */\n  private handleMove(e: PointerEvent): void {\n    if (!this.state.isResizing || !this.state.resizeDirection) return;\n\n    const canvas = this.renderer.canvas as HTMLCanvasElement;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n\n    const deltaScreenX = e.clientX - this.state.resizeStartX;\n    const deltaScreenY = e.clientY - this.state.resizeStartY;\n    const deltaX = deltaScreenX * scaleX;\n    const deltaY = deltaScreenY * scaleY;\n\n    // Calculate size changes based on direction\n    const deltaGridUnitsX = Math.round(deltaX / px(1));\n    const deltaGridUnitsY = Math.round(deltaY / px(1));\n\n    const cardStart = this.getCardStartPosition();\n    let newWidth = this.getContentSize().width;\n    let newHeight = this.getContentSize().height;\n\n    // Horizontal resizing\n    if (this.state.resizeDirection.includes('e')) {\n      // East: resize right edge (width changes, position stays)\n      newWidth = Math.max(this.constraints.minContentWidth, this.state.resizeStartWidth + deltaGridUnitsX);\n    } else if (this.state.resizeDirection.includes('w')) {\n      // West: resize left edge (position and width both change)\n      newWidth = Math.max(this.constraints.minContentWidth, this.state.resizeStartWidth - deltaGridUnitsX);\n      const widthDelta = newWidth - this.state.resizeStartWidth;\n      const newX = Math.max(0, cardStart.x - px(widthDelta));\n      this.container.x = newX;\n    }\n\n    // Vertical resizing\n    if (this.state.resizeDirection.includes('s')) {\n      // South: resize bottom edge (height changes, position stays)\n      newHeight = Math.max(this.constraints.minContentHeight, this.state.resizeStartHeight + deltaGridUnitsY);\n    } else if (this.state.resizeDirection.includes('n')) {\n      // North: resize top edge (position and height both change)\n      newHeight = Math.max(this.constraints.minContentHeight, this.state.resizeStartHeight - deltaGridUnitsY);\n      const heightDelta = newHeight - this.state.resizeStartHeight;\n      const newY = Math.max(0, cardStart.y - px(heightDelta));\n      this.container.y = newY;\n    }\n\n    // Apply new size\n    this.setContentSize(newWidth, newHeight);\n    this.redraw();\n\n    // Show scale indicator\n    this.showScaleIndicator(e.clientX, e.clientY, newWidth, newHeight);\n\n    if (this.onResize) {\n      this.onResize(newWidth, newHeight);\n    }\n  }\n\n  /**\n   * Handle pointer up to end resize\n   */\n  private handleUp(): void {\n    if (!this.state.isResizing) return;\n\n    const wasResizing = this.state.isResizing;\n    this.state.isResizing = false;\n    this.state.resizeDirection = null;\n\n    // Release pointer capture\n    this.releasePointerCapture();\n\n    // Hide scale indicator\n    this.hideScaleIndicator();\n\n    if (wasResizing && this.onResizeEnd) {\n      this.onResizeEnd();\n    }\n  }\n\n  /**\n   * Release pointer capture\n   */\n  private releasePointerCapture(): void {\n    if (this.capturedPointerId !== null) {\n      const canvas = this.renderer.canvas as HTMLCanvasElement;\n      if (canvas) {\n        try {\n          canvas.releasePointerCapture(this.capturedPointerId);\n        } catch {\n          // Ignore errors if pointer was already released\n        }\n      }\n      this.capturedPointerId = null;\n    }\n  }\n\n  /**\n   * Show the scale indicator near the mouse\n   */\n  private showScaleIndicator(screenX: number, screenY: number, width: number, height: number): void {\n    const canvas = this.renderer.canvas as HTMLCanvasElement;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n\n    const canvasX = (screenX - rect.left) * scaleX;\n    const canvasY = (screenY - rect.top) * scaleY;\n\n    if (!this.scaleIndicator) {\n      this.scaleIndicator = new PIXI.Container();\n    }\n\n    // Clear and rebuild\n    this.scaleIndicator.removeChildren();\n\n    const scaleText = `${width}x${height}`;\n\n    const theme = getTheme();\n    const text = asBitmapText(\n      { text: scaleText, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n      { scale: GRID.fontScale }\n    );\n\n    const padding = px(2);\n    const borderWidth = px(BORDER.outer);\n    const shadowOffset = px(1);\n    const indicatorWidth = text.width + padding * 2 + borderWidth * 2;\n    const indicatorHeight = text.height + padding * 2 + borderWidth * 2;\n\n    const bg = new PIXI.Graphics();\n    bg.roundPixels = true;\n\n    // Gray drop shadow\n    bg.rect(shadowOffset, shadowOffset, indicatorWidth, indicatorHeight);\n    bg.fill({ color: theme.cardTitleBar });\n\n    // White outer border\n    bg.rect(0, 0, indicatorWidth, indicatorHeight);\n    bg.fill({ color: 0xffffff });\n\n    // Black background\n    bg.rect(borderWidth, borderWidth,\n            indicatorWidth - borderWidth * 2,\n            indicatorHeight - borderWidth * 2);\n    bg.fill({ color: 0x000000 });\n\n    this.scaleIndicator.addChild(bg);\n    text.position.set(borderWidth + padding, borderWidth + padding);\n    this.scaleIndicator.addChild(text);\n\n    // Position above and to the right of mouse\n    this.scaleIndicator.position.set(\n      canvasX + 10,\n      canvasY - indicatorHeight - 10\n    );\n\n    // Add to container parent (scene) not the card itself\n    if (this.container.parent) {\n      this.container.parent.addChild(this.scaleIndicator);\n    }\n  }\n\n  /**\n   * Hide the scale indicator\n   */\n  private hideScaleIndicator(): void {\n    if (this.scaleIndicator && this.scaleIndicator.parent) {\n      this.scaleIndicator.parent.removeChild(this.scaleIndicator);\n      this.scaleIndicator.destroy();\n      this.scaleIndicator = null;\n    }\n  }\n\n  /**\n   * Setup global event listeners\n   */\n  private setupEventListeners(): void {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('pointermove', this.boundHandleMove);\n      window.addEventListener('pointerup', this.boundHandleUp);\n    }\n  }\n\n  /**\n   * Cleanup event listeners and resources\n   */\n  destroy(): void {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('pointermove', this.boundHandleMove);\n      window.removeEventListener('pointerup', this.boundHandleUp);\n    }\n    this.releasePointerCapture();\n    this.hideScaleIndicator();\n  }\n}\n","/**\n * Pixel-perfect card component with drag, resize, and triple border\n *\n * Refactored to use CardDragHandler and CardResizeHandler for cleaner SRP.\n *\n *  CRITICAL: This component uses GRID UNITS for all dimensions!\n * - contentWidth/contentHeight are in GRID UNITS (not pixels)\n * - Internal calculations convert to pixels using px()\n * - All spacing, borders, padding use GRID constants\n *\n * @see ../utilities/README.md for grid system documentation\n */\nimport * as PIXI from 'pixi.js';\nimport { getTheme } from '../theming/theme';\nimport { GRID, BORDER, px, asBitmapText } from '@moxijs/core';\nimport { CardDragHandler } from '../logic/card-drag-logic';\nimport { CardResizeHandler, ResizeDirection } from '../logic/card-resize-logic';\n\nexport interface PixelCardOptions {\n  title: string;\n  x?: number;\n  y?: number;\n  contentWidth: number;   // In grid units\n  contentHeight: number;  // In grid units\n  renderer: PIXI.Renderer;\n  onResize?: (width: number, height: number) => void;\n  onRefresh?: () => void; // Callback when card is refreshed (e.g., theme change)\n  minContentSize?: boolean; // If true, prevents resizing below content's actual size\n  backgroundColor?: number; // Custom background color (defaults to theme.cardBackground)\n  clipContent?: boolean; // If true, clips content to container bounds (like CSS overflow: hidden)\n  pairedCard?: PixelCard; // Optional paired card that should layer together\n  onFocus?: () => void; // Callback when card is clicked/focused\n}\n\nexport interface PixelCardResizeState {\n  contentWidth: number;   // Current content width in grid units\n  contentHeight: number;  // Current content height in grid units\n  minContentWidth?: number;  // Minimum content width in grid units (when minContentSize is enabled)\n  minContentHeight?: number; // Minimum content height in grid units (when minContentSize is enabled)\n}\n\n/**\n * Creates a pixel-perfect card with drag, resize, and triple border\n */\nexport class PixelCard {\n  public container: PIXI.Container;\n  public contentContainer: PIXI.Container;\n  private titleBarHeightPx: number;\n\n  private options: PixelCardOptions;\n  private state: PixelCardResizeState;\n\n  // Extracted handlers\n  private dragHandler: CardDragHandler;\n  private resizeHandler: CardResizeHandler;\n\n  private pairedCard: PixelCard | null = null;\n  private onFocus: (() => void) | null = null;\n  private onStateChange: (() => void) | null = null;\n  private contentMask: PIXI.Graphics | null = null;\n\n  constructor(options: PixelCardOptions) {\n    this.options = options;\n    this.pairedCard = options.pairedCard ?? null;\n    this.onFocus = options.onFocus ?? null;\n\n    this.container = new PIXI.Container();\n    this.container.position.set(options.x ?? 0, options.y ?? 0);\n\n    this.contentContainer = new PIXI.Container();\n\n    this.state = {\n      contentWidth: options.contentWidth,\n      contentHeight: options.contentHeight,\n    };\n\n    // Calculate title bar height based on font size\n    const fontHeight = 64 * GRID.fontScale;\n    const verticalPadding = px(GRID.padding * 2);\n    this.titleBarHeightPx = Math.ceil(fontHeight + verticalPadding);\n\n    // Initialize drag handler\n    this.dragHandler = new CardDragHandler({\n      renderer: options.renderer,\n      container: this.container,\n      onDragEnd: () => {\n        if (this.onStateChange) {\n          this.onStateChange();\n        }\n      },\n    });\n\n    // Initialize resize handler\n    this.resizeHandler = new CardResizeHandler({\n      renderer: options.renderer,\n      container: this.container,\n      getContentSize: () => ({\n        width: this.state.contentWidth,\n        height: this.state.contentHeight,\n      }),\n      setContentSize: (width, height) => {\n        this.state.contentWidth = width;\n        this.state.contentHeight = height;\n      },\n      getCardStartPosition: () => this.dragHandler.getCardStartPosition(),\n      setCardStartPosition: (x, y) => this.dragHandler.setCardStartPosition(x, y),\n      onResize: this.options.onResize,\n      onResizeEnd: () => {\n        if (this.onStateChange) {\n          this.onStateChange();\n        }\n      },\n      redraw: () => this.redraw(),\n    });\n\n    // Set initial constraints\n    if (this.state.minContentWidth !== undefined && this.state.minContentHeight !== undefined) {\n      this.resizeHandler.setConstraints(this.state.minContentWidth, this.state.minContentHeight);\n    }\n\n    // Register cleanup\n    this.container.on('destroyed', () => {\n      this.dragHandler.destroy();\n      this.resizeHandler.destroy();\n    });\n\n    this.redraw();\n  }\n\n  private redraw() {\n    // Clear all children except content container\n    this.container.removeChildren();\n\n    const cardWidth = BORDER.total * 2 + GRID.padding * 2 + this.state.contentWidth;\n    const cardHeight = px(BORDER.total * 2) + this.titleBarHeightPx + px(GRID.padding * 2) + px(this.state.contentHeight);\n\n    // Draw card background with triple border\n    this.drawBackground(cardWidth, cardHeight);\n\n    // Draw title bar\n    this.drawTitleBar(cardWidth);\n\n    // Position content container\n    this.contentContainer.position.set(\n      px(BORDER.total + GRID.padding),\n      px(BORDER.total) + this.titleBarHeightPx + px(GRID.padding)\n    );\n\n    // Setup content clipping if enabled\n    this.setupContentMask();\n\n    this.container.addChild(this.contentContainer);\n\n    // Add resize handles\n    this.addResizeHandles(cardWidth, cardHeight);\n  }\n\n  private drawBackground(cardWidth: number, cardHeight: number) {\n    const theme = getTheme();\n    const bg = new PIXI.Graphics();\n    bg.roundPixels = true;\n\n    const shadowOffset = px(1);\n\n    // Drop shadow\n    bg.rect(shadowOffset, shadowOffset, px(cardWidth), cardHeight);\n    bg.fill({ color: theme.cardBorder, alpha: 0.3 });\n\n    // Layer 1: Outer border\n    bg.rect(0, 0, px(cardWidth), cardHeight);\n    bg.fill({ color: theme.cardBorder });\n\n    // Layer 2: Middle border (using buttonBackground for subtle contrast)\n    bg.rect(px(BORDER.outer), px(BORDER.outer),\n            px(cardWidth - BORDER.outer * 2), cardHeight - px(BORDER.outer * 2));\n    bg.fill({ color: theme.buttonBackground });\n\n    // Layer 3: Inner border\n    bg.rect(px(BORDER.outer + BORDER.middle), px(BORDER.outer + BORDER.middle),\n            px(cardWidth - (BORDER.outer + BORDER.middle) * 2),\n            cardHeight - px((BORDER.outer + BORDER.middle) * 2));\n    bg.fill({ color: theme.cardBorder });\n\n    // Layer 4: Content background\n    bg.rect(px(BORDER.total), px(BORDER.total),\n            px(cardWidth - BORDER.total * 2), cardHeight - px(BORDER.total * 2));\n    bg.fill({ color: this.options.backgroundColor ?? theme.cardBackground });\n\n    this.container.addChild(bg);\n  }\n\n  private drawTitleBar(cardWidth: number) {\n    const theme = getTheme();\n    const titleBar = new PIXI.Graphics();\n    titleBar.roundPixels = true;\n    titleBar.eventMode = 'static';\n    titleBar.cursor = 'move';\n    titleBar.rect(px(BORDER.total), px(BORDER.total),\n                  px(cardWidth - BORDER.total * 2), this.titleBarHeightPx);\n    titleBar.fill({ color: theme.cardTitleBar });\n\n    // Title bar dragging\n    titleBar.on('pointerdown', (e: PIXI.FederatedPointerEvent) => {\n      if (this.onFocus) {\n        this.onFocus();\n      }\n      this.dragHandler.startDrag(e);\n      e.stopPropagation();\n    });\n\n    this.container.addChild(titleBar);\n\n    // Title text\n    const titleText = asBitmapText(\n      { text: this.options.title, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n      { scale: GRID.fontScale }\n    );\n    titleText.tint = theme.text; // BitmapText uses tint for color\n\n    const textHeight = titleText.height;\n    const verticalCenter = px(BORDER.total) + (this.titleBarHeightPx - textHeight) / 2;\n    titleText.position.set(px(BORDER.total) + 2, Math.floor(verticalCenter));\n    this.container.addChild(titleText);\n\n    // ALPHA! stamp for PIKCELL title\n    if (this.options.title === 'PIKCELL') {\n      const alphaStamp = asBitmapText(\n        { text: 'ALPHA!', style: { fontFamily: 'KennyBlocksBitmap', fontSize: 64, fill: theme.accent }, pixelPerfect: true },\n        { anchor: 0.5, scale: GRID.fontScale * 1.2 }\n      );\n      alphaStamp.tint = theme.accent;\n      alphaStamp.angle = -8;\n\n      const stampX = titleText.x + titleText.width + px(2) + px(8) + px(2);\n      const stampY = verticalCenter - px(2) + px(4) - px(1);\n      alphaStamp.position.set(stampX, stampY);\n      this.container.addChild(alphaStamp);\n    }\n  }\n\n  private setupContentMask() {\n    if (this.options.clipContent) {\n      if (!this.contentMask) {\n        this.contentMask = new PIXI.Graphics();\n      }\n\n      this.contentMask.clear();\n      this.contentMask.rect(\n        px(BORDER.total + GRID.padding),\n        px(BORDER.total) + this.titleBarHeightPx + px(GRID.padding),\n        px(this.state.contentWidth),\n        px(this.state.contentHeight)\n      );\n      this.contentMask.fill({ color: 0xffffff });\n      this.container.addChild(this.contentMask);\n      this.contentContainer.mask = this.contentMask;\n    } else {\n      this.contentContainer.mask = null;\n    }\n  }\n\n  private addResizeHandles(cardWidth: number, cardHeight: number) {\n    const handleThickness = px(1);\n    const cornerSize = px(2);\n\n    const createResizeHandle = (\n      x: number,\n      y: number,\n      width: number,\n      height: number,\n      cursor: string,\n      direction: ResizeDirection\n    ) => {\n      const handle = new PIXI.Graphics();\n      handle.roundPixels = true;\n      handle.eventMode = 'static';\n      handle.cursor = cursor;\n      handle.rect(0, 0, width, height);\n      handle.fill({ color: 0x000000, alpha: 0.01 });\n      handle.position.set(x, y);\n\n      handle.on('pointerdown', (e: PIXI.FederatedPointerEvent) => {\n        this.resizeHandler.startResize(e, direction);\n        e.stopPropagation();\n      });\n\n      this.container.addChild(handle);\n    };\n\n    // Corners\n    createResizeHandle(0, 0, cornerSize, cornerSize, 'nwse-resize', 'nw');\n    createResizeHandle(px(cardWidth) - cornerSize, 0, cornerSize, cornerSize, 'nesw-resize', 'ne');\n    createResizeHandle(0, cardHeight - cornerSize, cornerSize, cornerSize, 'nesw-resize', 'sw');\n    createResizeHandle(px(cardWidth) - cornerSize, cardHeight - cornerSize, cornerSize, cornerSize, 'nwse-resize', 'se');\n\n    // Edges\n    createResizeHandle(cornerSize, 0, px(cardWidth) - cornerSize * 2, handleThickness, 'ns-resize', 'n');\n    createResizeHandle(cornerSize, cardHeight - handleThickness, px(cardWidth) - cornerSize * 2, handleThickness, 'ns-resize', 's');\n    createResizeHandle(0, cornerSize, handleThickness, cardHeight - cornerSize * 2, 'ew-resize', 'w');\n    createResizeHandle(px(cardWidth) - handleThickness, cornerSize, handleThickness, cardHeight - cornerSize * 2, 'ew-resize', 'e');\n  }\n\n  // ============ Public API ============\n\n  /**\n   * Get the content container to add custom content\n   */\n  public getContentContainer(): PIXI.Container {\n    return this.contentContainer;\n  }\n\n  /**\n   * Get current content dimensions\n   */\n  public getContentSize(): { width: number; height: number } {\n    return {\n      width: this.state.contentWidth,\n      height: this.state.contentHeight\n    };\n  }\n\n  /**\n   * Set content dimensions and redraw\n   */\n  public setContentSize(width: number, height: number) {\n    this.state.contentWidth = width;\n    this.state.contentHeight = height;\n    this.redraw();\n\n    if (this.options.onResize) {\n      this.options.onResize(width, height);\n    }\n  }\n\n  /**\n   * Get total card width in pixels\n   */\n  public getPixelWidth(): number {\n    const cardWidthGridUnits = this.state.contentWidth + BORDER.total * 2 + GRID.padding * 2;\n    return px(cardWidthGridUnits);\n  }\n\n  /**\n   * Get total card height in pixels\n   */\n  public getPixelHeight(): number {\n    return px(this.state.contentHeight) + px(BORDER.total * 2) + this.titleBarHeightPx + px(GRID.padding * 2);\n  }\n\n  /**\n   * Manually trigger a redraw\n   */\n  public refresh() {\n    this.redraw();\n\n    if (this.options.onRefresh) {\n      this.options.onRefresh();\n    }\n  }\n\n  /**\n   * Update the card title\n   */\n  public setTitle(title: string) {\n    this.options.title = title;\n    this.redraw();\n  }\n\n  /**\n   * Set custom title bar content with left and right aligned text\n   */\n  public setTitleContent(leftText: string, rightText: string) {\n    this.options.title = '';\n\n    const titleTextChildren = this.container.children.filter(\n      child => child instanceof PIXI.BitmapText\n    );\n    titleTextChildren.forEach(child => this.container.removeChild(child));\n\n    const theme = getTheme();\n    const textY = px(BORDER.total) + (this.titleBarHeightPx - 64 * GRID.fontScale) / 2;\n\n    // Left-aligned text\n    const leftBitmapText = asBitmapText(\n      { text: leftText, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n      { x: px(BORDER.total) + 2, y: Math.floor(textY), scale: GRID.fontScale }\n    );\n    leftBitmapText.tint = theme.text; // BitmapText uses tint for color\n    this.container.addChild(leftBitmapText);\n\n    // Right-aligned text\n    const rightBitmapText = asBitmapText(\n      { text: rightText, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n      { scale: GRID.fontScale }\n    );\n    rightBitmapText.tint = theme.text; // BitmapText uses tint for color\n\n    const cardWidth = this.state.contentWidth + BORDER.total * 2 + GRID.padding * 2;\n    const rightX = px(cardWidth - BORDER.total) - rightBitmapText.width - 2;\n    rightBitmapText.position.set(rightX, Math.floor(textY));\n    this.container.addChild(rightBitmapText);\n  }\n\n  /**\n   * Set title bar with an icon and text\n   * @param drawIcon Function to draw the icon into a graphics object\n   * @param text Text to display after the icon\n   * @param iconSize Size of the icon in pixels (default 8)\n   */\n  public setTitleWithIcon(\n    drawIcon: (g: PIXI.Graphics, x: number, y: number, color: number, pixelSize: number) => void,\n    text: string,\n    iconSize: number = 8\n  ) {\n    this.options.title = '';\n\n    // Remove existing title elements (text and icon graphics)\n    // Keep: background (first Graphics), title bar (cursor='move'), content mask, and resize handles\n    const toRemove = this.container.children.filter(\n      child => child instanceof PIXI.BitmapText ||\n               (child instanceof PIXI.Graphics &&\n                child.cursor !== 'move' &&\n                child.cursor !== 'pointer' &&\n                !child.cursor?.includes('resize') &&\n                child !== this.contentMask)\n    );\n    // Skip the first graphics element (background)\n    const titleElements = toRemove.slice(1);\n    titleElements.forEach(child => {\n      this.container.removeChild(child);\n    });\n\n    const theme = getTheme();\n    const fontHeight = 64 * GRID.fontScale;\n    const textY = px(BORDER.total) + (this.titleBarHeightPx - fontHeight) / 2;\n\n    // Icon positioning - center vertically in title bar\n    const iconY = px(BORDER.total) + (this.titleBarHeightPx - iconSize) / 2;\n    const iconX = px(BORDER.total) + 2;\n\n    // Draw the icon with 2x pixel size for better visibility in title bar\n    const iconPixelSize = 2;\n    const iconGraphics = new PIXI.Graphics();\n    iconGraphics.roundPixels = true;\n    drawIcon(iconGraphics, iconX, iconY, theme.text, iconPixelSize);\n    this.container.addChild(iconGraphics);\n\n    // Add text after the icon\n    const textX = iconX + iconSize + 4; // 4px gap after icon\n    const titleText = asBitmapText(\n      { text, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n      { x: textX, y: Math.floor(textY), scale: GRID.fontScale }\n    );\n    titleText.tint = theme.text; // BitmapText uses tint for color\n    this.container.addChild(titleText);\n  }\n\n  /**\n   * Set the paired card\n   */\n  public setPairedCard(card: PixelCard) {\n    this.pairedCard = card;\n  }\n\n  /**\n   * Get the paired card\n   */\n  public getPairedCard(): PixelCard | null {\n    return this.pairedCard;\n  }\n\n  /**\n   * Set callback for when card state changes (position/size)\n   */\n  public onStateChanged(callback: () => void) {\n    this.onStateChange = callback;\n  }\n\n  /**\n   * Export card state for persistence\n   */\n  public exportState(id: string): { id: string; x: number; y: number; contentWidth: number; contentHeight: number; visible: boolean } {\n    return {\n      id,\n      x: this.container.x,\n      y: this.container.y,\n      contentWidth: this.state.contentWidth,\n      contentHeight: this.state.contentHeight,\n      visible: this.container.visible\n    };\n  }\n\n  /**\n   * Import card state (restore position and size)\n   */\n  public importState(state: { x: number; y: number; contentWidth: number; contentHeight: number; visible: boolean }): void {\n    this.container.position.set(state.x, state.y);\n    this.container.visible = state.visible;\n\n    if (state.contentWidth !== this.state.contentWidth ||\n        state.contentHeight !== this.state.contentHeight) {\n      this.setContentSize(state.contentWidth, state.contentHeight);\n    }\n  }\n\n  /**\n   * Updates minimum content size based on actual content bounds\n   */\n  public updateMinContentSize() {\n    if (!this.options.minContentSize) return;\n\n    const bounds = this.contentContainer.getLocalBounds();\n\n    const minWidth = Math.ceil((bounds.x + bounds.width) / px(1));\n    const minHeight = Math.ceil((bounds.y + bounds.height) / px(1));\n\n    this.state.minContentWidth = minWidth;\n    this.state.minContentHeight = minHeight;\n    this.resizeHandler.setConstraints(minWidth, minHeight);\n\n    if (this.state.contentWidth < minWidth || this.state.contentHeight < minHeight) {\n      this.state.contentWidth = Math.max(this.state.contentWidth, minWidth);\n      this.state.contentHeight = Math.max(this.state.contentHeight, minHeight);\n      this.redraw();\n    }\n  }\n}\n","/**\n * Pixel-perfect button component for the sprite editor\n *\n * IMPORTANT - Button Content Area Sizing:\n * ----------------------------------------\n * For 'press' mode buttons (selectionMode='press'), there is a BEVEL at the bottom\n * that reduces the content area height by 1 grid unit.\n *\n * Button structure (unpressed, press mode):\n * - Outer border: 1 grid unit all around\n * - Bevel strip: 1 grid unit at bottom (inside outer border)\n * - Inner border: 1 grid unit all around (above bevel)\n * - Background/content: remaining space\n *\n * For a 16x16 grid unit button:\n * - Content width:  16 - (border * 4) = 12 grid units\n * - Content height: 16 - (border * 5) = 11 grid units (due to bevel!)\n *\n * Icon sizing for perfect centering:\n * - Icons are 10 wide  9 tall grid units\n * - Horizontal: (12 - 10) / 2 = 1 grid unit margin each side\n * - Vertical: (11 - 9) / 2 = 1 grid unit margin each side\n */\nimport * as PIXI from 'pixi.js';\nimport { GRID, px, asBitmapText } from '@moxijs/core';\nimport { getTheme } from '../theming/theme';\nimport { ComponentResult } from '../interfaces/components';\n\nexport type SelectionMode = 'highlight' | 'press';\nexport type ActionMode = 'click' | 'toggle';\n\nexport interface PixelButtonOptions {\n  size?: number;          // Size in grid units (for square buttons)\n  width?: number;         // Width in grid units (for rectangular buttons)\n  height?: number;        // Height in grid units (for rectangular buttons)\n  selected?: boolean;\n  label?: string;\n  icon?: PIXI.Sprite | PIXI.Graphics;   // Optional icon sprite or graphic (legacy)\n  /** Draw icon directly into button graphics for perfect grid alignment.\n   * Called with (graphics, x, y, color, pixelSize) where x,y is the top-left position.\n   * Icons are 10x9 grids, so icon size = (10 * pixelSize) wide  (9 * pixelSize) tall.\n   */\n  drawIcon?: (g: PIXI.Graphics, x: number, y: number, color: number, pixelSize: number) => void;\n  /** Icon width in cells (default 10) - used with drawIcon to calculate centering */\n  iconWidth?: number;\n  /** Icon height in cells (default 9) - used with drawIcon to calculate centering */\n  iconHeight?: number;\n  backgroundColor?: number;\n  onClick?: () => void;\n  selectionMode?: SelectionMode;  // 'highlight' for swatches, 'press' for tool buttons (visual appearance)\n  actionMode?: ActionMode;        // 'click' for simple click, 'toggle' for toggleable state (behavior)\n  tooltip?: string;       // Optional tooltip text\n}\n\nexport interface PixelButtonResult extends ComponentResult {\n  /** The button graphics (alias for container) */\n  button: PIXI.Graphics;\n  /** Get the current selected state */\n  isSelected(): boolean;\n  /** Set the selected state (for toggle buttons) */\n  setSelected(selected: boolean): void;\n  /** Refresh the button (e.g., after theme change) */\n  refresh(): void;\n}\n\n/**\n * Creates a pixel-perfect button with optional label\n *\n * Selection modes (visual appearance):\n * - 'highlight': Shows accent border when selected (for color swatches)\n * - 'press': Shows pressed state with bevel (for tool buttons)\n *\n * Action modes (behavior):\n * - 'click': Simple click action, no visual state change\n * - 'toggle': Toggleable selection state (for swatches, tool groups)\n */\nexport function createPixelButton(options: PixelButtonOptions): PixelButtonResult {\n  const {\n    size,\n    width,\n    height,\n    selected = false,\n    label,\n    icon,\n    drawIcon,\n    iconWidth = 10,\n    iconHeight = 9,\n    backgroundColor,\n    onClick,\n    selectionMode = 'press',\n    actionMode = 'click',\n    tooltip\n  } = options;\n\n  // Track state\n  let isSelectedState = selected;\n  let tooltipContainer: PIXI.Container | null = null;\n  let buttonText: PIXI.BitmapText | null = null;\n\n  // Auto-calculate width for text labels if not explicitly provided\n  let buttonWidth = width ?? size ?? 10;\n  const buttonHeight = height ?? size ?? 10;\n\n  // If label is provided and no explicit width, calculate based on text + padding\n  if (label && !width && !size) {\n    const tempText = asBitmapText(\n      { text: label, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: 0xffffff } },\n      { scale: GRID.fontScale }\n    );\n\n    // Calculate text width in grid units\n    const textWidthInGridUnits = Math.ceil(tempText.width / px(1));\n    const bordersWidth = GRID.border * 4; // 2 borders on each side\n    const paddingWidth = 2; // 1 grid unit on each side\n    buttonWidth = textWidthInGridUnits + bordersWidth + paddingWidth;\n\n    tempText.destroy();\n  }\n\n  const button = new PIXI.Graphics();\n  button.roundPixels = true;\n  button.eventMode = (onClick || tooltip) ? 'static' : 'auto';\n  button.cursor = onClick ? 'pointer' : 'default';\n\n  // Draw function to render button state\n  function drawButton() {\n    button.clear();\n\n    const theme = getTheme();\n    const bgColor = backgroundColor ?? theme.buttonBackground;\n\n    if (selectionMode === 'highlight') {\n      // Highlight mode (for swatches)\n      if (isSelectedState) {\n        // Selected: accent border, then card border, then background/color\n        button.rect(0, 0, px(buttonWidth), px(buttonHeight));\n        button.fill({ color: theme.accent });\n\n        button.rect(px(GRID.border), px(GRID.border),\n                    px(buttonWidth - GRID.border * 2), px(buttonHeight - GRID.border * 2));\n        button.fill({ color: theme.cardBorder });\n\n        button.rect(px(GRID.border * 2), px(GRID.border * 2),\n                    px(buttonWidth - GRID.border * 4), px(buttonHeight - GRID.border * 4));\n        button.fill({ color: bgColor });\n      } else {\n        // Unselected: border, then background/color\n        button.rect(0, 0, px(buttonWidth), px(buttonHeight));\n        button.fill({ color: theme.cardBorder });\n\n        button.rect(px(GRID.border), px(GRID.border),\n                    px(buttonWidth - GRID.border * 2), px(buttonHeight - GRID.border * 2));\n        button.fill({ color: bgColor });\n      }\n    } else {\n      // Press mode (for tool buttons)\n      if (isSelectedState) {\n        // Pressed: starts 1px lower, card border, title bar color as inner border, background (no bevel)\n        button.rect(0, px(1), px(buttonWidth), px(buttonHeight) - px(1));\n        button.fill({ color: theme.cardBorder });\n\n        button.rect(px(GRID.border), px(GRID.border + 1),\n                    px(buttonWidth - GRID.border * 2), px(buttonHeight - GRID.border * 2 - 1));\n        button.fill({ color: theme.cardTitleBar });\n\n        button.rect(px(GRID.border * 2), px(GRID.border * 2 + 1),\n                    px(buttonWidth - GRID.border * 4), px(buttonHeight - GRID.border * 4 - 1));\n        button.fill({ color: bgColor });\n      } else {\n        // Unpressed: card border, bevel at bottom, title bar as inner border, background\n        button.rect(0, 0, px(buttonWidth), px(buttonHeight));\n        button.fill({ color: theme.cardBorder });\n\n        // Bevel strip at bottom\n        button.rect(px(GRID.border), px(buttonHeight - GRID.border * 2),\n                    px(buttonWidth - GRID.border * 2), px(GRID.border));\n        button.fill({ color: theme.cardTitleBar });\n\n        // Inner border\n        button.rect(px(GRID.border), px(GRID.border),\n                    px(buttonWidth - GRID.border * 2), px(buttonHeight - GRID.border * 3));\n        button.fill({ color: theme.cardTitleBar });\n\n        // Background\n        button.rect(px(GRID.border * 2), px(GRID.border * 2),\n                    px(buttonWidth - GRID.border * 4), px(buttonHeight - GRID.border * 5));\n        button.fill({ color: bgColor });\n      }\n    }\n\n    // Update content position\n    // Press offset: when pressed, content moves down with button\n    const pressOffset = (selectionMode === 'press' && isSelectedState) ? px(1) : 0;\n\n    // Draw icon directly into button graphics for perfect grid alignment\n    // Icon is 10x9 cells, content area is 1211 grid units (due to bevel)\n    // Center the icon in the content area\n    if (drawIcon) {\n      const iconWidthPx = iconWidth * GRID.scale;\n      const iconHeightPx = iconHeight * GRID.scale;\n      // Content area starts after 2 border layers\n      const contentX = px(GRID.border * 2);\n      const contentY = px(GRID.border * 2) + pressOffset;\n      // Content dimensions (width: buttonWidth-4, height: buttonHeight-5 due to bevel)\n      const contentWidth = px(buttonWidth - GRID.border * 4);\n      const contentHeight = px(buttonHeight - GRID.border * 5);\n      // Center icon in content area, snap to grid\n      const iconX = contentX + Math.floor((contentWidth - iconWidthPx) / 2 / GRID.scale) * GRID.scale;\n      const iconY = contentY + Math.floor((contentHeight - iconHeightPx) / 2 / GRID.scale) * GRID.scale;\n      drawIcon(button, iconX, iconY, theme.text, GRID.scale);\n    }\n    // Legacy: position icon sprite (for backwards compatibility)\n    else if (icon) {\n      icon.position.set(\n        Math.floor((px(buttonWidth) - icon.width) / 2 / GRID.scale) * GRID.scale,\n        Math.floor((px(buttonHeight) - icon.height) / 2 / GRID.scale) * GRID.scale + pressOffset\n      );\n      if (!button.children.includes(icon)) {\n        button.addChild(icon);\n      }\n    }\n\n    // Labels: no base offset, just move down when pressed\n    // Also update text color to match current theme\n    if (buttonText) {\n      buttonText.position.set(px(buttonWidth) / 2, px(buttonHeight) / 2 + pressOffset);\n      buttonText.tint = theme.text;\n    }\n  }\n\n  // Tooltip support\n  if (tooltip) {\n    const createTooltip = () => {\n      const container = new PIXI.Container();\n      const theme = getTheme();\n\n      const text = asBitmapText(\n        { text: tooltip, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n        { scale: GRID.fontScale }\n      );\n      text.tint = theme.text; // BitmapText uses tint for color\n\n      const padding = px(2);\n      const borderWidth = px(GRID.border);\n      const tooltipWidth = text.width + padding * 2 + borderWidth * 2;\n      const tooltipHeight = text.height + padding * 2 + borderWidth * 2;\n\n      const bg = new PIXI.Graphics();\n      bg.roundPixels = true;\n\n      const shadowOffset = px(1);\n\n      // Drop shadow\n      bg.rect(shadowOffset, shadowOffset, tooltipWidth, tooltipHeight);\n      bg.fill({ color: theme.cardTitleBar });\n\n      // Outer border\n      bg.rect(0, 0, tooltipWidth, tooltipHeight);\n      bg.fill({ color: theme.cardBorder });\n\n      // Background\n      bg.rect(borderWidth, borderWidth,\n              tooltipWidth - borderWidth * 2,\n              tooltipHeight - borderWidth * 2);\n      bg.fill({ color: theme.cardBackground });\n\n      container.addChild(bg);\n      text.position.set(borderWidth + padding, borderWidth + padding);\n      container.addChild(text);\n\n      return container;\n    };\n\n    button.on('pointerover', (e: PIXI.FederatedPointerEvent) => {\n      if (tooltipContainer) return;\n\n      tooltipContainer = createTooltip();\n      const local = e.getLocalPosition(button);\n      tooltipContainer.position.set(local.x, local.y - tooltipContainer.height - 2);\n      button.addChild(tooltipContainer);\n    });\n\n    button.on('pointermove', (e: PIXI.FederatedPointerEvent) => {\n      if (tooltipContainer) {\n        const local = e.getLocalPosition(button);\n        tooltipContainer.position.set(local.x, local.y - tooltipContainer.height - 2);\n      }\n    });\n\n    button.on('pointerout', () => {\n      if (tooltipContainer) {\n        button.removeChild(tooltipContainer);\n        tooltipContainer.destroy();\n        tooltipContainer = null;\n      }\n    });\n  }\n\n  // Initial draw\n  drawButton();\n\n  // Add icon if provided\n  if (icon) {\n    const pressOffset = (selectionMode === 'press' && isSelectedState) ? px(1) : 0;\n    // Snap to GRID.scale for pixel-perfect alignment\n    icon.position.set(\n      Math.floor((px(buttonWidth) - icon.width) / 2 / GRID.scale) * GRID.scale,\n      Math.floor((px(buttonHeight) - icon.height) / 2 / GRID.scale) * GRID.scale + pressOffset\n    );\n    button.addChild(icon);\n  }\n  // Add label if provided (and no icon)\n  else if (label) {\n    const theme = getTheme();\n    // Labels: no base offset, just move down when pressed\n    const pressOffset = (selectionMode === 'press' && isSelectedState) ? px(1) : 0;\n    buttonText = asBitmapText(\n      { text: label, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n      { x: px(buttonWidth) / 2, y: px(buttonHeight) / 2 + pressOffset, anchor: 0.5, scale: GRID.fontScale }\n    );\n    buttonText.tint = theme.text; // BitmapText uses tint for color\n    button.addChild(buttonText);\n  }\n\n  // Add click handler if provided\n  if (onClick) {\n    button.on('pointerdown', (e: PIXI.FederatedPointerEvent) => {\n      onClick();\n      e.stopPropagation();\n    });\n  }\n\n  return {\n    container: button,\n    button,\n    isSelected: () => isSelectedState,\n    setSelected: (selected: boolean) => {\n      isSelectedState = selected;\n      drawButton();\n    },\n    refresh: () => {\n      drawButton();\n    },\n    destroy: () => {\n      if (tooltipContainer) {\n        tooltipContainer.destroy();\n        tooltipContainer = null;\n      }\n      button.removeAllListeners();\n      button.destroy({ children: true });\n    }\n  };\n}\n","/**\n * Pixel-perfect dialog component built on top of PixelCard\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from './pixel-card';\nimport { GRID, px, asBitmapText } from '@moxijs/core';\nimport { createPixelButton, PixelButtonResult } from './pixel-button';\nimport { createPixelCheckbox, PixelCheckboxResult } from './pixel-checkbox';\nimport { getTheme } from '../theming/theme';\nimport { ComponentResult } from '../interfaces/components';\n\nexport interface DialogButton {\n  label: string;\n  onClick: (checkboxStates?: Record<string, boolean>) => void;\n}\n\nexport interface DialogCheckbox {\n  name: string;\n  label: string;\n  defaultValue?: boolean;\n}\n\nexport interface PixelDialogOptions {\n  title: string;\n  message: string;\n  buttons: DialogButton[];\n  checkboxes?: DialogCheckbox[];\n  renderer: PIXI.Renderer;\n}\n\nexport interface PixelDialogResult extends ComponentResult {\n  /** Close and destroy the dialog */\n  close(): void;\n  /** Get checkbox states */\n  getCheckboxStates(): Record<string, boolean>;\n  /** Click a button by its label (for testing) */\n  clickButton(label: string): boolean;\n  /** Get available button labels */\n  getButtonLabels(): string[];\n}\n\n/**\n * Creates a pixel-perfect dialog centered on screen\n * Returns a result object with the container, close method, and destroy method\n */\nexport function createPixelDialog(options: PixelDialogOptions): PixelDialogResult {\n  const { title, message, buttons, checkboxes = [], renderer } = options;\n\n  // Track created components for cleanup\n  const createdButtons: PixelButtonResult[] = [];\n  const buttonLabels: string[] = [];\n  const createdCheckboxes: PixelCheckboxResult[] = [];\n\n  // Create overlay container\n  const overlay = new PIXI.Container();\n\n  // Semi-transparent backdrop\n  const backdrop = new PIXI.Graphics();\n  backdrop.rect(0, 0, renderer.width, renderer.height);\n  backdrop.fill({ color: 0x000000, alpha: 0.5 });\n  backdrop.eventMode = 'static'; // Block clicks to elements below\n  overlay.addChild(backdrop);\n\n  // Track checkbox states\n  const checkboxStates: Record<string, boolean> = {};\n  checkboxes.forEach(cb => {\n    checkboxStates[cb.name] = cb.defaultValue ?? false;\n  });\n\n  // Calculate dialog dimensions\n  const buttonWidth = 30; // Grid units per button\n  const buttonHeight = 12; // Grid units\n  const buttonSpacing = px(2);\n  const checkboxHeight = 8; // Grid units per checkbox\n  const messageMargin = px(4);\n\n  // Create message text to measure it\n  const theme = getTheme();\n  const messageText = asBitmapText(\n    { text: message, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n    { scale: GRID.fontScale }\n  );\n  messageText.tint = theme.text; // BitmapText uses tint for color\n\n  // Calculate content dimensions based on message, checkboxes, and buttons\n  const messageWidthInGridUnits = Math.ceil(messageText.width / px(1));\n  const buttonsWidthInGridUnits = buttons.length * buttonWidth + (buttons.length - 1) * (buttonSpacing / px(1));\n  const contentWidth = Math.max(messageWidthInGridUnits, buttonsWidthInGridUnits) + 4; // +4 for margins\n\n  const messageHeightInGridUnits = Math.ceil(messageText.height / px(1));\n  const checkboxesHeightInGridUnits = checkboxes.length > 0 ? checkboxes.length * checkboxHeight + 2 : 0;\n  const verticalSpacing = 4; // Grid units between sections\n  const contentHeight = messageHeightInGridUnits + checkboxesHeightInGridUnits + verticalSpacing + buttonHeight + 4; // +4 for top/bottom margins\n\n  // Create dialog card\n  const dialogCard = new PixelCard({\n    title,\n    x: 0, // Will be centered\n    y: 0,\n    contentWidth,\n    contentHeight,\n    renderer,\n    minContentSize: true\n  });\n\n  const contentContainer = dialogCard.getContentContainer();\n\n  // Add message text\n  const messageY = px(2);\n  messageText.position.set(px(2), messageY);\n  contentContainer.addChild(messageText);\n\n  // Cleanup function\n  const cleanup = () => {\n    // Destroy all created buttons\n    createdButtons.forEach(btn => btn.destroy());\n    createdButtons.length = 0;\n\n    // Destroy all created checkboxes\n    createdCheckboxes.forEach(cb => cb.destroy());\n    createdCheckboxes.length = 0;\n\n    // Destroy the overlay\n    overlay.destroy({ children: true });\n  };\n\n  // Add checkboxes\n  let checkboxY = messageY + messageText.height + px(4);\n  checkboxes.forEach((checkboxConfig) => {\n    const checkboxResult = createPixelCheckbox({\n      label: checkboxConfig.label,\n      checked: checkboxStates[checkboxConfig.name],\n      onChange: (checked) => {\n        checkboxStates[checkboxConfig.name] = checked;\n      }\n    });\n    createdCheckboxes.push(checkboxResult);\n    checkboxResult.container.position.set(px(2), checkboxY);\n    contentContainer.addChild(checkboxResult.container);\n\n    checkboxY += checkboxResult.container.height + px(1);\n  });\n\n  // Add buttons\n  const buttonY = px(messageHeightInGridUnits + checkboxesHeightInGridUnits + verticalSpacing + 2);\n  let currentX = px((contentWidth - buttonsWidthInGridUnits) / 2); // Center buttons\n\n  buttons.forEach((buttonConfig) => {\n    const buttonResult = createPixelButton({\n      width: buttonWidth,\n      height: buttonHeight,\n      label: buttonConfig.label,\n      selectionMode: 'press',\n      actionMode: 'click',\n      onClick: () => {\n        buttonConfig.onClick(checkboxStates);\n        // Close dialog when button is clicked\n        cleanup();\n      }\n    });\n    createdButtons.push(buttonResult);\n    buttonLabels.push(buttonConfig.label);\n    buttonResult.container.position.set(currentX, buttonY);\n    contentContainer.addChild(buttonResult.container);\n    currentX += px(buttonWidth) + buttonSpacing;\n  });\n\n  // Center dialog on screen\n  const dialogBounds = dialogCard.container.getBounds();\n  dialogCard.container.position.set(\n    (renderer.width - dialogBounds.width) / 2,\n    (renderer.height - dialogBounds.height) / 2\n  );\n\n  overlay.addChild(dialogCard.container);\n\n  return {\n    container: overlay,\n    close: cleanup,\n    getCheckboxStates: () => ({ ...checkboxStates }),\n    clickButton: (label: string): boolean => {\n      const index = buttonLabels.indexOf(label);\n      if (index === -1) return false;\n      // Trigger the button's click handler with mock event\n      const mockEvent = { stopPropagation: () => {} } as PIXI.FederatedPointerEvent;\n      createdButtons[index]?.container.emit('pointerdown', mockEvent);\n      return true;\n    },\n    getButtonLabels: () => [...buttonLabels],\n    destroy: cleanup\n  };\n}\n","/**\n * Pixel-perfect checkbox component\n */\nimport * as PIXI from 'pixi.js';\nimport { GRID, px, asBitmapText } from '@moxijs/core';\nimport { createPixelButton, PixelButtonResult } from './pixel-button';\nimport { ComponentResult } from '../interfaces/components';\nimport { getTheme } from '../theming/theme';\n\nexport interface PixelCheckboxOptions {\n  label: string;\n  checked?: boolean;\n  onChange?: (checked: boolean) => void;\n}\n\nexport interface PixelCheckboxResult extends ComponentResult {\n  /** Get the current checked state */\n  isChecked(): boolean;\n  /** Set the checked state */\n  setChecked(checked: boolean): void;\n}\n\n/**\n * Creates a pixel-perfect checkbox with label\n * Returns a result object with the container, state accessors, and destroy method\n */\nexport function createPixelCheckbox(options: PixelCheckboxOptions): PixelCheckboxResult {\n  const { label, checked = false, onChange } = options;\n\n  const container = new PIXI.Container();\n\n  let isCheckedState = checked;\n  const checkboxSize = 6; // Grid units for checkbox square\n\n  // Checkbox label\n  const theme = getTheme();\n  const checkboxLabel = asBitmapText(\n    { text: label, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: theme.text }, pixelPerfect: true },\n    { x: px(checkboxSize + 2), y: 0, scale: GRID.fontScale }\n  );\n  checkboxLabel.tint = theme.text; // BitmapText uses tint for color\n  container.addChild(checkboxLabel);\n\n  // Create checkbox button (centered vertically with label)\n  const checkboxHeight = px(checkboxSize);\n  const labelHeight = checkboxLabel.height;\n  const checkboxY = (labelHeight - checkboxHeight) / 2;\n\n  let checkboxResult: PixelButtonResult | null = null;\n\n  const createCheckbox = () => {\n    if (checkboxResult) {\n      checkboxResult.destroy();\n    }\n\n    const currentTheme = getTheme();\n    checkboxResult = createPixelButton({\n      size: checkboxSize,\n      selected: isCheckedState,\n      selectionMode: 'highlight',\n      actionMode: 'toggle',\n      backgroundColor: currentTheme.buttonBackground,\n      onClick: () => {\n        isCheckedState = !isCheckedState;\n        checkboxResult?.setSelected(isCheckedState);\n        if (onChange) {\n          onChange(isCheckedState);\n        }\n      }\n    });\n\n    checkboxResult.container.position.set(0, checkboxY);\n    container.addChild(checkboxResult.container);\n  };\n\n  createCheckbox();\n\n  return {\n    container,\n    isChecked: () => isCheckedState,\n    setChecked: (checked: boolean) => {\n      isCheckedState = checked;\n      checkboxResult?.setSelected(checked);\n    },\n    destroy: () => {\n      if (checkboxResult) {\n        checkboxResult.destroy();\n        checkboxResult = null;\n      }\n      container.destroy({ children: true });\n    }\n  };\n}\n","/**\n * Controller configuration constants\n *\n * All controller-specific values are centralized here.\n * Includes zoom, pan, grid, and interaction settings.\n */\n\n// ============================================================================\n// Sprite Sheet Controller\n// ============================================================================\n\nexport const SPRITE_SHEET_CONTROLLER_CONFIG = {\n  /** Default cell size in pixels */\n  cellSize: 8,\n  /** Grid line spacing in pixels (typically same as cellSize) */\n  gridSize: 8,\n  /** Grid line color opacity (0-1) */\n  gridOpacity: 0.3,\n  /** Grid line color (gray) */\n  gridColor: 0x808080,\n\n  // Zoom settings\n  /** Minimum zoom scale */\n  minScale: 1,\n  /** Maximum zoom scale */\n  maxScale: 16,\n  /** Zoom increment per wheel step */\n  zoomDelta: 0.5,\n  /** Initial scale as percentage of viewport height */\n  initialScaleViewportRatio: 0.5,\n\n  // Interaction settings\n  /** Pixels of movement before it's considered a drag vs click */\n  clickThreshold: 5,\n\n  // Cell highlight colors\n  /** Selected cell highlight color (yellow) */\n  selectedCellColor: 0xffec27,\n  /** Selected cell stroke width */\n  selectedCellStrokeWidth: 2,\n  /** Hovered cell highlight color (white) */\n  hoveredCellColor: 0xffffff,\n  /** Hovered cell stroke width */\n  hoveredCellStrokeWidth: 1,\n  /** Hovered cell alpha */\n  hoveredCellAlpha: 0.5\n};\n\n// ============================================================================\n// Sprite Controller\n// ============================================================================\n\nexport const SPRITE_CONTROLLER_CONFIG = {\n  /** Sprite cell size in pixels (8x8 sprites) */\n  cellSize: 8,\n  /** Default zoom scale for editing */\n  defaultScale: 8,\n  /** Minimum zoom scale */\n  minScale: 1,\n  /** Maximum zoom scale */\n  maxScale: 64\n};\n\n// ============================================================================\n// Aggregate export for convenience\n// ============================================================================\n\nexport const CONTROLLER_CONFIGS = {\n  spriteSheet: SPRITE_SHEET_CONTROLLER_CONFIG,\n  sprite: SPRITE_CONTROLLER_CONFIG\n} as const;\n","/**\n * Sprite sheet controller - manages sprite data and interactions independently of the card\n */\nimport * as PIXI from 'pixi.js';\nimport { px } from '@moxijs/core';\nimport { SPRITE_SHEET_CONTROLLER_CONFIG } from '../config/controller-configs';\n\nexport type SpriteSheetType = 'PICO-8' | 'TIC-80';\n\nexport interface SpriteSheetConfig {\n  type: SpriteSheetType;\n  /** Width in ACTUAL PIXELS (not grid units) - e.g., 128, 256 */\n  width: number;\n  /** Height in ACTUAL PIXELS (not grid units) - e.g., 128, 256 */\n  height: number;\n  palette: number[]; // Array of color values\n}\n\nexport interface SpriteSheetControllerOptions {\n  config: SpriteSheetConfig;\n  renderer: PIXI.Renderer;\n  showGrid?: boolean;\n  onScaleChange?: (scale: number) => void;\n  onCellHover?: (cellX: number, cellY: number) => void;\n  onCellClick?: (cellX: number, cellY: number) => void;\n}\n\n/**\n * Controller for managing sprite sheet state and rendering\n */\nexport class SpriteSheetController {\n  private config: SpriteSheetConfig;\n  private renderer: PIXI.Renderer;\n  private scale: number = 1;\n  private pixels: number[][]; // 2D array of color indices\n  private texture: PIXI.Texture | null = null;\n  private sprite: PIXI.Sprite | null = null;\n  private showGrid: boolean;\n  private onScaleChange?: (scale: number) => void;\n  private onCellHover?: (cellX: number, cellY: number) => void;\n  private onCellClick?: (cellX: number, cellY: number) => void;\n  private isPanning: boolean = false;\n  private panStartX: number = 0;\n  private panStartY: number = 0;\n  private spriteStartX: number = 0;\n  private spriteStartY: number = 0;\n  private cellOverlay: PIXI.Graphics | null = null;\n  private selectedCellX: number = -1;\n  private selectedCellY: number = -1;\n  private hoveredCellX: number = -1;\n  private hoveredCellY: number = -1;\n  private interactionSetup: boolean = false;\n  private isDragging: boolean = false;\n  private dragStartX: number = 0;\n  private dragStartY: number = 0;\n  private clickThreshold: number = SPRITE_SHEET_CONTROLLER_CONFIG.clickThreshold;\n\n  // Event listener references for cleanup\n  private wheelHandler: ((e: WheelEvent) => void) | null = null;\n  private mouseDownHandler: ((e: MouseEvent) => void) | null = null;\n  private mouseMoveHandler: ((e: MouseEvent) => void) | null = null;\n  private mouseUpHandler: ((e: MouseEvent) => void) | null = null;\n  private animationFrameId: number | null = null;\n\n  constructor(options: SpriteSheetControllerOptions) {\n    this.config = options.config;\n    this.renderer = options.renderer;\n    this.showGrid = options.showGrid ?? false;\n    this.onScaleChange = options.onScaleChange;\n    this.onCellHover = options.onCellHover;\n    this.onCellClick = options.onCellClick;\n\n    // Calculate initial scale to fit nicely (percentage of viewport height)\n    const targetHeight = this.renderer.height * SPRITE_SHEET_CONTROLLER_CONFIG.initialScaleViewportRatio;\n    this.scale = Math.max(SPRITE_SHEET_CONTROLLER_CONFIG.minScale, Math.floor(targetHeight / this.config.height));\n\n    // Initialize pixel data (all set to first palette color)\n    this.pixels = [];\n    for (let y = 0; y < this.config.height; y++) {\n      this.pixels[y] = [];\n      for (let x = 0; x < this.config.width; x++) {\n        this.pixels[y][x] = 0; // Default to first palette color\n      }\n    }\n\n    // Setup mouse wheel zoom\n    this.setupMouseWheelZoom();\n\n    // Setup middle mouse button pan\n    this.setupMiddleMousePan();\n  }\n\n  /**\n   * Setup mouse wheel zoom handler\n   * Based on: https://stackoverflow.com/questions/75969167/pixi-js-zoom-to-mouse-position\n   */\n  private setupMouseWheelZoom() {\n    if (typeof window !== 'undefined') {\n      this.wheelHandler = (e: WheelEvent) => {\n        if (!this.sprite) return;\n\n        // Get canvas bounds\n        const canvas = this.renderer.canvas as HTMLCanvasElement;\n        const rect = canvas.getBoundingClientRect();\n        const canvasScaleX = canvas.width / rect.width;\n        const canvasScaleY = canvas.height / rect.height;\n\n        // Convert client coordinates to canvas coordinates\n        const mouseX = (e.clientX - rect.left) * canvasScaleX;\n        const mouseY = (e.clientY - rect.top) * canvasScaleY;\n\n        // Get sprite sheet bounds\n        const bounds = this.sprite.getBounds();\n\n        // Check if mouse is over the sprite sheet\n        if (mouseX >= bounds.x && mouseX <= bounds.x + bounds.width &&\n            mouseY >= bounds.y && mouseY <= bounds.y + bounds.height) {\n          e.preventDefault();\n\n          // Get parent container offset\n          const parentBounds = this.sprite.parent.getBounds();\n\n          // Calculate mouse position relative to sprite center (accounting for anchor 0.5, 0.5)\n          const spriteCenterX = parentBounds.x + this.sprite.x;\n          const spriteCenterY = parentBounds.y + this.sprite.y;\n\n          // Current scale\n          const oldScale = this.sprite.scale.x;\n\n          // Mouse position in sprite's local space (unscaled, relative to center due to anchor)\n          const localX = (mouseX - spriteCenterX) / oldScale;\n          const localY = (mouseY - spriteCenterY) / oldScale;\n\n          // Calculate new scale\n          const zoomDelta = e.deltaY > 0 ? -SPRITE_SHEET_CONTROLLER_CONFIG.zoomDelta : SPRITE_SHEET_CONTROLLER_CONFIG.zoomDelta;\n          const newScale = Math.max(SPRITE_SHEET_CONTROLLER_CONFIG.minScale, Math.min(SPRITE_SHEET_CONTROLLER_CONFIG.maxScale, this.scale + zoomDelta));\n\n          if (newScale !== this.scale) {\n            // Reposition sprite so the local point under mouse stays at same screen position\n            this.sprite.x = mouseX - parentBounds.x - (localX * newScale);\n            this.sprite.y = mouseY - parentBounds.y - (localY * newScale);\n\n            // Update scale\n            this.setScale(newScale);\n          }\n        }\n      };\n\n      window.addEventListener('wheel', this.wheelHandler, { passive: false });\n    }\n  }\n\n  /**\n   * Setup middle mouse button pan handler\n   */\n  private setupMiddleMousePan() {\n    if (typeof window !== 'undefined') {\n      this.mouseDownHandler = (e: MouseEvent) => {\n        if (e.button !== 1 || !this.sprite) return; // Middle button only\n\n        // Get canvas bounds\n        const canvas = this.renderer.canvas as HTMLCanvasElement;\n        const rect = canvas.getBoundingClientRect();\n        const scaleX = canvas.width / rect.width;\n        const scaleY = canvas.height / rect.height;\n\n        // Convert client coordinates to canvas coordinates\n        const canvasX = (e.clientX - rect.left) * scaleX;\n        const canvasY = (e.clientY - rect.top) * scaleY;\n\n        // Get sprite sheet bounds\n        const bounds = this.sprite.getBounds();\n\n        // Check if mouse is over the sprite sheet\n        if (canvasX >= bounds.x && canvasX <= bounds.x + bounds.width &&\n            canvasY >= bounds.y && canvasY <= bounds.y + bounds.height) {\n          e.preventDefault();\n          this.isPanning = true;\n          this.panStartX = e.clientX;\n          this.panStartY = e.clientY;\n          this.spriteStartX = this.sprite.x;\n          this.spriteStartY = this.sprite.y;\n        }\n      };\n\n      this.mouseMoveHandler = (e: MouseEvent) => {\n        if (!this.isPanning || !this.sprite) return;\n\n        e.preventDefault();\n\n        // Get canvas bounds for scaling\n        const canvas = this.renderer.canvas as HTMLCanvasElement;\n        const rect = canvas.getBoundingClientRect();\n        const scaleX = canvas.width / rect.width;\n        const scaleY = canvas.height / rect.height;\n\n        // Calculate delta in screen space, then convert to canvas space\n        const deltaScreenX = e.clientX - this.panStartX;\n        const deltaScreenY = e.clientY - this.panStartY;\n        const deltaX = deltaScreenX * scaleX;\n        const deltaY = deltaScreenY * scaleY;\n\n        // Update sprite position\n        this.sprite.x = this.spriteStartX + deltaX;\n        this.sprite.y = this.spriteStartY + deltaY;\n      };\n\n      this.mouseUpHandler = (e: MouseEvent) => {\n        if (e.button === 1) { // Middle button\n          this.isPanning = false;\n        }\n      };\n\n      window.addEventListener('mousedown', this.mouseDownHandler);\n      window.addEventListener('mousemove', this.mouseMoveHandler);\n      window.addEventListener('mouseup', this.mouseUpHandler);\n    }\n  }\n\n  /**\n   * Get the current scale\n   */\n  public getScale(): number {\n    return this.scale;\n  }\n\n  /**\n   * Set the scale (supports smooth/fractional scaling)\n   */\n  public setScale(newScale: number) {\n    const clampedScale = Math.max(SPRITE_SHEET_CONTROLLER_CONFIG.minScale, Math.min(SPRITE_SHEET_CONTROLLER_CONFIG.maxScale, newScale));\n    // Allow smooth scaling - no rounding to integers\n    if (clampedScale !== this.scale) {\n      this.scale = clampedScale;\n      if (this.onScaleChange) {\n        this.onScaleChange(this.scale);\n      }\n    }\n  }\n\n  /**\n   * Get the sprite sheet config\n   */\n  public getConfig(): SpriteSheetConfig {\n    return this.config;\n  }\n\n  /**\n   * Get the scaled dimensions\n   */\n  public getScaledDimensions(): { width: number; height: number } {\n    return {\n      width: this.config.width * this.scale,\n      height: this.config.height * this.scale\n    };\n  }\n\n  /**\n   * Get pixel color at coordinates\n   */\n  public getPixel(x: number, y: number): number {\n    if (x < 0 || x >= this.config.width || y < 0 || y >= this.config.height) {\n      return 0;\n    }\n    return this.pixels[y][x];\n  }\n\n  /**\n   * Set pixel color at coordinates\n   */\n  public setPixel(x: number, y: number, colorIndex: number) {\n    if (x < 0 || x >= this.config.width || y < 0 || y >= this.config.height) {\n      return;\n    }\n    if (colorIndex < 0 || colorIndex >= this.config.palette.length) {\n      return;\n    }\n    this.pixels[y][x] = colorIndex;\n  }\n\n  /**\n   * Update the texture from pixel data\n   */\n  private updateTexture() {\n    // Create canvas to draw pixel data\n    const canvas = document.createElement('canvas');\n    canvas.width = this.config.width;\n    canvas.height = this.config.height;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Draw each pixel to canvas\n    for (let y = 0; y < this.config.height; y++) {\n      for (let x = 0; x < this.config.width; x++) {\n        const colorIndex = this.pixels[y][x];\n        const color = this.config.palette[colorIndex];\n\n        // Convert color to CSS format\n        const r = (color >> 16) & 0xff;\n        const g = (color >> 8) & 0xff;\n        const b = color & 0xff;\n        ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;\n        ctx.fillRect(x, y, 1, 1);\n      }\n    }\n\n    // Bake grid into texture if enabled\n    if (this.showGrid) {\n      const gridSize = SPRITE_SHEET_CONTROLLER_CONFIG.gridSize;\n      ctx.strokeStyle = `rgba(128, 128, 128, ${SPRITE_SHEET_CONTROLLER_CONFIG.gridOpacity})`;\n      ctx.lineWidth = 1;\n\n      // Draw vertical grid lines\n      for (let x = gridSize; x < this.config.width; x += gridSize) {\n        ctx.beginPath();\n        ctx.moveTo(x, 0);\n        ctx.lineTo(x, this.config.height);\n        ctx.stroke();\n      }\n\n      // Draw horizontal grid lines\n      for (let y = gridSize; y < this.config.height; y += gridSize) {\n        ctx.beginPath();\n        ctx.moveTo(0, y);\n        ctx.lineTo(this.config.width, y);\n        ctx.stroke();\n      }\n    }\n\n    // Destroy old texture if exists\n    if (this.texture) {\n      this.texture.destroy(true);\n    }\n\n    // Create texture from canvas with nearest neighbor scaling\n    this.texture = PIXI.Texture.from(canvas);\n    this.texture.source.scaleMode = 'nearest';\n  }\n\n  /**\n   * Draw the cell overlay (highlighting selected/hovered cells)\n   */\n  private drawCellOverlay() {\n    if (!this.cellOverlay || !this.sprite) return;\n\n    this.cellOverlay.clear();\n\n    const cellSize = SPRITE_SHEET_CONTROLLER_CONFIG.cellSize * this.scale;\n    // Sprite has anchor (0.5, 0.5), so adjust for centered origin\n    const spriteX = this.sprite.x - (this.config.width * this.scale) / 2;\n    const spriteY = this.sprite.y - (this.config.height * this.scale) / 2;\n\n    // Draw selected cell first (strong highlight) - behind hover\n    if (this.selectedCellX >= 0 && this.selectedCellY >= 0) {\n      this.cellOverlay.rect(\n        spriteX + this.selectedCellX * cellSize,\n        spriteY + this.selectedCellY * cellSize,\n        cellSize,\n        cellSize\n      );\n      this.cellOverlay.stroke({ color: SPRITE_SHEET_CONTROLLER_CONFIG.selectedCellColor, width: SPRITE_SHEET_CONTROLLER_CONFIG.selectedCellStrokeWidth });\n    }\n\n    // Draw hovered cell on top (subtle highlight)\n    if (this.hoveredCellX >= 0 && this.hoveredCellY >= 0) {\n      this.cellOverlay.rect(\n        spriteX + this.hoveredCellX * cellSize,\n        spriteY + this.hoveredCellY * cellSize,\n        cellSize,\n        cellSize\n      );\n      this.cellOverlay.stroke({ color: SPRITE_SHEET_CONTROLLER_CONFIG.hoveredCellColor, width: SPRITE_SHEET_CONTROLLER_CONFIG.hoveredCellStrokeWidth, alpha: SPRITE_SHEET_CONTROLLER_CONFIG.hoveredCellAlpha });\n    }\n  }\n\n  /**\n   * Setup cell interaction handlers\n   */\n  private setupCellInteraction(container: PIXI.Container) {\n    if (!this.onCellHover && !this.onCellClick) return;\n    if (this.interactionSetup) return; // Already set up\n\n    this.interactionSetup = true;\n    container.eventMode = 'static';\n    container.cursor = 'pointer';\n\n    container.on('pointermove', (e: PIXI.FederatedPointerEvent) => {\n      if (!this.sprite) return;\n\n      // Convert to sprite-local coordinates (unscaled, centered at origin)\n      const spriteLocal = e.getLocalPosition(this.sprite);\n      const cellSize = SPRITE_SHEET_CONTROLLER_CONFIG.cellSize; // Cell size in texture space (unscaled)\n\n      // Adjust for centered anchor (sprite origin is at center)\n      const adjustedX = spriteLocal.x + (this.config.width / 2);\n      const adjustedY = spriteLocal.y + (this.config.height / 2);\n\n      const cellX = Math.floor(adjustedX / cellSize);\n      const cellY = Math.floor(adjustedY / cellSize);\n\n      const maxCellX = Math.floor(this.config.width / SPRITE_SHEET_CONTROLLER_CONFIG.cellSize) - 1;\n      const maxCellY = Math.floor(this.config.height / SPRITE_SHEET_CONTROLLER_CONFIG.cellSize) - 1;\n\n      if (cellX >= 0 && cellX <= maxCellX && cellY >= 0 && cellY <= maxCellY) {\n        if (cellX !== this.hoveredCellX || cellY !== this.hoveredCellY) {\n          this.hoveredCellX = cellX;\n          this.hoveredCellY = cellY;\n          this.drawCellOverlay();\n          if (this.onCellHover) {\n            this.onCellHover(cellX, cellY);\n          }\n        }\n      } else {\n        if (this.hoveredCellX !== -1 || this.hoveredCellY !== -1) {\n          this.hoveredCellX = -1;\n          this.hoveredCellY = -1;\n          this.drawCellOverlay();\n        }\n      }\n    });\n\n    container.on('pointerout', () => {\n      this.hoveredCellX = -1;\n      this.hoveredCellY = -1;\n      this.drawCellOverlay();\n    });\n\n    // Click and drag interaction\n    container.on('pointerdown', (e: PIXI.FederatedPointerEvent) => {\n      if (!this.sprite) return;\n\n      this.isDragging = false;\n      this.dragStartX = e.global.x;\n      this.dragStartY = e.global.y;\n      this.spriteStartX = this.sprite.x;\n      this.spriteStartY = this.sprite.y;\n    });\n\n    container.on('globalpointermove', (e: PIXI.FederatedPointerEvent) => {\n      if (!this.sprite) return;\n\n      // Check if we've moved beyond the click threshold\n      const dx = e.global.x - this.dragStartX;\n      const dy = e.global.y - this.dragStartY;\n      const distance = Math.sqrt(dx * dx + dy * dy);\n\n      if (distance > this.clickThreshold && (this.dragStartX !== 0 || this.dragStartY !== 0)) {\n        this.isDragging = true;\n        // Pan the sprite\n        this.sprite.x = this.spriteStartX + dx;\n        this.sprite.y = this.spriteStartY + dy;\n      }\n    });\n\n    container.on('pointerup', () => {\n      // If we didn't drag, it's a click - select the cell\n      if (!this.isDragging && this.onCellClick) {\n        if (this.hoveredCellX >= 0 && this.hoveredCellY >= 0) {\n          this.selectedCellX = this.hoveredCellX;\n          this.selectedCellY = this.hoveredCellY;\n          this.drawCellOverlay();\n          this.onCellClick!(this.selectedCellX, this.selectedCellY);\n        }\n      }\n\n      // Reset drag state\n      this.isDragging = false;\n      this.dragStartX = 0;\n      this.dragStartY = 0;\n    });\n\n    container.on('pointerupoutside', () => {\n      // Reset drag state\n      this.isDragging = false;\n      this.dragStartX = 0;\n      this.dragStartY = 0;\n    });\n\n    // Update overlay continuously to follow sprite when panning\n    if (typeof window !== 'undefined') {\n      const updateOverlay = () => {\n        this.drawCellOverlay();\n        this.animationFrameId = requestAnimationFrame(updateOverlay);\n      };\n      this.animationFrameId = requestAnimationFrame(updateOverlay);\n    }\n  }\n\n  /**\n   * Render the sprite sheet\n   */\n  public render(container: PIXI.Container) {\n    // Preserve position if sprite already exists\n    const preservedX = this.sprite?.x;\n    const preservedY = this.sprite?.y;\n\n    // Remove old sprite if it exists\n    if (this.sprite) {\n      container.removeChild(this.sprite);\n    }\n\n    // Remove old overlay if it exists\n    if (this.cellOverlay) {\n      container.removeChild(this.cellOverlay);\n    }\n\n    // Update texture from pixel data (with grid baked in if enabled)\n    this.updateTexture();\n\n    if (!this.texture) return;\n\n    // Create sprite from texture\n    this.sprite = new PIXI.Sprite(this.texture);\n    this.sprite.anchor.set(0.5, 0.5); // Center origin for zoom\n    this.sprite.scale.set(this.scale);\n\n    // Use preserved position if available, otherwise center it\n    if (preservedX !== undefined && preservedY !== undefined) {\n      this.sprite.x = preservedX;\n      this.sprite.y = preservedY;\n    } else {\n      // Initial position at center of texture dimensions\n      this.sprite.x = (this.config.width * this.scale) / 2;\n      this.sprite.y = (this.config.height * this.scale) / 2;\n    }\n\n    container.addChild(this.sprite);\n\n    // Create and add cell overlay AFTER sprite (so it renders on top)\n    this.cellOverlay = new PIXI.Graphics();\n    this.cellOverlay.roundPixels = true;\n    container.addChild(this.cellOverlay);\n\n    // Setup cell interaction once\n    if (this.onCellHover || this.onCellClick) {\n      this.setupCellInteraction(container);\n    }\n\n    // Initial overlay draw\n    this.drawCellOverlay();\n  }\n\n  /**\n   * Programmatically select a cell\n   */\n  public selectCell(cellX: number, cellY: number) {\n    this.selectedCellX = cellX;\n    this.selectedCellY = cellY;\n    this.drawCellOverlay();\n\n    // Trigger onCellClick callback to update title\n    if (this.onCellClick) {\n      this.onCellClick(cellX, cellY);\n    }\n  }\n\n  /**\n   * Clear all pixels to a specific color\n   */\n  public clear(colorIndex: number = 0) {\n    for (let y = 0; y < this.config.height; y++) {\n      for (let x = 0; x < this.config.width; x++) {\n        this.pixels[y][x] = colorIndex;\n      }\n    }\n  }\n\n  /**\n   * Convert screen coordinates to sprite pixel coordinates\n   */\n  public screenToPixel(screenX: number, screenY: number): { x: number; y: number } | null {\n    const pixelX = Math.floor(screenX / this.scale);\n    const pixelY = Math.floor(screenY / this.scale);\n\n    if (pixelX < 0 || pixelX >= this.config.width || pixelY < 0 || pixelY >= this.config.height) {\n      return null;\n    }\n\n    return { x: pixelX, y: pixelY };\n  }\n\n  /**\n   * Get all pixel data (for saving)\n   */\n  public getPixelData(): number[][] {\n    // Return a deep copy to prevent external mutation\n    return this.pixels.map(row => [...row]);\n  }\n\n  /**\n   * Set all pixel data (for loading)\n   */\n  public setPixelData(pixels: number[][]): void {\n    // Validate dimensions match\n    if (pixels.length !== this.config.height) {\n      console.error('Pixel data height mismatch');\n      return;\n    }\n    if (pixels[0]?.length !== this.config.width) {\n      console.error('Pixel data width mismatch');\n      return;\n    }\n\n    // Deep copy the pixel data\n    this.pixels = pixels.map(row => [...row]);\n  }\n\n  /**\n   * Get current selected cell\n   */\n  public getSelectedCell(): { x: number; y: number } {\n    return { x: this.selectedCellX, y: this.selectedCellY };\n  }\n\n  /**\n   * Position the sprite so that cell 0,0 is at the top-left corner of the content container\n   */\n  public positionCell00AtTopLeft(): void {\n    if (!this.sprite) return;\n\n    // With anchor (0.5, 0.5), to position cell 0,0 at top-left (0,0) of content container:\n    // sprite position = (width * scale) / 2, (height * scale) / 2\n    this.sprite.x = (this.config.width * this.scale) / 2;\n    this.sprite.y = (this.config.height * this.scale) / 2;\n\n    // Redraw overlay to reflect new position\n    this.drawCellOverlay();\n  }\n\n  /**\n   * Center a specific cell in the viewport\n   * Positions the sprite so the given cell is centered in the content container\n   */\n  public centerCell(cellX: number, cellY: number, containerWidth: number, containerHeight: number): void {\n    if (!this.sprite) return;\n\n    const cellSize = SPRITE_SHEET_CONTROLLER_CONFIG.cellSize;\n\n    // Calculate the center of the cell in sprite-local coordinates (unscaled)\n    const cellCenterX = (cellX * cellSize) + (cellSize / 2);\n    const cellCenterY = (cellY * cellSize) + (cellSize / 2);\n\n    // Calculate the center of the container\n    const containerCenterX = containerWidth / 2;\n    const containerCenterY = containerHeight / 2;\n\n    // With anchor (0.5, 0.5), sprite position (0,0) corresponds to sprite center\n    // To center a cell: position sprite so that cell's scaled position aligns with container center\n    // sprite.x + (cellLocalX - spriteLocalCenterX) * scale = containerCenterX\n\n    const spriteCenterX = this.config.width / 2;\n    const spriteCenterY = this.config.height / 2;\n\n    this.sprite.x = containerCenterX - (cellCenterX - spriteCenterX) * this.scale;\n    this.sprite.y = containerCenterY - (cellCenterY - spriteCenterY) * this.scale;\n\n    // Redraw overlay to reflect new position\n    this.drawCellOverlay();\n  }\n\n  /**\n   * Clean up resources and event listeners\n   * Call this when the controller is no longer needed to prevent memory leaks\n   */\n  public destroy(): void {\n    // Remove window event listeners\n    if (typeof window !== 'undefined') {\n      if (this.wheelHandler) {\n        window.removeEventListener('wheel', this.wheelHandler);\n        this.wheelHandler = null;\n      }\n      if (this.mouseDownHandler) {\n        window.removeEventListener('mousedown', this.mouseDownHandler);\n        this.mouseDownHandler = null;\n      }\n      if (this.mouseMoveHandler) {\n        window.removeEventListener('mousemove', this.mouseMoveHandler);\n        this.mouseMoveHandler = null;\n      }\n      if (this.mouseUpHandler) {\n        window.removeEventListener('mouseup', this.mouseUpHandler);\n        this.mouseUpHandler = null;\n      }\n      if (this.animationFrameId !== null) {\n        cancelAnimationFrame(this.animationFrameId);\n        this.animationFrameId = null;\n      }\n    }\n\n    // Clean up PIXI resources\n    if (this.texture) {\n      this.texture.destroy(true);\n      this.texture = null;\n    }\n    if (this.cellOverlay) {\n      this.cellOverlay.destroy();\n      this.cellOverlay = null;\n    }\n    if (this.sprite) {\n      this.sprite.destroy();\n      this.sprite = null;\n    }\n  }\n}\n","/**\n * Sprite sheet card component for displaying and editing sprite sheets\n * \n *  IMPORTANT: This component bridges pixel-based sprite sheet content and grid-based UI\n * - Sprite sheet dimensions are in ACTUAL PIXELS (128x128, 256x256, etc.)\n * - Card UI wrapper uses GRID UNITS (converted from pixels for content size)\n * - The sprite sheet content itself is rendered at pixel scale, not grid scale\n * \n * @see ../utilities/README.md for grid system documentation\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from './pixel-card';\nimport { GRID, px } from '@moxijs/core';\nimport { SpriteSheetController, SpriteSheetConfig, SpriteSheetType } from '../controllers/sprite-sheet-controller';\nimport { createCheckerboardTexture } from '../utilities/texture-utils';\nimport { PICO8_PALETTE, TIC80_PALETTE } from '../theming/palettes';\nimport palettesConfig from '../config/palettes.json';\n\nexport { SpriteSheetType, SpriteSheetConfig };\n\n// Sprite sheet configurations - now uses centralized palette data\nexport const SPRITESHEET_CONFIGS: Record<SpriteSheetType, SpriteSheetConfig> = {\n  'PICO-8': {\n    type: 'PICO-8',\n    width: palettesConfig.spriteSheets['PICO-8'].width,\n    height: palettesConfig.spriteSheets['PICO-8'].height,\n    palette: PICO8_PALETTE\n  },\n  'TIC-80': {\n    type: 'TIC-80',\n    width: palettesConfig.spriteSheets['TIC-80'].width,\n    height: palettesConfig.spriteSheets['TIC-80'].height,\n    palette: TIC80_PALETTE\n  }\n};\n\nexport interface SpriteSheetCardOptions {\n  config: SpriteSheetConfig;\n  x?: number;\n  y?: number;\n  renderer: PIXI.Renderer;\n  showGrid?: boolean;\n  onCellHover?: (cellX: number, cellY: number) => void;\n  onCellClick?: (cellX: number, cellY: number) => void;\n  onFocus?: () => void;\n}\n\nexport interface SpriteSheetCardResult {\n  card: PixelCard;\n  container: PIXI.Container;\n  controller: SpriteSheetController;\n  destroy: () => void;\n}\n\n/**\n * Creates a sprite sheet card with a canvas for editing\n */\nexport function createSpriteSheetCard(options: SpriteSheetCardOptions): SpriteSheetCardResult {\n  const { config, x, y, renderer, showGrid = false, onCellHover, onCellClick, onFocus } = options;\n\n  let card: PixelCard;\n  let contentContainer: PIXI.Container;\n  let gridBackground: PIXI.TilingSprite;\n\n  // Create sprite sheet controller\n  const controller = new SpriteSheetController({\n    config,\n    renderer,\n    showGrid,\n    onScaleChange: (newScale) => {\n      // Update card title when scale changes\n      const cell = controller.getSelectedCell();\n      const cellText = cell ? `${cell.x},${cell.y}` : 'grid-cell';\n      card.setTitle(`${cellText} | ${newScale.toFixed(2)}x`);\n      // Re-render the sprite sheet\n      controller.render(contentContainer);\n    },\n    onCellHover,\n    onCellClick: (cellX, cellY) => {\n      // Update title when cell is selected\n      card.setTitle(`${cellX},${cellY} | ${controller.getScale().toFixed(2)}x`);\n      // Call original onCellClick if provided\n      if (onCellClick) {\n        onCellClick(cellX, cellY);\n      }\n    }\n  });\n\n  // Get initial scaled dimensions\n  const { width: scaledWidth, height: scaledHeight } = controller.getScaledDimensions();\n\n  // Convert pixel dimensions to grid units\n  const contentWidth = Math.ceil(scaledWidth / px(1));\n  const contentHeight = Math.ceil(scaledHeight / px(1));\n\n  // Default position to bottom right (minimap style) if not specified\n  const cardPadding = px(GRID.padding * 2) + px(6); // padding + border\n  const titleBarHeight = 24; // Title bar height in pixels\n  const margin = 20; // Margin from edges\n  // Calculate default position with bounds checking to stay on screen\n  const calculatedX = renderer.width - px(contentWidth) - cardPadding - margin;\n  const calculatedY = renderer.height - px(contentHeight) - cardPadding - titleBarHeight - margin;\n  const defaultX = x ?? Math.max(margin, calculatedX);\n  const defaultY = y ?? Math.max(margin + titleBarHeight, calculatedY);\n\n  card = new PixelCard({\n    title: `grid-cell | ${controller.getScale().toFixed(2)}x`,\n    x: defaultX,\n    y: defaultY,\n    contentWidth,\n    contentHeight,\n    renderer,\n    clipContent: true, // Enable clipping for sprite sheet (overflow: hidden)\n    onFocus,\n    onResize: (width, height) => {\n      // Update tiled background size when card is resized\n      if (gridBackground) {\n        gridBackground.width = px(width);\n        gridBackground.height = px(height);\n      }\n    }\n  });\n\n  contentContainer = card.getContentContainer();\n\n  // Create tiled grid background using utility\n  const gridTexture = createCheckerboardTexture(16, 0x2a2a3a, 0x353545);\n  gridBackground = new PIXI.TilingSprite({\n    texture: gridTexture,\n    width: px(contentWidth),\n    height: px(contentHeight)\n  });\n  gridBackground.tileScale.set(1, 1);\n  contentContainer.addChildAt(gridBackground, 0); // Add as first child (behind everything)\n\n  // Initial render - controller now handles cell selection/highlighting\n  controller.render(contentContainer);\n\n  return {\n    card,\n    container: card.container,\n    controller,\n    destroy: () => {\n      controller.destroy();\n      gridBackground.destroy();\n      card.container.destroy({ children: true });\n    }\n  };\n}\n","/**\n * UI State Manager - Persists card positions and sizes to localStorage\n */\n\nexport interface CardState {\n  id: string;                    // Unique identifier for the card\n  x: number;                     // Position X\n  y: number;                     // Position Y\n  contentWidth: number;          // Content width in grid units\n  contentHeight: number;         // Content height in grid units\n  visible: boolean;              // Visibility state\n}\n\nexport interface UIState {\n  version: string;               // For future migrations\n  timestamp: number;             // When saved\n  canvasWidth: number;           // Canvas dimensions at save time\n  canvasHeight: number;\n  cards: CardState[];            // All card states\n}\n\nexport class UIStateManager {\n  private static readonly VERSION = '1.0.0';\n  private static readonly STORAGE_KEY = 'sprite-editor-ui-state';\n\n  /**\n   * Save UI state to localStorage\n   */\n  static saveState(\n    cards: Map<string, CardState>,\n    canvasWidth: number,\n    canvasHeight: number\n  ): void {\n    const state: UIState = {\n      version: UIStateManager.VERSION,\n      timestamp: Date.now(),\n      canvasWidth,\n      canvasHeight,\n      cards: Array.from(cards.values())\n    };\n\n    try {\n      localStorage.setItem(\n        UIStateManager.STORAGE_KEY,\n        JSON.stringify(state)\n      );\n      console.log(' UI state saved:', cards.size, 'cards');\n    } catch (e) {\n      console.error('Failed to save UI state:', e);\n    }\n  }\n\n  /**\n   * Load UI state from localStorage\n   */\n  static loadState(): UIState | null {\n    try {\n      const json = localStorage.getItem(UIStateManager.STORAGE_KEY);\n      if (!json) return null;\n\n      const state = JSON.parse(json) as UIState;\n\n      // Validate version\n      if (state.version !== UIStateManager.VERSION) {\n        console.warn('UI state version mismatch, ignoring');\n        return null;\n      }\n\n      console.log(' UI state loaded:', state.cards.length, 'cards');\n      return state;\n    } catch (e) {\n      console.error('Failed to load UI state:', e);\n      return null;\n    }\n  }\n\n  /**\n   * Clear saved UI state\n   */\n  static clearState(): void {\n    localStorage.removeItem(UIStateManager.STORAGE_KEY);\n    console.log(' UI state cleared');\n  }\n\n  /**\n   * Check if saved state exists\n   */\n  static hasState(): boolean {\n    return localStorage.getItem(UIStateManager.STORAGE_KEY) !== null;\n  }\n\n  /**\n   * Adjust card positions for different canvas size\n   * (Handles window resize between sessions)\n   */\n  static adjustForCanvasSize(\n    state: UIState,\n    newWidth: number,\n    newHeight: number\n  ): UIState {\n    const scaleX = newWidth / state.canvasWidth;\n    const scaleY = newHeight / state.canvasHeight;\n\n    return {\n      ...state,\n      canvasWidth: newWidth,\n      canvasHeight: newHeight,\n      cards: state.cards.map(card => ({\n        ...card,\n        x: Math.round(card.x * scaleX),\n        y: Math.round(card.y * scaleY)\n      }))\n    };\n  }\n}\n","/**\n * Project State Manager\n * Manages sprite project data separately from UI layout state\n * Saves sprite pixel data, sprite sheet configurations, and active editing state\n */\nimport { SpriteSheetType } from '../controllers/sprite-sheet-controller';\nimport { MainToolType } from '../cards/toolbar-card';\nimport { ShapeType } from '../theming/tool-icons';\n\nconst PROJECT_STATE_KEY = 'sprite-editor-project';\n\n/**\n * Result type for operations that can fail\n */\nexport interface OperationResult<T = void> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\n\n/**\n * State for a single sprite sheet in the project\n */\nexport interface SpriteSheetState {\n  id: string;\n  type: SpriteSheetType;\n  showGrid: boolean;\n  pixels: number[][]; // 2D array of color indices\n  selectedCellX: number;\n  selectedCellY: number;\n  scale: number;\n  spriteCardScale?: number; // Scale of the sprite card if open\n}\n\n/**\n * Complete project state\n */\nexport interface ProjectState {\n  version: number; // For future migrations\n  createdAt: number; // Timestamp\n  modifiedAt: number; // Timestamp\n  spriteSheets: SpriteSheetState[];\n  activeSpriteSheetId: string | null;\n  selectedColorIndex: number;\n  selectedTool?: MainToolType; // Active tool (pencil, eraser, etc.)\n  selectedShape?: ShapeType; // Active shape for shape tool\n}\n\n/**\n * Project State Manager\n * Handles saving and loading of sprite project data to/from localStorage\n */\nexport class ProjectStateManager {\n  private static readonly CURRENT_VERSION = 1;\n\n  /**\n   * Create a new empty project\n   */\n  static createEmptyProject(): ProjectState {\n    return {\n      version: this.CURRENT_VERSION,\n      createdAt: Date.now(),\n      modifiedAt: Date.now(),\n      spriteSheets: [],\n      activeSpriteSheetId: null,\n      selectedColorIndex: 0,\n      selectedTool: 'pencil',\n      selectedShape: 'square'\n    };\n  }\n\n  /**\n   * Save project state to localStorage\n   * @returns Result indicating success or failure with error message\n   */\n  static saveProject(state: ProjectState): OperationResult {\n    try {\n      state.modifiedAt = Date.now();\n      const serialized = JSON.stringify(state);\n      localStorage.setItem(PROJECT_STATE_KEY, serialized);\n      console.log(' Project saved to localStorage');\n      return { success: true };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      console.error('Failed to save project state:', error);\n      return { success: false, error: `Failed to save project: ${errorMessage}` };\n    }\n  }\n\n  /**\n   * Load project state from localStorage\n   * @returns Result with project data or error message\n   */\n  static loadProject(): OperationResult<ProjectState | null> {\n    try {\n      const serialized = localStorage.getItem(PROJECT_STATE_KEY);\n      if (!serialized) {\n        return { success: true, data: null };\n      }\n\n      const state = JSON.parse(serialized) as ProjectState;\n\n      // Version migration if needed\n      if (state.version !== this.CURRENT_VERSION) {\n        console.warn('Project version mismatch, migrating...');\n        return { success: true, data: this.migrateProject(state) };\n      }\n\n      console.log(' Project loaded from localStorage');\n      return { success: true, data: state };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      console.error('Failed to load project state:', error);\n      return { success: false, error: `Failed to load project: ${errorMessage}` };\n    }\n  }\n\n  /**\n   * Clear project state (start fresh)\n   * @returns Result indicating success or failure\n   */\n  static clearProject(): OperationResult {\n    try {\n      localStorage.removeItem(PROJECT_STATE_KEY);\n      console.log(' Project cleared');\n      return { success: true };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      console.error('Failed to clear project state:', error);\n      return { success: false, error: `Failed to clear project: ${errorMessage}` };\n    }\n  }\n\n  /**\n   * Check if a project exists\n   */\n  static hasProject(): boolean {\n    return localStorage.getItem(PROJECT_STATE_KEY) !== null;\n  }\n\n  /**\n   * Migrate old project versions to current version\n   */\n  private static migrateProject(state: ProjectState): ProjectState {\n    // For now, just update the version\n    // In the future, handle migrations between versions here\n    return {\n      ...state,\n      version: this.CURRENT_VERSION\n    };\n  }\n\n  /**\n   * Export project as JSON string (for download/sharing)\n   */\n  static exportProjectJSON(state: ProjectState): string {\n    return JSON.stringify(state, null, 2);\n  }\n\n  /**\n   * Import project from JSON string\n   * @returns Result with imported project or error message\n   */\n  static importProjectJSON(jsonString: string): OperationResult<ProjectState> {\n    try {\n      const state = JSON.parse(jsonString) as ProjectState;\n\n      // Validate the structure\n      if (!state.spriteSheets || !Array.isArray(state.spriteSheets)) {\n        return { success: false, error: 'Invalid project file: missing sprite sheet data' };\n      }\n\n      // Migrate if needed\n      if (state.version !== this.CURRENT_VERSION) {\n        return { success: true, data: this.migrateProject(state) };\n      }\n\n      return { success: true, data: state };\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      console.error('Failed to import project:', error);\n      return { success: false, error: `Failed to import project: ${errorMessage}` };\n    }\n  }\n\n  /**\n   * Get project metadata (without full pixel data)\n   */\n  static getProjectMetadata(): { createdAt: number; modifiedAt: number; sheetCount: number } | null {\n    const result = this.loadProject();\n    if (!result.success || !result.data) return null;\n\n    return {\n      createdAt: result.data.createdAt,\n      modifiedAt: result.data.modifiedAt,\n      sheetCount: result.data.spriteSheets.length\n    };\n  }\n\n}\n","/**\n * Layout State Manager - Save and load layout configurations\n */\n\nexport interface CardLayoutState {\n  id: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport interface LayoutSlotState {\n  cards: CardLayoutState[];\n}\n\nconst LAYOUT_STORAGE_PREFIX = 'pikcell-layout-slot-';\n\nexport class LayoutStateManager {\n  /**\n   * Save current layout to a slot\n   */\n  static saveLayoutSlot(slot: 'A' | 'B' | 'C', layout: LayoutSlotState): void {\n    const key = `${LAYOUT_STORAGE_PREFIX}${slot}`;\n    localStorage.setItem(key, JSON.stringify(layout));\n  }\n\n  /**\n   * Load layout from a slot\n   */\n  static loadLayoutSlot(slot: 'A' | 'B' | 'C'): LayoutSlotState | null {\n    const key = `${LAYOUT_STORAGE_PREFIX}${slot}`;\n    const data = localStorage.getItem(key);\n    if (!data) return null;\n\n    try {\n      return JSON.parse(data) as LayoutSlotState;\n    } catch (e) {\n      console.error(`Failed to parse layout slot ${slot}:`, e);\n      return null;\n    }\n  }\n\n  /**\n   * Check if a slot has a saved layout\n   */\n  static hasLayoutSlot(slot: 'A' | 'B' | 'C'): boolean {\n    const key = `${LAYOUT_STORAGE_PREFIX}${slot}`;\n    return localStorage.getItem(key) !== null;\n  }\n\n  /**\n   * Clear a layout slot\n   */\n  static clearLayoutSlot(slot: 'A' | 'B' | 'C'): void {\n    const key = `${LAYOUT_STORAGE_PREFIX}${slot}`;\n    localStorage.removeItem(key);\n  }\n}\n","/**\n * UndoManager - Tracks pixel operations for undo/redo\n *\n * Uses stroke-based undo where each pointer down/up cycle is one operation.\n */\n\n/** A single pixel change */\nexport interface PixelChange {\n  x: number;\n  y: number;\n  oldColorIndex: number;\n  newColorIndex: number;\n}\n\n/** A stroke operation (group of pixel changes) */\nexport interface StrokeOperation {\n  timestamp: number;\n  changes: PixelChange[];\n  spriteSheetId: string;\n}\n\n/** Undo manager configuration */\nexport interface UndoManagerConfig {\n  maxHistory?: number;  // Maximum number of operations to keep (default: 50)\n}\n\n/**\n * Manages undo/redo history for pixel operations\n */\nexport class UndoManager {\n  private undoStack: StrokeOperation[] = [];\n  private redoStack: StrokeOperation[] = [];\n  private currentStroke: PixelChange[] = [];\n  private currentSpriteSheetId: string | null = null;\n  private maxHistory: number;\n\n  constructor(config: UndoManagerConfig = {}) {\n    this.maxHistory = config.maxHistory ?? 50;\n  }\n\n  /**\n   * Start recording a new stroke\n   */\n  beginStroke(spriteSheetId: string): void {\n    this.currentStroke = [];\n    this.currentSpriteSheetId = spriteSheetId;\n  }\n\n  /**\n   * Record a pixel change within the current stroke\n   */\n  recordPixelChange(x: number, y: number, oldColorIndex: number, newColorIndex: number): void {\n    // Only record if there's an actual change\n    if (oldColorIndex === newColorIndex) return;\n\n    // Check if we already have a change for this pixel in the current stroke\n    const existingIndex = this.currentStroke.findIndex(c => c.x === x && c.y === y);\n\n    if (existingIndex >= 0) {\n      // Update the existing change (keep original oldColorIndex, update newColorIndex)\n      this.currentStroke[existingIndex].newColorIndex = newColorIndex;\n    } else {\n      // Add new change\n      this.currentStroke.push({ x, y, oldColorIndex, newColorIndex });\n    }\n  }\n\n  /**\n   * End the current stroke and add it to history\n   */\n  endStroke(): void {\n    if (this.currentStroke.length > 0 && this.currentSpriteSheetId) {\n      const operation: StrokeOperation = {\n        timestamp: Date.now(),\n        changes: [...this.currentStroke],\n        spriteSheetId: this.currentSpriteSheetId\n      };\n\n      this.undoStack.push(operation);\n\n      // Trim history if needed\n      if (this.undoStack.length > this.maxHistory) {\n        this.undoStack.shift();\n      }\n\n      // Clear redo stack when new operation is added\n      this.redoStack = [];\n    }\n\n    this.currentStroke = [];\n    this.currentSpriteSheetId = null;\n  }\n\n  /**\n   * Check if there's a stroke in progress\n   */\n  isStrokeInProgress(): boolean {\n    return this.currentSpriteSheetId !== null;\n  }\n\n  /**\n   * Undo the last operation\n   * @returns The operation to undo, or null if nothing to undo\n   */\n  undo(): StrokeOperation | null {\n    const operation = this.undoStack.pop();\n    if (operation) {\n      this.redoStack.push(operation);\n      return operation;\n    }\n    return null;\n  }\n\n  /**\n   * Redo the last undone operation\n   * @returns The operation to redo, or null if nothing to redo\n   */\n  redo(): StrokeOperation | null {\n    const operation = this.redoStack.pop();\n    if (operation) {\n      this.undoStack.push(operation);\n      return operation;\n    }\n    return null;\n  }\n\n  /**\n   * Check if undo is available\n   */\n  canUndo(): boolean {\n    return this.undoStack.length > 0;\n  }\n\n  /**\n   * Check if redo is available\n   */\n  canRedo(): boolean {\n    return this.redoStack.length > 0;\n  }\n\n  /**\n   * Clear all history for a specific sprite sheet\n   */\n  clearHistory(spriteSheetId?: string): void {\n    if (spriteSheetId) {\n      this.undoStack = this.undoStack.filter(op => op.spriteSheetId !== spriteSheetId);\n      this.redoStack = this.redoStack.filter(op => op.spriteSheetId !== spriteSheetId);\n    } else {\n      this.undoStack = [];\n      this.redoStack = [];\n    }\n    this.currentStroke = [];\n    this.currentSpriteSheetId = null;\n  }\n\n  /**\n   * Get current history size\n   */\n  getHistorySize(): { undo: number; redo: number } {\n    return {\n      undo: this.undoStack.length,\n      redo: this.redoStack.length\n    };\n  }\n}\n","/**\n * Card Zoom Handler Utility\n * Encapsulates the common zoom logic used by palette, tools, and sprite cards\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from '../components/pixel-card';\n\n/**\n * Helper: Creates a mouse wheel zoom handler for a card\n * Encapsulates the common zoom logic used by palette, tools, and sprite cards\n */\nexport function createCardZoomHandler(\n  renderer: PIXI.Renderer,\n  card: PixelCard,\n  onZoom: (delta: number, event: WheelEvent) => void\n): (e: WheelEvent) => void {\n  return (e: WheelEvent) => {\n    const canvas = renderer.canvas as HTMLCanvasElement;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n\n    const mouseX = (e.clientX - rect.left) * scaleX;\n    const mouseY = (e.clientY - rect.top) * scaleY;\n\n    const cardBounds = card.container.getBounds();\n\n    if (mouseX >= cardBounds.x && mouseX <= cardBounds.x + cardBounds.width &&\n        mouseY >= cardBounds.y && mouseY <= cardBounds.y + cardBounds.height) {\n      e.preventDefault();\n\n      const delta = e.deltaY > 0 ? -1 : 1;\n      onZoom(delta, e);\n    }\n  };\n}\n","/**\n * Managed Card Utility\n *\n * Provides common functionality for card components including:\n * - Automatic cleanup of child components\n * - Event handler management\n * - Standardized destroy pattern\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard, PixelCardOptions } from '../components/pixel-card';\n\n/**\n * Interface for components that can be destroyed\n */\nexport interface Destroyable {\n  destroy(): void;\n}\n\n/**\n * Interface for event listener cleanup\n */\nexport interface EventListenerRef {\n  target: EventTarget;\n  type: string;\n  listener: EventListener;\n  options?: AddEventListenerOptions | boolean;\n}\n\n/**\n * Managed card state and utilities\n */\nexport interface ManagedCard {\n  /** The underlying PixelCard */\n  card: PixelCard;\n\n  /** The content container from the card */\n  contentContainer: PIXI.Container;\n\n  /**\n   * Register a child component for automatic cleanup.\n   * Call this when creating buttons, swatches, or other destroyable components.\n   */\n  trackChild<T extends Destroyable>(child: T): T;\n\n  /**\n   * Clear all tracked children (destroys them and empties the list).\n   * Call this before redrawing content.\n   */\n  clearChildren(): void;\n\n  /**\n   * Register an event listener for automatic cleanup.\n   * Call this instead of directly using addEventListener.\n   */\n  addEventListenerTracked<K extends keyof WindowEventMap>(\n    target: Window,\n    type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => void,\n    options?: AddEventListenerOptions | boolean\n  ): void;\n  addEventListenerTracked(\n    target: EventTarget,\n    type: string,\n    listener: EventListener,\n    options?: AddEventListenerOptions | boolean\n  ): void;\n\n  /**\n   * Destroy the managed card and all tracked resources.\n   * This should be returned as the destroy method of your card result.\n   */\n  destroy(): void;\n}\n\n/**\n * Creates a managed card with automatic cleanup utilities.\n *\n * @example\n * ```typescript\n * const managed = createManagedCard({\n *   title: 'My Card',\n *   x: 0, y: 0,\n *   contentWidth: 100,\n *   contentHeight: 100,\n *   renderer,\n *   onRefresh: () => redrawContent()\n * });\n *\n * function redrawContent() {\n *   managed.clearChildren();\n *   managed.contentContainer.removeChildren();\n *\n *   const button = createPixelButton({ ... });\n *   managed.trackChild(button);\n *   managed.contentContainer.addChild(button.container);\n * }\n *\n * // For wheel handlers\n * managed.addEventListenerTracked(window, 'wheel', handleWheel, { passive: false });\n *\n * return {\n *   card: managed.card,\n *   container: managed.card.container,\n *   destroy: managed.destroy\n * };\n * ```\n */\nexport function createManagedCard(options: PixelCardOptions): ManagedCard {\n  const card = new PixelCard(options);\n  const contentContainer = card.getContentContainer();\n\n  // Track created children for cleanup\n  const trackedChildren: Destroyable[] = [];\n\n  // Track event listeners for cleanup\n  const trackedListeners: EventListenerRef[] = [];\n\n  function trackChild<T extends Destroyable>(child: T): T {\n    trackedChildren.push(child);\n    return child;\n  }\n\n  function clearChildren(): void {\n    trackedChildren.forEach(child => child.destroy());\n    trackedChildren.length = 0;\n  }\n\n  function addEventListenerTracked(\n    target: EventTarget,\n    type: string,\n    listener: EventListener,\n    options?: AddEventListenerOptions | boolean\n  ): void {\n    target.addEventListener(type, listener, options);\n    trackedListeners.push({ target, type, listener, options });\n  }\n\n  function destroy(): void {\n    // Clean up all tracked children\n    clearChildren();\n\n    // Remove all tracked event listeners\n    trackedListeners.forEach(({ target, type, listener, options }) => {\n      target.removeEventListener(type, listener, options);\n    });\n    trackedListeners.length = 0;\n\n    // Destroy the card\n    card.container.destroy({ children: true });\n  }\n\n  return {\n    card,\n    contentContainer,\n    trackChild,\n    clearChildren,\n    addEventListenerTracked,\n    destroy\n  };\n}\n","/**\n * Card configuration constants\n *\n * All card-specific dimension and layout values are centralized here.\n * Values are in grid units unless otherwise noted.\n */\n\n// ============================================================================\n// Toolbar Card (main tool selection)\n// ============================================================================\n\nexport const TOOLBAR_CARD_CONFIG = {\n  /** Button size in grid units (square) */\n  buttonSize: 16,\n  /** Spacing between buttons in grid units */\n  buttonSpacing: 1,\n  /** Layout direction */\n  layout: 'vertical' as const\n} as const;\n\n// ============================================================================\n// Sprite Editor Tools (tool selection list)\n// ============================================================================\n\nexport const SPRITE_EDITOR_TOOLS_CONFIG: {\n  defaultWidth: number;\n  defaultHeight: number;\n  baseFontScale: number;\n  fontScaleReferenceHeight: number;\n  minHeight: number;\n  maxHeight: number;\n  minWidth: number;\n  maxWidth: number;\n  minFontScale: number;\n  maxFontScale: number;\n} = {\n  /** Default button width in grid units */\n  defaultWidth: 46,\n  /** Default button height in grid units */\n  defaultHeight: 12,\n  /** Base font scale at default height */\n  baseFontScale: 0.25,\n  /** Reference height for font scale calculation */\n  fontScaleReferenceHeight: 12,\n  /** Minimum button height */\n  minHeight: 4,\n  /** Maximum button height */\n  maxHeight: 20,\n  /** Minimum button width */\n  minWidth: 23,\n  /** Maximum button width */\n  maxWidth: 86,\n  /** Minimum font scale */\n  minFontScale: 0.1,\n  /** Maximum font scale */\n  maxFontScale: 0.5\n};\n\n// ============================================================================\n// Palette Card (color selection)\n// ============================================================================\n\nexport const PALETTE_CARD_CONFIG: {\n  defaultColorsPerRow: number;\n  defaultRows: number;\n  defaultSwatchSize: number;\n  minSwatchSize: number;\n  maxSwatchSize: number;\n} = {\n  /** Default number of colors per row */\n  defaultColorsPerRow: 4,\n  /** Default number of rows */\n  defaultRows: 4,\n  /** Default swatch size in grid units */\n  defaultSwatchSize: 12,\n  /** Minimum swatch size */\n  minSwatchSize: 2,\n  /** Maximum swatch size */\n  maxSwatchSize: 32\n};\n\n// ============================================================================\n// Commander Bar Card (main action bar)\n// ============================================================================\n\nexport const COMMANDER_BAR_CONFIG = {\n  /** Bar height in grid units */\n  barHeight: 12,\n  /** Spacing between buttons in grid units */\n  buttonSpacing: 2,\n  /** Left button width (New, Save, Load, Export) */\n  leftButtonWidth: 'auto' as const,\n  /** Right button widths */\n  layoutButtonWidth: 14,\n  themeButtonWidth: 12\n} as const;\n\n// ============================================================================\n// Info Bar Card (status display)\n// ============================================================================\n\nexport const INFO_BAR_CONFIG = {\n  /** Bar height in grid units */\n  barHeight: 8,\n  /** Minimum section width in grid units */\n  minSectionWidth: 20\n} as const;\n\n// ============================================================================\n// Scale Card (grid scale testing)\n// ============================================================================\n\nexport const SCALE_CARD_CONFIG = {\n  /** Spacing between buttons in grid units */\n  buttonSpacing: 1\n} as const;\n\n// ============================================================================\n// Popup Toolbar (shape submenu, etc.)\n// ============================================================================\n\nexport const POPUP_TOOLBAR_CONFIG = {\n  /** Default button size in grid units (square) */\n  buttonSize: 12,\n  /** Spacing between buttons in grid units */\n  buttonSpacing: 1\n} as const;\n\n// ============================================================================\n// Component Styling\n// ============================================================================\n\nexport const COMPONENT_STYLES = {\n  /** Default font size for buttons */\n  buttonFontSize: 64,\n  /** Card title font height multiplier */\n  titleFontHeightMultiplier: 64,\n  /** Default icon padding in grid units */\n  iconPadding: 3\n} as const;\n\n// ============================================================================\n// Aggregate export for convenience\n// ============================================================================\n\nexport const CARD_CONFIGS = {\n  toolbar: TOOLBAR_CARD_CONFIG,\n  spriteEditorTools: SPRITE_EDITOR_TOOLS_CONFIG,\n  palette: PALETTE_CARD_CONFIG,\n  commanderBar: COMMANDER_BAR_CONFIG,\n  infoBar: INFO_BAR_CONFIG,\n  scale: SCALE_CARD_CONFIG,\n  popup: POPUP_TOOLBAR_CONFIG,\n  styles: COMPONENT_STYLES\n} as const;\n","/**\n * Info Bar Card - Displays contextual information\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from '../components/pixel-card';\nimport { GRID, px, asBitmapText } from '@moxijs/core';\nimport { getTheme } from '../theming/theme';\nimport { CardResult } from '../interfaces/components';\nimport { createManagedCard } from '../utilities/managed-card';\nimport { INFO_BAR_CONFIG } from '../config/card-configs';\n\nexport interface InfoSection {\n  label: string;\n  value: string;\n}\n\nexport interface InfoBarCardOptions {\n  x: number;\n  y: number;\n  renderer: PIXI.Renderer;\n  width?: number;\n  sections?: InfoSection[];\n}\n\nexport interface InfoBarCardResult extends CardResult {\n  updateSections: (sections: InfoSection[]) => void;\n}\n\n/** Default sections */\nconst DEFAULT_SECTIONS: InfoSection[] = [\n  { label: 'Tool:', value: 'Pencil' },\n  { label: 'Color:', value: '#000000' }\n];\n\n/** Layout constants */\nconst SECTION_PADDING = 2;\nconst SECTION_SPACING = 4;\nconst LABEL_VALUE_GAP = 1;\n\n/**\n * Creates an info bar for displaying contextual information\n */\nexport function createInfoBarCard(options: InfoBarCardOptions): InfoBarCardResult {\n  const { x, y, renderer, width } = options;\n\n  const barHeight = INFO_BAR_CONFIG.barHeight;\n  let sections: InfoSection[] = options.sections ?? DEFAULT_SECTIONS;\n  const barWidth = width ?? (sections.length * INFO_BAR_CONFIG.minSectionWidth);\n\n  // Create the managed card\n  const managed = createManagedCard({\n    title: 'Info',\n    x,\n    y,\n    contentWidth: barWidth,\n    contentHeight: barHeight,\n    renderer,\n    minContentSize: true,\n    onResize: (newWidth) => {\n      if (newWidth >= barHeight) updateInfoSections();\n    },\n    onRefresh: () => updateInfoSections()\n  });\n\n  const { card, contentContainer } = managed;\n\n  /** Create a text element */\n  function createText(text: string, color: number): PIXI.BitmapText {\n    const bitmapText = asBitmapText(\n      { text, style: { fontFamily: 'PixelOperator8Bitmap', fontSize: 64, fill: color }, pixelPerfect: true },\n      { scale: GRID.fontScale }\n    );\n    bitmapText.tint = color; // BitmapText uses tint for color\n    return bitmapText;\n  }\n\n  function updateInfoSections() {\n    contentContainer.removeChildren();\n\n    const theme = getTheme();\n    let currentX = px(SECTION_PADDING);\n\n    sections.forEach(section => {\n      const labelText = createText(section.label, theme.text);\n      labelText.position.set(currentX, px(SECTION_PADDING));\n      contentContainer.addChild(labelText);\n\n      currentX += labelText.width + px(LABEL_VALUE_GAP);\n\n      const valueText = createText(section.value, theme.text);\n      valueText.position.set(currentX, px(SECTION_PADDING));\n      contentContainer.addChild(valueText);\n\n      currentX += valueText.width + px(SECTION_SPACING);\n    });\n  }\n\n  // Initial draw\n  updateInfoSections();\n  card.updateMinContentSize();\n\n  return {\n    card,\n    container: card.container,\n    updateSections: (newSections: InfoSection[]) => {\n      sections = newSections;\n      updateInfoSections();\n      card.updateMinContentSize();\n    },\n    destroy: managed.destroy\n  };\n}\n","/**\n * PIKCELL Bar Card - Main action bar with commands\n *\n * Uses GRID UNITS for all measurements (converted via px()).\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from '../components/pixel-card';\nimport { createPixelButton } from '../components/pixel-button';\nimport { createPixelDialog } from '../components/pixel-dialog';\nimport { BORDER, GRID, px } from '@moxijs/core';\nimport { getAllThemes, setTheme, ThemeInfo } from '../theming/theme';\nimport { createManagedCard } from '../utilities/managed-card';\nimport { layoutButtonRow } from '../utilities/button-layout';\nimport { COMMANDER_BAR_CONFIG } from '../config/card-configs';\n\n/** Button definition for data-driven creation */\ninterface ButtonDef {\n  label: string;\n  callbackKey: keyof CommanderBarCallbacks;\n}\n\nexport interface CommanderBarCallbacks {\n  onNew?: () => void;\n  onSave?: () => void;\n  onLoad?: () => void;\n  onExport?: () => void;\n  onApplyLayout?: () => void;\n  onSaveLayoutSlot?: (slot: 'A' | 'B' | 'C') => void;\n  onLoadLayoutSlot?: (slot: 'A' | 'B' | 'C') => void;\n  hasLayoutSlot?: (slot: 'A' | 'B' | 'C') => boolean;\n  onThemeChange?: () => void;\n  onScaleChange?: (scale: number) => void; // TEMPORARY: For testing GRID scaling\n}\n\nexport interface CommanderBarCardOptions {\n  x: number;\n  y: number;\n  renderer: PIXI.Renderer;\n  scene: PIXI.Container;\n  width?: number;  // Optional width in grid units (defaults to auto-calculated)\n  callbacks?: CommanderBarCallbacks;\n}\n\nexport interface CommanderBarCardResult {\n  card: PixelCard;\n  container: PIXI.Container;\n  destroy: () => void;\n}\n\n/** Left-side button definitions */\nconst LEFT_BUTTONS: ButtonDef[] = [\n  { label: 'New', callbackKey: 'onNew' },\n  { label: 'Save', callbackKey: 'onSave' },\n  { label: 'Load', callbackKey: 'onLoad' },\n  { label: 'Export', callbackKey: 'onExport' }\n];\n\n/** Layout slot identifiers */\nconst LAYOUT_SLOTS: Array<'A' | 'B' | 'C'> = ['A', 'B', 'C'];\n\n/**\n * Creates a PIKCELL bar for actions and options\n */\nexport function createCommanderBarCard(options: CommanderBarCardOptions): CommanderBarCardResult {\n  const { x, y, renderer, scene, width, callbacks } = options;\n\n  const canvasWidth = renderer.width;\n  const barHeight = COMMANDER_BAR_CONFIG.barHeight;\n  const buttonSpacing = COMMANDER_BAR_CONFIG.buttonSpacing;\n\n  // Calculate bar width (account for card borders and padding)\n  const barWidth = width ?? (Math.floor(canvasWidth / px(1)) - (BORDER.total * 2) - (GRID.padding * 2));\n\n  // Create the managed card\n  const managed = createManagedCard({\n    title: 'PIKCELL',\n    x,\n    y,\n    contentWidth: barWidth,\n    contentHeight: barHeight,\n    renderer,\n    minContentSize: true,\n    onResize: () => drawCommands(),\n    onRefresh: () => drawCommands()\n  });\n\n  const { card, contentContainer } = managed;\n\n  /**\n   * Build layout dialog buttons dynamically based on saved slots\n   */\n  function buildLayoutDialogButtons(): Array<{ label: string; onClick: () => void }> {\n    const buttons: Array<{ label: string; onClick: () => void }> = [];\n\n    // Reset layout button\n    buttons.push({\n      label: 'Reset',\n      onClick: () => callbacks?.onApplyLayout?.()\n    });\n\n    // Slot A, B, C load/save buttons\n    LAYOUT_SLOTS.forEach(slot => {\n      const hasSlot = callbacks?.hasLayoutSlot?.(slot) ?? false;\n\n      if (hasSlot) {\n        buttons.push({\n          label: `Load ${slot}`,\n          onClick: () => callbacks?.onLoadLayoutSlot?.(slot)\n        });\n      }\n\n      buttons.push({\n        label: `Save ${slot}`,\n        onClick: () => callbacks?.onSaveLayoutSlot?.(slot)\n      });\n    });\n\n    return buttons;\n  }\n\n  /**\n   * Show layout selection dialog\n   */\n  function showLayoutDialog() {\n    const dialog = createPixelDialog({\n      title: 'Layout',\n      message: 'Choose layout:',\n      buttons: buildLayoutDialogButtons(),\n      renderer\n    });\n    scene.addChild(dialog.container);\n  }\n\n  /**\n   * Show theme selection dialog\n   */\n  function showThemeDialog() {\n    const allThemes = getAllThemes();\n    const dialog = createPixelDialog({\n      title: 'Choose Theme',\n      message: 'Select a theme:',\n      buttons: allThemes.map((themeInfo: ThemeInfo) => ({\n        label: themeInfo.name,\n        onClick: () => {\n          setTheme(themeInfo);\n          callbacks?.onThemeChange?.();\n        }\n      })),\n      renderer\n    });\n    scene.addChild(dialog.container);\n  }\n\n  function drawCommands() {\n    managed.clearChildren();\n    contentContainer.removeChildren();\n\n    // Create left-side buttons from config\n    const leftButtons = LEFT_BUTTONS.map(def => {\n      const btn = createPixelButton({\n        height: barHeight,\n        label: def.label,\n        selectionMode: 'press',\n        actionMode: 'click',\n        onClick: () => {\n          const callback = callbacks?.[def.callbackKey];\n          if (typeof callback === 'function') {\n            (callback as () => void)();\n          }\n        }\n      });\n      managed.trackChild(btn);\n      contentContainer.addChild(btn.container);\n      return btn;\n    });\n\n    // Layout left buttons in a row\n    layoutButtonRow({\n      items: leftButtons,\n      spacing: buttonSpacing\n    });\n\n    // Create right-side buttons\n    const layoutButton = createPixelButton({\n      height: barHeight,\n      label: 'Layout',\n      selectionMode: 'press',\n      actionMode: 'click',\n      onClick: showLayoutDialog\n    });\n    managed.trackChild(layoutButton);\n\n    const themeButton = createPixelButton({\n      height: barHeight,\n      label: 'Theme',\n      selectionMode: 'press',\n      actionMode: 'click',\n      onClick: showThemeDialog\n    });\n    managed.trackChild(themeButton);\n\n    // Position right-side buttons at far right\n    const layoutWidth = layoutButton.container.width / px(1);\n    const themeWidth = themeButton.container.width / px(1);\n    const spacingPx = px(buttonSpacing);\n\n    layoutButton.container.position.set(px(barWidth - layoutWidth - themeWidth) - spacingPx, 0);\n    themeButton.container.position.set(px(barWidth - themeWidth), 0);\n\n    contentContainer.addChild(layoutButton.container);\n    contentContainer.addChild(themeButton.container);\n  }\n\n  // Initial draw\n  drawCommands();\n  card.updateMinContentSize();\n\n  return {\n    card,\n    container: card.container,\n    destroy: managed.destroy\n  };\n}\n","/**\n * Button Layout Utilities\n *\n * Helpers for positioning buttons in common layouts.\n * All dimensions are in grid units unless otherwise noted.\n */\nimport * as PIXI from 'pixi.js';\nimport { px, GRID } from '@moxijs/core';\n\n/**\n * Interface for items that can be positioned\n */\nexport interface Positionable {\n  container: PIXI.Container;\n}\n\n/**\n * Result from layout functions\n */\nexport interface LayoutResult {\n  /** Total width of the layout in grid units */\n  width: number;\n  /** Total height of the layout in grid units */\n  height: number;\n}\n\n/**\n * Options for row layout\n */\nexport interface ButtonRowOptions {\n  /** Items to arrange in a row */\n  items: Positionable[];\n  /** Spacing between items in grid units (default: GRID.gap) */\n  spacing?: number;\n  /** Vertical alignment: 'top' | 'center' | 'bottom' (default: 'top') */\n  align?: 'top' | 'center' | 'bottom';\n  /** Starting X position in grid units (default: 0) */\n  startX?: number;\n  /** Starting Y position in grid units (default: 0) */\n  startY?: number;\n}\n\n/**\n * Options for column layout\n */\nexport interface ButtonColumnOptions {\n  /** Items to arrange in a column */\n  items: Positionable[];\n  /** Spacing between items in grid units (default: GRID.gap) */\n  spacing?: number;\n  /** Horizontal alignment: 'left' | 'center' | 'right' (default: 'left') */\n  align?: 'left' | 'center' | 'right';\n  /** Starting X position in grid units (default: 0) */\n  startX?: number;\n  /** Starting Y position in grid units (default: 0) */\n  startY?: number;\n}\n\n/**\n * Options for grid layout\n */\nexport interface ButtonGridOptions {\n  /** Items to arrange in a grid */\n  items: Positionable[];\n  /** Number of columns */\n  columns: number;\n  /** Horizontal spacing between items in grid units (default: GRID.gap) */\n  spacingX?: number;\n  /** Vertical spacing between items in grid units (default: GRID.gap) */\n  spacingY?: number;\n  /** Starting X position in grid units (default: 0) */\n  startX?: number;\n  /** Starting Y position in grid units (default: 0) */\n  startY?: number;\n  /** Uniform cell width in grid units (optional - uses item width if not specified) */\n  cellWidth?: number;\n  /** Uniform cell height in grid units (optional - uses item height if not specified) */\n  cellHeight?: number;\n}\n\n/**\n * Get item dimensions in grid units\n */\nfunction getItemDimensions(item: Positionable): { width: number; height: number } {\n  const bounds = item.container.getLocalBounds();\n  // Convert from pixels to grid units\n  return {\n    width: Math.ceil(bounds.width / px(1)),\n    height: Math.ceil(bounds.height / px(1))\n  };\n}\n\n/**\n * Arrange items in a horizontal row.\n *\n * @example\n * ```typescript\n * const result = layoutButtonRow({\n *   items: [button1, button2, button3],\n *   spacing: 2,\n *   align: 'center'\n * });\n * console.log(`Row is ${result.width} x ${result.height} grid units`);\n * ```\n */\nexport function layoutButtonRow(options: ButtonRowOptions): LayoutResult {\n  const {\n    items,\n    spacing = GRID.gap,\n    align = 'top',\n    startX = 0,\n    startY = 0\n  } = options;\n\n  if (items.length === 0) {\n    return { width: 0, height: 0 };\n  }\n\n  // Calculate max height for alignment\n  let maxHeight = 0;\n  const itemDims = items.map(item => {\n    const dims = getItemDimensions(item);\n    maxHeight = Math.max(maxHeight, dims.height);\n    return dims;\n  });\n\n  // Position each item\n  let currentX = startX;\n  items.forEach((item, i) => {\n    const dims = itemDims[i];\n\n    // Calculate Y based on alignment\n    let itemY = startY;\n    if (align === 'center') {\n      itemY = startY + (maxHeight - dims.height) / 2;\n    } else if (align === 'bottom') {\n      itemY = startY + (maxHeight - dims.height);\n    }\n\n    item.container.position.set(px(currentX), px(itemY));\n    currentX += dims.width + spacing;\n  });\n\n  // Calculate total dimensions\n  const totalWidth = currentX - spacing - startX; // Remove last spacing\n  return {\n    width: totalWidth,\n    height: maxHeight\n  };\n}\n\n/**\n * Arrange items in a vertical column.\n *\n * @example\n * ```typescript\n * const result = layoutButtonColumn({\n *   items: [button1, button2, button3],\n *   spacing: 1,\n *   align: 'center'\n * });\n * ```\n */\nexport function layoutButtonColumn(options: ButtonColumnOptions): LayoutResult {\n  const {\n    items,\n    spacing = GRID.gap,\n    align = 'left',\n    startX = 0,\n    startY = 0\n  } = options;\n\n  if (items.length === 0) {\n    return { width: 0, height: 0 };\n  }\n\n  // Calculate max width for alignment\n  let maxWidth = 0;\n  const itemDims = items.map(item => {\n    const dims = getItemDimensions(item);\n    maxWidth = Math.max(maxWidth, dims.width);\n    return dims;\n  });\n\n  // Position each item\n  let currentY = startY;\n  items.forEach((item, i) => {\n    const dims = itemDims[i];\n\n    // Calculate X based on alignment\n    let itemX = startX;\n    if (align === 'center') {\n      itemX = startX + (maxWidth - dims.width) / 2;\n    } else if (align === 'right') {\n      itemX = startX + (maxWidth - dims.width);\n    }\n\n    item.container.position.set(px(itemX), px(currentY));\n    currentY += dims.height + spacing;\n  });\n\n  // Calculate total dimensions\n  const totalHeight = currentY - spacing - startY; // Remove last spacing\n  return {\n    width: maxWidth,\n    height: totalHeight\n  };\n}\n\n/**\n * Arrange items in a grid layout.\n *\n * @example\n * ```typescript\n * const result = layoutButtonGrid({\n *   items: colorSwatches,\n *   columns: 4,\n *   spacingX: 1,\n *   spacingY: 1,\n *   cellWidth: 12,\n *   cellHeight: 12\n * });\n * ```\n */\nexport function layoutButtonGrid(options: ButtonGridOptions): LayoutResult {\n  const {\n    items,\n    columns,\n    spacingX = GRID.gap,\n    spacingY = GRID.gap,\n    startX = 0,\n    startY = 0,\n    cellWidth,\n    cellHeight\n  } = options;\n\n  if (items.length === 0 || columns <= 0) {\n    return { width: 0, height: 0 };\n  }\n\n  const rows = Math.ceil(items.length / columns);\n\n  // Determine cell dimensions\n  let effectiveCellWidth = cellWidth ?? 0;\n  let effectiveCellHeight = cellHeight ?? 0;\n\n  if (!cellWidth || !cellHeight) {\n    // Calculate from item dimensions\n    items.forEach(item => {\n      const dims = getItemDimensions(item);\n      effectiveCellWidth = Math.max(effectiveCellWidth, dims.width);\n      effectiveCellHeight = Math.max(effectiveCellHeight, dims.height);\n    });\n  }\n\n  // Position each item\n  items.forEach((item, i) => {\n    const col = i % columns;\n    const row = Math.floor(i / columns);\n\n    const itemX = startX + col * (effectiveCellWidth + spacingX);\n    const itemY = startY + row * (effectiveCellHeight + spacingY);\n\n    item.container.position.set(px(itemX), px(itemY));\n  });\n\n  // Calculate total dimensions\n  const totalWidth = columns * effectiveCellWidth + (columns - 1) * spacingX;\n  const totalHeight = rows * effectiveCellHeight + (rows - 1) * spacingY;\n\n  return {\n    width: totalWidth,\n    height: totalHeight\n  };\n}\n\n/**\n * Calculate the dimensions a grid would have without actually positioning items.\n * Useful for determining content size before creating buttons.\n */\nexport function calculateGridDimensions(\n  itemCount: number,\n  columns: number,\n  cellWidth: number,\n  cellHeight: number,\n  spacingX: number = GRID.gap,\n  spacingY: number = GRID.gap\n): LayoutResult {\n  if (itemCount === 0 || columns <= 0) {\n    return { width: 0, height: 0 };\n  }\n\n  const rows = Math.ceil(itemCount / columns);\n  const totalWidth = columns * cellWidth + (columns - 1) * spacingX;\n  const totalHeight = rows * cellHeight + (rows - 1) * spacingY;\n\n  return { width: totalWidth, height: totalHeight };\n}\n","/**\n * Tool icons for the sprite editor\n * Icons defined as 10x9 ASCII grids (# = filled, . = empty)\n * Each cell = GRID.scale pixels. Icons are centered in button content area.\n *\n * Button content area (press mode): 12 wide  11 tall grid units\n * Icon: 10 wide  9 tall cells\n * Centering: (12-10)/2 = 1 grid unit horizontal, (11-9)/2 = 1 grid unit vertical\n */\nimport * as PIXI from 'pixi.js';\n\nexport type ToolType = 'pencil' | 'eraser' | 'fill' | 'eyedrop' | 'selection' | 'shape';\nexport type ShapeType = 'circle' | 'circle-filled' | 'square' | 'square-filled';\n\n// Cache for generated textures\nconst textureCache: Map<string, PIXI.Texture> = new Map();\n\n/**\n * 10x9 ASCII icon definitions (10 wide  9 tall)\n * # = filled pixel, . = empty, E = eraser fill (light gray)\n * No built-in margins - icons are centered by the button component\n */\nconst TOOL_ICON_GRIDS: Record<ToolType, string> = {\n  pencil: `\n.......##.\n......###.\n.....###..\n....###...\n...###....\n..###.....\n..##......\n.#........\n..........\n`.trim(),\n\n  eraser: `\n..........\n..........\n..#######.\n.########.\n#######.#.\n#.....##..\n#######...\n..........\n..........\n`.trim(),\n\n  fill: `\n..######..\n.#.####.#.\n.########..\n.#.#.#..#..\n.#...#..#..\n.#......#..\n.#......#..\n..######...\n`.trim(),\n\n  eyedrop: `\n...###....\n...###....\n....#.....\n....#.....\n....#.....\n....#.....\n....#.....\n....#.....\n..........\n`.trim(),\n\n  selection: `\n####..####\n#........#\n#........#\n..........\n..........\n#........#\n#........#\n#........#\n####..####\n`.trim(),\n\n  shape: `\n.....####.\n.....#..#.\n#####.##..\n#...#.....\n#...#.....\n#...#.....\n#...#.....\n#####.....\n..........\n`.trim()\n};\n\nconst SHAPE_ICON_GRIDS: Record<ShapeType, string> = {\n  circle: `\n...####...\n.##....##.\n#........#\n#........#\n#........#\n#........#\n#........#\n.##....##.\n...####...\n`.trim(),\n\n  'circle-filled': `\n...####...\n.########.\n##########\n##########\n##########\n##########\n##########\n.########.\n...####...\n`.trim(),\n\n  square: `\n##########\n#........#\n#........#\n#........#\n#........#\n#........#\n#........#\n#........#\n##########\n`.trim(),\n\n  'square-filled': `\n##########\n##########\n##########\n##########\n##########\n##########\n##########\n##########\n##########\n`.trim()\n};\n\n/**\n * Parse ASCII grid and render to Graphics at target size\n * Each cell is rendered as (pixelSize x pixelSize) rectangle\n * Renders directly at target size for pixel-perfect results (like SVG approach)\n */\nfunction renderAsciiGrid(grid: string, color: number, pixelSize: number): PIXI.Graphics {\n  const g = new PIXI.Graphics();\n  g.roundPixels = true;\n\n  const lines = grid.split('\\n');\n  const gridSize = lines.length; // Should be 12\n  const totalSize = gridSize * pixelSize;\n\n  // Force full bounds by drawing transparent pixels at corners\n  g.rect(0, 0, 1, 1);\n  g.fill({ color: 0x000000, alpha: 0 });\n  g.rect(totalSize - 1, totalSize - 1, 1, 1);\n  g.fill({ color: 0x000000, alpha: 0 });\n\n  for (let y = 0; y < lines.length; y++) {\n    const line = lines[y];\n    for (let x = 0; x < line.length; x++) {\n      const char = line[x];\n      if (char === '#') {\n        g.rect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);\n        g.fill({ color });\n      } else if (char === 'E') {\n        g.rect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);\n        g.fill({ color: 0xeeeeee });\n      }\n    }\n  }\n\n  return g;\n}\n\n/**\n * Draw ASCII grid directly into an existing Graphics object at a position.\n * Use this to draw icons in the same pass as button backgrounds for perfect grid alignment.\n *\n * @param g - Graphics object to draw into\n * @param grid - ASCII grid string (10x9 for tool/shape icons)\n * @param offsetX - X position in pixels (should be grid-aligned)\n * @param offsetY - Y position in pixels (should be grid-aligned)\n * @param color - Icon color\n * @param pixelSize - Size of each grid cell in pixels (typically GRID.scale)\n */\nfunction drawAsciiGridInto(g: PIXI.Graphics, grid: string, offsetX: number, offsetY: number, color: number, pixelSize: number): void {\n  const lines = grid.split('\\n');\n\n  for (let y = 0; y < lines.length; y++) {\n    const line = lines[y];\n    for (let x = 0; x < line.length; x++) {\n      const char = line[x];\n      if (char === '#') {\n        g.rect(offsetX + x * pixelSize, offsetY + y * pixelSize, pixelSize, pixelSize);\n        g.fill({ color });\n      } else if (char === 'E') {\n        g.rect(offsetX + x * pixelSize, offsetY + y * pixelSize, pixelSize, pixelSize);\n        g.fill({ color: 0xeeeeee });\n      }\n    }\n  }\n}\n\n/**\n * Draw a tool icon directly into a Graphics object.\n * Perfect for drawing icons in the same pass as button backgrounds.\n */\nexport function drawToolIconInto(g: PIXI.Graphics, tool: ToolType, offsetX: number, offsetY: number, color: number, pixelSize: number): void {\n  drawAsciiGridInto(g, TOOL_ICON_GRIDS[tool], offsetX, offsetY, color, pixelSize);\n}\n\n/**\n * Draw a shape icon directly into a Graphics object.\n * Perfect for drawing icons in the same pass as button backgrounds.\n */\nexport function drawShapeIconInto(g: PIXI.Graphics, shape: ShapeType, offsetX: number, offsetY: number, color: number, pixelSize: number): void {\n  drawAsciiGridInto(g, SHAPE_ICON_GRIDS[shape], offsetX, offsetY, color, pixelSize);\n}\n\n/**\n * Draws a tool icon from ASCII grid at target size\n */\nfunction drawToolGraphic(tool: ToolType, color: number, pixelSize: number): PIXI.Graphics {\n  return renderAsciiGrid(TOOL_ICON_GRIDS[tool], color, pixelSize);\n}\n\n/**\n * Draws a shape icon from ASCII grid at target size\n */\nfunction drawShapeGraphic(shape: ShapeType, color: number, pixelSize: number): PIXI.Graphics {\n  return renderAsciiGrid(SHAPE_ICON_GRIDS[shape], color, pixelSize);\n}\n\n/** Icon dimensions: 10 wide  9 tall cells */\nexport const ICON_WIDTH = 10;\nexport const ICON_HEIGHT = 9;\n\n/**\n * Creates a tool icon sprite rendered directly at target size\n * No sprite scaling needed - texture is generated at final size for pixel-perfect rendering\n */\nexport function createToolIcon(tool: ToolType, size: number, color: number, renderer: PIXI.Renderer): PIXI.Sprite {\n  // Cache key includes size since we render at target size\n  const pixelSize = Math.floor(size / ICON_WIDTH);\n  const cacheKey = `${tool}_${color}_${pixelSize}`;\n\n  if (!textureCache.has(cacheKey)) {\n    const graphic = drawToolGraphic(tool, color, pixelSize);\n    graphic.roundPixels = true;\n\n    const texture = renderer.generateTexture({\n      target: graphic,\n      resolution: 1,\n      antialias: false\n    });\n\n    texture.source.scaleMode = 'nearest';\n    graphic.destroy();\n    textureCache.set(cacheKey, texture);\n  }\n\n  const sprite = new PIXI.Sprite(textureCache.get(cacheKey)!);\n  sprite.roundPixels = true;\n  sprite.texture.source.scaleMode = 'nearest';\n\n  // No scaling needed - texture is already at target size\n  return sprite;\n}\n\n/**\n * Creates a shape icon sprite rendered directly at target size\n * No sprite scaling needed - texture is generated at final size for pixel-perfect rendering\n */\nexport function createShapeIcon(shape: ShapeType, size: number, color: number, renderer: PIXI.Renderer): PIXI.Sprite {\n  // Cache key includes size since we render at target size\n  const pixelSize = Math.floor(size / ICON_WIDTH);\n  const cacheKey = `shape_${shape}_${color}_${pixelSize}`;\n\n  if (!textureCache.has(cacheKey)) {\n    const graphic = drawShapeGraphic(shape, color, pixelSize);\n    graphic.roundPixels = true;\n\n    const texture = renderer.generateTexture({\n      target: graphic,\n      resolution: 1,\n      antialias: false\n    });\n\n    texture.source.scaleMode = 'nearest';\n    graphic.destroy();\n    textureCache.set(cacheKey, texture);\n  }\n\n  const sprite = new PIXI.Sprite(textureCache.get(cacheKey)!);\n  sprite.roundPixels = true;\n  sprite.texture.source.scaleMode = 'nearest';\n\n  // No scaling needed - texture is already at target size\n  return sprite;\n}\n","/**\n * Toolbar Card - Main tool selection toolbar for the sprite editor\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from '../components/pixel-card';\nimport { createPixelButton, PixelButtonResult } from '../components/pixel-button';\nimport { createPopupToolbar, PopupToolbarResult } from '../components/popup-toolbar';\nimport { drawToolIconInto, drawShapeIconInto, ShapeType, ToolType } from '../theming/tool-icons';\nimport { getTheme } from '../theming/theme';\nimport { GRID, px } from '@moxijs/core';\nimport { CardResult } from '../interfaces/components';\nimport { TOOLBAR_CARD_CONFIG } from '../config/card-configs';\n\n/** Available main tools */\nexport type MainToolType = 'pencil' | 'eraser' | 'fill' | 'selection' | 'shape';\n\n/** Combined tool state */\nexport interface ToolState {\n  mainTool: MainToolType;\n  shapeType: ShapeType;\n}\n\n/** Tool definition */\ninterface ToolDef {\n  id: MainToolType;\n  tooltip: string;\n  hasPopup?: boolean;\n}\n\n/** Tool definitions */\nconst MAIN_TOOLS: ToolDef[] = [\n  { id: 'pencil', tooltip: 'Pencil (P)' },\n  { id: 'eraser', tooltip: 'Eraser (E)' },\n  { id: 'fill', tooltip: 'Fill (F)' },\n  { id: 'selection', tooltip: 'Selection (S)' },\n  { id: 'shape', tooltip: 'Shapes (U)', hasPopup: true }\n];\n\n/** Shape tooltips */\nconst SHAPE_TOOLTIPS: Record<ShapeType, string> = {\n  'circle': 'Circle',\n  'circle-filled': 'Filled Circle',\n  'square': 'Rectangle',\n  'square-filled': 'Filled Rectangle'\n};\n\n/** Available shapes */\nconst SHAPE_OPTIONS: ShapeType[] = ['circle', 'circle-filled', 'square', 'square-filled'];\n\nexport interface ToolbarCardOptions {\n  x: number;\n  y: number;\n  renderer: PIXI.Renderer;\n  selectedTool?: MainToolType;\n  selectedShape?: ShapeType;\n  onToolSelect?: (tool: MainToolType, shapeType?: ShapeType) => void;\n}\n\nexport interface ToolbarCardResult extends CardResult {\n  getSelectedTool: () => MainToolType;\n  getSelectedShape: () => ShapeType;\n  getToolState: () => ToolState;\n  setSelectedTool: (tool: MainToolType) => void;\n  setSelectedShape: (shape: ShapeType) => void;\n}\n\n/**\n * Creates the main toolbar card with tool buttons\n */\nexport function createToolbarCard(options: ToolbarCardOptions): ToolbarCardResult {\n  const { x, y, renderer, onToolSelect } = options;\n\n  const { buttonSize, buttonSpacing } = TOOLBAR_CARD_CONFIG;\n  const numButtons = MAIN_TOOLS.length;\n  const barWidth = buttonSize;\n  const barHeight = numButtons * buttonSize + (numButtons - 1) * buttonSpacing;\n\n  let selectedTool: MainToolType = options.selectedTool ?? 'pencil';\n  let selectedShape: ShapeType = options.selectedShape ?? 'square';\n\n  // Button references for state updates\n  const buttonRefs: Map<MainToolType, PixelButtonResult> = new Map();\n  let shapePopup: PopupToolbarResult | null = null;\n\n  // Create the card\n  const card = new PixelCard({\n    title: 'Tools',\n    x,\n    y,\n    contentWidth: barWidth,\n    contentHeight: barHeight,\n    renderer,\n    minContentSize: true,\n    onRefresh: () => updateButtons()\n  });\n\n  const contentContainer = card.getContentContainer();\n\n  /** Create drawIcon function for a tool (draws directly into button graphics) */\n  function createToolDrawIcon(tool: MainToolType): (g: PIXI.Graphics, x: number, y: number, color: number, pixelSize: number) => void {\n    // For shape tool, use the selected shape icon\n    if (tool === 'shape') {\n      return (g, x, y, color, pixelSize) => drawShapeIconInto(g, selectedShape, x, y, color, pixelSize);\n    }\n    return (g, x, y, color, pixelSize) => drawToolIconInto(g, tool as ToolType, x, y, color, pixelSize);\n  }\n\n  /** Create drawIcon function for a shape */\n  function createShapeDrawIcon(shape: ShapeType): (g: PIXI.Graphics, x: number, y: number, color: number, pixelSize: number) => void {\n    return (g, x, y, color, pixelSize) => drawShapeIconInto(g, shape, x, y, color, pixelSize);\n  }\n\n  /** Select a tool */\n  function selectTool(tool: MainToolType): void {\n    selectedTool = tool;\n    updateButtonStates();\n    onToolSelect?.(tool, tool === 'shape' ? selectedShape : undefined);\n  }\n\n  /** Update button selected states without recreating */\n  function updateButtonStates(): void {\n    buttonRefs.forEach((btn, tool) => btn.setSelected(selectedTool === tool));\n  }\n\n  /** Show shape popup */\n  function showShapePopup(): void {\n    const shapeButton = buttonRefs.get('shape');\n    if (!shapeButton) return;\n\n    if (shapePopup?.isVisible()) {\n      shapePopup.hide();\n      return;\n    }\n\n    if (shapePopup) shapePopup.destroy();\n\n    const popupButtonSize = 16; // Match main buttons for 1:1 icon sizing\n    shapePopup = createPopupToolbar({\n      buttons: SHAPE_OPTIONS.map(shape => ({\n        id: shape,\n        drawIcon: createShapeDrawIcon(shape),\n        tooltip: SHAPE_TOOLTIPS[shape]\n      })),\n      buttonSize: popupButtonSize,\n      buttonSpacing: 1,\n      direction: 'vertical',\n      selectedId: selectedShape,\n      onSelect: (id) => {\n        selectedShape = id as ShapeType;\n        updateButtons();\n        if (selectedTool === 'shape') {\n          onToolSelect?.('shape', selectedShape);\n        }\n      }\n    });\n\n    card.container.addChild(shapePopup.container);\n\n    // Position popup relative to shape button\n    const buttonPos = shapeButton.container.getGlobalPosition();\n    const cardPos = card.container.getGlobalPosition();\n    shapePopup.show(\n      buttonPos.x - cardPos.x,\n      buttonPos.y - cardPos.y,\n      px(buttonSize),\n      px(buttonSize)\n    );\n\n    setupPopupClickOutside(shapeButton);\n  }\n\n  /** Setup click-outside handler */\n  function setupPopupClickOutside(shapeButton: PixelButtonResult): void {\n    setTimeout(() => {\n      const handler = (e: PointerEvent) => {\n        if (!shapePopup?.isVisible()) {\n          renderer.events.domElement?.removeEventListener('pointerdown', handler);\n          return;\n        }\n\n        const popupBounds = shapePopup.container.getBounds();\n        const buttonBounds = shapeButton.container.getBounds();\n        const inPopup = e.clientX >= popupBounds.minX && e.clientX <= popupBounds.maxX &&\n                        e.clientY >= popupBounds.minY && e.clientY <= popupBounds.maxY;\n        const inButton = e.clientX >= buttonBounds.minX && e.clientX <= buttonBounds.maxX &&\n                         e.clientY >= buttonBounds.minY && e.clientY <= buttonBounds.maxY;\n\n        if (!inPopup && !inButton) {\n          shapePopup.hide();\n          renderer.events.domElement?.removeEventListener('pointerdown', handler);\n        }\n      };\n\n      renderer.events.domElement?.addEventListener('pointerdown', handler);\n    }, 50);\n  }\n\n  /** Create/recreate all buttons */\n  function updateButtons(): void {\n    // Cleanup existing\n    buttonRefs.forEach(btn => btn.destroy());\n    buttonRefs.clear();\n    contentContainer.removeChildren();\n\n    // Create buttons with direct icon drawing for perfect grid alignment\n    MAIN_TOOLS.forEach((toolDef, i) => {\n      const btn = createPixelButton({\n        size: buttonSize,\n        drawIcon: createToolDrawIcon(toolDef.id),\n        selected: selectedTool === toolDef.id,\n        selectionMode: 'press',\n        actionMode: 'toggle',\n        tooltip: toolDef.tooltip,\n        onClick: () => {\n          selectTool(toolDef.id);\n          if (toolDef.hasPopup) showShapePopup();\n        }\n      });\n      btn.container.position.set(0, px((buttonSize + buttonSpacing) * i));\n      contentContainer.addChild(btn.container);\n      buttonRefs.set(toolDef.id, btn);\n    });\n  }\n\n  // Initial creation\n  updateButtons();\n\n  // Ensure card respects minimum content size for all buttons\n  card.updateMinContentSize();\n\n  return {\n    card,\n    container: card.container,\n    getSelectedTool: () => selectedTool,\n    getSelectedShape: () => selectedShape,\n    getToolState: () => ({ mainTool: selectedTool, shapeType: selectedShape }),\n    setSelectedTool: (tool: MainToolType) => {\n      selectedTool = tool;\n      updateButtonStates();\n    },\n    setSelectedShape: (shape: ShapeType) => {\n      selectedShape = shape;\n      updateButtons();\n    },\n    destroy: () => {\n      buttonRefs.forEach(btn => btn.destroy());\n      buttonRefs.clear();\n      shapePopup?.destroy();\n      card.container.destroy({ children: true });\n    }\n  };\n}\n","/**\n * Popup Toolbar Component\n *\n * A lightweight popup toolbar that appears next to a button when clicked.\n * Used for tool sub-menus like shape selection.\n */\nimport * as PIXI from 'pixi.js';\nimport { GRID, px } from '@moxijs/core';\nimport { getTheme } from '../theming/theme';\nimport { ComponentResult } from '../interfaces/components';\nimport { createPixelButton, PixelButtonResult } from './pixel-button';\n\nexport interface PopupToolbarButton {\n  /** Draw icon directly into button graphics for perfect grid alignment */\n  drawIcon: (g: PIXI.Graphics, x: number, y: number, color: number, pixelSize: number) => void;\n  /** Tooltip text */\n  tooltip?: string;\n  /** Unique identifier for this option */\n  id: string;\n}\n\nexport interface PopupToolbarOptions {\n  /** Buttons to display in the popup */\n  buttons: PopupToolbarButton[];\n  /** Size of each button in grid units */\n  buttonSize?: number;\n  /** Spacing between buttons in grid units */\n  buttonSpacing?: number;\n  /** Direction to arrange buttons */\n  direction?: 'horizontal' | 'vertical';\n  /** Callback when an option is selected */\n  onSelect?: (id: string) => void;\n  /** Callback when popup is closed without selection */\n  onClose?: () => void;\n  /** Currently selected option ID */\n  selectedId?: string;\n}\n\nexport interface PopupToolbarResult extends ComponentResult {\n  /** Show the popup at a position relative to a parent element */\n  show(parentX: number, parentY: number, parentWidth: number, parentHeight: number): void;\n  /** Hide the popup */\n  hide(): void;\n  /** Check if popup is currently visible */\n  isVisible(): boolean;\n  /** Get the currently selected ID */\n  getSelectedId(): string | undefined;\n  /** Set the selected option */\n  setSelectedId(id: string): void;\n}\n\n/**\n * Creates a popup toolbar component\n */\nexport function createPopupToolbar(options: PopupToolbarOptions): PopupToolbarResult {\n  const {\n    buttons,\n    buttonSize = 14,\n    buttonSpacing = 1,\n    direction = 'horizontal',\n    onSelect,\n    onClose\n  } = options;\n\n  let selectedId = options.selectedId;\n  let isShowing = false;\n\n  const container = new PIXI.Container();\n  container.visible = false;\n  container.eventMode = 'static';\n\n  // Background graphics\n  const background = new PIXI.Graphics();\n  background.roundPixels = true;\n  container.addChild(background);\n\n  // Content container for buttons\n  const contentContainer = new PIXI.Container();\n  container.addChild(contentContainer);\n\n  // Track created buttons for cleanup\n  const createdButtons: PixelButtonResult[] = [];\n\n  /**\n   * Calculate popup dimensions\n   */\n  function getPopupDimensions(): { width: number; height: number } {\n    const numButtons = buttons.length;\n    if (direction === 'horizontal') {\n      const width = numButtons * buttonSize + (numButtons - 1) * buttonSpacing;\n      return { width, height: buttonSize };\n    } else {\n      const height = numButtons * buttonSize + (numButtons - 1) * buttonSpacing;\n      return { width: buttonSize, height };\n    }\n  }\n\n  /**\n   * Draw the popup background\n   */\n  function drawBackground() {\n    background.clear();\n    const theme = getTheme();\n    const dims = getPopupDimensions();\n\n    const borderWidth = GRID.border;\n    const padding = 2; // Grid units of padding\n    const totalWidth = dims.width + padding * 2 + borderWidth * 4;\n    const totalHeight = dims.height + padding * 2 + borderWidth * 4;\n\n    // Drop shadow\n    const shadowOffset = 1;\n    background.rect(px(shadowOffset), px(shadowOffset), px(totalWidth), px(totalHeight));\n    background.fill({ color: 0x000000, alpha: 0.3 });\n\n    // Outer border\n    background.rect(0, 0, px(totalWidth), px(totalHeight));\n    background.fill({ color: theme.cardBorder });\n\n    // Middle border (using buttonBackground for subtle contrast)\n    background.rect(px(borderWidth), px(borderWidth),\n                    px(totalWidth - borderWidth * 2), px(totalHeight - borderWidth * 2));\n    background.fill({ color: theme.buttonBackground });\n\n    // Inner border\n    background.rect(px(borderWidth * 2), px(borderWidth * 2),\n                    px(totalWidth - borderWidth * 4), px(totalHeight - borderWidth * 4));\n    background.fill({ color: theme.cardBorder });\n\n    // Background fill\n    background.rect(px(borderWidth * 2 + 1), px(borderWidth * 2 + 1),\n                    px(totalWidth - borderWidth * 4 - 2), px(totalHeight - borderWidth * 4 - 2));\n    background.fill({ color: theme.cardBackground });\n  }\n\n  /**\n   * Create buttons\n   */\n  function createButtons() {\n    // Clear existing buttons\n    createdButtons.forEach(btn => btn.destroy());\n    createdButtons.length = 0;\n    contentContainer.removeChildren();\n\n    const borderWidth = GRID.border;\n    const padding = 2;\n    const offsetX = px(borderWidth * 2 + padding);\n    const offsetY = px(borderWidth * 2 + padding);\n\n    buttons.forEach((btnConfig, index) => {\n      const btn = createPixelButton({\n        size: buttonSize,\n        drawIcon: btnConfig.drawIcon,\n        selected: btnConfig.id === selectedId,\n        selectionMode: 'press',\n        actionMode: 'toggle',\n        tooltip: btnConfig.tooltip,\n        onClick: () => {\n          selectedId = btnConfig.id;\n          if (onSelect) {\n            onSelect(btnConfig.id);\n          }\n          hide();\n        }\n      });\n\n      if (direction === 'horizontal') {\n        btn.container.position.set(\n          offsetX + index * px(buttonSize + buttonSpacing),\n          offsetY\n        );\n      } else {\n        btn.container.position.set(\n          offsetX,\n          offsetY + index * px(buttonSize + buttonSpacing)\n        );\n      }\n\n      contentContainer.addChild(btn.container);\n      createdButtons.push(btn);\n    });\n  }\n\n  /**\n   * Show the popup positioned relative to a parent element\n   */\n  function show(parentX: number, parentY: number, parentWidth: number, parentHeight: number): void {\n    drawBackground();\n    createButtons();\n\n    // Position popup to the right of the parent by default\n    const dims = getPopupDimensions();\n    const borderWidth = GRID.border;\n    const padding = 2;\n    const totalWidth = px(dims.width + padding * 2 + borderWidth * 4);\n\n    // Position to the right of parent with small gap\n    container.position.set(\n      parentX + parentWidth + px(2),\n      parentY\n    );\n\n    container.visible = true;\n    isShowing = true;\n\n    // Setup click-outside handler\n    setupClickOutsideHandler();\n  }\n\n  /**\n   * Hide the popup\n   */\n  function hide(): void {\n    container.visible = false;\n    isShowing = false;\n    removeClickOutsideHandler();\n    if (onClose && !selectedId) {\n      onClose();\n    }\n  }\n\n  // Click outside handler\n  let clickOutsideHandler: ((e: PIXI.FederatedPointerEvent) => void) | null = null;\n\n  function setupClickOutsideHandler(): void {\n    // We'll rely on the parent to handle click-outside logic\n    // since we need access to the stage\n  }\n\n  function removeClickOutsideHandler(): void {\n    clickOutsideHandler = null;\n  }\n\n  // Initial draw (buttons created on show())\n  drawBackground();\n\n  return {\n    container,\n    show,\n    hide,\n    isVisible: () => isShowing,\n    getSelectedId: () => selectedId,\n    setSelectedId: (id: string) => {\n      selectedId = id;\n      // Update button states\n      createdButtons.forEach((btn, index) => {\n        btn.setSelected(buttons[index].id === id);\n      });\n    },\n    destroy: () => {\n      removeClickOutsideHandler();\n      createdButtons.forEach(btn => btn.destroy());\n      container.destroy({ children: true });\n    }\n  };\n}\n","/**\n * Sprite Editor Constants\n *\n * Centralized configuration for all magic numbers and constants used throughout\n * the sprite editor. This promotes maintainability and makes it easy to tune\n * editor behavior from a single location.\n * \n *  CRITICAL: GRID-BASED UI SYSTEM\n * =================================\n * \n * THIS CODEBASE USES GRID UNITS FOR UI, BUT ACTUAL PIXELS FOR SPRITE CONTENT!\n * \n * GRID UNITS are used for:\n *   - UI elements (cards, buttons, spacing, margins, padding, borders)\n *   - Card dimensions and positioning\n *   - Layout spacing between UI components\n * \n * ACTUAL PIXELS are used for:\n *   - Sprite dimensions (8x8 pixels per sprite)\n *   - Sprite sheet dimensions (128x128, 256x256 pixels)\n *   - Pixel art content itself\n *   - Canvas/texture dimensions for sprite rendering\n * \n * All UI dimensions, spacing, margins, and padding should be specified in GRID UNITS\n * and converted to pixels using the px() function from '@moxijs/core'.\n * \n * Examples:\n *    CORRECT (UI): const spacing = px(GRID.gap);        // Uses grid units\n *    CORRECT (UI): const margin = px(2);                 // 2 grid units\n *    CORRECT (Sprite): const spriteWidth = 8;            // 8 actual pixels\n *    CORRECT (Sprite): const sheetWidth = 128;            // 128 actual pixels\n *    WRONG (UI):   const spacing = 8;                   // Raw pixels - DON'T DO THIS for UI\n *    WRONG (UI):   const margin = 20;                    // Raw pixels - DON'T DO THIS for UI\n * \n * Grid units scale with GRID.scale (configurable, default: 4x)\n * - The scale is NOT hardcoded - it can be 1x, 2x, 3x, or 4x\n * - Scale is configured at the outer layer (PixelGrid initialization)\n * - px(1) = 1 grid unit = 4 pixels (at 4x scale) = 3px (at 3x) = 2px (at 2x) = 1px (at 1x)\n * - px(2) = 2 grid units = 8 pixels (at 4x) = 6px (at 3x) = 4px (at 2x) = 2px (at 1x)\n * - Changing GRID.scale scales the entire UI proportionally\n * \n * When displaying sprite content in cards:\n *   - Sprite content is measured in actual pixels (e.g., 8x8 sprite)\n *   - Card content size converts: Math.ceil(pixelWidth / px(1))\n * \n * Why grid units for UI?\n * - Ensures pixel-perfect rendering\n * - Maintains consistent spacing\n * - Makes UI scalable (change GRID.scale to scale entire UI)\n * - Prevents sub-pixel rendering issues\n * \n * If you see hardcoded pixel values in UI code (cards, buttons, spacing), they are bugs!\n * But pixel values for sprite/sprite sheet dimensions are correct and expected.\n */\n\n/**\n * Sprite dimensions and cell sizes\n */\nexport const SPRITE_CONSTANTS = {\n  /** Standard sprite cell size in pixels (8x8) */\n  CELL_SIZE: 8,\n\n  /** Default editor scale for individual sprite editing */\n  DEFAULT_SPRITE_SCALE: 8,\n\n  /** Minimum sprite scale */\n  MIN_SPRITE_SCALE: 1,\n\n  /** Maximum sprite scale */\n  MAX_SPRITE_SCALE: 64,\n} as const;\n\n/**\n * Sprite sheet controller constants\n */\nexport const SPRITE_SHEET_CONSTANTS = {\n  /** Click threshold in pixels - below this distance is a click, above is a drag */\n  CLICK_THRESHOLD_PX: 5,\n\n  /** Default viewport scale ratio (sheet height / viewport height) */\n  DEFAULT_VIEWPORT_RATIO: 0.5,\n\n  /** Zoom increment per mouse wheel notch */\n  ZOOM_INCREMENT: 0.5,\n\n  /** Minimum sprite sheet scale */\n  MIN_SCALE: 1,\n\n  /** Maximum sprite sheet scale */\n  MAX_SCALE: 16,\n\n  /** Grid line opacity (0-1) */\n  GRID_OPACITY: 0.3,\n\n  /** Grid line color (CSS color string) */\n  GRID_COLOR: 'rgba(128, 128, 128, 0.3)',\n\n  /** Grid line width in pixels */\n  GRID_LINE_WIDTH: 1,\n} as const;\n\n/**\n * Card UI constants\n */\nexport const CARD_CONSTANTS = {\n  /** Title bar font scale multiplier */\n  TITLE_FONT_SCALE_MULTIPLIER: 64,\n\n  /** Title bar padding multiplier */\n  TITLE_PADDING_MULTIPLIER: 2,\n\n  /** Resize handle size in pixels */\n  RESIZE_HANDLE_SIZE: 16,\n\n  /** Corner resize handle size in pixels */\n  CORNER_RESIZE_HANDLE_SIZE: 16,\n\n  /** Minimum drag distance to distinguish from click */\n  MIN_DRAG_DISTANCE: 5,\n} as const;\n\n/**\n * Default card dimensions (in grid units)\n */\nexport const DEFAULT_CARD_SIZES = {\n  /** Default palette card dimensions */\n  PALETTE: {\n    WIDTH: 50,\n    HEIGHT: 50,\n  },\n\n  /** Default tool card dimensions */\n  TOOL: {\n    WIDTH: 50,\n    HEIGHT: 50,\n  },\n\n  /** Default sprite sheet minimap dimensions */\n  SPRITESHEET_MINIMAP: {\n    WIDTH: 50,\n    HEIGHT: 50,\n    SCALE: 5,\n  },\n\n  /** Default sprite card dimensions */\n  SPRITE: {\n    WIDTH: 70,\n    HEIGHT: 70,\n  },\n\n  /** Default commander bar dimensions */\n  COMMANDER_BAR: {\n    BASE_HEIGHT: 12,\n    BUTTON_SPACING: 24,\n  },\n\n  /** Default info bar dimensions */\n  INFO_BAR: {\n    HEIGHT: 10,\n  },\n\n  /** Default scale card dimensions */\n  SCALE: {\n    WIDTH: 20,\n    HEIGHT: 10,\n  },\n} as const;\n\n/**\n * Layout constants\n */\nexport const LAYOUT_CONSTANTS = {\n  /** Gap between cards in pixels */\n  CARD_GAP: 8,\n\n  /** Padding from viewport edges */\n  VIEWPORT_PADDING: 0,\n\n  /** Z-index for focused cards (to bring to front) */\n  FOCUSED_CARD_Z_INDEX: 1000,\n} as const;\n\n/**\n * Animation and interaction constants\n */\nexport const INTERACTION_CONSTANTS = {\n  /** Double-click time threshold in milliseconds */\n  DOUBLE_CLICK_THRESHOLD_MS: 300,\n\n  /** Long press duration in milliseconds */\n  LONG_PRESS_DURATION_MS: 500,\n\n  /** Drag start delay in milliseconds */\n  DRAG_START_DELAY_MS: 100,\n} as const;\n\n/**\n * File operation constants\n */\nexport const FILE_CONSTANTS = {\n  /** Project file extension */\n  PROJECT_FILE_EXTENSION: '.moxiproject',\n\n  /** PNG export file extension */\n  PNG_EXPORT_EXTENSION: '.png',\n\n  /** Default project file name */\n  DEFAULT_PROJECT_NAME: 'untitled-project',\n\n  /** UI state storage key */\n  UI_STATE_STORAGE_KEY: 'spriteEditorUIState',\n\n  /** Project state storage key */\n  PROJECT_STATE_STORAGE_KEY: 'spriteEditorProjectState',\n\n  /** Layout state storage key */\n  LAYOUT_STATE_STORAGE_KEY: 'spriteEditorLayoutState',\n} as const;\n\n/**\n * Color constants\n */\nexport const COLOR_CONSTANTS = {\n  /** Cell selection highlight color */\n  CELL_SELECTION_COLOR: 0xffec27,\n\n  /** Cell selection highlight width */\n  CELL_SELECTION_WIDTH: 2,\n\n  /** Cell hover highlight color */\n  CELL_HOVER_COLOR: 0xffffff,\n\n  /** Cell hover highlight width */\n  CELL_HOVER_WIDTH: 1,\n\n  /** Cell hover highlight alpha */\n  CELL_HOVER_ALPHA: 0.5,\n} as const;\n\n/**\n * Performance constants\n */\nexport const PERFORMANCE_CONSTANTS = {\n  /** Maximum number of sprite sheets per project */\n  MAX_SPRITE_SHEETS_PER_PROJECT: 10,\n\n  /** Texture cache size limit */\n  TEXTURE_CACHE_SIZE: 100,\n\n  /** Debounce delay for project auto-save in milliseconds */\n  AUTO_SAVE_DEBOUNCE_MS: 1000,\n\n  /** Debounce delay for UI state save in milliseconds */\n  UI_STATE_DEBOUNCE_MS: 500,\n\n  /** Delay after dialog action before proceeding (allows dialog to close) */\n  DIALOG_ACTION_DELAY_MS: 100,\n} as const;\n\n/**\n * Debug constants\n */\nexport const DEBUG_CONSTANTS = {\n  /** Enable verbose logging */\n  ENABLE_VERBOSE_LOGGING: false,\n\n  /** Show performance metrics */\n  SHOW_PERFORMANCE_METRICS: false,\n\n  /** Show bounding boxes for cards */\n  SHOW_CARD_BOUNDS: false,\n} as const;\n\n/**\n * Tool constants\n */\nexport const TOOL_CONSTANTS = {\n  /** Default tool on editor start */\n  DEFAULT_TOOL: 'pencil',\n\n  /** Tool cursor types */\n  TOOL_CURSORS: {\n    pencil: 'crosshair',\n    eraser: 'crosshair',\n    fill: 'crosshair',\n    eyedropper: 'crosshair',\n    select: 'default',\n  },\n} as const;\n","/**\n * SpriteSheetManager - Manages sprite sheet lifecycle\n *\n * Extracted from SpriteEditor to follow Single Responsibility Principle.\n * Handles creation, tracking, activation, and validation of sprite sheets.\n */\nimport { SpriteSheetInstance, ISpriteSheetManager, ValidationResult } from '../interfaces/managers';\nimport { SpriteSheetType, SpriteSheetConfig } from '../controllers/sprite-sheet-controller';\nimport { PERFORMANCE_CONSTANTS } from '../config/constants';\n\ntype EventHandler = (id: string) => void;\n\n/**\n * Manages all sprite sheet instances in the editor\n */\nexport class SpriteSheetManager implements ISpriteSheetManager {\n  private instances: Map<string, SpriteSheetInstance> = new Map();\n  private activeId: string | null = null;\n  private eventHandlers: Map<string, Set<EventHandler>> = new Map();\n\n  /**\n   * Create a new sprite sheet instance\n   *\n   * @param type Sprite sheet type (PICO-8, TIC-80, etc.)\n   * @param savedId Optional saved ID to reuse when loading from state\n   * @param config Optional configuration overrides\n   * @returns The created sprite sheet instance (or existing one if ID already exists)\n   */\n  create(type: SpriteSheetType, savedId?: string, config?: Partial<SpriteSheetConfig>): SpriteSheetInstance {\n    const id = savedId || this.generateId();\n\n    // If an instance with this ID already exists, return it instead of creating a duplicate\n    if (this.instances.has(id)) {\n      console.warn(`SpriteSheetManager: Instance with ID \"${id}\" already exists, returning existing instance`);\n      return this.instances.get(id)!;\n    }\n\n    // Create the instance with sheetCard as undefined initially\n    // The caller MUST set sheetCard before using the instance\n    const instance: Partial<SpriteSheetInstance> & { id: string } = {\n      id,\n      spriteCard: null,\n      spriteController: null,\n    };\n\n    // Store as full instance - sheetCard will be set by caller\n    this.instances.set(id, instance as SpriteSheetInstance);\n    this.emit('created', id);\n\n    return instance as SpriteSheetInstance;\n  }\n\n  /**\n   * Get a sprite sheet instance by ID\n   *\n   * @param id Sprite sheet ID\n   * @returns The sprite sheet instance or undefined if not found\n   */\n  get(id: string): SpriteSheetInstance | undefined {\n    return this.instances.get(id);\n  }\n\n  /**\n   * Get the currently active sprite sheet\n   *\n   * @returns The active sprite sheet instance or null if none active\n   */\n  getActive(): SpriteSheetInstance | null {\n    if (!this.activeId) return null;\n    return this.instances.get(this.activeId) || null;\n  }\n\n  /**\n   * Set the active sprite sheet\n   *\n   * @param id Sprite sheet ID to activate\n   * @throws Error if sprite sheet ID doesn't exist\n   */\n  setActive(id: string): void {\n    if (!this.instances.has(id)) {\n      throw new Error(`Cannot set active sprite sheet: ID \"${id}\" not found`);\n    }\n\n    if (this.activeId !== id) {\n      this.activeId = id;\n      this.emit('activeChanged', id);\n    }\n  }\n\n  /**\n   * Get all sprite sheet instances\n   *\n   * @returns Array of all sprite sheet instances\n   */\n  getAll(): SpriteSheetInstance[] {\n    return Array.from(this.instances.values());\n  }\n\n  /**\n   * Remove a sprite sheet instance\n   *\n   * @param id Sprite sheet ID to remove\n   */\n  remove(id: string): void {\n    const instance = this.instances.get(id);\n    if (!instance) return;\n\n    // Clear active if this was the active sheet\n    if (this.activeId === id) {\n      this.activeId = null;\n\n      // Set first remaining sheet as active, if any\n      const remaining = Array.from(this.instances.keys()).filter(key => key !== id);\n      if (remaining.length > 0) {\n        this.activeId = remaining[0];\n      }\n    }\n\n    this.instances.delete(id);\n    this.emit('removed', id);\n  }\n\n  /**\n   * Validate if a sprite sheet can be created\n   *\n   * Enforces rules like:\n   * - Maximum sprite sheets per project\n   * - One sprite sheet type per project\n   *\n   * @param type Sprite sheet type to validate\n   * @returns Validation result with error message if invalid\n   */\n  validate(type: SpriteSheetType): ValidationResult {\n    // Check maximum sprite sheets\n    if (this.instances.size >= PERFORMANCE_CONSTANTS.MAX_SPRITE_SHEETS_PER_PROJECT) {\n      return {\n        valid: false,\n        message: `Maximum ${PERFORMANCE_CONSTANTS.MAX_SPRITE_SHEETS_PER_PROJECT} sprite sheets per project`,\n      };\n    }\n\n    // Enforce single sprite sheet type per project\n    if (this.instances.size > 0) {\n      const firstInstance = Array.from(this.instances.values())[0];\n      const existingType = firstInstance.sheetCard?.controller.getConfig().type;\n\n      if (existingType && existingType !== type) {\n        return {\n          valid: false,\n          message: `Project already contains a ${existingType} sprite sheet. Create a new project to use ${type}.`,\n        };\n      }\n    }\n\n    return { valid: true };\n  }\n\n  /**\n   * Check if a sprite sheet exists\n   *\n   * @param id Sprite sheet ID\n   * @returns True if sprite sheet exists\n   */\n  has(id: string): boolean {\n    return this.instances.has(id);\n  }\n\n  /**\n   * Get the count of sprite sheets\n   *\n   * @returns Number of sprite sheets\n   */\n  count(): number {\n    return this.instances.size;\n  }\n\n  /**\n   * Subscribe to sprite sheet events\n   *\n   * @param event Event type to subscribe to\n   * @param handler Event handler function\n   */\n  on(event: 'created' | 'removed' | 'activeChanged', handler: EventHandler): void {\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, new Set());\n    }\n    this.eventHandlers.get(event)!.add(handler);\n  }\n\n  /**\n   * Unsubscribe from sprite sheet events\n   *\n   * @param event Event type to unsubscribe from\n   * @param handler Event handler function to remove\n   */\n  off(event: 'created' | 'removed' | 'activeChanged', handler: EventHandler): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      handlers.delete(handler);\n    }\n  }\n\n  /**\n   * Clear all sprite sheets\n   *\n   * Useful for creating a new project\n   */\n  clear(): void {\n    const ids = Array.from(this.instances.keys());\n    ids.forEach(id => this.remove(id));\n  }\n\n  /**\n   * Get the sprite sheet type (if all sheets are the same type)\n   *\n   * @returns The sprite sheet type or null if no sheets or mixed types\n   */\n  getProjectSpriteSheetType(): SpriteSheetType | null {\n    if (this.instances.size === 0) return null;\n\n    const firstInstance = Array.from(this.instances.values())[0];\n    return firstInstance.sheetCard?.controller.getConfig().type || null;\n  }\n\n  /**\n   * Generate a unique ID for a sprite sheet\n   *\n   * @private\n   */\n  private generateId(): string {\n    return `sheet-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;\n  }\n\n  /**\n   * Emit an event to all subscribed handlers\n   *\n   * @private\n   */\n  private emit(event: string, id: string): void {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      handlers.forEach(handler => handler(id));\n    }\n  }\n\n  /**\n   * Get statistics about sprite sheets\n   *\n   * Useful for debugging and UI display\n   */\n  getStats(): {\n    total: number;\n    activeId: string | null;\n    type: SpriteSheetType | null;\n  } {\n    return {\n      total: this.instances.size,\n      activeId: this.activeId,\n      type: this.getProjectSpriteSheetType(),\n    };\n  }\n}\n","/**\n * UIManager - Manages UI card lifecycle and z-ordering\n *\n * Extracted from SpriteEditor to follow Single Responsibility Principle.\n * Handles card registration, z-ordering, focus management, and state export/import.\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from '../components/pixel-card';\nimport { IUIManager } from '../interfaces/managers';\nimport { CardState } from '../state/ui-state-manager';\nimport { LAYOUT_CONSTANTS } from '../config/constants';\n\n/**\n * Manages all UI cards in the editor\n */\nexport class UIManager implements IUIManager {\n  private cards: Map<string, PixelCard> = new Map();\n  private scene: PIXI.Container;\n  private focusedCardId: string | null = null;\n  private cardCallbacks: Map<string, () => void> = new Map(); // Track original callbacks for cleanup\n\n  constructor(scene: PIXI.Container) {\n    this.scene = scene;\n  }\n\n  /**\n   * Register a card with the UI manager\n   *\n   * @param id Unique card identifier\n   * @param card PixelCard instance\n   */\n  registerCard(id: string, card: PixelCard): void {\n    if (this.cards.has(id)) {\n      console.warn(`Card with ID \"${id}\" is already registered`);\n      return;\n    }\n\n    this.cards.set(id, card);\n\n    // Add card to scene if not already added\n    if (!this.scene.children.includes(card.container)) {\n      this.scene.addChild(card.container);\n    }\n\n    // Setup focus listener - store the wrapper so we can clean up later\n    if (card.onStateChanged) {\n      const originalOnStateChanged = card.onStateChanged.bind(card);\n      this.cardCallbacks.set(id, originalOnStateChanged);\n\n      const wrappedCallback = () => {\n        this.setFocusedCard(id);\n        originalOnStateChanged();\n      };\n      card.onStateChanged = wrappedCallback;\n    }\n  }\n\n  /**\n   * Unregister a card\n   *\n   * @param id Card identifier\n   */\n  unregisterCard(id: string): void {\n    const card = this.cards.get(id);\n    if (!card) return;\n\n    // Restore original callback if we wrapped it\n    const originalCallback = this.cardCallbacks.get(id);\n    if (originalCallback && card.onStateChanged) {\n      card.onStateChanged = originalCallback;\n    }\n    this.cardCallbacks.delete(id);\n\n    // Remove from scene\n    if (this.scene.children.includes(card.container)) {\n      this.scene.removeChild(card.container);\n    }\n\n    // Clear focus if this was the focused card\n    if (this.focusedCardId === id) {\n      this.focusedCardId = null;\n    }\n\n    this.cards.delete(id);\n  }\n\n  /**\n   * Get a registered card by ID\n   *\n   * @param id Card identifier\n   * @returns The card or undefined if not found\n   */\n  getCard(id: string): PixelCard | undefined {\n    return this.cards.get(id);\n  }\n\n  /**\n   * Get all registered cards\n   *\n   * @returns Map of all cards (id -> card)\n   */\n  getAllCards(): Map<string, PixelCard> {\n    return new Map(this.cards);\n  }\n\n  /**\n   * Bring a card to the front (highest z-index)\n   *\n   * This is done by removing and re-adding the card to the scene,\n   * which places it at the end of the children array (rendered last = on top)\n   *\n   * @param id Card identifier\n   */\n  bringToFront(id: string): void {\n    const card = this.cards.get(id);\n    if (!card) return;\n\n    // Remove and re-add to bring to front\n    this.scene.removeChild(card.container);\n    this.scene.addChild(card.container);\n\n    // If card has a paired card, bring that to front too (but behind this one)\n    const pairedCard = card.getPairedCard?.();\n    if (pairedCard && pairedCard !== card) {\n      // Find the paired card's ID\n      for (const [pairedId, registeredCard] of this.cards.entries()) {\n        if (registeredCard === pairedCard) {\n          // Remove and re-add paired card first (so it's behind the main card)\n          this.scene.removeChild(pairedCard.container);\n          this.scene.addChild(pairedCard.container);\n\n          // Then remove and re-add the main card (so it's on top)\n          this.scene.removeChild(card.container);\n          this.scene.addChild(card.container);\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * Export states of all cards\n   *\n   * @returns Map of card states (id -> state)\n   */\n  exportAllStates(): Map<string, CardState> {\n    const stateMap = new Map<string, CardState>();\n\n    this.cards.forEach((card, id) => {\n      stateMap.set(id, card.exportState(id));\n    });\n\n    return stateMap;\n  }\n\n  /**\n   * Import and restore card states\n   *\n   * @param states Map of card states to restore\n   */\n  importStates(states: Map<string, CardState>): void {\n    states.forEach((cardState, id) => {\n      const card = this.cards.get(id);\n      if (card) {\n        card.importState(cardState);\n      }\n    });\n  }\n\n  /**\n   * Check if a card is registered\n   *\n   * @param id Card identifier\n   * @returns True if card exists\n   */\n  hasCard(id: string): boolean {\n    return this.cards.has(id);\n  }\n\n  /**\n   * Get the focused card ID\n   *\n   * @returns The ID of the focused card or null\n   */\n  getFocusedCard(): string | null {\n    return this.focusedCardId;\n  }\n\n  /**\n   * Set the focused card\n   *\n   * This will bring the card to front and track it as focused\n   *\n   * @param id Card identifier or null to clear focus\n   */\n  setFocusedCard(id: string | null): void {\n    if (id === this.focusedCardId) return;\n\n    this.focusedCardId = id;\n\n    if (id) {\n      this.bringToFront(id);\n    }\n  }\n\n  /**\n   * Get the count of registered cards\n   *\n   * @returns Number of cards\n   */\n  getCardCount(): number {\n    return this.cards.size;\n  }\n\n  /**\n   * Clear all cards\n   *\n   * Removes all cards from the scene and clears the registry\n   */\n  clear(): void {\n    const ids = Array.from(this.cards.keys());\n    ids.forEach(id => this.unregisterCard(id));\n  }\n\n  /**\n   * Find cards by predicate\n   *\n   * @param predicate Function to test each card\n   * @returns Array of [id, card] pairs that match the predicate\n   */\n  findCards(predicate: (card: PixelCard, id: string) => boolean): Array<[string, PixelCard]> {\n    const results: Array<[string, PixelCard]> = [];\n\n    this.cards.forEach((card, id) => {\n      if (predicate(card, id)) {\n        results.push([id, card]);\n      }\n    });\n\n    return results;\n  }\n\n  /**\n   * Get card IDs matching a pattern\n   *\n   * @param pattern Regex pattern or string to match\n   * @returns Array of matching card IDs\n   */\n  getCardIdsByPattern(pattern: string | RegExp): string[] {\n    const regex = typeof pattern === 'string' ? new RegExp(pattern) : pattern;\n    return Array.from(this.cards.keys()).filter(id => regex.test(id));\n  }\n\n  /**\n   * Bring a group of cards to front together\n   *\n   * Useful for bringing paired cards or related cards to front as a group\n   *\n   * @param ids Array of card IDs to bring to front\n   */\n  bringGroupToFront(ids: string[]): void {\n    // Remove all cards from scene\n    ids.forEach(id => {\n      const card = this.cards.get(id);\n      if (card && this.scene.children.includes(card.container)) {\n        this.scene.removeChild(card.container);\n      }\n    });\n\n    // Re-add in order (first card in array will be at back, last at front)\n    ids.forEach(id => {\n      const card = this.cards.get(id);\n      if (card) {\n        this.scene.addChild(card.container);\n      }\n    });\n  }\n}\n","/**\n * LayoutManager - Manages card positioning and layouts\n *\n * Extracted from SpriteEditor to follow Single Responsibility Principle.\n * Handles layout presets, card positioning, dimension calculations, and viewport resizing.\n *\n * Now data-driven: loads layout definitions from layouts.json\n * \n *  CRITICAL: GRID-BASED POSITIONING\n * ===================================\n * \n * All positioning and spacing in this class uses GRID UNITS converted to pixels via px().\n * \n * Examples:\n *    const topOffset = commanderBarHeight + px(1);     // 1 grid unit margin\n *    const gap = px(GRID.gap);                         // Standard gap in grid units\n *    const topOffset = commanderBarHeight + 4;         // Raw pixels - WRONG!\n * \n * @see ../utilities/README.md for grid system documentation\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from '../components/pixel-card';\nimport { ILayoutManager, LayoutSpec, CardPosition } from '../interfaces/managers';\nimport { GRID, BORDER, px } from '@moxijs/core';\nimport { LAYOUT_CONSTANTS, CARD_CONSTANTS } from '../config/constants';\nimport layoutsConfig from '../config/layouts.json';\n\n/**\n * Manages card layouts and positioning\n */\nexport class LayoutManager implements ILayoutManager {\n  private layouts: Map<string, LayoutSpec> = new Map();\n  private renderer: PIXI.Renderer;\n  private currentLayout: string | null = null;\n\n  constructor(renderer: PIXI.Renderer) {\n    this.renderer = renderer;\n    this.registerDefaultLayouts();\n  }\n\n  /**\n   * Apply a layout preset\n   *\n   * @param layoutId Layout identifier\n   * @param cards Map of cards to position\n   */\n  applyLayout(layoutId: string, cards: Map<string, PixelCard>): void {\n    const layout = this.layouts.get(layoutId);\n    if (!layout) {\n      console.warn(`Layout \"${layoutId}\" not found`);\n      return;\n    }\n\n    // Apply each card position\n    Object.entries(layout.positions).forEach(([cardId, position]) => {\n      const card = cards.get(cardId);\n      if (card) {\n        this.positionCard(card, position);\n      }\n    });\n\n    this.currentLayout = layoutId;\n  }\n\n  /**\n   * Apply the default layout\n   *\n   * @param cards Map of cards to position\n   */\n  applyDefaultLayout(cards: Map<string, PixelCard>): void {\n    // Calculate key dimensions\n    const titleBarHeight = this.calculateTitleBarHeight();\n    const commanderBarHeight = px(12) + px(BORDER.total * 2) + titleBarHeight;\n    const margin = px(GRID.margin);\n    // Position cards below commander bar with 1 grid unit margin\n    const topOffset = commanderBarHeight + px(1);\n\n    // Position commander bar at top\n    const commanderCard = cards.get('commander');\n    if (commanderCard) {\n      commanderCard.container.position.set(0, 0);\n    }\n\n    // Position toolbar below commander bar, at left edge with margin\n    const toolCard = cards.get('tool');\n    if (toolCard) {\n      toolCard.container.position.set(margin, topOffset);\n    }\n\n    // Position sprite card to the right of toolbar, same vertical position\n    const spriteCard = cards.get('sprite-card-0');\n    if (spriteCard && toolCard) {\n      const toolWidth = toolCard.getPixelWidth();\n      const gap = px(GRID.gap);\n      spriteCard.container.position.set(margin + toolWidth + gap, topOffset);\n    } else if (spriteCard) {\n      // Fallback if no toolbar\n      spriteCard.container.position.set(margin, topOffset);\n    }\n\n    // Position palette below commander, docked to left (bump against commander bar)\n    const paletteCard = cards.get('palette');\n    if (paletteCard) {\n      paletteCard.container.position.set(0, topOffset);\n    }\n\n    // Position info bar at bottom (full width)\n    const infoCard = cards.get('info');\n    if (infoCard) {\n      const barHeight = 8;\n      const cardTotalHeight = this.calculateCardHeightFromContent(barHeight);\n      const y = this.renderer.height - cardTotalHeight;\n      infoCard.container.position.set(0, y);\n    }\n\n    this.currentLayout = 'default';\n  }\n\n  /**\n   * Position a single card\n   *\n   * @param card Card to position\n   * @param position Position specification\n   */\n  positionCard(card: PixelCard, position: CardPosition): void {\n    card.container.position.set(position.x, position.y);\n\n    // Apply size if specified\n    if (position.width !== undefined && position.height !== undefined) {\n      card.setContentSize(position.width, position.height);\n    }\n  }\n\n  /**\n   * Get a layout by ID\n   *\n   * @param id Layout identifier\n   * @returns The layout or undefined if not found\n   */\n  getLayout(id: string): LayoutSpec | undefined {\n    return this.layouts.get(id);\n  }\n\n  /**\n   * Register a custom layout\n   *\n   * @param layout Layout specification\n   */\n  registerLayout(layout: LayoutSpec): void {\n    this.layouts.set(layout.id, layout);\n  }\n\n  /**\n   * Get all available layouts\n   *\n   * @returns Array of all layout specifications\n   */\n  getAllLayouts(): LayoutSpec[] {\n    return Array.from(this.layouts.values());\n  }\n\n  /**\n   * Calculate card dimensions based on content size\n   *\n   * @param contentWidth Content width in grid units\n   * @param contentHeight Content height in grid units\n   * @returns Card dimensions in pixels\n   */\n  calculateCardDimensions(contentWidth: number, contentHeight: number): { width: number; height: number } {\n    const titleBarHeight = this.calculateTitleBarHeight();\n\n    const width = this.calculateCardWidth(contentWidth);\n    const height = this.calculateCardHeight(contentHeight);\n\n    return { width, height };\n  }\n\n  /**\n   * Handle viewport resize\n   *\n   * This method should be called when the renderer size changes\n   * to reposition cards that are anchored to viewport edges\n   *\n   * @param width New viewport width\n   * @param height New viewport height\n   */\n  onViewportResize(width: number, height: number): void {\n    // This would typically trigger a layout re-application\n    // For now, we just store the new dimensions\n    console.log(`Viewport resized to ${width}x${height}`);\n\n    // In a full implementation, this would:\n    // 1. Adjust cards anchored to right/bottom edges\n    // 2. Ensure cards don't go off-screen\n    // 3. Reapply layout if needed\n  }\n\n  /**\n   * Calculate title bar height dynamically based on GRID.fontScale\n   *\n   * @private\n   */\n  private calculateTitleBarHeight(): number {\n    const fontHeight = CARD_CONSTANTS.TITLE_FONT_SCALE_MULTIPLIER * GRID.fontScale;\n    const verticalPadding = px(GRID.padding * CARD_CONSTANTS.TITLE_PADDING_MULTIPLIER);\n    return Math.ceil(fontHeight + verticalPadding);\n  }\n\n  /**\n   * Calculate total card width in pixels given content width in grid units\n   *\n   * @private\n   */\n  private calculateCardWidth(contentWidthGridUnits: number): number {\n    const cardWidthGridUnits = contentWidthGridUnits + BORDER.total * 2 + GRID.padding * 2;\n    return px(cardWidthGridUnits);\n  }\n\n  /**\n   * Calculate total card height in pixels given content height in grid units\n   *\n   * @private\n   */\n  private calculateCardHeight(contentHeightGridUnits: number): number {\n    const titleBarHeightPx = this.calculateTitleBarHeight();\n    return px(contentHeightGridUnits) + px(BORDER.total * 2) + titleBarHeightPx + px(GRID.padding * 2);\n  }\n\n  /**\n   * Calculate total card height from content height\n   * Helper that wraps calculateCardHeight for public use\n   *\n   * @param contentHeightGridUnits Content height in grid units\n   * @returns Total card height in pixels\n   */\n  calculateCardHeightFromContent(contentHeightGridUnits: number): number {\n    return this.calculateCardHeight(contentHeightGridUnits);\n  }\n\n  /**\n   * Calculate content width needed for edge-to-edge card (full viewport width)\n   *\n   * @param rendererWidth Viewport width in pixels\n   * @returns Content width in grid units\n   */\n  calculateFullWidthContentSize(rendererWidth: number): number {\n    return Math.floor(rendererWidth / px(1)) - (BORDER.total * 2) - (GRID.padding * 2);\n  }\n\n  /**\n   * Register default layouts from JSON config\n   *\n   * @private\n   */\n  private registerDefaultLayouts(): void {\n    // Load layouts from JSON config\n    const { layouts } = layoutsConfig;\n\n    Object.entries(layouts).forEach(([id, layout]) => {\n      const layoutData = layout as {\n        id: string;\n        name: string;\n        description?: string;\n        positions: Record<string, { x?: number; y?: number; anchor?: string; dock?: string; below?: string; gapMultiplier?: number }>;\n      };\n\n      // Convert JSON positions to CardPosition format\n      const positions: Record<string, CardPosition> = {};\n      Object.entries(layoutData.positions).forEach(([cardId, pos]) => {\n        positions[cardId] = {\n          x: pos.x ?? 0,\n          y: pos.y ?? 0,\n          // Store metadata for dynamic positioning\n          ...(pos.anchor && { anchor: pos.anchor }),\n          ...(pos.dock && { dock: pos.dock }),\n          ...(pos.below && { below: pos.below }),\n          ...(pos.gapMultiplier && { gapMultiplier: pos.gapMultiplier }),\n        } as CardPosition;\n      });\n\n      this.registerLayout({\n        id: layoutData.id,\n        name: layoutData.name,\n        positions,\n      });\n    });\n\n    console.log(` Loaded ${Object.keys(layouts).length} layouts from config`);\n  }\n\n  /**\n   * Get current layout ID\n   *\n   * @returns Current layout identifier or null\n   */\n  getCurrentLayoutId(): string | null {\n    return this.currentLayout;\n  }\n\n  /**\n   * Center a card in the viewport\n   *\n   * @param card Card to center\n   */\n  centerCard(card: PixelCard): void {\n    const cardWidth = card.getPixelWidth();\n    const cardHeight = card.getPixelHeight();\n\n    const x = (this.renderer.width - cardWidth) / 2;\n    const y = (this.renderer.height - cardHeight) / 2;\n\n    card.container.position.set(x, y);\n  }\n\n  /**\n   * Align a card to an edge of the viewport\n   *\n   * @param card Card to align\n   * @param edge Edge to align to\n   * @param offset Optional offset from edge in pixels\n   */\n  alignCardToEdge(\n    card: PixelCard,\n    edge: 'top' | 'right' | 'bottom' | 'left',\n    offset: number = 0\n  ): void {\n    const cardWidth = card.getPixelWidth();\n    const cardHeight = card.getPixelHeight();\n    const currentPos = card.container.position;\n\n    switch (edge) {\n      case 'top':\n        card.container.position.set(currentPos.x, offset);\n        break;\n      case 'right':\n        card.container.position.set(this.renderer.width - cardWidth - offset, currentPos.y);\n        break;\n      case 'bottom':\n        card.container.position.set(currentPos.x, this.renderer.height - cardHeight - offset);\n        break;\n      case 'left':\n        card.container.position.set(offset, currentPos.y);\n        break;\n    }\n  }\n\n  /**\n   * Position a card relative to another card\n   *\n   * @param card Card to position\n   * @param referenceCard Reference card\n   * @param direction Direction relative to reference card\n   * @param gap Gap between cards in pixels\n   */\n  positionRelativeTo(\n    card: PixelCard,\n    referenceCard: PixelCard,\n    direction: 'above' | 'below' | 'left' | 'right',\n    gap: number = LAYOUT_CONSTANTS.CARD_GAP\n  ): void {\n    const refPos = referenceCard.container.position;\n    const refWidth = referenceCard.getPixelWidth();\n    const refHeight = referenceCard.getPixelHeight();\n    const cardWidth = card.getPixelWidth();\n    const cardHeight = card.getPixelHeight();\n\n    switch (direction) {\n      case 'above':\n        card.container.position.set(refPos.x, refPos.y - cardHeight - gap);\n        break;\n      case 'below':\n        card.container.position.set(refPos.x, refPos.y + refHeight + gap);\n        break;\n      case 'left':\n        card.container.position.set(refPos.x - cardWidth - gap, refPos.y);\n        break;\n      case 'right':\n        card.container.position.set(refPos.x + refWidth + gap, refPos.y);\n        break;\n    }\n  }\n}\n","/**\n * FileOperationsManager - Manages file I/O operations\n *\n * Extracted from SpriteEditor to follow Single Responsibility Principle.\n * Handles save/load project files, PNG export, and file dialogs.\n *\n * Supports both .moxiproject and .pikcell file formats.\n */\nimport { IFileOperationsManager } from '../interfaces/managers';\nimport { ProjectState, ProjectStateManager } from '../state/project-state-manager';\nimport { SpriteSheetController } from '../controllers/sprite-sheet-controller';\nimport { SpriteController } from '../controllers/sprite-controller';\nimport { FILE_CONSTANTS } from '../config/constants';\n\n/** Supported project file extensions */\nconst SUPPORTED_EXTENSIONS = [\n  FILE_CONSTANTS.PROJECT_FILE_EXTENSION,\n  '.pikcell',\n];\n\n/**\n * Manages all file operations in the editor\n */\nexport class FileOperationsManager implements IFileOperationsManager {\n  private lastSavedFileName: string | null = null;\n\n  /**\n   * Save project to file\n   *\n   * Downloads a .pikcell JSON file with the current project state\n   *\n   * @param projectState Project state to save\n   * @param filename Optional custom filename\n   */\n  async saveProject(projectState: ProjectState, filename?: string): Promise<void> {\n    if (!this.supportsFileOperations()) {\n      throw new Error('File operations not supported in this browser');\n    }\n\n    const json = ProjectStateManager.exportProjectJSON(projectState);\n    const blob = new Blob([json], { type: 'application/json' });\n\n    // Generate filename if not provided\n    const timestamp = new Date().toISOString().split('T')[0];\n    const finalFilename = filename ?? `pikcell-project-${timestamp}.pikcell`;\n\n    // Download file\n    this.downloadBlob(blob, finalFilename);\n    this.lastSavedFileName = finalFilename;\n\n    console.log(' Project saved:', finalFilename);\n  }\n\n  /**\n   * Load project from file\n   *\n   * Opens a file picker and loads a .pikcell or .moxiproject JSON file\n   *\n   * @returns Loaded project state or null if cancelled/failed\n   */\n  async loadProject(): Promise<ProjectState | null> {\n    if (!this.supportsFileOperations()) {\n      throw new Error('File operations not supported in this browser');\n    }\n\n    return new Promise((resolve) => {\n      const input = document.createElement('input');\n      input.type = 'file';\n      input.accept = SUPPORTED_EXTENSIONS.join(',');\n\n      input.onchange = async (e: Event) => {\n        const target = e.target as HTMLInputElement;\n        const file = target.files?.[0];\n\n        if (!file) {\n          resolve(null);\n          return;\n        }\n\n        try {\n          const text = await file.text();\n          const result = ProjectStateManager.importProjectJSON(text);\n\n          if (!result.success || !result.data) {\n            console.error('Invalid project file:', result.error);\n            resolve(null);\n            return;\n          }\n\n          this.lastSavedFileName = file.name;\n          console.log(' Project loaded:', file.name);\n          resolve(result.data);\n        } catch (error) {\n          console.error('Failed to load project file:', error);\n          resolve(null);\n        }\n      };\n\n      input.oncancel = () => {\n        resolve(null);\n      };\n\n      input.click();\n    });\n  }\n\n  /**\n   * Export sprite sheet as PNG\n   *\n   * Renders the sprite sheet to a canvas and downloads it as PNG\n   *\n   * @param spriteSheet Sprite sheet controller to export\n   * @param filename Optional custom filename\n   */\n  async exportPNG(spriteSheet: SpriteSheetController, filename?: string): Promise<void> {\n    if (!this.supportsFileOperations()) {\n      throw new Error('File operations not supported in this browser');\n    }\n\n    // Get sprite sheet data\n    const config = spriteSheet.getConfig();\n    const pixels = spriteSheet.getPixelData();\n\n    // Create canvas\n    const canvas = document.createElement('canvas');\n    canvas.width = config.width;\n    canvas.height = config.height;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Failed to get 2D context from canvas');\n    }\n\n    // Render pixels to canvas\n    for (let y = 0; y < config.height; y++) {\n      for (let x = 0; x < config.width; x++) {\n        const colorIndex = pixels[y][x];\n        const color = config.palette[colorIndex];\n\n        const r = (color >> 16) & 0xff;\n        const g = (color >> 8) & 0xff;\n        const b = color & 0xff;\n\n        ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;\n        ctx.fillRect(x, y, 1, 1);\n      }\n    }\n\n    // Convert to PNG blob\n    const blob = await this.canvasToBlob(canvas);\n\n    // Generate filename\n    const timestamp = new Date().toISOString().split('T')[0];\n    const exportFilename = filename || `spritesheet-${config.type.toLowerCase()}-${timestamp}${FILE_CONSTANTS.PNG_EXPORT_EXTENSION}`;\n\n    // Download\n    this.downloadBlob(blob, exportFilename);\n  }\n\n  /**\n   * Export individual sprite as PNG\n   *\n   * Renders an 8x8 sprite to a canvas and downloads it as PNG\n   *\n   * @param sprite Sprite controller to export\n   * @param filename Optional custom filename\n   */\n  async exportSpritePNG(sprite: SpriteController, filename?: string): Promise<void> {\n    if (!this.supportsFileOperations()) {\n      throw new Error('File operations not supported in this browser');\n    }\n\n    // Get sprite data\n    const { x: cellX, y: cellY } = sprite.getCell();\n    const sheetController = sprite.getSpriteSheetController();\n    const config = sheetController.getConfig();\n\n    // Create canvas\n    const canvas = document.createElement('canvas');\n    canvas.width = 8;\n    canvas.height = 8;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Failed to get 2D context from canvas');\n    }\n\n    // Render 8x8 sprite\n    for (let y = 0; y < 8; y++) {\n      for (let x = 0; x < 8; x++) {\n        const colorIndex = sprite.getPixel(x, y);\n        const color = config.palette[colorIndex];\n\n        const r = (color >> 16) & 0xff;\n        const g = (color >> 8) & 0xff;\n        const b = color & 0xff;\n\n        ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;\n        ctx.fillRect(x, y, 1, 1);\n      }\n    }\n\n    // Convert to PNG blob\n    const blob = await this.canvasToBlob(canvas);\n\n    // Generate filename\n    const exportFilename = filename || `sprite-${cellX}-${cellY}${FILE_CONSTANTS.PNG_EXPORT_EXTENSION}`;\n\n    // Download\n    this.downloadBlob(blob, exportFilename);\n  }\n\n  /**\n   * Check if browser supports file operations\n   *\n   * @returns True if file operations are supported\n   */\n  supportsFileOperations(): boolean {\n    return typeof window !== 'undefined' && typeof document !== 'undefined';\n  }\n\n  /**\n   * Get the last saved file name\n   *\n   * @returns Last saved filename or null\n   */\n  getLastSavedFileName(): string | null {\n    return this.lastSavedFileName;\n  }\n\n  /**\n   * Download a blob as a file\n   *\n   * @private\n   * @param blob Blob to download\n   * @param filename Filename for the download\n   */\n  private downloadBlob(blob: Blob, filename: string): void {\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = filename;\n    link.click();\n\n    // Clean up\n    setTimeout(() => URL.revokeObjectURL(url), 100);\n  }\n\n  /**\n   * Convert canvas to PNG blob\n   *\n   * @private\n   * @param canvas Canvas element to convert\n   * @returns Promise resolving to PNG blob\n   */\n  private canvasToBlob(canvas: HTMLCanvasElement): Promise<Blob> {\n    return new Promise((resolve, reject) => {\n      canvas.toBlob((blob) => {\n        if (blob) {\n          resolve(blob);\n        } else {\n          reject(new Error('Failed to convert canvas to blob'));\n        }\n      }, 'image/png');\n    });\n  }\n\n  /**\n   * Export sprite sheet with custom scale (for high-res exports)\n   *\n   * @param spriteSheet Sprite sheet controller to export\n   * @param scale Scale factor (e.g., 2 for 2x resolution)\n   * @param filename Optional custom filename\n   */\n  async exportScaledPNG(\n    spriteSheet: SpriteSheetController,\n    scale: number,\n    filename?: string\n  ): Promise<void> {\n    if (!this.supportsFileOperations()) {\n      throw new Error('File operations not supported in this browser');\n    }\n\n    // Get sprite sheet data\n    const config = spriteSheet.getConfig();\n    const pixels = spriteSheet.getPixelData();\n\n    // Create canvas with scaled dimensions\n    const canvas = document.createElement('canvas');\n    canvas.width = config.width * scale;\n    canvas.height = config.height * scale;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Failed to get 2D context from canvas');\n    }\n\n    // Disable image smoothing for pixel-perfect scaling\n    ctx.imageSmoothingEnabled = false;\n\n    // Render pixels to canvas with scaling\n    for (let y = 0; y < config.height; y++) {\n      for (let x = 0; x < config.width; x++) {\n        const colorIndex = pixels[y][x];\n        const color = config.palette[colorIndex];\n\n        const r = (color >> 16) & 0xff;\n        const g = (color >> 8) & 0xff;\n        const b = color & 0xff;\n\n        ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;\n        ctx.fillRect(x * scale, y * scale, scale, scale);\n      }\n    }\n\n    // Convert to PNG blob\n    const blob = await this.canvasToBlob(canvas);\n\n    // Generate filename\n    const timestamp = new Date().toISOString().split('T')[0];\n    const exportFilename = filename || `spritesheet-${config.type.toLowerCase()}-${scale}x-${timestamp}${FILE_CONSTANTS.PNG_EXPORT_EXTENSION}`;\n\n    // Download\n    this.downloadBlob(blob, exportFilename);\n  }\n\n  /**\n   * Clear the last saved filename\n   *\n   * Useful when creating a new project\n   */\n  clearLastSavedFileName(): void {\n    this.lastSavedFileName = null;\n  }\n}\n","/**\n * Sprite controller - manages a single 8x8 sprite cell from the sprite sheet\n */\nimport * as PIXI from 'pixi.js';\nimport { SpriteSheetController } from './sprite-sheet-controller';\nimport { SPRITE_CONTROLLER_CONFIG } from '../config/controller-configs';\n\nexport interface SpriteControllerOptions {\n  spriteSheetController: SpriteSheetController;\n  cellX: number;  // Cell X coordinate (0-based, in 8x8 cells)\n  cellY: number;  // Cell Y coordinate (0-based, in 8x8 cells)\n  scale?: number; // Display scale\n}\n\n/**\n * Controller for managing a single 8x8 sprite cell\n * References the sprite sheet controller and updates it directly\n * \n *  IMPORTANT: Sprite dimensions are in ACTUAL PIXELS, not grid units\n * - Sprites are 8x8 pixels\n * - Scale is applied to pixels (e.g., scale 4 = 32x32 pixel display)\n * - UI cards convert these pixel dimensions to grid units for content sizing\n */\nexport class SpriteController {\n  private spriteSheetController: SpriteSheetController;\n  private cellX: number;\n  private cellY: number;\n  private scale: number;\n  private sprite: PIXI.Sprite | null = null;\n  private texture: PIXI.Texture | null = null;\n\n  constructor(options: SpriteControllerOptions) {\n    this.spriteSheetController = options.spriteSheetController;\n    this.cellX = options.cellX;\n    this.cellY = options.cellY;\n    this.scale = options.scale ?? SPRITE_CONTROLLER_CONFIG.defaultScale;\n  }\n\n  /**\n   * Get the current cell coordinates\n   */\n  public getCell(): { x: number; y: number } {\n    return { x: this.cellX, y: this.cellY };\n  }\n\n  /**\n   * Set which cell to edit\n   */\n  public setCell(cellX: number, cellY: number) {\n    this.cellX = cellX;\n    this.cellY = cellY;\n  }\n\n  /**\n   * Get the scale\n   */\n  public getScale(): number {\n    return this.scale;\n  }\n\n  /**\n   * Set the scale\n   */\n  public setScale(newScale: number) {\n    this.scale = Math.max(SPRITE_CONTROLLER_CONFIG.minScale, Math.min(SPRITE_CONTROLLER_CONFIG.maxScale, newScale));\n  }\n\n  /**\n   * Get pixel color at local sprite coordinates (0-7, 0-7)\n   */\n  public getPixel(localX: number, localY: number): number {\n    // Convert local coordinates to global sheet coordinates\n    const globalX = this.cellX * SPRITE_CONTROLLER_CONFIG.cellSize + localX;\n    const globalY = this.cellY * SPRITE_CONTROLLER_CONFIG.cellSize + localY;\n    return this.spriteSheetController.getPixel(globalX, globalY);\n  }\n\n  /**\n   * Set pixel color at local sprite coordinates (0-7, 0-7)\n   */\n  public setPixel(localX: number, localY: number, colorIndex: number) {\n    // Convert local coordinates to global sheet coordinates\n    const globalX = this.cellX * SPRITE_CONTROLLER_CONFIG.cellSize + localX;\n    const globalY = this.cellY * SPRITE_CONTROLLER_CONFIG.cellSize + localY;\n    this.spriteSheetController.setPixel(globalX, globalY, colorIndex);\n  }\n\n  /**\n   * Render the sprite (shows the 8x8 cell from sprite sheet)\n   */\n  public render(container: PIXI.Container) {\n    // Remove old sprite if it exists\n    if (this.sprite) {\n      container.removeChild(this.sprite);\n    }\n\n    // Get the sprite sheet's texture\n    const sheetConfig = this.spriteSheetController.getConfig();\n\n    // For now, we'll render our own texture from pixel data\n    // This ensures we always show the latest pixel data\n    const canvas = document.createElement('canvas');\n    canvas.width = SPRITE_CONTROLLER_CONFIG.cellSize;\n    canvas.height = SPRITE_CONTROLLER_CONFIG.cellSize;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Draw the sprite from sprite sheet data\n    for (let y = 0; y < SPRITE_CONTROLLER_CONFIG.cellSize; y++) {\n      for (let x = 0; x < SPRITE_CONTROLLER_CONFIG.cellSize; x++) {\n        const colorIndex = this.getPixel(x, y);\n        const color = sheetConfig.palette[colorIndex];\n\n        // Convert color to CSS format\n        const r = (color >> 16) & 0xff;\n        const g = (color >> 8) & 0xff;\n        const b = color & 0xff;\n        ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;\n        ctx.fillRect(x, y, 1, 1);\n      }\n    }\n\n    // Destroy old texture if exists\n    if (this.texture) {\n      this.texture.destroy(true);\n    }\n\n    // Create texture from canvas with nearest neighbor scaling\n    this.texture = PIXI.Texture.from(canvas);\n    this.texture.source.scaleMode = 'nearest';\n\n    // Create sprite\n    this.sprite = new PIXI.Sprite(this.texture);\n    this.sprite.scale.set(this.scale);\n    this.sprite.position.set(0, 0);\n\n    container.addChild(this.sprite);\n  }\n\n  /**\n   * Convert screen coordinates (relative to sprite) to pixel coordinates\n   */\n  public screenToPixel(screenX: number, screenY: number): { x: number; y: number } | null {\n    const pixelX = Math.floor(screenX / this.scale);\n    const pixelY = Math.floor(screenY / this.scale);\n\n    if (pixelX < 0 || pixelX >= SPRITE_CONTROLLER_CONFIG.cellSize || pixelY < 0 || pixelY >= SPRITE_CONTROLLER_CONFIG.cellSize) {\n      return null;\n    }\n\n    return { x: pixelX, y: pixelY };\n  }\n\n  /**\n   * Get the scaled dimensions\n   */\n  public getScaledDimensions(): { width: number; height: number } {\n    return {\n      width: SPRITE_CONTROLLER_CONFIG.cellSize * this.scale,\n      height: SPRITE_CONTROLLER_CONFIG.cellSize * this.scale\n    };\n  }\n\n  /**\n   * Get the sprite sheet controller this sprite belongs to\n   */\n  public getSpriteSheetController(): SpriteSheetController {\n    return this.spriteSheetController;\n  }\n\n  /**\n   * Clean up resources\n   */\n  public destroy(): void {\n    if (this.texture) {\n      this.texture.destroy(true);\n      this.texture = null;\n    }\n    if (this.sprite) {\n      this.sprite.destroy();\n      this.sprite = null;\n    }\n  }\n}\n","/**\n * Shape Drawer - Calculates pixels for drawing shapes\n *\n * All functions return arrays of {x, y} coordinates to be filled.\n */\n\nimport { ShapeType } from '../theming/tool-icons';\n\nexport interface Point {\n  x: number;\n  y: number;\n}\n\n/**\n * Calculate pixels for a rectangle outline\n */\nexport function getRectangleOutlinePixels(x1: number, y1: number, x2: number, y2: number): Point[] {\n  const pixels: Point[] = [];\n  const minX = Math.min(x1, x2);\n  const maxX = Math.max(x1, x2);\n  const minY = Math.min(y1, y2);\n  const maxY = Math.max(y1, y2);\n\n  // Top and bottom edges\n  for (let x = minX; x <= maxX; x++) {\n    pixels.push({ x, y: minY });\n    if (minY !== maxY) {\n      pixels.push({ x, y: maxY });\n    }\n  }\n\n  // Left and right edges (excluding corners already drawn)\n  for (let y = minY + 1; y < maxY; y++) {\n    pixels.push({ x: minX, y });\n    if (minX !== maxX) {\n      pixels.push({ x: maxX, y });\n    }\n  }\n\n  return pixels;\n}\n\n/**\n * Calculate pixels for a filled rectangle\n */\nexport function getFilledRectanglePixels(x1: number, y1: number, x2: number, y2: number): Point[] {\n  const pixels: Point[] = [];\n  const minX = Math.min(x1, x2);\n  const maxX = Math.max(x1, x2);\n  const minY = Math.min(y1, y2);\n  const maxY = Math.max(y1, y2);\n\n  for (let y = minY; y <= maxY; y++) {\n    for (let x = minX; x <= maxX; x++) {\n      pixels.push({ x, y });\n    }\n  }\n\n  return pixels;\n}\n\n/**\n * Calculate pixels for a circle outline using Bresenham's algorithm\n * Uses 8-way symmetry for cleaner pixel-perfect circles\n */\nfunction getCircleOutlinePixels(centerX: number, centerY: number, radius: number): Point[] {\n  const pixels: Point[] = [];\n  const pixelSet = new Set<string>();\n\n  const addPixel = (x: number, y: number) => {\n    const px = Math.round(x);\n    const py = Math.round(y);\n    const key = `${px},${py}`;\n    if (!pixelSet.has(key)) {\n      pixelSet.add(key);\n      pixels.push({ x: px, y: py });\n    }\n  };\n\n  // Add all 8 symmetric points\n  const addSymmetricPoints = (cx: number, cy: number, x: number, y: number) => {\n    addPixel(cx + x, cy + y);\n    addPixel(cx - x, cy + y);\n    addPixel(cx + x, cy - y);\n    addPixel(cx - x, cy - y);\n    addPixel(cx + y, cy + x);\n    addPixel(cx - y, cy + x);\n    addPixel(cx + y, cy - x);\n    addPixel(cx - y, cy - x);\n  };\n\n  // Handle small radii with hand-tuned patterns for better aesthetics\n  const r = Math.round(radius);\n  if (r <= 0) {\n    addPixel(centerX, centerY);\n    return pixels;\n  }\n\n  // Bresenham's circle algorithm with midpoint decision\n  let x = 0;\n  let y = r;\n  let d = 3 - 2 * r;\n\n  addSymmetricPoints(centerX, centerY, x, y);\n\n  while (y >= x) {\n    x++;\n    if (d > 0) {\n      y--;\n      d = d + 4 * (x - y) + 10;\n    } else {\n      d = d + 4 * x + 6;\n    }\n    addSymmetricPoints(centerX, centerY, x, y);\n  }\n\n  return pixels;\n}\n\n/**\n * Calculate pixels for an ellipse outline using midpoint algorithm\n * For circles (equal width/height), delegates to the cleaner circle algorithm\n */\nexport function getEllipseOutlinePixels(x1: number, y1: number, x2: number, y2: number): Point[] {\n  const pixels: Point[] = [];\n  const centerX = (x1 + x2) / 2;\n  const centerY = (y1 + y2) / 2;\n  const width = Math.abs(x2 - x1);\n  const height = Math.abs(y2 - y1);\n  const radiusX = width / 2;\n  const radiusY = height / 2;\n\n  // Handle degenerate cases\n  if (radiusX < 0.5 && radiusY < 0.5) {\n    pixels.push({ x: Math.round(centerX), y: Math.round(centerY) });\n    return pixels;\n  }\n  if (radiusX < 0.5) {\n    // Vertical line\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n    for (let y = minY; y <= maxY; y++) {\n      pixels.push({ x: Math.round(centerX), y });\n    }\n    return pixels;\n  }\n  if (radiusY < 0.5) {\n    // Horizontal line\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    for (let x = minX; x <= maxX; x++) {\n      pixels.push({ x, y: Math.round(centerY) });\n    }\n    return pixels;\n  }\n\n  // For circles (equal width and height), use the cleaner Bresenham algorithm\n  if (Math.abs(width - height) < 1) {\n    return getCircleOutlinePixels(centerX, centerY, radiusX);\n  }\n\n  // For ellipses, use midpoint ellipse algorithm\n  const pixelSet = new Set<string>();\n  const addPixel = (x: number, y: number) => {\n    const px = Math.round(x);\n    const py = Math.round(y);\n    const key = `${px},${py}`;\n    if (!pixelSet.has(key)) {\n      pixelSet.add(key);\n      pixels.push({ x: px, y: py });\n    }\n  };\n\n  const rx2 = radiusX * radiusX;\n  const ry2 = radiusY * radiusY;\n\n  // Region 1\n  let x = 0;\n  let y = radiusY;\n  let d1 = ry2 - rx2 * radiusY + 0.25 * rx2;\n  let dx = 2 * ry2 * x;\n  let dy = 2 * rx2 * y;\n\n  while (dx < dy) {\n    addPixel(centerX + x, centerY + y);\n    addPixel(centerX - x, centerY + y);\n    addPixel(centerX + x, centerY - y);\n    addPixel(centerX - x, centerY - y);\n\n    if (d1 < 0) {\n      x++;\n      dx += 2 * ry2;\n      d1 += dx + ry2;\n    } else {\n      x++;\n      y--;\n      dx += 2 * ry2;\n      dy -= 2 * rx2;\n      d1 += dx - dy + ry2;\n    }\n  }\n\n  // Region 2\n  let d2 = ry2 * (x + 0.5) * (x + 0.5) + rx2 * (y - 1) * (y - 1) - rx2 * ry2;\n\n  while (y >= 0) {\n    addPixel(centerX + x, centerY + y);\n    addPixel(centerX - x, centerY + y);\n    addPixel(centerX + x, centerY - y);\n    addPixel(centerX - x, centerY - y);\n\n    if (d2 > 0) {\n      y--;\n      dy -= 2 * rx2;\n      d2 += rx2 - dy;\n    } else {\n      y--;\n      x++;\n      dx += 2 * ry2;\n      dy -= 2 * rx2;\n      d2 += dx - dy + rx2;\n    }\n  }\n\n  return pixels;\n}\n\n/**\n * Calculate pixels for a filled ellipse\n */\nexport function getFilledEllipsePixels(x1: number, y1: number, x2: number, y2: number): Point[] {\n  const pixels: Point[] = [];\n  const centerX = (x1 + x2) / 2;\n  const centerY = (y1 + y2) / 2;\n  const radiusX = Math.abs(x2 - x1) / 2;\n  const radiusY = Math.abs(y2 - y1) / 2;\n\n  // Handle degenerate cases\n  if (radiusX < 0.5 && radiusY < 0.5) {\n    pixels.push({ x: Math.round(centerX), y: Math.round(centerY) });\n    return pixels;\n  }\n\n  const minX = Math.min(x1, x2);\n  const maxX = Math.max(x1, x2);\n  const minY = Math.min(y1, y2);\n  const maxY = Math.max(y1, y2);\n\n  // For each row, find the extent of the ellipse\n  for (let y = minY; y <= maxY; y++) {\n    const dy = y - centerY;\n    // Solve for x: (x-cx)^2/rx^2 + (y-cy)^2/ry^2 = 1\n    // x = cx  rx * sqrt(1 - (y-cy)^2/ry^2)\n    const term = 1 - (dy * dy) / (radiusY * radiusY);\n    if (term >= 0) {\n      const xExtent = radiusX * Math.sqrt(term);\n      const xMin = Math.round(centerX - xExtent);\n      const xMax = Math.round(centerX + xExtent);\n      for (let x = xMin; x <= xMax; x++) {\n        if (x >= minX && x <= maxX) {\n          pixels.push({ x, y });\n        }\n      }\n    }\n  }\n\n  return pixels;\n}\n\n/**\n * Get pixels for a shape based on type\n */\nexport function getShapePixels(shapeType: ShapeType, x1: number, y1: number, x2: number, y2: number): Point[] {\n  switch (shapeType) {\n    case 'square':\n      return getRectangleOutlinePixels(x1, y1, x2, y2);\n    case 'square-filled':\n      return getFilledRectanglePixels(x1, y1, x2, y2);\n    case 'circle':\n      return getEllipseOutlinePixels(x1, y1, x2, y2);\n    case 'circle-filled':\n      return getFilledEllipsePixels(x1, y1, x2, y2);\n    default:\n      return [];\n  }\n}\n\n/**\n * Flood fill algorithm - returns all connected pixels of the same color\n * Uses BFS (queue-based) approach which is more efficient than recursive DFS\n *\n * @param startX - Starting X coordinate\n * @param startY - Starting Y coordinate\n * @param width - Grid width\n * @param height - Grid height\n * @param getPixel - Function to get pixel color at (x, y)\n * @returns Array of points that should be filled\n */\nexport function getFloodFillPixels(\n  startX: number,\n  startY: number,\n  width: number,\n  height: number,\n  getPixel: (x: number, y: number) => number\n): Point[] {\n  const pixels: Point[] = [];\n  const targetColor = getPixel(startX, startY);\n\n  // Track visited pixels\n  const visited = new Set<string>();\n  const key = (x: number, y: number) => `${x},${y}`;\n\n  // BFS queue\n  const queue: Point[] = [{ x: startX, y: startY }];\n  visited.add(key(startX, startY));\n\n  while (queue.length > 0) {\n    const { x, y } = queue.shift()!;\n\n    // Check bounds\n    if (x < 0 || x >= width || y < 0 || y >= height) {\n      continue;\n    }\n\n    // Check if this pixel matches the target color\n    if (getPixel(x, y) !== targetColor) {\n      continue;\n    }\n\n    // Add to result\n    pixels.push({ x, y });\n\n    // Add adjacent pixels to queue (4-connected)\n    const neighbors = [\n      { x: x + 1, y },\n      { x: x - 1, y },\n      { x, y: y + 1 },\n      { x, y: y - 1 }\n    ];\n\n    for (const neighbor of neighbors) {\n      const nKey = key(neighbor.x, neighbor.y);\n      if (!visited.has(nKey) &&\n          neighbor.x >= 0 && neighbor.x < width &&\n          neighbor.y >= 0 && neighbor.y < height) {\n        visited.add(nKey);\n        queue.push(neighbor);\n      }\n    }\n  }\n\n  return pixels;\n}\n","/**\n * Card Utility Functions\n * Shared utilities for card-related calculations\n * \n *  CRITICAL: This codebase uses GRID UNITS, not raw pixels!\n * - Always use px(gridUnits) to convert grid units to pixels\n * - NEVER use hardcoded pixel values like 24, 16, etc. for UI measurements\n * - Grid units scale with GRID.scale (configurable: 1x, 2x, 3x, or 4x - default 4x)\n * - The scale is configured at the outer layer (PixelGrid), not hardcoded\n * - px(1) = 4px (at 4x) = 3px (at 3x) = 2px (at 2x) = 1px (at 1x)\n * \n * @see ../README.md for grid system documentation\n */\nimport { GRID, BORDER, px } from '@moxijs/core';\nimport { CARD_CONSTANTS } from '../config/constants';\n\n/**\n * Calculate title bar height dynamically based on GRID.fontScale\n * \n *  Returns height in PIXELS (converted from grid units)\n * This function properly calculates the title bar height using grid-based measurements.\n * \n * @returns Height in pixels (not grid units!)\n */\nexport function calculateTitleBarHeight(): number {\n  const fontHeight = CARD_CONSTANTS.TITLE_FONT_SCALE_MULTIPLIER * GRID.fontScale;\n  const verticalPadding = px(GRID.padding * CARD_CONSTANTS.TITLE_PADDING_MULTIPLIER);\n  return Math.ceil(fontHeight + verticalPadding);\n}\n\n/**\n * Calculate commander bar total height (content + borders + title bar)\n * \n *  Returns height in PIXELS (converted from grid units)\n * Uses grid units (12 for content height) converted to pixels via px()\n * \n * @returns Total commander bar height in pixels\n */\nexport function calculateCommanderBarHeight(): number {\n  return px(12) + px(BORDER.total * 2) + calculateTitleBarHeight(); // 12 grid units content + borders + title bar\n}\n\n","/**\n * Card ID Constants\n *\n * Centralized identifiers for all UI cards in the sprite editor.\n * Using constants prevents typos and enables type-safe card lookups.\n */\n\n/**\n * Core card identifiers\n */\nexport const CARD_IDS = {\n  /** Commander bar at top of screen */\n  COMMANDER: 'commander',\n\n  /** Color palette picker */\n  PALETTE: 'palette',\n\n  /** Info bar at bottom of screen */\n  INFO: 'info',\n\n  /** Tool selection card */\n  TOOL: 'tool',\n\n  /** Scale selector card */\n  SCALE: 'scale',\n} as const;\n\n/**\n * Generate sprite sheet card ID\n * @param index Sprite sheet index\n */\nexport function getSpriteSheetCardId(index: number): string {\n  return `sprite-sheet-${index}`;\n}\n\n/**\n * Generate sprite card ID\n * @param index Sprite sheet index this sprite belongs to\n */\nexport function getSpriteCardId(index: number): string {\n  return `sprite-card-${index}`;\n}\n\n/**\n * Check if a card ID is a sprite sheet card\n */\nexport function isSpriteSheetCard(id: string): boolean {\n  return id.startsWith('sprite-sheet-');\n}\n\n/**\n * Check if a card ID is a sprite card\n */\nexport function isSpriteCard(id: string): boolean {\n  return id.startsWith('sprite-card-');\n}\n\n/**\n * Extract index from sprite sheet or sprite card ID\n * @returns The index or -1 if not a valid ID\n */\nexport function getCardIndex(id: string): number {\n  if (isSpriteSheetCard(id)) {\n    return parseInt(id.replace('sprite-sheet-', ''), 10);\n  }\n  if (isSpriteCard(id)) {\n    return parseInt(id.replace('sprite-card-', ''), 10);\n  }\n  return -1;\n}\n\nexport type CardId = typeof CARD_IDS[keyof typeof CARD_IDS];\n\n","/**\n * SpriteCardFactory - Creates and manages sprite cards\n *\n * Extracted from SpriteEditor to follow Single Responsibility Principle.\n * Handles sprite card creation, updates, zoom handlers, and card pairing.\n */\nimport * as PIXI from 'pixi.js';\nimport { GRID, BORDER, px } from '@moxijs/core';\nimport { SpriteController } from '../controllers/sprite-controller';\nimport { createSpriteEditorCard, SpriteEditorCardResult } from '../components/sprite-editor-card';\nimport { PixelCard } from '../components/pixel-card';\nimport { createCardZoomHandler } from '../utilities/card-zoom-handler';\nimport { calculateCommanderBarHeight } from '../utilities/card-utils';\nimport { SpriteSheetInstance } from '../interfaces/managers';\nimport { getSpriteCardId } from '../config/card-ids';\nimport { SPRITE_CONSTANTS } from '../config/constants';\nimport { MainToolType } from '../cards/toolbar-card';\nimport { ShapeType } from '../theming/tool-icons';\nimport { UndoManager } from '../state/undo-manager';\nimport { Point, getFloodFillPixels } from '../utilities/shape-drawer';\n\nexport interface SpriteCardFactoryOptions {\n  renderer: PIXI.Renderer;\n  scene: PIXI.Container;\n  registerCard: (id: string, card: PixelCard) => void;\n  getSelectedColorIndex: () => number;\n  getSelectedColorHex: () => number;\n  getCurrentTool: () => MainToolType;\n  getCurrentShape: () => ShapeType;\n  undoManager: UndoManager;\n  onPixelChange: () => void;\n  onFocus: (instance: SpriteSheetInstance) => void;\n  getSheetIndex: (instance: SpriteSheetInstance) => number;\n}\n\nexport interface CreateSpriteCardOptions {\n  instance: SpriteSheetInstance;\n  cellX: number;\n  cellY: number;\n  savedScale?: number;\n}\n\n/**\n * Factory for creating and managing sprite cards\n */\nexport class SpriteCardFactory {\n  private renderer: PIXI.Renderer;\n  private scene: PIXI.Container;\n  private registerCard: (id: string, card: any) => void;\n  private getSelectedColorIndex: () => number;\n  private getSelectedColorHex: () => number;\n  private getCurrentTool: () => MainToolType;\n  private getCurrentShape: () => ShapeType;\n  private undoManager: UndoManager;\n  private onPixelChange: () => void;\n  private onFocus: (instance: SpriteSheetInstance) => void;\n  private getSheetIndex: (instance: SpriteSheetInstance) => number;\n\n  // Track zoom handlers for cleanup\n  private zoomHandlers: Map<string, (e: WheelEvent) => void> = new Map();\n\n  constructor(options: SpriteCardFactoryOptions) {\n    this.renderer = options.renderer;\n    this.scene = options.scene;\n    this.registerCard = options.registerCard;\n    this.getSelectedColorIndex = options.getSelectedColorIndex;\n    this.getSelectedColorHex = options.getSelectedColorHex;\n    this.getCurrentTool = options.getCurrentTool;\n    this.getCurrentShape = options.getCurrentShape;\n    this.undoManager = options.undoManager;\n    this.onPixelChange = options.onPixelChange;\n    this.onFocus = options.onFocus;\n    this.getSheetIndex = options.getSheetIndex;\n  }\n\n  /**\n   * Create or update a sprite card for a cell\n   *\n   * If the instance already has a sprite card, it updates the cell.\n   * Otherwise, it creates a new sprite card.\n   */\n  createOrUpdate(options: CreateSpriteCardOptions): void {\n    const { instance, cellX, cellY, savedScale } = options;\n\n    // If sprite card already exists, just update the cell\n    if (instance.spriteCard && instance.spriteController) {\n      this.updateCell(instance, cellX, cellY);\n      return;\n    }\n\n    // Create new sprite card\n    this.createNew(instance, cellX, cellY, savedScale);\n  }\n\n  /**\n   * Update an existing sprite card to show a different cell\n   */\n  private updateCell(instance: SpriteSheetInstance, cellX: number, cellY: number): void {\n    if (!instance.spriteCard || !instance.spriteController) return;\n\n    console.log(`Updating sprite card to cell: ${cellX}, ${cellY}`);\n    instance.spriteController.setCell(cellX, cellY);\n    instance.spriteCard.redraw();\n    instance.sheetCard.controller.render(instance.sheetCard.card.getContentContainer());\n\n    // Update title with new cell coordinates\n    const currentTool = this.getCurrentTool();\n    const currentShape = this.getCurrentShape();\n    instance.spriteCard.updateTitle(currentTool, currentShape);\n\n    this.onFocus(instance);\n  }\n\n  /**\n   * Create a new sprite card for an instance\n   */\n  private createNew(\n    instance: SpriteSheetInstance,\n    cellX: number,\n    cellY: number,\n    savedScale?: number\n  ): void {\n    console.log(`Creating sprite card for cell: ${cellX}, ${cellY}`);\n    this.onFocus(instance);\n\n    // Create sprite controller\n    const spriteController = new SpriteController({\n      spriteSheetController: instance.sheetCard.controller,\n      cellX,\n      cellY,\n      scale: savedScale ?? 32\n    });\n\n    // Calculate position\n    const position = this.calculatePosition(instance, spriteController);\n\n    // Remove old sprite card if exists\n    if (instance.spriteCard) {\n      this.scene.removeChild(instance.spriteCard.card.container);\n    }\n\n    // Create the sprite card\n    const spriteCardResult = createSpriteEditorCard({\n      x: position.x,\n      y: position.y,\n      renderer: this.renderer,\n      spriteController,\n      getCurrentTool: () => this.getCurrentTool(),\n      getCurrentShape: () => this.getCurrentShape(),\n      getPreviewColor: () => this.getSelectedColorHex(),\n      onPixelClick: (x, y, oldColorIndex) => {\n        // Use color index 0 for eraser, otherwise use selected color\n        const tool = this.getCurrentTool();\n        const newColorIndex = tool === 'eraser' ? 0 : this.getSelectedColorIndex();\n\n        // Record the pixel change for undo\n        this.undoManager.recordPixelChange(x, y, oldColorIndex, newColorIndex);\n\n        spriteController.setPixel(x, y, newColorIndex);\n\n        // Re-render\n        spriteController.render(spriteCardResult.card.getContentContainer().children[0] as PIXI.Container);\n        instance.sheetCard.controller.render(instance.sheetCard.card.getContentContainer());\n\n        this.onPixelChange();\n      },\n      onShapeDraw: (pixels, oldColors) => {\n        // Use color index 0 for eraser, otherwise use selected color\n        const tool = this.getCurrentTool();\n        const newColorIndex = tool === 'eraser' ? 0 : this.getSelectedColorIndex();\n\n        // Record all pixel changes for undo\n        for (const pixel of pixels) {\n          const key = `${pixel.x},${pixel.y}`;\n          const oldColorIndex = oldColors.get(key) ?? 0;\n          this.undoManager.recordPixelChange(pixel.x, pixel.y, oldColorIndex, newColorIndex);\n          spriteController.setPixel(pixel.x, pixel.y, newColorIndex);\n        }\n\n        // Re-render\n        spriteController.render(spriteCardResult.card.getContentContainer().children[0] as PIXI.Container);\n        instance.sheetCard.controller.render(instance.sheetCard.card.getContentContainer());\n\n        this.onPixelChange();\n      },\n      onFill: (x, y) => {\n        const newColorIndex = this.getSelectedColorIndex();\n        const targetColorIndex = spriteController.getPixel(x, y);\n\n        // Don't fill if clicking on same color\n        if (newColorIndex === targetColorIndex) {\n          return;\n        }\n\n        // Sprite dimensions are always 8x8\n        const size = SPRITE_CONSTANTS.CELL_SIZE;\n\n        // Get all pixels to fill using flood fill algorithm\n        const pixelsToFill = getFloodFillPixels(\n          x, y, size, size,\n          (px, py) => spriteController.getPixel(px, py)\n        );\n\n        if (pixelsToFill.length === 0) {\n          return;\n        }\n\n        // Begin undo stroke\n        this.undoManager.beginStroke(instance.id);\n\n        // Record all pixel changes for undo and apply them\n        for (const pixel of pixelsToFill) {\n          this.undoManager.recordPixelChange(pixel.x, pixel.y, targetColorIndex, newColorIndex);\n          spriteController.setPixel(pixel.x, pixel.y, newColorIndex);\n        }\n\n        // End undo stroke\n        this.undoManager.endStroke();\n\n        // Re-render\n        spriteController.render(spriteCardResult.card.getContentContainer().children[0] as PIXI.Container);\n        instance.sheetCard.controller.render(instance.sheetCard.card.getContentContainer());\n\n        this.onPixelChange();\n      },\n      onDrawStart: () => {\n        this.undoManager.beginStroke(instance.id);\n      },\n      onDrawEnd: () => {\n        this.undoManager.endStroke();\n      },\n      onFocus: () => this.onFocus(instance)\n    });\n\n    // Add to scene\n    this.scene.addChild(spriteCardResult.card.container);\n\n    // Store references\n    instance.spriteCard = spriteCardResult;\n    instance.spriteController = spriteController;\n\n    // Register with UI manager\n    const sheetIndex = this.getSheetIndex(instance);\n    this.registerCard(getSpriteCardId(sheetIndex), spriteCardResult.card);\n\n    // Link paired cards\n    spriteCardResult.card.setPairedCard(instance.sheetCard.card);\n    instance.sheetCard.card.setPairedCard(spriteCardResult.card);\n\n    // Setup zoom handler\n    this.setupZoomHandler(instance, spriteController, spriteCardResult);\n\n    // Set initial title with tool icon, coordinates, size, and scale\n    const currentTool = this.getCurrentTool();\n    const currentShape = this.getCurrentShape();\n    spriteCardResult.updateTitle(currentTool, currentShape);\n  }\n\n  /**\n   * Calculate the initial position for a sprite card\n   */\n  private calculatePosition(\n    instance: SpriteSheetInstance,\n    spriteController: SpriteController\n  ): { x: number; y: number } {\n    // Preserve position if sprite card already exists\n    if (instance.spriteCard) {\n      return {\n        x: instance.spriteCard.card.container.x,\n        y: instance.spriteCard.card.container.y\n      };\n    }\n\n    // Calculate default center position\n    const dims = spriteController.getScaledDimensions();\n    const commanderBarHeight = calculateCommanderBarHeight();\n\n    return {\n      x: (this.renderer.width - dims.width) / 2,\n      y: px(GRID.margin) + commanderBarHeight + px(GRID.gap * 2)\n    };\n  }\n\n  /**\n   * Setup zoom handler for a sprite card\n   */\n  private setupZoomHandler(\n    instance: SpriteSheetInstance,\n    spriteController: SpriteController,\n    spriteCardResult: SpriteEditorCardResult\n  ): void {\n    const handleZoom = createCardZoomHandler(this.renderer, spriteCardResult.card, (delta) => {\n      const currentScale = spriteController.getScale();\n      const zoomIncrement = delta * 2;\n      const newScale = Math.max(1, Math.min(64, currentScale + zoomIncrement));\n\n      if (newScale !== currentScale) {\n        spriteController.setScale(newScale);\n\n        const dims = spriteController.getScaledDimensions();\n        const newContentWidth = Math.ceil(dims.width / px(1));\n        const newContentHeight = Math.ceil(dims.height / px(1));\n        spriteCardResult.card.setContentSize(newContentWidth, newContentHeight);\n\n        // Update title with new scale\n        const currentTool = this.getCurrentTool();\n        const currentShape = this.getCurrentShape();\n        spriteCardResult.updateTitle(currentTool, currentShape);\n\n        spriteCardResult.redraw();\n      }\n    });\n\n    // Store handler for cleanup\n    const handlerId = instance.id;\n    this.zoomHandlers.set(handlerId, handleZoom);\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('wheel', handleZoom, { passive: false });\n\n      spriteCardResult.card.container.on('destroyed', () => {\n        window.removeEventListener('wheel', handleZoom);\n        this.zoomHandlers.delete(handlerId);\n      });\n    }\n  }\n\n  /**\n   * Restore sprite card scale from saved state\n   */\n  restoreScale(instance: SpriteSheetInstance, scale: number): void {\n    if (!instance.spriteController || !instance.spriteCard) return;\n\n    instance.spriteController.setScale(scale);\n\n    const dims = instance.spriteController.getScaledDimensions();\n    const newContentWidth = Math.ceil(dims.width / px(1));\n    const newContentHeight = Math.ceil(dims.height / px(1));\n    instance.spriteCard.card.setContentSize(newContentWidth, newContentHeight);\n\n    // Update title with new scale\n    const currentTool = this.getCurrentTool();\n    const currentShape = this.getCurrentShape();\n    instance.spriteCard.updateTitle(currentTool, currentShape);\n\n    instance.spriteCard.redraw();\n  }\n\n  /**\n   * Remove a sprite card from an instance\n   */\n  remove(instance: SpriteSheetInstance): void {\n    if (instance.spriteCard) {\n      this.scene.removeChild(instance.spriteCard.card.container);\n      instance.spriteCard = null;\n    }\n    if (instance.spriteController) {\n      instance.spriteController = null;\n    }\n\n    // Clean up zoom handler\n    const handleZoom = this.zoomHandlers.get(instance.id);\n    if (handleZoom && typeof window !== 'undefined') {\n      window.removeEventListener('wheel', handleZoom);\n      this.zoomHandlers.delete(instance.id);\n    }\n  }\n\n  /**\n   * Clean up all zoom handlers\n   */\n  destroy(): void {\n    if (typeof window !== 'undefined') {\n      this.zoomHandlers.forEach((handler) => {\n        window.removeEventListener('wheel', handler);\n      });\n    }\n    this.zoomHandlers.clear();\n  }\n}\n\n","/**\n * Sprite editor card - displays and allows editing of a single 8x8 sprite\n * \n *  IMPORTANT: This component bridges pixel-based sprite content and grid-based UI\n * - Sprite dimensions are in ACTUAL PIXELS (8x8 pixels)\n * - Card UI wrapper uses GRID UNITS (converted from pixels for content size)\n * - The sprite content itself is rendered at pixel scale, not grid scale\n * \n * @see ../utilities/README.md for grid system documentation\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from './pixel-card';\nimport { px, GRID } from '@moxijs/core';\nimport { SpriteController } from '../controllers/sprite-controller';\nimport { CardResult, ControllableComponent, RefreshableComponent } from '../interfaces/components';\nimport { ShapeType, drawToolIconInto, drawShapeIconInto, ToolType } from '../theming/tool-icons';\nimport { getShapePixels, getFloodFillPixels, Point } from '../utilities/shape-drawer';\nimport { MainToolType } from '../cards/toolbar-card';\nimport { SPRITE_CONSTANTS } from '../config/constants';\n\n/** Selection rectangle in pixel coordinates */\nexport interface Selection {\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n}\n\nexport interface SpriteEditorCardOptions {\n  x: number;\n  y: number;\n  renderer: PIXI.Renderer;\n  spriteController: SpriteController;\n  showGrid?: boolean;  // Show pixel grid overlay (default: true)\n  onPixelClick?: (x: number, y: number, oldColorIndex: number) => void;\n  onShapeDraw?: (pixels: Point[], oldColors: Map<string, number>) => void;  // Called when shape is drawn\n  onFill?: (x: number, y: number) => void;  // Called when fill tool is used\n  onDrawStart?: () => void;  // Called when user starts drawing\n  onDrawEnd?: () => void;    // Called when user stops drawing\n  getCurrentTool?: () => MainToolType;  // Get current tool type\n  getCurrentShape?: () => ShapeType;    // Get current shape type\n  getPreviewColor?: () => number;       // Get color for shape preview (hex)\n  onSelectionChange?: (selection: Selection | null) => void;  // Called when selection changes\n  onFocus?: () => void;\n}\n\nexport interface SpriteEditorCardResult extends CardResult, ControllableComponent<SpriteController>, RefreshableComponent {\n  getSelection: () => Selection | null;\n  setSelection: (selection: Selection | null) => void;\n  clearSelection: () => void;\n  /** Update title bar with tool icon, coordinates, size, and scale */\n  updateTitle: (tool: MainToolType, shapeType?: ShapeType) => void;\n}\n\n/** Grid line color (semi-transparent) */\nconst GRID_LINE_COLOR = 0x888888;\nconst GRID_LINE_ALPHA = 0.4;\n\n/**\n * Creates a sprite editor card for editing a single 8x8 sprite\n */\nexport function createSpriteEditorCard(options: SpriteEditorCardOptions): SpriteEditorCardResult {\n  const { x, y, renderer, spriteController, onPixelClick, onShapeDraw, onFill, onDrawStart, onDrawEnd, getCurrentTool, getCurrentShape, getPreviewColor, onSelectionChange, onFocus } = options;\n  const showGrid = options.showGrid ?? true;\n\n  // Get scaled dimensions\n  const dims = spriteController.getScaledDimensions();\n  const contentWidth = Math.ceil(dims.width / px(1));\n  const contentHeight = Math.ceil(dims.height / px(1));\n\n  // Track current tool for refresh\n  let lastTool: MainToolType = getCurrentTool?.() ?? 'pencil';\n  let lastShape: ShapeType | undefined = getCurrentShape?.();\n\n  // Create the card\n  const card = new PixelCard({\n    title: `(${spriteController.getScale()}x)`,\n    x,\n    y,\n    contentWidth,\n    contentHeight,\n    renderer,\n    minContentSize: true,\n    clipContent: true, // Enable clipping for sprite canvas (overflow: hidden)\n    onResize: (width, height) => {\n      // Re-render sprite when card resizes\n      drawSprite();\n      if (showGrid) drawGrid();\n    },\n    onRefresh: () => {\n      // Re-apply title with icon after theme change\n      updateTitleInternal(lastTool, lastShape);\n    },\n    onFocus\n  });\n\n  const contentContainer = card.getContentContainer();\n\n  // Container for the sprite\n  const spriteContainer = new PIXI.Container();\n  contentContainer.addChild(spriteContainer);\n\n  // Container for grid overlay (on top of sprite)\n  const gridContainer = new PIXI.Container();\n  contentContainer.addChild(gridContainer);\n\n  // Container for shape preview (on top of grid)\n  const previewContainer = new PIXI.Container();\n  contentContainer.addChild(previewContainer);\n\n  // Container for selection overlay (on top of everything)\n  const selectionContainer = new PIXI.Container();\n  contentContainer.addChild(selectionContainer);\n\n  // Selection state\n  let currentSelection: Selection | null = null;\n  let selectionAnimationFrame = 0;\n  let selectionAnimationId: number | null = null;\n\n  // Draw the sprite\n  function drawSprite() {\n    spriteContainer.removeChildren();\n    spriteController.render(spriteContainer);\n  }\n\n  // Draw the grid overlay\n  function drawGrid() {\n    gridContainer.removeChildren();\n    if (!showGrid) return;\n\n    const scale = spriteController.getScale();\n    const cellSize = 8; // 8x8 sprite\n    const totalSize = cellSize * scale;\n\n    const g = new PIXI.Graphics();\n    g.roundPixels = true;\n\n    // Draw vertical lines\n    for (let i = 0; i <= cellSize; i++) {\n      const lineX = i * scale;\n      g.moveTo(lineX, 0);\n      g.lineTo(lineX, totalSize);\n    }\n\n    // Draw horizontal lines\n    for (let i = 0; i <= cellSize; i++) {\n      const lineY = i * scale;\n      g.moveTo(0, lineY);\n      g.lineTo(totalSize, lineY);\n    }\n\n    g.stroke({ color: GRID_LINE_COLOR, alpha: GRID_LINE_ALPHA, width: 2 });\n    gridContainer.addChild(g);\n  }\n\n  // Draw shape preview (ghost outline)\n  function drawShapePreview(startX: number, startY: number, endX: number, endY: number) {\n    previewContainer.removeChildren();\n\n    const shapeType = getCurrentShape?.() ?? 'square';\n    const pixels = getShapePixels(shapeType, startX, startY, endX, endY);\n    const validPixels = pixels.filter(p => p.x >= 0 && p.x < 8 && p.y >= 0 && p.y < 8);\n\n    if (validPixels.length === 0) return;\n\n    const scale = spriteController.getScale();\n    const previewColor = getPreviewColor?.() ?? 0xFFFFFF;\n\n    const g = new PIXI.Graphics();\n    g.roundPixels = true;\n\n    // Draw semi-transparent preview pixels\n    for (const pixel of validPixels) {\n      g.rect(pixel.x * scale, pixel.y * scale, scale, scale);\n    }\n    g.fill({ color: previewColor, alpha: 0.5 });\n\n    // Draw white/black outline around each pixel for visibility (2px)\n    for (const pixel of validPixels) {\n      const x = pixel.x * scale;\n      const y = pixel.y * scale;\n      g.rect(x + 2, y + 2, scale - 4, scale - 4);\n      g.stroke({ color: 0x000000, alpha: 0.8, width: 2 });\n    }\n    for (const pixel of validPixels) {\n      g.rect(pixel.x * scale, pixel.y * scale, scale, scale);\n    }\n    g.stroke({ color: 0xFFFFFF, alpha: 0.8, width: 2 });\n\n    previewContainer.addChild(g);\n  }\n\n  // Clear shape preview\n  function clearShapePreview() {\n    previewContainer.removeChildren();\n  }\n\n  // Draw hover preview for single pixel (pen/eraser/selection)\n  function drawHoverPreview(pixelX: number, pixelY: number, tool: MainToolType) {\n    previewContainer.removeChildren();\n\n    if (pixelX < 0 || pixelX >= 8 || pixelY < 0 || pixelY >= 8) return;\n\n    const scale = spriteController.getScale();\n    const g = new PIXI.Graphics();\n    g.roundPixels = true;\n\n    // All tools use white/black border for visibility on any background\n    const x = pixelX * scale;\n    const y = pixelY * scale;\n\n    if (tool === 'eraser') {\n      // Eraser: white/black double border (2px)\n      g.rect(x + 2, y + 2, scale - 4, scale - 4);\n      g.stroke({ color: 0x000000, alpha: 0.9, width: 2 });\n      g.rect(x, y, scale, scale);\n      g.stroke({ color: 0xFFFFFF, alpha: 0.9, width: 2 });\n    } else if (tool === 'selection') {\n      // Selection: white/black double border (2px)\n      g.rect(x + 2, y + 2, scale - 4, scale - 4);\n      g.stroke({ color: 0x000000, alpha: 0.9, width: 2 });\n      g.rect(x, y, scale, scale);\n      g.stroke({ color: 0xFFFFFF, alpha: 0.9, width: 2 });\n    } else {\n      // Pencil: filled pixel with white/black border (2px)\n      const previewColor = getPreviewColor?.() ?? 0xFFFFFF;\n      g.rect(x, y, scale, scale);\n      g.fill({ color: previewColor, alpha: 0.5 });\n      g.rect(x + 2, y + 2, scale - 4, scale - 4);\n      g.stroke({ color: 0x000000, alpha: 0.8, width: 2 });\n      g.rect(x, y, scale, scale);\n      g.stroke({ color: 0xFFFFFF, alpha: 0.8, width: 2 });\n    }\n\n    previewContainer.addChild(g);\n  }\n\n  // Draw fill preview - highlight all pixels that would be filled\n  function drawFillPreview(pixelX: number, pixelY: number) {\n    previewContainer.removeChildren();\n\n    if (pixelX < 0 || pixelX >= 8 || pixelY < 0 || pixelY >= 8) return;\n\n    // Get all pixels that would be filled using flood fill algorithm\n    const pixelsToFill = getFloodFillPixels(\n      pixelX,\n      pixelY,\n      8, // width\n      8, // height\n      (x, y) => spriteController.getPixel(x, y)\n    );\n\n    if (pixelsToFill.length === 0) return;\n\n    const scale = spriteController.getScale();\n    const previewColor = getPreviewColor?.() ?? 0xFFFFFF;\n    const g = new PIXI.Graphics();\n    g.roundPixels = true;\n\n    // Draw semi-transparent fill preview\n    for (const pixel of pixelsToFill) {\n      g.rect(pixel.x * scale, pixel.y * scale, scale, scale);\n    }\n    g.fill({ color: previewColor, alpha: 0.4 });\n\n    // Draw white/black border around each pixel for visibility (2px)\n    for (const pixel of pixelsToFill) {\n      const x = pixel.x * scale;\n      const y = pixel.y * scale;\n      g.rect(x + 2, y + 2, scale - 4, scale - 4);\n      g.stroke({ color: 0x000000, alpha: 0.5, width: 2 });\n    }\n    for (const pixel of pixelsToFill) {\n      const x = pixel.x * scale;\n      const y = pixel.y * scale;\n      g.rect(x, y, scale, scale);\n      g.stroke({ color: 0xFFFFFF, alpha: 0.5, width: 2 });\n    }\n\n    previewContainer.addChild(g);\n  }\n\n  // Draw selection with marching ants (dotted animated border)\n  function drawSelection() {\n    selectionContainer.removeChildren();\n    if (!currentSelection) return;\n\n    const scale = spriteController.getScale();\n    const { x1, y1, x2, y2 } = currentSelection;\n\n    // Normalize coordinates (ensure x1,y1 is top-left)\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n\n    // Calculate pixel positions\n    const left = minX * scale;\n    const top = minY * scale;\n    const right = (maxX + 1) * scale;\n    const bottom = (maxY + 1) * scale;\n    const width = right - left;\n    const height = bottom - top;\n\n    const g = new PIXI.Graphics();\n    g.roundPixels = true;\n\n    // Draw marching ants pattern\n    const dashLength = 4;\n    const offset = selectionAnimationFrame % (dashLength * 2);\n\n    // Helper to draw a dashed line\n    const drawDashedLine = (x1: number, y1: number, x2: number, y2: number, isHorizontal: boolean) => {\n      const length = isHorizontal ? Math.abs(x2 - x1) : Math.abs(y2 - y1);\n      const dir = isHorizontal ? (x2 > x1 ? 1 : -1) : (y2 > y1 ? 1 : -1);\n      let pos = -offset;\n      let drawing = true;\n\n      while (pos < length) {\n        const start = Math.max(0, pos);\n        const end = Math.min(length, pos + dashLength);\n\n        if (drawing && end > start) {\n          if (isHorizontal) {\n            g.moveTo(x1 + start * dir, y1);\n            g.lineTo(x1 + end * dir, y1);\n          } else {\n            g.moveTo(x1, y1 + start * dir);\n            g.lineTo(x1, y1 + end * dir);\n          }\n        }\n\n        pos += dashLength;\n        drawing = !drawing;\n      }\n    };\n\n    // Draw white background for contrast\n    g.rect(left, top, width, height);\n    g.stroke({ color: 0xFFFFFF, alpha: 0.5, width: 1 });\n\n    // Draw black marching ants\n    drawDashedLine(left, top, right, top, true);      // Top\n    drawDashedLine(right, top, right, bottom, false); // Right\n    drawDashedLine(right, bottom, left, bottom, true); // Bottom\n    drawDashedLine(left, bottom, left, top, false);   // Left\n\n    g.stroke({ color: 0x000000, alpha: 1, width: 1 });\n\n    selectionContainer.addChild(g);\n  }\n\n  // Start selection animation\n  function startSelectionAnimation() {\n    if (selectionAnimationId !== null) return;\n\n    const animate = () => {\n      selectionAnimationFrame++;\n      drawSelection();\n      selectionAnimationId = requestAnimationFrame(animate);\n    };\n\n    // Slow down the animation (every 5 frames)\n    const slowAnimate = () => {\n      selectionAnimationFrame++;\n      drawSelection();\n      setTimeout(() => {\n        if (currentSelection) {\n          selectionAnimationId = requestAnimationFrame(slowAnimate);\n        }\n      }, 100);\n    };\n\n    slowAnimate();\n  }\n\n  // Stop selection animation\n  function stopSelectionAnimation() {\n    if (selectionAnimationId !== null) {\n      cancelAnimationFrame(selectionAnimationId);\n      selectionAnimationId = null;\n    }\n  }\n\n  // Set selection\n  function setSelection(selection: Selection | null) {\n    currentSelection = selection;\n    if (selection) {\n      drawSelection();\n      startSelectionAnimation();\n    } else {\n      stopSelectionAnimation();\n      selectionContainer.removeChildren();\n    }\n    onSelectionChange?.(selection);\n  }\n\n  // Clear selection\n  function clearSelection() {\n    setSelection(null);\n  }\n\n  // Handle clicks for drawing\n  if (onPixelClick || onShapeDraw) {\n    spriteContainer.eventMode = 'static';\n    spriteContainer.cursor = 'crosshair';\n\n    let isDrawing = false;\n    let lastPixelX = -1;\n    let lastPixelY = -1;\n    // Shape drawing state\n    let shapeStartX = -1;\n    let shapeStartY = -1;\n\n    spriteContainer.on('pointerdown', (e: PIXI.FederatedPointerEvent) => {\n      isDrawing = true;\n      clearShapePreview(); // Clear hover preview when starting to draw\n      onDrawStart?.();\n      const local = e.getLocalPosition(spriteContainer);\n      const pixel = spriteController.screenToPixel(local.x, local.y);\n\n      if (pixel) {\n        const currentTool = getCurrentTool?.() ?? 'pencil';\n\n        if (currentTool === 'selection') {\n          // Selection mode: record start position and clear previous selection\n          shapeStartX = pixel.x;\n          shapeStartY = pixel.y;\n          clearSelection();\n        } else if (currentTool === 'shape') {\n          // Shape mode: record start position\n          shapeStartX = pixel.x;\n          shapeStartY = pixel.y;\n        } else if (currentTool === 'fill') {\n          // Fill mode: flood fill from clicked pixel\n          if (onFill) {\n            onFill(pixel.x, pixel.y);\n          }\n        } else {\n          // Pencil/eraser mode: draw immediately\n          lastPixelX = pixel.x;\n          lastPixelY = pixel.y;\n          if (onPixelClick) {\n            const oldColorIndex = spriteController.getPixel(pixel.x, pixel.y);\n            onPixelClick(pixel.x, pixel.y, oldColorIndex);\n          }\n        }\n      }\n    });\n\n    spriteContainer.on('pointermove', (e: PIXI.FederatedPointerEvent) => {\n      if (isDrawing) {\n        const local = e.getLocalPosition(spriteContainer);\n        const pixel = spriteController.screenToPixel(local.x, local.y);\n        const currentTool = getCurrentTool?.() ?? 'pencil';\n\n        if (currentTool === 'selection') {\n          // Selection mode: track position and draw selection preview\n          if (pixel) {\n            lastPixelX = pixel.x;\n            lastPixelY = pixel.y;\n            // Draw temporary selection preview (without animation)\n            if (shapeStartX >= 0 && shapeStartY >= 0) {\n              // Temporarily set selection to show preview\n              currentSelection = {\n                x1: shapeStartX,\n                y1: shapeStartY,\n                x2: pixel.x,\n                y2: pixel.y\n              };\n              drawSelection();\n            }\n          }\n        } else if (currentTool === 'shape') {\n          // Shape mode: track position and draw preview\n          if (pixel) {\n            lastPixelX = pixel.x;\n            lastPixelY = pixel.y;\n            // Draw shape preview\n            if (shapeStartX >= 0 && shapeStartY >= 0) {\n              drawShapePreview(shapeStartX, shapeStartY, pixel.x, pixel.y);\n            }\n          }\n        } else if (pixel && onPixelClick) {\n          // Pencil/eraser mode: draw as you move\n          if (pixel.x !== lastPixelX || pixel.y !== lastPixelY) {\n            lastPixelX = pixel.x;\n            lastPixelY = pixel.y;\n            const oldColorIndex = spriteController.getPixel(pixel.x, pixel.y);\n            onPixelClick(pixel.x, pixel.y, oldColorIndex);\n          }\n        }\n      }\n    });\n\n    const endDraw = (e?: PIXI.FederatedPointerEvent) => {\n      if (isDrawing) {\n        const currentTool = getCurrentTool?.() ?? 'pencil';\n\n        if (currentTool === 'selection' && shapeStartX >= 0 && shapeStartY >= 0) {\n          // Finalize selection\n          let endX = lastPixelX;\n          let endY = lastPixelY;\n\n          // If we have an event, get the exact position\n          if (e) {\n            const local = e.getLocalPosition(spriteContainer);\n            const pixel = spriteController.screenToPixel(local.x, local.y);\n            if (pixel) {\n              endX = pixel.x;\n              endY = pixel.y;\n            }\n          }\n\n          // If no movement, use start position (single pixel selection)\n          if (endX < 0) endX = shapeStartX;\n          if (endY < 0) endY = shapeStartY;\n\n          // Clamp to bounds\n          endX = Math.max(0, Math.min(7, endX));\n          endY = Math.max(0, Math.min(7, endY));\n\n          // Set the final selection and start animation\n          setSelection({\n            x1: shapeStartX,\n            y1: shapeStartY,\n            x2: endX,\n            y2: endY\n          });\n        } else if (currentTool === 'shape' && shapeStartX >= 0 && shapeStartY >= 0) {\n          // Get the end position\n          let endX = lastPixelX;\n          let endY = lastPixelY;\n\n          // If we have an event, get the exact position\n          if (e) {\n            const local = e.getLocalPosition(spriteContainer);\n            const pixel = spriteController.screenToPixel(local.x, local.y);\n            if (pixel) {\n              endX = pixel.x;\n              endY = pixel.y;\n            }\n          }\n\n          // If no movement, use start position (single pixel)\n          if (endX < 0) endX = shapeStartX;\n          if (endY < 0) endY = shapeStartY;\n\n          // Get shape type and calculate pixels\n          const shapeType = getCurrentShape?.() ?? 'square';\n          const pixels = getShapePixels(shapeType, shapeStartX, shapeStartY, endX, endY);\n\n          // Filter to only pixels within bounds (0-7)\n          const validPixels = pixels.filter(p => p.x >= 0 && p.x < 8 && p.y >= 0 && p.y < 8);\n\n          if (validPixels.length > 0 && onShapeDraw) {\n            // Collect old colors for undo\n            const oldColors = new Map<string, number>();\n            for (const p of validPixels) {\n              const key = `${p.x},${p.y}`;\n              if (!oldColors.has(key)) {\n                oldColors.set(key, spriteController.getPixel(p.x, p.y));\n              }\n            }\n            onShapeDraw(validPixels, oldColors);\n          }\n\n          // Clear the preview after drawing\n          clearShapePreview();\n        }\n\n        isDrawing = false;\n        lastPixelX = -1;\n        lastPixelY = -1;\n        shapeStartX = -1;\n        shapeStartY = -1;\n        onDrawEnd?.();\n      }\n    };\n\n    spriteContainer.on('pointerup', endDraw);\n    spriteContainer.on('pointerupoutside', endDraw);\n\n    // Track last hover position for preview\n    let lastHoverX = -1;\n    let lastHoverY = -1;\n\n    // Add hover preview (separate from drawing)\n    const updateHoverPreview = (e: PIXI.FederatedPointerEvent) => {\n      // Don't show hover preview while actively drawing\n      if (isDrawing) return;\n\n      const local = e.getLocalPosition(spriteContainer);\n      const pixel = spriteController.screenToPixel(local.x, local.y);\n      const currentTool = getCurrentTool?.() ?? 'pencil';\n\n      // Shape tool doesn't have hover preview (uses drag preview instead)\n      if (currentTool === 'shape') {\n        clearShapePreview();\n        lastHoverX = -1;\n        lastHoverY = -1;\n        return;\n      }\n\n      if (pixel && (pixel.x !== lastHoverX || pixel.y !== lastHoverY)) {\n        lastHoverX = pixel.x;\n        lastHoverY = pixel.y;\n\n        if (currentTool === 'fill') {\n          drawFillPreview(pixel.x, pixel.y);\n        } else {\n          drawHoverPreview(pixel.x, pixel.y, currentTool);\n        }\n      }\n    };\n\n    spriteContainer.on('pointermove', updateHoverPreview);\n    spriteContainer.on('pointerover', updateHoverPreview);\n\n    // Clear preview when mouse leaves\n    spriteContainer.on('pointerout', () => {\n      if (!isDrawing) {\n        clearShapePreview();\n        lastHoverX = -1;\n        lastHoverY = -1;\n      }\n    });\n  }\n\n  // Initial draw\n  drawSprite();\n  if (showGrid) drawGrid();\n\n  /**\n   * Internal function to update the title bar with tool icon and info\n   * Format: [icon] (x,y) 8x8 Nx\n   */\n  function updateTitleInternal(tool: MainToolType, shapeType?: ShapeType) {\n    const cell = spriteController.getCell();\n    const scale = spriteController.getScale();\n    const size = SPRITE_CONSTANTS.CELL_SIZE;\n\n    // Build info string: (x,y) 8x8 Nx\n    const infoText = `(${cell.x},${cell.y}) ${size}x${size} ${scale}x`;\n\n    // Choose the icon drawing function based on tool\n    let drawIcon: (g: PIXI.Graphics, x: number, y: number, color: number, pixelSize: number) => void;\n\n    if (tool === 'shape' && shapeType) {\n      drawIcon = (g, x, y, color, pixelSize) => drawShapeIconInto(g, shapeType, x, y, color, pixelSize);\n    } else {\n      // Map MainToolType to ToolType (they're mostly the same)\n      const toolType = tool as ToolType;\n      drawIcon = (g, x, y, color, pixelSize) => drawToolIconInto(g, toolType, x, y, color, pixelSize);\n    }\n\n    // Icon dimensions: 10x9 grid units, rendered at 2x = 20x18 pixels\n    const scaledIconWidth = 20;\n    card.setTitleWithIcon(drawIcon, infoText, scaledIconWidth);\n  }\n\n  /**\n   * Public function to update title - also tracks state for refresh\n   */\n  function updateTitle(tool: MainToolType, shapeType?: ShapeType) {\n    lastTool = tool;\n    lastShape = shapeType;\n    updateTitleInternal(tool, shapeType);\n  }\n\n  return {\n    card,\n    container: card.container,\n    controller: spriteController,\n    redraw: () => {\n      drawSprite();\n      if (showGrid) drawGrid();\n    },\n    getSelection: () => currentSelection,\n    setSelection: (selection: Selection | null) => setSelection(selection),\n    clearSelection: () => clearSelection(),\n    updateTitle,\n    destroy: () => {\n      stopSelectionAnimation();\n      spriteContainer.removeAllListeners();\n      gridContainer.removeChildren();\n      selectionContainer.removeChildren();\n      card.container.destroy({ children: true });\n    }\n  };\n}\n\n","/**\n * Sprite Editor (Refactored) - Main orchestrator class\n *\n * REFACTORED to use manager pattern for better separation of concerns:\n * - SpriteSheetManager: Sprite sheet lifecycle\n * - UIManager: Card registry and z-ordering\n * - LayoutManager: Positioning and layouts\n * - FileOperationsManager: Save/load/export\n *\n * This reduces the class from 1040 lines to ~400 lines with clear responsibilities.\n * \n *  CRITICAL: GRID-BASED UI SYSTEM\n * =================================\n * \n * This codebase uses GRID UNITS for all UI measurements, not raw pixels!\n * - Always use px(gridUnits) to convert grid units to pixels\n * - Example: px(1) = 1 grid unit = 4 pixels (at default 4x scale)\n * - Example: px(GRID.gap) = standard gap in grid units\n * - NEVER use hardcoded pixel values like 24, 16, etc. for UI\n * \n * @see ./utilities/README.md for detailed grid system documentation\n */\nimport * as PIXI from 'pixi.js';\nimport { PixelCard } from './components/pixel-card';\nimport { createPixelDialog, PixelDialogResult } from './components/pixel-dialog';\nimport { createSpriteSheetCard, SPRITESHEET_CONFIGS } from './components/spritesheet-card';\nimport { SpriteSheetType } from './controllers/sprite-sheet-controller';\nimport { UIStateManager } from './state/ui-state-manager';\nimport { ProjectStateManager, ProjectState, SpriteSheetState } from './state/project-state-manager';\nimport { LayoutStateManager, LayoutSlotState } from './state/layout-state-manager';\nimport { UndoManager, StrokeOperation } from './state/undo-manager';\nimport { getTheme } from './theming/theme';\nimport { PICO8_PALETTE } from './theming/palettes';\nimport { GRID, BORDER, px } from '@moxijs/core';\n\n// Card imports\nimport { createPaletteCard, PaletteCardResult } from './cards/palette-card';\nimport { createInfoBarCard, InfoBarCardResult } from './cards/info-bar-card';\nimport { createCommanderBarCard, CommanderBarCardResult } from './cards/commander-bar-card';\nimport { createToolbarCard, ToolbarCardResult, MainToolType } from './cards/toolbar-card';\nimport { ShapeType } from './theming/tool-icons';\nimport { Selection } from './components/sprite-editor-card';\n\n// Manager imports\nimport { SpriteSheetManager } from './managers/sprite-sheet-manager';\nimport { UIManager } from './managers/ui-manager';\nimport { LayoutManager } from './managers/layout-manager';\nimport { FileOperationsManager } from './managers/file-operations-manager';\nimport { SpriteCardFactory } from './managers/sprite-card-factory';\nimport { SpriteSheetInstance } from './interfaces/managers';\n\n// Constants\nimport { PERFORMANCE_CONSTANTS, INTERACTION_CONSTANTS } from './config/constants';\nimport { CARD_IDS, getSpriteSheetCardId, getSpriteCardId, isSpriteCard } from './config/card-ids';\n\n// Utilities\nimport { calculateCommanderBarHeight } from './utilities/card-utils';\n\nexport interface SpriteEditorOptions {\n  renderer: PIXI.Renderer;\n  scene: PIXI.Container;\n  maxSpriteSheets?: number;\n}\n\n/**\n * Main Sprite Editor class (Refactored)\n * Now acts as a lightweight orchestrator that delegates to specialized managers\n */\nexport class SpriteEditor {\n  // Managers\n  private spriteSheetManager: SpriteSheetManager;\n  private uiManager: UIManager;\n  private layoutManager: LayoutManager;\n  private fileOperationsManager: FileOperationsManager;\n  private spriteCardFactory: SpriteCardFactory;\n  private undoManager: UndoManager;\n\n  // Core dependencies\n  private renderer: PIXI.Renderer;\n  private scene: PIXI.Container;\n\n  // UI Cards (only persistent cards stored here)\n  private commanderBarCard?: CommanderBarCardResult;\n  private paletteCard?: PaletteCardResult;\n  private infoBarCard?: InfoBarCardResult;\n  private toolbarCard?: ToolbarCardResult;\n\n  // Current tool state\n  private currentTool: MainToolType = 'pencil';\n  private currentShapeType: ShapeType = 'square';\n\n  // Tool display names for info bar\n  private static readonly TOOL_DISPLAY_NAMES: Record<MainToolType, string> = {\n    pencil: 'Pencil',\n    eraser: 'Eraser',\n    fill: 'Fill',\n    selection: 'Selection',\n    shape: 'Shape'\n  };\n\n  // Editor state\n  private currentPalette: number[] = PICO8_PALETTE;\n  private selectedColorIndex: number = 0;\n  private projectState: ProjectState;\n  private hasUnsavedChanges: boolean = false;\n\n  // Timers for debounced saves\n  private uiStateSaveTimer: number | null = null;\n  private projectSaveTimer: number | null = null;\n\n  // Keyboard handler for undo/redo\n  private keyboardHandler: ((e: KeyboardEvent) => void) | null = null;\n\n  // Clipboard for copy/paste operations\n  private clipboard: { width: number; height: number; pixels: number[][] } | null = null;\n\n  // Track current dialog for cleanup\n  private currentDialog: PixelDialogResult | null = null;\n\n  constructor(options: SpriteEditorOptions) {\n    this.renderer = options.renderer;\n    this.scene = options.scene;\n\n    // Initialize managers\n    this.spriteSheetManager = new SpriteSheetManager();\n    this.uiManager = new UIManager(this.scene);\n    this.layoutManager = new LayoutManager(this.renderer);\n    this.fileOperationsManager = new FileOperationsManager();\n    this.undoManager = new UndoManager({ maxHistory: 50 });\n\n    // Initialize sprite card factory\n    this.spriteCardFactory = new SpriteCardFactory({\n      renderer: this.renderer,\n      scene: this.scene,\n      registerCard: (id, card) => this.registerCard(id, card),\n      getSelectedColorIndex: () => this.selectedColorIndex,\n      getSelectedColorHex: () => this.currentPalette[this.selectedColorIndex] ?? 0xFFFFFF,\n      getCurrentTool: () => this.currentTool,\n      getCurrentShape: () => this.currentShapeType,\n      undoManager: this.undoManager,\n      onPixelChange: () => this.saveProjectState(),\n      onFocus: (instance) => this.activateInstance(instance),\n      getSheetIndex: (instance) => this.spriteSheetManager.getAll().indexOf(instance)\n    });\n\n    // Setup keyboard handler for undo/redo\n    this.setupKeyboardHandler();\n\n    // Setup beforeunload handler to save state when page closes\n    this.setupBeforeUnloadHandler();\n\n    // Initialize or load project state\n    const loadResult = ProjectStateManager.loadProject();\n    if (!loadResult.success) {\n      console.warn('Failed to load saved project, starting fresh:', loadResult.error);\n    }\n    this.projectState = loadResult.data ?? ProjectStateManager.createEmptyProject();\n\n    // Subscribe to sprite sheet manager events\n    this.spriteSheetManager.on('activeChanged', (id) => {\n      this.updatePaletteForActiveSheet();\n    });\n  }\n\n  /**\n   * Initialize and create all UI elements\n   */\n  async initialize(): Promise<void> {\n    await this.recreateUI();\n  }\n\n  /**\n   * Register a card and setup auto-save on state changes\n   */\n  private registerCard(id: string, card: PixelCard): void {\n    this.uiManager.registerCard(id, card);\n    card.onStateChanged(() => this.saveUIState());\n  }\n\n  /**\n   * Save current UI state to localStorage (debounced)\n   */\n  private saveUIState(): void {\n    if (this.uiStateSaveTimer) {\n      clearTimeout(this.uiStateSaveTimer);\n    }\n\n    this.uiStateSaveTimer = window.setTimeout(() => {\n      this.saveUIStateImmediate();\n    }, PERFORMANCE_CONSTANTS.UI_STATE_DEBOUNCE_MS);\n  }\n\n  /**\n   * Save UI state immediately (no debounce) - used for beforeunload\n   */\n  private saveUIStateImmediate(): void {\n    const stateMap = this.uiManager.exportAllStates();\n    UIStateManager.saveState(stateMap, this.renderer.width, this.renderer.height);\n  }\n\n  /**\n   * Restore UI state from localStorage\n   */\n  private restoreUIState(): boolean {\n    const savedState = UIStateManager.loadState();\n    if (!savedState) return false;\n\n    const adjustedState = UIStateManager.adjustForCanvasSize(\n      savedState,\n      this.renderer.width,\n      this.renderer.height\n    );\n\n    // Use UIManager to import states\n    this.uiManager.importStates(new Map(adjustedState.cards.map(cs => [cs.id, cs])));\n\n    // Reposition toolbar relative to sprite cards if they exist\n    this.repositionToolbar();\n\n    console.log(' UI state restored');\n    return true;\n  }\n\n  /**\n   * Reposition toolbar to the right of sprite cards and bring to front\n   */\n  private repositionToolbar(): void {\n    const toolCard = this.uiManager.getCard(CARD_IDS.TOOL);\n    if (!toolCard) return;\n\n    // Find rightmost edge of any sprite card\n    const commanderBarHeight = calculateCommanderBarHeight();\n    let spriteCardRight = -1;\n    let spriteCardY = commanderBarHeight + px(1);\n\n    this.uiManager.getAllCards().forEach((card, id) => {\n      if (isSpriteCard(id)) {\n        const cardRight = card.container.x + card.getPixelWidth();\n        if (cardRight > spriteCardRight) {\n          spriteCardRight = cardRight;\n          spriteCardY = card.container.y;\n        }\n      }\n    });\n\n    // Only reposition if sprite cards exist\n    if (spriteCardRight > 0) {\n      const toolX = spriteCardRight + px(GRID.gap);\n      toolCard.container.position.set(toolX, spriteCardY);\n    }\n\n    // Always bring toolbar to front\n    this.scene.setChildIndex(toolCard.container, this.scene.children.length - 1);\n  }\n\n  /**\n   * Apply default layout positions to all cards\n   */\n  private applyDefaultLayout(): void {\n    // Delegate to LayoutManager\n    this.layoutManager.applyDefaultLayout(this.uiManager.getAllCards());\n\n    // Position sprite sheet instances\n    const spriteSheets = this.spriteSheetManager.getAll();\n    const infoCard = this.uiManager.getCard(CARD_IDS.INFO);\n\n    spriteSheets.forEach((instance, index) => {\n      if (instance.sheetCard) {\n        const card = instance.sheetCard.card;\n\n        // Set minimap size and scale\n        const desiredContentWidth = 50;\n        const desiredContentHeight = 50;\n\n        instance.sheetCard.controller.setScale(5);\n        instance.sheetCard.controller.selectCell(0, 0);\n        instance.sheetCard.controller.positionCell00AtTopLeft();\n\n        card.setContentSize(desiredContentWidth, desiredContentHeight);\n        instance.sheetCard.controller.render(card.getContentContainer());\n\n        // Position at bottom right\n        const defaultX = this.renderer.width - card.getPixelWidth();\n        const defaultY = infoCard\n          ? infoCard.container.y - card.getPixelHeight() - px(GRID.gap)\n          : this.renderer.height - card.getPixelHeight();\n\n        card.container.position.set(defaultX, defaultY);\n      }\n    });\n\n    // Center sprite cards and position toolbar to their right\n    const commanderBarHeight = calculateCommanderBarHeight();\n    let spriteCardRight = this.renderer.width / 2; // Default if no sprite card\n    // Position sprite cards below commander bar with 1 grid unit margin\n    let spriteCardY = commanderBarHeight + px(1);\n\n    this.uiManager.getAllCards().forEach((card, id) => {\n      if (isSpriteCard(id)) {\n        const x = (this.renderer.width - card.getPixelWidth()) / 2;\n        const y = spriteCardY;\n        card.container.position.set(x, y);\n        // Track rightmost edge of sprite card for toolbar positioning\n        spriteCardRight = x + card.getPixelWidth();\n      }\n    });\n\n    // Position toolbar to the right of sprite card\n    const toolCard = this.uiManager.getCard(CARD_IDS.TOOL);\n    if (toolCard) {\n      const toolX = spriteCardRight + px(GRID.gap);\n      toolCard.container.position.set(toolX, spriteCardY);\n      // Bring toolbar to front so it's above sprite cards\n      this.scene.setChildIndex(toolCard.container, this.scene.children.length - 1);\n    }\n\n    this.saveUIState();\n    console.log(' Default layout applied');\n  }\n\n  /**\n   * Updates the palette card to match the active sprite sheet\n   */\n  private updatePaletteForActiveSheet(): void {\n    const activeSheet = this.spriteSheetManager.getActive();\n    if (!activeSheet || !this.paletteCard) return;\n\n    this.currentPalette = activeSheet.sheetCard.controller.getConfig().palette;\n    this.paletteCard.setPalette(this.currentPalette);\n  }\n\n  /**\n   * Activate a sprite sheet instance and bring its cards to front\n   */\n  private activateInstance(instance: SpriteSheetInstance): void {\n    this.spriteSheetManager.setActive(instance.id);\n\n    // Bring cards to front\n    const sheetIndex = this.spriteSheetManager.getAll().indexOf(instance);\n    this.uiManager.bringGroupToFront([\n      getSpriteSheetCardId(sheetIndex),\n      getSpriteCardId(sheetIndex)\n    ]);\n  }\n\n  /**\n   * Creates a new sprite sheet and sprite card\n   */\n  private createNewSpriteSheet(type: SpriteSheetType, showGrid: boolean, savedState?: SpriteSheetState): void {\n    // Validate using SpriteSheetManager\n    if (!savedState) {\n      const validation = this.spriteSheetManager.validate(type);\n      if (!validation.valid) {\n        const dialog = createPixelDialog({\n          title: 'Cannot Create Sprite Sheet',\n          message: validation.message || 'Validation failed',\n          buttons: [{ label: 'OK', onClick: () => {} }],\n          renderer: this.renderer\n        });\n        this.scene.addChild(dialog.container);\n        return;\n      }\n    }\n\n    // Create instance via manager (with saved ID if available)\n    const instance = this.spriteSheetManager.create(type, savedState?.id);\n\n    // Function to make this sprite sheet active\n    const makeThisSheetActive = () => {\n      this.activateInstance(instance);\n    };\n\n    // Helper to create sprite card for a cell - delegates to factory\n    const createSpriteCardForCell = (cellX: number, cellY: number) => {\n      this.spriteCardFactory.createOrUpdate({\n        instance,\n        cellX,\n        cellY\n      });\n    };\n\n    // Create sprite sheet card\n    const spriteSheetResult = createSpriteSheetCard({\n      config: SPRITESHEET_CONFIGS[type],\n      renderer: this.renderer,\n      showGrid,\n      onCellHover: (cellX, cellY) => {\n        console.log(`Hovering cell: ${cellX}, ${cellY}`);\n      },\n      onCellClick: (cellX, cellY) => {\n        createSpriteCardForCell(cellX, cellY);\n        this.saveProjectState();\n      },\n      onFocus: makeThisSheetActive\n    });\n\n    this.scene.addChild(spriteSheetResult.card.container);\n    instance.sheetCard = spriteSheetResult;\n\n    // Restore pixel data if loading from saved state\n    if (savedState) {\n      spriteSheetResult.controller.setPixelData(savedState.pixels);\n      if (savedState.scale) {\n        spriteSheetResult.controller.setScale(savedState.scale);\n      }\n      spriteSheetResult.controller.render(spriteSheetResult.card.getContentContainer());\n    }\n\n    // Register with UIManager\n    const sheetIndex = this.spriteSheetManager.count() - 1;\n    this.registerCard(getSpriteSheetCardId(sheetIndex), spriteSheetResult.card);\n\n    // Set as active\n    this.spriteSheetManager.setActive(instance.id);\n\n    // Default zoom if new - use scale 2 to keep card reasonably sized\n    if (!savedState) {\n      spriteSheetResult.controller.setScale(2);\n      const dims = spriteSheetResult.controller.getScaledDimensions();\n      const newContentWidth = Math.ceil(dims.width / px(1));\n      const newContentHeight = Math.ceil(dims.height / px(1));\n      spriteSheetResult.card.setContentSize(newContentWidth, newContentHeight);\n      spriteSheetResult.controller.render(spriteSheetResult.card.getContentContainer());\n    }\n\n    // Create sprite card for initial cell\n    // Note: selectCell() triggers onCellClick which calls createSpriteCardForCell\n    const cellX = savedState?.selectedCellX ?? 0;\n    const cellY = savedState?.selectedCellY ?? 0;\n    spriteSheetResult.controller.selectCell(cellX, cellY);\n\n    // Note: centerCell() is called separately after layout is applied via centerActiveSheetCell()\n\n    // Restore sprite card scale if saved\n    if (savedState?.spriteCardScale && instance.spriteController) {\n      this.spriteCardFactory.restoreScale(instance, savedState.spriteCardScale);\n    }\n\n    // Show toolbar when sprite sheet is created\n    if (this.toolbarCard) {\n      this.toolbarCard.card.container.visible = true;\n    }\n\n    console.log(`Created ${type} sprite sheet`);\n    this.saveProjectState();\n  }\n\n  /**\n   * Center the selected cell in the active spritesheet's viewport\n   * Should be called after layout is applied so the content size is correct\n   */\n  private centerActiveSheetCell(): void {\n    const activeInstance = this.spriteSheetManager.getActive();\n    if (!activeInstance?.sheetCard) return;\n\n    const cell = activeInstance.sheetCard.controller.getSelectedCell();\n    const contentState = activeInstance.sheetCard.card.getContentSize();\n    const contentWidthPx = px(contentState.width);\n    const contentHeightPx = px(contentState.height);\n    activeInstance.sheetCard.controller.centerCell(cell.x, cell.y, contentWidthPx, contentHeightPx);\n  }\n\n  /**\n   * Update theme without losing state\n   */\n  updateTheme(): void {\n    this.renderer.background.color = getTheme().workspace;\n\n    // Refresh all cards\n    if (this.commanderBarCard) this.commanderBarCard.card.refresh();\n    if (this.paletteCard) this.paletteCard.card.refresh();\n    if (this.infoBarCard) this.infoBarCard.card.refresh();\n    if (this.toolbarCard) this.toolbarCard.card.refresh();\n\n    this.spriteSheetManager.getAll().forEach(instance => {\n      if (instance.sheetCard) instance.sheetCard.card.refresh();\n      if (instance.spriteCard) instance.spriteCard.card.refresh();\n    });\n\n    console.log(' Theme updated');\n  }\n\n  /**\n   * Update info bar with current tool and color\n   */\n  private updateInfoBar(): void {\n    if (!this.infoBarCard) return;\n\n    // Get tool display name (include shape type if shape tool)\n    let toolName = SpriteEditor.TOOL_DISPLAY_NAMES[this.currentTool];\n    if (this.currentTool === 'shape') {\n      const shapeNames: Record<ShapeType, string> = {\n        'circle': 'Circle',\n        'circle-filled': 'Filled Circle',\n        'square': 'Rectangle',\n        'square-filled': 'Filled Rect'\n      };\n      toolName = shapeNames[this.currentShapeType];\n    }\n\n    // Get color hex value\n    const colorValue = this.currentPalette[this.selectedColorIndex];\n    const colorHex = `#${colorValue.toString(16).padStart(6, '0').toUpperCase()}`;\n\n    this.infoBarCard.updateSections([\n      { label: 'Tool:', value: toolName },\n      { label: 'Color:', value: colorHex }\n    ]);\n  }\n\n  /**\n   * Update all sprite card titles with current tool\n   */\n  private updateSpriteCardTitles(): void {\n    const instances = this.spriteSheetManager.getAll();\n    for (const instance of instances) {\n      if (instance.spriteCard) {\n        instance.spriteCard.updateTitle(this.currentTool, this.currentShapeType);\n      }\n    }\n  }\n\n  /**\n   * Setup keyboard handler for undo/redo and clipboard operations\n   */\n  private setupKeyboardHandler(): void {\n    this.keyboardHandler = (e: KeyboardEvent) => {\n      // Check for Ctrl+key combinations\n      if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n        if (e.key === 'z' || e.key === 'Z') {\n          e.preventDefault();\n          if (e.shiftKey) {\n            this.handleRedo();\n          } else {\n            this.handleUndo();\n          }\n        } else if (e.key === 'y' || e.key === 'Y') {\n          e.preventDefault();\n          this.handleRedo();\n        } else if (e.key === 'c' || e.key === 'C') {\n          e.preventDefault();\n          this.handleCopy();\n        } else if (e.key === 'v' || e.key === 'V') {\n          e.preventDefault();\n          this.handlePaste();\n        } else if (e.key === 'x' || e.key === 'X') {\n          e.preventDefault();\n          this.handleCut();\n        }\n      }\n\n      // Delete/Backspace clears selection\n      if (e.key === 'Delete' || e.key === 'Backspace') {\n        const activeInstance = this.spriteSheetManager.getActive();\n        if (activeInstance?.spriteCard) {\n          const selection = activeInstance.spriteCard.getSelection();\n          if (selection) {\n            e.preventDefault();\n            this.handleClearSelection();\n          }\n        }\n      }\n\n      // Arrow keys move selection\n      if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {\n        const activeInstance = this.spriteSheetManager.getActive();\n        if (activeInstance?.spriteCard) {\n          const selection = activeInstance.spriteCard.getSelection();\n          if (selection) {\n            e.preventDefault();\n            const dx = e.key === 'ArrowLeft' ? -1 : e.key === 'ArrowRight' ? 1 : 0;\n            const dy = e.key === 'ArrowUp' ? -1 : e.key === 'ArrowDown' ? 1 : 0;\n            this.handleMoveSelection(dx, dy);\n          }\n        }\n      }\n    };\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('keydown', this.keyboardHandler);\n    }\n  }\n\n  /**\n   * Setup beforeunload handler to ensure state is saved when page closes\n   */\n  private setupBeforeUnloadHandler(): void {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('beforeunload', () => {\n        // Force immediate save of UI and project state\n        this.saveUIStateImmediate();\n        this.saveProjectStateImmediate();\n      });\n    }\n  }\n\n  /**\n   * Handle undo operation\n   */\n  private handleUndo(): void {\n    const operation = this.undoManager.undo();\n    if (!operation) return;\n\n    // Find the sprite sheet instance\n    const instance = this.spriteSheetManager.getAll().find(i => i.id === operation.spriteSheetId);\n    if (!instance) return;\n\n    // Apply the undo - restore old colors\n    for (const change of operation.changes) {\n      // Convert local sprite coordinates to global sheet coordinates\n      const cell = instance.spriteController?.getCell();\n      if (cell) {\n        const globalX = cell.x * 8 + change.x;\n        const globalY = cell.y * 8 + change.y;\n        instance.sheetCard.controller.setPixel(globalX, globalY, change.oldColorIndex);\n      }\n    }\n\n    // Re-render\n    this.refreshInstance(instance);\n    this.saveProjectState();\n  }\n\n  /**\n   * Handle redo operation\n   */\n  private handleRedo(): void {\n    const operation = this.undoManager.redo();\n    if (!operation) return;\n\n    // Find the sprite sheet instance\n    const instance = this.spriteSheetManager.getAll().find(i => i.id === operation.spriteSheetId);\n    if (!instance) return;\n\n    // Apply the redo - apply new colors\n    for (const change of operation.changes) {\n      // Convert local sprite coordinates to global sheet coordinates\n      const cell = instance.spriteController?.getCell();\n      if (cell) {\n        const globalX = cell.x * 8 + change.x;\n        const globalY = cell.y * 8 + change.y;\n        instance.sheetCard.controller.setPixel(globalX, globalY, change.newColorIndex);\n      }\n    }\n\n    // Re-render\n    this.refreshInstance(instance);\n    this.saveProjectState();\n  }\n\n  /**\n   * Refresh rendering for an instance\n   */\n  private refreshInstance(instance: SpriteSheetInstance): void {\n    if (instance.spriteCard && instance.spriteController) {\n      instance.spriteCard.redraw();\n    }\n    instance.sheetCard.controller.render(instance.sheetCard.card.getContentContainer());\n  }\n\n  /**\n   * Get normalized selection bounds (minX, minY, maxX, maxY)\n   */\n  private getNormalizedSelection(selection: Selection): { minX: number; minY: number; maxX: number; maxY: number } {\n    return {\n      minX: Math.min(selection.x1, selection.x2),\n      minY: Math.min(selection.y1, selection.y2),\n      maxX: Math.max(selection.x1, selection.x2),\n      maxY: Math.max(selection.y1, selection.y2)\n    };\n  }\n\n  /**\n   * Handle copy operation - copy selected pixels to clipboard\n   */\n  private handleCopy(): void {\n    const activeInstance = this.spriteSheetManager.getActive();\n    if (!activeInstance?.spriteCard || !activeInstance.spriteController) return;\n\n    const selection = activeInstance.spriteCard.getSelection();\n    if (!selection) return;\n\n    const { minX, minY, maxX, maxY } = this.getNormalizedSelection(selection);\n    const width = maxX - minX + 1;\n    const height = maxY - minY + 1;\n\n    // Copy pixels from selection\n    const pixels: number[][] = [];\n    for (let y = 0; y < height; y++) {\n      const row: number[] = [];\n      for (let x = 0; x < width; x++) {\n        row.push(activeInstance.spriteController.getPixel(minX + x, minY + y));\n      }\n      pixels.push(row);\n    }\n\n    this.clipboard = { width, height, pixels };\n    console.log(`Copied ${width}x${height} pixels to clipboard`);\n  }\n\n  /**\n   * Handle paste operation - paste clipboard at selection or origin\n   */\n  private handlePaste(): void {\n    if (!this.clipboard) return;\n\n    const activeInstance = this.spriteSheetManager.getActive();\n    if (!activeInstance?.spriteCard || !activeInstance.spriteController) return;\n\n    const selection = activeInstance.spriteCard.getSelection();\n\n    // Paste at selection top-left, or at origin if no selection\n    const startX = selection ? Math.min(selection.x1, selection.x2) : 0;\n    const startY = selection ? Math.min(selection.y1, selection.y2) : 0;\n\n    // Begin undo stroke\n    this.undoManager.beginStroke(activeInstance.id);\n\n    // Paste pixels (index 0 is transparent - don't overwrite destination)\n    for (let y = 0; y < this.clipboard.height; y++) {\n      for (let x = 0; x < this.clipboard.width; x++) {\n        const destX = startX + x;\n        const destY = startY + y;\n\n        // Skip if out of bounds\n        if (destX < 0 || destX >= 8 || destY < 0 || destY >= 8) continue;\n\n        const newColorIndex = this.clipboard.pixels[y][x];\n\n        // Skip transparent pixels (index 0) - they don't overwrite\n        if (newColorIndex === 0) continue;\n\n        const oldColorIndex = activeInstance.spriteController.getPixel(destX, destY);\n\n        if (oldColorIndex !== newColorIndex) {\n          this.undoManager.recordPixelChange(destX, destY, oldColorIndex, newColorIndex);\n          activeInstance.spriteController.setPixel(destX, destY, newColorIndex);\n        }\n      }\n    }\n\n    this.undoManager.endStroke();\n    this.refreshInstance(activeInstance);\n    this.saveProjectState();\n    console.log(`Pasted ${this.clipboard.width}x${this.clipboard.height} pixels at (${startX}, ${startY})`);\n  }\n\n  /**\n   * Handle cut operation - copy then clear selection\n   */\n  private handleCut(): void {\n    this.handleCopy();\n    this.handleClearSelection();\n  }\n\n  /**\n   * Handle clear selection - fill selection with transparent (color 0)\n   */\n  private handleClearSelection(): void {\n    const activeInstance = this.spriteSheetManager.getActive();\n    if (!activeInstance?.spriteCard || !activeInstance.spriteController) return;\n\n    const selection = activeInstance.spriteCard.getSelection();\n    if (!selection) return;\n\n    const { minX, minY, maxX, maxY } = this.getNormalizedSelection(selection);\n\n    // Begin undo stroke\n    this.undoManager.beginStroke(activeInstance.id);\n\n    // Clear pixels (set to color 0 = transparent)\n    for (let y = minY; y <= maxY; y++) {\n      for (let x = minX; x <= maxX; x++) {\n        const oldColorIndex = activeInstance.spriteController.getPixel(x, y);\n        if (oldColorIndex !== 0) {\n          this.undoManager.recordPixelChange(x, y, oldColorIndex, 0);\n          activeInstance.spriteController.setPixel(x, y, 0);\n        }\n      }\n    }\n\n    this.undoManager.endStroke();\n    this.refreshInstance(activeInstance);\n    this.saveProjectState();\n  }\n\n  /**\n   * Helper to check if coordinates are within sprite bounds\n   */\n  private isInBounds(x: number, y: number): boolean {\n    return x >= 0 && x < 8 && y >= 0 && y < 8;\n  }\n\n  /**\n   * Handle move selection - move selected pixels by dx, dy\n   * Selection can move freely; pixels that move off-screen are clipped\n   */\n  private handleMoveSelection(dx: number, dy: number): void {\n    const activeInstance = this.spriteSheetManager.getActive();\n    if (!activeInstance?.spriteCard || !activeInstance.spriteController) return;\n\n    const selection = activeInstance.spriteCard.getSelection();\n    if (!selection) return;\n\n    const { minX, minY, maxX, maxY } = this.getNormalizedSelection(selection);\n    const width = maxX - minX + 1;\n    const height = maxY - minY + 1;\n\n    // Calculate new selection position (can be outside bounds)\n    const newMinX = minX + dx;\n    const newMinY = minY + dy;\n    const newMaxX = maxX + dx;\n    const newMaxY = maxY + dy;\n\n    // Copy current selection pixels (only from valid coordinates)\n    const pixels: (number | null)[][] = [];\n    for (let y = 0; y < height; y++) {\n      const row: (number | null)[] = [];\n      for (let x = 0; x < width; x++) {\n        const srcX = minX + x;\n        const srcY = minY + y;\n        if (this.isInBounds(srcX, srcY)) {\n          row.push(activeInstance.spriteController.getPixel(srcX, srcY));\n        } else {\n          row.push(null); // Out of bounds - no pixel data\n        }\n      }\n      pixels.push(row);\n    }\n\n    // Begin undo stroke\n    this.undoManager.beginStroke(activeInstance.id);\n\n    // Clear old position (only valid coordinates, and only if not going to be overwritten by new position)\n    for (let y = minY; y <= maxY; y++) {\n      for (let x = minX; x <= maxX; x++) {\n        if (!this.isInBounds(x, y)) continue;\n\n        // Check if this position (x, y) will be overwritten by a pixel from the moved selection\n        // A pixel lands at (x, y) if (x, y) is within the new selection bounds\n        const willBeOverwritten = x >= newMinX && x <= newMaxX && y >= newMinY && y <= newMaxY;\n        if (!willBeOverwritten) {\n          const oldColorIndex = activeInstance.spriteController.getPixel(x, y);\n          if (oldColorIndex !== 0) {\n            this.undoManager.recordPixelChange(x, y, oldColorIndex, 0);\n            activeInstance.spriteController.setPixel(x, y, 0);\n          }\n        }\n      }\n    }\n\n    // Draw at new position (only valid coordinates)\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        const destX = newMinX + x;\n        const destY = newMinY + y;\n        const pixelData = pixels[y][x];\n\n        // Skip if destination is out of bounds or source had no data\n        if (!this.isInBounds(destX, destY) || pixelData === null) continue;\n\n        const newColorIndex = pixelData;\n        const oldColorIndex = activeInstance.spriteController.getPixel(destX, destY);\n\n        if (oldColorIndex !== newColorIndex) {\n          this.undoManager.recordPixelChange(destX, destY, oldColorIndex, newColorIndex);\n          activeInstance.spriteController.setPixel(destX, destY, newColorIndex);\n        }\n      }\n    }\n\n    this.undoManager.endStroke();\n    this.refreshInstance(activeInstance);\n    this.saveProjectState();\n\n    // Update selection to follow the moved area (selection can be outside bounds)\n    activeInstance.spriteCard.setSelection({\n      x1: newMinX,\n      y1: newMinY,\n      x2: newMaxX,\n      y2: newMaxY\n    });\n  }\n\n  /**\n   * Recreate all UI with current theme\n   */\n  async recreateUI(): Promise<void> {\n    this.scene.removeChildren();\n    this.renderer.background.color = getTheme().workspace;\n\n    // Create commander bar\n    this.commanderBarCard = createCommanderBarCard({\n      x: px(GRID.margin),\n      y: px(GRID.margin),\n      renderer: this.renderer,\n      scene: this.scene,\n      callbacks: {\n        onNew: () => this.handleNew(),\n        onSave: () => this.handleSave(),\n        onLoad: () => this.handleLoad(),\n        onExport: () => this.handleExport(),\n        onApplyLayout: () => this.applyDefaultLayout(),\n        onSaveLayoutSlot: (slot) => this.handleSaveLayoutSlot(slot),\n        onLoadLayoutSlot: (slot) => this.handleLoadLayoutSlot(slot),\n        hasLayoutSlot: (slot) => LayoutStateManager.hasLayoutSlot(slot),\n        onThemeChange: () => this.updateTheme(),\n        onScaleChange: (scale) => this.handleScaleChange(scale)\n      }\n    });\n    this.scene.addChild(this.commanderBarCard.card.container);\n    this.registerCard(CARD_IDS.COMMANDER, this.commanderBarCard.card);\n\n    // Create palette card\n    const commanderBarHeight = calculateCommanderBarHeight();\n    const topOffset = px(GRID.margin) + commanderBarHeight + px(GRID.gap * 2);\n\n    this.paletteCard = createPaletteCard({\n      x: px(GRID.margin),\n      y: topOffset,\n      renderer: this.renderer,\n      palette: this.currentPalette,\n      selectedColorIndex: this.selectedColorIndex,\n      onColorSelect: (colorIndex) => {\n        this.selectedColorIndex = colorIndex;\n        this.updateInfoBar();\n      }\n    });\n    this.scene.addChild(this.paletteCard.card.container);\n    this.registerCard(CARD_IDS.PALETTE, this.paletteCard.card);\n\n    // Restore tool selection from project state before creating toolbar\n    if (this.projectState.selectedTool) {\n      this.currentTool = this.projectState.selectedTool;\n    }\n    if (this.projectState.selectedShape) {\n      this.currentShapeType = this.projectState.selectedShape;\n    }\n\n    // Create toolbar card (default position - will be repositioned in applyDefaultLayout)\n    this.toolbarCard = createToolbarCard({\n      x: this.renderer.width / 2 + 200, // Temporary - repositioned by layout\n      y: topOffset,\n      renderer: this.renderer,\n      selectedTool: this.currentTool,\n      selectedShape: this.currentShapeType,\n      onToolSelect: (tool, shapeType) => {\n        this.currentTool = tool;\n        if (shapeType) {\n          this.currentShapeType = shapeType;\n        }\n        this.updateInfoBar();\n        this.updateSpriteCardTitles(); // Update all sprite card titles with new tool\n        this.saveProjectState(); // Persist tool selection\n        console.log(`Tool selected: ${tool}${shapeType ? ` (${shapeType})` : ''}`);\n      }\n    });\n    this.scene.addChild(this.toolbarCard.card.container);\n    this.registerCard(CARD_IDS.TOOL, this.toolbarCard.card);\n\n    // Hide toolbar by default - will be shown when a sprite sheet is created\n    this.toolbarCard.card.container.visible = false;\n\n    // Create info bar using LayoutManager\n    const barHeight = 8;\n    const cardTotalHeight = this.layoutManager.calculateCardHeightFromContent(barHeight);\n    const infoY = this.renderer.height - cardTotalHeight;\n    const infoBarWidth = this.layoutManager.calculateFullWidthContentSize(this.renderer.width);\n\n    this.infoBarCard = createInfoBarCard({\n      x: 0,\n      y: infoY,\n      renderer: this.renderer,\n      width: infoBarWidth\n    });\n    this.scene.addChild(this.infoBarCard.card.container);\n    this.registerCard(CARD_IDS.INFO, this.infoBarCard.card);\n\n    // Load project state\n    this.loadProjectState();\n\n    // Restore UI state, or apply default layout if no saved state\n    const stateRestored = this.restoreUIState();\n    if (!stateRestored) {\n      this.applyDefaultLayout();\n    }\n\n    // Center the selected cell after layout is applied\n    this.centerActiveSheetCell();\n\n    // Update info bar with initial state\n    this.updateInfoBar();\n  }\n\n  /**\n   * Save current project state (debounced)\n   */\n  private saveProjectState(): void {\n    this.hasUnsavedChanges = true;\n\n    if (this.projectSaveTimer) {\n      clearTimeout(this.projectSaveTimer);\n    }\n\n    this.projectSaveTimer = window.setTimeout(() => {\n      this.projectState.spriteSheets = this.spriteSheetManager.getAll().map(instance => {\n        const cell = instance.sheetCard.controller.getSelectedCell();\n        const state: SpriteSheetState = {\n          id: instance.id,\n          type: instance.sheetCard.controller.getConfig().type,\n          showGrid: false,\n          pixels: instance.sheetCard.controller.getPixelData(),\n          selectedCellX: cell.x,\n          selectedCellY: cell.y,\n          scale: instance.sheetCard.controller.getScale(),\n          spriteCardScale: instance.spriteController?.getScale()\n        };\n        return state;\n      });\n\n      const activeSheet = this.spriteSheetManager.getActive();\n      this.projectState.activeSpriteSheetId = activeSheet?.id ?? null;\n      this.projectState.selectedColorIndex = this.selectedColorIndex;\n      this.projectState.selectedTool = this.currentTool;\n      this.projectState.selectedShape = this.currentShapeType;\n\n      const saveResult = ProjectStateManager.saveProject(this.projectState);\n      if (!saveResult.success) {\n        console.warn('Auto-save failed:', saveResult.error);\n      }\n    }, PERFORMANCE_CONSTANTS.AUTO_SAVE_DEBOUNCE_MS);\n  }\n\n  /**\n   * Save project state immediately (no debounce) - used for beforeunload\n   */\n  private saveProjectStateImmediate(): void {\n    this.projectState.spriteSheets = this.spriteSheetManager.getAll().map(instance => {\n      const cell = instance.sheetCard.controller.getSelectedCell();\n      const state: SpriteSheetState = {\n        id: instance.id,\n        type: instance.sheetCard.controller.getConfig().type,\n        showGrid: false,\n        pixels: instance.sheetCard.controller.getPixelData(),\n        selectedCellX: cell.x,\n        selectedCellY: cell.y,\n        scale: instance.sheetCard.controller.getScale(),\n        spriteCardScale: instance.spriteController?.getScale()\n      };\n      return state;\n    });\n\n    const activeSheet = this.spriteSheetManager.getActive();\n    this.projectState.activeSpriteSheetId = activeSheet?.id ?? null;\n    this.projectState.selectedColorIndex = this.selectedColorIndex;\n    this.projectState.selectedTool = this.currentTool;\n    this.projectState.selectedShape = this.currentShapeType;\n\n    const saveResult = ProjectStateManager.saveProject(this.projectState);\n    if (!saveResult.success) {\n      console.warn('Immediate save failed:', saveResult.error);\n    }\n  }\n\n  /**\n   * Load project state and recreate sprite sheets\n   */\n  private loadProjectState(): void {\n    if (this.projectState.spriteSheets.length === 0) {\n      return;\n    }\n\n    this.selectedColorIndex = this.projectState.selectedColorIndex ?? 0;\n\n    // Track loaded IDs to prevent duplicates from corrupted state\n    const loadedIds = new Set<string>();\n\n    this.projectState.spriteSheets.forEach(sheetState => {\n      // Skip if this ID was already loaded (prevents duplicates from corrupted state)\n      if (loadedIds.has(sheetState.id)) {\n        console.warn(`Skipping duplicate sprite sheet ID: ${sheetState.id}`);\n        return;\n      }\n      loadedIds.add(sheetState.id);\n\n      // Skip if instance already exists in the manager\n      if (this.spriteSheetManager.has(sheetState.id)) {\n        console.warn(`Sprite sheet instance already exists: ${sheetState.id}`);\n        return;\n      }\n\n      this.createNewSpriteSheet(sheetState.type, sheetState.showGrid, sheetState);\n    });\n  }\n\n  /**\n   * Handle \"New\" button\n   */\n  private async handleNew(): Promise<void> {\n    if (this.spriteSheetManager.count() > 0) {\n      const dialog = createPixelDialog({\n        title: 'Save Current Project?',\n        message: 'You have unsaved work. Save before creating new project?',\n        buttons: [\n          {\n            label: 'Save',\n            onClick: () => {\n              this.handleSave();\n              setTimeout(() => this.createNewProject(), PERFORMANCE_CONSTANTS.DIALOG_ACTION_DELAY_MS);\n            }\n          },\n          {\n            label: 'Discard',\n            onClick: () => {\n              this.createNewProject();\n            }\n          },\n          {\n            label: 'Cancel',\n            onClick: () => {}\n          }\n        ],\n        renderer: this.renderer\n      });\n      this.scene.addChild(dialog.container);\n    } else {\n      this.createNewProject();\n    }\n  }\n\n  /**\n   * Create a new project\n   */\n  private createNewProject(): void {\n    // Cancel any pending save timers to prevent race conditions\n    if (this.projectSaveTimer) {\n      clearTimeout(this.projectSaveTimer);\n      this.projectSaveTimer = null;\n    }\n\n    // Clear using managers - destroy controllers and unregister cards\n    this.spriteSheetManager.getAll().forEach((instance, index) => {\n      // Remove sprite card FIRST (before factory.remove sets it to null)\n      if (instance.spriteCard) {\n        this.scene.removeChild(instance.spriteCard.card.container);\n        this.uiManager.unregisterCard(getSpriteCardId(index));\n      }\n\n      // Clean up zoom handlers via factory (this sets spriteCard to null)\n      this.spriteCardFactory.remove(instance);\n\n      // Remove spritesheet card\n      if (instance.sheetCard) {\n        instance.sheetCard.controller.destroy();\n        this.scene.removeChild(instance.sheetCard.card.container);\n        this.uiManager.unregisterCard(getSpriteSheetCardId(index));\n      }\n    });\n\n    this.spriteSheetManager.clear();\n    this.projectState = ProjectStateManager.createEmptyProject();\n\n    // Clear localStorage immediately to prevent stale state on reload\n    ProjectStateManager.saveProject(this.projectState);\n    this.hasUnsavedChanges = false;\n\n    // Show sprite sheet type dialog\n    this.currentDialog = createPixelDialog({\n      title: 'New Sprite Sheet',\n      message: 'Choose sprite sheet type:',\n      checkboxes: [\n        {\n          name: 'showGrid',\n          label: 'Show 8x8 Grid',\n          defaultValue: true\n        }\n      ],\n      buttons: [\n        {\n          label: 'PICO-8',\n          onClick: (checkboxStates) => {\n            this.currentDialog = null;\n            this.createNewSpriteSheet('PICO-8', checkboxStates?.showGrid ?? false);\n            // Always apply default layout for new projects\n            this.applyDefaultLayout();\n            this.centerActiveSheetCell();\n          }\n        },\n        {\n          label: 'TIC-80',\n          onClick: (checkboxStates) => {\n            this.currentDialog = null;\n            this.createNewSpriteSheet('TIC-80', checkboxStates?.showGrid ?? false);\n            // Always apply default layout for new projects\n            this.applyDefaultLayout();\n            this.centerActiveSheetCell();\n          }\n        }\n      ],\n      renderer: this.renderer\n    });\n    this.scene.addChild(this.currentDialog.container);\n  }\n\n  /**\n   * Handle \"Save\" button - uses FileOperationsManager\n   */\n  private handleSave(): void {\n    if (this.projectSaveTimer) {\n      clearTimeout(this.projectSaveTimer);\n    }\n\n    // Update project state\n    this.projectState.spriteSheets = this.spriteSheetManager.getAll().map(instance => {\n      const cell = instance.sheetCard.controller.getSelectedCell();\n      return {\n        id: instance.id,\n        type: instance.sheetCard.controller.getConfig().type,\n        showGrid: false,\n        pixels: instance.sheetCard.controller.getPixelData(),\n        selectedCellX: cell.x,\n        selectedCellY: cell.y,\n        scale: instance.sheetCard.controller.getScale(),\n        spriteCardScale: instance.spriteController?.getScale()\n      };\n    });\n\n    const activeSheet = this.spriteSheetManager.getActive();\n    this.projectState.activeSpriteSheetId = activeSheet?.id ?? null;\n    this.projectState.selectedColorIndex = this.selectedColorIndex;\n\n    // Delegate to FileOperationsManager\n    this.fileOperationsManager.saveProject(this.projectState);\n    this.hasUnsavedChanges = false;\n  }\n\n  /**\n   * Handle \"Load\" button - uses FileOperationsManager\n   */\n  private async handleLoad(): Promise<void> {\n    if (this.spriteSheetManager.count() > 0 && this.hasUnsavedChanges) {\n      const dialog = createPixelDialog({\n        title: 'Unsaved Changes',\n        message: 'Loading will replace current project. Continue?',\n        buttons: [\n          {\n            label: 'Continue',\n            onClick: async () => {\n              await this.loadProjectFile();\n            }\n          },\n          {\n            label: 'Cancel',\n            onClick: () => {}\n          }\n        ],\n        renderer: this.renderer\n      });\n      this.scene.addChild(dialog.container);\n    } else {\n      await this.loadProjectFile();\n    }\n  }\n\n  /**\n   * Load a project file\n   */\n  private async loadProjectFile(): Promise<void> {\n    // Delegate to FileOperationsManager\n    const loadedState = await this.fileOperationsManager.loadProject();\n    if (!loadedState) {\n      console.log('No file selected or failed to load');\n      return;\n    }\n\n    // Cancel any pending save timers\n    if (this.projectSaveTimer) {\n      clearTimeout(this.projectSaveTimer);\n      this.projectSaveTimer = null;\n    }\n\n    // Clear existing work - destroy controllers, unregister cards, clean up handlers\n    this.spriteSheetManager.getAll().forEach((instance, index) => {\n      // Remove sprite card FIRST (before factory.remove sets it to null)\n      if (instance.spriteCard) {\n        this.scene.removeChild(instance.spriteCard.card.container);\n        this.uiManager.unregisterCard(getSpriteCardId(index));\n      }\n\n      // Clean up zoom handlers via factory (this sets spriteCard to null)\n      this.spriteCardFactory.remove(instance);\n\n      // Remove spritesheet card\n      if (instance.sheetCard) {\n        instance.sheetCard.controller.destroy();\n        this.scene.removeChild(instance.sheetCard.card.container);\n        this.uiManager.unregisterCard(getSpriteSheetCardId(index));\n      }\n    });\n\n    this.spriteSheetManager.clear();\n    this.projectState = loadedState;\n    this.hasUnsavedChanges = false;\n\n    const saveResult = ProjectStateManager.saveProject(this.projectState);\n    if (!saveResult.success) {\n      console.warn('Failed to save loaded project to localStorage:', saveResult.error);\n    }\n    this.loadProjectState();\n\n    // Center the selected cell after loading\n    this.centerActiveSheetCell();\n  }\n\n  /**\n   * Handle \"Export\" button - uses FileOperationsManager\n   */\n  private handleExport(): void {\n    const activeSheet = this.spriteSheetManager.getActive();\n    if (!activeSheet) {\n      const dialog = createPixelDialog({\n        title: 'No Sprite Sheet',\n        message: 'Please create a sprite sheet first.',\n        buttons: [{ label: 'OK', onClick: () => {} }],\n        renderer: this.renderer\n      });\n      this.scene.addChild(dialog.container);\n      return;\n    }\n\n    // Delegate to FileOperationsManager\n    this.fileOperationsManager.exportPNG(activeSheet.sheetCard.controller);\n  }\n\n  /**\n   * Handle saving layout to slot\n   */\n  private handleSaveLayoutSlot(slot: 'A' | 'B' | 'C'): void {\n    const layoutState: LayoutSlotState = { cards: [] };\n\n    this.uiManager.getAllCards().forEach((card, id) => {\n      const contentSize = card.getContentSize();\n      layoutState.cards.push({\n        id,\n        x: card.container.x,\n        y: card.container.y,\n        width: contentSize.width,\n        height: contentSize.height\n      });\n    });\n\n    LayoutStateManager.saveLayoutSlot(slot, layoutState);\n    console.log(`Layout saved to slot ${slot}`);\n  }\n\n  /**\n   * Handle loading layout from slot\n   */\n  private handleLoadLayoutSlot(slot: 'A' | 'B' | 'C'): void {\n    const layoutState = LayoutStateManager.loadLayoutSlot(slot);\n    if (!layoutState) {\n      console.warn(`No layout found in slot ${slot}`);\n      return;\n    }\n\n    layoutState.cards.forEach(cardLayout => {\n      const card = this.uiManager.getCard(cardLayout.id);\n      if (card) {\n        card.container.position.set(cardLayout.x, cardLayout.y);\n        card.setContentSize(cardLayout.width, cardLayout.height);\n      }\n    });\n\n    console.log(`Layout loaded from slot ${slot}`);\n  }\n\n  /**\n   * Handle scale change (temporary)\n   */\n  private handleScaleChange(scale: number): void {\n    const dialog = createPixelDialog({\n      title: 'Scale Change',\n      message: `Changing scale to ${scale}x requires reloading the page.`,\n      buttons: [\n        {\n          label: 'Reload',\n          onClick: () => {\n            localStorage.setItem('temp-grid-scale', scale.toString());\n            window.location.reload();\n          }\n        },\n        {\n          label: 'Cancel',\n          onClick: () => {}\n        }\n      ],\n      renderer: this.renderer\n    });\n    this.scene.addChild(dialog.container);\n  }\n\n  // \n  // PUBLIC API - Programmatic access to editor actions\n  // \n\n  /**\n   * Select a drawing tool\n   * @param tool - The tool to select: 'pencil', 'eraser', 'fill', 'selection', 'shape'\n   */\n  selectTool(tool: MainToolType): void {\n    this.currentTool = tool;\n    this.toolbarCard?.setSelectedTool(tool);\n    this.updateInfoBar();\n    this.updateSpriteCardTitles();\n    this.saveProjectState();\n  }\n\n  /**\n   * Select a shape type (used when shape tool is active)\n   * @param shape - The shape to select: 'circle', 'circle-filled', 'square', 'square-filled'\n   */\n  selectShape(shape: ShapeType): void {\n    this.currentShapeType = shape;\n    this.toolbarCard?.setSelectedShape(shape);\n    this.updateInfoBar();\n    this.updateSpriteCardTitles();\n    this.saveProjectState();\n  }\n\n  /**\n   * Select a color from the palette by index\n   * @param index - Palette color index (0-15 for PICO-8)\n   */\n  selectColor(index: number): void {\n    if (index >= 0 && index < this.currentPalette.length) {\n      this.selectedColorIndex = index;\n      this.paletteCard?.setSelectedColorIndex(index);\n      this.updateInfoBar();\n    }\n  }\n\n  /**\n   * Undo the last drawing operation\n   */\n  undo(): void {\n    this.handleUndo();\n  }\n\n  /**\n   * Redo the last undone operation\n   */\n  redo(): void {\n    this.handleRedo();\n  }\n\n  /**\n   * Copy the current selection to clipboard\n   */\n  copy(): void {\n    this.handleCopy();\n  }\n\n  /**\n   * Paste clipboard contents at selection or origin\n   */\n  paste(): void {\n    this.handlePaste();\n  }\n\n  /**\n   * Cut the current selection (copy + clear)\n   */\n  cut(): void {\n    this.handleCut();\n  }\n\n  /**\n   * Clear the current selection (fill with transparent)\n   */\n  clearSelection(): void {\n    this.handleClearSelection();\n  }\n\n  /**\n   * Move the current selection by offset\n   * @param dx - Horizontal offset in pixels\n   * @param dy - Vertical offset in pixels\n   */\n  moveSelection(dx: number, dy: number): void {\n    this.handleMoveSelection(dx, dy);\n  }\n\n  /**\n   * Click the \"New\" button - shows the new project dialog\n   */\n  clickNew(): void {\n    this.handleNew();\n  }\n\n  /**\n   * Click the \"PICO-8\" button in the new project dialog\n   */\n  clickPico8(): boolean {\n    if (!this.currentDialog) return false;\n    return this.currentDialog.clickButton('PICO-8');\n  }\n\n  /**\n   * Click the \"TIC-80\" button in the new project dialog\n   */\n  clickTic80(): boolean {\n    if (!this.currentDialog) return false;\n    return this.currentDialog.clickButton('TIC-80');\n  }\n\n  /**\n   * Click the \"Save\" button\n   */\n  clickSave(): void {\n    this.handleSave();\n  }\n\n  /**\n   * Click the \"Load\" button (opens file picker)\n   */\n  async clickLoad(): Promise<void> {\n    await this.handleLoad();\n  }\n\n  /**\n   * Click the \"Export\" button\n   */\n  clickExport(): void {\n    this.handleExport();\n  }\n\n  /**\n   * Click the \"Layout\" button\n   */\n  clickLayout(): void {\n    this.applyDefaultLayout();\n  }\n\n  /**\n   * Update the editor theme\n   */\n  refreshTheme(): void {\n    this.updateTheme();\n  }\n\n  // \n  // State Getters\n  // \n\n  /**\n   * Get the currently selected tool\n   */\n  getCurrentTool(): MainToolType {\n    return this.currentTool;\n  }\n\n  /**\n   * Get the currently selected shape type\n   */\n  getCurrentShape(): ShapeType {\n    return this.currentShapeType;\n  }\n\n  /**\n   * Get the selected color palette index\n   */\n  getSelectedColorIndex(): number {\n    return this.selectedColorIndex;\n  }\n\n  /**\n   * Get the selected color as hex value\n   */\n  getSelectedColorHex(): number {\n    return this.currentPalette[this.selectedColorIndex] ?? 0xFFFFFF;\n  }\n\n  /**\n   * Get the current palette\n   */\n  getPalette(): number[] {\n    return [...this.currentPalette];\n  }\n\n  /**\n   * Check if there are unsaved changes\n   */\n  hasChanges(): boolean {\n    return this.hasUnsavedChanges;\n  }\n\n  /**\n   * Get the number of sprite sheets\n   */\n  getSpriteSheetCount(): number {\n    return this.spriteSheetManager.count();\n  }\n\n  /**\n   * Cleanup resources\n   */\n  destroy(): void {\n    if (this.uiStateSaveTimer) {\n      clearTimeout(this.uiStateSaveTimer);\n    }\n    if (this.projectSaveTimer) {\n      clearTimeout(this.projectSaveTimer);\n    }\n\n    // Clean up keyboard handler\n    if (this.keyboardHandler && typeof window !== 'undefined') {\n      window.removeEventListener('keydown', this.keyboardHandler);\n      this.keyboardHandler = null;\n    }\n\n    // Destroy all sprite sheet controllers to prevent memory leaks\n    this.spriteSheetManager.getAll().forEach(instance => {\n      if (instance.sheetCard) {\n        instance.sheetCard.controller.destroy();\n      }\n    });\n\n    // Clean up factory\n    this.spriteCardFactory.destroy();\n\n    this.uiManager.clear();\n    this.spriteSheetManager.clear();\n  }\n}\n","/**\n * Texture and grid utilities\n */\nimport * as PIXI from 'pixi.js';\n\n/**\n * Creates a tiled checkerboard grid texture for use as a background\n * @param gridSize Size of each square in the checkerboard pattern\n * @param darkColor Color of the dark squares (hex number)\n * @param lightColor Color of the light squares (hex number)\n * @returns PIXI.Texture with nearest neighbor scaling enabled\n */\nexport function createCheckerboardTexture(\n  gridSize: number = 16,\n  darkColor: number = 0x2a2a3a,\n  lightColor: number = 0x353545\n): PIXI.Texture {\n  // Create canvas for the checkerboard pattern\n  const gridCanvas = document.createElement('canvas');\n  gridCanvas.width = gridSize * 2;\n  gridCanvas.height = gridSize * 2;\n  const gridCtx = gridCanvas.getContext('2d')!;\n\n  // Draw checkerboard pattern\n  gridCtx.fillStyle = `#${darkColor.toString(16).padStart(6, '0')}`;\n  gridCtx.fillRect(0, 0, gridSize, gridSize);\n  gridCtx.fillRect(gridSize, gridSize, gridSize, gridSize);\n\n  gridCtx.fillStyle = `#${lightColor.toString(16).padStart(6, '0')}`;\n  gridCtx.fillRect(gridSize, 0, gridSize, gridSize);\n  gridCtx.fillRect(0, gridSize, gridSize, gridSize);\n\n  // Create texture from canvas and enable nearest neighbor scaling\n  const gridTexture = PIXI.Texture.from(gridCanvas);\n  gridTexture.source.scaleMode = 'nearest'; // Keep it crisp\n\n  return gridTexture;\n}\n","/**\n * Palette Card - Color palette selector\n */\nimport * as PIXI from 'pixi.js';\nimport { createPixelButton } from '../components/pixel-button';\nimport { GRID, px } from '@moxijs/core';\nimport { createCardZoomHandler } from '../utilities/card-zoom-handler';\nimport { createManagedCard } from '../utilities/managed-card';\nimport { CardResult } from '../interfaces/components';\nimport { PALETTE_CARD_CONFIG } from '../config/card-configs';\n\nexport interface PaletteCardOptions {\n  x: number;\n  y: number;\n  renderer: PIXI.Renderer;\n  palette: number[];\n  selectedColorIndex?: number;\n  onColorSelect?: (colorIndex: number, color: number) => void;\n}\n\nexport interface PaletteCardResult extends CardResult {\n  getSelectedColorIndex: () => number;\n  setSelectedColorIndex: (index: number) => void;\n  setPalette: (palette: number[]) => void;\n}\n\n/**\n * Creates a pixel-perfect palette card\n */\nexport function createPaletteCard(options: PaletteCardOptions): PaletteCardResult {\n  const { x, y, renderer, palette, onColorSelect } = options;\n\n  // State\n  let selectedColorIndex = options.selectedColorIndex ?? 0;\n  let currentPalette = [...palette];\n  let colorsPerRow = PALETTE_CARD_CONFIG.defaultColorsPerRow;\n  let rows = PALETTE_CARD_CONFIG.defaultRows;\n  let swatchSize = PALETTE_CARD_CONFIG.defaultSwatchSize;\n\n  // Calculate initial content size\n  const contentWidth = colorsPerRow * swatchSize + (colorsPerRow - 1) * GRID.gap;\n  const contentHeight = rows * swatchSize + (rows - 1) * GRID.gap;\n\n  // Create the managed card\n  const managed = createManagedCard({\n    title: 'Palette',\n    x,\n    y,\n    contentWidth,\n    contentHeight,\n    renderer,\n    onResize: (newWidth, newHeight) => {\n      // Calculate new swatch size to fit the available space while showing all colors\n      const totalColors = currentPalette.length;\n\n      // Try different column layouts and pick the best fitting size\n      let bestSize = 2;\n      let bestCols = 1;\n      let bestRows = totalColors;\n\n      for (let cols = 1; cols <= totalColors; cols++) {\n        const rowsNeeded = Math.ceil(totalColors / cols);\n\n        // Calculate max swatch size that fits in this layout\n        const maxWidthPerSwatch = Math.floor((newWidth - (cols - 1) * GRID.gap) / cols);\n        const maxHeightPerSwatch = Math.floor((newHeight - (rowsNeeded - 1) * GRID.gap) / rowsNeeded);\n        const maxSize = Math.min(maxWidthPerSwatch, maxHeightPerSwatch);\n\n        if (maxSize > bestSize) {\n          bestSize = maxSize;\n          bestCols = cols;\n          bestRows = rowsNeeded;\n        }\n      }\n\n      // Update layout\n      swatchSize = Math.max(PALETTE_CARD_CONFIG.minSwatchSize, Math.min(PALETTE_CARD_CONFIG.maxSwatchSize, bestSize));\n      colorsPerRow = bestCols;\n      rows = bestRows;\n      redrawContent();\n    },\n    onRefresh: () => {\n      redrawContent();\n    }\n  });\n\n  const { card, contentContainer } = managed;\n\n  // Redraw function - only updates content, not the whole card\n  function redrawContent() {\n    // Cleanup old swatches using managed card\n    managed.clearChildren();\n    contentContainer.removeChildren();\n\n    const totalSwatches = colorsPerRow * rows;\n\n    // Draw color swatches\n    for (let i = 0; i < Math.min(totalSwatches, currentPalette.length); i++) {\n      const color = currentPalette[i];\n      const col = i % colorsPerRow;\n      const row = Math.floor(i / colorsPerRow);\n\n      // Position relative to content container\n      const swatchX = px(col * (swatchSize + GRID.gap));\n      const swatchY = px(row * (swatchSize + GRID.gap));\n\n      const swatch = createPixelButton({\n        size: swatchSize,\n        selected: i === selectedColorIndex,\n        backgroundColor: color,\n        selectionMode: 'highlight',\n        actionMode: 'toggle',\n        onClick: () => {\n          selectedColorIndex = i;\n          console.log(`Selected color #${i}: #${color.toString(16).padStart(6, '0')}`);\n          redrawContent();\n          if (onColorSelect) {\n            onColorSelect(i, color);\n          }\n        }\n      });\n      managed.trackChild(swatch);\n\n      swatch.container.position.set(swatchX, swatchY);\n      contentContainer.addChild(swatch.container);\n    }\n  }\n\n  // Mouse wheel zoom for swatch size\n  const wheelHandler = createCardZoomHandler(renderer, card, (delta) => {\n    swatchSize = Math.max(PALETTE_CARD_CONFIG.minSwatchSize, Math.min(PALETTE_CARD_CONFIG.maxSwatchSize, swatchSize + delta));\n\n    // Update card content size to match new swatch size\n    const newContentWidth = colorsPerRow * swatchSize + (colorsPerRow - 1) * GRID.gap;\n    const newContentHeight = rows * swatchSize + (rows - 1) * GRID.gap;\n    card.setContentSize(newContentWidth, newContentHeight);\n\n    redrawContent();\n  });\n\n  if (typeof window !== 'undefined') {\n    managed.addEventListenerTracked(window, 'wheel', wheelHandler, { passive: false });\n  }\n\n  // Initial draw\n  redrawContent();\n\n  // Update minimum content size to match actual content\n  card.updateMinContentSize();\n\n  return {\n    card,\n    container: card.container,\n    getSelectedColorIndex: () => selectedColorIndex,\n    setSelectedColorIndex: (index: number) => {\n      selectedColorIndex = index;\n      redrawContent();\n    },\n    setPalette: (newPalette: number[]) => {\n      currentPalette = [...newPalette];\n      redrawContent();\n    },\n    destroy: managed.destroy\n  };\n}\n","/**\n * PIKCELL - Pixel-Perfect Sprite Editor\n * Built on Moxi and PIXI.js\n */\nimport { setupMoxi, setupResponsiveCanvas } from '@moxijs/core';\nimport * as PIXI from 'pixi.js';\nimport { Assets } from 'pixi.js';\nimport { SpriteEditor } from './sprite-editor';\nimport { getTheme } from './theming/theme';\n\n// Asset paths\nconst ASSETS = {\n  PIXEL_OPERATOR8_FONT: {\n    alias: 'PixelOperator8',\n    src: './assets/fonts/pixel_operator/PixelOperator8.ttf'\n  },\n  KENNEY_BLOCKS_FONT: {\n    alias: 'Kenney Blocks',\n    src: './assets/fonts/kenney-blocks.ttf'\n  }\n};\n\n/**\n * Initialize and run the PIKCELL sprite editor\n */\nexport async function initPikcell(hostElement?: HTMLElement) {\n  const root = hostElement || document.getElementById('app');\n  if (!root) throw new Error('Host element not found');\n\n  // Setup with pixel-perfect rendering\n  const { scene, engine, renderer } = await setupMoxi({\n    hostElement: root,\n    showLoadingScene: false,\n    pixelPerfect: true,\n    renderOptions: {\n      width: 1280,\n      height: 720,\n      backgroundColor: getTheme().workspace,\n    }\n  });\n\n  // Load pixel fonts\n  await Assets.load([ASSETS.PIXEL_OPERATOR8_FONT, ASSETS.KENNEY_BLOCKS_FONT]);\n\n  // Install bitmap font at 64px for high quality, will scale down to 16px\n  PIXI.BitmapFont.install({\n    name: 'PixelOperator8Bitmap',\n    style: {\n      fontFamily: 'PixelOperator8',\n      fontSize: 64,\n      fill: 0xffffff,\n    }\n  });\n\n  // Install Kenney Blocks bitmap font for branding\n  PIXI.BitmapFont.install({\n    name: 'KennyBlocksBitmap',\n    style: {\n      fontFamily: 'Kenney Blocks',\n      fontSize: 64,\n      fill: 0xffffff,\n    }\n  });\n\n  // Create the sprite editor\n  const spriteEditor = new SpriteEditor({\n    renderer,\n    scene,\n    maxSpriteSheets: 2\n  });\n\n  // Initialize the editor (creates all UI)\n  await spriteEditor.initialize();\n\n  // Setup responsive canvas - maintains 16:9 aspect ratio centered\n  setupResponsiveCanvas({\n    rootElement: root,\n    width: 1280,\n    height: 720,\n    pixelArtMode: true\n  });\n\n  // Start the engine\n  scene.init();\n  engine.start();\n\n  console.log('PIKCELL loaded');\n\n  return { spriteEditor, scene, engine, renderer };\n}\n\n// Note: Auto-init removed. Call initPikcell() explicitly when using as standalone.\n// For library use, import { SpriteEditor, getTheme } from 'pikcell';\n\n// Export everything for library use\nexport { SpriteEditor } from './sprite-editor';\nexport { getTheme, setTheme, getAllThemes } from './theming/theme';\nexport * from './editor-exports';\n","/**\n * PIKCELL Standalone Entry Point\n * This file is the entry point for running pikcell as a standalone app.\n * For library usage, import from 'pikcell' directly.\n */\nimport { initPikcell } from './index';\nimport { getAllThemes, setTheme, getTheme, getThemeInfo, ThemeInfo } from './theming/theme';\n\n// Theme utilities for testing/debugging\nconst themeUtils = {\n  getAllThemes,\n  setTheme,\n  getTheme,\n  getThemeInfo\n};\n\n// Extend window interface for testing\ndeclare global {\n  interface Window {\n    pikcell?: Awaited<ReturnType<typeof initPikcell>> & { theme: typeof themeUtils };\n  }\n}\n\n// Initialize when DOM is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n  const app = document.getElementById('app');\n  if (app) {\n    initPikcell(app)\n      .then((result) => {\n        // Expose to window for testing/debugging\n        window.pikcell = { ...result, theme: themeUtils };\n        console.log('PIKCELL ready - access via window.pikcell');\n        console.log('Theme utils: window.pikcell.theme.getAllThemes(), .setTheme(), etc.');\n      })\n      .catch(console.error);\n  }\n});\n"],"names":["factory","self","__WEBPACK_EXTERNAL_MODULE_pixi_js__","__webpack_modules__","module","p","a","c","document","addEventListener","attachEvent","w","this","g","createElement","setAttribute","appendChild","createTextNode","h","i","m","j","l","style","cssText","x","B","offsetWidth","b","width","scrollLeft","scrollWidth","C","e","parentNode","D","window","family","weight","stretch","context","E","F","G","H","M","fonts","N","font","q","join","prototype","load","J","Date","getTime","Promise","K","L","test","navigator","vendor","exec","userAgent","parseInt","I","O","r","t","Error","then","n","length","setTimeout","P","race","clearTimeout","body","removeEventListener","readyState","detachEvent","u","d","k","y","z","A","f","removeChild","v","dir","hidden","exports","__unused_webpack_module","exports2","extendStatics","d2","b2","Object","setPrototypeOf","__proto__","Array","d3","b3","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","__assign","assign","s2","n2","arguments","apply","options","input2","defaults","output2","key","getOwnPropertySymbols","symbols","symbol","propertyIsEnumerable","math_random","Math","random","EPSILON","isFinite","Number","mod","num","min","max","clamp","math","nextPowerOfTwo","x2","isPowerOfTwo","math_abs$9","abs","math_sqrt$5","sqrt","math_max$8","math_min$8","Vec2","Vec22","_serialize","_deserialize","data","obj","zero","neo","clone","v3","toString","JSON","stringify","isValid","assert","o","setZero","set","setNum","setVec2","value","wSet","a2","setCombine","setMul","add","wAdd","addCombine","addMul","wSub","subCombine","subMul","sub","mul","lengthOf","lengthSquared","normalize","invLength","distance","dx","dy","distanceSquared","areEqual","skew","dot","cross","crossVec2Vec2","crossVec2Num","crossNumVec2","addCross","addCrossVec2Num","addCrossNumVec2","combine","mulNumVec2","mulVec2Num","neg","mid","upper","lower","lengthSqr","scale","clampVec2","scaleFn","translateFn","math_max$7","math_min$7","AABB","AABB2","lowerBound","upperBound","getCenter","getExtents","getPerimeter","lowerA","upperA","lowerB","upperB","lowerX","lowerY","upperX","upperY","combinePoints","aabb","contains","result","extend","out","testOverlap","d1x","d2x","d1y","d2y","diff","wD","hD","rayCast","t1","t2","tmin","tmax","Infinity","p1","p2","absD","normal3","inv_d","temp3","maxFraction","fraction","normal","combinedPerimeter","lx","ly","math_PI$6","PI","Settings","Settings2","defineProperty","get","linearSlop","enumerable","configurable","lengthUnitsPerMeter","maxManifoldPoints","maxPolygonVertices","aabbExtension","aabbMultiplier","angularSlop","maxSubSteps","maxTOIContacts","maxTOIIterations","maxDistanceIterations","velocityThreshold","maxLinearCorrection","maxAngularCorrection","maxTranslation","maxRotation","baumgarte","toiBaugarte","timeToSleep","linearSleepTolerance","angularSleepTolerance","SettingsInternal","SettingsInternal2","Pool","Pool2","opts","_list","_max","_hasCreateFn","_createCount","_hasAllocateFn","_allocateCount","_hasReleaseFn","_releaseCount","_hasDisposeFn","_disposeCount","_createFn","_allocateFn","allocate","_releaseFn","release","_disposeFn","dispose","size","item","shift","push","math_abs$8","math_max$6","TreeNode","TreeNode2","id","userData","parent","child1","child2","height","isLeaf","poolTreeNode","node","DynamicTree","DynamicTree2","inputPool","stack","stackPool","iteratorPool","Iterator","iterator","close","m_root","m_nodes","m_lastProxyId","getUserData","getFatAABB","allocateNode","freeNode","createProxy","insertLeaf","destroyProxy","removeLeaf","moveProxy","leaf","leafAABB","index","area","combinedArea","cost","inheritanceCost","cost1","cost2","sibling","oldParent","newParent","balance","grandParent","iA","getHeight","getAreaRatio","rootArea","totalArea","it","preorder","next","computeHeight","height1","height2","validateStructure","validateMetrics","validate","getMaxBalance","maxBalance","rebuildBottomUp","nodes","count","minCost","iMin","jMin","aabbi","aabbj","parent_1","shiftOrigin","newOrigin","query","queryCallback","pop","rayCastCallback","abs_v","segmentAABB","subInput","c2","Iterator2","parents","states","root","math_max$5","math_min$6","BroadPhase","BroadPhase2","_this","m_tree","m_moveBuffer","proxyId","m_queryProxyId","proxyIdA","proxyIdB","userDataA","userDataB","m_callback","aabbA","aabbB","getProxyCount","getTreeHeight","getTreeBalance","getTreeQuality","bufferMove","unbufferMove","displacement2","touchProxy","updatePairs","addPairCallback","fatAABB","math_sin$2","sin","math_cos$2","cos","math_sqrt$4","vec2","copyVec2","zeroVec2","negVec2","plusVec2","minusVec2","subVec2","mulVec2","scaleVec2","plusScaleVec2","minusScaleVec2","combine2Vec2","am","bm","combine3Vec2","cm","normalizeVec2","dotVec2","lengthSqrVec2","distVec2","distSqrVec2","rotVec2","s","derotVec2","transform","angle","copyTransform","transform2","transformVec2","xf2","detransformVec2","px","py","retransformVec2","from","to","x0","y0","detransformTransform","math_sin$1","math_cos$1","math_atan2$1","atan2","Rot","Rot2","setAngle","setRot","setIdentity","rot","identity","getAngle","getXAxis","getYAxis","qr","mulRot","mulSub","mulT","mulTRot","mulTVec2","math_atan2","math_PI$5","temp$7","Sweep","Sweep2","localCenter","alpha0","c0","a0","recycle","setTransform","setLocalCenter","localCenter2","getTransform","beta","advance","alpha","forward","that","Transform","Transform2","position","rotation2","isArray","arr","mulXf","mulAll","mulFn","mulTXf","Velocity","math_sin","math_cos","Position","Position2","Shape","Shape2","appData","m_type","m_radius","synchronize_aabb1","synchronize_aabb2","displacement","FixtureDefDefault","friction","restitution","density","isSensor","filterGroupIndex","filterCategoryBits","filterMaskBits","FixtureProxy","fixture","childIndex","Fixture","Fixture2","shape","def","m_body","m_friction","m_restitution","m_density","m_isSensor","m_filterGroupIndex","m_filterCategoryBits","m_filterMaskBits","m_shape","m_next","m_proxies","m_proxyCount","childCount","getChildCount","m_userData","_reset","getBody","broadPhase","m_world","m_broadPhase","destroyProxies","createProxies","m_xf","resetMassData","restore","getType","getShape","setSensor","sensor","setAwake","setUserData","getNext","getDensity","setDensity","getFriction","setFriction","getRestitution","setRestitution","testPoint","getMassData","massData","computeMass","getAABB","proxy","computeAABB","synchronize","xf1","setFilterData","filter","groupIndex","categoryBits","maskBits","refilter","getFilterGroupIndex","setFilterGroupIndex","getFilterCategoryBits","setFilterCategoryBits","getFilterMaskBits","setFilterMaskBits","edge","getContactList","contact","fixtureA","getFixtureA","fixtureB","getFixtureB","flagForFiltering","world","getWorld","shouldCollide","collideA","collideB","STATIC","KINEMATIC","DYNAMIC","oldCenter","temp$6","xf$2","BodyDefDefault","type","linearVelocity","angularVelocity","linearDamping","angularDamping","fixedRotation","bullet","gravityScale","allowSleep","awake","active","Body","Body2","m_awakeFlag","m_autoSleepFlag","m_bulletFlag","m_fixedRotationFlag","m_activeFlag","m_islandFlag","m_toiFlag","m_mass","m_invMass","m_I","m_invI","m_sweep","c_velocity","c_position","m_force","m_torque","m_linearVelocity","m_angularVelocity","m_linearDamping","m_angularDamping","m_gravityScale","m_sleepTime","m_jointList","m_contactList","m_fixtureList","m_prev","m_destroyed","fixtures","_addFixture","isWorldLocked","isLocked","getFixtureList","getJointList","isStatic","isDynamic","isKinematic","setStatic","setType","setDynamic","setKinematic","synchronizeFixtures","ce","ce0","destroyContact","isBullet","setBullet","flag","isSleepingAllowed","setSleepingAllowed","isAwake","isActive","setActive","m_newFixture","isFixedRotation","setFixedRotation","synchronizeTransform","getPosition","setPosition","getWorldCenter","getLocalCenter","getLinearVelocity","getLinearVelocityFromWorldPoint","worldPoint","getLinearVelocityFromLocalPoint","localPoint","getWorldPoint","setLinearVelocity","getAngularVelocity","setAngularVelocity","getLinearDamping","setLinearDamping","getAngularDamping","setAngularDamping","getGravityScale","setGravityScale","getMass","getInertia","mass","center","setMassData","applyForce","force","point2","wake","applyForceToCenter","applyTorque","torque","applyLinearImpulse","impulse","applyAngularImpulse","jn","other","joint","m_collideConnected","createFixture","fixdef","destroyFixture","publish","getWorldVector","localVector","getLocalPoint","getLocalVector","worldVector","JointEdge","prev","Joint","Joint2","bodyA","bodyB","m_edgeA","m_edgeB","m_bodyA","m_bodyB","collideConnected","getBodyA","getBodyB","getCollideConnected","_resetAnchors","stats","gjkCalls","gjkIters","gjkMaxIters","toiTime","toiMaxTime","toiCalls","toiIters","toiMaxIters","toiRootIters","toiMaxRootIters","newline","string","name_1","Timer","now","time","math_max$4","temp$5","normal$4","e12","e13","e23","temp1","temp2","DistanceInput","DistanceInput2","proxyA","DistanceProxy","proxyB","transformA","transformB","useRadii","DistanceOutput","DistanceOutput2","pointA","pointB","iterations","SimplexCache","SimplexCache2","metric","indexA","indexB","Distance","cache2","xfA2","xfB2","simplex","readCache","vertices","m_v","k_maxIters","saveA","saveB","saveCount","iter","m_count","solve","getSearchDirection","vertex","getSupport","wA","getVertex","wB","duplicate","getWitnessPoints","writeCache","rA2","rB2","DistanceProxy2","m_vertices","getVertexCount","bestIndex","bestValue","getSupportVertex","computeDistanceProxy","setVertices","radius","SimplexVertex","SimplexVertex2","searchDirection_reuse","closestPoint_reuse","Simplex","Simplex2","m_v1","m_v2","m_v3","wALocal","wBLocal","metric1","metric2","getMetric","v13","v22","getClosestPoint","pA2","pB2","solve2","solve3","w1","w2","d12_2","d12_1","inv_d12","w3","w1e12","w1e13","d13_1","d13_2","w2e23","d23_1","d23_2","n123","d123_1","d123_2","d123_3","inv_d13","inv_d23","inv_d123","input$1","cache$1","output$1","shapeA","shapeB","Input","Output","Proxy","Cache","TOIOutputState2","ShapeCastInput","ShapeCastInput2","translationB","ShapeCastOutput","point","lambda","ShapeCast","radiusA","polygonRadius","simplex2","sigma","tolerance","vp","vr","pointA2","pointB2","math_abs$7","math_max$3","TOIInput","TOIInput2","sweepA","sweepB","tMax","TOIOutputState","TOIOutput","TOIOutput2","state","e_unset","SeparationFunctionType","SeparationFunctionType2","distanceInput","distanceOutput","cache","xfA$1","xfB$1","temp$4","pointA$2","pointB$2","normal$3","axisA","axisB","localPointA","localPointB","TimeOfImpact","timer","e_unknown","totalRadius","target","k_maxIterations","e_overlapped","e_touching","separationFunction","initialize","done","pushBackIter","findMinSeparation","e_separated","s1","evaluate","e_failed","rootIterCount","a1","s3","SeparationFunction2","m_proxyA","m_proxyB","m_sweepA","m_sweepB","m_localPoint","m_axis","e_points","localPointA_1","localPointB_1","normalizeVec2Length","e_faceB","localPointB1","localPointB2","localPointA_2","e_faceA","localPointA1","localPointA2","localPointB_2","compute","find","math_abs$6","math_sqrt$3","math_min$5","TimeStep","TimeStep2","dt","inv_dt","velocityIterations","positionIterations","warmStarting","blockSolve","inv_dt0","dtRatio","reset","s_subStep","translation","input","output","backup","backup1","backup2","ContactImpulse","ContactImpulse2","normals","tangents","v_points","normalImpulse","tangentImpulse","Solver","Solver2","m_stack","m_bodies","m_contacts","m_joints","clear","addBody","addContact","addJoint","solveWorld","step","m_bodyList","c_1","seed","isEnabled","isTouching","sensorA","m_fixtureA","sensorB","m_fixtureB","je","solveIsland","gravity","m_gravity","m_allowSleep","initConstraint","initVelocityConstraint","warmStartConstraint","initVelocityConstraints","solveVelocityConstraints","solveVelocityConstraint","storeConstraintImpulses","translationLengthSqr","maxTranslationSquared","ratio","maxRotationSquared","positionSolved","minSeparation","separation","solvePositionConstraint","contactsOkay","jointsOkay","jointOkay","solvePositionConstraints","postSolveIsland","minSleepTime","linTolSqr","linearSleepToleranceSqr","angTolSqr","angularSleepToleranceSqr","solveWorldTOI","m_stepComplete","c_2","m_toiCount","m_toi","minContact","minAlpha","c_3","fA_1","fB_1","bA_1","bB_1","activeA","activeB","getChildIndexA","getChildIndexB","fA","fB","bA","bB","update","bodies","solveIslandTOI","findNewContacts","m_subStepping","setEnabled","subStep","toiA","toiB","solvePositionConstraintTOI","c_5","postSolve","m_impulse","PointState2","ContactFeatureType2","ManifoldType2","Mat22","Mat222","ex","ey","getInverse","det","imx","mx","mulMat22","mulTMat22","mx1","mx2","math_sqrt$2","pointA$1","pointB$1","temp$3","cA$1","cB$1","dist","planePoint$2","clipPoint$1","ManifoldType","ContactFeatureType","PointState","ClipVertex","ClipVertex2","ContactID","Manifold","Manifold2","localNormal","points","ManifoldPoint","pointCount","getWorldManifold","wm","radiusB","WorldManifold","separations","e_circles","manifoldPoint","clipSegmentToLine","getPointStates","ManifoldPoint2","ContactID2","typeA","typeB","setFeatures","swapFeatures","WorldManifold2","state1","state2","manifold1","manifold2","removeState","persistState","addState","vOut","vIn","offset","vertexIndexA","numOut","distance0","distance1","interp","e_vertex","e_face","math_sqrt$1","math_max$2","math_min$4","contactPool","Contact","oldManifold","worldManifold","ContactEdge","ContactEdge2","mixFriction","friction1","friction2","mixRestitution","restitution1","restitution2","s_registers","VelocityConstraintPoint","VelocityConstraintPoint2","rA","rB","normalMass","tangentMass","velocityBias","cA","vA","cB","vB","tangent$1","xfA","xfB","clipPoint","planePoint$1","P$1","normal$2","dv","dv1","dv2","P1","P2","temp$2","Contact2","m_nodeA","m_nodeB","m_indexA","m_indexB","m_evaluateFcn","m_manifold","m_tangentSpeed","m_enabledFlag","m_touchingFlag","m_filterFlag","m_bulletHitFlag","v_normal","v_normalMass","v_K","v_pointCount","v_tangentSpeed","v_friction","v_restitution","v_invMassA","v_invMassB","v_invIA","v_invIB","p_localPoints","p_localNormal","p_localPoint","p_localCenterA","p_localCenterB","p_type","p_radiusA","p_radiusB","p_pointCount","p_invMassA","p_invMassB","p_invIA","p_invIB","evaluateFcn","_i","_a2","_b","_c","manifold","cp","vcp","getManifold","worldManifold2","resetFriction","resetRestitution","setTangentSpeed","speed","getTangentSpeed","listener","touching","wasTouching","nmp","omp","hasListener","beginContact","endContact","preSolve","_solvePositionConstraint","toi","positionA","positionB","localCenterA","localCenterB","mA","mB","iB","aA","aB","rnA","rnB","velocityA","velocityB","wmp","kNormal","rtA","rtB","kTangent","vRel","vcp1","vcp2","rn1A","rn1B","rn2A","rn2B","k11","k22","k12","a_1","b_1","d_1","vt","maxFriction","newImpulse","vn","vn1","vn2","addType","type1","type2","callback","destroy","DEFAULTS$b","continuousPhysics","subStepping","World","World2","s_step","m_solver","m_contactCount","m_bodyCount","m_jointCount","m_clearForces","m_locked","m_warmStarting","m_continuousPhysics","m_blockSolve","m_velocityIterations","m_positionIterations","m_t","m_step_callback","joints","getBodyList","_addBody","createJoint","getBodyCount","getJointCount","getContactCount","setGravity","getGravity","setAllowSleeping","getAllowSleeping","setWarmStarting","getWarmStarting","setContinuousPhysics","getContinuousPhysics","setSubStepping","getSubStepping","setAutoClearForces","getAutoClearForces","clearForces","queryAABB","point1","point3","createBody","arg1","arg2","createDynamicBody","createKinematicBody","destroyBody","je0","destroyJoint","f0","timeStep","updateContacts","queueUpdate","createContact","next_c","on","name","_listeners","off","listeners","indexOf","splice","arg3","oldManifold2","Vec3","Vec32","v1$2","v2$1","EdgeShape","_super","EdgeShape2","v122","TYPE","m_vertex1","m_vertex2","m_vertex0","m_vertex3","m_hasVertex0","m_hasVertex3","vertex1","vertex2","vertex0","vertex3","hasVertex0","hasVertex3","setPrevVertex","setNextVertex","getRadius","setNext","getNextVertex","setPrev","getPrevVertex","_set","_clone","e3","numerator","denominator","rr","v1$1","v2","ChainShape","ChainShape2","loop","m_prevVertex","m_nextVertex","m_hasPrevVertex","m_hasNextVertex","m_isLoop","_createLoop","_createChain","slice","isLoop","hasPrevVertex","hasNextVertex","prevVertex","nextVertex","getChildEdge","math_max$1","math_min$3","temp$1","e$1","e1$1","e2$1","PolygonShape","PolygonShape2","m_centroid","m_normals","_setAsBox","ps","unique","linearSlopSquared","i0","hull","ih","ie2","i1","i2","vs","pRef","inv3","p3","e1_1","e2_1","triangleArea","computeCentroid","hx","hy","center2","pLocal","minX","minY","maxX","maxY","k_inv3","ex1","ey1","ex2","ey2","LimitState$2","LimitState2","math_sqrt","math_PI$4","temp","CircleShape","CircleShape2","m_p","math_abs$5","math_PI$3","DEFAULTS$a","frequencyHz","dampingRatio","DistanceJoint","DistanceJoint2","anchorA","anchorB","m_localAnchorA","localAnchorA","m_localAnchorB","localAnchorB","m_length","m_frequencyHz","m_dampingRatio","m_gamma","m_bias","gamma","bias","getLocalAnchorA","getLocalAnchorB","setLength","getLength","setFrequency","hz","getFrequency","setDampingRatio","getDampingRatio","getAnchorA","getAnchorB","getReactionForce","m_u","getReactionTorque","m_localCenterA","m_localCenterB","m_invMassA","m_invMassB","m_invIA","m_invIB","cA2","vA2","cB2","vB2","qA","qB","m_rA","m_rB","crAu","crBu","invMass","omega","P3","vpA","vpB","Cdot","DEFAULTS$9","maxForce","maxTorque","FrictionJoint","FrictionJoint2","anchor","m_linearImpulse","m_angularImpulse","m_maxForce","m_maxTorque","setMaxForce","getMaxForce","setMaxTorque","getMaxTorque","m_linearMass","m_angularMass","oldImpulse","maxImpulse","Mat33","Mat332","ez","solve33","cross_x","cross_y","cross_z","solve22","a11","a12","a21","a22","getInverse22","getSymInverse33","a13","a23","a33","mulVec3","math_abs$4","LimitState$1","DEFAULTS$8","RevoluteJoint","RevoluteJoint2","_d","_e","_f","m_limitState","inactiveLimit","referenceAngle","m_referenceAngle","m_motorImpulse","m_lowerAngle","lowerAngle","m_upperAngle","upperAngle","m_maxMotorTorque","maxMotorTorque","m_motorSpeed","motorSpeed","m_enableLimit","enableLimit","m_enableMotor","enableMotor","getReferenceAngle","getJointAngle","getJointSpeed","isMotorEnabled","getMotorTorque","setMotorSpeed","getMotorSpeed","setMaxMotorTorque","getMaxMotorTorque","isLimitEnabled","getLowerLimit","getUpperLimit","setLimits","m_motorMass","jointAngle","equalLimits","atLowerLimit","atUpperLimit","Cdot1","Cdot2","rhs","reduced","positionError","angularError","limitImpulse","math_abs$3","math_max","math_min$2","LimitState","DEFAULTS$7","lowerTranslation","upperTranslation","maxMotorForce","PrismaticJoint","PrismaticJoint2","axis","m_localXAxisA","localAxisA","m_localYAxisA","m_lowerTranslation","m_upperTranslation","m_maxMotorForce","m_perp","m_K","getLocalAxisA","getJointTranslation","setMaxMotorForce","getMaxMotorForce","getMotorForce","m_a1","m_a2","m_s1","m_s2","k13","k23","k33","jointTranslation","LA","LB","f1","df","f2r","perp2","C1","linearError","C2","translation2","impulse1","DEFAULTS$6","GearJoint","GearJoint2","joint1","joint2","coordinateA","coordinateB","m_joint1","m_joint2","m_ratio","m_type1","m_type2","m_bodyC","xfC","aC","revolute","m_localAnchorC","m_referenceAngleA","m_localAxisC","prismatic","pC","m_bodyD","xfD","aD","m_localAnchorD","m_referenceAngleB","m_localAxisD","pD","m_constant","getJoint1","getJoint2","setRatio","getRatio","m_JvAC","m_JwA","m_lcA","m_lcB","m_lcC","m_lcD","m_mA","m_mB","m_mC","m_mD","m_iA","m_iB","m_iC","m_iD","vC","wC","vD","qC","qD","m_JwC","rC","m_JvBD","m_JwB","m_JwD","rD","JvAC","JvBD","JwA","JwB","JwC","JwD","cC","cD","DEFAULTS$5","correctionFactor","MotorJoint","MotorJoint2","m_linearOffset","linearOffset","m_angularOffset","angularOffset","m_correctionFactor","setCorrectionFactor","factor","getCorrectionFactor","setLinearOffset","getLinearOffset","setAngularOffset","getAngularOffset","m_linearError","m_angularError","inv_h","math_PI$2","DEFAULTS$4","MouseJoint","MouseJoint2","m_targetA","m_beta","m_C","_localAnchorB","setTarget","getTarget","velocity","math_abs$2","DEFAULTS$3","PulleyJoint","PulleyJoint2","groundA","groundB","m_groundAnchorA","groundAnchorA","m_groundAnchorB","groundAnchorB","m_lengthA","lengthA","m_lengthB","lengthB","getGroundAnchorA","getGroundAnchorB","getLengthA","getLengthB","getCurrentLengthA","getCurrentLengthB","m_uB","m_uA","ruA","ruB","PA","PB","uA","uB","math_min$1","_a","DEFAULTS$2","maxLength","RopeJoint","RopeJoint2","m_maxLength","m_state","setMaxLength","getMaxLength","getLimitState","crA","crB","math_abs$1","math_PI$1","DEFAULTS$1","WeldJoint","WeldJoint2","invM","impulse2","math_abs","math_PI","DEFAULTS","WheelJoint","WheelJoint2","m_ax","m_ay","localAxis","m_springMass","m_springImpulse","setSpringFrequencyHz","getSpringFrequencyHz","setSpringDampingRatio","getSpringDampingRatio","m_sAy","m_sBy","m_sAx","m_sBx","damp","ay","sAy","sBy","SID","SERIALIZE_REF_TYPES","DESERIALIZE_BY_REF_TYPE","DESERIALIZE_BY_TYPE_FIELD","DEFAULT_OPTIONS","rootClass","preSerialize","postSerialize","preDeserialize","postDeserialize","Serializer","options2","toJson","json","refQueue","refMemoById","addToRefQueue","typeName","__sid","ref","refIndex","refType","traverse","noRefType","obj2","newValue","str","fromJson","deserializedRefMemoByIndex","deserializeWithHooks","classHint","classDeserializeFn","deserializeChild","dataOrRef","worldSerializer","Testbed","Testbed2","mount","start","testbed2","testbed","BoxShape","BoxShape2","halfWidth","halfHeight","CollideCircles","pA","pB","circleA","circleB","distSqr","CollideEdgeCircle","chain","e1","e2","Q","n$2","edgeA","A1","B1","B2","A2","den","incidentEdge","clipPoints1$1","clipPoints2$1","clipSegmentToLineNormal","v1","n$1","xf$1","v11","v12","localTangent","planePoint","tangent","normal$1","normal1$1","findMaxSeparation","poly1","poly2","count1","count2","n1s","v1s","v2s","maxSeparation2","si","sij","maxSeparation","CollidePolygons","polyA","polyB","separationA","edgeB","separationB","edge12","flip","clipVertex","before","after","normals1","vertices2","normals2","minDot","findIncidentEdge","vertices1","iv1","iv2","frontOffset","sideOffset1","sideOffset2","CollidePolygonCircle","cLocal","faceCenter","polygonA","normalIndex","vertexCount","vertIndex1","vertIndex2","u1","u2","math_min","CollideEdgePolygon","edge_reuse","EPAxisType","VertexType","VertexType2","EPAxisType2","EPAxis","TempPolygon","ReferenceFace","ReferenceFace2","sideNormal1","sideNormal2","clipPoints1","clipPoints2","ie","edgeAxis","polygonAxis","polygonBA","rf","centroidB","edge0","edge1","edge2","xf","normal0","normal1","normal2","lowerLimit","upperLimit","perp","polygonB","v0","front","offset1","offset0","offset2","convex1","convex2","e_edgeA","v4","s22","e_edgeB","primaryAxis","internal","DataDriver","DataDriver2","_refMap","_map","_xmap","_data","_entered","_exited","_key","_listener","exit","enter","planck","freeze","Box","Chain","Circle","Edge","Polygon","Symbol","toStringTag","default","defineProperties","__esModule","ownKeys","__createBinding","k2","undefined","desc","getOwnPropertyDescriptor","writable","__setModuleDefault","__importStar","getOwnPropertyNames","ar","FlexDirection","FlexContainer","UIFocusManager","UIComponent","EdgeInsets","applyMaterial","PhysicsMaterials","createShapeFromSprite","getPhysicsBody","hasPhysics","asPhysicsEntity","CollisionManager","CollisionRegistry","PhysicsDebugRenderer","PhysicsBodyLogic","PhysicsWorld","StateLogic","StateMachine","utils","TilingParallaxLayer","TextureFrameSequences","setupResponsiveCanvas","Scene","RenderManager","setupMoxi","FallingSquaresAnimation","LoadingScene","ParallaxLayer","ParallaxBackgroundLogic","ParallaxBackground","MoxiEntity","loadFonts","getTextureRange","EventEmitter","Engine","defaultRenderOptions","createTileGrid","createResizeHandler","ClientEvents","CameraLogic","Camera","Logic","asContainer","asGraphics","asText","asSprite","asBitmapText","asTextureFrames","asEntity","AssetLoader","ActionManager","createBorderConfig","BORDER","GRID","units","PixelGrid","svgToTexture","UIScaleMode","UILayer","UITabs","UIScrollContainer","UITextArea","UITextInput","UISelect","ButtonState","UIButton","UIPanel","UILabel","UIBox","FlexAlign","FlexJustify","render_manager_1","scene_1","engine_1","event_system_1","client_events_1","asset_loader_1","logic_1","setup_1","font_loader_1","moxi_entity_1","camera_1","texture_frames_1","as_pixi_1","texture_frame_sequences_1","resize_handler_1","edge_insets_1","ui_component_1","ui_focus_manager_1","flex_container_1","ui_box_1","ui_label_1","ui_panel_1","ui_button_1","ui_select_1","ui_text_input_1","ui_textarea_1","ui_scroll_container_1","ui_tabs_1","UILayer_1","UIScaleMode_1","state_machine_1","state_logic_1","grid_generator_1","svg_to_texture_1","pixel_grid_1","parallax_background_1","parallax_layer_1","loading_scene_1","action_manager_1","physics_1","exportedObjects","actions","Set","handler","action","remove","has","delete","removeAll","forEach","getCount","hasAction","__importDefault","constructorArgs","props","pixelPerfect","textArgs","text","pixi_js_1","BitmapText","roundPixels","applyProps","Sprite","Text","Graphics","Container","rotation","tint","visible","eventMode","pivot","wheelDelta","mouseUpEvent","mouseDownEvent","lastMouseDown","lastMouseUp","keyDownEvent","keyUpEvent","keydown","wheelOffsets","movePosition","lastMovePosition","moveDelta","static","getInstance","instance","initWheelOffset","Point","onAnyEvent","ev","anyEvent","event","xValue","deltaX","yValue","deltaY","eventType","clientX","clientY","isKeyDown","Boolean","isKeyUp","DEFAULT_PALETTE","particles","container","nextSpawn","squareSize","maxParticles","palette","spawnInterval","init","textElement","spawnParticle","progress","spawnTime","duration","sprite","startX","startY","endY","spinRate","rect","fill","color","floor","addChild","textY","textWidth","textCenterX","fontfaceobserver_1","async","fontKenfutureThin","resolve","BitmapFont","install","fontFamily","textures","selector","cellWidth","cellHeight","centered","getTextureIndex","totalCells","pixelX","pixelY","textureIndex","total","cell","gridWidth","gridHeight","startIndex","pixi_js_2","falling_squares_animation_1","background","animationContainer","animation","ticker","renderer","backgroundColor","super","textStyle","fallingSquaresOptions","fontSize","fontWeight","Ticker","autoStart","deltaTime","render","show","started","hide","stop","PIXI","moxiEntity","camera","scrollOffset","scrollBaseScale","scrollIgnoreCameraZoom","autoscroll","entity","addLogic","addLayer","layer","detectCamera","current","getCameraPosition","getCameraScale","cameraPos","cameraScale","scene","children","child","updateParallax","scrollScale","repeatSize","mirroring","_lastCameraPos","backgroundOffset","scrollX","scrollY","copyFrom","tilingSprite","_autoSized","texture","source","addressMode","TilingSprite","autoDetectDimensions","resize","baseWidth","baseHeight","tilePosition","physics_world_1","physics_body_logic_1","physics_collision_1","physics_debug_renderer_1","physics_utils_1","physics_materials_1","physics_graphics_parser_1","onCollisionBegin","onCollisionEnd","syncMode","syncPosition","syncRotation","createPhysicsBody","registerBody","syncFromPhysics","syncToPhysics","pos","toPixels","toPhysics","bodyType","bodyDef","toPhysicsPoint","setVelocity","createShape","collisionTags","collisionRegistry","tagsToBits","getBit","collidesWith","collisionGroup","collisionShape","parseGraphicsShape","createShapeFromType","shapeType","map","autoDetectShape","bounds","getLocalBounds","forceVec","pointVec","applyImpulse","impulseVec","velocityVec","getVelocity","vel","toPixelsPoint","isSleeping","isPhysicsBodyUserData","tagToBit","Map","bitToTag","nextBit","register","tag","getTag","bit","tags","reduce","bits","bitsToTags","registry","callbacks","setupListeners","handleBeginContact","handleEndContact","onCollision","tagA","tagB","makeKey","offCollision","triggerTagCallbacks","tagsA","tagsB","cb","graphics","isVisible","showShapes","showVelocities","showAABBs","showCenterOfMass","showContactPoints","showJoints","colorStatic","colorDynamic","colorKinematic","colorSleeping","colorSensor","lineWidth","drawBody","drawContacts","fixtureColor","drawShape","drawVelocity","drawAABB","drawCenterOfMass","stroke","circle","pixelCenter","pixelRadius","endX","moveTo","lineTo","firstVertex","pixelFirst","pixelVertex","endPoint","pixelStart","pixelEnd","angle1","angle2","pixelPos","pixelPoint","setVisible","toggle","getVisible","setGraphicsPhysicsShape","initGraphicsPhysicsTracking","originalRect","originalCircle","originalPoly","poly","flat","metadata","PHYSICS_SHAPE_KEY","material","bouncy","wood","metal","ice","rubber","character","terrain","pixiObject","physicsLogic","getLogic","pixelsPerMeter","timestep","collisionManager","accumulator","debugRenderer","debugGraphics","enableSleeping","logic","getBodyLogic","raycast","pixelNormal","queryPoint","physicsPoint","pixels","meters","vec","enableDebugRenderer","disableDebugRenderer","debugEntity","zIndex","sortableChildren","console","log","getDebugRenderer","getBodies","resizeHandler","DEFAULT_ROOT_STYLES","display","justifyContent","alignItems","overflow","PIXEL_ART_CANVAS_STYLES","imageRendering","rootElement","rootStyles","canvasStyles","pixelArtMode","entries","setProperty","finalCanvasStyles","parentWidth","clientWidth","parentHeight","clientHeight","firstElementChild","HTMLCanvasElement","canvas","round","hostElement","renderOptions","physics","showLoadingScene","loadingSceneOptions","finalRenderOptions","applyImageRendering","ppOptions","enabled","resolution","antialias","engine","assetLoader","PIXIAssets","loadAssets","physicsWorld","loadingScene","physicsOptions","addPhysicsWorld","devicePixelRatio","autoDensity","_entity","onEnter","onExit","EventTarget","_states","_currentState","_currentStateName","setState","stateName","prevStateName","CustomEvent","detail","prevState","newState","dispatchEvent","currentState","svgString","colorHex","padStart","processedSVG","replace","blob","Blob","url","URL","createObjectURL","img","Image","reject","onload","onerror","src","ctx","getContext","revokeObjectURL","drawImage","Texture","scaleMode","frames","sequences","addSequence","frameIndices","animationSpeed","getSequence","getFrame","getFrameFromSequence","sequenceName","frameIndex","sequence","sequenceFrameIndex","getFrameSequence","textureSource","defaultOptions","frameWidth","frameHeight","columns","rows","error","frame","Rectangle","frametexture","deg2rad","rad2deg","fetchXml","lerp","roundTo","getRandomInt","pr","padRight","lc","uc","ONE_POINT","ZERO_POINT","createPoint","metersToPixels","pixelsToMeters","toUpperCase","toLowerCase","val","padWith","places","pow","begin","end","mag","fetch","rad","deg","Assets","isLoading","events","assets","failedAssets","emit","alias","warn","utils_1","deltaSpeed","isZooming","desiredScale","screenCenterX","screenCenterY","desiredX","desiredY","desiredPosition","cameraLogic","logger","loggerFrequencyMs","nextLogTime","stage","shared","gameLoop","msg","tikerTime","deltaMS","deltaSeconds","draw","loadStage","eventListeners","args","once","InstancedLogic","isInteractive","className","logicComponent","logicName","htmlRoot","fitToWindow","onResize","canvasWidth","canvasHeight","getRenderer","autoDetectRenderer","isMoxiEntity","targetWidth","targetHeight","initialBoundsRecorded","None","updateScale","scaleX","scaleY","ScaleUI","LockRatio","SpriteBackgroundStrategy","SolidColorBackgroundStrategy","panel","normalColor","hoverColor","pressedColor","disabledColor","borderRadius","darkenColor","layout","updateState","Normal","Hover","Pressed","Disabled","setBackgroundColor","getActualHeight","spriteLeft","spriteMid","spriteRight","nineSliceSprite","nineSliceSpritePressed","iconSprite","config","spritesheet","texturePattern","useNineSlice","nineSliceBorders","pressedTexturePattern","icon","textureName","includes","NineSliceSprite","leftWidth","left","topHeight","top","rightWidth","right","bottomHeight","bottom","pressedTextureName","pressedTexture","leftTextureName","getTextureName","midTextureName","rightTextureName","middleWidth","iconTexture","isPressed","pattern","part","boxModel","backgroundAlpha","borderWidth","measure","padding","border","contentWidth","contentHeight","totalWidth","horizontal","totalHeight","vertical","minWidth","minHeight","availableWidth","availableHeight","measured","finalWidth","finalHeight","maxWidth","maxHeight","computedLayout","contentX","contentY","layoutDirty","borderColor","roundRect","setBorder","button_background_strategy_1","useBitmapText","bitmapFontFamily","onClick","onHover","backgroundStrategy","label","bitmapLabel","labelCenterX","labelCenterY","keydownHandler","textColor","symmetric","tabIndex","spriteBackground","backgroundContainer","createBitmapLabel","align","setupInteractivity","cursor","handlePointerOver","bind","handlePointerOut","handlePointerDown","handlePointerUp","handlePointerUpOutside","isFocused","preventDefault","canFocus","focusManager","requestFocus","onFocus","updateVisuals","yOffset","actualHeight","labelLayout","getLayout","setLabel","setText","markLayoutDirty","getState","textObject","wordWrap","wordWrapWidth","lineHeight","getTextStyle","metrics","textHeight","wrapWidth","setColor","setFontSize","getText","createBackground","nineSlice","setTexture","contentContainer","contentMask","scrollbarTrack","scrollbarThumb","maxScrollY","isDragging","dragStartY","dragStartScrollY","isHoveringThumb","boundGlobalPointerMove","boundGlobalPointerUp","scrollbarWidth","scrollbarTrackColor","scrollbarThumbColor","scrollbarThumbHoverColor","scrollbarAutoHide","all","updateBackground","updateMask","mask","updateScrollbar","handleWheel","handleThumbPointerDown","handleTrackPointerDown","handleGlobalPointerMove","handleGlobalPointerUp","delta","updateContentPosition","globalY","stopPropagation","localY","worldTransform","ty","clickRatio","getThumbHeight","scrollableTrackHeight","scrollDelta","thumbHeight","getThumbY","trackX","trackWidth","trackHeight","thumbY","thumbColor","updateContentBounds","childBottom","viewportHeight","scrollTo","scrollToTop","scrollToBottom","getScrollY","getMaxScrollY","scrollToComponent","component","componentBounds","getGlobalBounds","containerBounds","relativeY","targetScroll","onChange","selectedValue","dropdownContainer","dropdownPanel","optionLabels","isOpen","selectedColor","placeholder","disabled","defaultValue","displayText","getDisplayText","option","opt","closeDropdown","openDropdown","dropdownHeight","optionContainer","optionBg","optionLabel","selectOption","setupClickOutside","removeClickOutside","global","getBounds","setValue","getValue","setOptions","items","activeKey","tabPosition","tabBarBackgroundColor","tabBarHeight","activeTabColor","inactiveTabColor","activeTextColor","hashPrefix","tabBar","contentArea","tabButtons","activeIndicator","hashChangeHandler","initialKey","defaultActiveKey","hashKey","getKeyFromHash","buildTabs","showActiveTab","setupHashListener","updateHash","hash","location","prefix","startsWith","newHash","setActiveKey","removeChildren","tabBarBg","borderLine","xOffset","tabContainer","labelBounds","tabWidth","bg","tabKey","updateActiveIndicator","activeTab","tabX","indicatorY","activeItem","content","tab","tabBounds","getActiveKey","setItems","currentValue","textDisplay","cursorPosition","cursorBlinkInterval","cursorVisible","placeholderColor","handleKeyDown","focused","updateCursor","startCursorBlink","lightenColor","onBlur","stopCursorBlink","ctrlKey","metaKey","substring","updateText","textUpToCursor","tempText","cursorX","cursorY","setInterval","clearInterval","defaultHeight","lineStart","lastIndexOf","lineEnd","moveCursorVertically","direction","lines","split","currentLine","positionInLine","charCount","targetLine","newPosition","lastLine","lastLineText","createDefaultBoxModel","overrides","margin","only","edges","box_model_1","focusRing","createFocusRing","addChildAt","updateFocusRing","strokeWidth","getBoxModel","globalPos","getGlobalPosition","showFocusRing","scrollIntoView","currentParent","hideFocusRing","focusableComponents","currentFocusIndex","setupKeyboardListeners","shiftKey","focusPrevious","focusNext","sortByTabIndex","registerContainer","discoverFocusableComponents","isFocusableComponent","unregister","blur","sort","focus","nextIndex","attempts","prevIndex","focusFirst","focusLast","getCurrentFocus","getFocusableComponents","Row","justify","Start","gap","wrap","childSizes","isRow","RowReverse","totalGap","measuredWidth","measuredHeight","sum","containerWidth","containerHeight","layoutChildren","totalChildSize","crossAxisSize","freeSpace","mainAxisOffset","spaceBetween","End","Center","SpaceBetween","SpaceAround","SpaceEvenly","currentPosition","childSize","crossAxisPosition","Stretch","DEFAULT_PIXEL_GRID","outer","middle","inner","unit","fontScale","tempScale","localStorage","getItem","isNaN","__webpack_module_cache__","moduleId","cachedModule","__webpack_require__","parseColorArray","colors","hex","parsedPalettes","pico8","tic80","cc29","aerugo","PICO8_PALETTE","TIC80_PALETTE","parseHex","ALL_THEMES","themes","category","keys","rawTheme","variant","description","theme","raw","workspace","cardBackground","cardTitleBar","cardBorder","buttonBackground","accent","loadThemesFromConfig","defaultDarkTheme","defaultLightTheme","THEME_STORAGE_KEY","currentThemeInfo","savedName","loadThemeFromStorage","found","initializeTheme","getAllThemes","setTheme","themeInfo","themeName","setItem","saveThemeToStorage","CardDragHandler","capturedPointerId","onDragStart","onDragEnd","dragStartX","cardStartX","cardStartY","boundHandleMove","handleMove","boundHandleUp","handleUp","setupEventListeners","startDrag","client","pointerId","setPointerCapture","getBoundingClientRect","wasDragging","releasePointerCapture","getCardStartPosition","setCardStartPosition","CardResizeHandler","scaleIndicator","getContentSize","setContentSize","onResizeStart","onResizeEnd","redraw","isResizing","resizeStartX","resizeStartY","resizeStartWidth","resizeStartHeight","resizeDirection","constraints","minContentWidth","minContentHeight","setConstraints","startResize","contentSize","deltaGridUnitsX","deltaGridUnitsY","cardStart","newWidth","newHeight","widthDelta","newX","heightDelta","newY","showScaleIndicator","wasResizing","hideScaleIndicator","screenX","screenY","canvasX","canvasY","scaleText","shadowOffset","indicatorWidth","indicatorHeight","PixelCard","pairedCard","onStateChange","fontHeight","verticalPadding","titleBarHeightPx","ceil","dragHandler","cardWidth","cardHeight","drawBackground","drawTitleBar","setupContentMask","addResizeHandles","titleBar","titleText","title","verticalCenter","alphaStamp","stampX","stampY","clipContent","handleThickness","cornerSize","createResizeHandle","handle","getContentContainer","getPixelWidth","cardWidthGridUnits","getPixelHeight","refresh","onRefresh","setTitle","setTitleContent","leftText","rightText","leftBitmapText","rightBitmapText","rightX","setTitleWithIcon","drawIcon","iconSize","iconY","iconX","iconGraphics","textX","setPairedCard","card","getPairedCard","onStateChanged","exportState","importState","updateMinContentSize","minContentSize","selected","iconWidth","iconHeight","selectionMode","actionMode","tooltip","isSelectedState","tooltipContainer","buttonText","buttonWidth","buttonHeight","textWidthInGridUnits","bordersWidth","button","drawButton","bgColor","pressOffset","iconWidthPx","iconHeightPx","createTooltip","tooltipWidth","tooltipHeight","local","getLocalPosition","isSelected","setSelected","removeAllListeners","createPixelDialog","message","buttons","checkboxes","createdButtons","buttonLabels","createdCheckboxes","overlay","backdrop","checkboxStates","buttonSpacing","messageText","messageWidthInGridUnits","buttonsWidthInGridUnits","messageHeightInGridUnits","checkboxesHeightInGridUnits","dialogCard","messageY","cleanup","btn","checkboxY","checkboxConfig","checkboxResult","checked","isCheckedState","checkboxLabel","checkboxSize","checkboxHeight","currentTheme","createCheckbox","isChecked","setChecked","createPixelCheckbox","buttonY","currentX","buttonConfig","buttonResult","dialogBounds","getCheckboxStates","clickButton","getButtonLabels","SPRITE_SHEET_CONTROLLER_CONFIG","SPRITE_CONTROLLER_CONFIG","SpriteSheetController","isPanning","panStartX","panStartY","spriteStartX","spriteStartY","cellOverlay","selectedCellX","selectedCellY","hoveredCellX","hoveredCellY","interactionSetup","clickThreshold","wheelHandler","mouseDownHandler","mouseMoveHandler","mouseUpHandler","animationFrameId","showGrid","onScaleChange","onCellHover","onCellClick","setupMouseWheelZoom","setupMiddleMousePan","canvasScaleX","canvasScaleY","mouseX","mouseY","parentBounds","spriteCenterX","spriteCenterY","oldScale","localX","zoomDelta","newScale","setScale","passive","getScale","clampedScale","getConfig","getScaledDimensions","getPixel","setPixel","colorIndex","updateTexture","fillStyle","fillRect","gridSize","strokeStyle","beginPath","drawCellOverlay","cellSize","spriteX","spriteY","setupCellInteraction","spriteLocal","adjustedX","adjustedY","cellX","cellY","maxCellX","maxCellY","updateOverlay","requestAnimationFrame","preservedX","preservedY","selectCell","screenToPixel","getPixelData","row","setPixelData","getSelectedCell","positionCell00AtTopLeft","centerCell","cellCenterX","cellCenterY","containerCenterX","containerCenterY","cancelAnimationFrame","SPRITESHEET_CONFIGS","UIStateManager","saveState","cards","version","VERSION","timestamp","values","STORAGE_KEY","loadState","parse","clearState","removeItem","hasState","adjustForCanvasSize","PROJECT_STATE_KEY","ProjectStateManager","createEmptyProject","CURRENT_VERSION","createdAt","modifiedAt","spriteSheets","activeSpriteSheetId","selectedColorIndex","selectedTool","selectedShape","saveProject","serialized","success","errorMessage","loadProject","migrateProject","clearProject","hasProject","exportProjectJSON","importProjectJSON","jsonString","getProjectMetadata","sheetCount","LAYOUT_STORAGE_PREFIX","LayoutStateManager","saveLayoutSlot","slot","loadLayoutSlot","hasLayoutSlot","clearLayoutSlot","UndoManager","undoStack","redoStack","currentStroke","currentSpriteSheetId","maxHistory","beginStroke","spriteSheetId","recordPixelChange","oldColorIndex","newColorIndex","existingIndex","findIndex","endStroke","operation","changes","isStrokeInProgress","undo","redo","canUndo","canRedo","clearHistory","op","getHistorySize","onZoom","cardBounds","trackedChildren","trackedListeners","clearChildren","trackChild","addEventListenerTracked","TOOLBAR_CARD_CONFIG","buttonSize","PALETTE_CARD_CONFIG","COMMANDER_BAR_CONFIG","INFO_BAR_CONFIG","DEFAULT_SECTIONS","LEFT_BUTTONS","callbackKey","LAYOUT_SLOTS","createCommanderBarCard","barHeight","barWidth","managed","drawCommands","buildLayoutDialogButtons","onApplyLayout","onLoadLayoutSlot","onSaveLayoutSlot","showLayoutDialog","dialog","showThemeDialog","onThemeChange","spacing","itemDims","dims","getItemDimensions","itemY","layoutButton","themeButton","layoutWidth","themeWidth","spacingPx","TOOL_ICON_GRIDS","pencil","trim","eraser","eyedrop","selection","SHAPE_ICON_GRIDS","square","drawAsciiGridInto","grid","offsetX","offsetY","pixelSize","line","char","drawToolIconInto","tool","drawShapeIconInto","MAIN_TOOLS","hasPopup","SHAPE_TOOLTIPS","SHAPE_OPTIONS","createToolbarCard","onToolSelect","numButtons","buttonRefs","shapePopup","updateButtons","createShapeDrawIcon","updateButtonStates","showShapePopup","shapeButton","onSelect","onClose","selectedId","isShowing","getPopupDimensions","removeClickOutsideHandler","clickOutsideHandler","parentX","parentY","btnConfig","createButtons","getSelectedId","setSelectedId","createPopupToolbar","buttonPos","cardPos","domElement","popupBounds","buttonBounds","inPopup","inButton","setupPopupClickOutside","toolDef","selectTool","getSelectedTool","getSelectedShape","getToolState","mainTool","setSelectedTool","setSelectedShape","FILE_CONSTANTS","SpriteSheetManager","instances","activeId","eventHandlers","savedId","generateId","spriteCard","spriteController","getActive","getAll","remaining","valid","firstInstance","existingType","sheetCard","controller","handlers","getProjectSpriteSheetType","getStats","UIManager","focusedCardId","cardCallbacks","registerCard","originalOnStateChanged","wrappedCallback","setFocusedCard","unregisterCard","originalCallback","getCard","getAllCards","bringToFront","pairedId","registeredCard","exportAllStates","stateMap","importStates","cardState","hasCard","getFocusedCard","getCardCount","findCards","predicate","results","getCardIdsByPattern","regex","RegExp","bringGroupToFront","ids","LayoutManager","layouts","currentLayout","registerDefaultLayouts","applyLayout","layoutId","positions","cardId","positionCard","applyDefaultLayout","titleBarHeight","calculateTitleBarHeight","commanderBarHeight","topOffset","commanderCard","toolCard","toolWidth","paletteCard","infoCard","cardTotalHeight","calculateCardHeightFromContent","registerLayout","getAllLayouts","calculateCardDimensions","calculateCardWidth","calculateCardHeight","onViewportResize","contentWidthGridUnits","contentHeightGridUnits","calculateFullWidthContentSize","rendererWidth","layoutData","dock","below","gapMultiplier","getCurrentLayoutId","centerCard","alignCardToEdge","currentPos","positionRelativeTo","referenceCard","refPos","refWidth","refHeight","SUPPORTED_EXTENSIONS","FileOperationsManager","lastSavedFileName","projectState","filename","supportsFileOperations","toISOString","finalFilename","downloadBlob","accept","onchange","file","files","oncancel","click","exportPNG","spriteSheet","canvasToBlob","exportFilename","exportSpritePNG","getCell","getSpriteSheetController","getLastSavedFileName","link","href","download","toBlob","exportScaledPNG","imageSmoothingEnabled","clearLastSavedFileName","SpriteController","spriteSheetController","setCell","globalX","sheetConfig","getShapePixels","x1","y1","y2","getRectangleOutlinePixels","getFilledRectanglePixels","centerX","centerY","radiusX","radiusY","pixelSet","addPixel","addSymmetricPoints","cx","cy","getCircleOutlinePixels","rx2","ry2","d1","getEllipseOutlinePixels","term","xExtent","xMin","xMax","getFilledEllipsePixels","getFloodFillPixels","targetColor","visited","queue","neighbors","neighbor","nKey","calculateCommanderBarHeight","CARD_IDS","getSpriteSheetCardId","getSpriteCardId","isSpriteCard","SpriteCardFactory","zoomHandlers","getSelectedColorIndex","getSelectedColorHex","getCurrentTool","getCurrentShape","undoManager","onPixelChange","getSheetIndex","createOrUpdate","savedScale","updateCell","createNew","currentTool","currentShape","updateTitle","calculatePosition","spriteCardResult","onPixelClick","onShapeDraw","onFill","onDrawStart","onDrawEnd","getPreviewColor","onSelectionChange","lastTool","lastShape","drawSprite","drawGrid","updateTitleInternal","spriteContainer","gridContainer","previewContainer","selectionContainer","currentSelection","selectionAnimationFrame","selectionAnimationId","totalSize","lineX","lineY","clearShapePreview","drawSelection","drawDashedLine","isHorizontal","drawing","stopSelectionAnimation","setSelection","slowAnimate","startSelectionAnimation","clearSelection","isDrawing","lastPixelX","lastPixelY","shapeStartX","shapeStartY","pixel","validPixels","previewColor","drawShapePreview","endDraw","oldColors","lastHoverX","lastHoverY","updateHoverPreview","pixelsToFill","drawFillPreview","drawHoverPreview","infoText","toolType","getSelection","createSpriteEditorCard","targetColorIndex","sheetIndex","setupZoomHandler","handleZoom","currentScale","zoomIncrement","newContentWidth","newContentHeight","handlerId","restoreScale","SpriteEditor","currentShapeType","currentPalette","hasUnsavedChanges","uiStateSaveTimer","projectSaveTimer","keyboardHandler","clipboard","currentDialog","spriteSheetManager","uiManager","layoutManager","fileOperationsManager","spriteCardFactory","saveProjectState","activateInstance","setupKeyboardHandler","setupBeforeUnloadHandler","loadResult","updatePaletteForActiveSheet","recreateUI","saveUIState","saveUIStateImmediate","restoreUIState","savedState","adjustedState","cs","repositionToolbar","spriteCardRight","spriteCardY","cardRight","toolX","setChildIndex","desiredContentWidth","desiredContentHeight","defaultX","defaultY","activeSheet","setPalette","createNewSpriteSheet","validation","createSpriteCardForCell","spriteSheetResult","gridBackground","cellText","toFixed","scaledWidth","scaledHeight","cardPadding","calculatedX","calculatedY","gridTexture","darkColor","lightColor","gridCanvas","gridCtx","createCheckerboardTexture","tileScale","createSpriteSheetCard","spriteCardScale","toolbarCard","centerActiveSheetCell","activeInstance","contentState","contentWidthPx","contentHeightPx","updateTheme","commanderBarCard","infoBarCard","updateInfoBar","toolName","TOOL_DISPLAY_NAMES","updateSections","updateSpriteCardTitles","altKey","handleRedo","handleUndo","handleCopy","handlePaste","handleCut","handleClearSelection","handleMoveSelection","saveProjectStateImmediate","change","refreshInstance","getNormalizedSelection","destX","destY","isInBounds","newMinX","newMinY","newMaxX","newMaxY","srcX","srcY","pixelData","onNew","handleNew","onSave","handleSave","onLoad","handleLoad","onExport","handleExport","handleSaveLayoutSlot","handleLoadLayoutSlot","handleScaleChange","onColorSelect","colorsPerRow","swatchSize","totalColors","bestSize","bestCols","bestRows","cols","rowsNeeded","maxWidthPerSwatch","maxHeightPerSwatch","maxSize","redrawContent","totalSwatches","col","swatchX","swatchY","swatch","setSelectedColorIndex","newPalette","createPaletteCard","infoY","infoBarWidth","sections","updateInfoSections","createText","bitmapText","section","labelText","valueText","newSections","createInfoBarCard","loadProjectState","saveResult","loadedIds","sheetState","createNewProject","loadProjectFile","loadedState","layoutState","cardLayout","reload","selectShape","selectColor","copy","paste","cut","moveSelection","clickNew","clickPico8","clickTic80","clickSave","clickLoad","clickExport","clickLayout","refreshTheme","getPalette","hasChanges","getSpriteSheetCount","ASSETS","PIXEL_OPERATOR8_FONT","KENNEY_BLOCKS_FONT","themeUtils","getTheme","getThemeInfo","app","getElementById","spriteEditor","maxSpriteSheets","initPikcell","pikcell","catch"],"sourceRoot":""}