{"version":3,"file":"891.bundle.js","mappings":"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","sources":["webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/mesh-plane/PlaneGeometry.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-nine-slice/NineSliceGeometry.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-nine-slice/NineSliceSpritePipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-nine-slice/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/utils/getPo2TextureFromSource.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/mesh/shared/MeshGeometry.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/gl/GlParticleContainerAdaptor.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/utils/createIndicesForQuads.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/utils/generateParticleUpdateFunction.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/ParticleBuffer.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/shader/particles.wgsl.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/shader/ParticleShader.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/shader/particles.vert.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/shader/particles.frag.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/ParticleContainerPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/GlParticleContainerPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/gpu/GpuParticleContainerAdaptor.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/shared/GpuParticleContainerPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/particle-container/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/filters/FilterPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/filters/Filter.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/filters/defaults/defaultFilter.vert.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/filters/defaults/passthrough/passthrough.wgsl.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/filters/defaults/passthrough/PassthroughFilter.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/filters/defaults/passthrough/passthrough.frag.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/container/bounds/getRenderableBounds.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/filters/FilterSystem.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/filters/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/utils/updateTextBounds.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/mesh/shared/MeshPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/mesh/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/localUniformBit.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-tiling/shader/tilingBit.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-tiling/shader/TilingSpriteShader.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-tiling/utils/QuadGeometry.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-tiling/TilingSpritePipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-tiling/utils/setUvs.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-tiling/utils/applyMatrix.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-tiling/utils/setPositions.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite-tiling/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/graphics/shared/GraphicsPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/graphics/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/graphics/shared/Graphics.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/sdfShader/shader-bits/mSDFBit.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/sdfShader/SdfShader.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-bitmap/BitmapTextPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-bitmap/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/mesh/shared/BatchableMesh.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/app/ResizePlugin.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/app/TickerPlugin.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/app/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/graphics/gpu/colorToUniform.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/rendering/renderers/shared/state/State.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/BatchableHTMLText.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/HTMLTextPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/HTMLTextRenderData.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/utils/getFontCss.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/utils/measureHtmlText.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/HTMLTextSystem.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/utils/extractFontFamilies.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/utils/loadFontCSS.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/utils/loadFontAsBase64.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/utils/getSVGUrl.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/utils/loadSVGImage.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/utils/browser/isSafari.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/utils/getTemporaryCanvasFromImage.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text-html/init.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/sprite/BatchableSprite.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/canvas/BatchableText.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/canvas/CanvasTextPipe.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/utils/canvas/getCanvasBoundingBox.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/canvas/CanvasTextGenerator.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/canvas/CanvasTextSystem.mjs","webpack://moxi-examples/../../node_modules/pixi.js/lib/scene/text/init.mjs"],"sourcesContent":["import { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry.mjs';\n\n\"use strict\";\nconst _PlaneGeometry = class _PlaneGeometry extends MeshGeometry {\n  constructor(...args) {\n    super({});\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(v8_0_0, \"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead\");\n      options = {\n        width: options,\n        height: args[1],\n        verticesX: args[2],\n        verticesY: args[3]\n      };\n    }\n    this.build(options);\n  }\n  /**\n   * Refreshes plane coordinates\n   * @param options - Options to be applied to plane geometry\n   */\n  build(options) {\n    options = { ..._PlaneGeometry.defaultOptions, ...options };\n    this.verticesX = this.verticesX ?? options.verticesX;\n    this.verticesY = this.verticesY ?? options.verticesY;\n    this.width = this.width ?? options.width;\n    this.height = this.height ?? options.height;\n    const total = this.verticesX * this.verticesY;\n    const verts = [];\n    const uvs = [];\n    const indices = [];\n    const verticesX = this.verticesX - 1;\n    const verticesY = this.verticesY - 1;\n    const sizeX = this.width / verticesX;\n    const sizeY = this.height / verticesY;\n    for (let i = 0; i < total; i++) {\n      const x = i % this.verticesX;\n      const y = i / this.verticesX | 0;\n      verts.push(x * sizeX, y * sizeY);\n      uvs.push(x / verticesX, y / verticesY);\n    }\n    const totalSub = verticesX * verticesY;\n    for (let i = 0; i < totalSub; i++) {\n      const xpos = i % verticesX;\n      const ypos = i / verticesX | 0;\n      const value = ypos * this.verticesX + xpos;\n      const value2 = ypos * this.verticesX + xpos + 1;\n      const value3 = (ypos + 1) * this.verticesX + xpos;\n      const value4 = (ypos + 1) * this.verticesX + xpos + 1;\n      indices.push(\n        value,\n        value2,\n        value3,\n        value2,\n        value4,\n        value3\n      );\n    }\n    this.buffers[0].data = new Float32Array(verts);\n    this.buffers[1].data = new Float32Array(uvs);\n    this.indexBuffer.data = new Uint32Array(indices);\n    this.buffers[0].update();\n    this.buffers[1].update();\n    this.indexBuffer.update();\n  }\n};\n_PlaneGeometry.defaultOptions = {\n  width: 100,\n  height: 100,\n  verticesX: 10,\n  verticesY: 10\n};\nlet PlaneGeometry = _PlaneGeometry;\n\nexport { PlaneGeometry };\n//# sourceMappingURL=PlaneGeometry.mjs.map\n","import { PlaneGeometry } from '../mesh-plane/PlaneGeometry.mjs';\n\n\"use strict\";\nconst _NineSliceGeometry = class _NineSliceGeometry extends PlaneGeometry {\n  constructor(options = {}) {\n    options = { ..._NineSliceGeometry.defaultOptions, ...options };\n    super({\n      width: options.width,\n      height: options.height,\n      verticesX: 4,\n      verticesY: 4\n    });\n    this.update(options);\n  }\n  /**\n   * Updates the NineSliceGeometry with the options.\n   * @param options - The options of the NineSliceGeometry.\n   */\n  update(options) {\n    this.width = options.width ?? this.width;\n    this.height = options.height ?? this.height;\n    this._originalWidth = options.originalWidth ?? this._originalWidth;\n    this._originalHeight = options.originalHeight ?? this._originalHeight;\n    this._leftWidth = options.leftWidth ?? this._leftWidth;\n    this._rightWidth = options.rightWidth ?? this._rightWidth;\n    this._topHeight = options.topHeight ?? this._topHeight;\n    this._bottomHeight = options.bottomHeight ?? this._bottomHeight;\n    this._anchorX = options.anchor?.x;\n    this._anchorY = options.anchor?.y;\n    this.updateUvs();\n    this.updatePositions();\n  }\n  /** Updates the positions of the vertices. */\n  updatePositions() {\n    const p = this.positions;\n    const {\n      width,\n      height,\n      _leftWidth,\n      _rightWidth,\n      _topHeight,\n      _bottomHeight,\n      _anchorX,\n      _anchorY\n    } = this;\n    const w = _leftWidth + _rightWidth;\n    const scaleW = width > w ? 1 : width / w;\n    const h = _topHeight + _bottomHeight;\n    const scaleH = height > h ? 1 : height / h;\n    const scale = Math.min(scaleW, scaleH);\n    const anchorOffsetX = _anchorX * width;\n    const anchorOffsetY = _anchorY * height;\n    p[0] = p[8] = p[16] = p[24] = -anchorOffsetX;\n    p[2] = p[10] = p[18] = p[26] = _leftWidth * scale - anchorOffsetX;\n    p[4] = p[12] = p[20] = p[28] = width - _rightWidth * scale - anchorOffsetX;\n    p[6] = p[14] = p[22] = p[30] = width - anchorOffsetX;\n    p[1] = p[3] = p[5] = p[7] = -anchorOffsetY;\n    p[9] = p[11] = p[13] = p[15] = _topHeight * scale - anchorOffsetY;\n    p[17] = p[19] = p[21] = p[23] = height - _bottomHeight * scale - anchorOffsetY;\n    p[25] = p[27] = p[29] = p[31] = height - anchorOffsetY;\n    this.getBuffer(\"aPosition\").update();\n  }\n  /** Updates the UVs of the vertices. */\n  updateUvs() {\n    const uvs = this.uvs;\n    uvs[0] = uvs[8] = uvs[16] = uvs[24] = 0;\n    uvs[1] = uvs[3] = uvs[5] = uvs[7] = 0;\n    uvs[6] = uvs[14] = uvs[22] = uvs[30] = 1;\n    uvs[25] = uvs[27] = uvs[29] = uvs[31] = 1;\n    const _uvw = 1 / this._originalWidth;\n    const _uvh = 1 / this._originalHeight;\n    uvs[2] = uvs[10] = uvs[18] = uvs[26] = _uvw * this._leftWidth;\n    uvs[9] = uvs[11] = uvs[13] = uvs[15] = _uvh * this._topHeight;\n    uvs[4] = uvs[12] = uvs[20] = uvs[28] = 1 - _uvw * this._rightWidth;\n    uvs[17] = uvs[19] = uvs[21] = uvs[23] = 1 - _uvh * this._bottomHeight;\n    this.getBuffer(\"aUV\").update();\n  }\n};\n/** The default options for the NineSliceGeometry. */\n_NineSliceGeometry.defaultOptions = {\n  /** The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n  width: 100,\n  /** The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n  height: 100,\n  /** The width of the left column. */\n  leftWidth: 10,\n  /** The height of the top row. */\n  topHeight: 10,\n  /** The width of the right column. */\n  rightWidth: 10,\n  /** The height of the bottom row. */\n  bottomHeight: 10,\n  /** The original width of the texture */\n  originalWidth: 100,\n  /** The original height of the texture */\n  originalHeight: 100\n};\nlet NineSliceGeometry = _NineSliceGeometry;\n\nexport { NineSliceGeometry };\n//# sourceMappingURL=NineSliceGeometry.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh.mjs';\nimport { NineSliceGeometry } from './NineSliceGeometry.mjs';\n\n\"use strict\";\nclass NineSliceSpriteGpuData extends BatchableMesh {\n  constructor() {\n    super();\n    this.geometry = new NineSliceGeometry();\n  }\n  destroy() {\n    this.geometry.destroy();\n  }\n}\nclass NineSliceSpritePipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  addRenderable(sprite, instructionSet) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    this._renderer.renderPipes.batch.addToBatch(gpuSprite, instructionSet);\n  }\n  updateRenderable(sprite) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    gpuSprite._batcher.updateElement(gpuSprite);\n  }\n  validateRenderable(sprite) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    return !gpuSprite._batcher.checkAndUpdateTexture(\n      gpuSprite,\n      sprite._texture\n    );\n  }\n  _updateBatchableSprite(sprite, batchableSprite) {\n    batchableSprite.geometry.update(sprite);\n    batchableSprite.setTexture(sprite._texture);\n  }\n  _getGpuSprite(sprite) {\n    return sprite._gpuData[this._renderer.uid] || this._initGPUSprite(sprite);\n  }\n  _initGPUSprite(sprite) {\n    const gpuData = sprite._gpuData[this._renderer.uid] = new NineSliceSpriteGpuData();\n    const batchableMesh = gpuData;\n    batchableMesh.renderable = sprite;\n    batchableMesh.transform = sprite.groupTransform;\n    batchableMesh.texture = sprite._texture;\n    batchableMesh.roundPixels = this._renderer._roundPixels | sprite._roundPixels;\n    if (!sprite.didViewUpdate) {\n      this._updateBatchableSprite(sprite, batchableMesh);\n    }\n    return gpuData;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nNineSliceSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"nineSliceSprite\"\n};\n\nexport { NineSliceSpriteGpuData, NineSliceSpritePipe };\n//# sourceMappingURL=NineSliceSpritePipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { NineSliceSpritePipe } from './NineSliceSpritePipe.mjs';\n\n\"use strict\";\nextensions.add(NineSliceSpritePipe);\n//# sourceMappingURL=init.mjs.map\n","import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction getPo2TextureFromSource(image, width, height, resolution) {\n  const bounds = tempBounds;\n  bounds.minX = 0;\n  bounds.minY = 0;\n  bounds.maxX = image.width / resolution | 0;\n  bounds.maxY = image.height / resolution | 0;\n  const texture = TexturePool.getOptimalTexture(\n    bounds.width,\n    bounds.height,\n    resolution,\n    false\n  );\n  texture.source.uploadMethodId = \"image\";\n  texture.source.resource = image;\n  texture.source.alphaMode = \"premultiply-alpha-on-upload\";\n  texture.frame.width = width / resolution;\n  texture.frame.height = height / resolution;\n  texture.source.emit(\"update\", texture.source);\n  texture.updateUvs();\n  return texture;\n}\n\nexport { getPo2TextureFromSource };\n//# sourceMappingURL=getPo2TextureFromSource.mjs.map\n","import { Buffer } from '../../../rendering/renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../../rendering/renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst _MeshGeometry = class _MeshGeometry extends Geometry {\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (options instanceof Float32Array) {\n      deprecation(v8_0_0, \"use new MeshGeometry({ positions, uvs, indices }) instead\");\n      options = {\n        positions: options,\n        uvs: args[1],\n        indices: args[2]\n      };\n    }\n    options = { ..._MeshGeometry.defaultOptions, ...options };\n    const positions = options.positions || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n    let uvs = options.uvs;\n    if (!uvs) {\n      if (options.positions) {\n        uvs = new Float32Array(positions.length);\n      } else {\n        uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n      }\n    }\n    const indices = options.indices || new Uint32Array([0, 1, 2, 0, 2, 3]);\n    const shrinkToFit = options.shrinkBuffersToFit;\n    const positionBuffer = new Buffer({\n      data: positions,\n      label: \"attribute-mesh-positions\",\n      shrinkToFit,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    const uvBuffer = new Buffer({\n      data: uvs,\n      label: \"attribute-mesh-uvs\",\n      shrinkToFit,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    const indexBuffer = new Buffer({\n      data: indices,\n      label: \"index-mesh-buffer\",\n      shrinkToFit,\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST\n    });\n    super({\n      attributes: {\n        aPosition: {\n          buffer: positionBuffer,\n          format: \"float32x2\",\n          stride: 2 * 4,\n          offset: 0\n        },\n        aUV: {\n          buffer: uvBuffer,\n          format: \"float32x2\",\n          stride: 2 * 4,\n          offset: 0\n        }\n      },\n      indexBuffer,\n      topology: options.topology\n    });\n    this.batchMode = \"auto\";\n  }\n  /** The positions of the mesh. */\n  get positions() {\n    return this.attributes.aPosition.buffer.data;\n  }\n  /**\n   * Set the positions of the mesh.\n   * When setting the positions, its important that the uvs array is at least as long as the positions array.\n   * otherwise the geometry will not be valid.\n   * @param {Float32Array} value - The positions of the mesh.\n   */\n  set positions(value) {\n    this.attributes.aPosition.buffer.data = value;\n  }\n  /** The UVs of the mesh. */\n  get uvs() {\n    return this.attributes.aUV.buffer.data;\n  }\n  /**\n   * Set the UVs of the mesh.\n   * Its important that the uvs array you set is at least as long as the positions array.\n   * otherwise the geometry will not be valid.\n   * @param {Float32Array} value - The UVs of the mesh.\n   */\n  set uvs(value) {\n    this.attributes.aUV.buffer.data = value;\n  }\n  /** The indices of the mesh. */\n  get indices() {\n    return this.indexBuffer.data;\n  }\n  set indices(value) {\n    this.indexBuffer.data = value;\n  }\n};\n_MeshGeometry.defaultOptions = {\n  topology: \"triangle-list\",\n  shrinkBuffersToFit: false\n};\nlet MeshGeometry = _MeshGeometry;\n\nexport { MeshGeometry };\n//# sourceMappingURL=MeshGeometry.mjs.map\n","\"use strict\";\nclass GlParticleContainerAdaptor {\n  execute(particleContainerPipe, container) {\n    const state = particleContainerPipe.state;\n    const renderer = particleContainerPipe.renderer;\n    const shader = container.shader || particleContainerPipe.defaultShader;\n    shader.resources.uTexture = container.texture._source;\n    shader.resources.uniforms = particleContainerPipe.localUniforms;\n    const gl = renderer.gl;\n    const buffer = particleContainerPipe.getBuffers(container);\n    renderer.shader.bind(shader);\n    renderer.state.set(state);\n    renderer.geometry.bind(buffer.geometry, shader.glProgram);\n    const byteSize = buffer.geometry.indexBuffer.data.BYTES_PER_ELEMENT;\n    const glType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;\n    gl.drawElements(gl.TRIANGLES, container.particleChildren.length * 6, glType, 0);\n  }\n}\n\nexport { GlParticleContainerAdaptor };\n//# sourceMappingURL=GlParticleContainerAdaptor.mjs.map\n","\"use strict\";\nfunction createIndicesForQuads(size, outBuffer = null) {\n  const totalIndices = size * 6;\n  if (totalIndices > 65535) {\n    outBuffer || (outBuffer = new Uint32Array(totalIndices));\n  } else {\n    outBuffer || (outBuffer = new Uint16Array(totalIndices));\n  }\n  if (outBuffer.length !== totalIndices) {\n    throw new Error(`Out buffer length is incorrect, got ${outBuffer.length} and expected ${totalIndices}`);\n  }\n  for (let i = 0, j = 0; i < totalIndices; i += 6, j += 4) {\n    outBuffer[i + 0] = j + 0;\n    outBuffer[i + 1] = j + 1;\n    outBuffer[i + 2] = j + 2;\n    outBuffer[i + 3] = j + 0;\n    outBuffer[i + 4] = j + 2;\n    outBuffer[i + 5] = j + 3;\n  }\n  return outBuffer;\n}\n\nexport { createIndicesForQuads };\n//# sourceMappingURL=createIndicesForQuads.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../../rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nfunction generateParticleUpdateFunction(properties) {\n  return {\n    dynamicUpdate: generateUpdateFunction(properties, true),\n    staticUpdate: generateUpdateFunction(properties, false)\n  };\n}\nfunction generateUpdateFunction(properties, dynamic) {\n  const funcFragments = [];\n  funcFragments.push(`\n\n        var index = 0;\n\n        for (let i = 0; i < ps.length; ++i)\n        {\n            const p = ps[i];\n\n            `);\n  let offset = 0;\n  for (const i in properties) {\n    const property = properties[i];\n    if (dynamic !== property.dynamic)\n      continue;\n    funcFragments.push(`offset = index + ${offset}`);\n    funcFragments.push(property.code);\n    const attributeInfo = getAttributeInfoFromFormat(property.format);\n    offset += attributeInfo.stride / 4;\n  }\n  funcFragments.push(`\n            index += stride * 4;\n        }\n    `);\n  funcFragments.unshift(`\n        var stride = ${offset};\n    `);\n  const functionSource = funcFragments.join(\"\\n\");\n  return new Function(\"ps\", \"f32v\", \"u32v\", functionSource);\n}\n\nexport { generateParticleUpdateFunction };\n//# sourceMappingURL=generateParticleUpdateFunction.mjs.map\n","import { Buffer } from '../../../rendering/renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../../rendering/renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { getAttributeInfoFromFormat } from '../../../rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer.mjs';\nimport { createIndicesForQuads } from './utils/createIndicesForQuads.mjs';\nimport { generateParticleUpdateFunction } from './utils/generateParticleUpdateFunction.mjs';\n\n\"use strict\";\nclass ParticleBuffer {\n  constructor(options) {\n    this._size = 0;\n    this._generateParticleUpdateCache = {};\n    const size = this._size = options.size ?? 1e3;\n    const properties = options.properties;\n    let staticVertexSize = 0;\n    let dynamicVertexSize = 0;\n    for (const i in properties) {\n      const property = properties[i];\n      const attributeInfo = getAttributeInfoFromFormat(property.format);\n      if (property.dynamic) {\n        dynamicVertexSize += attributeInfo.stride;\n      } else {\n        staticVertexSize += attributeInfo.stride;\n      }\n    }\n    this._dynamicStride = dynamicVertexSize / 4;\n    this._staticStride = staticVertexSize / 4;\n    this.staticAttributeBuffer = new ViewableBuffer(size * 4 * staticVertexSize);\n    this.dynamicAttributeBuffer = new ViewableBuffer(size * 4 * dynamicVertexSize);\n    this.indexBuffer = createIndicesForQuads(size);\n    const geometry = new Geometry();\n    let dynamicOffset = 0;\n    let staticOffset = 0;\n    this._staticBuffer = new Buffer({\n      data: new Float32Array(1),\n      label: \"static-particle-buffer\",\n      shrinkToFit: false,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    this._dynamicBuffer = new Buffer({\n      data: new Float32Array(1),\n      label: \"dynamic-particle-buffer\",\n      shrinkToFit: false,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    for (const i in properties) {\n      const property = properties[i];\n      const attributeInfo = getAttributeInfoFromFormat(property.format);\n      if (property.dynamic) {\n        geometry.addAttribute(property.attributeName, {\n          buffer: this._dynamicBuffer,\n          stride: this._dynamicStride * 4,\n          offset: dynamicOffset * 4,\n          format: property.format\n        });\n        dynamicOffset += attributeInfo.size;\n      } else {\n        geometry.addAttribute(property.attributeName, {\n          buffer: this._staticBuffer,\n          stride: this._staticStride * 4,\n          offset: staticOffset * 4,\n          format: property.format\n        });\n        staticOffset += attributeInfo.size;\n      }\n    }\n    geometry.addIndex(this.indexBuffer);\n    const uploadFunction = this.getParticleUpdate(properties);\n    this._dynamicUpload = uploadFunction.dynamicUpdate;\n    this._staticUpload = uploadFunction.staticUpdate;\n    this.geometry = geometry;\n  }\n  getParticleUpdate(properties) {\n    const key = getParticleSyncKey(properties);\n    if (this._generateParticleUpdateCache[key]) {\n      return this._generateParticleUpdateCache[key];\n    }\n    this._generateParticleUpdateCache[key] = this.generateParticleUpdate(properties);\n    return this._generateParticleUpdateCache[key];\n  }\n  generateParticleUpdate(properties) {\n    return generateParticleUpdateFunction(properties);\n  }\n  update(particles, uploadStatic) {\n    if (particles.length > this._size) {\n      uploadStatic = true;\n      this._size = Math.max(particles.length, this._size * 1.5 | 0);\n      this.staticAttributeBuffer = new ViewableBuffer(this._size * this._staticStride * 4 * 4);\n      this.dynamicAttributeBuffer = new ViewableBuffer(this._size * this._dynamicStride * 4 * 4);\n      this.indexBuffer = createIndicesForQuads(this._size);\n      this.geometry.indexBuffer.setDataWithSize(\n        this.indexBuffer,\n        this.indexBuffer.byteLength,\n        true\n      );\n    }\n    const dynamicAttributeBuffer = this.dynamicAttributeBuffer;\n    this._dynamicUpload(particles, dynamicAttributeBuffer.float32View, dynamicAttributeBuffer.uint32View);\n    this._dynamicBuffer.setDataWithSize(\n      this.dynamicAttributeBuffer.float32View,\n      particles.length * this._dynamicStride * 4,\n      true\n    );\n    if (uploadStatic) {\n      const staticAttributeBuffer = this.staticAttributeBuffer;\n      this._staticUpload(particles, staticAttributeBuffer.float32View, staticAttributeBuffer.uint32View);\n      this._staticBuffer.setDataWithSize(\n        staticAttributeBuffer.float32View,\n        particles.length * this._staticStride * 4,\n        true\n      );\n    }\n  }\n  destroy() {\n    this._staticBuffer.destroy();\n    this._dynamicBuffer.destroy();\n    this.geometry.destroy();\n  }\n}\nfunction getParticleSyncKey(properties) {\n  const keyGen = [];\n  for (const key in properties) {\n    const property = properties[key];\n    keyGen.push(key, property.code, property.dynamic ? \"d\" : \"s\");\n  }\n  return keyGen.join(\"_\");\n}\n\nexport { ParticleBuffer };\n//# sourceMappingURL=ParticleBuffer.mjs.map\n","var wgsl = \"\\nstruct ParticleUniforms {\\n  uTranslationMatrix:mat3x3<f32>,\\n  uColor:vec4<f32>,\\n  uRound:f32,\\n  uResolution:vec2<f32>,\\n};\\n\\nfn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>\\n{\\n  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\\n}\\n\\n@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;\\n\\n@group(1) @binding(0) var uTexture: texture_2d<f32>;\\n@group(1) @binding(1) var uSampler : sampler;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>,\\n    @location(1) color : vec4<f32>,\\n  };\\n@vertex\\nfn mainVertex(\\n  @location(0) aVertex: vec2<f32>,\\n  @location(1) aPosition: vec2<f32>,\\n  @location(2) aUV: vec2<f32>,\\n  @location(3) aColor: vec4<f32>,\\n  @location(4) aRotation: f32,\\n) -> VSOutput {\\n  \\n   let v = vec2(\\n       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),\\n       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)\\n   ) + aPosition;\\n\\n   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\\n\\n   if(uniforms.uRound == 1.0) {\\n       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);\\n   }\\n\\n    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;\\n\\n  return VSOutput(\\n   position,\\n   aUV,\\n   vColor,\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @location(1) color: vec4<f32>,\\n  @builtin(position) position: vec4<f32>,\\n) -> @location(0) vec4<f32> {\\n\\n    var sample = textureSample(uTexture, uSampler, uv) * color;\\n   \\n    return sample;\\n}\";\n\nexport { wgsl as default };\n//# sourceMappingURL=particles.wgsl.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { GlProgram } from '../../../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../../../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Shader } from '../../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { TextureStyle } from '../../../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport fragment from './particles.frag.mjs';\nimport vertex from './particles.vert.mjs';\nimport wgsl from './particles.wgsl.mjs';\n\n\"use strict\";\nclass ParticleShader extends Shader {\n  constructor() {\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment\n    });\n    const gpuProgram = GpuProgram.from({\n      fragment: {\n        source: wgsl,\n        entryPoint: \"mainFragment\"\n      },\n      vertex: {\n        source: wgsl,\n        entryPoint: \"mainVertex\"\n      }\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        // this will be replaced with the texture from the particle container\n        uTexture: Texture.WHITE.source,\n        // this will be replaced with the texture style from the particle container\n        uSampler: new TextureStyle({}),\n        // this will be replaced with the local uniforms from the particle container\n        uniforms: {\n          uTranslationMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n          uColor: { value: new Color(16777215), type: \"vec4<f32>\" },\n          uRound: { value: 1, type: \"f32\" },\n          uResolution: { value: [0, 0], type: \"vec2<f32>\" }\n        }\n      }\n    });\n  }\n}\n\nexport { ParticleShader };\n//# sourceMappingURL=ParticleShader.mjs.map\n","var vertex = \"attribute vec2 aVertex;\\nattribute vec2 aUV;\\nattribute vec4 aColor;\\n\\nattribute vec2 aPosition;\\nattribute float aRotation;\\n\\nuniform mat3 uTranslationMatrix;\\nuniform float uRound;\\nuniform vec2 uResolution;\\nuniform vec4 uColor;\\n\\nvarying vec2 vUV;\\nvarying vec4 vColor;\\n\\nvec2 roundPixels(vec2 position, vec2 targetSize)\\n{       \\n    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\\n}\\n\\nvoid main(void){\\n    float cosRotation = cos(aRotation);\\n    float sinRotation = sin(aRotation);\\n    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;\\n    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;\\n\\n    vec2 v = vec2(x, y);\\n    v = v + aPosition;\\n\\n    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\\n\\n    if(uRound == 1.0)\\n    {\\n        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\\n    }\\n\\n    vUV = aUV;\\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=particles.vert.mjs.map\n","var fragment = \"varying vec2 vUV;\\nvarying vec4 vColor;\\n\\nuniform sampler2D uTexture;\\n\\nvoid main(void){\\n    vec4 color = texture2D(uTexture, vUV) * vColor;\\n    gl_FragColor = color;\\n}\";\n\nexport { fragment as default };\n//# sourceMappingURL=particles.frag.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { getAdjustedBlendModeBlend } from '../../../rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { State } from '../../../rendering/renderers/shared/state/State.mjs';\nimport { color32BitToUniform } from '../../graphics/gpu/colorToUniform.mjs';\nimport { ParticleBuffer } from './ParticleBuffer.mjs';\nimport { ParticleShader } from './shader/ParticleShader.mjs';\n\n\"use strict\";\nclass ParticleContainerPipe {\n  /**\n   * @param renderer - The renderer this sprite batch works for.\n   * @param adaptor\n   */\n  constructor(renderer, adaptor) {\n    /** @internal */\n    this.state = State.for2d();\n    /** Local uniforms that are used for rendering particles. */\n    this.localUniforms = new UniformGroup({\n      uTranslationMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uColor: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uRound: { value: 1, type: \"f32\" },\n      uResolution: { value: [0, 0], type: \"vec2<f32>\" }\n    });\n    this.renderer = renderer;\n    this.adaptor = adaptor;\n    this.defaultShader = new ParticleShader();\n    this.state = State.for2d();\n  }\n  validateRenderable(_renderable) {\n    return false;\n  }\n  addRenderable(renderable, instructionSet) {\n    this.renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add(renderable);\n  }\n  getBuffers(renderable) {\n    return renderable._gpuData[this.renderer.uid] || this._initBuffer(renderable);\n  }\n  _initBuffer(renderable) {\n    renderable._gpuData[this.renderer.uid] = new ParticleBuffer({\n      size: renderable.particleChildren.length,\n      properties: renderable._properties\n    });\n    return renderable._gpuData[this.renderer.uid];\n  }\n  updateRenderable(_renderable) {\n  }\n  execute(container) {\n    const children = container.particleChildren;\n    if (children.length === 0) {\n      return;\n    }\n    const renderer = this.renderer;\n    const buffer = this.getBuffers(container);\n    container.texture || (container.texture = children[0].texture);\n    const state = this.state;\n    buffer.update(children, container._childrenDirty);\n    container._childrenDirty = false;\n    state.blendMode = getAdjustedBlendModeBlend(container.blendMode, container.texture._source);\n    const uniforms = this.localUniforms.uniforms;\n    const transformationMatrix = uniforms.uTranslationMatrix;\n    container.worldTransform.copyTo(transformationMatrix);\n    transformationMatrix.prepend(renderer.globalUniforms.globalUniformData.projectionMatrix);\n    uniforms.uResolution = renderer.globalUniforms.globalUniformData.resolution;\n    uniforms.uRound = renderer._roundPixels | container._roundPixels;\n    color32BitToUniform(\n      container.groupColorAlpha,\n      uniforms.uColor,\n      0\n    );\n    this.adaptor.execute(this, container);\n  }\n  /** Destroys the ParticleRenderer. */\n  destroy() {\n    this.renderer = null;\n    if (this.defaultShader) {\n      this.defaultShader.destroy();\n      this.defaultShader = null;\n    }\n  }\n}\n\nexport { ParticleContainerPipe };\n//# sourceMappingURL=ParticleContainerPipe.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GlParticleContainerAdaptor } from '../gl/GlParticleContainerAdaptor.mjs';\nimport { ParticleContainerPipe } from './ParticleContainerPipe.mjs';\n\n\"use strict\";\nclass GlParticleContainerPipe extends ParticleContainerPipe {\n  constructor(renderer) {\n    super(renderer, new GlParticleContainerAdaptor());\n  }\n}\n/** @ignore */\nGlParticleContainerPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes\n  ],\n  name: \"particle\"\n};\n\nexport { GlParticleContainerPipe };\n//# sourceMappingURL=GlParticleContainerPipe.mjs.map\n","\"use strict\";\nclass GpuParticleContainerAdaptor {\n  execute(particleContainerPipe, container) {\n    const renderer = particleContainerPipe.renderer;\n    const shader = container.shader || particleContainerPipe.defaultShader;\n    shader.groups[0] = renderer.renderPipes.uniformBatch.getUniformBindGroup(particleContainerPipe.localUniforms, true);\n    shader.groups[1] = renderer.texture.getTextureBindGroup(container.texture);\n    const state = particleContainerPipe.state;\n    const buffer = particleContainerPipe.getBuffers(container);\n    renderer.encoder.draw({\n      geometry: buffer.geometry,\n      shader: container.shader || particleContainerPipe.defaultShader,\n      state,\n      size: container.particleChildren.length * 6\n    });\n  }\n}\n\nexport { GpuParticleContainerAdaptor };\n//# sourceMappingURL=GpuParticleContainerAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GpuParticleContainerAdaptor } from '../gpu/GpuParticleContainerAdaptor.mjs';\nimport { ParticleContainerPipe } from './ParticleContainerPipe.mjs';\n\n\"use strict\";\nclass GpuParticleContainerPipe extends ParticleContainerPipe {\n  constructor(renderer) {\n    super(renderer, new GpuParticleContainerAdaptor());\n  }\n}\n/** @ignore */\nGpuParticleContainerPipe.extension = {\n  type: [\n    ExtensionType.WebGPUPipes\n  ],\n  name: \"particle\"\n};\n\nexport { GpuParticleContainerPipe };\n//# sourceMappingURL=GpuParticleContainerPipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { GlParticleContainerPipe } from './shared/GlParticleContainerPipe.mjs';\nimport { GpuParticleContainerPipe } from './shared/GpuParticleContainerPipe.mjs';\n\n\"use strict\";\nextensions.add(GlParticleContainerPipe);\nextensions.add(GpuParticleContainerPipe);\n//# sourceMappingURL=init.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nclass FilterPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  push(filterEffect, container, instructionSet) {\n    const renderPipes = this._renderer.renderPipes;\n    renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"filter\",\n      canBundle: false,\n      action: \"pushFilter\",\n      container,\n      filterEffect\n    });\n  }\n  pop(_filterEffect, _container, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"filter\",\n      action: \"popFilter\",\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    if (instruction.action === \"pushFilter\") {\n      this._renderer.filter.push(instruction);\n    } else if (instruction.action === \"popFilter\") {\n      this._renderer.filter.pop();\n    }\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\nFilterPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"filter\"\n};\n\nexport { FilterPipe };\n//# sourceMappingURL=FilterPipe.mjs.map\n","import { GlProgram } from '../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Shader } from '../rendering/renderers/shared/shader/Shader.mjs';\nimport { State } from '../rendering/renderers/shared/state/State.mjs';\n\n\"use strict\";\nconst _Filter = class _Filter extends Shader {\n  /**\n   * @param options - The optional parameters of this filter.\n   */\n  constructor(options) {\n    options = { ..._Filter.defaultOptions, ...options };\n    super(options);\n    /** If enabled is true the filter is applied, if false it will not. */\n    this.enabled = true;\n    /**\n     * The gpu state the filter requires to render.\n     * @internal\n     */\n    this._state = State.for2d();\n    this.blendMode = options.blendMode;\n    this.padding = options.padding;\n    if (typeof options.antialias === \"boolean\") {\n      this.antialias = options.antialias ? \"on\" : \"off\";\n    } else {\n      this.antialias = options.antialias;\n    }\n    this.resolution = options.resolution;\n    this.blendRequired = options.blendRequired;\n    this.clipToViewport = options.clipToViewport;\n    this.addResource(\"uTexture\", 0, 1);\n  }\n  /**\n   * Applies the filter\n   * @param filterManager - The renderer to retrieve the filter from\n   * @param input - The input render target.\n   * @param output - The target to output to.\n   * @param clearMode - Should the output be cleared before rendering to it\n   */\n  apply(filterManager, input, output, clearMode) {\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Get the blend mode of the filter.\n   * @default \"normal\"\n   */\n  get blendMode() {\n    return this._state.blendMode;\n  }\n  /** Sets the blend mode of the filter. */\n  set blendMode(value) {\n    this._state.blendMode = value;\n  }\n  /**\n   * A short hand function to create a filter based of a vertex and fragment shader src.\n   * @param options\n   * @returns A shiny new PixiJS filter!\n   */\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new _Filter({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n};\n/** The default filter settings */\n_Filter.defaultOptions = {\n  blendMode: \"normal\",\n  resolution: 1,\n  padding: 0,\n  antialias: \"off\",\n  blendRequired: false,\n  clipToViewport: true\n};\nlet Filter = _Filter;\n\nexport { Filter };\n//# sourceMappingURL=Filter.mjs.map\n","var vertex = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=defaultFilter.vert.mjs.map\n","var source = \"struct GlobalFilterUniforms {\\n  uInputSize: vec4<f32>,\\n  uInputPixel: vec4<f32>,\\n  uInputClamp: vec4<f32>,\\n  uOutputFrame: vec4<f32>,\\n  uGlobalFrame: vec4<f32>,\\n  uOutputTexture: vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var <uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler: sampler;\\n\\nstruct VSOutput {\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv: vec2<f32>\\n};\\n\\nfn filterVertexPosition(aPosition: vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0 * gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord(aPosition: vec2<f32>) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition: vec2<f32>,\\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n) -> @location(0) vec4<f32> {\\n    return textureSample(uTexture, uSampler, uv);\\n}\\n\";\n\nexport { source as default };\n//# sourceMappingURL=passthrough.wgsl.mjs.map\n","import { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Filter } from '../../Filter.mjs';\nimport vertex from '../defaultFilter.vert.mjs';\nimport fragment from './passthrough.frag.mjs';\nimport source from './passthrough.wgsl.mjs';\n\n\"use strict\";\nclass PassthroughFilter extends Filter {\n  constructor() {\n    const gpuProgram = GpuProgram.from({\n      vertex: { source, entryPoint: \"mainVertex\" },\n      fragment: { source, entryPoint: \"mainFragment\" },\n      name: \"passthrough-filter\"\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"passthrough-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram\n    });\n  }\n}\n\nexport { PassthroughFilter };\n//# sourceMappingURL=PassthroughFilter.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\nuniform sampler2D uTexture;\\nvoid main() {\\n    finalColor = texture(uTexture, vTextureCoord);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=passthrough.frag.mjs.map\n","import '../../../maths/index.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\n\n\"use strict\";\nconst tempProjectionMatrix = new Matrix();\nfunction getGlobalRenderableBounds(renderables, bounds) {\n  bounds.clear();\n  const actualMatrix = bounds.matrix;\n  for (let i = 0; i < renderables.length; i++) {\n    const renderable = renderables[i];\n    if (renderable.globalDisplayStatus < 7) {\n      continue;\n    }\n    const renderGroup = renderable.renderGroup ?? renderable.parentRenderGroup;\n    if (renderGroup?.isCachedAsTexture) {\n      bounds.matrix = tempProjectionMatrix.copyFrom(renderGroup.textureOffsetInverseTransform).append(renderable.worldTransform);\n    } else if (renderGroup?._parentCacheAsTextureRenderGroup) {\n      bounds.matrix = tempProjectionMatrix.copyFrom(renderGroup._parentCacheAsTextureRenderGroup.inverseWorldTransform).append(renderable.groupTransform);\n    } else {\n      bounds.matrix = renderable.worldTransform;\n    }\n    bounds.addBounds(renderable.bounds);\n  }\n  bounds.matrix = actualMatrix;\n  return bounds;\n}\n\nexport { getGlobalRenderableBounds };\n//# sourceMappingURL=getRenderableBounds.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { PassthroughFilter } from './defaults/passthrough/PassthroughFilter.mjs';\nimport { Matrix } from '../maths/matrix/Matrix.mjs';\nimport { BindGroup } from '../rendering/renderers/gpu/shader/BindGroup.mjs';\nimport { Geometry } from '../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { UniformGroup } from '../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { TexturePool } from '../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../rendering/renderers/types.mjs';\nimport { Bounds } from '../scene/container/bounds/Bounds.mjs';\nimport { getGlobalRenderableBounds } from '../scene/container/bounds/getRenderableBounds.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\n\n\"use strict\";\nconst quadGeometry = new Geometry({\n  attributes: {\n    aPosition: {\n      buffer: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      format: \"float32x2\",\n      stride: 2 * 4,\n      offset: 0\n    }\n  },\n  indexBuffer: new Uint32Array([0, 1, 2, 0, 2, 3])\n});\nclass FilterData {\n  constructor() {\n    /**\n     * Indicates whether the filter should be skipped.\n     * @type {boolean}\n     */\n    this.skip = false;\n    /**\n     * The texture to which the filter is applied.\n     * @type {Texture}\n     */\n    this.inputTexture = null;\n    /**\n     * The back texture used for blending, if required.\n     * @type {Texture | null}\n     */\n    this.backTexture = null;\n    /**\n     * The list of filters to be applied.\n     * @type {Filter[]}\n     */\n    this.filters = null;\n    /**\n     * The bounds of the filter area.\n     * @type {Bounds}\n     */\n    this.bounds = new Bounds();\n    /**\n     * The container to which the filter is applied.\n     * @type {Container}\n     */\n    this.container = null;\n    /**\n     * Indicates whether blending is required for the filter.\n     * @type {boolean}\n     */\n    this.blendRequired = false;\n    /**\n     * The render surface where the output of the filter is rendered.\n     * @type {RenderSurface}\n     */\n    this.outputRenderSurface = null;\n    /**\n     * The global frame of the filter area.\n     * @type {{ x: number, y: number, width: number, height: number }}\n     */\n    this.globalFrame = { x: 0, y: 0, width: 0, height: 0 };\n    /** The first enabled filter index in the current filter list. */\n    this.firstEnabledIndex = -1;\n    /** The last enabled filter index in the current filter list. */\n    this.lastEnabledIndex = -1;\n  }\n}\nclass FilterSystem {\n  constructor(renderer) {\n    this._filterStackIndex = 0;\n    this._filterStack = [];\n    this._filterGlobalUniforms = new UniformGroup({\n      uInputSize: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uInputPixel: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uInputClamp: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uOutputFrame: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uGlobalFrame: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uOutputTexture: { value: new Float32Array(4), type: \"vec4<f32>\" }\n    });\n    this._globalFilterBindGroup = new BindGroup({});\n    this.renderer = renderer;\n  }\n  /**\n   * The back texture of the currently active filter. Requires the filter to have `blendRequired` set to true.\n   * @readonly\n   */\n  get activeBackTexture() {\n    return this._activeFilterData?.backTexture;\n  }\n  /**\n   * Pushes a filter instruction onto the filter stack.\n   * @param instruction - The instruction containing the filter effect and container.\n   * @internal\n   */\n  push(instruction) {\n    const renderer = this.renderer;\n    const filters = instruction.filterEffect.filters;\n    const filterData = this._pushFilterData();\n    filterData.skip = false;\n    filterData.filters = filters;\n    filterData.container = instruction.container;\n    filterData.outputRenderSurface = renderer.renderTarget.renderSurface;\n    const colorTextureSource = renderer.renderTarget.renderTarget.colorTexture.source;\n    const rootResolution = colorTextureSource.resolution;\n    const rootAntialias = colorTextureSource.antialias;\n    if (filters.every((filter) => !filter.enabled)) {\n      filterData.skip = true;\n      return;\n    }\n    const bounds = filterData.bounds;\n    this._calculateFilterArea(instruction, bounds);\n    this._calculateFilterBounds(filterData, renderer.renderTarget.rootViewPort, rootAntialias, rootResolution, 1);\n    if (filterData.skip) {\n      return;\n    }\n    const previousFilterData = this._getPreviousFilterData();\n    const globalResolution = this._findFilterResolution(rootResolution);\n    let offsetX = 0;\n    let offsetY = 0;\n    if (previousFilterData) {\n      offsetX = previousFilterData.bounds.minX;\n      offsetY = previousFilterData.bounds.minY;\n    }\n    this._calculateGlobalFrame(\n      filterData,\n      offsetX,\n      offsetY,\n      globalResolution,\n      colorTextureSource.width,\n      colorTextureSource.height\n    );\n    this._setupFilterTextures(filterData, bounds, renderer, previousFilterData);\n  }\n  /**\n   * Applies filters to a texture.\n   *\n   * This method takes a texture and a list of filters, applies the filters to the texture,\n   * and returns the resulting texture.\n   * @param {object} params - The parameters for applying filters.\n   * @param {Texture} params.texture - The texture to apply filters to.\n   * @param {Filter[]} params.filters - The filters to apply.\n   * @returns {Texture} The resulting texture after all filters have been applied.\n   * @example\n   *\n   * ```ts\n   * // Create a texture and a list of filters\n   * const texture = new Texture(...);\n   * const filters = [new BlurFilter(), new ColorMatrixFilter()];\n   *\n   * // Apply the filters to the texture\n   * const resultTexture = filterSystem.applyToTexture({ texture, filters });\n   *\n   * // Use the resulting texture\n   * sprite.texture = resultTexture;\n   * ```\n   *\n   * Key Points:\n   * 1. padding is not currently supported here - so clipping may occur with filters that use padding.\n   * 2. If all filters are disabled or skipped, the original texture is returned.\n   */\n  generateFilteredTexture({ texture, filters }) {\n    const filterData = this._pushFilterData();\n    this._activeFilterData = filterData;\n    filterData.skip = false;\n    filterData.filters = filters;\n    const colorTextureSource = texture.source;\n    const rootResolution = colorTextureSource.resolution;\n    const rootAntialias = colorTextureSource.antialias;\n    if (filters.every((filter) => !filter.enabled)) {\n      filterData.skip = true;\n      return texture;\n    }\n    const bounds = filterData.bounds;\n    bounds.addRect(texture.frame);\n    this._calculateFilterBounds(filterData, bounds.rectangle, rootAntialias, rootResolution, 0);\n    if (filterData.skip) {\n      return texture;\n    }\n    const globalResolution = rootResolution;\n    const offsetX = 0;\n    const offsetY = 0;\n    this._calculateGlobalFrame(\n      filterData,\n      offsetX,\n      offsetY,\n      globalResolution,\n      colorTextureSource.width,\n      colorTextureSource.height\n    );\n    filterData.outputRenderSurface = TexturePool.getOptimalTexture(\n      bounds.width,\n      bounds.height,\n      filterData.resolution,\n      filterData.antialias\n    );\n    filterData.backTexture = Texture.EMPTY;\n    filterData.inputTexture = texture;\n    const renderer = this.renderer;\n    renderer.renderTarget.finishRenderPass();\n    this._applyFiltersToTexture(filterData, true);\n    const outputTexture = filterData.outputRenderSurface;\n    outputTexture.source.alphaMode = \"premultiplied-alpha\";\n    return outputTexture;\n  }\n  /** @internal */\n  pop() {\n    const renderer = this.renderer;\n    const filterData = this._popFilterData();\n    if (filterData.skip) {\n      return;\n    }\n    renderer.globalUniforms.pop();\n    renderer.renderTarget.finishRenderPass();\n    this._activeFilterData = filterData;\n    this._applyFiltersToTexture(filterData, false);\n    if (filterData.blendRequired) {\n      TexturePool.returnTexture(filterData.backTexture);\n    }\n    TexturePool.returnTexture(filterData.inputTexture);\n  }\n  /**\n   * Copies the last render surface to a texture.\n   * @param lastRenderSurface - The last render surface to copy from.\n   * @param bounds - The bounds of the area to copy.\n   * @param previousBounds - The previous bounds to use for offsetting the copy.\n   */\n  getBackTexture(lastRenderSurface, bounds, previousBounds) {\n    const backgroundResolution = lastRenderSurface.colorTexture.source._resolution;\n    const backTexture = TexturePool.getOptimalTexture(\n      bounds.width,\n      bounds.height,\n      backgroundResolution,\n      false\n    );\n    let x = bounds.minX;\n    let y = bounds.minY;\n    if (previousBounds) {\n      x -= previousBounds.minX;\n      y -= previousBounds.minY;\n    }\n    x = Math.floor(x * backgroundResolution);\n    y = Math.floor(y * backgroundResolution);\n    const width = Math.ceil(bounds.width * backgroundResolution);\n    const height = Math.ceil(bounds.height * backgroundResolution);\n    this.renderer.renderTarget.copyToTexture(\n      lastRenderSurface,\n      backTexture,\n      { x, y },\n      { width, height },\n      { x: 0, y: 0 }\n    );\n    return backTexture;\n  }\n  /**\n   * Applies a filter to a texture.\n   * @param filter - The filter to apply.\n   * @param input - The input texture.\n   * @param output - The output render surface.\n   * @param clear - Whether to clear the output surface before applying the filter.\n   */\n  applyFilter(filter, input, output, clear) {\n    const renderer = this.renderer;\n    const filterData = this._activeFilterData;\n    const outputRenderSurface = filterData.outputRenderSurface;\n    const isFinalTarget = outputRenderSurface === output;\n    const rootResolution = renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution;\n    const resolution = this._findFilterResolution(rootResolution);\n    let offsetX = 0;\n    let offsetY = 0;\n    if (isFinalTarget) {\n      const offset = this._findPreviousFilterOffset();\n      offsetX = offset.x;\n      offsetY = offset.y;\n    }\n    this._updateFilterUniforms(input, output, filterData, offsetX, offsetY, resolution, isFinalTarget, clear);\n    const filterToApply = filter.enabled ? filter : this._getPassthroughFilter();\n    this._setupBindGroupsAndRender(filterToApply, input, renderer);\n  }\n  /**\n   * Multiply _input normalized coordinates_ to this matrix to get _sprite texture normalized coordinates_.\n   *\n   * Use `outputMatrix * vTextureCoord` in the shader.\n   * @param outputMatrix - The matrix to output to.\n   * @param {Sprite} sprite - The sprite to map to.\n   * @returns The mapped matrix.\n   */\n  calculateSpriteMatrix(outputMatrix, sprite) {\n    const data = this._activeFilterData;\n    const mappedMatrix = outputMatrix.set(\n      data.inputTexture._source.width,\n      0,\n      0,\n      data.inputTexture._source.height,\n      data.bounds.minX,\n      data.bounds.minY\n    );\n    const worldTransform = sprite.worldTransform.copyTo(Matrix.shared);\n    const renderGroup = sprite.renderGroup || sprite.parentRenderGroup;\n    if (renderGroup && renderGroup.cacheToLocalTransform) {\n      worldTransform.prepend(renderGroup.cacheToLocalTransform);\n    }\n    worldTransform.invert();\n    mappedMatrix.prepend(worldTransform);\n    mappedMatrix.scale(\n      1 / sprite.texture.orig.width,\n      1 / sprite.texture.orig.height\n    );\n    mappedMatrix.translate(sprite.anchor.x, sprite.anchor.y);\n    return mappedMatrix;\n  }\n  destroy() {\n    this._passthroughFilter?.destroy(true);\n    this._passthroughFilter = null;\n  }\n  _getPassthroughFilter() {\n    this._passthroughFilter ?? (this._passthroughFilter = new PassthroughFilter());\n    return this._passthroughFilter;\n  }\n  /**\n   * Sets up the bind groups and renders the filter.\n   * @param filter - The filter to apply\n   * @param input - The input texture\n   * @param renderer - The renderer instance\n   */\n  _setupBindGroupsAndRender(filter, input, renderer) {\n    if (renderer.renderPipes.uniformBatch) {\n      const batchUniforms = renderer.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);\n      this._globalFilterBindGroup.setResource(batchUniforms, 0);\n    } else {\n      this._globalFilterBindGroup.setResource(this._filterGlobalUniforms, 0);\n    }\n    this._globalFilterBindGroup.setResource(input.source, 1);\n    this._globalFilterBindGroup.setResource(input.source.style, 2);\n    filter.groups[0] = this._globalFilterBindGroup;\n    renderer.encoder.draw({\n      geometry: quadGeometry,\n      shader: filter,\n      state: filter._state,\n      topology: \"triangle-list\"\n    });\n    if (renderer.type === RendererType.WEBGL) {\n      renderer.renderTarget.finishRenderPass();\n    }\n  }\n  /**\n   * Sets up the filter textures including input texture and back texture if needed.\n   * @param filterData - The filter data to update\n   * @param bounds - The bounds for the texture\n   * @param renderer - The renderer instance\n   * @param previousFilterData - The previous filter data for back texture calculation\n   */\n  _setupFilterTextures(filterData, bounds, renderer, previousFilterData) {\n    filterData.backTexture = Texture.EMPTY;\n    filterData.inputTexture = TexturePool.getOptimalTexture(\n      bounds.width,\n      bounds.height,\n      filterData.resolution,\n      filterData.antialias\n    );\n    if (filterData.blendRequired) {\n      renderer.renderTarget.finishRenderPass();\n      const renderTarget = renderer.renderTarget.getRenderTarget(filterData.outputRenderSurface);\n      filterData.backTexture = this.getBackTexture(renderTarget, bounds, previousFilterData?.bounds);\n    }\n    renderer.renderTarget.bind(filterData.inputTexture, true);\n    renderer.globalUniforms.push({\n      offset: bounds\n    });\n  }\n  /**\n   * Calculates and sets the global frame for the filter.\n   * @param filterData - The filter data to update\n   * @param offsetX - The X offset\n   * @param offsetY - The Y offset\n   * @param globalResolution - The global resolution\n   * @param sourceWidth - The source texture width\n   * @param sourceHeight - The source texture height\n   */\n  _calculateGlobalFrame(filterData, offsetX, offsetY, globalResolution, sourceWidth, sourceHeight) {\n    const globalFrame = filterData.globalFrame;\n    globalFrame.x = offsetX * globalResolution;\n    globalFrame.y = offsetY * globalResolution;\n    globalFrame.width = sourceWidth * globalResolution;\n    globalFrame.height = sourceHeight * globalResolution;\n  }\n  /**\n   * Updates the filter uniforms with the current filter state.\n   * @param input - The input texture\n   * @param output - The output render surface\n   * @param filterData - The current filter data\n   * @param offsetX - The X offset for positioning\n   * @param offsetY - The Y offset for positioning\n   * @param resolution - The current resolution\n   * @param isFinalTarget - Whether this is the final render target\n   * @param clear - Whether to clear the output surface\n   */\n  _updateFilterUniforms(input, output, filterData, offsetX, offsetY, resolution, isFinalTarget, clear) {\n    const uniforms = this._filterGlobalUniforms.uniforms;\n    const outputFrame = uniforms.uOutputFrame;\n    const inputSize = uniforms.uInputSize;\n    const inputPixel = uniforms.uInputPixel;\n    const inputClamp = uniforms.uInputClamp;\n    const globalFrame = uniforms.uGlobalFrame;\n    const outputTexture = uniforms.uOutputTexture;\n    if (isFinalTarget) {\n      outputFrame[0] = filterData.bounds.minX - offsetX;\n      outputFrame[1] = filterData.bounds.minY - offsetY;\n    } else {\n      outputFrame[0] = 0;\n      outputFrame[1] = 0;\n    }\n    outputFrame[2] = input.frame.width;\n    outputFrame[3] = input.frame.height;\n    inputSize[0] = input.source.width;\n    inputSize[1] = input.source.height;\n    inputSize[2] = 1 / inputSize[0];\n    inputSize[3] = 1 / inputSize[1];\n    inputPixel[0] = input.source.pixelWidth;\n    inputPixel[1] = input.source.pixelHeight;\n    inputPixel[2] = 1 / inputPixel[0];\n    inputPixel[3] = 1 / inputPixel[1];\n    inputClamp[0] = 0.5 * inputPixel[2];\n    inputClamp[1] = 0.5 * inputPixel[3];\n    inputClamp[2] = input.frame.width * inputSize[2] - 0.5 * inputPixel[2];\n    inputClamp[3] = input.frame.height * inputSize[3] - 0.5 * inputPixel[3];\n    const rootTexture = this.renderer.renderTarget.rootRenderTarget.colorTexture;\n    globalFrame[0] = offsetX * resolution;\n    globalFrame[1] = offsetY * resolution;\n    globalFrame[2] = rootTexture.source.width * resolution;\n    globalFrame[3] = rootTexture.source.height * resolution;\n    if (output instanceof Texture)\n      output.source.resource = null;\n    const renderTarget = this.renderer.renderTarget.getRenderTarget(output);\n    this.renderer.renderTarget.bind(output, !!clear);\n    if (output instanceof Texture) {\n      outputTexture[0] = output.frame.width;\n      outputTexture[1] = output.frame.height;\n    } else {\n      outputTexture[0] = renderTarget.width;\n      outputTexture[1] = renderTarget.height;\n    }\n    outputTexture[2] = renderTarget.isRoot ? -1 : 1;\n    this._filterGlobalUniforms.update();\n  }\n  /**\n   * Finds the correct resolution by looking back through the filter stack.\n   * @param rootResolution - The fallback root resolution to use\n   * @returns The resolution from the previous filter or root resolution\n   */\n  _findFilterResolution(rootResolution) {\n    let currentIndex = this._filterStackIndex - 1;\n    while (currentIndex > 0 && this._filterStack[currentIndex].skip) {\n      --currentIndex;\n    }\n    return currentIndex > 0 && this._filterStack[currentIndex].inputTexture ? this._filterStack[currentIndex].inputTexture.source._resolution : rootResolution;\n  }\n  /**\n   * Finds the offset from the previous non-skipped filter in the stack.\n   * @returns The offset coordinates from the previous filter\n   */\n  _findPreviousFilterOffset() {\n    let offsetX = 0;\n    let offsetY = 0;\n    let lastIndex = this._filterStackIndex;\n    while (lastIndex > 0) {\n      lastIndex--;\n      const prevFilterData = this._filterStack[lastIndex];\n      if (!prevFilterData.skip) {\n        offsetX = prevFilterData.bounds.minX;\n        offsetY = prevFilterData.bounds.minY;\n        break;\n      }\n    }\n    return { x: offsetX, y: offsetY };\n  }\n  /**\n   * Calculates the filter area bounds based on the instruction type.\n   * @param instruction - The filter instruction\n   * @param bounds - The bounds object to populate\n   */\n  _calculateFilterArea(instruction, bounds) {\n    if (instruction.renderables) {\n      getGlobalRenderableBounds(instruction.renderables, bounds);\n    } else if (instruction.filterEffect.filterArea) {\n      bounds.clear();\n      bounds.addRect(instruction.filterEffect.filterArea);\n      bounds.applyMatrix(instruction.container.worldTransform);\n    } else {\n      instruction.container.getFastGlobalBounds(true, bounds);\n    }\n    if (instruction.container) {\n      const renderGroup = instruction.container.renderGroup || instruction.container.parentRenderGroup;\n      const filterFrameTransform = renderGroup.cacheToLocalTransform;\n      if (filterFrameTransform) {\n        bounds.applyMatrix(filterFrameTransform);\n      }\n    }\n  }\n  _applyFiltersToTexture(filterData, clear) {\n    const inputTexture = filterData.inputTexture;\n    const bounds = filterData.bounds;\n    const filters = filterData.filters;\n    const firstEnabled = filterData.firstEnabledIndex;\n    const lastEnabled = filterData.lastEnabledIndex;\n    this._globalFilterBindGroup.setResource(inputTexture.source.style, 2);\n    this._globalFilterBindGroup.setResource(filterData.backTexture.source, 3);\n    if (firstEnabled === lastEnabled) {\n      filters[firstEnabled].apply(this, inputTexture, filterData.outputRenderSurface, clear);\n    } else {\n      let flip = filterData.inputTexture;\n      const tempTexture = TexturePool.getOptimalTexture(\n        bounds.width,\n        bounds.height,\n        flip.source._resolution,\n        false\n      );\n      let flop = tempTexture;\n      for (let i = firstEnabled; i < lastEnabled; i++) {\n        const filter = filters[i];\n        if (!filter.enabled)\n          continue;\n        filter.apply(this, flip, flop, true);\n        const t = flip;\n        flip = flop;\n        flop = t;\n      }\n      filters[lastEnabled].apply(this, flip, filterData.outputRenderSurface, clear);\n      TexturePool.returnTexture(tempTexture);\n    }\n  }\n  _calculateFilterBounds(filterData, viewPort, rootAntialias, rootResolution, paddingMultiplier) {\n    const renderer = this.renderer;\n    const bounds = filterData.bounds;\n    const filters = filterData.filters;\n    let resolution = Infinity;\n    let padding = 0;\n    let antialias = true;\n    let blendRequired = false;\n    let enabled = false;\n    let clipToViewport = true;\n    let firstEnabledIndex = -1;\n    let lastEnabledIndex = -1;\n    for (let i = 0; i < filters.length; i++) {\n      const filter = filters[i];\n      if (!filter.enabled)\n        continue;\n      if (firstEnabledIndex === -1)\n        firstEnabledIndex = i;\n      lastEnabledIndex = i;\n      resolution = Math.min(resolution, filter.resolution === \"inherit\" ? rootResolution : filter.resolution);\n      padding += filter.padding;\n      if (filter.antialias === \"off\") {\n        antialias = false;\n      } else if (filter.antialias === \"inherit\") {\n        antialias && (antialias = rootAntialias);\n      }\n      if (!filter.clipToViewport) {\n        clipToViewport = false;\n      }\n      const isCompatible = !!(filter.compatibleRenderers & renderer.type);\n      if (!isCompatible) {\n        enabled = false;\n        break;\n      }\n      if (filter.blendRequired && !(renderer.backBuffer?.useBackBuffer ?? true)) {\n        warn(\"Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options.\");\n        enabled = false;\n        break;\n      }\n      enabled = true;\n      blendRequired || (blendRequired = filter.blendRequired);\n    }\n    if (!enabled) {\n      filterData.skip = true;\n      return;\n    }\n    if (clipToViewport) {\n      bounds.fitBounds(0, viewPort.width / rootResolution, 0, viewPort.height / rootResolution);\n    }\n    bounds.scale(resolution).ceil().scale(1 / resolution).pad((padding | 0) * paddingMultiplier);\n    if (!bounds.isPositive) {\n      filterData.skip = true;\n      return;\n    }\n    filterData.antialias = antialias;\n    filterData.resolution = resolution;\n    filterData.blendRequired = blendRequired;\n    filterData.firstEnabledIndex = firstEnabledIndex;\n    filterData.lastEnabledIndex = lastEnabledIndex;\n  }\n  _popFilterData() {\n    this._filterStackIndex--;\n    return this._filterStack[this._filterStackIndex];\n  }\n  _getPreviousFilterData() {\n    let previousFilterData;\n    let index = this._filterStackIndex - 1;\n    while (index > 0) {\n      index--;\n      previousFilterData = this._filterStack[index];\n      if (!previousFilterData.skip) {\n        break;\n      }\n    }\n    return previousFilterData;\n  }\n  _pushFilterData() {\n    let filterData = this._filterStack[this._filterStackIndex];\n    if (!filterData) {\n      filterData = this._filterStack[this._filterStackIndex] = new FilterData();\n    }\n    this._filterStackIndex++;\n    return filterData;\n  }\n}\n/** @ignore */\nFilterSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"filter\"\n};\n\nexport { FilterSystem };\n//# sourceMappingURL=FilterSystem.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { FilterPipe } from './FilterPipe.mjs';\nimport { FilterSystem } from './FilterSystem.mjs';\n\n\"use strict\";\nextensions.add(FilterSystem);\nextensions.add(FilterPipe);\n//# sourceMappingURL=init.mjs.map\n","import { updateQuadBounds } from '../../../utils/data/updateQuadBounds.mjs';\n\n\"use strict\";\nfunction updateTextBounds(batchableSprite, text) {\n  const { texture, bounds } = batchableSprite;\n  const padding = text._style._getFinalPadding();\n  updateQuadBounds(bounds, text._anchor, texture);\n  const paddingOffset = text._anchor._x * padding * 2;\n  const paddingOffsetY = text._anchor._y * padding * 2;\n  bounds.minX -= padding - paddingOffset;\n  bounds.minY -= padding - paddingOffsetY;\n  bounds.maxX -= padding - paddingOffset;\n  bounds.maxY -= padding - paddingOffsetY;\n}\n\nexport { updateTextBounds };\n//# sourceMappingURL=updateTextBounds.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { BindGroup } from '../../../rendering/renderers/gpu/shader/BindGroup.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { getAdjustedBlendModeBlend } from '../../../rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { color32BitToUniform } from '../../graphics/gpu/colorToUniform.mjs';\nimport { BatchableMesh } from './BatchableMesh.mjs';\n\n\"use strict\";\nclass MeshGpuData {\n  destroy() {\n  }\n}\nclass MeshPipe {\n  constructor(renderer, adaptor) {\n    this.localUniforms = new UniformGroup({\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    this.localUniformsBindGroup = new BindGroup({\n      0: this.localUniforms\n    });\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this._adaptor.init();\n  }\n  validateRenderable(mesh) {\n    const meshData = this._getMeshData(mesh);\n    const wasBatched = meshData.batched;\n    const isBatched = mesh.batched;\n    meshData.batched = isBatched;\n    if (wasBatched !== isBatched) {\n      return true;\n    } else if (isBatched) {\n      const geometry = mesh._geometry;\n      if (geometry.indices.length !== meshData.indexSize || geometry.positions.length !== meshData.vertexSize) {\n        meshData.indexSize = geometry.indices.length;\n        meshData.vertexSize = geometry.positions.length;\n        return true;\n      }\n      const batchableMesh = this._getBatchableMesh(mesh);\n      if (batchableMesh.texture.uid !== mesh._texture.uid) {\n        batchableMesh._textureMatrixUpdateId = -1;\n      }\n      return !batchableMesh._batcher.checkAndUpdateTexture(\n        batchableMesh,\n        mesh._texture\n      );\n    }\n    return false;\n  }\n  addRenderable(mesh, instructionSet) {\n    const batcher = this.renderer.renderPipes.batch;\n    const meshData = this._getMeshData(mesh);\n    if (mesh.didViewUpdate) {\n      meshData.indexSize = mesh._geometry.indices?.length;\n      meshData.vertexSize = mesh._geometry.positions?.length;\n    }\n    if (meshData.batched) {\n      const gpuBatchableMesh = this._getBatchableMesh(mesh);\n      gpuBatchableMesh.setTexture(mesh._texture);\n      gpuBatchableMesh.geometry = mesh._geometry;\n      batcher.addToBatch(gpuBatchableMesh, instructionSet);\n    } else {\n      batcher.break(instructionSet);\n      instructionSet.add(mesh);\n    }\n  }\n  updateRenderable(mesh) {\n    if (mesh.batched) {\n      const gpuBatchableMesh = this._getBatchableMesh(mesh);\n      gpuBatchableMesh.setTexture(mesh._texture);\n      gpuBatchableMesh.geometry = mesh._geometry;\n      gpuBatchableMesh._batcher.updateElement(gpuBatchableMesh);\n    }\n  }\n  execute(mesh) {\n    if (!mesh.isRenderable)\n      return;\n    mesh.state.blendMode = getAdjustedBlendModeBlend(mesh.groupBlendMode, mesh.texture._source);\n    const localUniforms = this.localUniforms;\n    localUniforms.uniforms.uTransformMatrix = mesh.groupTransform;\n    localUniforms.uniforms.uRound = this.renderer._roundPixels | mesh._roundPixels;\n    localUniforms.update();\n    color32BitToUniform(\n      mesh.groupColorAlpha,\n      localUniforms.uniforms.uColor,\n      0\n    );\n    this._adaptor.execute(this, mesh);\n  }\n  _getMeshData(mesh) {\n    var _a, _b;\n    (_a = mesh._gpuData)[_b = this.renderer.uid] || (_a[_b] = new MeshGpuData());\n    return mesh._gpuData[this.renderer.uid].meshData || this._initMeshData(mesh);\n  }\n  _initMeshData(mesh) {\n    mesh._gpuData[this.renderer.uid].meshData = {\n      batched: mesh.batched,\n      indexSize: 0,\n      vertexSize: 0\n    };\n    return mesh._gpuData[this.renderer.uid].meshData;\n  }\n  _getBatchableMesh(mesh) {\n    var _a, _b;\n    (_a = mesh._gpuData)[_b = this.renderer.uid] || (_a[_b] = new MeshGpuData());\n    return mesh._gpuData[this.renderer.uid].batchableMesh || this._initBatchableMesh(mesh);\n  }\n  _initBatchableMesh(mesh) {\n    const gpuMesh = new BatchableMesh();\n    gpuMesh.renderable = mesh;\n    gpuMesh.setTexture(mesh._texture);\n    gpuMesh.transform = mesh.groupTransform;\n    gpuMesh.roundPixels = this.renderer._roundPixels | mesh._roundPixels;\n    mesh._gpuData[this.renderer.uid].batchableMesh = gpuMesh;\n    return gpuMesh;\n  }\n  destroy() {\n    this.localUniforms = null;\n    this.localUniformsBindGroup = null;\n    this._adaptor.destroy();\n    this._adaptor = null;\n    this.renderer = null;\n  }\n}\n/** @ignore */\nMeshPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"mesh\"\n};\n\nexport { MeshGpuData, MeshPipe };\n//# sourceMappingURL=MeshPipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { MeshPipe } from './shared/MeshPipe.mjs';\n\n\"use strict\";\nextensions.add(MeshPipe);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nconst localUniformBit = {\n  name: \"local-uniform-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n\n            struct LocalUniforms {\n                uTransformMatrix:mat3x3<f32>,\n                uColor:vec4<f32>,\n                uRound:f32,\n            }\n\n            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        `\n    ),\n    end: (\n      /* wgsl */\n      `\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        `\n    )\n  }\n};\nconst localUniformBitGroup2 = {\n  ...localUniformBit,\n  vertex: {\n    ...localUniformBit.vertex,\n    // replace the group!\n    header: localUniformBit.vertex.header.replace(\"group(1)\", \"group(2)\")\n  }\n};\nconst localUniformBitGl = {\n  name: \"local-uniform-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= uColor;\n            modelMatrix = uTransformMatrix;\n        `\n    ),\n    end: (\n      /* glsl */\n      `\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        `\n    )\n  }\n};\n\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 };\n//# sourceMappingURL=localUniformBit.mjs.map\n","\"use strict\";\nconst tilingBit = {\n  name: \"tiling-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;\n\n            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n\n            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);\n            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;\n            var unclamped = coord;\n            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);\n\n            var bias = 0.;\n\n            if(unclamped.x == coord.x && unclamped.y == coord.y)\n            {\n                bias = -32.;\n            }\n\n            outColor = textureSampleBias(uTexture, uSampler, coord, bias);\n        `\n    )\n  }\n};\nconst tilingBitGl = {\n  name: \"tiling-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTextureTransform;\n            uniform vec4 uSizeAnchor;\n\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;\n\n            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            uniform sampler2D uTexture;\n            uniform mat3 uMapCoord;\n            uniform vec4 uClampFrame;\n            uniform vec2 uClampOffset;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n\n        vec2 coord = vUV + ceil(uClampOffset - vUV);\n        coord = (uMapCoord * vec3(coord, 1.0)).xy;\n        vec2 unclamped = coord;\n        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0\n\n        `\n    )\n  }\n};\n\nexport { tilingBit, tilingBitGl };\n//# sourceMappingURL=tilingBit.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGpuProgram, compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { localUniformBit, localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { tilingBit, tilingBitGl } from './tilingBit.mjs';\n\n\"use strict\";\nlet gpuProgram;\nlet glProgram;\nclass TilingSpriteShader extends Shader {\n  constructor() {\n    gpuProgram ?? (gpuProgram = compileHighShaderGpuProgram({\n      name: \"tiling-sprite-shader\",\n      bits: [\n        localUniformBit,\n        tilingBit,\n        roundPixelsBit\n      ]\n    }));\n    glProgram ?? (glProgram = compileHighShaderGlProgram({\n      name: \"tiling-sprite-shader\",\n      bits: [\n        localUniformBitGl,\n        tilingBitGl,\n        roundPixelsBitGl\n      ]\n    }));\n    const tilingUniforms = new UniformGroup({\n      uMapCoord: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uClampFrame: { value: new Float32Array([0, 0, 1, 1]), type: \"vec4<f32>\" },\n      uClampOffset: { value: new Float32Array([0, 0]), type: \"vec2<f32>\" },\n      uTextureTransform: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uSizeAnchor: { value: new Float32Array([100, 100, 0.5, 0.5]), type: \"vec4<f32>\" }\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        localUniforms: new UniformGroup({\n          uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n          uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n          uRound: { value: 0, type: \"f32\" }\n        }),\n        tilingUniforms,\n        uTexture: Texture.EMPTY.source,\n        uSampler: Texture.EMPTY.source.style\n      }\n    });\n  }\n  updateUniforms(width, height, matrix, anchorX, anchorY, texture) {\n    const tilingUniforms = this.resources.tilingUniforms;\n    const textureWidth = texture.width;\n    const textureHeight = texture.height;\n    const textureMatrix = texture.textureMatrix;\n    const uTextureTransform = tilingUniforms.uniforms.uTextureTransform;\n    uTextureTransform.set(\n      matrix.a * textureWidth / width,\n      matrix.b * textureWidth / height,\n      matrix.c * textureHeight / width,\n      matrix.d * textureHeight / height,\n      matrix.tx / width,\n      matrix.ty / height\n    );\n    uTextureTransform.invert();\n    tilingUniforms.uniforms.uMapCoord = textureMatrix.mapCoord;\n    tilingUniforms.uniforms.uClampFrame = textureMatrix.uClampFrame;\n    tilingUniforms.uniforms.uClampOffset = textureMatrix.uClampOffset;\n    tilingUniforms.uniforms.uTextureTransform = uTextureTransform;\n    tilingUniforms.uniforms.uSizeAnchor[0] = width;\n    tilingUniforms.uniforms.uSizeAnchor[1] = height;\n    tilingUniforms.uniforms.uSizeAnchor[2] = anchorX;\n    tilingUniforms.uniforms.uSizeAnchor[3] = anchorY;\n    if (texture) {\n      this.resources.uTexture = texture.source;\n      this.resources.uSampler = texture.source.style;\n    }\n  }\n}\n\nexport { TilingSpriteShader };\n//# sourceMappingURL=TilingSpriteShader.mjs.map\n","import { MeshGeometry } from '../../mesh/shared/MeshGeometry.mjs';\n\n\"use strict\";\nclass QuadGeometry extends MeshGeometry {\n  constructor() {\n    super({\n      positions: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      uvs: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      indices: new Uint32Array([0, 1, 2, 0, 2, 3])\n    });\n  }\n}\n\nexport { QuadGeometry };\n//# sourceMappingURL=QuadGeometry.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { getAdjustedBlendModeBlend } from '../../rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { State } from '../../rendering/renderers/shared/state/State.mjs';\nimport { RendererType } from '../../rendering/renderers/types.mjs';\nimport { color32BitToUniform } from '../graphics/gpu/colorToUniform.mjs';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh.mjs';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry.mjs';\nimport { TilingSpriteShader } from './shader/TilingSpriteShader.mjs';\nimport { QuadGeometry } from './utils/QuadGeometry.mjs';\nimport { setPositions } from './utils/setPositions.mjs';\nimport { setUvs } from './utils/setUvs.mjs';\n\n\"use strict\";\nconst sharedQuad = new QuadGeometry();\nclass TilingSpriteGpuData {\n  constructor() {\n    this.canBatch = true;\n    this.geometry = new MeshGeometry({\n      indices: sharedQuad.indices.slice(),\n      positions: sharedQuad.positions.slice(),\n      uvs: sharedQuad.uvs.slice()\n    });\n  }\n  destroy() {\n    this.geometry.destroy();\n    this.shader?.destroy();\n  }\n}\nclass TilingSpritePipe {\n  constructor(renderer) {\n    this._state = State.default2d;\n    this._renderer = renderer;\n  }\n  validateRenderable(renderable) {\n    const tilingSpriteData = this._getTilingSpriteData(renderable);\n    const couldBatch = tilingSpriteData.canBatch;\n    this._updateCanBatch(renderable);\n    const canBatch = tilingSpriteData.canBatch;\n    if (canBatch && canBatch === couldBatch) {\n      const { batchableMesh } = tilingSpriteData;\n      return !batchableMesh._batcher.checkAndUpdateTexture(\n        batchableMesh,\n        renderable.texture\n      );\n    }\n    return couldBatch !== canBatch;\n  }\n  addRenderable(tilingSprite, instructionSet) {\n    const batcher = this._renderer.renderPipes.batch;\n    this._updateCanBatch(tilingSprite);\n    const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n    const { geometry, canBatch } = tilingSpriteData;\n    if (canBatch) {\n      tilingSpriteData.batchableMesh || (tilingSpriteData.batchableMesh = new BatchableMesh());\n      const batchableMesh = tilingSpriteData.batchableMesh;\n      if (tilingSprite.didViewUpdate) {\n        this._updateBatchableMesh(tilingSprite);\n        batchableMesh.geometry = geometry;\n        batchableMesh.renderable = tilingSprite;\n        batchableMesh.transform = tilingSprite.groupTransform;\n        batchableMesh.setTexture(tilingSprite._texture);\n      }\n      batchableMesh.roundPixels = this._renderer._roundPixels | tilingSprite._roundPixels;\n      batcher.addToBatch(batchableMesh, instructionSet);\n    } else {\n      batcher.break(instructionSet);\n      tilingSpriteData.shader || (tilingSpriteData.shader = new TilingSpriteShader());\n      this.updateRenderable(tilingSprite);\n      instructionSet.add(tilingSprite);\n    }\n  }\n  execute(tilingSprite) {\n    const { shader } = this._getTilingSpriteData(tilingSprite);\n    shader.groups[0] = this._renderer.globalUniforms.bindGroup;\n    const localUniforms = shader.resources.localUniforms.uniforms;\n    localUniforms.uTransformMatrix = tilingSprite.groupTransform;\n    localUniforms.uRound = this._renderer._roundPixels | tilingSprite._roundPixels;\n    color32BitToUniform(\n      tilingSprite.groupColorAlpha,\n      localUniforms.uColor,\n      0\n    );\n    this._state.blendMode = getAdjustedBlendModeBlend(tilingSprite.groupBlendMode, tilingSprite.texture._source);\n    this._renderer.encoder.draw({\n      geometry: sharedQuad,\n      shader,\n      state: this._state\n    });\n  }\n  updateRenderable(tilingSprite) {\n    const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n    const { canBatch } = tilingSpriteData;\n    if (canBatch) {\n      const { batchableMesh } = tilingSpriteData;\n      if (tilingSprite.didViewUpdate)\n        this._updateBatchableMesh(tilingSprite);\n      batchableMesh._batcher.updateElement(batchableMesh);\n    } else if (tilingSprite.didViewUpdate) {\n      const { shader } = tilingSpriteData;\n      shader.updateUniforms(\n        tilingSprite.width,\n        tilingSprite.height,\n        tilingSprite._tileTransform.matrix,\n        tilingSprite.anchor.x,\n        tilingSprite.anchor.y,\n        tilingSprite.texture\n      );\n    }\n  }\n  _getTilingSpriteData(renderable) {\n    return renderable._gpuData[this._renderer.uid] || this._initTilingSpriteData(renderable);\n  }\n  _initTilingSpriteData(tilingSprite) {\n    const gpuData = new TilingSpriteGpuData();\n    gpuData.renderable = tilingSprite;\n    tilingSprite._gpuData[this._renderer.uid] = gpuData;\n    return gpuData;\n  }\n  _updateBatchableMesh(tilingSprite) {\n    const renderableData = this._getTilingSpriteData(tilingSprite);\n    const { geometry } = renderableData;\n    const style = tilingSprite.texture.source.style;\n    if (style.addressMode !== \"repeat\") {\n      style.addressMode = \"repeat\";\n      style.update();\n    }\n    setUvs(tilingSprite, geometry.uvs);\n    setPositions(tilingSprite, geometry.positions);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n  _updateCanBatch(tilingSprite) {\n    const renderableData = this._getTilingSpriteData(tilingSprite);\n    const texture = tilingSprite.texture;\n    let _nonPowOf2wrapping = true;\n    if (this._renderer.type === RendererType.WEBGL) {\n      _nonPowOf2wrapping = this._renderer.context.supports.nonPowOf2wrapping;\n    }\n    renderableData.canBatch = texture.textureMatrix.isSimple && (_nonPowOf2wrapping || texture.source.isPowerOfTwo);\n    return renderableData.canBatch;\n  }\n}\n/** @ignore */\nTilingSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"tilingSprite\"\n};\n\nexport { TilingSpriteGpuData, TilingSpritePipe };\n//# sourceMappingURL=TilingSpritePipe.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { applyMatrix } from './applyMatrix.mjs';\n\n\"use strict\";\nfunction setUvs(tilingSprite, uvs) {\n  const texture = tilingSprite.texture;\n  const width = texture.frame.width;\n  const height = texture.frame.height;\n  let anchorX = 0;\n  let anchorY = 0;\n  if (tilingSprite.applyAnchorToTexture) {\n    anchorX = tilingSprite.anchor.x;\n    anchorY = tilingSprite.anchor.y;\n  }\n  uvs[0] = uvs[6] = -anchorX;\n  uvs[2] = uvs[4] = 1 - anchorX;\n  uvs[1] = uvs[3] = -anchorY;\n  uvs[5] = uvs[7] = 1 - anchorY;\n  const textureMatrix = Matrix.shared;\n  textureMatrix.copyFrom(tilingSprite._tileTransform.matrix);\n  textureMatrix.tx /= tilingSprite.width;\n  textureMatrix.ty /= tilingSprite.height;\n  textureMatrix.invert();\n  textureMatrix.scale(tilingSprite.width / width, tilingSprite.height / height);\n  applyMatrix(uvs, 2, 0, textureMatrix);\n}\n\nexport { setUvs };\n//# sourceMappingURL=setUvs.mjs.map\n","\"use strict\";\nfunction applyMatrix(array, stride, offset, matrix) {\n  let index = 0;\n  const size = array.length / (stride || 2);\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  offset *= stride;\n  while (index < size) {\n    const x = array[offset];\n    const y = array[offset + 1];\n    array[offset] = a * x + c * y + tx;\n    array[offset + 1] = b * x + d * y + ty;\n    offset += stride;\n    index++;\n  }\n}\n\nexport { applyMatrix };\n//# sourceMappingURL=applyMatrix.mjs.map\n","\"use strict\";\nfunction setPositions(tilingSprite, positions) {\n  const anchorX = tilingSprite.anchor.x;\n  const anchorY = tilingSprite.anchor.y;\n  positions[0] = -anchorX * tilingSprite.width;\n  positions[1] = -anchorY * tilingSprite.height;\n  positions[2] = (1 - anchorX) * tilingSprite.width;\n  positions[3] = -anchorY * tilingSprite.height;\n  positions[4] = (1 - anchorX) * tilingSprite.width;\n  positions[5] = (1 - anchorY) * tilingSprite.height;\n  positions[6] = -anchorX * tilingSprite.width;\n  positions[7] = (1 - anchorY) * tilingSprite.height;\n}\n\nexport { setPositions };\n//# sourceMappingURL=setPositions.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { TilingSpritePipe } from './TilingSpritePipe.mjs';\n\n\"use strict\";\nextensions.add(TilingSpritePipe);\n//# sourceMappingURL=init.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { State } from '../../../rendering/renderers/shared/state/State.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { color32BitToUniform } from '../gpu/colorToUniform.mjs';\nimport { BatchableGraphics } from './BatchableGraphics.mjs';\n\n\"use strict\";\nclass GraphicsGpuData {\n  constructor() {\n    this.batches = [];\n    this.batched = false;\n  }\n  destroy() {\n    this.batches.forEach((batch) => {\n      BigPool.return(batch);\n    });\n    this.batches.length = 0;\n  }\n}\nclass GraphicsPipe {\n  constructor(renderer, adaptor) {\n    this.state = State.for2d();\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this.renderer.runners.contextChange.add(this);\n  }\n  contextChange() {\n    this._adaptor.contextChange(this.renderer);\n  }\n  validateRenderable(graphics) {\n    const context = graphics.context;\n    const wasBatched = !!graphics._gpuData;\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(context);\n    if (gpuContext.isBatchable || wasBatched !== gpuContext.isBatchable) {\n      return true;\n    }\n    return false;\n  }\n  addRenderable(graphics, instructionSet) {\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(graphics.context);\n    if (graphics.didViewUpdate) {\n      this._rebuild(graphics);\n    }\n    if (gpuContext.isBatchable) {\n      this._addToBatcher(graphics, instructionSet);\n    } else {\n      this.renderer.renderPipes.batch.break(instructionSet);\n      instructionSet.add(graphics);\n    }\n  }\n  updateRenderable(graphics) {\n    const gpuData = this._getGpuDataForRenderable(graphics);\n    const batches = gpuData.batches;\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batch._batcher.updateElement(batch);\n    }\n  }\n  execute(graphics) {\n    if (!graphics.isRenderable)\n      return;\n    const renderer = this.renderer;\n    const context = graphics.context;\n    const contextSystem = renderer.graphicsContext;\n    if (!contextSystem.getGpuContext(context).batches.length) {\n      return;\n    }\n    const shader = context.customShader || this._adaptor.shader;\n    this.state.blendMode = graphics.groupBlendMode;\n    const localUniforms = shader.resources.localUniforms.uniforms;\n    localUniforms.uTransformMatrix = graphics.groupTransform;\n    localUniforms.uRound = renderer._roundPixels | graphics._roundPixels;\n    color32BitToUniform(\n      graphics.groupColorAlpha,\n      localUniforms.uColor,\n      0\n    );\n    this._adaptor.execute(this, graphics);\n  }\n  _rebuild(graphics) {\n    const gpuData = this._getGpuDataForRenderable(graphics);\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(graphics.context);\n    gpuData.destroy();\n    if (gpuContext.isBatchable) {\n      this._updateBatchesForRenderable(graphics, gpuData);\n    }\n  }\n  _addToBatcher(graphics, instructionSet) {\n    const batchPipe = this.renderer.renderPipes.batch;\n    const batches = this._getGpuDataForRenderable(graphics).batches;\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batchPipe.addToBatch(batch, instructionSet);\n    }\n  }\n  _getGpuDataForRenderable(graphics) {\n    return graphics._gpuData[this.renderer.uid] || this._initGpuDataForRenderable(graphics);\n  }\n  _initGpuDataForRenderable(graphics) {\n    const gpuData = new GraphicsGpuData();\n    graphics._gpuData[this.renderer.uid] = gpuData;\n    return gpuData;\n  }\n  _updateBatchesForRenderable(graphics, gpuData) {\n    const context = graphics.context;\n    const gpuContext = this.renderer.graphicsContext.getGpuContext(context);\n    const roundPixels = this.renderer._roundPixels | graphics._roundPixels;\n    gpuData.batches = gpuContext.batches.map((batch) => {\n      const batchClone = BigPool.get(BatchableGraphics);\n      batch.copyTo(batchClone);\n      batchClone.renderable = graphics;\n      batchClone.roundPixels = roundPixels;\n      return batchClone;\n    });\n  }\n  destroy() {\n    this.renderer = null;\n    this._adaptor.destroy();\n    this._adaptor = null;\n    this.state = null;\n  }\n}\n/** @ignore */\nGraphicsPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"graphics\"\n};\n\nexport { GraphicsGpuData, GraphicsPipe };\n//# sourceMappingURL=GraphicsPipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { GraphicsContextSystem } from './shared/GraphicsContextSystem.mjs';\nimport { GraphicsPipe } from './shared/GraphicsPipe.mjs';\n\n\"use strict\";\nextensions.add(GraphicsPipe);\nextensions.add(GraphicsContextSystem);\n//# sourceMappingURL=init.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../../view/ViewContainer.mjs';\nimport { GraphicsContext } from './GraphicsContext.mjs';\n\n\"use strict\";\nclass Graphics extends ViewContainer {\n  /**\n   * Creates a new Graphics object.\n   * @param options - Options for the Graphics.\n   */\n  constructor(options) {\n    if (options instanceof GraphicsContext) {\n      options = { context: options };\n    }\n    const { context, roundPixels, ...rest } = options || {};\n    super({\n      label: \"Graphics\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"graphics\";\n    if (!context) {\n      this._context = this._ownedContext = new GraphicsContext();\n    } else {\n      this._context = context;\n    }\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.didViewUpdate = true;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n  }\n  set context(context) {\n    if (context === this._context)\n      return;\n    this._context.off(\"update\", this.onViewUpdate, this);\n    this._context = context;\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  /**\n   * The underlying graphics context used for drawing operations.\n   * Controls how shapes and paths are rendered.\n   * @example\n   * ```ts\n   * // Create a shared context\n   * const sharedContext = new GraphicsContext();\n   *\n   * // Create graphics objects sharing the same context\n   * const graphics1 = new Graphics();\n   * const graphics2 = new Graphics();\n   *\n   * // Assign shared context\n   * graphics1.context = sharedContext;\n   * graphics2.context = sharedContext;\n   *\n   * // Both graphics will show the same shapes\n   * sharedContext\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   * ```\n   * @see {@link GraphicsContext} For drawing operations\n   * @see {@link GraphicsOptions} For context configuration\n   */\n  get context() {\n    return this._context;\n  }\n  /**\n   * The local bounds of the graphics object.\n   * Returns the boundaries after all graphical operations but before any transforms.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw a shape\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Get bounds information\n   * const bounds = graphics.bounds;\n   * console.log(bounds.width);  // 100\n   * console.log(bounds.height); // 100\n   * ```\n   * @readonly\n   * @see {@link Bounds} For bounds operations\n   * @see {@link Container#getBounds} For transformed bounds\n   */\n  get bounds() {\n    return this._context.bounds;\n  }\n  /**\n   * Graphics objects do not need to update their bounds as the context handles this.\n   * @private\n   */\n  updateBounds() {\n  }\n  /**\n   * Checks if the object contains the given point.\n   * Returns true if the point lies within the Graphics object's rendered area.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw a shape\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Check point intersection\n   * if (graphics.containsPoint({ x: 50, y: 50 })) {\n   *     console.log('Point is inside rectangle!');\n   * }\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is inside the Graphics object\n   * @see {@link Graphics#bounds} For bounding box checks\n   * @see {@link PointData} For point data structure\n   */\n  containsPoint(point) {\n    return this._context.containsPoint(point);\n  }\n  /**\n   * Destroys this graphics renderable and optionally its context.\n   * @param options - Options parameter. A boolean will act as if all options\n   *\n   * If the context was created by this graphics and `destroy(false)` or `destroy()` is called\n   * then the context will still be destroyed.\n   *\n   * If you want to explicitly not destroy this context that this graphics created,\n   * then you should pass destroy({ context: false })\n   *\n   * If the context was passed in as an argument to the constructor then it will not be destroyed\n   * @example\n   * ```ts\n   * // Destroy the graphics and its context\n   * graphics.destroy();\n   * graphics.destroy(true);\n   * graphics.destroy({ context: true, texture: true, textureSource: true });\n   * ```\n   */\n  destroy(options) {\n    if (this._ownedContext && !options) {\n      this._ownedContext.destroy(options);\n    } else if (options === true || options?.context === true) {\n      this._context.destroy(options);\n    }\n    this._ownedContext = null;\n    this._context = null;\n    super.destroy(options);\n  }\n  _callContextMethod(method, args) {\n    this.context[method](...args);\n    return this;\n  }\n  // --------------------------------------- GraphicsContext methods ---------------------------------------\n  /**\n   * Sets the current fill style of the graphics context.\n   * The fill style can be a color, gradient, pattern, or a complex style object.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color fill\n   * graphics\n   *     .setFillStyle({ color: 0xff0000 }) // Red fill\n   *     .rect(0, 0, 100, 100)\n   *     .fill();\n   *\n   * // Gradient fill\n   * const gradient = new FillGradient({\n   *    end: { x: 1, y: 0 },\n   *    colorStops: [\n   *         { offset: 0, color: 0xff0000 }, // Red at start\n   *         { offset: 0.5, color: 0x00ff00 }, // Green at middle\n   *         { offset: 1, color: 0x0000ff }, // Blue at end\n   *    ],\n   * });\n   *\n   * graphics\n   *     .setFillStyle(gradient)\n   *     .circle(100, 100, 50)\n   *     .fill();\n   *\n   * // Pattern fill\n   * const pattern = new FillPattern(texture);\n   * graphics\n   *     .setFillStyle({\n   *         fill: pattern,\n   *         alpha: 0.5\n   *     })\n   *     .rect(0, 0, 200, 200)\n   *     .fill();\n   * ```\n   * @param {FillInput} args - The fill style to apply\n   * @returns The Graphics instance for chaining\n   * @see {@link FillStyle} For fill style options\n   * @see {@link FillGradient} For gradient fills\n   * @see {@link FillPattern} For pattern fills\n   */\n  setFillStyle(...args) {\n    return this._callContextMethod(\"setFillStyle\", args);\n  }\n  /**\n   * Sets the current stroke style of the graphics context.\n   * Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color stroke\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 2,\n   *         color: 0x000000\n   *     })\n   *     .rect(0, 0, 100, 100)\n   *     .stroke();\n   *\n   * // Complex stroke style\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 4,\n   *         color: 0xff0000,\n   *         alpha: 0.5,\n   *         join: 'round',\n   *         cap: 'round',\n   *         alignment: 0.5\n   *     })\n   *     .circle(100, 100, 50)\n   *     .stroke();\n   *\n   * // Gradient stroke\n   * const gradient = new FillGradient({\n   *    end: { x: 1, y: 0 },\n   *    colorStops: [\n   *         { offset: 0, color: 0xff0000 }, // Red at start\n   *         { offset: 0.5, color: 0x00ff00 }, // Green at middle\n   *         { offset: 1, color: 0x0000ff }, // Blue at end\n   *    ],\n   * });\n   *\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 10,\n   *         fill: gradient\n   *     })\n   *     .poly([0,0, 100,50, 0,100])\n   *     .stroke();\n   * ```\n   * @param {StrokeInput} args - The stroke style to apply\n   * @returns The Graphics instance for chaining\n   * @see {@link StrokeStyle} For stroke style options\n   * @see {@link FillGradient} For gradient strokes\n   * @see {@link FillPattern} For pattern strokes\n   */\n  setStrokeStyle(...args) {\n    return this._callContextMethod(\"setStrokeStyle\", args);\n  }\n  fill(...args) {\n    return this._callContextMethod(\"fill\", args);\n  }\n  /**\n   * Strokes the current path with the current stroke style or specified style.\n   * Outlines the shape using the stroke settings.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Stroke with direct color\n   * graphics\n   *     .circle(50, 50, 25)\n   *     .stroke({\n   *         width: 2,\n   *         color: 0xff0000\n   *     }); // 2px red stroke\n   *\n   * // Fill with texture\n   * graphics\n   *    .rect(0, 0, 100, 100)\n   *    .stroke(myTexture); // Fill with texture\n   *\n   * // Stroke with gradient\n   * const gradient = new FillGradient({\n   *     end: { x: 1, y: 0 },\n   *     colorStops: [\n   *         { offset: 0, color: 0xff0000 },\n   *         { offset: 0.5, color: 0x00ff00 },\n   *         { offset: 1, color: 0x0000ff },\n   *     ],\n   * });\n   *\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .stroke({\n   *         width: 4,\n   *         fill: gradient,\n   *         alignment: 0.5,\n   *         join: 'round'\n   *     });\n   * ```\n   * @param {StrokeStyle} args - Optional stroke style to apply. Can be:\n   * - A stroke style object with width, color, etc.\n   * - A gradient\n   * - A pattern\n   * If omitted, uses current stroke style.\n   * @returns The Graphics instance for chaining\n   * @see {@link StrokeStyle} For stroke style options\n   * @see {@link FillGradient} For gradient strokes\n   * @see {@link setStrokeStyle} For setting default stroke style\n   */\n  stroke(...args) {\n    return this._callContextMethod(\"stroke\", args);\n  }\n  texture(...args) {\n    return this._callContextMethod(\"texture\", args);\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   * graphics\n   *     .circle(150, 150, 50)\n   *     .fill({ color: 0x00ff00 })\n   *     .beginPath() // Starts a new path\n   *     .circle(250, 150, 50)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @returns The Graphics instance for chaining\n   * @see {@link Graphics#moveTo} For starting a new subpath\n   * @see {@link Graphics#closePath} For closing the current path\n   */\n  beginPath() {\n    return this._callContextMethod(\"beginPath\", []);\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path.\n   *\n   * If a hole is not completely in a shape, it will fail to cut correctly.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw outer circle\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 });\n   *     .circle(100, 100, 25) // Inner circle\n   *     .cut() // Cuts out the inner circle from the outer circle\n   * ```\n   */\n  cut() {\n    return this._callContextMethod(\"cut\", []);\n  }\n  arc(...args) {\n    return this._callContextMethod(\"arc\", args);\n  }\n  arcTo(...args) {\n    return this._callContextMethod(\"arcTo\", args);\n  }\n  arcToSvg(...args) {\n    return this._callContextMethod(\"arcToSvg\", args);\n  }\n  bezierCurveTo(...args) {\n    return this._callContextMethod(\"bezierCurveTo\", args);\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start point.\n   *\n   * This is useful for completing shapes and ensuring they are properly closed for fills.\n   * @example\n   * ```ts\n   * // Create a triangle with closed path\n   * const graphics = new Graphics();\n   * graphics\n   *     .moveTo(50, 50)\n   *     .lineTo(100, 100)\n   *     .lineTo(0, 100)\n   *     .closePath()\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#beginPath} For starting a new path\n   * @see {@link Graphics#fill} For filling closed paths\n   * @see {@link Graphics#stroke} For stroking paths\n   */\n  closePath() {\n    return this._callContextMethod(\"closePath\", []);\n  }\n  ellipse(...args) {\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  circle(...args) {\n    return this._callContextMethod(\"circle\", args);\n  }\n  path(...args) {\n    return this._callContextMethod(\"path\", args);\n  }\n  lineTo(...args) {\n    return this._callContextMethod(\"lineTo\", args);\n  }\n  moveTo(...args) {\n    return this._callContextMethod(\"moveTo\", args);\n  }\n  quadraticCurveTo(...args) {\n    return this._callContextMethod(\"quadraticCurveTo\", args);\n  }\n  rect(...args) {\n    return this._callContextMethod(\"rect\", args);\n  }\n  roundRect(...args) {\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  poly(...args) {\n    return this._callContextMethod(\"poly\", args);\n  }\n  regularPoly(...args) {\n    return this._callContextMethod(\"regularPoly\", args);\n  }\n  roundPoly(...args) {\n    return this._callContextMethod(\"roundPoly\", args);\n  }\n  roundShape(...args) {\n    return this._callContextMethod(\"roundShape\", args);\n  }\n  filletRect(...args) {\n    return this._callContextMethod(\"filletRect\", args);\n  }\n  chamferRect(...args) {\n    return this._callContextMethod(\"chamferRect\", args);\n  }\n  star(...args) {\n    return this._callContextMethod(\"star\", args);\n  }\n  svg(...args) {\n    return this._callContextMethod(\"svg\", args);\n  }\n  restore(...args) {\n    return this._callContextMethod(\"restore\", args);\n  }\n  /**\n   * Saves the current graphics state onto a stack. The state includes:\n   * - Current transformation matrix\n   * - Current fill style\n   * - Current stroke style\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Save state before complex operations\n   * graphics.save();\n   *\n   * // Create transformed and styled shape\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .rotateTransform(Math.PI / 4)\n   *     .setFillStyle({\n   *         color: 0xff0000,\n   *         alpha: 0.5\n   *     })\n   *     .rect(-25, -25, 50, 50)\n   *     .fill();\n   *\n   * // Restore to original state\n   * graphics.restore();\n   *\n   * // Continue drawing with previous state\n   * graphics\n   *     .circle(50, 50, 25)\n   *     .fill();\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#restore} For restoring the saved state\n   * @see {@link Graphics#setTransform} For setting transformations\n   */\n  save() {\n    return this._callContextMethod(\"save\", []);\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * This matrix represents all accumulated transformations including translate, scale, and rotate.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Apply some transformations\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .rotateTransform(Math.PI / 4);\n   *\n   * // Get the current transform matrix\n   * const matrix = graphics.getTransform();\n   * console.log(matrix.tx, matrix.ty); // 100, 100\n   *\n   * // Use the matrix for other operations\n   * graphics\n   *     .setTransform(matrix)\n   *     .circle(0, 0, 50)\n   *     .fill({ color: 0xff0000 });\n   * ```\n   * @returns The current transformation matrix.\n   * @see {@link Graphics#setTransform} For setting the transform matrix\n   * @see {@link Matrix} For matrix operations\n   */\n  getTransform() {\n    return this.context.getTransform();\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing\n   * any transformations (rotation, scaling, translation) previously applied.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Apply transformations\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .scaleTransform(2, 2)\n   *     .circle(0, 0, 25)\n   *     .fill({ color: 0xff0000 });\n   * // Reset transform to default state\n   * graphics\n   *     .resetTransform()\n   *     .circle(50, 50, 25) // Will draw at actual coordinates\n   *     .fill({ color: 0x00ff00 });\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#getTransform} For getting the current transform\n   * @see {@link Graphics#setTransform} For setting a specific transform\n   * @see {@link Graphics#save} For saving the current transform state\n   * @see {@link Graphics#restore} For restoring a previous transform state\n   */\n  resetTransform() {\n    return this._callContextMethod(\"resetTransform\", []);\n  }\n  rotateTransform(...args) {\n    return this._callContextMethod(\"rotate\", args);\n  }\n  scaleTransform(...args) {\n    return this._callContextMethod(\"scale\", args);\n  }\n  setTransform(...args) {\n    return this._callContextMethod(\"setTransform\", args);\n  }\n  transform(...args) {\n    return this._callContextMethod(\"transform\", args);\n  }\n  translateTransform(...args) {\n    return this._callContextMethod(\"translate\", args);\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it.\n   * This includes clearing the current path, fill style, stroke style, and transformations.\n   *\n   * > [!NOTE] Graphics objects are not designed to be continuously cleared and redrawn.\n   * > Instead, they are intended to be used for static or semi-static graphics that\n   * > can be redrawn as needed. Frequent clearing and redrawing may lead to performance issues.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw some shapes\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 })\n   *     .rect(200, 100, 100, 50)\n   *     .fill({ color: 0x00ff00 });\n   *\n   * // Clear all graphics\n   * graphics.clear();\n   *\n   * // Start fresh with new shapes\n   * graphics\n   *     .circle(150, 150, 30)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#beginPath} For starting a new path without clearing styles\n   * @see {@link Graphics#save} For saving the current state\n   * @see {@link Graphics#restore} For restoring a previous state\n   */\n  clear() {\n    return this._callContextMethod(\"clear\", []);\n  }\n  /**\n   * Gets or sets the current fill style for the graphics context. The fill style determines\n   * how shapes are filled when using the fill() method.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color fill\n   * graphics.fillStyle = {\n   *     color: 0xff0000,  // Red\n   *     alpha: 1\n   * };\n   *\n   * // Using gradients\n   * const gradient = new FillGradient({\n   *     end: { x: 0, y: 1 }, // Vertical gradient\n   *     stops: [\n   *         { offset: 0, color: 0xff0000, alpha: 1 }, // Start color\n   *         { offset: 1, color: 0x0000ff, alpha: 1 }  // End color\n   *     ]\n   * });\n   *\n   * graphics.fillStyle = {\n   *     fill: gradient,\n   *     alpha: 0.8\n   * };\n   *\n   * // Using patterns\n   * graphics.fillStyle = {\n   *     texture: myTexture,\n   *     alpha: 1,\n   *     matrix: new Matrix()\n   *         .scale(0.5, 0.5)\n   *         .rotate(Math.PI / 4)\n   * };\n   * ```\n   * @type {ConvertedFillStyle}\n   * @see {@link FillStyle} For all available fill style options\n   * @see {@link FillGradient} For creating gradient fills\n   * @see {@link Graphics#fill} For applying the fill to paths\n   */\n  get fillStyle() {\n    return this._context.fillStyle;\n  }\n  set fillStyle(value) {\n    this._context.fillStyle = value;\n  }\n  /**\n   * Gets or sets the current stroke style for the graphics context. The stroke style determines\n   * how paths are outlined when using the stroke() method.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic stroke style\n   * graphics.strokeStyle = {\n   *     width: 2,\n   *     color: 0xff0000,\n   *     alpha: 1\n   * };\n   *\n   * // Using with gradients\n   * const gradient = new FillGradient({\n   *   end: { x: 0, y: 1 },\n   *   stops: [\n   *       { offset: 0, color: 0xff0000, alpha: 1 },\n   *       { offset: 1, color: 0x0000ff, alpha: 1 }\n   *   ]\n   * });\n   *\n   * graphics.strokeStyle = {\n   *     width: 4,\n   *     fill: gradient,\n   *     alignment: 0.5,\n   *     join: 'round',\n   *     cap: 'round'\n   * };\n   *\n   * // Complex stroke settings\n   * graphics.strokeStyle = {\n   *     width: 6,\n   *     color: 0x00ff00,\n   *     alpha: 0.5,\n   *     join: 'miter',\n   *     miterLimit: 10,\n   * };\n   * ```\n   * @see {@link StrokeStyle} For all available stroke style options\n   * @see {@link Graphics#stroke} For applying the stroke to paths\n   */\n  get strokeStyle() {\n    return this._context.strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._context.strokeStyle = value;\n  }\n  /**\n   * Creates a new Graphics object that copies the current graphics content.\n   * The clone can either share the same context (shallow clone) or have its own independent\n   * context (deep clone).\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Create original graphics content\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Create a shallow clone (shared context)\n   * const shallowClone = graphics.clone();\n   *\n   * // Changes to original affect the clone\n   * graphics\n   *     .circle(200, 100, 30)\n   *     .fill({ color: 0x00ff00 });\n   *\n   * // Create a deep clone (independent context)\n   * const deepClone = graphics.clone(true);\n   *\n   * // Modify deep clone independently\n   * deepClone\n   *     .translateTransform(100, 100)\n   *     .circle(0, 0, 40)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @param deep - Whether to create a deep clone of the graphics object.\n   *              If false (default), the context will be shared between objects.\n   *              If true, creates an independent copy of the context.\n   * @returns A new Graphics instance with either shared or copied context\n   * @see {@link Graphics#context} For accessing the underlying graphics context\n   * @see {@link GraphicsContext} For understanding the shared context behavior\n   */\n  clone(deep = false) {\n    if (deep) {\n      return new Graphics(this._context.clone());\n    }\n    this._ownedContext = null;\n    const clone = new Graphics(this._context);\n    return clone;\n  }\n  // -------- v7 deprecations ---------\n  /**\n   * @param width\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#setStrokeStyle} instead\n   */\n  lineStyle(width, color, alpha) {\n    deprecation(v8_0_0, \"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.\");\n    const strokeStyle = {};\n    width && (strokeStyle.width = width);\n    color && (strokeStyle.color = color);\n    alpha && (strokeStyle.alpha = alpha);\n    this.context.strokeStyle = strokeStyle;\n    return this;\n  }\n  /**\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  beginFill(color, alpha) {\n    deprecation(v8_0_0, \"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    const fillStyle = {};\n    if (color !== void 0)\n      fillStyle.color = color;\n    if (alpha !== void 0)\n      fillStyle.alpha = alpha;\n    this.context.fillStyle = fillStyle;\n    return this;\n  }\n  /**\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  endFill() {\n    deprecation(v8_0_0, \"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    this.context.fill();\n    const strokeStyle = this.context.strokeStyle;\n    if (strokeStyle.width !== GraphicsContext.defaultStrokeStyle.width || strokeStyle.color !== GraphicsContext.defaultStrokeStyle.color || strokeStyle.alpha !== GraphicsContext.defaultStrokeStyle.alpha) {\n      this.context.stroke();\n    }\n    return this;\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#circle} instead\n   */\n  drawCircle(...args) {\n    deprecation(v8_0_0, \"Graphics#drawCircle has been renamed to Graphics#circle\");\n    return this._callContextMethod(\"circle\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#ellipse} instead\n   */\n  drawEllipse(...args) {\n    deprecation(v8_0_0, \"Graphics#drawEllipse has been renamed to Graphics#ellipse\");\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#poly} instead\n   */\n  drawPolygon(...args) {\n    deprecation(v8_0_0, \"Graphics#drawPolygon has been renamed to Graphics#poly\");\n    return this._callContextMethod(\"poly\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#rect} instead\n   */\n  drawRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRect has been renamed to Graphics#rect\");\n    return this._callContextMethod(\"rect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#roundRect} instead\n   */\n  drawRoundedRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRoundedRect has been renamed to Graphics#roundRect\");\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#star} instead\n   */\n  drawStar(...args) {\n    deprecation(v8_0_0, \"Graphics#drawStar has been renamed to Graphics#star\");\n    return this._callContextMethod(\"star\", args);\n  }\n}\n\nexport { Graphics };\n//# sourceMappingURL=Graphics.mjs.map\n","\"use strict\";\nconst localUniformMSDFBit = {\n  name: \"local-uniform-msdf-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32,\n                uRound:f32,\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        `\n    ),\n    end: (\n      /* wgsl */\n      `\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n         `\n    ),\n    main: (\n      /* wgsl */\n      `\n            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));\n        `\n    )\n  }\n};\nconst localUniformMSDFBitGl = {\n  name: \"local-uniform-msdf-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= uColor;\n            modelMatrix *= uTransformMatrix;\n        `\n    ),\n    end: (\n      /* glsl */\n      `\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            uniform float uDistance;\n         `\n    ),\n    main: (\n      /* glsl */\n      `\n            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));\n        `\n    )\n  }\n};\n\nexport { localUniformMSDFBit, localUniformMSDFBitGl };\n//# sourceMappingURL=localUniformMSDFBit.mjs.map\n","\"use strict\";\nconst mSDFBit = {\n  name: \"msdf-bit\",\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {\n\n                // MSDF\n                var median = msdfColor.r + msdfColor.g + msdfColor.b -\n                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n\n                // SDF\n                median = min(median, msdfColor.a);\n\n                var screenPxDistance = distance * (median - 0.5);\n                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));\n                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);\n                var coverage: f32 = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n\n            }\n        `\n    )\n  }\n};\nconst mSDFBitGl = {\n  name: \"msdf-bit\",\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {\n\n                // MSDF\n                float median = msdfColor.r + msdfColor.g + msdfColor.b -\n                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n\n                // SDF\n                median = min(median, msdfColor.a);\n\n                float screenPxDistance = distance * (median - 0.5);\n                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));\n                float gamma = mix(1.0, 1.0 / 2.2, luma);\n                float coverage = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n            }\n        `\n    )\n  }\n};\n\nexport { mSDFBit, mSDFBitGl };\n//# sourceMappingURL=mSDFBit.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGpuProgram, compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { colorBit, colorBitGl } from '../../../rendering/high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBit, generateTextureBatchBitGl } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { getBatchSamplersUniformGroup } from '../../../rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { localUniformMSDFBit, localUniformMSDFBitGl } from './shader-bits/localUniformMSDFBit.mjs';\nimport { mSDFBit, mSDFBitGl } from './shader-bits/mSDFBit.mjs';\n\n\"use strict\";\nlet gpuProgram;\nlet glProgram;\nclass SdfShader extends Shader {\n  constructor(maxTextures) {\n    const uniforms = new UniformGroup({\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uDistance: { value: 4, type: \"f32\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    gpuProgram ?? (gpuProgram = compileHighShaderGpuProgram({\n      name: \"sdf-shader\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(maxTextures),\n        localUniformMSDFBit,\n        mSDFBit,\n        roundPixelsBit\n      ]\n    }));\n    glProgram ?? (glProgram = compileHighShaderGlProgram({\n      name: \"sdf-shader\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(maxTextures),\n        localUniformMSDFBitGl,\n        mSDFBitGl,\n        roundPixelsBitGl\n      ]\n    }));\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        localUniforms: uniforms,\n        batchSamplers: getBatchSamplersUniformGroup(maxTextures)\n      }\n    });\n  }\n}\n\nexport { SdfShader };\n//# sourceMappingURL=SdfShader.mjs.map\n","import { Cache } from '../../assets/cache/Cache.mjs';\nimport { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { Graphics } from '../graphics/shared/Graphics.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { SdfShader } from '../text/sdfShader/SdfShader.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout.mjs';\n\n\"use strict\";\nclass BitmapTextGraphics extends Graphics {\n  destroy() {\n    if (this.context.customShader) {\n      this.context.customShader.destroy();\n    }\n    super.destroy();\n  }\n}\nclass BitmapTextPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  validateRenderable(bitmapText) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    return this._renderer.renderPipes.graphics.validateRenderable(graphicsRenderable);\n  }\n  addRenderable(bitmapText, instructionSet) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    syncWithProxy(bitmapText, graphicsRenderable);\n    if (bitmapText._didTextUpdate) {\n      bitmapText._didTextUpdate = false;\n      this._updateContext(bitmapText, graphicsRenderable);\n    }\n    this._renderer.renderPipes.graphics.addRenderable(graphicsRenderable, instructionSet);\n    if (graphicsRenderable.context.customShader) {\n      this._updateDistanceField(bitmapText);\n    }\n  }\n  updateRenderable(bitmapText) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    syncWithProxy(bitmapText, graphicsRenderable);\n    this._renderer.renderPipes.graphics.updateRenderable(graphicsRenderable);\n    if (graphicsRenderable.context.customShader) {\n      this._updateDistanceField(bitmapText);\n    }\n  }\n  _updateContext(bitmapText, proxyGraphics) {\n    const { context } = proxyGraphics;\n    const bitmapFont = BitmapFontManager.getFont(bitmapText.text, bitmapText._style);\n    context.clear();\n    if (bitmapFont.distanceField.type !== \"none\") {\n      if (!context.customShader) {\n        context.customShader = new SdfShader(this._renderer.limits.maxBatchableTextures);\n      }\n    }\n    const chars = CanvasTextMetrics.graphemeSegmenter(bitmapText.text);\n    const style = bitmapText._style;\n    let currentY = bitmapFont.baseLineOffset;\n    const bitmapTextLayout = getBitmapTextLayout(chars, style, bitmapFont, true);\n    const padding = style.padding;\n    const scale = bitmapTextLayout.scale;\n    let tx = bitmapTextLayout.width;\n    let ty = bitmapTextLayout.height + bitmapTextLayout.offsetY;\n    if (style._stroke) {\n      tx += style._stroke.width / scale;\n      ty += style._stroke.width / scale;\n    }\n    context.translate(-bitmapText._anchor._x * tx - padding, -bitmapText._anchor._y * ty - padding).scale(scale, scale);\n    const tint = bitmapFont.applyFillAsTint ? style._fill.color : 16777215;\n    let fontSize = bitmapFont.fontMetrics.fontSize;\n    let lineHeight = bitmapFont.lineHeight;\n    if (style.lineHeight) {\n      fontSize = style.fontSize / scale;\n      lineHeight = style.lineHeight / scale;\n    }\n    let linePositionYShift = (lineHeight - fontSize) / 2;\n    if (linePositionYShift - bitmapFont.baseLineOffset < 0) {\n      linePositionYShift = 0;\n    }\n    for (let i = 0; i < bitmapTextLayout.lines.length; i++) {\n      const line = bitmapTextLayout.lines[i];\n      for (let j = 0; j < line.charPositions.length; j++) {\n        const char = line.chars[j];\n        const charData = bitmapFont.chars[char];\n        if (charData?.texture) {\n          const texture = charData.texture;\n          context.texture(\n            texture,\n            tint ? tint : \"black\",\n            Math.round(line.charPositions[j] + charData.xOffset),\n            Math.round(currentY + charData.yOffset + linePositionYShift),\n            texture.orig.width,\n            texture.orig.height\n          );\n        }\n      }\n      currentY += lineHeight;\n    }\n  }\n  _getGpuBitmapText(bitmapText) {\n    return bitmapText._gpuData[this._renderer.uid] || this.initGpuText(bitmapText);\n  }\n  initGpuText(bitmapText) {\n    const proxyRenderable = new BitmapTextGraphics();\n    bitmapText._gpuData[this._renderer.uid] = proxyRenderable;\n    this._updateContext(bitmapText, proxyRenderable);\n    return proxyRenderable;\n  }\n  _updateDistanceField(bitmapText) {\n    const context = this._getGpuBitmapText(bitmapText).context;\n    const fontFamily = bitmapText._style.fontFamily;\n    const dynamicFont = Cache.get(`${fontFamily}-bitmap`);\n    const { a, b, c, d } = bitmapText.groupTransform;\n    const dx = Math.sqrt(a * a + b * b);\n    const dy = Math.sqrt(c * c + d * d);\n    const worldScale = (Math.abs(dx) + Math.abs(dy)) / 2;\n    const fontScale = dynamicFont.baseRenderedFontSize / bitmapText._style.fontSize;\n    const distance = worldScale * dynamicFont.distanceField.range * (1 / fontScale);\n    context.customShader.resources.localUniforms.uniforms.uDistance = distance;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nBitmapTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"bitmapText\"\n};\nfunction syncWithProxy(container, proxy) {\n  proxy.groupTransform = container.groupTransform;\n  proxy.groupColorAlpha = container.groupColorAlpha;\n  proxy.groupColor = container.groupColor;\n  proxy.groupBlendMode = container.groupBlendMode;\n  proxy.globalDisplayStatus = container.globalDisplayStatus;\n  proxy.groupTransform = container.groupTransform;\n  proxy.localDisplayStatus = container.localDisplayStatus;\n  proxy.groupAlpha = container.groupAlpha;\n  proxy._roundPixels = container._roundPixels;\n}\n\nexport { BitmapTextGraphics, BitmapTextPipe };\n//# sourceMappingURL=BitmapTextPipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { BitmapTextPipe } from './BitmapTextPipe.mjs';\n\n\"use strict\";\nextensions.add(BitmapTextPipe);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nclass BatchableMesh {\n  constructor() {\n    this.batcherName = \"default\";\n    this.packAsQuad = false;\n    this.indexOffset = 0;\n    this.attributeOffset = 0;\n    this.roundPixels = 0;\n    this._batcher = null;\n    this._batch = null;\n    this._textureMatrixUpdateId = -1;\n    this._uvUpdateId = -1;\n  }\n  get blendMode() {\n    return this.renderable.groupBlendMode;\n  }\n  get topology() {\n    return this._topology || this.geometry.topology;\n  }\n  set topology(value) {\n    this._topology = value;\n  }\n  reset() {\n    this.renderable = null;\n    this.texture = null;\n    this._batcher = null;\n    this._batch = null;\n    this.geometry = null;\n    this._uvUpdateId = -1;\n    this._textureMatrixUpdateId = -1;\n  }\n  /**\n   * Sets the texture for the batchable mesh.\n   * As it does so, it resets the texture matrix update ID.\n   * this is to ensure that the texture matrix is recalculated when the uvs are referenced\n   * @param value - The texture to set.\n   */\n  setTexture(value) {\n    if (this.texture === value)\n      return;\n    this.texture = value;\n    this._textureMatrixUpdateId = -1;\n  }\n  get uvs() {\n    const geometry = this.geometry;\n    const uvBuffer = geometry.getBuffer(\"aUV\");\n    const uvs = uvBuffer.data;\n    let transformedUvs = uvs;\n    const textureMatrix = this.texture.textureMatrix;\n    if (!textureMatrix.isSimple) {\n      transformedUvs = this._transformedUvs;\n      if (this._textureMatrixUpdateId !== textureMatrix._updateID || this._uvUpdateId !== uvBuffer._updateID) {\n        if (!transformedUvs || transformedUvs.length < uvs.length) {\n          transformedUvs = this._transformedUvs = new Float32Array(uvs.length);\n        }\n        this._textureMatrixUpdateId = textureMatrix._updateID;\n        this._uvUpdateId = uvBuffer._updateID;\n        textureMatrix.multiplyUvs(uvs, transformedUvs);\n      }\n    }\n    return transformedUvs;\n  }\n  get positions() {\n    return this.geometry.positions;\n  }\n  get indices() {\n    return this.geometry.indices;\n  }\n  get color() {\n    return this.renderable.groupColorAlpha;\n  }\n  get groupTransform() {\n    return this.renderable.groupTransform;\n  }\n  get attributeSize() {\n    return this.geometry.positions.length / 2;\n  }\n  get indexSize() {\n    return this.geometry.indices.length;\n  }\n}\n\nexport { BatchableMesh };\n//# sourceMappingURL=BatchableMesh.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ResizePlugin {\n  /**\n   * Initialize the plugin with scope of application instance\n   * @private\n   * @param {object} [options] - See application options\n   */\n  static init(options) {\n    Object.defineProperty(\n      this,\n      \"resizeTo\",\n      {\n        set(dom) {\n          globalThis.removeEventListener(\"resize\", this.queueResize);\n          this._resizeTo = dom;\n          if (dom) {\n            globalThis.addEventListener(\"resize\", this.queueResize);\n            this.resize();\n          }\n        },\n        get() {\n          return this._resizeTo;\n        }\n      }\n    );\n    this.queueResize = () => {\n      if (!this._resizeTo) {\n        return;\n      }\n      this._cancelResize();\n      this._resizeId = requestAnimationFrame(() => this.resize());\n    };\n    this._cancelResize = () => {\n      if (this._resizeId) {\n        cancelAnimationFrame(this._resizeId);\n        this._resizeId = null;\n      }\n    };\n    this.resize = () => {\n      if (!this._resizeTo) {\n        return;\n      }\n      this._cancelResize();\n      let width;\n      let height;\n      if (this._resizeTo === globalThis.window) {\n        width = globalThis.innerWidth;\n        height = globalThis.innerHeight;\n      } else {\n        const { clientWidth, clientHeight } = this._resizeTo;\n        width = clientWidth;\n        height = clientHeight;\n      }\n      this.renderer.resize(width, height);\n      this.render();\n    };\n    this._resizeId = null;\n    this._resizeTo = null;\n    this.resizeTo = options.resizeTo || null;\n  }\n  /**\n   * Clean up the ticker, scoped to application\n   * @private\n   */\n  static destroy() {\n    globalThis.removeEventListener(\"resize\", this.queueResize);\n    this._cancelResize();\n    this._cancelResize = null;\n    this.queueResize = null;\n    this.resizeTo = null;\n    this.resize = null;\n  }\n}\n/** @ignore */\nResizePlugin.extension = ExtensionType.Application;\n\nexport { ResizePlugin };\n//# sourceMappingURL=ResizePlugin.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { UPDATE_PRIORITY } from '../ticker/const.mjs';\nimport { Ticker } from '../ticker/Ticker.mjs';\n\n\"use strict\";\nclass TickerPlugin {\n  /**\n   * Initialize the plugin with scope of application instance\n   * @private\n   * @param {object} [options] - See application options\n   */\n  static init(options) {\n    options = Object.assign({\n      autoStart: true,\n      sharedTicker: false\n    }, options);\n    Object.defineProperty(\n      this,\n      \"ticker\",\n      {\n        set(ticker) {\n          if (this._ticker) {\n            this._ticker.remove(this.render, this);\n          }\n          this._ticker = ticker;\n          if (ticker) {\n            ticker.add(this.render, this, UPDATE_PRIORITY.LOW);\n          }\n        },\n        get() {\n          return this._ticker;\n        }\n      }\n    );\n    this.stop = () => {\n      this._ticker.stop();\n    };\n    this.start = () => {\n      this._ticker.start();\n    };\n    this._ticker = null;\n    this.ticker = options.sharedTicker ? Ticker.shared : new Ticker();\n    if (options.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Clean up the ticker, scoped to application.\n   * @private\n   */\n  static destroy() {\n    if (this._ticker) {\n      const oldTicker = this._ticker;\n      this.ticker = null;\n      oldTicker.destroy();\n    }\n  }\n}\n/** @ignore */\nTickerPlugin.extension = ExtensionType.Application;\n\nexport { TickerPlugin };\n//# sourceMappingURL=TickerPlugin.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { ResizePlugin } from './ResizePlugin.mjs';\nimport { TickerPlugin } from './TickerPlugin.mjs';\n\n\"use strict\";\nextensions.add(ResizePlugin);\nextensions.add(TickerPlugin);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nfunction colorToUniform(rgb, alpha, out, offset) {\n  out[offset++] = (rgb >> 16 & 255) / 255;\n  out[offset++] = (rgb >> 8 & 255) / 255;\n  out[offset++] = (rgb & 255) / 255;\n  out[offset++] = alpha;\n}\nfunction color32BitToUniform(abgr, out, offset) {\n  const alpha = (abgr >> 24 & 255) / 255;\n  out[offset++] = (abgr & 255) / 255 * alpha;\n  out[offset++] = (abgr >> 8 & 255) / 255 * alpha;\n  out[offset++] = (abgr >> 16 & 255) / 255 * alpha;\n  out[offset++] = alpha;\n}\n\nexport { color32BitToUniform, colorToUniform };\n//# sourceMappingURL=colorToUniform.mjs.map\n","\"use strict\";\nconst blendModeIds = {\n  normal: 0,\n  add: 1,\n  multiply: 2,\n  screen: 3,\n  overlay: 4,\n  erase: 5,\n  \"normal-npm\": 6,\n  \"add-npm\": 7,\n  \"screen-npm\": 8,\n  min: 9,\n  max: 10\n};\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _State = class _State {\n  constructor() {\n    this.data = 0;\n    this.blendMode = \"normal\";\n    this.polygonOffset = 0;\n    this.blend = true;\n    this.depthMask = true;\n  }\n  /**\n   * Activates blending of the computed fragment color values.\n   * @default true\n   */\n  get blend() {\n    return !!(this.data & 1 << BLEND);\n  }\n  set blend(value) {\n    if (!!(this.data & 1 << BLEND) !== value) {\n      this.data ^= 1 << BLEND;\n    }\n  }\n  /**\n   * Activates adding an offset to depth values of polygon's fragments\n   * @default false\n   */\n  get offsets() {\n    return !!(this.data & 1 << OFFSET);\n  }\n  set offsets(value) {\n    if (!!(this.data & 1 << OFFSET) !== value) {\n      this.data ^= 1 << OFFSET;\n    }\n  }\n  /** The culling settings for this state none - No culling back - Back face culling front - Front face culling */\n  set cullMode(value) {\n    if (value === \"none\") {\n      this.culling = false;\n      return;\n    }\n    this.culling = true;\n    this.clockwiseFrontFace = value === \"front\";\n  }\n  get cullMode() {\n    if (!this.culling) {\n      return \"none\";\n    }\n    return this.clockwiseFrontFace ? \"front\" : \"back\";\n  }\n  /**\n   * Activates culling of polygons.\n   * @default false\n   */\n  get culling() {\n    return !!(this.data & 1 << CULLING);\n  }\n  set culling(value) {\n    if (!!(this.data & 1 << CULLING) !== value) {\n      this.data ^= 1 << CULLING;\n    }\n  }\n  /**\n   * Activates depth comparisons and updates to the depth buffer.\n   * @default false\n   */\n  get depthTest() {\n    return !!(this.data & 1 << DEPTH_TEST);\n  }\n  set depthTest(value) {\n    if (!!(this.data & 1 << DEPTH_TEST) !== value) {\n      this.data ^= 1 << DEPTH_TEST;\n    }\n  }\n  /**\n   * Enables or disables writing to the depth buffer.\n   * @default true\n   */\n  get depthMask() {\n    return !!(this.data & 1 << DEPTH_MASK);\n  }\n  set depthMask(value) {\n    if (!!(this.data & 1 << DEPTH_MASK) !== value) {\n      this.data ^= 1 << DEPTH_MASK;\n    }\n  }\n  /**\n   * Specifies whether or not front or back-facing polygons can be culled.\n   * @default false\n   */\n  get clockwiseFrontFace() {\n    return !!(this.data & 1 << WINDING);\n  }\n  set clockwiseFrontFace(value) {\n    if (!!(this.data & 1 << WINDING) !== value) {\n      this.data ^= 1 << WINDING;\n    }\n  }\n  /**\n   * The blend mode to be applied when this state is set. Apply a value of `normal` to reset the blend mode.\n   * Setting this mode to anything other than NO_BLEND will automatically switch blending on.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this._blendMode;\n  }\n  set blendMode(value) {\n    this.blend = value !== \"none\";\n    this._blendMode = value;\n    this._blendModeId = blendModeIds[value] || 0;\n  }\n  /**\n   * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.\n   * @default 0\n   */\n  get polygonOffset() {\n    return this._polygonOffset;\n  }\n  set polygonOffset(value) {\n    this.offsets = !!value;\n    this._polygonOffset = value;\n  }\n  toString() {\n    return `[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`;\n  }\n  /**\n   * A quickly getting an instance of a State that is configured for 2d rendering.\n   * @returns a new State with values set for 2d rendering\n   */\n  static for2d() {\n    const state = new _State();\n    state.depthTest = false;\n    state.blend = true;\n    return state;\n  }\n};\n_State.default2d = _State.for2d();\nlet State = _State;\n\nexport { State };\n//# sourceMappingURL=State.mjs.map\n","import { BatchableSprite } from '../sprite/BatchableSprite.mjs';\n\n\"use strict\";\nclass BatchableHTMLText extends BatchableSprite {\n  /**\n   * Creates an instance of BatchableHTMLText.\n   * @param renderer - The renderer instance to be used.\n   */\n  constructor(renderer) {\n    super();\n    this.generatingTexture = false;\n    this.currentKey = \"--\";\n    this._renderer = renderer;\n    renderer.runners.resolutionChange.add(this);\n  }\n  /** Handles resolution changes for the HTML text. If the text has auto resolution enabled, it triggers a view update. */\n  resolutionChange() {\n    const text = this.renderable;\n    if (text._autoResolution) {\n      text.onViewUpdate();\n    }\n  }\n  /** Destroys the BatchableHTMLText instance. Returns the texture promise to the renderer and cleans up references. */\n  destroy() {\n    const { htmlText } = this._renderer;\n    htmlText.getReferenceCount(this.currentKey) === null ? htmlText.returnTexturePromise(this.texturePromise) : htmlText.decreaseReferenceCount(this.currentKey);\n    this._renderer.runners.resolutionChange.remove(this);\n    this.texturePromise = null;\n    this._renderer = null;\n  }\n}\n\nexport { BatchableHTMLText };\n//# sourceMappingURL=BatchableHTMLText.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateTextBounds } from '../text/utils/updateTextBounds.mjs';\nimport { BatchableHTMLText } from './BatchableHTMLText.mjs';\n\n\"use strict\";\nclass HTMLTextPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  validateRenderable(htmlText) {\n    const gpuText = this._getGpuText(htmlText);\n    const newKey = htmlText.styleKey;\n    if (gpuText.currentKey !== newKey) {\n      return true;\n    }\n    return false;\n  }\n  addRenderable(htmlText, instructionSet) {\n    const batchableHTMLText = this._getGpuText(htmlText);\n    if (htmlText._didTextUpdate) {\n      const resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n      if (batchableHTMLText.currentKey !== htmlText.styleKey || htmlText.resolution !== resolution) {\n        this._updateGpuText(htmlText).catch((e) => {\n          console.error(e);\n        });\n      }\n      htmlText._didTextUpdate = false;\n      updateTextBounds(batchableHTMLText, htmlText);\n    }\n    this._renderer.renderPipes.batch.addToBatch(batchableHTMLText, instructionSet);\n  }\n  updateRenderable(htmlText) {\n    const batchableHTMLText = this._getGpuText(htmlText);\n    batchableHTMLText._batcher.updateElement(batchableHTMLText);\n  }\n  async _updateGpuText(htmlText) {\n    htmlText._didTextUpdate = false;\n    const batchableHTMLText = this._getGpuText(htmlText);\n    if (batchableHTMLText.generatingTexture)\n      return;\n    const oldTexturePromise = batchableHTMLText.texturePromise;\n    batchableHTMLText.texturePromise = null;\n    batchableHTMLText.generatingTexture = true;\n    htmlText._resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n    let texturePromise = this._renderer.htmlText.getTexturePromise(htmlText);\n    if (oldTexturePromise) {\n      texturePromise = texturePromise.finally(() => {\n        this._renderer.htmlText.decreaseReferenceCount(batchableHTMLText.currentKey);\n        this._renderer.htmlText.returnTexturePromise(oldTexturePromise);\n      });\n    }\n    batchableHTMLText.texturePromise = texturePromise;\n    batchableHTMLText.currentKey = htmlText.styleKey;\n    batchableHTMLText.texture = await texturePromise;\n    const renderGroup = htmlText.renderGroup || htmlText.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n    batchableHTMLText.generatingTexture = false;\n    updateTextBounds(batchableHTMLText, htmlText);\n  }\n  _getGpuText(htmlText) {\n    return htmlText._gpuData[this._renderer.uid] || this.initGpuText(htmlText);\n  }\n  initGpuText(htmlText) {\n    const batchableHTMLText = new BatchableHTMLText(this._renderer);\n    batchableHTMLText.renderable = htmlText;\n    batchableHTMLText.transform = htmlText.groupTransform;\n    batchableHTMLText.texture = Texture.EMPTY;\n    batchableHTMLText.bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    batchableHTMLText.roundPixels = this._renderer._roundPixels | htmlText._roundPixels;\n    htmlText._resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n    htmlText._gpuData[this._renderer.uid] = batchableHTMLText;\n    return batchableHTMLText;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nHTMLTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"htmlText\"\n};\n\nexport { HTMLTextPipe };\n//# sourceMappingURL=HTMLTextPipe.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nconst nssvg = \"http://www.w3.org/2000/svg\";\nconst nsxhtml = \"http://www.w3.org/1999/xhtml\";\nclass HTMLTextRenderData {\n  constructor() {\n    this.svgRoot = document.createElementNS(nssvg, \"svg\");\n    this.foreignObject = document.createElementNS(nssvg, \"foreignObject\");\n    this.domElement = document.createElementNS(nsxhtml, \"div\");\n    this.styleElement = document.createElementNS(nsxhtml, \"style\");\n    const { foreignObject, svgRoot, styleElement, domElement } = this;\n    foreignObject.setAttribute(\"width\", \"10000\");\n    foreignObject.setAttribute(\"height\", \"10000\");\n    foreignObject.style.overflow = \"hidden\";\n    svgRoot.appendChild(foreignObject);\n    foreignObject.appendChild(styleElement);\n    foreignObject.appendChild(domElement);\n    this.image = DOMAdapter.get().createImage();\n  }\n  destroy() {\n    this.svgRoot.remove();\n    this.foreignObject.remove();\n    this.styleElement.remove();\n    this.domElement.remove();\n    this.image.src = \"\";\n    this.image.remove();\n    this.svgRoot = null;\n    this.foreignObject = null;\n    this.styleElement = null;\n    this.domElement = null;\n    this.image = null;\n    this.canvasAndContext = null;\n  }\n}\n\nexport { HTMLTextRenderData };\n//# sourceMappingURL=HTMLTextRenderData.mjs.map\n","import { Cache } from '../../../assets/cache/Cache.mjs';\nimport { loadFontCSS } from './loadFontCSS.mjs';\n\n\"use strict\";\nconst FontStylePromiseCache = /* @__PURE__ */ new Map();\nasync function getFontCss(fontFamilies) {\n  const fontPromises = fontFamilies.filter((fontFamily) => Cache.has(`${fontFamily}-and-url`)).map((fontFamily) => {\n    if (!FontStylePromiseCache.has(fontFamily)) {\n      const { entries } = Cache.get(`${fontFamily}-and-url`);\n      const promises = [];\n      entries.forEach((entry) => {\n        const url = entry.url;\n        const faces = entry.faces;\n        const out = faces.map((face) => ({ weight: face.weight, style: face.style }));\n        promises.push(\n          ...out.map(\n            (style) => loadFontCSS(\n              {\n                fontWeight: style.weight,\n                fontStyle: style.style,\n                fontFamily\n              },\n              url\n            )\n          )\n        );\n      });\n      FontStylePromiseCache.set(\n        fontFamily,\n        Promise.all(promises).then((css) => css.join(\"\\n\"))\n      );\n    }\n    return FontStylePromiseCache.get(fontFamily);\n  });\n  return (await Promise.all(fontPromises)).join(\"\\n\");\n}\n\nexport { FontStylePromiseCache, getFontCss };\n//# sourceMappingURL=getFontCss.mjs.map\n","import { HTMLTextRenderData } from '../HTMLTextRenderData.mjs';\n\n\"use strict\";\nlet tempHTMLTextRenderData;\nfunction measureHtmlText(text, style, fontStyleCSS, htmlTextRenderData) {\n  htmlTextRenderData || (htmlTextRenderData = tempHTMLTextRenderData || (tempHTMLTextRenderData = new HTMLTextRenderData()));\n  const { domElement, styleElement, svgRoot } = htmlTextRenderData;\n  domElement.innerHTML = `<style>${style.cssStyle};</style><div style='padding:0'>${text}</div>`;\n  domElement.setAttribute(\"style\", \"transform-origin: top left; display: inline-block\");\n  if (fontStyleCSS) {\n    styleElement.textContent = fontStyleCSS;\n  }\n  document.body.appendChild(svgRoot);\n  const contentBounds = domElement.getBoundingClientRect();\n  svgRoot.remove();\n  const doublePadding = style.padding * 2;\n  return {\n    width: contentBounds.width - doublePadding,\n    height: contentBounds.height - doublePadding\n  };\n}\n\nexport { measureHtmlText };\n//# sourceMappingURL=measureHtmlText.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { TexturePool } from '../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../../rendering/renderers/types.mjs';\nimport { isSafari } from '../../utils/browser/isSafari.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { getPo2TextureFromSource } from '../text/utils/getPo2TextureFromSource.mjs';\nimport { HTMLTextRenderData } from './HTMLTextRenderData.mjs';\nimport { extractFontFamilies } from './utils/extractFontFamilies.mjs';\nimport { getFontCss } from './utils/getFontCss.mjs';\nimport { getSVGUrl } from './utils/getSVGUrl.mjs';\nimport { getTemporaryCanvasFromImage } from './utils/getTemporaryCanvasFromImage.mjs';\nimport { loadSVGImage } from './utils/loadSVGImage.mjs';\nimport { measureHtmlText } from './utils/measureHtmlText.mjs';\n\n\"use strict\";\nclass HTMLTextSystem {\n  constructor(renderer) {\n    this._activeTextures = {};\n    this._renderer = renderer;\n    this._createCanvas = renderer.type === RendererType.WEBGPU;\n  }\n  /**\n   * @param options\n   * @deprecated Use getTexturePromise instead\n   */\n  getTexture(options) {\n    return this.getTexturePromise(options);\n  }\n  /**\n   * Increases the reference count for a texture.\n   * @param text - The HTMLText instance associated with the texture.\n   */\n  getManagedTexture(text) {\n    const textKey = text.styleKey;\n    if (this._activeTextures[textKey]) {\n      this._increaseReferenceCount(textKey);\n      return this._activeTextures[textKey].promise;\n    }\n    const promise = this._buildTexturePromise(text).then((texture) => {\n      this._activeTextures[textKey].texture = texture;\n      return texture;\n    });\n    this._activeTextures[textKey] = {\n      texture: null,\n      promise,\n      usageCount: 1\n    };\n    return promise;\n  }\n  /**\n   * Gets the current reference count for a texture associated with a text key.\n   * @param textKey - The unique key identifying the text style configuration\n   * @returns The number of Text instances currently using this texture\n   */\n  getReferenceCount(textKey) {\n    return this._activeTextures[textKey]?.usageCount ?? null;\n  }\n  _increaseReferenceCount(textKey) {\n    this._activeTextures[textKey].usageCount++;\n  }\n  /**\n   * Decreases the reference count for a texture.\n   * If the count reaches zero, the texture is cleaned up.\n   * @param textKey - The key associated with the HTMLText instance.\n   */\n  decreaseReferenceCount(textKey) {\n    const activeTexture = this._activeTextures[textKey];\n    if (!activeTexture)\n      return;\n    activeTexture.usageCount--;\n    if (activeTexture.usageCount === 0) {\n      if (activeTexture.texture) {\n        this._cleanUp(activeTexture.texture);\n      } else {\n        activeTexture.promise.then((texture) => {\n          activeTexture.texture = texture;\n          this._cleanUp(activeTexture.texture);\n        }).catch(() => {\n          warn(\"HTMLTextSystem: Failed to clean texture\");\n        });\n      }\n      this._activeTextures[textKey] = null;\n    }\n  }\n  /**\n   * Returns a promise that resolves to a texture for the given HTMLText options.\n   * @param options - The options for the HTMLText.\n   * @returns A promise that resolves to a Texture.\n   */\n  getTexturePromise(options) {\n    return this._buildTexturePromise(options);\n  }\n  async _buildTexturePromise(options) {\n    const { text, style, resolution, textureStyle } = options;\n    const htmlTextData = BigPool.get(HTMLTextRenderData);\n    const fontFamilies = extractFontFamilies(text, style);\n    const fontCSS = await getFontCss(fontFamilies);\n    const measured = measureHtmlText(text, style, fontCSS, htmlTextData);\n    const width = Math.ceil(Math.ceil(Math.max(1, measured.width) + style.padding * 2) * resolution);\n    const height = Math.ceil(Math.ceil(Math.max(1, measured.height) + style.padding * 2) * resolution);\n    const image = htmlTextData.image;\n    const uvSafeOffset = 2;\n    image.width = (width | 0) + uvSafeOffset;\n    image.height = (height | 0) + uvSafeOffset;\n    const svgURL = getSVGUrl(text, style, resolution, fontCSS, htmlTextData);\n    await loadSVGImage(image, svgURL, isSafari() && fontFamilies.length > 0);\n    const resource = image;\n    let canvasAndContext;\n    if (this._createCanvas) {\n      canvasAndContext = getTemporaryCanvasFromImage(image, resolution);\n    }\n    const texture = getPo2TextureFromSource(\n      canvasAndContext ? canvasAndContext.canvas : resource,\n      image.width - uvSafeOffset,\n      image.height - uvSafeOffset,\n      resolution\n    );\n    if (textureStyle)\n      texture.source.style = textureStyle;\n    if (this._createCanvas) {\n      this._renderer.texture.initSource(texture.source);\n      CanvasPool.returnCanvasAndContext(canvasAndContext);\n    }\n    BigPool.return(htmlTextData);\n    return texture;\n  }\n  returnTexturePromise(texturePromise) {\n    texturePromise.then((texture) => {\n      this._cleanUp(texture);\n    }).catch(() => {\n      warn(\"HTMLTextSystem: Failed to clean texture\");\n    });\n  }\n  _cleanUp(texture) {\n    TexturePool.returnTexture(texture, true);\n    texture.source.resource = null;\n    texture.source.uploadMethodId = \"unknown\";\n  }\n  destroy() {\n    this._renderer = null;\n    for (const key in this._activeTextures) {\n      if (this._activeTextures[key])\n        this.returnTexturePromise(this._activeTextures[key].promise);\n    }\n    this._activeTextures = null;\n  }\n}\n/** @ignore */\nHTMLTextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"htmlText\"\n};\n\nexport { HTMLTextSystem };\n//# sourceMappingURL=HTMLTextSystem.mjs.map\n","\"use strict\";\nfunction extractFontFamilies(text, style) {\n  const fontFamily = style.fontFamily;\n  const fontFamilies = [];\n  const dedupe = {};\n  const regex = /font-family:([^;\"\\s]+)/g;\n  const matches = text.match(regex);\n  function addFontFamily(fontFamily2) {\n    if (!dedupe[fontFamily2]) {\n      fontFamilies.push(fontFamily2);\n      dedupe[fontFamily2] = true;\n    }\n  }\n  if (Array.isArray(fontFamily)) {\n    for (let i = 0; i < fontFamily.length; i++) {\n      addFontFamily(fontFamily[i]);\n    }\n  } else {\n    addFontFamily(fontFamily);\n  }\n  if (matches) {\n    matches.forEach((match) => {\n      const fontFamily2 = match.split(\":\")[1].trim();\n      addFontFamily(fontFamily2);\n    });\n  }\n  for (const i in style.tagStyles) {\n    const fontFamily2 = style.tagStyles[i].fontFamily;\n    addFontFamily(fontFamily2);\n  }\n  return fontFamilies;\n}\n\nexport { extractFontFamilies };\n//# sourceMappingURL=extractFontFamilies.mjs.map\n","import { loadFontAsBase64 } from './loadFontAsBase64.mjs';\n\n\"use strict\";\nasync function loadFontCSS(style, url) {\n  const dataSrc = await loadFontAsBase64(url);\n  return `@font-face {\n        font-family: \"${style.fontFamily}\";\n        font-weight: ${style.fontWeight};\n        font-style: ${style.fontStyle};\n        src: url('${dataSrc}');\n    }`;\n}\n\nexport { loadFontCSS };\n//# sourceMappingURL=loadFontCSS.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\n\n\"use strict\";\nasync function loadFontAsBase64(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  const blob = await response.blob();\n  const reader = new FileReader();\n  const dataSrc = await new Promise((resolve, reject) => {\n    reader.onloadend = () => resolve(reader.result);\n    reader.onerror = reject;\n    reader.readAsDataURL(blob);\n  });\n  return dataSrc;\n}\n\nexport { loadFontAsBase64 };\n//# sourceMappingURL=loadFontAsBase64.mjs.map\n","\"use strict\";\nfunction getSVGUrl(text, style, resolution, fontCSS, htmlTextData) {\n  const { domElement, styleElement, svgRoot } = htmlTextData;\n  domElement.innerHTML = `<style>${style.cssStyle}</style><div style='padding:0;'>${text}</div>`;\n  domElement.setAttribute(\"style\", `transform: scale(${resolution});transform-origin: top left; display: inline-block`);\n  styleElement.textContent = fontCSS;\n  const { width, height } = htmlTextData.image;\n  svgRoot.setAttribute(\"width\", width.toString());\n  svgRoot.setAttribute(\"height\", height.toString());\n  return new XMLSerializer().serializeToString(svgRoot);\n}\n\nexport { getSVGUrl };\n//# sourceMappingURL=getSVGUrl.mjs.map\n","\"use strict\";\nfunction loadSVGImage(image, url, delay) {\n  return new Promise(async (resolve) => {\n    if (delay) {\n      await new Promise((resolve2) => setTimeout(resolve2, 100));\n    }\n    image.onload = () => {\n      resolve();\n    };\n    image.src = `data:image/svg+xml;charset=utf8,${encodeURIComponent(url)}`;\n    image.crossOrigin = \"anonymous\";\n  });\n}\n\nexport { loadSVGImage };\n//# sourceMappingURL=loadSVGImage.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nfunction isSafari() {\n  const { userAgent } = DOMAdapter.get().getNavigator();\n  return /^((?!chrome|android).)*safari/i.test(userAgent);\n}\n\nexport { isSafari };\n//# sourceMappingURL=isSafari.mjs.map\n","import { CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool.mjs';\n\n\"use strict\";\nfunction getTemporaryCanvasFromImage(image, resolution) {\n  const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n    image.width,\n    image.height,\n    resolution\n  );\n  const { context } = canvasAndContext;\n  context.clearRect(0, 0, image.width, image.height);\n  context.drawImage(image, 0, 0);\n  return canvasAndContext;\n}\n\nexport { getTemporaryCanvasFromImage };\n//# sourceMappingURL=getTemporaryCanvasFromImage.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { HTMLTextPipe } from './HTMLTextPipe.mjs';\nimport { HTMLTextSystem } from './HTMLTextSystem.mjs';\n\n\"use strict\";\nextensions.add(HTMLTextSystem);\nextensions.add(HTMLTextPipe);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nclass BatchableSprite {\n  constructor() {\n    this.batcherName = \"default\";\n    this.topology = \"triangle-list\";\n    // batch specific..\n    this.attributeSize = 4;\n    this.indexSize = 6;\n    this.packAsQuad = true;\n    this.roundPixels = 0;\n    this._attributeStart = 0;\n    // location in the buffer\n    this._batcher = null;\n    this._batch = null;\n  }\n  get blendMode() {\n    return this.renderable.groupBlendMode;\n  }\n  get color() {\n    return this.renderable.groupColorAlpha;\n  }\n  reset() {\n    this.renderable = null;\n    this.texture = null;\n    this._batcher = null;\n    this._batch = null;\n    this.bounds = null;\n  }\n  destroy() {\n  }\n}\n\nexport { BatchableSprite };\n//# sourceMappingURL=BatchableSprite.mjs.map\n","import { BatchableSprite } from '../../sprite/BatchableSprite.mjs';\n\n\"use strict\";\nclass BatchableText extends BatchableSprite {\n  constructor(renderer) {\n    super();\n    this._renderer = renderer;\n    renderer.runners.resolutionChange.add(this);\n  }\n  resolutionChange() {\n    const text = this.renderable;\n    if (text._autoResolution) {\n      text.onViewUpdate();\n    }\n  }\n  destroy() {\n    const { canvasText } = this._renderer;\n    const refCount = canvasText.getReferenceCount(this.currentKey);\n    if (refCount > 0) {\n      canvasText.decreaseReferenceCount(this.currentKey);\n    } else if (this.texture) {\n      canvasText.returnTexture(this.texture);\n    }\n    this._renderer.runners.resolutionChange.remove(this);\n    this._renderer = null;\n  }\n}\n\nexport { BatchableText };\n//# sourceMappingURL=BatchableText.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { updateTextBounds } from '../utils/updateTextBounds.mjs';\nimport { BatchableText } from './BatchableText.mjs';\n\n\"use strict\";\nclass CanvasTextPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  validateRenderable(text) {\n    const gpuText = this._getGpuText(text);\n    const newKey = text.styleKey;\n    if (gpuText.currentKey !== newKey)\n      return true;\n    return text._didTextUpdate;\n  }\n  addRenderable(text, instructionSet) {\n    const batchableText = this._getGpuText(text);\n    if (text._didTextUpdate) {\n      const resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n      if (batchableText.currentKey !== text.styleKey || text.resolution !== resolution) {\n        this._updateGpuText(text);\n      }\n      text._didTextUpdate = false;\n      updateTextBounds(batchableText, text);\n    }\n    this._renderer.renderPipes.batch.addToBatch(batchableText, instructionSet);\n  }\n  updateRenderable(text) {\n    const batchableText = this._getGpuText(text);\n    batchableText._batcher.updateElement(batchableText);\n  }\n  _updateGpuText(text) {\n    const batchableText = this._getGpuText(text);\n    if (batchableText.texture) {\n      this._renderer.canvasText.decreaseReferenceCount(batchableText.currentKey);\n    }\n    text._resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n    batchableText.texture = this._renderer.canvasText.getManagedTexture(text);\n    batchableText.currentKey = text.styleKey;\n  }\n  _getGpuText(text) {\n    return text._gpuData[this._renderer.uid] || this.initGpuText(text);\n  }\n  initGpuText(text) {\n    const batchableText = new BatchableText(this._renderer);\n    batchableText.currentKey = \"--\";\n    batchableText.renderable = text;\n    batchableText.transform = text.groupTransform;\n    batchableText.bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    batchableText.roundPixels = this._renderer._roundPixels | text._roundPixels;\n    text._gpuData[this._renderer.uid] = batchableText;\n    return batchableText;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nCanvasTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"text\"\n};\n\nexport { CanvasTextPipe };\n//# sourceMappingURL=CanvasTextPipe.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { nextPow2 } from '../../maths/misc/pow2.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nlet _internalCanvas = null;\nlet _internalContext = null;\nfunction ensureInternalCanvas(width, height) {\n  if (!_internalCanvas) {\n    _internalCanvas = DOMAdapter.get().createCanvas(256, 128);\n    _internalContext = _internalCanvas.getContext(\"2d\", { willReadFrequently: true });\n    _internalContext.globalCompositeOperation = \"copy\";\n    _internalContext.globalAlpha = 1;\n  }\n  if (_internalCanvas.width < width || _internalCanvas.height < height) {\n    _internalCanvas.width = nextPow2(width);\n    _internalCanvas.height = nextPow2(height);\n  }\n}\nfunction checkRow(data, width, y) {\n  for (let x = 0, index = 4 * y * width; x < width; ++x, index += 4) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction checkColumn(data, width, x, top, bottom) {\n  const stride = 4 * width;\n  for (let y = top, index = top * stride + 4 * x; y <= bottom; ++y, index += stride) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction getCanvasBoundingBox(...args) {\n  let options = args[0];\n  if (!options.canvas) {\n    options = { canvas: args[0], resolution: args[1] };\n  }\n  const { canvas } = options;\n  const resolution = Math.min(options.resolution ?? 1, 1);\n  const width = options.width ?? canvas.width;\n  const height = options.height ?? canvas.height;\n  let output = options.output;\n  ensureInternalCanvas(width, height);\n  if (!_internalContext) {\n    throw new TypeError(\"Failed to get canvas 2D context\");\n  }\n  _internalContext.drawImage(\n    canvas,\n    0,\n    0,\n    width,\n    height,\n    0,\n    0,\n    width * resolution,\n    height * resolution\n  );\n  const imageData = _internalContext.getImageData(0, 0, width, height);\n  const data = imageData.data;\n  let left = 0;\n  let top = 0;\n  let right = width - 1;\n  let bottom = height - 1;\n  while (top < height && checkRow(data, width, top))\n    ++top;\n  if (top === height)\n    return Rectangle.EMPTY;\n  while (checkRow(data, width, bottom))\n    --bottom;\n  while (checkColumn(data, width, left, top, bottom))\n    ++left;\n  while (checkColumn(data, width, right, top, bottom))\n    --right;\n  ++right;\n  ++bottom;\n  _internalContext.globalCompositeOperation = \"source-over\";\n  _internalContext.strokeRect(left, top, right - left, bottom - top);\n  _internalContext.globalCompositeOperation = \"copy\";\n  output ?? (output = new Rectangle());\n  output.set(left / resolution, top / resolution, (right - left) / resolution, (bottom - top) / resolution);\n  return output;\n}\n\nexport { getCanvasBoundingBox };\n//# sourceMappingURL=getCanvasBoundingBox.mjs.map\n","import { Color } from '../../../color/Color.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { getCanvasBoundingBox } from '../../../utils/canvas/getCanvasBoundingBox.mjs';\nimport { CanvasTextMetrics } from './CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from './utils/getCanvasFillStyle.mjs';\n\n\"use strict\";\nconst tempRect = new Rectangle();\nclass CanvasTextGeneratorClass {\n  /**\n   * Creates a canvas with the specified text rendered to it.\n   *\n   * Generates a canvas of appropriate size, renders the text with the provided style,\n   * and returns both the canvas/context and a Rectangle representing the text bounds.\n   *\n   * When trim is enabled in the style, the frame will represent the bounds of the\n   * non-transparent pixels, which can be smaller than the full canvas.\n   * @param options - The options for generating the text canvas\n   * @param options.text - The text to render\n   * @param options.style - The style to apply to the text\n   * @param options.resolution - The resolution of the canvas (defaults to 1)\n   * @param options.padding\n   * @returns An object containing the canvas/context and the frame (bounds) of the text\n   */\n  getCanvasAndContext(options) {\n    const { text, style, resolution = 1 } = options;\n    const padding = style._getFinalPadding();\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    const width = Math.ceil(Math.ceil(Math.max(1, measured.width) + padding * 2) * resolution);\n    const height = Math.ceil(Math.ceil(Math.max(1, measured.height) + padding * 2) * resolution);\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(width, height);\n    this._renderTextToCanvas(text, style, padding, resolution, canvasAndContext);\n    const frame = style.trim ? getCanvasBoundingBox({ canvas: canvasAndContext.canvas, width, height, resolution: 1, output: tempRect }) : tempRect.set(0, 0, width, height);\n    return {\n      canvasAndContext,\n      frame\n    };\n  }\n  /**\n   * Returns a canvas and context to the pool.\n   *\n   * This should be called when you're done with the canvas to allow reuse\n   * and prevent memory leaks.\n   * @param canvasAndContext - The canvas and context to return to the pool\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    CanvasPool.returnCanvasAndContext(canvasAndContext);\n  }\n  /**\n   * Renders text to its canvas, and updates its texture.\n   * @param text - The text to render\n   * @param style - The style of the text\n   * @param padding - The padding of the text\n   * @param resolution - The resolution of the text\n   * @param canvasAndContext - The canvas and context to render the text to\n   */\n  _renderTextToCanvas(text, style, padding, resolution, canvasAndContext) {\n    const { canvas, context } = canvasAndContext;\n    const font = fontStringFromTextStyle(style);\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    const lines = measured.lines;\n    const lineHeight = measured.lineHeight;\n    const lineWidths = measured.lineWidths;\n    const maxLineWidth = measured.maxLineWidth;\n    const fontProperties = measured.fontProperties;\n    const height = canvas.height;\n    context.resetTransform();\n    context.scale(resolution, resolution);\n    context.textBaseline = style.textBaseline;\n    if (style._stroke?.width) {\n      const strokeStyle = style._stroke;\n      context.lineWidth = strokeStyle.width;\n      context.miterLimit = strokeStyle.miterLimit;\n      context.lineJoin = strokeStyle.join;\n      context.lineCap = strokeStyle.cap;\n    }\n    context.font = font;\n    let linePositionX;\n    let linePositionY;\n    const passesCount = style.dropShadow ? 2 : 1;\n    for (let i = 0; i < passesCount; ++i) {\n      const isShadowPass = style.dropShadow && i === 0;\n      const dsOffsetText = isShadowPass ? Math.ceil(Math.max(1, height) + padding * 2) : 0;\n      const dsOffsetShadow = dsOffsetText * resolution;\n      if (isShadowPass) {\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        const shadowOptions = style.dropShadow;\n        const dropShadowColor = shadowOptions.color;\n        const dropShadowAlpha = shadowOptions.alpha;\n        context.shadowColor = Color.shared.setValue(dropShadowColor).setAlpha(dropShadowAlpha).toRgbaString();\n        const dropShadowBlur = shadowOptions.blur * resolution;\n        const dropShadowDistance = shadowOptions.distance * resolution;\n        context.shadowBlur = dropShadowBlur;\n        context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n        context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance + dsOffsetShadow;\n      } else {\n        context.fillStyle = style._fill ? getCanvasFillStyle(style._fill, context, measured, padding * 2) : null;\n        if (style._stroke?.width) {\n          const strokePadding = style._stroke.width * 0.5 + padding * 2;\n          context.strokeStyle = getCanvasFillStyle(style._stroke, context, measured, strokePadding);\n        }\n        context.shadowColor = \"black\";\n      }\n      let linePositionYShift = (lineHeight - fontProperties.fontSize) / 2;\n      if (lineHeight - fontProperties.fontSize < 0) {\n        linePositionYShift = 0;\n      }\n      const strokeWidth = style._stroke?.width ?? 0;\n      for (let i2 = 0; i2 < lines.length; i2++) {\n        linePositionX = strokeWidth / 2;\n        linePositionY = strokeWidth / 2 + i2 * lineHeight + fontProperties.ascent + linePositionYShift;\n        if (style.align === \"right\") {\n          linePositionX += maxLineWidth - lineWidths[i2];\n        } else if (style.align === \"center\") {\n          linePositionX += (maxLineWidth - lineWidths[i2]) / 2;\n        }\n        if (style._stroke?.width) {\n          this._drawLetterSpacing(\n            lines[i2],\n            style,\n            canvasAndContext,\n            linePositionX + padding,\n            linePositionY + padding - dsOffsetText,\n            true\n          );\n        }\n        if (style._fill !== void 0) {\n          this._drawLetterSpacing(\n            lines[i2],\n            style,\n            canvasAndContext,\n            linePositionX + padding,\n            linePositionY + padding - dsOffsetText\n          );\n        }\n      }\n    }\n  }\n  /**\n   * Render the text with letter-spacing.\n   *\n   * This method handles rendering text with the correct letter spacing, using either:\n   * 1. Native letter spacing if supported by the browser\n   * 2. Manual letter spacing calculation if not natively supported\n   *\n   * For manual letter spacing, it calculates the position of each character\n   * based on its width and the desired spacing.\n   * @param text - The text to draw\n   * @param style - The text style to apply\n   * @param canvasAndContext - The canvas and context to draw to\n   * @param x - Horizontal position to draw the text\n   * @param y - Vertical position to draw the text\n   * @param isStroke - Whether to render the stroke (true) or fill (false)\n   * @private\n   */\n  _drawLetterSpacing(text, style, canvasAndContext, x, y, isStroke = false) {\n    const { context } = canvasAndContext;\n    const letterSpacing = style.letterSpacing;\n    let useExperimentalLetterSpacing = false;\n    if (CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    if (letterSpacing === 0 || useExperimentalLetterSpacing) {\n      if (isStroke) {\n        context.strokeText(text, x, y);\n      } else {\n        context.fillText(text, x, y);\n      }\n      return;\n    }\n    let currentPosition = x;\n    const stringArray = CanvasTextMetrics.graphemeSegmenter(text);\n    let previousWidth = context.measureText(text).width;\n    let currentWidth = 0;\n    for (let i = 0; i < stringArray.length; ++i) {\n      const currentChar = stringArray[i];\n      if (isStroke) {\n        context.strokeText(currentChar, currentPosition, y);\n      } else {\n        context.fillText(currentChar, currentPosition, y);\n      }\n      let textStr = \"\";\n      for (let j = i + 1; j < stringArray.length; ++j) {\n        textStr += stringArray[j];\n      }\n      currentWidth = context.measureText(textStr).width;\n      currentPosition += previousWidth - currentWidth + letterSpacing;\n      previousWidth = currentWidth;\n    }\n  }\n}\nconst CanvasTextGenerator = new CanvasTextGeneratorClass();\n\nexport { CanvasTextGenerator };\n//# sourceMappingURL=CanvasTextGenerator.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { TextureStyle } from '../../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport { deprecation } from '../../../utils/logging/deprecation.mjs';\nimport { TextStyle } from '../TextStyle.mjs';\nimport { getPo2TextureFromSource } from '../utils/getPo2TextureFromSource.mjs';\nimport { CanvasTextGenerator } from './CanvasTextGenerator.mjs';\n\n\"use strict\";\nclass CanvasTextSystem {\n  constructor(_renderer) {\n    this._activeTextures = {};\n    this._renderer = _renderer;\n  }\n  getTexture(options, _resolution, _style, _textKey) {\n    if (typeof options === \"string\") {\n      deprecation(\"8.0.0\", \"CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments\");\n      options = {\n        text: options,\n        style: _style,\n        resolution: _resolution\n      };\n    }\n    if (!(options.style instanceof TextStyle)) {\n      options.style = new TextStyle(options.style);\n    }\n    if (!(options.textureStyle instanceof TextureStyle)) {\n      options.textureStyle = new TextureStyle(options.textureStyle);\n    }\n    if (typeof options.text !== \"string\") {\n      options.text = options.text.toString();\n    }\n    const { text, style, textureStyle } = options;\n    const resolution = options.resolution ?? this._renderer.resolution;\n    const { frame, canvasAndContext } = CanvasTextGenerator.getCanvasAndContext({\n      text,\n      style,\n      resolution\n    });\n    const texture = getPo2TextureFromSource(canvasAndContext.canvas, frame.width, frame.height, resolution);\n    if (textureStyle)\n      texture.source.style = textureStyle;\n    if (style.trim) {\n      frame.pad(style.padding);\n      texture.frame.copyFrom(frame);\n      texture.frame.scale(1 / resolution);\n      texture.updateUvs();\n    }\n    if (style.filters) {\n      const filteredTexture = this._applyFilters(texture, style.filters);\n      this.returnTexture(texture);\n      CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n      return filteredTexture;\n    }\n    this._renderer.texture.initSource(texture._source);\n    CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n    return texture;\n  }\n  /**\n   * Returns a texture that was created wit the above `getTexture` function.\n   * Handy if you are done with a texture and want to return it to the pool.\n   * @param texture - The texture to be returned.\n   */\n  returnTexture(texture) {\n    const source = texture.source;\n    source.resource = null;\n    source.uploadMethodId = \"unknown\";\n    source.alphaMode = \"no-premultiply-alpha\";\n    TexturePool.returnTexture(texture, true);\n  }\n  /**\n   * Renders text to its canvas, and updates its texture.\n   * @deprecated since 8.10.0\n   */\n  renderTextToCanvas() {\n    deprecation(\n      \"8.10.0\",\n      \"CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead\"\n    );\n  }\n  /**\n   * Gets or creates a managed texture for a Text object. This method handles texture reuse and reference counting.\n   * @param text - The Text object that needs a texture\n   * @returns A Texture instance that represents the rendered text\n   * @remarks\n   * This method performs the following:\n   * 1. Sets the appropriate resolution based on auto-resolution settings\n   * 2. Checks if a texture already exists for the text's style\n   * 3. Creates a new texture if needed or returns an existing one\n   * 4. Manages reference counting for texture reuse\n   */\n  getManagedTexture(text) {\n    text._resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n    const textKey = text.styleKey;\n    if (this._activeTextures[textKey]) {\n      this._increaseReferenceCount(textKey);\n      return this._activeTextures[textKey].texture;\n    }\n    const texture = this.getTexture({\n      text: text.text,\n      style: text.style,\n      resolution: text._resolution,\n      textureStyle: text.textureStyle\n    });\n    this._activeTextures[textKey] = {\n      texture,\n      usageCount: 1\n    };\n    return texture;\n  }\n  /**\n   * Decreases the reference count for a texture associated with a text key.\n   * When the reference count reaches zero, the texture is returned to the pool.\n   * @param textKey - The unique key identifying the text style configuration\n   * @remarks\n   * This method is crucial for memory management, ensuring textures are properly\n   * cleaned up when they are no longer needed by any Text instances.\n   */\n  decreaseReferenceCount(textKey) {\n    const activeTexture = this._activeTextures[textKey];\n    activeTexture.usageCount--;\n    if (activeTexture.usageCount === 0) {\n      this.returnTexture(activeTexture.texture);\n      this._activeTextures[textKey] = null;\n    }\n  }\n  /**\n   * Gets the current reference count for a texture associated with a text key.\n   * @param textKey - The unique key identifying the text style configuration\n   * @returns The number of Text instances currently using this texture\n   */\n  getReferenceCount(textKey) {\n    return this._activeTextures[textKey]?.usageCount ?? 0;\n  }\n  _increaseReferenceCount(textKey) {\n    this._activeTextures[textKey].usageCount++;\n  }\n  /**\n   * Applies the specified filters to the given texture.\n   *\n   * This method takes a texture and a list of filters, applies the filters to the texture,\n   * and returns the resulting texture. It also ensures that the alpha mode of the resulting\n   * texture is set to 'premultiplied-alpha'.\n   * @param {Texture} texture - The texture to which the filters will be applied.\n   * @param {Filter[]} filters - The filters to apply to the texture.\n   * @returns {Texture} The resulting texture after all filters have been applied.\n   */\n  _applyFilters(texture, filters) {\n    const currentRenderTarget = this._renderer.renderTarget.renderTarget;\n    const resultTexture = this._renderer.filter.generateFilteredTexture({\n      texture,\n      filters\n    });\n    this._renderer.renderTarget.bind(currentRenderTarget, false);\n    return resultTexture;\n  }\n  destroy() {\n    this._renderer = null;\n    for (const key in this._activeTextures) {\n      if (this._activeTextures[key])\n        this.returnTexture(this._activeTextures[key].texture);\n    }\n    this._activeTextures = null;\n  }\n}\n/** @ignore */\nCanvasTextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"canvasText\"\n};\n\nexport { CanvasTextSystem };\n//# sourceMappingURL=CanvasTextSystem.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { CanvasTextPipe } from './canvas/CanvasTextPipe.mjs';\nimport { CanvasTextSystem } from './canvas/CanvasTextSystem.mjs';\n\n\"use strict\";\nextensions.add(CanvasTextSystem);\nextensions.add(CanvasTextPipe);\n//# sourceMappingURL=init.mjs.map\n"],"names":["_PlaneGeometry","MeshGeometry","constructor","args","super","options","deprecation","width","height","verticesX","verticesY","this","build","defaultOptions","total","verts","uvs","indices","sizeX","sizeY","i","x","y","push","totalSub","xpos","ypos","value","value2","value3","value4","buffers","data","Float32Array","indexBuffer","Uint32Array","update","PlaneGeometry","_NineSliceGeometry","_originalWidth","originalWidth","_originalHeight","originalHeight","_leftWidth","leftWidth","_rightWidth","rightWidth","_topHeight","topHeight","_bottomHeight","bottomHeight","_anchorX","anchor","_anchorY","updateUvs","updatePositions","p","positions","w","scaleW","h","scaleH","scale","Math","min","anchorOffsetX","anchorOffsetY","getBuffer","_uvw","_uvh","NineSliceGeometry","NineSliceSpriteGpuData","BatchableMesh","geometry","destroy","NineSliceSpritePipe","renderer","_renderer","addRenderable","sprite","instructionSet","gpuSprite","_getGpuSprite","didViewUpdate","_updateBatchableSprite","renderPipes","batch","addToBatch","updateRenderable","_batcher","updateElement","validateRenderable","checkAndUpdateTexture","_texture","batchableSprite","setTexture","_gpuData","uid","_initGPUSprite","gpuData","batchableMesh","renderable","transform","groupTransform","texture","roundPixels","_roundPixels","extension","type","WebGLPipes","WebGPUPipes","CanvasPipes","name","add","tempBounds","getPo2TextureFromSource","image","resolution","bounds","minX","minY","maxX","maxY","getOptimalTexture","source","uploadMethodId","resource","alphaMode","frame","emit","_MeshGeometry","length","shrinkToFit","shrinkBuffersToFit","attributes","aPosition","buffer","label","usage","VERTEX","COPY_DST","format","stride","offset","aUV","INDEX","topology","batchMode","GlParticleContainerAdaptor","execute","particleContainerPipe","container","state","shader","defaultShader","resources","uTexture","_source","uniforms","localUniforms","gl","getBuffers","bind","set","glProgram","glType","BYTES_PER_ELEMENT","UNSIGNED_SHORT","UNSIGNED_INT","drawElements","TRIANGLES","particleChildren","createIndicesForQuads","size","outBuffer","totalIndices","Uint16Array","Error","j","generateUpdateFunction","properties","dynamic","funcFragments","property","code","getAttributeInfoFromFormat","unshift","functionSource","join","Function","ParticleBuffer","_size","_generateParticleUpdateCache","staticVertexSize","dynamicVertexSize","attributeInfo","_dynamicStride","_staticStride","staticAttributeBuffer","ViewableBuffer","dynamicAttributeBuffer","Geometry","dynamicOffset","staticOffset","_staticBuffer","Buffer","_dynamicBuffer","addAttribute","attributeName","addIndex","uploadFunction","getParticleUpdate","_dynamicUpload","dynamicUpdate","_staticUpload","staticUpdate","key","keyGen","getParticleSyncKey","generateParticleUpdate","generateParticleUpdateFunction","particles","uploadStatic","max","setDataWithSize","byteLength","float32View","uint32View","wgsl","ParticleShader","Shader","GlProgram","from","vertex","fragment","gpuProgram","GpuProgram","entryPoint","Texture","WHITE","uSampler","TextureStyle","uTranslationMatrix","Matrix","uColor","Color","uRound","uResolution","ParticleContainerPipe","adaptor","State","for2d","UniformGroup","_renderable","break","_initBuffer","_properties","children","_childrenDirty","blendMode","getAdjustedBlendModeBlend","transformationMatrix","worldTransform","copyTo","prepend","globalUniforms","globalUniformData","projectionMatrix","groupColorAlpha","GlParticleContainerPipe","GpuParticleContainerAdaptor","groups","uniformBatch","getUniformBindGroup","getTextureBindGroup","encoder","draw","GpuParticleContainerPipe","FilterPipe","filterEffect","renderPipeId","canBundle","action","pop","_filterEffect","_container","instruction","filter","_Filter","enabled","_state","padding","antialias","blendRequired","clipToViewport","addResource","apply","filterManager","input","output","clearMode","applyFilter","gpu","rest","Filter","PassthroughFilter","tempProjectionMatrix","quadGeometry","FilterData","skip","inputTexture","backTexture","filters","Bounds","outputRenderSurface","globalFrame","firstEnabledIndex","lastEnabledIndex","FilterSystem","_filterStackIndex","_filterStack","_filterGlobalUniforms","uInputSize","uInputPixel","uInputClamp","uOutputFrame","uGlobalFrame","uOutputTexture","_globalFilterBindGroup","BindGroup","activeBackTexture","_activeFilterData","filterData","_pushFilterData","renderTarget","renderSurface","colorTextureSource","colorTexture","rootResolution","rootAntialias","every","_calculateFilterArea","_calculateFilterBounds","rootViewPort","previousFilterData","_getPreviousFilterData","globalResolution","_findFilterResolution","offsetX","offsetY","_calculateGlobalFrame","_setupFilterTextures","generateFilteredTexture","addRect","rectangle","TexturePool","EMPTY","finishRenderPass","_applyFiltersToTexture","outputTexture","_popFilterData","returnTexture","getBackTexture","lastRenderSurface","previousBounds","backgroundResolution","_resolution","floor","ceil","copyToTexture","clear","isFinalTarget","rootRenderTarget","_findPreviousFilterOffset","_updateFilterUniforms","filterToApply","_getPassthroughFilter","_setupBindGroupsAndRender","calculateSpriteMatrix","outputMatrix","mappedMatrix","shared","renderGroup","parentRenderGroup","cacheToLocalTransform","invert","orig","translate","_passthroughFilter","batchUniforms","getUboResource","setResource","style","WEBGL","getRenderTarget","sourceWidth","sourceHeight","outputFrame","inputSize","inputPixel","inputClamp","pixelWidth","pixelHeight","rootTexture","isRoot","currentIndex","lastIndex","prevFilterData","renderables","actualMatrix","matrix","globalDisplayStatus","isCachedAsTexture","copyFrom","textureOffsetInverseTransform","append","_parentCacheAsTextureRenderGroup","inverseWorldTransform","addBounds","getGlobalRenderableBounds","filterArea","applyMatrix","getFastGlobalBounds","filterFrameTransform","firstEnabled","lastEnabled","flip","tempTexture","flop","t","viewPort","paddingMultiplier","Infinity","compatibleRenderers","backBuffer","useBackBuffer","warn","fitBounds","pad","isPositive","index","WebGLSystem","WebGPUSystem","updateTextBounds","text","_style","_getFinalPadding","_anchor","paddingOffset","_x","paddingOffsetY","_y","MeshGpuData","MeshPipe","uTransformMatrix","localUniformsBindGroup","_adaptor","init","mesh","meshData","_getMeshData","wasBatched","batched","isBatched","_geometry","indexSize","vertexSize","_getBatchableMesh","_textureMatrixUpdateId","batcher","gpuBatchableMesh","isRenderable","groupBlendMode","_a","_b","_initMeshData","_initBatchableMesh","gpuMesh","localUniformBit","header","main","end","localUniformBitGl","replace","tilingBit","tilingBitGl","TilingSpriteShader","bits","roundPixelsBit","tilingUniforms","uMapCoord","uClampFrame","uClampOffset","uTextureTransform","uSizeAnchor","updateUniforms","anchorX","anchorY","textureWidth","textureHeight","textureMatrix","a","b","c","d","tx","ty","mapCoord","QuadGeometry","sharedQuad","TilingSpriteGpuData","canBatch","slice","TilingSpritePipe","default2d","tilingSpriteData","_getTilingSpriteData","couldBatch","_updateCanBatch","tilingSprite","_updateBatchableMesh","bindGroup","_tileTransform","_initTilingSpriteData","renderableData","addressMode","applyAnchorToTexture","array","setUvs","setPositions","_nonPowOf2wrapping","context","supports","nonPowOf2wrapping","isSimple","isPowerOfTwo","GraphicsGpuData","batches","forEach","return","GraphicsPipe","runners","contextChange","graphics","gpuContext","graphicsContext","updateGpuContext","isBatchable","_rebuild","_addToBatcher","_getGpuDataForRenderable","getGpuContext","customShader","_updateBatchesForRenderable","batchPipe","_initGpuDataForRenderable","map","batchClone","get","BatchableGraphics","GraphicsContextSystem","Graphics","ViewContainer","GraphicsContext","_context","_ownedContext","on","onViewUpdate","allowChildren","off","updateBounds","containsPoint","point","_callContextMethod","method","setFillStyle","setStrokeStyle","fill","stroke","beginPath","cut","arc","arcTo","arcToSvg","bezierCurveTo","closePath","ellipse","circle","path","lineTo","moveTo","quadraticCurveTo","rect","roundRect","poly","regularPoly","roundPoly","roundShape","filletRect","chamferRect","star","svg","restore","save","getTransform","resetTransform","rotateTransform","scaleTransform","setTransform","translateTransform","fillStyle","strokeStyle","clone","deep","lineStyle","color","alpha","beginFill","endFill","defaultStrokeStyle","drawCircle","drawEllipse","drawPolygon","drawRect","drawRoundedRect","drawStar","localUniformMSDFBit","localUniformMSDFBitGl","mSDFBit","mSDFBitGl","SdfShader","maxTextures","uDistance","colorBit","generateTextureBatchBit","batchSamplers","getBatchSamplersUniformGroup","BitmapTextGraphics","BitmapTextPipe","bitmapText","graphicsRenderable","_getGpuBitmapText","syncWithProxy","_didTextUpdate","_updateContext","_updateDistanceField","proxyGraphics","bitmapFont","BitmapFontManager","getFont","distanceField","limits","maxBatchableTextures","chars","CanvasTextMetrics","graphemeSegmenter","currentY","baseLineOffset","bitmapTextLayout","getBitmapTextLayout","_stroke","tint","applyFillAsTint","_fill","fontSize","fontMetrics","lineHeight","linePositionYShift","lines","line","charPositions","char","charData","round","xOffset","yOffset","initGpuText","proxyRenderable","fontFamily","dynamicFont","Cache","dx","sqrt","dy","worldScale","abs","fontScale","baseRenderedFontSize","distance","range","proxy","groupColor","localDisplayStatus","groupAlpha","batcherName","packAsQuad","indexOffset","attributeOffset","_batch","_uvUpdateId","_topology","reset","uvBuffer","transformedUvs","_transformedUvs","_updateID","multiplyUvs","attributeSize","ResizePlugin","Object","defineProperty","dom","globalThis","removeEventListener","queueResize","_resizeTo","addEventListener","resize","_cancelResize","_resizeId","requestAnimationFrame","cancelAnimationFrame","window","innerWidth","innerHeight","clientWidth","clientHeight","render","resizeTo","Application","TickerPlugin","assign","autoStart","sharedTicker","ticker","_ticker","remove","LOW","stop","start","Ticker","oldTicker","color32BitToUniform","abgr","out","blendModeIds","normal","multiply","screen","overlay","erase","_State","polygonOffset","blend","depthMask","offsets","cullMode","culling","clockwiseFrontFace","depthTest","_blendMode","_blendModeId","_polygonOffset","toString","BatchableHTMLText","BatchableSprite","generatingTexture","currentKey","resolutionChange","_autoResolution","htmlText","getReferenceCount","returnTexturePromise","texturePromise","decreaseReferenceCount","HTMLTextPipe","gpuText","_getGpuText","newKey","styleKey","batchableHTMLText","_updateGpuText","catch","e","console","error","oldTexturePromise","getTexturePromise","finally","structureDidChange","nssvg","nsxhtml","HTMLTextRenderData","svgRoot","document","createElementNS","foreignObject","domElement","styleElement","setAttribute","overflow","appendChild","createImage","src","canvasAndContext","FontStylePromiseCache","Map","tempHTMLTextRenderData","HTMLTextSystem","_activeTextures","_createCanvas","WEBGPU","getTexture","getManagedTexture","textKey","_increaseReferenceCount","promise","_buildTexturePromise","then","usageCount","activeTexture","_cleanUp","textureStyle","htmlTextData","fontFamilies","dedupe","matches","match","addFontFamily","fontFamily2","Array","isArray","split","trim","tagStyles","extractFontFamilies","fontCSS","async","fontPromises","has","entries","promises","entry","url","faces","face","weight","dataSrc","response","fetch","blob","reader","FileReader","Promise","resolve","reject","onloadend","result","onerror","readAsDataURL","loadFontAsBase64","fontWeight","fontStyle","loadFontCSS","all","css","getFontCss","measured","fontStyleCSS","htmlTextRenderData","innerHTML","cssStyle","textContent","body","contentBounds","getBoundingClientRect","doublePadding","measureHtmlText","svgURL","XMLSerializer","serializeToString","getSVGUrl","delay","resolve2","setTimeout","onload","encodeURIComponent","crossOrigin","loadSVGImage","userAgent","getNavigator","test","isSafari","CanvasPool","getOptimalCanvasAndContext","clearRect","drawImage","getTemporaryCanvasFromImage","canvas","initSource","returnCanvasAndContext","CanvasSystem","_attributeStart","BatchableText","canvasText","CanvasTextPipe","batchableText","_internalCanvas","_internalContext","checkRow","checkColumn","top","bottom","getCanvasBoundingBox","createCanvas","getContext","willReadFrequently","globalCompositeOperation","globalAlpha","ensureInternalCanvas","TypeError","getImageData","left","right","Rectangle","strokeRect","tempRect","CanvasTextGenerator","getCanvasAndContext","measureText","_renderTextToCanvas","font","fontStringFromTextStyle","lineWidths","maxLineWidth","fontProperties","textBaseline","lineWidth","miterLimit","lineJoin","lineCap","cap","linePositionX","linePositionY","passesCount","dropShadow","isShadowPass","dsOffsetText","dsOffsetShadow","shadowOptions","dropShadowColor","dropShadowAlpha","shadowColor","setValue","setAlpha","toRgbaString","dropShadowBlur","blur","dropShadowDistance","shadowBlur","shadowOffsetX","cos","angle","shadowOffsetY","sin","getCanvasFillStyle","strokePadding","strokeWidth","i2","ascent","align","_drawLetterSpacing","isStroke","letterSpacing","useExperimentalLetterSpacing","experimentalLetterSpacingSupported","experimentalLetterSpacing","textLetterSpacing","strokeText","fillText","currentPosition","stringArray","previousWidth","currentWidth","currentChar","textStr","CanvasTextSystem","_textKey","TextStyle","filteredTexture","_applyFilters","renderTextToCanvas","currentRenderTarget","resultTexture"],"sourceRoot":""}